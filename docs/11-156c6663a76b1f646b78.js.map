{"version":3,"sources":["webpack:///./node_modules/polybooljs/lib/epsilon.js","webpack:///./node_modules/plotly.js/src/plots/polar/legacy/area_attributes.js","webpack:///./node_modules/plotly.js/src/lib/make_trace_groups.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/plotly.js/src/lib/index.js","webpack:///./node_modules/plotly.js/src/lib/mod.js","webpack:///./node_modules/plotly.js/src/components/color/index.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/constants.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/layout_attributes.js","webpack:///./node_modules/plotly.js/src/components/drawing/attributes.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/tick_value_defaults.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/clean_ticks.js","webpack:///./node_modules/plotly.js/src/components/color/attributes.js","webpack:///./node_modules/plotly.js/src/lib/search.js","webpack:///./node_modules/is-browser/client.js","webpack:///./node_modules/plotly.js/src/traces/scatter/constants.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.fixed.js","webpack:///./node_modules/plotly.js/src/traces/scatter/subtypes.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.from-code-point.js","webpack:///./node_modules/plotly.js/src/traces/sankey/defaults.js","webpack:///./node_modules/plotly.js/src/plots/array_container_defaults.js","webpack:///./node_modules/plotly.js/src/constants/numerical.js","webpack:///./node_modules/plotly.js/src/components/fx/hover.js","webpack:///./node_modules/is-string-blank/index.js","webpack:///./node_modules/plotly.js/src/lib/matrix.js","webpack:///./node_modules/plotly.js/src/lib/clean_number.js","webpack:///./node_modules/plotly.js/src/components/colorscale/attributes.js","webpack:///./node_modules/plotly.js/src/lib/to_log_range.js","webpack:///./node_modules/plotly.js/src/lib/svg_text_utils.js","webpack:///./node_modules/plotly.js/src/lib/notifier.js","webpack:///./node_modules/plotly.js/src/lib/regex.js","webpack:///./node_modules/plotly.js/src/traces/sankey/constants.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/axes.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/axis_autotype.js","webpack:///./node_modules/plotly.js/src/lib/gup.js","webpack:///./node_modules/d3-force/src/center.js","webpack:///./node_modules/d3-force/src/constant.js","webpack:///./node_modules/d3-force/src/jiggle.js","webpack:///./node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-force/src/collide.js","webpack:///./node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-quadtree/src/visitAfter.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-force/src/manyBody.js","webpack:///./node_modules/d3-force/src/radial.js","webpack:///./node_modules/d3-force/src/x.js","webpack:///./node_modules/d3-force/src/y.js","webpack:///./node_modules/d3-force/src/index.js","webpack:///./node_modules/plotly.js/src/components/colorscale/layout_attributes.js","webpack:///./node_modules/plotly.js/src/lib/setcursor.js","webpack:///./node_modules/plotly.js/src/lib/is_plain_object.js","webpack:///./node_modules/plotly.js/src/components/dragelement/cursor.js","webpack:///./node_modules/plotly.js/src/components/modebar/buttons.js","webpack:///./node_modules/plotly.js/src/traces/scatter/attributes.js","webpack:///./node_modules/has-passive-events/index.js","webpack:///./node_modules/plotly.js/src/lib/dom.js","webpack:///./node_modules/plotly.js/src/components/modebar/modebar.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/select.js","webpack:///./node_modules/plotly.js/src/traces/scatter/make_bubble_size_func.js","webpack:///./node_modules/plotly.js/src/components/titles/index.js","webpack:///./node_modules/fast-isnumeric/index.js","webpack:///./node_modules/plotly.js/src/lib/geometry2d.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/set_convert.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/d3-shape/src/link/index.js","webpack:///./node_modules/plotly.js/src/components/colorscale/cross_trace_defaults.js","webpack:///./node_modules/plotly.js/src/components/fx/hoverlabel_defaults.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.reflect.own-keys.js","webpack:///./node_modules/plotly.js/src/components/colorscale/helpers.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/tick_mark_defaults.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_date-to-iso-string.js","webpack:///./node_modules/polybooljs/index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_typed.js","webpack:///./src/plotly/base_plot.js","webpack:///./node_modules/plotly.js/src/components/dragelement/align.js","webpack:///./node_modules/plotly.js/src/traces/sankey/select.js","webpack:///./node_modules/has-hover/index.js","webpack:///./node_modules/@plotly/d3-sankey-circular/dist/d3-sankey-circular.es.js","webpack:///./node_modules/plotly.js/src/lib/relative_attr.js","webpack:///./node_modules/plotly.js/src/components/drawing/symbol_defs.js","webpack:///./node_modules/plotly.js/src/lib/identity.js","webpack:///./node_modules/polybooljs/lib/geojson.js","webpack:///./node_modules/plotly.js/src/registry.js","webpack:///./node_modules/plotly.js/src/components/colorscale/calc.js","webpack:///./node_modules/plotly.js/src/plot_api/plot_config.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/axis_ids.js","webpack:///./node_modules/plotly.js/src/lib/relink_private.js","webpack:///./node_modules/plotly.js/src/components/colorscale/defaults.js","webpack:///./node_modules/plotly.js/src/plots/command.js","webpack:///./node_modules/plotly.js/src/components/colorscale/scales.js","webpack:///./node_modules/plotly.js/src/components/dragelement/index.js","webpack:///./node_modules/strongly-connected-components/scc.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/tick_label_defaults.js","webpack:///./node_modules/plotly.js/src/lib/filter_unique.js","webpack:///./node_modules/plotly.js/src/plots/animation_attributes.js","webpack:///./node_modules/plotly.js/src/lib/push_unique.js","webpack:///./node_modules/plotly.js/src/lib/keyed_container.js","webpack:///./node_modules/plotly.js/src/traces/sankey/calc.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/plotly.js/src/constants/alignment.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.number.constructor.js","webpack:///./node_modules/plotly.js/src/components/colorbar/attributes.js","webpack:///./node_modules/plotly.js/src/lib/dates.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/plotly.js/src/lib/coerce.js","webpack:///./node_modules/tinycolor2/tinycolor.js","webpack:///./node_modules/plotly.js/src/plot_api/plot_schema.js","webpack:///./src/plotly/render.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/constraints.js","webpack:///./node_modules/plotly.js/src/lib/array.js","webpack:///./node_modules/plotly.js/src/lib/filter_visible.js","webpack:///./node_modules/plotly.js/src/lib/anchor_utils.js","webpack:///./node_modules/plotly.js/src/lib/angles.js","webpack:///./node_modules/d3/d3.js","webpack:///./node_modules/d3-collection/src/map.js","webpack:///./node_modules/d3-collection/src/nest.js","webpack:///./node_modules/d3-collection/src/set.js","webpack:///./node_modules/d3-collection/src/index.js","webpack:///./node_modules/plotly.js/src/components/colorscale/layout_defaults.js","webpack:///./node_modules/plotly.js/src/constants/xmlns_namespaces.js","webpack:///./node_modules/plotly.js/src/components/colorbar/has_colorbar.js","webpack:///./node_modules/plotly.js/src/constants/interactions.js","webpack:///./node_modules/plotly.js/src/lib/nested_property.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.reflect.apply.js","webpack:///./node_modules/plotly.js/src/fonts/ploticon.js","webpack:///./node_modules/plotly.js/src/constants/docs.js","webpack:///./node_modules/plotly.js/src/components/fx/constants.js","webpack:///./node_modules/plotly.js/src/components/fx/click.js","webpack:///./node_modules/plotly.js/src/lib/throttle.js","webpack:///./node_modules/elementary-circuits-directed-graph/johnson.js","webpack:///./node_modules/plotly.js/src/components/drawing/index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-repeat.js","webpack:///./node_modules/plotly.js/src/plots/domain.js","webpack:///./node_modules/plotly.js/src/lib/clear_gl_canvases.js","webpack:///./node_modules/plotly.js/src/components/fx/calc.js","webpack:///./node_modules/plotly.js/src/plots/pad_attributes.js","webpack:///./node_modules/plotly.js/src/traces/sankey/attributes.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/plotly.js/src/lib/events.js","webpack:///./node_modules/plotly.js/src/components/dragelement/unhover.js","webpack:///./node_modules/mouse-event-offset/index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.number.is-nan.js","webpack:///./node_modules/plotly.js/src/components/colorbar/defaults.js","webpack:///./node_modules/plotly.js/src/lib/extend.js","webpack:///./src/plotly/sankey.js","webpack:///./node_modules/plotly.js/src/components/fx/layout_attributes.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/scale_zoom.js","webpack:///./node_modules/plotly.js/src/plots/template_attributes.js","webpack:///./node_modules/plotly.js/src/components/modebar/index.js","webpack:///./node_modules/plotly.js/src/plots/font_attributes.js","webpack:///./node_modules/polybooljs/lib/intersecter.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.array.fill.js","webpack:///./src/plotly/plot.js","webpack:///./node_modules/plotly.js/src/components/fx/layout_defaults.js","webpack:///./node_modules/plotly.js/src/plot_api/subroutines.js","webpack:///./node_modules/plotly.js/src/lib/stats.js","webpack:///./node_modules/plotly.js/src/lib/clear_responsive.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-interpolate/src/basis.js","webpack:///./node_modules/d3-interpolate/src/basisClosed.js","webpack:///./node_modules/d3-interpolate/src/constant.js","webpack:///./node_modules/d3-interpolate/src/color.js","webpack:///./node_modules/d3-interpolate/src/rgb.js","webpack:///./node_modules/d3-interpolate/src/numberArray.js","webpack:///./node_modules/d3-interpolate/src/array.js","webpack:///./node_modules/d3-interpolate/src/date.js","webpack:///./node_modules/d3-interpolate/src/number.js","webpack:///./node_modules/d3-interpolate/src/object.js","webpack:///./node_modules/d3-interpolate/src/string.js","webpack:///./node_modules/d3-interpolate/src/transform/parse.js","webpack:///./node_modules/d3-interpolate/src/value.js","webpack:///./node_modules/d3-interpolate/src/discrete.js","webpack:///./node_modules/d3-interpolate/src/hue.js","webpack:///./node_modules/d3-interpolate/src/round.js","webpack:///./node_modules/d3-interpolate/src/transform/decompose.js","webpack:///./node_modules/d3-interpolate/src/transform/index.js","webpack:///./node_modules/d3-interpolate/src/zoom.js","webpack:///./node_modules/d3-interpolate/src/hsl.js","webpack:///./node_modules/d3-color/src/math.js","webpack:///./node_modules/d3-color/src/lab.js","webpack:///./node_modules/d3-interpolate/src/lab.js","webpack:///./node_modules/d3-interpolate/src/hcl.js","webpack:///./node_modules/d3-color/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/piecewise.js","webpack:///./node_modules/d3-interpolate/src/quantize.js","webpack:///./node_modules/d3-interpolate/src/index.js","webpack:///./node_modules/plotly.js/src/components/fx/attributes.js","webpack:///./node_modules/plotly.js/src/lib/localize.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.date.to-iso-string.js","webpack:///./node_modules/plotly.js/src/components/fx/index.js","webpack:///./node_modules/polybooljs/lib/segment-chainer.js","webpack:///./node_modules/plotly.js/src/plot_api/plot_template.js","webpack:///./node_modules/plotly.js/src/plots/layout_attributes.js","webpack:///./node_modules/polybooljs/lib/build-log.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.anchor.js","webpack:///./node_modules/plotly.js/src/plots/attributes.js","webpack:///./node_modules/plotly.js/src/plots/frame_attributes.js","webpack:///./node_modules/plotly.js/src/components/modebar/manage.js","webpack:///./node_modules/plotly.js/src/plots/get_data.js","webpack:///./node_modules/plotly.js/src/lib/loggers.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.typed.data-view.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/d3-sankey/src/align.js","webpack:///./node_modules/d3-sankey/src/constant.js","webpack:///./node_modules/d3-sankey/src/sankey.js","webpack:///./node_modules/d3-sankey/src/sankeyLinkHorizontal.js","webpack:///./node_modules/d3-sankey/src/index.js","webpack:///./node_modules/plotly.js/src/lib/noop.js","webpack:///./node_modules/plotly.js/src/plots/polar/legacy/axis_attributes.js","webpack:///./node_modules/plotly.js/src/lib/polygon.js","webpack:///./node_modules/plotly.js/src/plots/plots.js","webpack:///./node_modules/plotly.js/src/components/fx/layout_global_defaults.js","webpack:///./node_modules/polybooljs/lib/segment-selector.js","webpack:///./node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-array/src/cross.js","webpack:///./node_modules/d3-array/src/number.js","webpack:///./node_modules/d3-array/src/array.js","webpack:///./node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-array/src/threshold/sturges.js","webpack:///./node_modules/d3-array/src/max.js","webpack:///./node_modules/d3-array/src/mean.js","webpack:///./node_modules/d3-array/src/min.js","webpack:///./node_modules/d3-array/src/sum.js","webpack:///./node_modules/d3-array/src/index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_typed-buffer.js","webpack:///./node_modules/polybooljs/lib/linked-list.js","webpack:///./node_modules/plotly.js/src/components/colorscale/index.js","webpack:///./node_modules/plotly.js/src/components/fx/helpers.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.link.js","webpack:///./node_modules/plotly.js/src/components/fx/defaults.js","webpack:///./node_modules/plotly.js/src/lib/override_cursor.js","webpack:///./node_modules/plotly.js/src/plot_api/edit_types.js","webpack:///./node_modules/plotly.js/src/plots/cartesian/autorange.js"],"names":["module","exports","eps","my","epsilon","v","pointAboveOrOnLine","pt","left","right","Ax","Ay","Bx","By","Cx","pointBetween","p","d_py_ly","d_rx_lx","d_px_lx","d_ry_ly","dot","pointsSameX","p1","p2","Math","abs","pointsSameY","pointsSame","pointsCompare","pointsCollinear","pt1","pt2","pt3","dx1","dy1","dx2","dy2","linesIntersect","a0","a1","b0","b1","adx","ady","bdx","bdy","axb","dx","dy","A","B","ret","alongA","alongB","pointInsideRegion","region","x","y","last_x","length","last_y","inside","i","curr_x","curr_y","scatterAttrs","scatterMarkerAttrs","marker","extendFlat","deprecationWarning","join","r","description","t","color","size","symbol","opacity","editType","d3","traceLayer","cdModule","cls","traces","selectAll","replace","data","cd","trace","uid","exit","remove","enter","append","attr","order","k","classed","each","select","this","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","warned","w","Error","String","name","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","Array","unwrapListeners","arrayClone","listenerCount","n","copy","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","isNumeric","numConstants","FP_SAFE","BADNUM","lib","nestedProperty","keyedContainer","relativeAttr","isPlainObject","toLogRange","relinkPrivateKeys","arrayModule","isTypedArray","isArrayOrTypedArray","isArray1D","ensureArray","maxRowLength","minRowLength","modModule","mod","modHalf","coerceModule","valObjectMeta","coerce","coerce2","coerceFont","coerceHoverinfo","coerceSelectionMarkerOpacity","validate","datesModule","dateTime2ms","isDateTime","ms2DateTime","ms2DateTimeLocal","cleanDate","isJSDate","formatDate","incrementMonth","dateTick0","dfltRange","findExactDates","MIN_MS","MAX_MS","searchModule","findBin","sorterAsc","sorterDes","distinctVals","roundUp","sort","findIndexOfMin","statsModule","aggNums","mean","median","midRange","variance","stdev","interp","matrixModule","init2dArray","transposeRagged","translationMatrix","rotationMatrix","rotationXYMatrix","apply2DTransform","apply2DTransform2","anglesModule","deg2rad","rad2deg","angleDelta","angleDist","isFullCircle","isAngleInsideSector","isPtInsideSector","pathArc","pathSector","pathAnnulus","anchorUtils","isLeftAnchor","isCenterAnchor","isRightAnchor","isTopAnchor","isMiddleAnchor","isBottomAnchor","geom2dModule","segmentsIntersect","segmentDistance","getTextLocation","clearLocationCache","getVisibleSegment","findPointOnPath","extendModule","extendDeep","extendDeepAll","extendDeepNoArrays","loggersModule","log","regexModule","counterRegex","counter","throttleModule","throttle","throttleDone","done","clearThrottle","clear","domModule","makePtIndex2PtNumber","indexToPoints","ptIndex2ptNumber","pts","j","getGraphDiv","isPlotDiv","removeElement","addStyleRule","addRelatedStyleRule","deleteRelatedStyleRule","clearResponsive","makeTraceGroups","_","notifier","filterUnique","filterVisible","pushUnique","cleanNumber","ensureNumber","isIndex","noop","identity","repeat","cnt","out","swapAttrs","cont","attrList","part1","part2","xp","yp","temp","raiseToTop","elem","parentNode","appendChild","cancelTransition","selection","transition","duration","constrain","v0","v1","max","min","bBoxIntersect","a","b","pad","top","bottom","simpleMap","array","func","x1","x2","randstr","bits","base","_recursion","digits","pow","res","Infinity","rem","floor","random","toString","parsed","parseInt","OptionControl","opt","optname","self","optObj","optionList","smooth","arrayIn","FWHM","round","alen","alen2","wlen","arrayOut","cos","PI","syncOrAsync","sequence","finalStep","continueAsync","fni","splice","then","promiseError","stripTrailingSlash","str","substr","noneOrAll","containerIn","containerOut","hasAny","hasAll","val","mergeArray","traceAttr","cdAttr","fn","hasFn","imax","mergeArrayCastPositive","isFinite","fillArray","castOption","ptNumber","astr","isArray","extractOption","calcPt","calcKey","traceKey","traceVal","tagSelected","calcTrace","ptNumber2cdIndex","selectedpoints","_indexToPoints","ptIndex","cdIndex","selected","selIndices2selPoints","getTargetArray","transformOpts","minExtend","obj1","obj2","objOut","charAt","slice","subarray","titleCase","s","toUpperCase","containsAny","fragments","indexOf","isIE","window","navigator","msSaveBlob","IS_IE9_OR_BELOW_REGEX","isIE9orBelow","test","userAgent","IS_SAFARI_REGEX","isSafari","isD3Selection","obj","ensureSingle","parent","nodeType","className","enterFn","sel","layer","ensureSingleById","id","objectFromPath","path","tmpObj","split","el","parts","match","dottedPropertyRegex","indexedPropertyRegex","expandObjectPaths","prop","datum","idx","dest","trailingPath","hasOwnProperty","numSeparate","separators","separatethousands","thousandsRe","decimalSep","thouSep","TEMPLATE_STRING_REGEX","SIMPLE_PROPERTY_REGEX","templateString","string","getterCache","dummy","isValidTextValue","hovertemplateWarnings","hovertemplateString","templateFormatString","texttemplateWarnings","texttemplateString","TEMPLATE_STRING_FORMAT_SEPARATOR","labels","d3locale","opts","format","fmt","numberFormat","timeFormat","utc","time","ms","subplotSort","l","numA","numB","charA","charCodeAt","charB","isNumA","isNumB","randSeed","seedPseudoRandom","pseudoRandom","lastVal","fillText","contOut","fill","text","htx","tx","formatPercent","ratio","toFixed","isHidden","gd","display","getComputedStyle","getTextTransform","transform","noCenter","textX","textY","targetX","targetY","anchorX","anchorY","rotate","scale","ensureUniformFontSize","baseFont","_fullLayout","uniformtext","minsize","d","tinycolor","colorAttrs","defaults","defaultLine","lightLine","background","cleanOne","valTrim","trim","rgba","rgbStr","tinyRGB","tc","c","toRgb","g","rgb","cstr","getAlpha","addOpacity","op","combine","front","back","fc","toRgbString","bc","bcflat","fcflat","contrast","lightAmount","darkAmount","isDark","lighten","darken","stroke","style","clean","container","el0","idRegex","attrRegex","xAxisMatch","yAxisMatch","AX_ID_PATTERN","AX_NAME_PATTERN","SUBPLOT_PATTERN","MINDRAG","MINSELECT","MINZOOM","DRAGGERSIZE","BENDPX","REDRAWDELAY","SELECTDELAY","SELECTID","DFLTRANGEX","DFLTRANGEY","traceLayerClasses","clipOnAxisFalseQuery","layerValue2layerClass","fontAttrs","dash","templatedArray","FORMAT_LINK","DATE_FORMAT_LINK","constants","visible","valType","role","dflt","title","font","standoff","values","_noTemplating","autorange","impliedEdits","rangemode","range","items","anim","fixedrange","scaleanchor","scaleratio","constraintoward","matches","tickmode","tick0","dtick","nticks","tickvals","ticktext","ticks","tickson","mirror","ticklen","tickwidth","tickcolor","showticklabels","automargin","showspikes","spikecolor","spikethickness","spikedash","spikemode","flags","spikesnap","tickfont","tickangle","tickprefix","showtickprefix","ticksuffix","showticksuffix","showexponent","exponentformat","tickformat","tickformatstops","enabled","dtickrange","hoverformat","showline","linecolor","linewidth","showgrid","gridcolor","gridwidth","zeroline","zerolinecolor","zerolinewidth","showdividers","dividercolor","dividerwidth","anchor","side","overlaying","domain","categoryorder","categoryarray","uirevision","_deprecated","autotick","titlefont","cleanTicks","axType","calendar","Lib","ONEDAY","isLog","isDate","isCat","dtickDflt","prefix","dtickNum","borderLine","lightFraction","loggers","lessThan","lessOrEqual","greaterThan","greaterOrEqual","bins","linelow","start","ceil","n1","n2","binSize","valsIn","vals","minDiff","errDiff","v2","reverse","mid","low","high","dlow","dhigh","rounded","sortFn","notOrdered","notReversed","pairOrder","ind","PTS_LINESONLY","minTolerance","toleranceGrowth","maxScreensAway","eventDataKeys","createHTML","hasLines","mode","hasMarkers","hasText","isBubble","$export","toAbsoluteIndex","fromCharCode","$fromCodePoint","fromCodePoint","S","F","code","aLen","attributes","Color","handleDomainDefaults","handleHoverLabelDefaults","Template","handleArrayContainerDefaults","concentrationscalesDefaults","In","Out","link","colorscales","traceIn","traceOut","defaultColor","layout","hoverlabelDefault","hoverlabel","nodeIn","node","nodeOut","newContainer","coerceNode","hoverinfo","colors","colorway","label","map","defaultNodePalette","linkIn","linkOut","coerceLink","dfltArrangement","defaultLinkColor","paper_bgcolor","getLuminance","handleItemDefaults","_length","parentObjIn","parentObjOut","itemOut","inclusionAttr","previousContOut","contIn","templater","arrayTemplater","itemIn","newItem","_index","defaultItems","MAX_VALUE","ONEAVGYEAR","ONEAVGMONTH","ONEHOUR","ONEMIN","ONESEC","EPOCHJD","ALMOST_EQUAL","LOG_CLIP","MINUS_SIGN","Events","svgTextUtils","overrideCursor","Drawing","dragElement","Axes","Registry","helpers","YANGLE","YA_RADIANS","YFACTOR","sin","YSHIFTX","YSHIFTY","HOVERARROWSIZE","HOVERTEXTPAD","hover","evt","subplot","noHoverEvent","_uid","HOVERID","HOVERMINTIME","subplots","fullLayout","plots","_plots","plotinfo","hasCartesian","_has","overlayedSubplots","overlays","pi","xaArray","yaArray","supportsCompare","spId","xaxis","yaxis","_subplot","hovermode","calcdata","querySelector","_dragging","unhoverRaw","xvalArray","yvalArray","itemnum","curvenum","subplotId","subploti","xval","yval","pointData","closedataPreviousLength","hoverdistance","spikedistance","hoverData","searchData","spikePoints","hLinePoint","vLinePoint","hasOneHorizontalTrace","curveNumber","orientation","isTraceInSubplots","xpx","ypx","triggerHandler","dbb","getBoundingClientRect","clientX","clientY","pointerX","_offset","pointerY","flat","p2c","distance","_module","getSubplot","xa","ya","maxHoverDistance","maxSpikeDistance","spikeDistance","xSpike","ySpike","x0","y0","y1","xLabelVal","yLabelVal","zLabelVal","_splomScenes","scene","pointNumber","hoverPoints","newPoints","_hoverlayer","newPoint","newPointNum","cleanPoint","closestPoints","filter","point","tmpPoint","closestVPoints","closestVPt","fillSpikePoint","closestHPoints","closestHPt","selectClosestPoint","pointsData","thisSpikeDistance","resultPoint","minDistance","spikelineOpts","outerContainer","_paperdiv","event","oldspikepoints","_spikepoints","newspikepoints","tmpHPoint","tmpVPoint","result","spikesChanged","createSpikelines","d1","d2","oldhoverdata","_hoverdata","newhoverdata","eventData","makeEventData","hovertemplate","ht","rotateLabels","bgColor","plot_bgcolor","labelOpts","commonLabelOpts","hoverLabels","createHoverText","axKey","donepositioning","topOverlap","bottomOverlap","pti","sumdp","nummoves","axSign","nLabels","pointgroups","constrainGroup","grp","minPt","maxPt","pmin","pos","dp","pmax","deleteCount","del","ax","axIsX","_id","rng","traceIndex","posref","by","width","height","g0","g1","p0","forEach","hoverPt","offset","hoverAvoidOverlaps","alignHoverText","tagName","hasClickToShow","getComponentMethod","oldPt","newPt","pointNumbers","hoverChanged","points","xaxes","yaxes","xvals","yvals","_hover","loneHover","hoverItems","multiHover","hoverItem","xLabel","yLabel","zLabel","idealAlign","borderColor","fontFamily","fontSize","fontColor","nameLength","textAlign","hovertemplateLabels","container3","outerContainer3","fullOpts","hoverLabel","lastBottomY","topY","anchorIndex","EXTRA_STRING_REGEX","HOVERFONT","HOVERFONTSIZE","c0","commonAttr","t0","t00","outerContainerBB","outerTop","outerWidth","outerHeight","showCommonLabel","traceHoverinfo","allHaveZ","commonLabel","lpath","ltext","commonBgColor","bgcolor","commonStroke","bordercolor","contrastColor","commonLabelFont","family","positionText","convertToTspans","lx","ly","tbb","topsign","halfWidth","sgn","leftsign","clipPath","halfHeight","lty","clipId","ltx","tester","dummyBB","textClip","_topclips","setClipUrl","color0","numsColor","nameColor","nameOverride","_meta","plainText","extraText","_d3locale","extra","tx2","tx2width","tx2height","t2bb","anchorStartOK","anchorEndOK","hty","txTotalWidth","ty0","bx","txwidth","txHalfWidth","overflowR","overflowL","horzSign","alignShift","end","middle","txx","tx2x","offsetX","offsetY","posX","posY","setRect","cd0","pass","getVal","hoverLabelText","xVal","c2d","yVal","xerr","xeText","tickText","c2l","xerrneg","yerr","yeText","yerrneg","infomode","gs","_size","showY","showX","hLinePointX","hLinePointY","xBase","xEndSpike","dfltHLineColor","readability","yMode","yThickness","yColor","xEdge","getPxPosition","xAcross0","_counterDomainMin","xAcross1","_counterDomainMax","insert","y2","dashStyle","cx","cy","vLinePointX","vLinePointY","yBase","yEndSpike","dfltVLineColor","xMode","xThickness","xColor","yEdge","yAcross0","yAcross1","h","allowedTags","rowLength","colLength","z","maxlen","zlen","yTranspose","alpha","xy","at","xys","JUNK","colorbarAttrs","palettes","scales","paletteStr","colorAttr","colorAttrFull","cLetter","onlyIfNumerical","Boolean","noScale","showScaleDflt","colorscaleDflt","editTypeOverride","contextHead","effectDesc","auto","autoFull","minFull","maxFull","minmaxFull","autoImpliedEdits","minmaxImpliedEdits","attrs","arrayOk","colorscale","autocolorscale","autoColorDflt","reversescale","showscale","colorbar","noColorAxis","coloraxis","regex","LN10","newVal","xmlnsNamespaces","LINE_SPACING","getSize","_selection","_dimension","FIND_TEX","_context","_callback","tex","MathJax","empty","svgClass","_promises","Promise","resolve","config","_texString","_config","originalRenderer","originalConfig","originalProcessSectionDelay","tmpDiv","Hub","Queue","processSectionDelay","Config","messageStyle","tex2jax","inlineMath","displayAlign","menuSettings","renderer","setRenderer","randomID","visibility","LT_MATCH","GT_MATCH","Typeset","glyphDefs","svgBBox","texToSVG","_svgEl","_glyphDefs","_svgBBox","newSvg","showText","mathjaxGroup","insertBefore","cloneNode","firstChild","preserveAspectRatio","overflow","newSvgW","newSvgH","newX","containerNode","NEWLINES","currentNode","hasLink","nodeStack","currentLine","newLine","lineNode","document","createElementNS","svg","oldNodeStack","enterNode","nodeSpec","nodeAttrs","href","popup","onclick","newNode","addTextNode","resetter","RESET_DY","SHIFT_DY","createTextNode","exitNode","innerNode","BR_TAG","SPLIT_TAGS","parti","ONE_TAG","tagType","toLowerCase","tagStyle","TAG_STYLES","convertEntities","css","getQuotedMatch","STYLEMATCH","COLORMATCH","HREFMATCH","dummyAnchor","createElement","PROTOCOLS","protocol","encodeURI","decodeURI","TARGETMATCH","POPUPMATCH","buildSVGText","sup","sub","span","em","BR_TAG_ALL","_str","re","eLen","oldParts","newParts","prevTag","pLen","pLen2","entityToUnicode","mu","amp","lt","gt","nbsp","times","plusmn","deg","ENTITY_MATCH","fullMatch","innerMatch","stringFromCodePoint","stringFromCharCode","alignHTMLWith","_base","options","thisRect","getTop","getLeft","alignH","horizontalAlign","alignV","verticalAlign","bRect","cRect","lineCount","setOrGet","thisX","thisY","nodeName","makeEditable","_delegate","delegate","dispatch","handlerElement","handleClick","div","cStyle","parseFloat","initialText","outline","margin","padding","contenteditable","_editing","textContent","mathjaxClass","edit","editDiv","activeElement","blur","which","cancel","input","selectElementContents","appendEditable","_el","createRange","selectNodeContents","getSelection","removeAllRanges","addRange","focus","immediate","rebind","NOTEDATA","displayLength","ts","notifierContainer","thisText","note","html","killNote","lines","delay","thisIndex","head","tail","openEnded","matchBeginning","fullTail","startWithPrefix","RegExp","nodeTextOffsetHorizontal","nodeTextOffsetVertical","nodePadAcross","sankeyIterations","forceIterations","forceTicksPerFrame","ease","cn","sankey","sankeyLinks","sankeyLink","sankeyNodeSet","sankeyNode","nodeRect","nodeCapture","nodeCentered","nodeLabelGuide","nodeLabel","nodeLabelTextPath","Plots","Titles","axAttrs","alignmentConstants","MID_SHIFT","CAP_SHIFT","OPPOSITE_SIDE","axes","setConvert","autoType","axisIds","id2name","name2id","cleanId","listIds","getFromId","getFromTrace","getAutoRange","findExtremes","coerceRef","extraOption","axLetter","axlist","_subplots","refAttr","attrDef","coercePosition","axRef","cleanPos","fraction2r","cleanPosition","redrawComponents","axIds","_redrawOneComp","moduleName","methodName","stashName","shortCircuit","method","stash","indices","getDataConversions","targetArray","d2cTarget","_categories","d2c","toNum","getDataToCoordFunc","counterLetter","minDtick","newDiff","newFirst","allow","_minDtick","_forceTick0","saveRangeInitial","overwrite","axList","hasOneAxisChanged","isNew","_rangeInitial","hasChanged","saveShowSpikeInitial","allSpikesEnabled","_showSpikeInitial","_showspikes","_cartesianSpikesEnabled","autoBin","nbins","is2d","dummyAx","dataMin","dataMax","_dataSpan","c2r","size0","distinctData","msexp","minSize","autoTicks","binEnd","finalSize","binStart","tickIncrement","tickFirst","edgecount","midcount","intcount","blankCount","nearEdge","dataCount","binshift","autoShiftNumericBins","stats","exactDays","numMonths","exactYears","exactMonths","nextBinStart","autoShiftMonthBins","prepTicks","r2l","minPx","nt","_name","l2r","autoTickRound","calcTicks","ticksOut","r0expanded","r1expanded","tickMin","tickMax","tickVal2l","d2l_noadd","d2l","vali","tickTextObj","arrayTicks","_tmin","startTick","endTick","axrev","tickVals","isDLog","xPrevious","maxTicks","minor","isAngular","_tmax","_prevDateHead","_inCalcTicks","roundBase10","roundBase24","roundBase60","roundDays","roundLog1","roundLog2","roundAngles","roundDTick","roughDTick","roundingSet","_tickexponent","_tickround","tick0ms","tick0str","tick0len","tick1len","r2d","maxend","rangeexp","isSIFormat","beyondSI","tf","getBase","roughX2","olddtick","tType","dtSigned","tickset","frac","sRound","r0","tmin","dtNum","t1","mult","newDTick","noSuffixPrefix","arrayMode","extraPrecision","showAttr","firstOrLast","first","last","hideexp","tr","getTickFormat","M","headStr","dateStr","_dateFormat","_extraFormat","splitIndex","dtChar0","numFormat","absP","exponentFormat","firstChar","formatLog","tt","formatCategory","cats","tt2","text2","formatMultiCategory","thetaunit","num","almostEq","precision","e","findPrecision","number","gcd","findGCD","num2frac","isNeg","formatAngle","formatLinear","inbounds","l2p","xbnd","val2","logOffScale","SIPREFIXES","exponent","fmtoverride","tickRound","ah","_numFormat","signedExponent","_separators","getSecondaryLabelVals","lookup","tickDataFn","axInfo","approxTitleDepth","extraLines","clipEnds","selectTickLabel","gTick","mj","axAutoMarginID","axMirrorAutoMarginID","rangeSliderAutoMarginID","mergeAxisGroups","intoSet","fromSet","swapAxisGroup","xIds","yIds","xFullAxes","yFullAxes","allAxKeys","noSwapAttrs","numericTypes","keyi","allEqual","coerceLinearX","coerceLinearY","xVali","yVali","swapAxisAttrs","_dfltTitle","annotations","ann","xref","yref","dfltTitle","np","tickstop","stopi","convertFn","leftDtick","rightDtick","convertToMs","compareLogTicks","priority","leftPriority","rightPriority","isProperLogStop","isLeftDtickNull","isRightDtickNull","isDtickInRangeLeft","isDtickInRangeRight","getSubplots","subplotObj","allSubplots","cartesian","gl2d","findSubplotsWithAxis","aParts","bParts","axMatch","subplotsWithAx","sp","makeClipPaths","_hasOnlyLargeSploms","fullWidth","fullHeight","xaList","yaList","clipList","axClips","_clips","draw","_paper","xaxislayer","yaxislayer","gridlayer","zerolinelayer","_infolayer","axId","axDone","drawOne","_r","_rl","setScale","mainPlotinfo","_mainSubplot","mainAxLayer","mainLinePosition","_mainLinePosition","mainMirrorPosition","_mainMirrorPosition","_vals","_selections","_tickAngles","_prevTickAngles","_depth","llbboxes","valsClipped","transFn","makeTransFn","boundaryVals","_push","bndIndex","xb","getBoundaryVals","gridVals","_gridVals","dividerVals","current","getDividerVals","_subplotsWith","finishedGrids","counterAxis","mainCounterID","_mainAxis","gridPath","drawGrid","drawZeroLine","tickSigns","getTickSigns","tickSubplots","mirrorTickPath","fullTickPath","tickPath","mainTickPath","makeTickPath","_anchorAxis","dividerLookup","drawTicks","_linepositions","linepositions","spTickPath","seq","drawLabels","labelFns","makeLabelFns","bboxKey","getLabelLevelBbox","repositionOnUpdate","secondary","dividers","crispRound","drawDividers","hasRangeSlider","llbbox","mirrorPush","rangeSliderPush","sMirror","outsideTickLen","domainIndices","rExtra","xr","lExtra","xl","bExtra","yb","tExtra","yt","autoMargin","skipTitle","titleStandoff","avoid","tickLabels","translation","getTranslate","offsetLeft","offsetTop","propContainer","propName","placeholder","drawTitle","suffix","thisLabel","bb","bBox","calcLabelLevelBbox","sideOpposite","main","angle","ticksOnOutsideLabels","labelStandoff","labelShift","rad","ff","flipIt","xFn","yFn","anchorFn","heightFn","crisp","counterAx","shouldShowZeroLine","isArrayMode","xi","grid","_gw","show","zl","da","db","idSort","tickAngle","prevAngle","labelsReady","positionLabels","nLines","lineHeight","anchorHeight","mjShift","newPromise","autoangle","all","_redrawFromAutoMarginCount","maxFontSize","lbbArray","vLen","rotate90","_m","gap","lbb","anchorAxis","mainCounterAxis","zeroPosition","lineNearZero","ax2","tolerance","closeEnough","pos2","linePositions","mainplotinfo","counterLetterAxes","counterAxis2","anyCounterAxLineAtZero","fullData","_fullData","traceIs","hasBarsOrFill","allowAutoMargin","swap","axGroups","groups","groupsi","yi","groupj","group0","makeAxisGroups","noMultiCategory","inc","dcnt","ncnt","seen","ai","stri","moreDates","curvenums","curvecats","category","linearOK","wrap","keyFun","descend","nodes","force","sx","sy","initialize","tree","xm","ym","_root","leaf","_x0","_y0","_x1","_y1","_x","_y","next","defaultX","defaultY","quadtree","Quadtree","NaN","addAll","leaf_copy","treeProto","vx","vy","child","source","add","cover","xz","yz","visit","extent","find","q","x3","y3","quads","radius","sqrt","retainer","previous","removeAll","root","callback","visitAfter","radii","strength","iterations","ri","ri2","prepare","quad","rj","jiggle","constant","nodeById","nodeId","strengths","distances","bias","links","initializeStrength","initializeDistance","Dispatch","parseTypenames","typenames","types","constructor","typename","T","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","restart","wake","timerFlush","t2","sleep","nap","poke","clearTimeout","clearInterval","setInterval","stop","initialAngle","simulation","_alpha","_alphaMin","_alphaDecay","_alphaTarget","_velocityDecay","forces","stepper","step","tick","_nodes","fx","fy","initializeNodes","initializeForce","alphaMin","alphaDecay","alphaTarget","velocityDecay","closest","distanceMin2","distanceMax2","theta2","accumulate","weight","distanceMin","distanceMax","theta","radiuses","colorScaleAttrs","msg","sequential","Reds","sequentialminus","Blues","diverging","RdBu","_isSubplotObj","el3","csr","process","versions","cursorset","xanchor","yanchor","Icons","modeBarButtons","handleCartesian","ev","button","currentTarget","getAttribute","aobj","axName","mag","r1","rangeInitial","rangeNow","rangeNew","_isHoriz","setAttribute","handleDrag3d","sceneIds","gl3d","layoutUpdate","val2d","dragmode","handleCamera3d","didUpdate","sceneId","camera","aspectratio","aspectmode","_scene","viewInitial","up","eye","center","getNextHover3d","_previousVal","currentSpikes","sceneLayout","hovermodeAStr","axis","spikeAStr","handleGeo","geoIds","geo","geoLayout","projection","newScale","resetView","getNextHover","toggleHover","newHover","handleMapboxZoom","subplotIds","mapbox","aObj","zoom","subplotType","viewKeys","toImage","toImageButtonOptions","icon","click","filename","sendDataToCloud","disk","editInChartStudio","pencil","zoom2d","zoombox","pan2d","pan","select2d","selectbox","lasso2d","lasso","zoomIn2d","zoom_plus","zoomOut2d","zoom_minus","autoScale2d","autoscale","resetScale2d","home","hoverClosestCartesian","tooltip_basic","gravity","hoverCompareCartesian","tooltip_compare","zoom3d","pan3d","orbitRotation","tableRotation","resetCameraDefault3d","resetCameraLastSave3d","movie","hoverClosest3d","toggle","zoomInGeo","zoomOutGeo","resetGeo","hoverClosestGeo","hoverClosestGl2d","hoverClosestPie","resetViewSankey","_viewInitial","resetViews","toggleSpikelines","spikeline","areSpikesOn","setSpikelineVisibility","resetViewMapbox","zoomInMapbox","zoomOutMapbox","texttemplateAttrs","hovertemplateAttrs","stackgroup","groupnorm","stackgaps","texttemplate","hovertext","extras","hoveron","line","shape","smoothing","simplify","connectgaps","cliponaxis","fillcolor","symbolList","maxdisplayed","sizeref","sizemin","sizemode","gradient","textfont","unselected","textposition","colorEditType","isBrowser","supported","addEventListener","removeEventListener","detect","elParent","removeChild","selector","styleString","getElementById","styleSheet","sheet","insertRule","addRule","gdElement","HTMLElement","Parser","DOMParser","ModeBar","element","update","graphInfo","buttons","proto","modeBarId","displayModeBar","modebar","bgSelector","activecolor","needsNewButtons","hasButtons","needsNewLogo","hasLogo","displaylogo","needsNewLocale","locale","removeAllButtons","updateButtons","watermark","logoGroup","getLogo","childNodes","updateActiveButton","_this","buttonElements","buttonsNames","buttonGroup","group","createGroup","buttonConfig","buttonName","createButton","createIcon","question","thisIcon","iconHeight","ascent","descent","svgNS","parseFromString","buttonClicked","dataAttrClicked","thisval","dataAttr","isToggleButton","button3","currentButtons","newplotlylogo","destroy","modeBar","_modebardiv","_privateplot","polybool","Fx","polygon","clearGlCanvases","redrawReglTraces","filteredPolygon","polygonTester","getAxId","selectOnClick","xAxes","yAxes","dragOptions","polygonOutlines","searchTraces","searchInfo","currentSelectionDef","selectionTester","thisTracesSelection","pointOrBinSelected","subtract","sendEvents","clickmode","hoverOnBox","isHoverDataSet","coerceSelectionsCache","clickedPtInfo","hoverDatum","_expandedIndex","binNumber","extractClickedPtInfo","determineSearchTraces","tracesWithSelectedPts","isOnlyThisBinSelected","isOnlyOnePointSelected","isPointOrBinSelected","selectPoints","updateSelectedState","clearSelectionsCache","shiftKey","newPointSelectionDef","multiTester","selectionDefs","fillSelectionItem","drawSelection","mergedPolygons","isPointSelectionDef","o","newPointNumTester","pointSelectionDef","xmin","xmax","ymin","ymax","contains","omitFirstEdge","idxWantedTrace","isRect","degenerate","testers","contained","selectingOnSameSubplot","_lastSelectedSubplot","hasModifierKey","altKey","clearSelect","xAxisIds","yAxisIds","_xaxes","_yaxes","info","createSearchInfo","sankeyInfo","calcData","polygons","outlines","paths","ppts","ptNum","ptNums","ptNumToTest","fullInputTrace","_fullInput","tracePreGUI","_tracePreGUI","_input","pointIndices","pointIndex","hasRegl","styleOnSelect","node3","nodeRangePlot3","zoomlayer","_zoomlayer","prepSelect","startX","startY","filterPoly","currentPolygon","zoomLayer","dragBBox","xs","ys","path0","pw","ph","allAxes","fillRangeItems","corners","throttleID","p2r","p2d","axValue","ascending","poly","ranges","dataPts","lassoPoints","filtered","moveFn","dx0","dy0","direction","selectdirection","addPt","difference","regions","inverted","union","mergePolygons","thisSelection","traceSelection","traceSelections","clickFn","numClicks","doneFn","doneFnCompleted","sizeRef","sizeMin","baseFn","baseSize","interactConstants","numStripRE","titleClass","editAttr","containerGroup","isplaceholder","txt","editable","edits","elShouldExist","titleLayout","titleEl","scootTitle","transformVal","fontWeight","previousPromises","titleElIn","titleGroup","backside","shiftSign","titlebb","paperbb","maxshift","maxShift","avoidbb","shiftTemplate","SHOW_PLACEHOLDER","HIDE_PLACEHOLDER","allBlankCharCodes","original","locationCache","workingPath","workingTextWidth","x4","y4","det","u","perpDistance2","xab","yab","llab","xac","yac","fcAB","xbc","ybc","crossProduct","x12","y12","x34","y34","ll12","ll34","dist2","totalPathLen","positionOnPath","textWidth","getPointAtLength","atan","pCenter","bounds","buffer","pt0","ptTotal","pMin","pTotal","getTotalLength","pMax","getDistToPlot","distToPlot","total","isClosed","coord","diff","pathLength","iterationLimit","mul","fromLog","isValidCategory","toLog","clip","dt2ms","msecTenths","msRounded","ms2dt","getCategoryName","setCategoryIndex","_categoriesMap","curLength","getCategoryIndex","getCategoryPosition","_b","p2l","px","l2c","c2p","d2r","r2c","l2d","d2p","r2p","r2c_just_indices","setupMultiCategory","traceIndices","_traceIndices","matchGroups","_axisMatchGroups","axId2","ind0","ind1","rl0","rl1","r2fraction","cleanRange","rangeAttr","linCenter","usePrivateRange","_replotting","makeCalcdata","cal","setMultiCategoryIndex","dv","isValidRange","isPtWithinRange","clearCalc","emptyCategories","found","categories","categoriesMap","_initialCategories","sortByInitialCategories","affectedTraces","_matchGroup","tau","tauEpsilon","Path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","tan","acos","t01","t21","arc","ccw","cw","rect","linkSource","linkTarget","curve","argv","curveHorizontal","linkHorizontal","hasColorscale","extractOpts","relinkColorAttrs","outerCont","cbOpt","_colorAx","cOpts","isAuto","cbOpts","_colorAxes","namelength","align","isValidScale","isValid","constantAttrs","letterAttrs","colorAx","cont2","k2","_sync","extractScale","cmin","cmax","scl","flipScale","N","si","sclNew","makeColorScaleFunc","specs","_range","sclFunc","_sclFunc","linear","clamp","noNumericCheck","returnArray","colorArray2rbga","colorArray","colorObj","containerStr","colorKey","isArrayWithOneNumber","makeColorScaleFuncFromTrace","layoutAttributes","tickLen","tickWidth","tickColor","outerTicks","fails","getTime","$toISOString","toISOString","lz","getUTCFullYear","getUTCMilliseconds","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","PolyBool","BuildLog","Epsilon","Intersecter","SegmentChainer","SegmentSelector","GeoJSON","_buildLog","_epsilon","operate","poly1","poly2","seg1","segments","seg2","seg3","buildLog","bl","addRegion","calculate","segments1","segments2","combined","inverted1","inverted2","selectUnion","selectIntersect","intersect","selectDifference","selectDifferenceRev","differenceRev","selectXor","xor","polygonFromGeoJSON","geojson","toPolygon","polygonToGeoJSON","fromPolygon","Typed","global","hide","TYPED","VIEW","ABV","ArrayBuffer","DataView","CONSTR","TypedArrayConstructors","overrideAll","require","getModuleCalcData","plot","fxAttrs","setCursor","subplotUpdateFx","dragMode","cursor","bgRect","_bgRect","_sankey","translateX","translateY","newGroups","traceNow","oldGroups","newGroup","findNode","graph","childrenNodes","_count","baseLayoutAttrOverrides","updateFx","newFullData","newFullLayout","oldFullData","oldFullLayout","hadPlot","hasPlot","vmin","vmax","vc","partOfGroup","hasHover","matchMedia","targetDepth","depth","justify","sourceLinks","targetLinks","_typeof","Symbol","iterator","ascendingSourceBreadth","ascendingBreadth","ascendingTargetBreadth","partOfCycle","circularLinkType","nodeCenter","linkSourceCenter","linkTargetCenter","defaultId","defaultNodes","defaultLinks","getNodeID","sankeyCircular","py","paddingRatio","circularLinkGap","sortNodes","computeNodeLinks","identifyCircles","computeNodeValues","computeNodeDepths","selectCircularLinkTypes","computeNodeBreadths","computeLinkBreadths","linkSortingIterations","iteration","sortSourceLinks","sortTargetLinks","resolveNodeLinkOverlaps","fillHeight","addCircularPathData","circular","column","columns","sortKeys","entries","thisPadding","ky","totalTopLinksWidth","totalBottomLinksWidth","totalRightLinksWidth","totalLeftLinksWidth","maxColumn","getCircleMargins","currentWidth","currentHeight","scaleX","scaleY","scaleSankeySize","nodesLength","numberOfNonSelfLinkingCycles","initializeNodeBreadth","resolveCollisions","relaxLeftAndRight","columnsLength","nodeHeight","avgTargetY","avgSourceY","y0cycle","y1cycle","nodeAlign","nodeWidth","nodePadding","nodePaddingRatio","circularLinkID","adjList","cycles","circularLinks","numberOfTops","numberOfBottoms","selfLinking","linkAngle","adjacent","opposite","sourceCount","targetCount","onlyCircularLink","nodeSourceLinks","nodeTargetLinks","calcVerticalBuffer","sortLinkColumnAscending","link1","link2","circularPathData","verticalBuffer","bufferOverThisLink","minY","arcRadius","leftNodeBuffer","rightNodeBuffer","sourceWidth","sourceX","sourceY","leftSmallArcRadius","leftLargeArcRadius","rightSmallArcRadius","rightLargeArcRadius","verticalFullExtent","verticalLeftInnerExtent","verticalRightInnerExtent","thisColumn","thisCircularLinkType","sameColumnLinks","sortLinkSourceYDescending","sortLinkSourceYAscending","radiusOffset","sortLinkTargetYDescending","sortLinkTargetYAscending","leftInnerExtent","rightInnerExtent","leftFullExtent","rightFullExtent","pathString","createCircularPathString","normalPath","linkColumnDistance","linkXLength","linkPerpendicularYToLinkSource","longerLink","shorterLink","heightFromY1ToPependicular","incline","linkPerpendicularYToLinkTarget","columnToTest","maxColumnToTest","numberOfColumnsToTest","B0_t","B1_t","B2_t","B3_t","py_t","linkY0AtColumn","linkY1AtColumn","adjustNodeHeight","otherNode","nodesOverlap","nodeA","nodeB","sankeyY0","sankeyY1","moveNodes","nodesSourceLinks","nodeSourceLinksLength","sameInclines","link2Adj","ySourceOffset","offsetFromBottom","nodesTargetLinks","nodesTargetLinksLength","yTargetOffset","minY0","ASCEND","SIMPLEATTR","baseAttr","circle","rs","square","diamond","rd","cross","rc","rc2","rx","ne","se","sw","nw","rt","r2","pentagon","hexagon","hexagon2","octagon","star","hexagram","aPart","rp","hourglass","noDot","bowtie","needLine","noFill","asterisk","hash","GeoPoly","coords","LineString","ls","reg","coordinates","regionInsideRegion","children","roots","addChild","forceWinding","clockwise","winding","geopolys","addExterior","getInterior","Loggers","ExtendModule","basePlotAttributes","baseLayoutAttributes","registerTraceModule","thisType","categoriesIn","meta","modules","subplotsRegistry","basePlotModule","plotType","componentName","findArrayRegexps","componentsRegistry","mergeComponentAttrsToSubplot","registerSubplot","categoryObj","allCategories","allTypes","mergeComponentAttrsToTrace","traceLayoutAttributes","bpmName","styleRules","PlotlyGeoAssets","topojson","registerComponentModule","traceType","_isLinkedToArray","layoutArrayContainers","subplotName","transformType","transformsRegistry","mergeComponentAttrsToTransform","schema","registerTransformModule","hasTransform","hasCalcTransform","calcTransform","supplyDefaults","registerLocale","baseLocale","newDict","dictionary","newFormat","hasDict","hasFormat","locales","localeRegistry","localeObj","baseLocaleObj","arrayAttrRegexps","_arrayAttrRegexps","layoutArrayRegexes","componentSchema","traceAttrs","transforms","transformAttrs","subplotModule","subplotAttrs","subplotAttr","componentLayoutAttrs","getTraceType","apiMethodRegistry","collectableSubplotTypes","register","_modules","newModule","moduleType","getModule","getTransformIndices","minVal","maxVal","configAttributes","staticPlot","plotlyServerURL","annotationPosition","annotationTail","annotationText","axisTitleText","colorbarPosition","colorbarTitleText","legendPosition","legendText","shapePosition","titleText","autosizable","responsive","fillFrame","frameMargins","scrollZoom","doubleClick","doubleClickDelay","showAxisDragHandles","showAxisRangeEntryBoxes","showTips","showLink","linkText","noBlank","sendData","showSources","showSendToCloud","showEditInChartStudio","modeBarButtonsToRemove","modeBarButtonsToAdd","plotGlPixelRatio","setBackground","topojsonURL","mapboxAccessToken","logging","notifyOnLogging","queueLength","globalTransforms","dfltConfig","crawl","src","axNum","only2d","idList","idi","sceneIds3D","zaxis","subplotLists","fullTrace","id1","id2","letter1","letter2","getAxisGroup","toContainer","fromContainer","fromVal","toVal","minLen","hasColorbar","colorbarDefaults","npMaybe","parentCont","colorScaleDefaults","parentContIn","parentContOut","inTrace","template","_template","thisFn","colorAxes","colorbarVisuals","minIn","maxIn","validMinMax","autoColorscaleDflt","sclIn","sclTemplate","bindingValueHasChanged","binding","cache","changed","computeLayoutBindings","bindings","attrName","computeDataBindings","_attr","thisTraces","nAttr","tmp","thisPath","manageCommandObserver","commandList","onchange","_commandObserver","lookupTable","hasSimpleAPICommandBindings","check","disable","enable","checkEvents","_internalOn","_removeInternalListener","bindingsByValue","refBinding","command","computeAPICommandBindings","executeAPICommand","_method","allArgs","reject","computeAnimateBindings","defaultScale","isValidScaleArray","highestVal","parseScale","JSON","parse","mouseOffset","supportsPassive","getCursor","unhover","coverSlip","zIndex","body","pointerOffset","changedTouches","raw","newMouseDownTime","dragCover","initialEvent","initialTarget","rightClick","_mouseDownTime","pointerEvents","onmousedown","onStart","_ontouchstart","passive","ontouchstart","clampFn","minDrag","_dragged","ctrlKey","prepFn","documentElement","onDone","preventDefault","onMove","dxdy","_dragdata","e2","MouseEvent","createEvent","initMouseEvent","bubbles","cancelable","view","detail","screenX","screenY","metaKey","relatedTarget","dispatchEvent","numVertices","lowValue","active","scc","sccLinks","newE","components","sccAdjList","strongConnect","component","linkCount","allLinks","adjacencyList","getShowAttrDflt","showAttrs","every","tickformatstopDefaults","valueIn","valueOut","showAttrDflt","tickSuffixDflt","handlePrefixSuffix","contColor","dfltFontColor","tickFormat","tickformatStops","handleOtherDefaults","item","fromcurrent","frame","redraw","easing","ordering","itemStr","baseObj","keyName","valueName","baseProp","changeTypes","indexLookup","isSimpleValueProp","changeType","newValue","rename","newName","object","constructUpdate","tarjan","Colorscale","convertToD3Sankey","linkSpec","hasLinkColorArray","linkedNodes","componentCount","cscale","maxNodeId","nodeCount","groupLookup","nodeIndex","groupIndex","groupedLinks","concentrationscale","totalCount","hasNodeColorArray","nodeLen","sources","targets","some","circularityPresent","_links","_groups","_groupLookup","toObject","toLength","O","endPos","FROM_BL","FROM_TL","FROM_BR","has","cof","inheritIfRequired","toPrimitive","gOPN","gOPD","dP","$trim","$Number","Base","BROKEN_COF","TRIM","toNumber","argument","it","third","radix","maxCode","valueOf","axesAttrs","thicknessmode","thickness","lenmode","xpad","ypad","outlinecolor","outlinewidth","borderwidth","titleside","utcFormat","DATETIME_REGEXP","DATETIME_REGEXP_CN","YFIRST","getFullYear","isWorldCalendar","calendars","lpad","sunday","tzOffset","getTimezoneOffset","offsetTweak","getMinutes","getSeconds","getMilliseconds","comb","isWorld","s0","isChinese","H","cDate","calInstance","isIntercalary","newDate","toMonthIndex","toJD","date","UTC","setUTCFullYear","NINETYDAYS","THREEHOURS","FIVEMIN","includeTime","msec10","dateJD","timeMs","fromJD","getHours","fracMatch","modDateFormat","formatter","MAXSECONDS","extraFormat","year","month","timePart","timeStr","secStr","formatTime","dayMonthYear","dayMonth","THREEDAYS","dMonth","setUTCMonth","di","day","P","baseTraceAttrs","DESELECTDIM","valObjectDef","validateFunction","failed","propMock","coerceFunction","data_array","requiredOpts","otherOpts","propOut","enumerated","coerceNumber","integer","okToCoerce","strict","colorlist","subplotid","flaglist","vParts","vi","any","info_array","coercePart","propPart","twoD","dimensions","row","len2","vNew","vOut","arrayItems","arrayItems2D","innerItemsOnly","freeLength","attribute","propIn","valIn","dfltObj","layoutOut","moduleAttrs","valObj","_dataLength","smoDflt","usmoDflt","mo","trimLeft","trimRight","tinyCounter","mathRound","mathMin","mathMax","mathRandom","ok","named","names","matchers","exec","hsl","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","convertToPercentage","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","inputToRGB","_originalInput","_g","_a","_roundA","_format","_gradientType","gradientType","_ok","_tc_id","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","hex","pad2","rgbaToArgbHex","convertDecimalToHex","_desaturate","amount","toHsl","clamp01","_saturate","_greyscale","desaturate","_lighten","_brighten","_darken","_spin","hue","_complement","_triad","_tetrad","_splitcomplement","_analogous","results","slices","part","_monochromatic","toHsv","modification","getBrightness","isLight","getOriginalInput","getFormat","RsRGB","GsRGB","BsRGB","setAlpha","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","brighten","saturate","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","c1","c2","isReadable","wcag2","wcag2Parms","parms","level","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flipped","flip","isOnePointZero","processPercent","isPercentage","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","baseAttributes","frameAttributes","animationAttributes","polarAreaAttrs","polarAxisAttrs","editTypes","UNDERSCORE_ATTRS","recurseIntoValObject","valObject","newValObject","index2","getLayoutAttributes","handleBasePlotModule","radialaxis","angularaxis","assignPolarLayoutAttrs","xkey","insertAttrs","formatAttributes","getFramesAttributes","frames","makeSrcAttr","isValObject","mergeValTypeAndRole","itemName","formatArrayContainers","walk","stringify","baseAttrs","newAttrs","IS_SUBPLOT_OBJ","IS_LINKED_TO_ARRAY","DEPRECATED","copyBaseAttributes","copyModuleAttributes","fullAttrString","showlegend","legendgroup","animatable","getTraceAttributes","getTransformAttributes","defs","valObjects","metaKeys","animation","specifiedLevel","attrString","findArrayAttributes","baseContainer","baseAttrName","arrayAttributes","stack","isArrayStack","crawlIntoTrace","astrPartial","newAstrPartial","getTraceValObject","tNum","getLayoutValObject","basePlotModules","_basePlotModules","layoutAttrOverrides","baseOverrides","layoutHeadAttr","d3Sankey","d3SankeyCircular","d3Force","gup","interpolateNumber","sankeyModel","horizontal","nodePad","nodeThickness","sankeyLeft","linkSort","nodeSort","nodePointNumber","groupingNode","flowKey","flows","flowLinks","totalPerLabel","flow","labelConcentration","concentration","totalOutflow","concentrationOut","totalInflow","concenrationIn","computeLinkConcentrations","arrangement","resolveCollisionsTopToBottom","colX","orderedNodes","colNumber","lastX","snapToColumns","guid","nodeLineColor","nodeLineWidth","linkLineColor","linkLineWidth","valueFormat","valueformat","valueSuffix","valuesuffix","textFont","dragParallel","dragPerpendicular","forceLayouts","interactionState","dragInProgress","hovered","linkModel","traceId","tinyColorHue","tinyColorAlpha","linkPath","y0a","y0b","y1a","y1b","nodeModel","zoneThicknessPad","zoneLengthPad","visibleThickness","visibleLength","visibleWidth","visibleHeight","zoneX","zoneY","zoneWidth","zoneHeight","labelY","originalLayer","sizeAcross","darkBackground","uniqueNodeLabelPathId","figure","updateNodePositions","updateNodeShapes","updateShapes","sizeNode","salientEnough","sankeyTransform","nodeCentering","textGuidePath","sankeyInverseTransform","textFlip","nodeTextColor","nodeTextOffset","attachPointerEvents","eventSet","follow","attachDragHandler","callbacks","dragBehavior","behavior","drag","origin","_dragCover","saveCurrentDragPosition","nodeEvents","forceKey","switchToForceFormat","originalX","forceSimulation","forceCollide","maxVelocity","lastDraggedX","lastDraggedY","snappingForce","attachForce","faster","switchToSankeyFormat","sameLayer","persistFinalNodePositions","startForce","nodeX","nodeY","firstRender","dragcover","styledData","dragboxClassName","_draggers","linkEvents","distinctLayerPositions","originalY","originalLayerIndex","persistOriginalPlace","scaleZoom","makePadFn","concatExtremes","getConstraintOpts","thisID","allAxisIds","idj","axj","doesNotConstrainRange","linkableAxes","thisGroup","linkableAxesNoLoops","updateConstraintGroups","constraintGroups","groupi","keyj","thisGroupIndex","thisGroupKeys","baseScale","updateDomain","factor","inputDomain","_inputDomain","centerFraction","handleConstraintDefaults","matchOpts","scaleOpts","scaleanchorDflt","constrainDflt","_axisConstraintGroups","splomStash","_splomAxes","letter","enforce","axisID","normScale","axisIDs","minScale","maxScale","matchScale","normScales","hasAnyDomainConstraint","_inputRange","_constraintShrinkable","domainShrunk","rangeShrunk","rangeCenter","rangeMin","rangeMax","halfRange","outerMin","outerMax","getPad","extremes","minArray","maxArray","isConstrained","ab","isView","_rowLength","len0","_constructor","arg0","argi","posi","leni","allArray","totalLen","baseFilter","calcDataFilter","filterFn","twoPI","aBnds","s1","_path","aStart","aMid","aEnd","rStart","rEnd","isCircle","largeArc","rBnds","version","d3_arraySlice","d3_array","d3_document","d3_documentElement","ownerDocument","d3_window","defaultView","setProperty","d3_element_prototype","Element","d3_element_setAttribute","d3_element_setAttributeNS","setAttributeNS","d3_style_prototype","CSSStyleDeclaration","d3_style_setProperty","space","local","d3_ascending","d3_number","d3_numeric","d3_bisector","compare","lo","hi","descending","sum","quantile","numbers","deviation","d3_bisect","d3_transposeLength","bisectLeft","bisect","bisectRight","bisector","shuffle","i0","i1","permute","indexes","permutes","pairs","transpose","matrix","zip","merge","arrays","merged","d3_range_integerScale","d3_class","ctor","properties","d3_Map","d3_map_escape","d3_map_unescape","d3_map_has","d3_map_remove","d3_map_keys","d3_map_size","d3_map_empty","d3_Set","d3_identity","d3_rebind","d3_vendorSymbol","d3_vendorPrefixes","prefixName","nest","sortValues","rollup","mapType","keyValue","setter","valuesByKey","sortKey","keyMap","d3_noop","d3_dispatch","d3_dispatch_event","listenerByName","d3_eventPreventDefault","d3_eventSource","sourceEvent","d3_eventDispatch","of","thiz","argumentz","e1","e0","requote","d3_requote_re","d3_subclass","__proto__","property","d3_selection","d3_selectionPrototype","d3_select","d3_selectAll","querySelectorAll","_d3_selectMatches","d3_selectMatcher","Sizzle","matchesSelector","d3_selection_selector","d3_selection_selectorAll","subgroup","subnode","subgroups","__data__","d3_nsXhtml","d3_nsPrefix","xhtml","xlink","xml","xmlns","d3_selection_attr","ns","qualify","removeAttributeNS","removeAttribute","d3_collapse","d3_selection_classedRe","d3_selection_classes","d3_selection_classed","d3_selection_classedName","classList","lastIndex","d3_selection_style","removeProperty","d3_selection_property","d3_selection_creator","namespace","namespaceURI","d3_selectionRemove","d3_selection_dataNode","d3_selection_filter","d3_selection_sortComparator","comparator","d3_selection_each","d3_selection_enter","d3_selection_enterPrototype","getAttributeNS","getPropertyValue","innerHTML","before","groupData","nodeData","n0","updateNodes","enterNodes","exitNodes","nodeByKeyValue","keyValues","nextSibling","d3_selection_enterInsertBefore","j0","d3_selection_on","capture","d3_selection_onListener","d3_selection_onFilters","onRemove","$","d3_selection_onFilter","upgroup","mouseenter","mouseleave","related","compareDocumentPosition","d3_event_dragSelect","d3_event_dragId","d3_event_dragSuppress","suppressClick","mouse","d3_mousePoint","d3_mouse_bug44083","ownerSVGElement","createSVGPoint","scrollX","scrollY","ctm","border","getScreenCTM","pageX","pageY","matrixTransform","inverse","clientLeft","clientTop","d3_behavior_dragTouchId","identifier","touch","touches","mousedown","dragstart","touchstart","subject","move","dragOffset","correspondingElement","dragged","dragId","dragName","dragSubject","moved","ended","dragRestore","position0","position1","","2","","","","half","d3_radians","d3_degrees","d3_sgn","d3_cross2d","d3_acos","d3_asin","asin","d3_cosh","exp","d3_haversin","","SQRT2","interpolateZoom","ux0","uy0","w0","ux1","uy1","w1","coshr0","d3_sinh","translate0","center0","mousewheelTimer","touchtime","scaleExtent","d3_behavior_zoomInfinity","zooming","mousemove","mouseup","mousedowned","d3_behavior_zoomWheel","mousewheeled","dblclicked","touchstarted","location","scaleTo","translateTo","zoomTo","__chart__","rescale","invert","zoomstarted","zoomed","translate","zoomended","location0","d3_selection_interrupt","scale0","locations0","distance0","zoomName","touchmove","touchend","relocate","started","LN2","l0","l1","distance1","scale1","d3_behavior_zoomDelta","deltaY","deltaMode","wheelDelta","view1","d3_transitionInheritId","tween","d3_color","d3_hsl","d3_rgb_parse","d3_rgb_hsl","d3_hslPrototype","d3_hsl_rgb","m1","m2","vv","d3_rgb","d3_hcl","d3_lab_hcl","d3_lab","d3_rgb_lab","brighter","darker","hcl","d3_hclPrototype","d3_hcl_lab","d3_lab_K","lab","d3_labPrototype","d3_lab_rgb","d3_xyz_rgb","d3_lab_xyz","atan2","d3_xyz_lab","d3_rgbNumber","d3_rgbString","d3_rgbPrototype","d3_rgb_hex","d3_rgb_parseNumber","d3_rgb_names","d3_rgb_xyz","d3_functor","d3_xhrType","response","url","mimeType","d3_xhr","xhr","headers","request","XMLHttpRequest","responseType","respond","status","responseText","d3_xhrHasResponse","load","XDomainRequest","onload","onerror","onreadystatechange","readyState","onprogress","progress","header","send","open","setRequestHeader","overrideMimeType","beforesend","abort","d3_xhr_fixCallback","functor","dsv","delimiter","reFormat","delimiterCode","typedResponse","formatRow","formatValue","parseRows","eol","EOL","EOF","rows","I","token","formatRows","fieldSet","fields","field","csv","tsv","d3_timer_queueHead","d3_timer_queueTail","d3_timer_interval","d3_timer_timeout","d3_timer_frame","d3_timer","d3_timer_step","d3_timer_mark","d3_timer_sweep","d3_format_precision","flush","d3_formatPrefixes","d3_locale_numberFormat","locale_decimal","decimal","locale_thousands","thousands","locale_grouping","grouping","locale_currency","currency","formatGroup","substring","specifier","d3_format_re","sign","zfill","comma","d3_format_types","d3_format_typeDefault","zcomma","fullSuffix","negative","unit","formatPrefix","after","lastIndexOf","X","toPrecision","toExponential","d3_time","d3_date","d3_date_utc","getDate","getDay","getUTCDay","getMonth","setDate","d3_time_prototype","setUTCDate","setDay","setUTCDay","setFullYear","setHours","setUTCHours","setMilliseconds","setUTCMilliseconds","setMinutes","setUTCMinutes","setMonth","setSeconds","setUTCSeconds","setTime","d3_time_interval","d0","dt","d3_time_interval_utc","d3_locale_timeFormat","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_days","days","locale_shortDays","shortDays","locale_months","months","locale_shortMonths","shortMonths","d3_time_format","d3_time_formatPads","d3_time_formats","L","Z","d3_time_parse","localZ","W","U","d3_time_parsers","multi","d3_time_formatMulti","d3_time_periodLookup","d3_time_dayRe","d3_time_formatRe","d3_time_dayLookup","d3_time_formatLookup","d3_time_dayAbbrevRe","d3_time_dayAbbrevLookup","d3_time_monthRe","d3_time_monthLookup","d3_time_monthAbbrevRe","d3_time_monthAbbrevLookup","_d","d3_time_formatPad","dayOfYear","sundayOfYear","mondayOfYear","Y","d3_time_zone","d3_time_parseDay","d3_time_parseHour24","d3_time_parseDayOfYear","d3_time_parseMilliseconds","d3_time_parseMonthNumber","d3_time_parseMinutes","d3_time_parseSeconds","d3_time_parseWeekNumberSunday","d3_time_parseWeekdayNumber","d3_time_parseWeekNumberMonday","d3_time_parseYear","d3_time_parseFullYear","d3_time_parseZone","d3_time_parseLiteralPercent","years","week","weeks","weekOfYear","d3_time_numberRe","d3_time_percentRe","zs","zh","zm","formats","d3_locale_enUS","d3_adder","d3_adderSum","d3_adderTemp","reset","bv","av","d3_geo_streamGeometry","geometry","d3_geo_streamGeometryType","stream","d3_geo_streamObjectType","Feature","feature","FeatureCollection","features","Sphere","sphere","Point","MultiPoint","d3_geo_streamLine","MultiLineString","Polygon","d3_geo_streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","area","d3_geo_areaSum","d3_geo_area","d3_geo_centroidW0","d3_geo_centroidW1","d3_geo_centroidX0","d3_geo_centroidY0","d3_geo_centroidZ0","d3_geo_centroidX1","d3_geo_centroidY1","d3_geo_centroidZ1","d3_geo_centroidX2","d3_geo_centroidY2","d3_geo_centroidZ2","d3_geo_areaRingSum","d3_geo_areaRingStart","00","00","0","cos0","sin0","nextPoint","","","d","sd","ad","cos","sin","d3_geo_cartesian","spherical","d3_geo_cartesianDot","d3_geo_cartesianCross","d3_geo_cartesianAdd","d3_geo_cartesianScale","vector","d3_geo_cartesianNormalize","d3_geo_spherical","d3_geo_sphericalEqual","0","1","1","_","__","__","dSum","bound","ringPoint","ringStart","ringEnd","linePoint","normal","inflection","i","antimeridian","i","compareRanges","withinRange","best","centroid","d3_geo_centroid","d3_geo_centroidPoint","d3_geo_centroidLineStart","d3_geo_centroidLineEnd","d3_geo_centroidRingStart","d3_geo_centroidPointXYZ","z0","cz","d3_geo_compose","compose","d3_true","d3_geo_clipPolygon","clipStartInside","interpolate","segment","d3_geo_clipPolygonIntersection","d3_geo_clipPolygonLinkCircular","entry","isSubject","other","d3_geo_clip","pointVisible","clipLine","clipStart","rotatedClipStart","pointRing","meridian","parallel","meridianNormal","polarAngle","ring","point0","intersection","arc","d3_geo_pointInPolygon","polygonStarted","d3_geo_clipSort","pointLine","d3_geo_clipBufferListener","ringListener","ringSegments","d3_geo_clipSegmentLength1","rejoin","d3_geo_clipAntimeridian","_clean","s0","s1","cos1","sin0_1","d3_geo_clipAntimeridianIntersect","from","to","d3_geo_clipCircle","cr","smallRadius","notHemisphere","v00","_clean2","point2","point1","d3_geo_circleInterpolate","two","n2n2","n1n2","determinant","n1xn2","uu","","polar","q1","d3_geom_clipLine","ay","d3_geo_clipExtent","x__","y__","v__","x_","y_","v_","listener_","bufferListener","wn","insidePolygon","corner","comparePoints","ca","cb","d3_geo_conic","projectAt","d3_geo_projectionMutator","parallels","d3_geo_conicEqualArea","C","0","forward","0_y","clipExtent","_stream","output","valid","conicEqualArea","albers","albersUsa","_point","lower48Point","alaskaPoint","hawaiiPoint","lower48","alaska","hawaii","pointStream","lower48Stream","alaskaStream","hawaiiStream","d3_geo_pathAreaSum","d3_geo_pathAreaPolygon","d3_geo_pathBoundsX0","d3_geo_pathBoundsY0","d3_geo_pathBoundsX1","d3_geo_pathBoundsY1","d3_geo_pathArea","d3_geo_pathAreaRingStart","x00","y00","d3_geo_pathBounds","d3_geo_pathBuffer","pointCircle","d3_geo_pathBufferCircle","pointLineStart","lineEndPolygon","pointRadius","d3_geo_lengthSum","d3_geo_pathCentroid","d3_geo_pathCentroidPoint","d3_geo_pathCentroidLineStart","d3_geo_pathCentroidLineEnd","d3_geo_pathCentroidRingStart","d3_geo_pathContext","_pointRadius","d3_geo_resample","project","2","cosMinDistance","maxDepth","resample","resampleRecursive","resampleNone","d3_geo_transformPoint","a00","b00","c00","resampleLineTo","2","2","dz","d3_geo_pathProjectStream","d3_geo_projectionRadians","d3_geo_transform","d3_geo_projection","projectRotate","x","y","projectResample","","","preclip","postclip","clipAngle","d3_geo_rotation","invalidate","d3_geo_equirectangular","d3_geo_identityRotation","d3_geo_rotation","d3_geo_rotation","d3_geo_forwardRotation","rotation","cos","sin","cos","sin","sr","d3_geo_circleAngle","d3_geo_graticuleX","d3_geo_graticuleY","d3_source","d3_target","projectStream","contextStream","cacheStream","methods","_stream2","projectionMutator","equirectangular","","sin","cos","sin1","graticule","X1","X0","Y1","Y0","DX","DY","majorExtent","minorExtent","majorStep","minorStep","greatArc","source_","target_","cy0","sy0","cy1","sy1","kx0","ky0","kx1","ky1","d3_geo_length","d3_geo_azimuthal","azimuthal","cos","sinc","cosc","d3_geo_azimuthalEqualArea","coscos","azimuthalEqualArea","d3_geo_azimuthalEquidistant","d3_geo_conicConformal","d3_geo_mercator","d3_geo_conicEquidistant","G","azimuthalEquidistant","conicConformal","conicEquidistant","d3_geo_gnomonic","d3_geo_mercatorProjection","clipAuto","gnomonic","mercator","d3_geo_orthographic","orthographic","d3_geo_stereographic","d3_geo_transverseMercator","d3_geom_pointX","d3_geom_pointY","d3_geom_hullUpper","hull","hs","d3_geom_hullOrder","stereographic","transverseMercator","geom","vertices","flippedPoints","upper","lower","skipLeft","skipRight","d3_geom_polygonPrototype","d3_geom_polygonInside","d3_geom_polygonIntersect","x43","y43","ua","d3_geom_polygonClosed","d3_geom_voronoiEdges","d3_geom_voronoiCells","d3_geom_voronoiBeaches","d3_geom_voronoiFirstCircle","d3_geom_voronoiCircles","d3_geom_voronoiBeachPool","d3_geom_voronoiCirclePool","d3_geom_voronoiBeach","d3_geom_voronoiRedBlackNode","edge","site","d3_geom_voronoiCreateBeach","beach","d3_geom_voronoiDetachBeach","d3_geom_voronoiDetachCircle","d3_geom_voronoiRemoveBeach","vertex","disappearing","lArc","rArc","iArc","nArcs","d3_geom_voronoiSetEdgeEnd","d3_geom_voronoiCreateEdge","d3_geom_voronoiAttachCircle","d3_geom_voronoiAddBeach","dxl","dxr","directrix","d3_geom_voronoiLeftBreakPoint","d3_geom_voronoiRightBreakPoint","newArc","lSite","rSite","hb","hc","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","d3_geom_voronoiCell","edges","d3_geom_voronoiHalfEdgeOrder","d3_geom_voronoiCircle","cSite","ha","d3_geom_voronoiConnectEdge","vb","fm","fb","va","ry","d3_geom_voronoiEdge","d3_geom_voronoiHalfEdge","d3_geom_voronoiCreateBorderEdge","d3_geom_voronoiRedBlackTree","d3_geom_voronoiRedBlackRotateLeft","d3_geom_voronoiRedBlackRotateRight","d3_geom_voronoiRedBlackFirst","d3_geom_voronoi","sites","bbox","d3_geom_voronoiVertexOrder","d3_geom_voronoiClipEdges","cell","iHalfEdge","halfEdges","nHalfEdges","cells","iCell","d3_geom_voronoiCloseCells","diagram","grandpa","uncle","sibling","voronoi","d3_geom_voronoiClipExtent","triangles","d3_geom_quadtreeCompatX","d3_geom_quadtreeCompatY","d3_geom_quadtreeVisit","d3_geom_quadtreeFind","closestPoint","minDistance2","distance2","d3_interpolateRgb","ar","ag","br","bg","d3_interpolateObject","d3_interpolate","d3_interpolateNumber","d3_interpolateString","am","bm","bs","bi","d3_interpolate_numberA","d3_interpolate_numberB","delaunay","compat","x1_","y1_","x2_","y2_","nx","ny","insertChild","nPoint","below","interpolateRgb","interpolateObject","interpolateString","interpolators","d3_interpolateArray","na","nb","interpolateArray","d3_ease_default","d3_ease","d3_ease_quad","cubic","d3_ease_cubic","d3_ease_sin","d3_ease_exp","d3_ease_circle","elastic","bounce","d3_ease_bounce","d3_ease_mode","d3_ease_reverse","d3_ease_reflect","d3_ease_clamp","d3_ease_cubicInOut","t3","d3_interpolateRound","d3_transform","kx","d3_transformNormalize","kz","d3_transformDot","skew","interpolateHcl","ac","al","bh","interpolateHsl","as","interpolateLab","aa","ba","interpolateRound","baseVal","consolidate","d3_transformIdentity","d3_interpolateTransformPop","d3_interpolateTransform","ta","tb","d3_interpolateTranslate","ra","rb","d3_interpolateRotate","wa","wb","d3_interpolateSkew","ka","kb","d3_interpolateScale","d3_uninterpolateNumber","d3_uninterpolateClamp","d3_layout_bundlePath","lca","aNodes","d3_layout_bundleAncestors","bNodes","aNode","bNode","sharedNode","d3_layout_bundleLeastCommonAncestor","ancestors","d3_layout_forceDragstart","fixed","d3_layout_forceDragend","d3_layout_forceMouseover","d3_layout_forceMouseout","interpolateTransform","bundle","chord","chords","sortGroups","sortSubgroups","sortChords","relayout","groupSums","subgroupIndex","dj","subindex","startAngle","endAngle","resort","charges","friction","linkDistance","d3_layout_forceLinkDistance","linkStrength","d3_layout_forceLinkStrength","charge","chargeDistance2","d3_layout_forceChargeDistance2","repulse","dw","dn","pointCharge","dragmove","resume","d3_layout_forceAccumulate","chargeDistance","neighbors","dimension","candidates","d3_layout_hierarchyRebind","hierarchy","d3_layout_hierarchyLinks","d3_layout_hierarchyVisitBefore","d3_layout_hierarchyVisitAfter","nodes2","d3_layout_hierarchyChildren","d3_layout_hierarchyValue","d3_layout_hierarchySort","childs","revalue","partition","pie","d3_layout_pieSortByValue","padAngle","pa","arcs","d3_layout_stackX","d3_layout_stackY","d3_layout_stackOut","d3_layout_stackOrderDefault","d3_layout_stackOffsetZero","series","orders","offsets","d3_layout_stackOrders","d3_layout_stackOffsets","d3_layout_stackMaxIndex","sums","d3_layout_stackReduceSum","tops","bottoms","silhouette","wiggle","s2","s3","o0","expand","zero","reduce","d3_layout_stackSum","d3_layout_histogramBinSturges","d3_layout_histogramBinFixed","d3_layout_histogramRange","d3_layout_packSort","d3_layout_packInsert","_pack_next","_pack_prev","d3_layout_packSplice","d3_layout_packIntersects","dr","d3_layout_packSiblings","xMin","xMax","yMin","yMax","d3_layout_packLink","d3_layout_packPlace","isect","d3_layout_packUnlink","dc","d3_layout_treeSeparation","d3_layout_treeLeft","d3_layout_treeRight","d3_layout_treeMove","wm","wp","change","d3_layout_treeAncestor","vim","ancestor","d3_layout_treemapPadNull","d3_layout_treemapPad","d3_scaleExtent","d3_scaleRange","rangeExtent","d3_scale_bilinear","uninterpolate","d3_scale_nice","nice","d3_scale_niceStep","d3_scale_niceIdentity","histogram","frequency","valuer","ranger","binner","bin","thresholds","pack","d3_layout_packTransform","separation","nodeSize","root0","root1","node1","queue","wrapTree","firstWalk","secondWalk","siblings","d3_layout_treeShift","midpoint","vip","vop","vom","sip","sop","sim","som","apportion","cluster","previousNode","d3_layout_clusterX","d3_layout_clusterY","d3_layout_clusterLeft","d3_layout_clusterRight","treemap","stickies","sticky","squarify","score","remaining","worst","stickify","rmax","rmin","padFunction","padConstant","","","logNormal","bates","irwinHall","d3_scale_polylinear","d3_scale_linearRebind","d3_scale_linearNice","d3_scale_linearTickRange","d3_scale_linearTicks","d3_scale_linearTickFormat","d3_scale_linearPrecision","d3_scale_linearFormatSignificant","d3_scale_linearFormatPrecision","d3_scale_linear","rangeRound","d3_scale_log","positive","niced","d3_scale_logNiceNegative","d3_scale_logFormat","d3_scale_powPow","d3_scale_pow","powp","powb","ordinal","d3_scale_ordinal","rangeBand","steps","rangePoints","rangeRoundPoints","rangeBands","outerPadding","rangeRoundBands","category10","d3_category10","category20","d3_category20","category20b","d3_category20b","category20c","d3_category20c","d3_zero","d3_scale_quantile","quantiles","invertExtent","quantize","d3_scale_quantize","threshold","d3_scale_threshold","d3_scale_identity","innerRadius","d3_svg_arcInnerRadius","outerRadius","d3_svg_arcOuterRadius","cornerRadius","padRadius","d3_svg_arcAuto","d3_svg_arcStartAngle","d3_svg_arcEndAngle","d3_svg_arcPadAngle","circleSegment","ap","d3_svg_arcSweep","h1","h0","rc1","rc0","oc","kc","lc","t30","d3_svg_arcCornerTangents","t12","t03","ox","oy","D","cx0","cx1","d3_svg_line","defined","d3_svg_lineLinear","interpolateKey","tension","d3_svg_lineInterpolators","d3_svg_lineLinearClosed","d3_svg_lineStepBefore","d3_svg_lineStepAfter","basis","d3_svg_lineBasis","d3_svg_lineDot4","d3_svg_lineBasisBezier3","d3_svg_lineBasisBezier","cardinal","d3_svg_lineHermite","d3_svg_lineCardinalTangents","monotone","tangents","d3_svg_lineSlope","d3_svg_lineFiniteDifferences","d3_svg_lineMonotoneTangents","lp","d3_svg_lineBasisBezier1","d3_svg_lineBasisBezier2","d3_svg_lineRadial","d3_svg_area","interpolateReverse","points0","points1","fx0","fy0","fx1","fy1","d3_svg_chordRadius","d3_svg_diagonalProjection","d3_svg_diagonalRadialProjection","d3_svg_symbolSize","d3_svg_symbolType","d3_svg_symbolCircle","radial","diagonal","p3","projection_","d3_svg_symbols","d3_svg_symbolTan30","d3_svg_symbolSqrt3","symbolTypes","d3_transitionId","d3_transitionNamespace","d3_transitionInherit","d3_transitionNode","d3_transition","interrupt","d3_selection_interruptNS","lock","activeId","d3_transitionPrototype","d3_transition_tween","d3_transition_text","inherit","tweens","elapsed","cancelId","subnodes","nameNS","attrNull","attrNullNS","attrTween","attrTweenNS","styleNull","styleTween","inheritId","id0","tickFormat_","orient","d3_svg_axisDefaultOrient","innerTickSize","outerTickSize","tickPadding","tickArguments_","tickValues","tickTransform","tickEnter","tickExit","tickUpdate","tickSpacing","pathUpdate","lineEnter","lineUpdate","textEnter","textUpdate","d3_svg_axisX","d3_svg_axisY","d3_svg_axisOrients","tickSize","tickSubdivide","brush","xExtentDomain","yExtentDomain","xExtent","yExtent","xClamp","yClamp","resizes","d3_svg_brushResizes","brushstart","resize","d3_svg_brushCursor","gUpdate","backgroundUpdate","redrawX","redrawY","eventTarget","event_","resizing","resizingX","resizingY","dragging","keydown","keyup","brushmove","brushend","ex","ey","keyCode","move1","extent1","extent0","d3_time_formatUtc","d3_time_formatIso","d3_time_formatIsoNative","d3_time_scale","tickMethod","d3_time_scaleSteps","d3_time_scaleMilliseconds","d3_time_scaleDate","skip","skipped","iso","second","seconds","minute","minutes","hour","timezone","hours","d3_time_scaleLocalMethods","d3_time_scaleLocalFormat","d3_time_scaleUtcMethods","d3_time_scaleUtcFormat","d3_json","d3_html","selectNode","createContextualFragment","json","responseXML","Map","_sortValues","_rollup","_sortKeys","createResult","setResult","createObject","setObject","createMap","setMap","_entries","Set","layoutIn","colorAxIn","colorAxOut","coerceAx","svgAttrs","npGet","curPart","allSame","curCont","propStr","indexed","propParts","badContainer","npSet","ARGS_PATTERN","isDeletable","containerLevels","toDelete","setArrayAll","checkNewContainer","joinPropStr","newPart","toAdd","containerArray","innerParts","arrayVal","allSet","thisVal","thisPropStr","deleteThis","firstPart","nextPart","aFunction","anObject","rApply","fApply","thisArgument","argumentsList","annotationsDone","emitClick","stopImmediatePropagation","timerCache","_clearTimeout","minInterval","previousOnDone","circuits","blocked","Ak","circuit","unblock","cycle","adjacencyStructureSCC","minId","subgraph","leastVertexComponent","ccs","leastVertex","cc","vertexId","subTypes","makeBubbleSizeFn","appendArrayPointValue","drawing","setPosition","setSize","translatePoint","translatePoints","hideOutsideRangePoint","xcalendar","ycalendar","hideOutsideRangePoints","traceGroups","_hasClipOnAxisFalse","lineWidth","singleLineStyle","lw","ld","lw1","dashLine","lineGroupStyle","dlw","singleFillStyle","fillGroupStyle","SYMBOLDEFS","symbolNames","symbolFuncs","symbolNeedLines","symbolNoDot","symbolNoFill","symDef","MAXSYMBOL","makePointPath","symbolNumber","vbase","HORZGRADIENT","VERTGRADIENT","stopFormatter","gradientInfo","radialreversed","reversed","horizontalreversed","vertical","verticalreversed","gradientID","colorStops","fullID","_defs","stops","getFullUrl","className2query","_gradientUrlQueryParts","initGradients","pointStyle","fns","makePointStyleFns","singlePointStyle","markerLine","selectedOpacityFn","ms2mrc","mrc","selectedSizeFn","mx","om","fillColor","lineColor","perPointGradient","so","outlierwidth","outliercolor","markerLineWidth","mlw","mlcc","lineScale","mlc","mcc","markerScale","mc","selectedColorFn","isBlank","markerGradient","mgt","gradientColor","mgc","tryColorscale","makeSelectedPointStyleFns","selectedAttrs","unselectedAttrs","selectedMarker","unselectedMarker","smo","usmo","smoIsDefined","usmoIsDefined","smc","usmc","sms","usms","smsIsDefined","usmsIsDefined","makeSelectedTextStyleFns","selectedTextFont","unselectedTextFont","stc","selectedTextColorFn","selectedPointStyle","mrc2","TEXTOFFSETSIGN","textPointPosition","textPosition","markerRadius","numLines","extracTextFontSize","textPointStyle","formatLabels","pointValues","tp","selectedTextStyle","makeTangent","prevpt","thispt","nextpt","smoothness","d1x","d1y","d2x","d2y","d1a","CatmullRomExp","d2a","numx","numy","denom1","denom2","smoothopen","smoothclosed","pLast","STEPPATH","hv","vh","hvh","vhv","STEPLINEAR","onestep","makeTester","testref","savedBBoxes","savedBBoxesCount","nodeHash","inputText","localId","_exportedPlot","_baseUrl","inTester","testNode","innerBB","testRect","refRect","setTranslate","getter","getScale","SCALE_RE","setPointGroupScale","xScale","yScale","TEXT_POINT_LAST_TRANSLATION_RE","setTextPointsScale","existingTransform","toInteger","namePart","contPart","descPart","noGridCell","dfltDomains","dfltX","dfltY","_domains","_glcanvas","regl","paste","makeCoerceHoverInfo","fillFn","domainAttrs","colorAttributes","plotObj","_ev","internalEv","_internalEv","_internalOnce","_removeAllInternalListeners","jQuery","trigger","jQueryHandlerValue","nodeEventHandlerValue","handlers","purge","hoverConstants","rootPosition","srcElement","handleTickValueDefaults","handleTickMarkDefaults","handleTickLabelDefaults","colorbarOut","colorbarIn","_extend","inputs","isDeep","keepAllKeys","noArrayCopies","copyIsArray","primitivesLoopSplice","calc","rangeLinear","templateFormatStringDescription","describeVariables","quotedKeys","manage","LinkedList","selfIntersection","segmentCopy","seg","segmentId","myFill","above","otherFill","event_root","eventAdd","other_pt","here","p1_isStart","p1_1","p1_2","p2_isStart","p2_1","p2_2","comp","eventCompare","isStart","eventAddSegment","primary","ev_start","eventAddSegmentStart","ev_end","eventAddSegmentEnd","eventDivide","segmentChop","eventUpdateEnd","_calculate","primaryPolyInverted","secondaryPolyInverted","status_root","statusFindSurrounding","findTransition","ev1","ev2","a2","b2","checkIntersection","a1_equ_b1","a2_equ_b2","a1_between","a2_between","isEmpty","getHead","vert","segmentNew","surrounding","tempStatus","eve","checkBothIntersections","segmentUpdate","rewind","st","exists","prev","statusRemove","render","renderableValuePresent","ownTrace","makeTranslucent","makeTextContrasty","relatedLinks","relatedNodes","nodeHoveredStyle","linkHoveredStyle","nodeNonHoveredStyle","linkNonHoveredStyle","visitNodes","castHoverOption","sourceLabel","targetLabel","concentrationLabel","incomingLabel","outgoingLabel","hoverCenter","hoverCenterPosition","valueLabel","hoverCenterX","hoverCenterY","loneUnhover","originalEvent","rootBBox","boundingBox","hoverCenterX0","hoverCenterX1","tooltip","hovermodeDflt","stackOpts","_scatterStackOpts","groupOpts","isHoriz","hasMapbox","hasGeo","axisConstraints","enforceAxisConstraints","cleanAxisConstraints","doAutoRange","overlappingDomain","xDomain","yDomain","domains","existingX","existingY","lsInner","autosize","_hasZeroWidth","_hasZeroHeight","drawMainTitle","getLinePosition","lwHalf","_lw","lowerBackgroundIDs","backgroundIds","lowerDomains","noNeedForBg","mainplot","plotgroup","pgNode","plotgroupBg","xLinesXLeft","xLinesXRight","xLinesYBottom","xLinesYTop","leftYLineWidth","rightYLineWidth","yLinesYBottom","yLinesYTop","yLinesXLeft","yLinesXRight","connectYBottom","connectYTop","extraSubplot","lowerBackgrounds","_bgLayer","plotClipId","layerClipId","plotClip","clipRect","xLinePath","xLinePathFree","yLinePath","yLinePathFree","mainPath","pathFn","pathFnFree","xPath","shouldShowLinesOrTicks","findCounterAxisLineWidth","xlines","yPath","ylines","shouldShowLineThisSide","anchorAx","sideIndex","axi","getMainTitleX","textAnchor","hPadShift","getMainTitleY","vPadShift","layoutStyles","doAutoMargin","getMainTitleTextAnchor","getMainTitleDy","doTraceStyle","editStyleCalls","arraysToCalcdata","editStyle","doColorBars","layoutReplot","doLegend","doTicksRelayout","splom","updateGrid","doModeBar","doCamera","setViewport","drawData","cartesianIds","polarIds","_splomGrid","doAutoRangeAndConstraints","axRng","axLookup","groupLoop","finalDraw","drawMarginPushers","numArr","_responsiveChartHandler","factory","extend","definition","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","color_formatHex","formatHex","color_formatRgb","formatRgb","rgbn","Rgb","rgbConvert","rgb_formatHex","rgb_formatRgb","Hsl","hslConvert","hsl2rgb","v3","define","channels","assign","displayable","formatHsl","gamma","nogamma","exponential","rgbGamma","rgbSpline","spline","rgbBasis","rgbBasisClosed","basisClosed","isNumberArray","numberArray","genericArray","reA","reB","cssNode","cssRoot","cssView","svgNode","one","degrees","skewX","pxComma","pxParen","degParen","interpolateTransformCss","decompose","interpolateTransformSvg","rho","hslLong","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab2xyz","lrgb2rgb","hclConvert","hclLong","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","cubehelixGamma","cubehelix","cosh","sinh","cubehelixLong","piecewise","samples","interpolator","hoverLabelAttrs","dict","hoverModule","supplyLayoutGlobalDefaults","supplyLayoutDefaults","getDistanceFunction","getClosest","inbox","quadrature","castHoverinfo","containerOrSelection","chains","chainStart","first_match","matches_head","matches_pt1","second_match","next_match","chain","setMatch","chainNew","chainMatch","addToHead","grow","grow2","oppo","oppo2","chainRemoveHead","chainRemoveTail","chainClose","chainAddHead","chainAddTail","chainConnect","reverseF","reverseChain","appendChain","chainReverse","index1","chain1","chain2","tail2","head2","chainJoin","plotAttributes","templateAttrs","validItemName","arrayDefaultKey","lastChar","traceTemplater","dataTemplate","typeTemplates","traceCounts","newTrace","typei","baseName","defaultsTemplate","templateItems","usedNames","templateItemName","templateItem","outi","_templateitemname","arrayEditor","parentIn","lengthIn","resetUpdate","modifyItem","getUpdateObj","updateOut","modifyBase","applyUpdate","updateToApply","animationAttrs","padAttrs","globalFont","autoexpand","hidesources","datarevision","editrevision","selectionrevision","nextSegmentId","curVert","segmentRemove","segs","ids","customdata","maxpoints","baseframe","scatterSubTypes","createModeBar","_modeBar","buttonGroups","customButtons","fillCustomButton","buttonsToRemove","buttonsToAdd","hasGL3D","hasPie","hasFunnelarea","hasGL2D","hasTernary","hasPolar","hasSankey","allAxesFixed","areAllAxesFixed","addGroup","commonGroup","zoomGroup","hoverGroup","resetGroup","dragModeGroup","hasNoHover","selectable","boxpoints","isSelectable","appendButtonsToGroups","getButtonGroups","getSubplotCalcData","subplotCalcData","arg1","plotMethod","moduleCalcData","remainingCalcData","getSubplotData","subplotX","subplotY","subplotData","spmatch","messages","quot","tag","NAME","_slicedToArray","_arr","_n","_e","_s","_i","_ref","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_link","Sankey","computeNodeHeights","_ref2","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_step4$value","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_step5$value","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_step6$value","_ref3","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","fixedValue","_ref4","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_ref5","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_ref6","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","computeNodeLayers","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","_node","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","reorderLinks","initializeNodeBreadths","beta","relaxRightToLeft","relaxLeftToRight","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","_step18$value","targetTop","_dy","reorderNodeLinks","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","_step20$value","sourceTop","_dy2","resolveCollisionsBottomToTop","_dy3","_dy4","_ref7","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","_step23$value","_iteratorNormalCompletion24","_didIteratorError24","_iteratorError24","_step24","_iterator24","_step24$value","_iteratorNormalCompletion25","_didIteratorError25","_iteratorError25","_step25","_iterator25","_step25$value","_node2","_width","_iteratorNormalCompletion26","_didIteratorError26","_iteratorError26","_step26","_iterator26","_step26$value","_iteratorNormalCompletion27","_didIteratorError27","_iteratorError27","_step27","_iterator27","_step27$value","_node3","_width2","horizontalSource","horizontalTarget","domainAttr","mergeAttrs","axisName","nonCommonAttrs","commonAttrs","tickorientation","endpadding","ptsIn","rectFirstEdgeTest","lastPt","xmini","ycross","crossings","isSegmentBent","partParallel","startPt","segmentSquared","segmentLen","unitPerp","ptsFiltered","doneRawIndex","doneFilteredIndex","prevFilterLen","iLast","PlotSchema","frameAttrs","commandModule","redrawText","resolveLastResize","_redrawTimer","_resolveResize","oldchanged","autoplay","addLinks","linkContainer","getComputedTextLength","toolspan","spacespan","sourcespan","pathname","query","search","positionPlayWithData","baseUrl","PLOTLYENV","BASE_URL","hiddenformDiv","hiddenform","action","graphJson","submit","d3FormatKeys","extraFormatKeys","getFormatObj","formatKeys","formatDone","formatObj","includeFormat","formatFinished","formatKey","formatj","en","findMainSubplot","mockGd","isX","mainSubplotID","nextBestMainSubplotID","anchorID","counterIDs","_counterAxes","counterPart","hasMakesDataTransform","ti","makesData","applyTransforms","dataOut","transformIndex","initMargins","_pushmargin","_pushmarginIds","skipUpdateCalc","_skipDefaults","newLayout","newData","oldCalcdata","_transitionData","createTransitionData","annotation","_traceWord","_mapboxAccessToken","_initialAutoSizeIsDone","oldWidth","oldHeight","sanitizeMargins","missingWidthOrHeight","plotAutoSize","getFormatter","_visibleModules","emptySubplotLists","splomAxes","splomSubplots","_splomSubplots","_splomGridDflt","_firstScatter","_alignmentOpts","_requestRangeslider","_traceUids","prevFullInput","oldFullInput","thisFullInput","oldLen","seenUids","setUid","tryUid","newUid","getTraceUids","_globalTransforms","supplyDataDefaults","splomXa","splomYa","_hasPlotType","supplyLayoutModuleDefaults","crossTraceDefaultsFuncs","funci","crossTraceDefaults","shapes","images","_hasCartesian","_hasGeo","_hasGL3D","_hasGL2D","_hasTernary","_hasPie","linkSubplots","cleanPlot","meta4data","fillMetaTextHelpers","_preGUI","uids","supplyDefaultsUpdateCalc","oldTrace","_hasCalcTransform","oldArrayVal","arrayAttrs","_arrayAttrs","_frames","_frameHash","_counter","_interruptCallbacks","hadGl","hasGl","_glcontainer","hasInfoLayer","oldLoop","oldUid","oldSubplots","newSubplots","newSubplotList","oldSubplot","mainAx","clearExpandedTraceDefaultColors","_colorAttrs","dataIn","visibleModules","colorCnt","pushModule","_transformModules","carpetIndex","carpetDependents","supplyTraceDefaults","sdInvisible","expandedTraces","expandedTrace","fullExpandedTrace","_expandedInput","carpet","carpetAxis","_carpet","supplyAnimationDefaults","optsOut","supplyAnimationFrameDefaults","supplyAnimationTransitionDefaults","supplyFrameDefaults","frameIn","frameOut","colorIndex","traceInIndex","attri","_dfltShowLegend","supplyTransformDefaults","transformModules","transformList","transformOut","transformIn","isFirstStage","doLaterStages","_dataTemplate","modebarDefaultColor","newWidth","newHeight","innerWidth","innerHeight","computedStyle","maxWidth","maxHeight","minWidth","minHeight","widthHasChanged","heightHasChanged","_initialAutoSize","transitionData","Cartesian","includeBasePlot","finalizeSubplots","_animationRaf","cancelAnimationFrame","framework","fid","undoqueue","undonum","_hmlumcount","_hmpixcount","_transitioning","_transitioningWithDuration","_snapshotInProgress","_legendMouseDownTime","styleModules","correction","plotWidth","plotHeight","clearAutoMarginIds","pushMargin","pushMarginIds","oldMargins","ml","mr","mt","mb","k1","pushleft","pushbottom","fl","pl","pb","fr","pr","newL","newR","ft","newB","newT","didMarginChange","maxNumberOfRedraws","marginKeys","_transition","transitionOpts","aborted","executeCallbacks","prepareFn","rehover","numCallbacks","numCompleted","makeCallback","flushCallbacks","completeTransition","runFn","transitionStarting","margin0","margin1","m0","dataonly","useDefaults","stripObj","fit","isPolar","getConfig","modifyFrames","operations","oldName","computeFrame","frameName","destIndex","frameLookup","framePtr","frameStack","frameNameStack","extendLayout","extendTrace","recomputeFrameHash","extendObjectWithContainers","containerPaths","containerProp","containerVal","destProp","srcContainer","destContainer","expandedObj","containerObj","srcObj","dataArrayContainers","destTrace","srcTrace","destLayout","srcLayout","frameOpts","transitionedTraces","axEdits","dataLength","traceIdx","axisAttrRe","doCalcdata","xr0","yr0","xr1","yr1","editX","editY","traceTransitionOpts","hasAxisTransition","transitionAxes","transitionFromReact","restyleFlags","relayoutFlags","axisTransitionOpts","allTraceIndices","transitionTraces","_numBoxes","_numViolins","_violinScaleGroupStats","_piecolormap","_sunburstcolormap","_treemapcolormap","_funnelareacolormap","_extremes","cauto","transformCalci","cdi","dirty","calci","isContainer","setupAxisCategories","doCrossTraceCalc","sorted","zMapCategory","counterAxLetter","xCategorical","yCategorical","aggFn","sortAxisCategoriesByValueRegex","aggregator","categoriesValue","_xautoBinFinished","_yautoBinFinished","cat","catIndex","currentDimensionIndex","_axesDim","associatedXAxisID","_diag","mapping","_categoriesValue","categoriesAggregatedValue","_categoriesAggregatedValue","sortAxisCategoriesByValue","crossTraceCalc","spType","spInfo","_rehover","redrag","_redrag","generalUpdatePerTraceModule","subplotLayout","traceHashOld","traceHash","calcTraces","moduleNameOld","fakeCalcTrace","plotBasePlot","desiredType","makeOnCompleteCallback","cdmodule","cleanBasePlot","had","valueof","DESCRIPTORS","LIBRARY","$typed","redefineAll","anInstance","toIndex","arrayFill","setToStringTag","$ArrayBuffer","$DataView","BaseBuffer","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","eMax","eBias","unpackIEEE754","nBits","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","addGetter","internal","isLittleEndian","intIndex","store","conversion","ArrayBufferProto","$setInt8","setInt8","getInt8","byteOffset","setUint8","byteLength","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","handleDefaults","axArray","dxy","distfn","newDistance","passVal","getPointKey","pointVal","getPointData","appendArrayMultiPointValues","keyVal","pointKeyMap","locations","parents","STASHATTR","savedCursor","classes","traceOpts","layoutOpts","traceEditTypeFlags","layoutEditTypeFlags","falseObj","overrideContainers","overrideOne","traceFlags","layoutFlags","editTypeParts","newRange","minmin","maxmax","axReverse","minpt","maxpt","minbest","maxbest","rangeMode","toZero","nonNegative","axLen","minSpan","mbest","maxPad","rangeEnd","extrappad","extrapad","_concat","collapseMinArray","collapseMaxArray","_annIndices","_shapeIndices","newPad","collapseArray","atLeastAsExtreme","tozero","includeThis","clipAtZero","goodNumber","axIn","rangeslider","axeRangeOpts","dmin","dmax","ppadiplus","ppadiminus","padded","hasArrayOption","vpadLinearized","makePadAccessor","ppadplus","ppadminus","ppad","vpadplus","vpad","vpadminus","collapseOpts","addItem","iMax"],"mappings":"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","file":"11-156c6663a76b1f646b78.js","sourcesContent":["// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// provides the raw computation functions that takes epsilon into account\n//\n// zero is defined to be between (-epsilon, epsilon) exclusive\n//\nfunction Epsilon(eps) {\n  if (typeof eps !== 'number') eps = 0.0000000001; // sane default? sure why not\n\n  var my = {\n    epsilon: function epsilon(v) {\n      if (typeof v === 'number') eps = v;\n      return eps;\n    },\n    pointAboveOrOnLine: function pointAboveOrOnLine(pt, left, right) {\n      var Ax = left[0];\n      var Ay = left[1];\n      var Bx = right[0];\n      var By = right[1];\n      var Cx = pt[0];\n      var Cy = pt[1];\n      return (Bx - Ax) * (Cy - Ay) - (By - Ay) * (Cx - Ax) >= -eps;\n    },\n    pointBetween: function pointBetween(p, left, right) {\n      // p must be collinear with left->right\n      // returns false if p == left, p == right, or left == right\n      var d_py_ly = p[1] - left[1];\n      var d_rx_lx = right[0] - left[0];\n      var d_px_lx = p[0] - left[0];\n      var d_ry_ly = right[1] - left[1];\n      var dot = d_px_lx * d_rx_lx + d_py_ly * d_ry_ly; // if `dot` is 0, then `p` == `left` or `left` == `right` (reject)\n      // if `dot` is less than 0, then `p` is to the left of `left` (reject)\n\n      if (dot < eps) return false;\n      var sqlen = d_rx_lx * d_rx_lx + d_ry_ly * d_ry_ly; // if `dot` > `sqlen`, then `p` is to the right of `right` (reject)\n      // therefore, if `dot - sqlen` is greater than 0, then `p` is to the right of `right` (reject)\n\n      if (dot - sqlen > -eps) return false;\n      return true;\n    },\n    pointsSameX: function pointsSameX(p1, p2) {\n      return Math.abs(p1[0] - p2[0]) < eps;\n    },\n    pointsSameY: function pointsSameY(p1, p2) {\n      return Math.abs(p1[1] - p2[1]) < eps;\n    },\n    pointsSame: function pointsSame(p1, p2) {\n      return my.pointsSameX(p1, p2) && my.pointsSameY(p1, p2);\n    },\n    pointsCompare: function pointsCompare(p1, p2) {\n      // returns -1 if p1 is smaller, 1 if p2 is smaller, 0 if equal\n      if (my.pointsSameX(p1, p2)) return my.pointsSameY(p1, p2) ? 0 : p1[1] < p2[1] ? -1 : 1;\n      return p1[0] < p2[0] ? -1 : 1;\n    },\n    pointsCollinear: function pointsCollinear(pt1, pt2, pt3) {\n      // does pt1->pt2->pt3 make a straight line?\n      // essentially this is just checking to see if the slope(pt1->pt2) === slope(pt2->pt3)\n      // if slopes are equal, then they must be collinear, because they share pt2\n      var dx1 = pt1[0] - pt2[0];\n      var dy1 = pt1[1] - pt2[1];\n      var dx2 = pt2[0] - pt3[0];\n      var dy2 = pt2[1] - pt3[1];\n      return Math.abs(dx1 * dy2 - dx2 * dy1) < eps;\n    },\n    linesIntersect: function linesIntersect(a0, a1, b0, b1) {\n      // returns false if the lines are coincident (e.g., parallel or on top of each other)\n      //\n      // returns an object if the lines intersect:\n      //   {\n      //     pt: [x, y],    where the intersection point is at\n      //     alongA: where intersection point is along A,\n      //     alongB: where intersection point is along B\n      //   }\n      //\n      //  alongA and alongB will each be one of: -2, -1, 0, 1, 2\n      //\n      //  with the following meaning:\n      //\n      //    -2   intersection point is before segment's first point\n      //    -1   intersection point is directly on segment's first point\n      //     0   intersection point is between segment's first and second points (exclusive)\n      //     1   intersection point is directly on segment's second point\n      //     2   intersection point is after segment's second point\n      var adx = a1[0] - a0[0];\n      var ady = a1[1] - a0[1];\n      var bdx = b1[0] - b0[0];\n      var bdy = b1[1] - b0[1];\n      var axb = adx * bdy - ady * bdx;\n      if (Math.abs(axb) < eps) return false; // lines are coincident\n\n      var dx = a0[0] - b0[0];\n      var dy = a0[1] - b0[1];\n      var A = (bdx * dy - bdy * dx) / axb;\n      var B = (adx * dy - ady * dx) / axb;\n      var ret = {\n        alongA: 0,\n        alongB: 0,\n        pt: [a0[0] + A * adx, a0[1] + A * ady]\n      }; // categorize where intersection point is along A and B\n\n      if (A <= -eps) ret.alongA = -2;else if (A < eps) ret.alongA = -1;else if (A - 1 <= -eps) ret.alongA = 0;else if (A - 1 < eps) ret.alongA = 1;else ret.alongA = 2;\n      if (B <= -eps) ret.alongB = -2;else if (B < eps) ret.alongB = -1;else if (B - 1 <= -eps) ret.alongB = 0;else if (B - 1 < eps) ret.alongB = 1;else ret.alongB = 2;\n      return ret;\n    },\n    pointInsideRegion: function pointInsideRegion(pt, region) {\n      var x = pt[0];\n      var y = pt[1];\n      var last_x = region[region.length - 1][0];\n      var last_y = region[region.length - 1][1];\n      var inside = false;\n\n      for (var i = 0; i < region.length; i++) {\n        var curr_x = region[i][0];\n        var curr_y = region[i][1]; // if y is between curr_y and last_y, and\n        // x is to the right of the boundary created by the line\n\n        if (curr_y - y > eps != last_y - y > eps && (last_x - curr_x) * (y - curr_y) / (last_y - curr_y) + curr_x - x > eps) inside = !inside;\n        last_x = curr_x;\n        last_y = curr_y;\n      }\n\n      return inside;\n    }\n  };\n  return my;\n}\n\nmodule.exports = Epsilon;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar scatterAttrs = require('../../../traces/scatter/attributes');\n\nvar scatterMarkerAttrs = scatterAttrs.marker;\n\nvar extendFlat = require('../../../lib/extend').extendFlat;\n\nvar deprecationWarning = ['Area traces are deprecated!', 'Please switch to the *barpolar* trace type.'].join(' ');\nmodule.exports = {\n  r: extendFlat({}, scatterAttrs.r, {\n    description: [deprecationWarning, 'Sets the radial coordinates', 'for legacy polar chart only.'].join(' ')\n  }),\n  t: extendFlat({}, scatterAttrs.t, {\n    description: [deprecationWarning, 'Sets the angular coordinates', 'for legacy polar chart only.'].join(' ')\n  }),\n  marker: {\n    color: extendFlat({}, scatterMarkerAttrs.color, {\n      description: [deprecationWarning, scatterMarkerAttrs.color.description].join(' ')\n    }),\n    size: extendFlat({}, scatterMarkerAttrs.size, {\n      description: [deprecationWarning, scatterMarkerAttrs.size.description].join(' ')\n    }),\n    symbol: extendFlat({}, scatterMarkerAttrs.symbol, {\n      description: [deprecationWarning, scatterMarkerAttrs.symbol.description].join(' ')\n    }),\n    opacity: extendFlat({}, scatterMarkerAttrs.opacity, {\n      description: [deprecationWarning, scatterMarkerAttrs.opacity.description].join(' ')\n    }),\n    editType: 'calc'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar d3 = require('d3');\n/**\n * General helper to manage trace groups based on calcdata\n *\n * @param {d3.selection} traceLayer: a selection containing a single group\n *     to draw these traces into\n * @param {array} cdModule: array of calcdata items for this\n *     module and subplot combination. Assumes the calcdata item for each\n *     trace is an array with the fullData trace attached to the first item.\n * @param {string} cls: the class attribute to give each trace group\n *     so you can give multiple classes separated by spaces\n */\n\n\nmodule.exports = function makeTraceGroups(traceLayer, cdModule, cls) {\n  var traces = traceLayer.selectAll('g.' + cls.replace(/\\s/g, '.')).data(cdModule, function (cd) {\n    return cd[0].trace.uid;\n  });\n  traces.exit().remove();\n  traces.enter().append('g').attr('class', cls);\n  traces.order(); // stash ref node to trace group in calcdata,\n  // useful for (fast) styleOnSelect\n\n  var k = traceLayer.classed('rangeplot') ? 'nodeRangePlot3' : 'node3';\n  traces.each(function (cd) {\n    cd[0][k] = d3.select(this);\n  });\n  return traces;\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.number.is-nan\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.reflect.own-keys\");\n\nrequire(\"core-js/modules/es6.reflect.apply\");\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nmodule.exports = EventEmitter; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar numConstants = require('../constants/numerical');\n\nvar FP_SAFE = numConstants.FP_SAFE;\nvar BADNUM = numConstants.BADNUM;\nvar lib = module.exports = {};\nlib.nestedProperty = require('./nested_property');\nlib.keyedContainer = require('./keyed_container');\nlib.relativeAttr = require('./relative_attr');\nlib.isPlainObject = require('./is_plain_object');\nlib.toLogRange = require('./to_log_range');\nlib.relinkPrivateKeys = require('./relink_private');\n\nvar arrayModule = require('./array');\n\nlib.isTypedArray = arrayModule.isTypedArray;\nlib.isArrayOrTypedArray = arrayModule.isArrayOrTypedArray;\nlib.isArray1D = arrayModule.isArray1D;\nlib.ensureArray = arrayModule.ensureArray;\nlib.concat = arrayModule.concat;\nlib.maxRowLength = arrayModule.maxRowLength;\nlib.minRowLength = arrayModule.minRowLength;\n\nvar modModule = require('./mod');\n\nlib.mod = modModule.mod;\nlib.modHalf = modModule.modHalf;\n\nvar coerceModule = require('./coerce');\n\nlib.valObjectMeta = coerceModule.valObjectMeta;\nlib.coerce = coerceModule.coerce;\nlib.coerce2 = coerceModule.coerce2;\nlib.coerceFont = coerceModule.coerceFont;\nlib.coerceHoverinfo = coerceModule.coerceHoverinfo;\nlib.coerceSelectionMarkerOpacity = coerceModule.coerceSelectionMarkerOpacity;\nlib.validate = coerceModule.validate;\n\nvar datesModule = require('./dates');\n\nlib.dateTime2ms = datesModule.dateTime2ms;\nlib.isDateTime = datesModule.isDateTime;\nlib.ms2DateTime = datesModule.ms2DateTime;\nlib.ms2DateTimeLocal = datesModule.ms2DateTimeLocal;\nlib.cleanDate = datesModule.cleanDate;\nlib.isJSDate = datesModule.isJSDate;\nlib.formatDate = datesModule.formatDate;\nlib.incrementMonth = datesModule.incrementMonth;\nlib.dateTick0 = datesModule.dateTick0;\nlib.dfltRange = datesModule.dfltRange;\nlib.findExactDates = datesModule.findExactDates;\nlib.MIN_MS = datesModule.MIN_MS;\nlib.MAX_MS = datesModule.MAX_MS;\n\nvar searchModule = require('./search');\n\nlib.findBin = searchModule.findBin;\nlib.sorterAsc = searchModule.sorterAsc;\nlib.sorterDes = searchModule.sorterDes;\nlib.distinctVals = searchModule.distinctVals;\nlib.roundUp = searchModule.roundUp;\nlib.sort = searchModule.sort;\nlib.findIndexOfMin = searchModule.findIndexOfMin;\n\nvar statsModule = require('./stats');\n\nlib.aggNums = statsModule.aggNums;\nlib.len = statsModule.len;\nlib.mean = statsModule.mean;\nlib.median = statsModule.median;\nlib.midRange = statsModule.midRange;\nlib.variance = statsModule.variance;\nlib.stdev = statsModule.stdev;\nlib.interp = statsModule.interp;\n\nvar matrixModule = require('./matrix');\n\nlib.init2dArray = matrixModule.init2dArray;\nlib.transposeRagged = matrixModule.transposeRagged;\nlib.dot = matrixModule.dot;\nlib.translationMatrix = matrixModule.translationMatrix;\nlib.rotationMatrix = matrixModule.rotationMatrix;\nlib.rotationXYMatrix = matrixModule.rotationXYMatrix;\nlib.apply2DTransform = matrixModule.apply2DTransform;\nlib.apply2DTransform2 = matrixModule.apply2DTransform2;\n\nvar anglesModule = require('./angles');\n\nlib.deg2rad = anglesModule.deg2rad;\nlib.rad2deg = anglesModule.rad2deg;\nlib.angleDelta = anglesModule.angleDelta;\nlib.angleDist = anglesModule.angleDist;\nlib.isFullCircle = anglesModule.isFullCircle;\nlib.isAngleInsideSector = anglesModule.isAngleInsideSector;\nlib.isPtInsideSector = anglesModule.isPtInsideSector;\nlib.pathArc = anglesModule.pathArc;\nlib.pathSector = anglesModule.pathSector;\nlib.pathAnnulus = anglesModule.pathAnnulus;\n\nvar anchorUtils = require('./anchor_utils');\n\nlib.isLeftAnchor = anchorUtils.isLeftAnchor;\nlib.isCenterAnchor = anchorUtils.isCenterAnchor;\nlib.isRightAnchor = anchorUtils.isRightAnchor;\nlib.isTopAnchor = anchorUtils.isTopAnchor;\nlib.isMiddleAnchor = anchorUtils.isMiddleAnchor;\nlib.isBottomAnchor = anchorUtils.isBottomAnchor;\n\nvar geom2dModule = require('./geometry2d');\n\nlib.segmentsIntersect = geom2dModule.segmentsIntersect;\nlib.segmentDistance = geom2dModule.segmentDistance;\nlib.getTextLocation = geom2dModule.getTextLocation;\nlib.clearLocationCache = geom2dModule.clearLocationCache;\nlib.getVisibleSegment = geom2dModule.getVisibleSegment;\nlib.findPointOnPath = geom2dModule.findPointOnPath;\n\nvar extendModule = require('./extend');\n\nlib.extendFlat = extendModule.extendFlat;\nlib.extendDeep = extendModule.extendDeep;\nlib.extendDeepAll = extendModule.extendDeepAll;\nlib.extendDeepNoArrays = extendModule.extendDeepNoArrays;\n\nvar loggersModule = require('./loggers');\n\nlib.log = loggersModule.log;\nlib.warn = loggersModule.warn;\nlib.error = loggersModule.error;\n\nvar regexModule = require('./regex');\n\nlib.counterRegex = regexModule.counter;\n\nvar throttleModule = require('./throttle');\n\nlib.throttle = throttleModule.throttle;\nlib.throttleDone = throttleModule.done;\nlib.clearThrottle = throttleModule.clear;\n\nvar domModule = require('./dom');\n\nlib.getGraphDiv = domModule.getGraphDiv;\nlib.isPlotDiv = domModule.isPlotDiv;\nlib.removeElement = domModule.removeElement;\nlib.addStyleRule = domModule.addStyleRule;\nlib.addRelatedStyleRule = domModule.addRelatedStyleRule;\nlib.deleteRelatedStyleRule = domModule.deleteRelatedStyleRule;\nlib.clearResponsive = require('./clear_responsive');\nlib.makeTraceGroups = require('./make_trace_groups');\nlib._ = require('./localize');\nlib.notifier = require('./notifier');\nlib.filterUnique = require('./filter_unique');\nlib.filterVisible = require('./filter_visible');\nlib.pushUnique = require('./push_unique');\nlib.cleanNumber = require('./clean_number');\n\nlib.ensureNumber = function ensureNumber(v) {\n  if (!isNumeric(v)) return BADNUM;\n  v = Number(v);\n  if (v < -FP_SAFE || v > FP_SAFE) return BADNUM;\n  return isNumeric(v) ? Number(v) : BADNUM;\n};\n/**\n * Is v a valid array index? Accepts numeric strings as well as numbers.\n *\n * @param {any} v: the value to test\n * @param {Optional[integer]} len: the array length we are indexing\n *\n * @return {bool}: v is a valid array index\n */\n\n\nlib.isIndex = function (v, len) {\n  if (len !== undefined && v >= len) return false;\n  return isNumeric(v) && v >= 0 && v % 1 === 0;\n};\n\nlib.noop = require('./noop');\nlib.identity = require('./identity');\n/**\n * create an array of length 'cnt' filled with 'v' at all indices\n *\n * @param {any} v\n * @param {number} cnt\n * @return {array}\n */\n\nlib.repeat = function (v, cnt) {\n  var out = new Array(cnt);\n\n  for (var i = 0; i < cnt; i++) {\n    out[i] = v;\n  }\n\n  return out;\n};\n/**\n * swap x and y of the same attribute in container cont\n * specify attr with a ? in place of x/y\n * you can also swap other things than x/y by providing part1 and part2\n */\n\n\nlib.swapAttrs = function (cont, attrList, part1, part2) {\n  if (!part1) part1 = 'x';\n  if (!part2) part2 = 'y';\n\n  for (var i = 0; i < attrList.length; i++) {\n    var attr = attrList[i];\n    var xp = lib.nestedProperty(cont, attr.replace('?', part1));\n    var yp = lib.nestedProperty(cont, attr.replace('?', part2));\n    var temp = xp.get();\n    xp.set(yp.get());\n    yp.set(temp);\n  }\n};\n/**\n * SVG painter's algo worked around with reinsertion\n */\n\n\nlib.raiseToTop = function raiseToTop(elem) {\n  elem.parentNode.appendChild(elem);\n};\n/**\n * cancel a possibly pending transition; returned selection may be used by caller\n */\n\n\nlib.cancelTransition = function (selection) {\n  return selection.transition().duration(0);\n}; // constrain - restrict a number v to be between v0 and v1\n\n\nlib.constrain = function (v, v0, v1) {\n  if (v0 > v1) return Math.max(v1, Math.min(v0, v));\n  return Math.max(v0, Math.min(v1, v));\n};\n/**\n * do two bounding boxes from getBoundingClientRect,\n * ie {left,right,top,bottom,width,height}, overlap?\n * takes optional padding pixels\n */\n\n\nlib.bBoxIntersect = function (a, b, pad) {\n  pad = pad || 0;\n  return a.left <= b.right + pad && b.left <= a.right + pad && a.top <= b.bottom + pad && b.top <= a.bottom + pad;\n};\n/*\n * simpleMap: alternative to Array.map that only\n * passes on the element and up to 2 extra args you\n * provide (but not the array index or the whole array)\n *\n * array: the array to map it to\n * func: the function to apply\n * x1, x2: optional extra args\n */\n\n\nlib.simpleMap = function (array, func, x1, x2) {\n  var len = array.length;\n  var out = new Array(len);\n\n  for (var i = 0; i < len; i++) {\n    out[i] = func(array[i], x1, x2);\n  }\n\n  return out;\n};\n/**\n * Random string generator\n *\n * @param {object} existing\n *     pass in strings to avoid as keys with truthy values\n * @param {int} bits\n *     bits of information in the output string, default 24\n * @param {int} base\n *     base of string representation, default 16. Should be a power of 2.\n */\n\n\nlib.randstr = function randstr(existing, bits, base, _recursion) {\n  if (!base) base = 16;\n  if (bits === undefined) bits = 24;\n  if (bits <= 0) return '0';\n  var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n  var res = '';\n  var i, b, x;\n\n  for (i = 2; digits === Infinity; i *= 2) {\n    digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n  }\n\n  var rem = digits - Math.floor(digits);\n\n  for (i = 0; i < Math.floor(digits); i++) {\n    x = Math.floor(Math.random() * base).toString(base);\n    res = x + res;\n  }\n\n  if (rem) {\n    b = Math.pow(base, rem);\n    x = Math.floor(Math.random() * b).toString(base);\n    res = x + res;\n  }\n\n  var parsed = parseInt(res, base);\n\n  if (existing && existing[res] || parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n    if (_recursion > 10) {\n      lib.warn('randstr failed uniqueness');\n      return res;\n    }\n\n    return randstr(existing, bits, base, (_recursion || 0) + 1);\n  } else return res;\n};\n\nlib.OptionControl = function (opt, optname) {\n  /*\n   * An environment to contain all option setters and\n   * getters that collectively modify opts.\n   *\n   * You can call up opts from any function in new object\n   * as this.optname || this.opt\n   *\n   * See FitOpts for example of usage\n   */\n  if (!opt) opt = {};\n  if (!optname) optname = 'opt';\n  var self = {};\n  self.optionList = [];\n\n  self._newoption = function (optObj) {\n    optObj[optname] = opt;\n    self[optObj.name] = optObj;\n    self.optionList.push(optObj);\n  };\n\n  self['_' + optname] = opt;\n  return self;\n};\n/**\n * lib.smooth: smooth arrayIn by convolving with\n * a hann window with given full width at half max\n * bounce the ends in, so the output has the same length as the input\n */\n\n\nlib.smooth = function (arrayIn, FWHM) {\n  FWHM = Math.round(FWHM) || 0; // only makes sense for integers\n\n  if (FWHM < 2) return arrayIn;\n  var alen = arrayIn.length;\n  var alen2 = 2 * alen;\n  var wlen = 2 * FWHM - 1;\n  var w = new Array(wlen);\n  var arrayOut = new Array(alen);\n  var i;\n  var j;\n  var k;\n  var v; // first make the window array\n\n  for (i = 0; i < wlen; i++) {\n    w[i] = (1 - Math.cos(Math.PI * (i + 1) / FWHM)) / (2 * FWHM);\n  } // now do the convolution\n\n\n  for (i = 0; i < alen; i++) {\n    v = 0;\n\n    for (j = 0; j < wlen; j++) {\n      k = i + j + 1 - FWHM; // multibounce\n\n      if (k < -alen) k -= alen2 * Math.round(k / alen2);else if (k >= alen2) k -= alen2 * Math.floor(k / alen2); // single bounce\n\n      if (k < 0) k = -1 - k;else if (k >= alen) k = alen2 - 1 - k;\n      v += arrayIn[k] * w[j];\n    }\n\n    arrayOut[i] = v;\n  }\n\n  return arrayOut;\n};\n/**\n * syncOrAsync: run a sequence of functions synchronously\n * as long as its returns are not promises (ie have no .then)\n * includes one argument arg to send to all functions...\n * this is mainly just to prevent us having to make wrapper functions\n * when the only purpose of the wrapper is to reference gd\n * and a final step to be executed at the end\n * TODO: if there's an error and everything is sync,\n * this doesn't happen yet because we want to make sure\n * that it gets reported\n */\n\n\nlib.syncOrAsync = function (sequence, arg, finalStep) {\n  var ret, fni;\n\n  function continueAsync() {\n    return lib.syncOrAsync(sequence, arg, finalStep);\n  }\n\n  while (sequence.length) {\n    fni = sequence.splice(0, 1)[0];\n    ret = fni(arg);\n\n    if (ret && ret.then) {\n      return ret.then(continueAsync).then(undefined, lib.promiseError);\n    }\n  }\n\n  return finalStep && finalStep(arg);\n};\n/**\n * Helper to strip trailing slash, from\n * http://stackoverflow.com/questions/6680825/return-string-without-trailing-slash\n */\n\n\nlib.stripTrailingSlash = function (str) {\n  if (str.substr(-1) === '/') return str.substr(0, str.length - 1);\n  return str;\n};\n\nlib.noneOrAll = function (containerIn, containerOut, attrList) {\n  /**\n   * some attributes come together, so if you have one of them\n   * in the input, you should copy the default values of the others\n   * to the input as well.\n   */\n  if (!containerIn) return;\n  var hasAny = false;\n  var hasAll = true;\n  var i;\n  var val;\n\n  for (i = 0; i < attrList.length; i++) {\n    val = containerIn[attrList[i]];\n    if (val !== undefined && val !== null) hasAny = true;else hasAll = false;\n  }\n\n  if (hasAny && !hasAll) {\n    for (i = 0; i < attrList.length; i++) {\n      containerIn[attrList[i]] = containerOut[attrList[i]];\n    }\n  }\n};\n/** merges calcdata field (given by cdAttr) with traceAttr values\n *\n * N.B. Loop over minimum of cd.length and traceAttr.length\n * i.e. it does not try to fill in beyond traceAttr.length-1\n *\n * @param {array} traceAttr : trace attribute\n * @param {object} cd : calcdata trace\n * @param {string} cdAttr : calcdata key\n */\n\n\nlib.mergeArray = function (traceAttr, cd, cdAttr, fn) {\n  var hasFn = typeof fn === 'function';\n\n  if (lib.isArrayOrTypedArray(traceAttr)) {\n    var imax = Math.min(traceAttr.length, cd.length);\n\n    for (var i = 0; i < imax; i++) {\n      var v = traceAttr[i];\n      cd[i][cdAttr] = hasFn ? fn(v) : v;\n    }\n  }\n}; // cast numbers to positive numbers, returns 0 if not greater than 0\n\n\nlib.mergeArrayCastPositive = function (traceAttr, cd, cdAttr) {\n  return lib.mergeArray(traceAttr, cd, cdAttr, function (v) {\n    var w = +v;\n    return !isFinite(w) ? 0 : w > 0 ? w : 0;\n  });\n};\n/** fills calcdata field (given by cdAttr) with traceAttr values\n *  or function of traceAttr values (e.g. some fallback)\n *\n * N.B. Loops over all cd items.\n *\n * @param {array} traceAttr : trace attribute\n * @param {object} cd : calcdata trace\n * @param {string} cdAttr : calcdata key\n * @param {function} [fn] : optional function to apply to each array item\n */\n\n\nlib.fillArray = function (traceAttr, cd, cdAttr, fn) {\n  fn = fn || lib.identity;\n\n  if (lib.isArrayOrTypedArray(traceAttr)) {\n    for (var i = 0; i < cd.length; i++) {\n      cd[i][cdAttr] = fn(traceAttr[i]);\n    }\n  }\n};\n/** Handler for trace-wide vs per-point options\n *\n * @param {object} trace : (full) trace object\n * @param {number} ptNumber : index of the point in question\n * @param {string} astr : attribute string\n * @param {function} [fn] : optional function to apply to each array item\n *\n * @return {any}\n */\n\n\nlib.castOption = function (trace, ptNumber, astr, fn) {\n  fn = fn || lib.identity;\n  var val = lib.nestedProperty(trace, astr).get();\n\n  if (lib.isArrayOrTypedArray(val)) {\n    if (Array.isArray(ptNumber) && lib.isArrayOrTypedArray(val[ptNumber[0]])) {\n      return fn(val[ptNumber[0]][ptNumber[1]]);\n    } else {\n      return fn(val[ptNumber]);\n    }\n  } else {\n    return val;\n  }\n};\n/** Extract option from calcdata item, correctly falling back to\n *  trace value if not found.\n *\n *  @param {object} calcPt : calcdata[i][j] item\n *  @param {object} trace : (full) trace object\n *  @param {string} calcKey : calcdata key\n *  @param {string} traceKey : aka trace attribute string\n *  @return {any}\n */\n\n\nlib.extractOption = function (calcPt, trace, calcKey, traceKey) {\n  if (calcKey in calcPt) return calcPt[calcKey]; // fallback to trace value,\n  //   must check if value isn't itself an array\n  //   which means the trace attribute has a corresponding\n  //   calcdata key, but its value is falsy\n\n  var traceVal = lib.nestedProperty(trace, traceKey).get();\n  if (!Array.isArray(traceVal)) return traceVal;\n};\n\nfunction makePtIndex2PtNumber(indexToPoints) {\n  var ptIndex2ptNumber = {};\n\n  for (var k in indexToPoints) {\n    var pts = indexToPoints[k];\n\n    for (var j = 0; j < pts.length; j++) {\n      ptIndex2ptNumber[pts[j]] = +k;\n    }\n  }\n\n  return ptIndex2ptNumber;\n}\n/** Tag selected calcdata items\n *\n * N.B. note that point 'index' corresponds to input data array index\n *  whereas 'number' is its post-transform version.\n *\n * @param {array} calcTrace\n * @param {object} trace\n *  - selectedpoints {array}\n *  - _indexToPoints {object}\n * @param {ptNumber2cdIndex} ptNumber2cdIndex (optional)\n *  optional map object for trace types that do not have 1-to-1 point number to\n *  calcdata item index correspondence (e.g. histogram)\n */\n\n\nlib.tagSelected = function (calcTrace, trace, ptNumber2cdIndex) {\n  var selectedpoints = trace.selectedpoints;\n  var indexToPoints = trace._indexToPoints;\n  var ptIndex2ptNumber; // make pt index-to-number map object, which takes care of transformed traces\n\n  if (indexToPoints) {\n    ptIndex2ptNumber = makePtIndex2PtNumber(indexToPoints);\n  }\n\n  function isCdIndexValid(v) {\n    return v !== undefined && v < calcTrace.length;\n  }\n\n  for (var i = 0; i < selectedpoints.length; i++) {\n    var ptIndex = selectedpoints[i];\n\n    if (lib.isIndex(ptIndex) || lib.isArrayOrTypedArray(ptIndex) && lib.isIndex(ptIndex[0]) && lib.isIndex(ptIndex[1])) {\n      var ptNumber = ptIndex2ptNumber ? ptIndex2ptNumber[ptIndex] : ptIndex;\n      var cdIndex = ptNumber2cdIndex ? ptNumber2cdIndex[ptNumber] : ptNumber;\n\n      if (isCdIndexValid(cdIndex)) {\n        calcTrace[cdIndex].selected = 1;\n      }\n    }\n  }\n};\n\nlib.selIndices2selPoints = function (trace) {\n  var selectedpoints = trace.selectedpoints;\n  var indexToPoints = trace._indexToPoints;\n\n  if (indexToPoints) {\n    var ptIndex2ptNumber = makePtIndex2PtNumber(indexToPoints);\n    var out = [];\n\n    for (var i = 0; i < selectedpoints.length; i++) {\n      var ptIndex = selectedpoints[i];\n\n      if (lib.isIndex(ptIndex)) {\n        var ptNumber = ptIndex2ptNumber[ptIndex];\n\n        if (lib.isIndex(ptNumber)) {\n          out.push(ptNumber);\n        }\n      }\n    }\n\n    return out;\n  } else {\n    return selectedpoints;\n  }\n};\n/** Returns target as set by 'target' transform attribute\n *\n * @param {object} trace : full trace object\n * @param {object} transformOpts : transform option object\n *  - target (string} :\n *      either an attribute string referencing an array in the trace object, or\n *      a set array.\n *\n * @return {array or false} : the target array (NOT a copy!!) or false if invalid\n */\n\n\nlib.getTargetArray = function (trace, transformOpts) {\n  var target = transformOpts.target;\n\n  if (typeof target === 'string' && target) {\n    var array = lib.nestedProperty(trace, target).get();\n    return Array.isArray(array) ? array : false;\n  } else if (Array.isArray(target)) {\n    return target;\n  }\n\n  return false;\n};\n/**\n * modified version of jQuery's extend to strip out private objs and functions,\n * and cut arrays down to first <arraylen> or 1 elements\n * because extend-like algorithms are hella slow\n * obj2 is assumed to already be clean of these things (including no arrays)\n */\n\n\nlib.minExtend = function (obj1, obj2) {\n  var objOut = {};\n  if (typeof obj2 !== 'object') obj2 = {};\n  var arrayLen = 3;\n  var keys = Object.keys(obj1);\n  var i, k, v;\n\n  for (i = 0; i < keys.length; i++) {\n    k = keys[i];\n    v = obj1[k];\n    if (k.charAt(0) === '_' || typeof v === 'function') continue;else if (k === 'module') objOut[k] = v;else if (Array.isArray(v)) {\n      if (k === 'colorscale') {\n        objOut[k] = v.slice();\n      } else {\n        objOut[k] = v.slice(0, arrayLen);\n      }\n    } else if (lib.isTypedArray(v)) {\n      objOut[k] = v.subarray(0, arrayLen);\n    } else if (v && typeof v === 'object') objOut[k] = lib.minExtend(obj1[k], obj2[k]);else objOut[k] = v;\n  }\n\n  keys = Object.keys(obj2);\n\n  for (i = 0; i < keys.length; i++) {\n    k = keys[i];\n    v = obj2[k];\n\n    if (typeof v !== 'object' || !(k in objOut) || typeof objOut[k] !== 'object') {\n      objOut[k] = v;\n    }\n  }\n\n  return objOut;\n};\n\nlib.titleCase = function (s) {\n  return s.charAt(0).toUpperCase() + s.substr(1);\n};\n\nlib.containsAny = function (s, fragments) {\n  for (var i = 0; i < fragments.length; i++) {\n    if (s.indexOf(fragments[i]) !== -1) return true;\n  }\n\n  return false;\n};\n\nlib.isIE = function () {\n  return typeof window.navigator.msSaveBlob !== 'undefined';\n};\n\nvar IS_IE9_OR_BELOW_REGEX = /MSIE [1-9]\\./;\n\nlib.isIE9orBelow = function () {\n  return lib.isIE() && IS_IE9_OR_BELOW_REGEX.test(window.navigator.userAgent);\n};\n\nvar IS_SAFARI_REGEX = /Version\\/[\\d\\.]+.*Safari/;\n\nlib.isSafari = function () {\n  return IS_SAFARI_REGEX.test(window.navigator.userAgent);\n};\n/**\n * Duck typing to recognize a d3 selection, mostly for IE9's benefit\n * because it doesn't handle instanceof like modern browsers\n */\n\n\nlib.isD3Selection = function (obj) {\n  return obj && typeof obj.classed === 'function';\n};\n/**\n * Append element to DOM only if not present.\n *\n * @param {d3 selection} parent : parent selection of the element in question\n * @param {string} nodeType : node type of element to append\n * @param {string} className (optional) : class name of element in question\n * @param {fn} enterFn (optional) : optional fn applied to entering elements only\n * @return {d3 selection} selection of new layer\n *\n * Previously, we were using the following pattern:\n *\n * ```\n * var sel = parent.selectAll('.' + className)\n *     .data([0]);\n *\n * sel.enter().append(nodeType)\n *     .classed(className, true);\n *\n * return sel;\n * ```\n *\n * in numerous places in our codebase to achieve the same behavior.\n *\n * The logic below performs much better, mostly as we are using\n * `.select` instead `.selectAll` that is `querySelector` instead of\n * `querySelectorAll`.\n *\n */\n\n\nlib.ensureSingle = function (parent, nodeType, className, enterFn) {\n  var sel = parent.select(nodeType + (className ? '.' + className : ''));\n  if (sel.size()) return sel;\n  var layer = parent.append(nodeType);\n  if (className) layer.classed(className, true);\n  if (enterFn) layer.call(enterFn);\n  return layer;\n};\n/**\n * Same as Lib.ensureSingle, but using id as selector.\n * This version is mostly used for clipPath nodes.\n *\n * @param {d3 selection} parent : parent selection of the element in question\n * @param {string} nodeType : node type of element to append\n * @param {string} id : id of element in question\n * @param {fn} enterFn (optional) : optional fn applied to entering elements only\n * @return {d3 selection} selection of new layer\n */\n\n\nlib.ensureSingleById = function (parent, nodeType, id, enterFn) {\n  var sel = parent.select(nodeType + '#' + id);\n  if (sel.size()) return sel;\n  var layer = parent.append(nodeType).attr('id', id);\n  if (enterFn) layer.call(enterFn);\n  return layer;\n};\n/**\n * Converts a string path to an object.\n *\n * When given a string containing an array element, it will create a `null`\n * filled array of the given size.\n *\n * @example\n * lib.objectFromPath('nested.test[2].path', 'value');\n * // returns { nested: { test: [null, null, { path: 'value' }]}\n *\n * @param   {string}    path to nested value\n * @param   {*}         any value to be set\n *\n * @return {Object} the constructed object with a full nested path\n */\n\n\nlib.objectFromPath = function (path, value) {\n  var keys = path.split('.');\n  var tmpObj;\n  var obj = tmpObj = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var el = null;\n    var parts = keys[i].match(/(.*)\\[([0-9]+)\\]/);\n\n    if (parts) {\n      key = parts[1];\n      el = parts[2];\n      tmpObj = tmpObj[key] = [];\n\n      if (i === keys.length - 1) {\n        tmpObj[el] = value;\n      } else {\n        tmpObj[el] = {};\n      }\n\n      tmpObj = tmpObj[el];\n    } else {\n      if (i === keys.length - 1) {\n        tmpObj[key] = value;\n      } else {\n        tmpObj[key] = {};\n      }\n\n      tmpObj = tmpObj[key];\n    }\n  }\n\n  return obj;\n};\n/**\n * Iterate through an object in-place, converting dotted properties to objects.\n *\n * Examples:\n *\n *   lib.expandObjectPaths({'nested.test.path': 'value'});\n *     => { nested: { test: {path: 'value'}}}\n *\n * It also handles array notation, e.g.:\n *\n *   lib.expandObjectPaths({'foo[1].bar': 'value'});\n *     => { foo: [null, {bar: value}] }\n *\n * It handles merges the results when two properties are specified in parallel:\n *\n *   lib.expandObjectPaths({'foo[1].bar': 10, 'foo[0].bar': 20});\n *     => { foo: [{bar: 10}, {bar: 20}] }\n *\n * It does NOT, however, merge mulitple mutliply-nested arrays::\n *\n *   lib.expandObjectPaths({'marker[1].range[1]': 5, 'marker[1].range[0]': 4})\n *     => { marker: [null, {range: 4}] }\n */\n// Store this to avoid recompiling regex on *every* prop since this may happen many\n// many times for animations. Could maybe be inside the function. Not sure about\n// scoping vs. recompilation tradeoff, but at least it's not just inlining it into\n// the inner loop.\n\n\nvar dottedPropertyRegex = /^([^\\[\\.]+)\\.(.+)?/;\nvar indexedPropertyRegex = /^([^\\.]+)\\[([0-9]+)\\](\\.)?(.+)?/;\n\nlib.expandObjectPaths = function (data) {\n  var match, key, prop, datum, idx, dest, trailingPath;\n\n  if (typeof data === 'object' && !Array.isArray(data)) {\n    for (key in data) {\n      if (data.hasOwnProperty(key)) {\n        if (match = key.match(dottedPropertyRegex)) {\n          datum = data[key];\n          prop = match[1];\n          delete data[key];\n          data[prop] = lib.extendDeepNoArrays(data[prop] || {}, lib.objectFromPath(key, lib.expandObjectPaths(datum))[prop]);\n        } else if (match = key.match(indexedPropertyRegex)) {\n          datum = data[key];\n          prop = match[1];\n          idx = parseInt(match[2]);\n          delete data[key];\n          data[prop] = data[prop] || [];\n\n          if (match[3] === '.') {\n            // This is the case where theere are subsequent properties into which\n            // we must recurse, e.g. transforms[0].value\n            trailingPath = match[4];\n            dest = data[prop][idx] = data[prop][idx] || {}; // NB: Extend deep no arrays prevents this from working on multiple\n            // nested properties in the same object, e.g.\n            //\n            // {\n            //   foo[0].bar[1].range\n            //   foo[0].bar[0].range\n            // }\n            //\n            // In this case, the extendDeepNoArrays will overwrite one array with\n            // the other, so that both properties *will not* be present in the\n            // result. Fixing this would require a more intelligent tracking\n            // of changes and merging than extendDeepNoArrays currently accomplishes.\n\n            lib.extendDeepNoArrays(dest, lib.objectFromPath(trailingPath, lib.expandObjectPaths(datum)));\n          } else {\n            // This is the case where this property is the end of the line,\n            // e.g. xaxis.range[0]\n            data[prop][idx] = lib.expandObjectPaths(datum);\n          }\n        } else {\n          data[key] = lib.expandObjectPaths(data[key]);\n        }\n      }\n    }\n  }\n\n  return data;\n};\n/**\n * Converts value to string separated by the provided separators.\n *\n * @example\n * lib.numSeparate(2016, '.,');\n * // returns '2016'\n *\n * @example\n * lib.numSeparate(3000, '.,', true);\n * // returns '3,000'\n *\n * @example\n * lib.numSeparate(1234.56, '|,')\n * // returns '1,234|56'\n *\n * @param   {string|number} value       the value to be converted\n * @param   {string}    separators  string of decimal, then thousands separators\n * @param   {boolean}    separatethousands  boolean, 4-digit integers are separated if true\n *\n * @return  {string}    the value that has been separated\n */\n\n\nlib.numSeparate = function (value, separators, separatethousands) {\n  if (!separatethousands) separatethousands = false;\n\n  if (typeof separators !== 'string' || separators.length === 0) {\n    throw new Error('Separator string required for formatting!');\n  }\n\n  if (typeof value === 'number') {\n    value = String(value);\n  }\n\n  var thousandsRe = /(\\d+)(\\d{3})/;\n  var decimalSep = separators.charAt(0);\n  var thouSep = separators.charAt(1);\n  var x = value.split('.');\n  var x1 = x[0];\n  var x2 = x.length > 1 ? decimalSep + x[1] : ''; // Years are ignored for thousands separators\n\n  if (thouSep && (x.length > 1 || x1.length > 4 || separatethousands)) {\n    while (thousandsRe.test(x1)) {\n      x1 = x1.replace(thousandsRe, '$1' + thouSep + '$2');\n    }\n  }\n\n  return x1 + x2;\n};\n\nlib.TEMPLATE_STRING_REGEX = /%{([^\\s%{}:]*)([:|\\|][^}]*)?}/g;\nvar SIMPLE_PROPERTY_REGEX = /^\\w*$/;\n/**\n * Substitute values from an object into a string\n *\n * Examples:\n *  Lib.templateString('name: %{trace}', {trace: 'asdf'}) --> 'name: asdf'\n *  Lib.templateString('name: %{trace[0].name}', {trace: [{name: 'asdf'}]}) --> 'name: asdf'\n *\n * @param {string}  input string containing %{...} template strings\n * @param {obj}     data object containing substitution values\n *\n * @return {string} templated string\n */\n\nlib.templateString = function (string, obj) {\n  // Not all that useful, but cache nestedProperty instantiation\n  // just in case it speeds things up *slightly*:\n  var getterCache = {};\n  return string.replace(lib.TEMPLATE_STRING_REGEX, function (dummy, key) {\n    var v;\n\n    if (SIMPLE_PROPERTY_REGEX.test(key)) {\n      v = obj[key];\n    } else {\n      getterCache[key] = getterCache[key] || lib.nestedProperty(obj, key).get;\n      v = getterCache[key]();\n    }\n\n    return lib.isValidTextValue(v) ? v : '';\n  });\n};\n\nvar hovertemplateWarnings = {\n  max: 10,\n  count: 0,\n  name: 'hovertemplate'\n};\n\nlib.hovertemplateString = function () {\n  return templateFormatString.apply(hovertemplateWarnings, arguments);\n};\n\nvar texttemplateWarnings = {\n  max: 10,\n  count: 0,\n  name: 'texttemplate'\n};\n\nlib.texttemplateString = function () {\n  return templateFormatString.apply(texttemplateWarnings, arguments);\n};\n\nvar TEMPLATE_STRING_FORMAT_SEPARATOR = /^[:|\\|]/;\n/**\n * Substitute values from an object into a string and optionally formats them using d3-format,\n * or fallback to associated labels.\n *\n * Examples:\n *  Lib.hovertemplateString('name: %{trace}', {trace: 'asdf'}) --> 'name: asdf'\n *  Lib.hovertemplateString('name: %{trace[0].name}', {trace: [{name: 'asdf'}]}) --> 'name: asdf'\n *  Lib.hovertemplateString('price: %{y:$.2f}', {y: 1}) --> 'price: $1.00'\n *\n * @param {string}  input string containing %{...:...} template strings\n * @param {obj}     data object containing fallback text when no formatting is specified, ex.: {yLabel: 'formattedYValue'}\n * @param {obj}     d3 locale\n * @param {obj}     data objects containing substitution values\n *\n * @return {string} templated string\n */\n\nfunction templateFormatString(string, labels, d3locale) {\n  var opts = this;\n  var args = arguments;\n  if (!labels) labels = {}; // Not all that useful, but cache nestedProperty instantiation\n  // just in case it speeds things up *slightly*:\n\n  var getterCache = {};\n  return string.replace(lib.TEMPLATE_STRING_REGEX, function (match, key, format) {\n    var obj, value, i;\n\n    for (i = 3; i < args.length; i++) {\n      obj = args[i];\n      if (!obj) continue;\n\n      if (obj.hasOwnProperty(key)) {\n        value = obj[key];\n        break;\n      }\n\n      if (!SIMPLE_PROPERTY_REGEX.test(key)) {\n        value = getterCache[key] || lib.nestedProperty(obj, key).get();\n        if (value) getterCache[key] = value;\n      }\n\n      if (value !== undefined) break;\n    }\n\n    if (value === undefined && opts) {\n      if (opts.count < opts.max) {\n        lib.warn('Variable \\'' + key + '\\' in ' + opts.name + ' could not be found!');\n        value = match;\n      }\n\n      if (opts.count === opts.max) {\n        lib.warn('Too many ' + opts.name + ' warnings - additional warnings will be suppressed');\n      }\n\n      opts.count++;\n      return match;\n    }\n\n    if (format) {\n      var fmt;\n\n      if (format[0] === ':') {\n        fmt = d3locale ? d3locale.numberFormat : d3.format;\n        value = fmt(format.replace(TEMPLATE_STRING_FORMAT_SEPARATOR, ''))(value);\n      }\n\n      if (format[0] === '|') {\n        fmt = d3locale ? d3locale.timeFormat.utc : d3.time.format.utc;\n        var ms = lib.dateTime2ms(value);\n        value = lib.formatDate(ms, format.replace(TEMPLATE_STRING_FORMAT_SEPARATOR, ''), false, fmt);\n      }\n    } else {\n      if (labels.hasOwnProperty(key + 'Label')) value = labels[key + 'Label'];\n    }\n\n    return value;\n  });\n}\n/*\n * alphanumeric string sort, tailored for subplot IDs like scene2, scene10, x10y13 etc\n */\n\n\nvar char0 = 48;\nvar char9 = 57;\n\nlib.subplotSort = function (a, b) {\n  var l = Math.min(a.length, b.length) + 1;\n  var numA = 0;\n  var numB = 0;\n\n  for (var i = 0; i < l; i++) {\n    var charA = a.charCodeAt(i) || 0;\n    var charB = b.charCodeAt(i) || 0;\n    var isNumA = charA >= char0 && charA <= char9;\n    var isNumB = charB >= char0 && charB <= char9;\n    if (isNumA) numA = 10 * numA + charA - char0;\n    if (isNumB) numB = 10 * numB + charB - char0;\n\n    if (!isNumA || !isNumB) {\n      if (numA !== numB) return numA - numB;\n      if (charA !== charB) return charA - charB;\n    }\n  }\n\n  return numB - numA;\n}; // repeatable pseudorandom generator\n\n\nvar randSeed = 2000000000;\n\nlib.seedPseudoRandom = function () {\n  randSeed = 2000000000;\n};\n\nlib.pseudoRandom = function () {\n  var lastVal = randSeed;\n  randSeed = (69069 * randSeed + 1) % 4294967296; // don't let consecutive vals be too close together\n  // gets away from really trying to be random, in favor of better local uniformity\n\n  if (Math.abs(randSeed - lastVal) < 429496729) return lib.pseudoRandom();\n  return randSeed / 4294967296;\n};\n/** Fill hover 'pointData' container with 'correct' hover text value\n *\n * - If trace hoverinfo contains a 'text' flag and hovertext is not set,\n *   the text elements will be seen in the hover labels.\n *\n * - If trace hoverinfo contains a 'text' flag and hovertext is set,\n *   hovertext takes precedence over text\n *   i.e. the hoverinfo elements will be seen in the hover labels\n *\n *  @param {object} calcPt\n *  @param {object} trace\n *  @param {object || array} contOut (mutated here)\n */\n\n\nlib.fillText = function (calcPt, trace, contOut) {\n  var fill = Array.isArray(contOut) ? function (v) {\n    contOut.push(v);\n  } : function (v) {\n    contOut.text = v;\n  };\n  var htx = lib.extractOption(calcPt, trace, 'htx', 'hovertext');\n  if (lib.isValidTextValue(htx)) return fill(htx);\n  var tx = lib.extractOption(calcPt, trace, 'tx', 'text');\n  if (lib.isValidTextValue(tx)) return fill(tx);\n}; // accept all truthy values and 0 (which gets cast to '0' in the hover labels)\n\n\nlib.isValidTextValue = function (v) {\n  return v || v === 0;\n};\n/**\n * @param {number} ratio\n * @param {number} n (number of decimal places)\n */\n\n\nlib.formatPercent = function (ratio, n) {\n  n = n || 0;\n  var str = (Math.round(100 * ratio * Math.pow(10, n)) * Math.pow(0.1, n)).toFixed(n) + '%';\n\n  for (var i = 0; i < n; i++) {\n    if (str.indexOf('.') !== -1) {\n      str = str.replace('0%', '%');\n      str = str.replace('.%', '%');\n    }\n  }\n\n  return str;\n};\n\nlib.isHidden = function (gd) {\n  var display = window.getComputedStyle(gd).display;\n  return !display || display === 'none';\n};\n/** Return transform text for bar bar-like rectangles and pie-like slices\n *  @param {object} transform\n *  - targetX: desired position on the x-axis\n *  - targetY: desired position on the y-axis\n *  - textX: text middle position on the x-axis\n *  - textY: text middle position on the y-axis\n *  - anchorX: (optional) text anchor position on the x-axis (computed from textX), zero for middle anchor\n *  - anchorY: (optional) text anchor position on the y-axis (computed from textY), zero for middle anchor\n *  - scale: (optional) scale applied after translate\n *  - rotate: (optional) rotation applied after scale\n *  - noCenter: when defined no extra arguments needed in rotation\n */\n\n\nlib.getTextTransform = function (transform) {\n  var noCenter = transform.noCenter;\n  var textX = transform.textX;\n  var textY = transform.textY;\n  var targetX = transform.targetX;\n  var targetY = transform.targetY;\n  var anchorX = transform.anchorX || 0;\n  var anchorY = transform.anchorY || 0;\n  var rotate = transform.rotate;\n  var scale = transform.scale;\n  if (!scale) scale = 0;else if (scale > 1) scale = 1;\n  return 'translate(' + (targetX - scale * (textX + anchorX)) + ',' + (targetY - scale * (textY + anchorY)) + ')' + (scale < 1 ? 'scale(' + scale + ')' : '') + (rotate ? 'rotate(' + rotate + (noCenter ? '' : ' ' + textX + ' ' + textY) + ')' : '');\n};\n\nlib.ensureUniformFontSize = function (gd, baseFont) {\n  var out = lib.extendFlat({}, baseFont);\n  out.size = Math.max(baseFont.size, gd._fullLayout.uniformtext.minsize || 0);\n  return out;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * sanitized modulus function that always returns in the range [0, d)\n * rather than (-d, 0] if v is negative\n */\n\nfunction mod(v, d) {\n  var out = v % d;\n  return out < 0 ? out + d : out;\n}\n/**\n * sanitized modulus function that always returns in the range [-d/2, d/2]\n * rather than (-d, 0] if v is negative\n */\n\n\nfunction modHalf(v, d) {\n  return Math.abs(v) > d / 2 ? v - Math.round(v / d) * d : v;\n}\n\nmodule.exports = {\n  mod: mod,\n  modHalf: modHalf\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar tinycolor = require('tinycolor2');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar color = module.exports = {};\n\nvar colorAttrs = require('./attributes');\n\ncolor.defaults = colorAttrs.defaults;\nvar defaultLine = color.defaultLine = colorAttrs.defaultLine;\ncolor.lightLine = colorAttrs.lightLine;\nvar background = color.background = colorAttrs.background;\n/*\n * tinyRGB: turn a tinycolor into an rgb string, but\n * unlike the built-in tinycolor.toRgbString this never includes alpha\n */\n\ncolor.tinyRGB = function (tc) {\n  var c = tc.toRgb();\n  return 'rgb(' + Math.round(c.r) + ', ' + Math.round(c.g) + ', ' + Math.round(c.b) + ')';\n};\n\ncolor.rgb = function (cstr) {\n  return color.tinyRGB(tinycolor(cstr));\n};\n\ncolor.opacity = function (cstr) {\n  return cstr ? tinycolor(cstr).getAlpha() : 0;\n};\n\ncolor.addOpacity = function (cstr, op) {\n  var c = tinycolor(cstr).toRgb();\n  return 'rgba(' + Math.round(c.r) + ', ' + Math.round(c.g) + ', ' + Math.round(c.b) + ', ' + op + ')';\n}; // combine two colors into one apparent color\n// if back has transparency or is missing,\n// color.background is assumed behind it\n\n\ncolor.combine = function (front, back) {\n  var fc = tinycolor(front).toRgb();\n  if (fc.a === 1) return tinycolor(front).toRgbString();\n  var bc = tinycolor(back || background).toRgb();\n  var bcflat = bc.a === 1 ? bc : {\n    r: 255 * (1 - bc.a) + bc.r * bc.a,\n    g: 255 * (1 - bc.a) + bc.g * bc.a,\n    b: 255 * (1 - bc.a) + bc.b * bc.a\n  };\n  var fcflat = {\n    r: bcflat.r * (1 - fc.a) + fc.r * fc.a,\n    g: bcflat.g * (1 - fc.a) + fc.g * fc.a,\n    b: bcflat.b * (1 - fc.a) + fc.b * fc.a\n  };\n  return tinycolor(fcflat).toRgbString();\n};\n/*\n * Create a color that contrasts with cstr.\n *\n * If cstr is a dark color, we lighten it; if it's light, we darken.\n *\n * If lightAmount / darkAmount are used, we adjust by these percentages,\n * otherwise we go all the way to white or black.\n */\n\n\ncolor.contrast = function (cstr, lightAmount, darkAmount) {\n  var tc = tinycolor(cstr);\n  if (tc.getAlpha() !== 1) tc = tinycolor(color.combine(cstr, background));\n  var newColor = tc.isDark() ? lightAmount ? tc.lighten(lightAmount) : background : darkAmount ? tc.darken(darkAmount) : defaultLine;\n  return newColor.toString();\n};\n\ncolor.stroke = function (s, c) {\n  var tc = tinycolor(c);\n  s.style({\n    'stroke': color.tinyRGB(tc),\n    'stroke-opacity': tc.getAlpha()\n  });\n};\n\ncolor.fill = function (s, c) {\n  var tc = tinycolor(c);\n  s.style({\n    'fill': color.tinyRGB(tc),\n    'fill-opacity': tc.getAlpha()\n  });\n}; // search container for colors with the deprecated rgb(fractions) format\n// and convert them to rgb(0-255 values)\n\n\ncolor.clean = function (container) {\n  if (!container || typeof container !== 'object') return;\n  var keys = Object.keys(container);\n  var i, j, key, val;\n\n  for (i = 0; i < keys.length; i++) {\n    key = keys[i];\n    val = container[key];\n\n    if (key.substr(key.length - 5) === 'color') {\n      // only sanitize keys that end in \"color\" or \"colorscale\"\n      if (Array.isArray(val)) {\n        for (j = 0; j < val.length; j++) {\n          val[j] = cleanOne(val[j]);\n        }\n      } else container[key] = cleanOne(val);\n    } else if (key.substr(key.length - 10) === 'colorscale' && Array.isArray(val)) {\n      // colorscales have the format [[0, color1], [frac, color2], ... [1, colorN]]\n      for (j = 0; j < val.length; j++) {\n        if (Array.isArray(val[j])) val[j][1] = cleanOne(val[j][1]);\n      }\n    } else if (Array.isArray(val)) {\n      // recurse into arrays of objects, and plain objects\n      var el0 = val[0];\n\n      if (!Array.isArray(el0) && el0 && typeof el0 === 'object') {\n        for (j = 0; j < val.length; j++) {\n          color.clean(val[j]);\n        }\n      }\n    } else if (val && typeof val === 'object') color.clean(val);\n  }\n};\n\nfunction cleanOne(val) {\n  if (isNumeric(val) || typeof val !== 'string') return val;\n  var valTrim = val.trim();\n  if (valTrim.substr(0, 3) !== 'rgb') return val;\n  var match = valTrim.match(/^rgba?\\s*\\(([^()]*)\\)$/);\n  if (!match) return val;\n  var parts = match[1].trim().split(/\\s*[\\s,]\\s*/);\n  var rgba = valTrim.charAt(3) === 'a' && parts.length === 4;\n  if (!rgba && parts.length !== 3) return val;\n\n  for (var i = 0; i < parts.length; i++) {\n    if (!parts[i].length) return val;\n    parts[i] = Number(parts[i]);\n\n    if (!(parts[i] >= 0)) {\n      // all parts must be non-negative numbers\n      return val;\n    }\n\n    if (i === 3) {\n      // alpha>1 gets clipped to 1\n      if (parts[i] > 1) parts[i] = 1;\n    } else if (parts[i] >= 1) {\n      // r, g, b must be < 1 (ie 1 itself is not allowed)\n      return val;\n    }\n  }\n\n  var rgbStr = Math.round(parts[0] * 255) + ', ' + Math.round(parts[1] * 255) + ', ' + Math.round(parts[2] * 255);\n  if (rgba) return 'rgba(' + rgbStr + ', ' + parts[3] + ')';\n  return 'rgb(' + rgbStr + ')';\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar counterRegex = require('../../lib/regex').counter;\n\nmodule.exports = {\n  idRegex: {\n    x: counterRegex('x'),\n    y: counterRegex('y')\n  },\n  attrRegex: counterRegex('[xy]axis'),\n  // axis match regular expression\n  xAxisMatch: counterRegex('xaxis'),\n  yAxisMatch: counterRegex('yaxis'),\n  // pattern matching axis ids and names\n  // note that this is more permissive than counterRegex, as\n  // id2name, name2id, and cleanId accept \"x1\" etc\n  AX_ID_PATTERN: /^[xyz][0-9]*$/,\n  AX_NAME_PATTERN: /^[xyz]axis[0-9]*$/,\n  // and for 2D subplots\n  SUBPLOT_PATTERN: /^x([0-9]*)y([0-9]*)$/,\n  // pixels to move mouse before you stop clamping to starting point\n  MINDRAG: 8,\n  // smallest dimension allowed for a select box\n  MINSELECT: 12,\n  // smallest dimension allowed for a zoombox\n  MINZOOM: 20,\n  // width of axis drag regions\n  DRAGGERSIZE: 20,\n  // max pixels off straight before a lasso select line counts as bent\n  BENDPX: 1.5,\n  // delay before a redraw (relayout) after smooth panning and zooming\n  REDRAWDELAY: 50,\n  // throttling limit (ms) for selectPoints calls\n  SELECTDELAY: 100,\n  // cache ID suffix for throttle\n  SELECTID: '-select',\n  // last resort axis ranges for x and y axes if we have no data\n  DFLTRANGEX: [-1, 6],\n  DFLTRANGEY: [-1, 4],\n  // Layers to keep trace types in the right order\n  // N.B. each  'unique' plot method must have its own layer\n  traceLayerClasses: ['imagelayer', 'heatmaplayer', 'contourcarpetlayer', 'contourlayer', 'funnellayer', 'waterfalllayer', 'barlayer', 'carpetlayer', 'violinlayer', 'boxlayer', 'ohlclayer', 'scattercarpetlayer', 'scatterlayer'],\n  clipOnAxisFalseQuery: ['.scatterlayer', '.barlayer', '.funnellayer', '.waterfalllayer'],\n  layerValue2layerClass: {\n    'above traces': 'above',\n    'below traces': 'below'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar fontAttrs = require('../font_attributes');\n\nvar colorAttrs = require('../../components/color/attributes');\n\nvar dash = require('../../components/drawing/attributes').dash;\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar templatedArray = require('../../plot_api/plot_template').templatedArray;\n\nvar FORMAT_LINK = require('../../constants/docs').FORMAT_LINK;\n\nvar DATE_FORMAT_LINK = require('../../constants/docs').DATE_FORMAT_LINK;\n\nvar constants = require('./constants');\n\nmodule.exports = {\n  visible: {\n    valType: 'boolean',\n    role: 'info',\n    editType: 'plot',\n    description: ['A single toggle to hide the axis while preserving interaction like dragging.', 'Default is true when a cheater plot is present on the axis, otherwise', 'false'].join(' ')\n  },\n  color: {\n    valType: 'color',\n    dflt: colorAttrs.defaultLine,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Sets default for all colors associated with this axis', 'all at once: line, font, tick, and grid colors.', 'Grid color is lightened by blending this with the plot background', 'Individual pieces can override this.'].join(' ')\n  },\n  title: {\n    text: {\n      valType: 'string',\n      role: 'info',\n      editType: 'ticks',\n      description: ['Sets the title of this axis.', 'Note that before the existence of `title.text`, the title\\'s', 'contents used to be defined as the `title` attribute itself.', 'This behavior has been deprecated.'].join(' ')\n    },\n    font: fontAttrs({\n      editType: 'ticks',\n      description: ['Sets this axis\\' title font.', 'Note that the title\\'s font used to be customized', 'by the now deprecated `titlefont` attribute.'].join(' ')\n    }),\n    standoff: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      editType: 'ticks',\n      description: ['Sets the standoff distance (in px) between the axis labels and the title text', 'The default value is a function of the axis tick labels, the title `font.size`', 'and the axis `linewidth`.', 'Note that the axis title position is always constrained within the margins,', 'so the actual standoff distance is always less than the set or default value.', 'By setting `standoff` and turning on `automargin`, plotly.js will push the', 'margins to fit the axis title at given standoff distance.'].join(' ')\n    },\n    editType: 'ticks'\n  },\n  type: {\n    valType: 'enumerated',\n    // '-' means we haven't yet run autotype or couldn't find any data\n    // it gets turned into linear in gd._fullLayout but not copied back\n    // to gd.data like the others are.\n    values: ['-', 'linear', 'log', 'date', 'category', 'multicategory'],\n    dflt: '-',\n    role: 'info',\n    editType: 'calc',\n    // we forget when an axis has been autotyped, just writing the auto\n    // value back to the input - so it doesn't make sense to template this.\n    // Note: we do NOT prohibit this in `coerce`, so if someone enters a\n    // type in the template explicitly it will be honored as the default.\n    _noTemplating: true,\n    description: ['Sets the axis type.', 'By default, plotly attempts to determined the axis type', 'by looking into the data of the traces that referenced', 'the axis in question.'].join(' ')\n  },\n  autorange: {\n    valType: 'enumerated',\n    values: [true, false, 'reversed'],\n    dflt: true,\n    role: 'info',\n    editType: 'axrange',\n    impliedEdits: {\n      'range[0]': undefined,\n      'range[1]': undefined\n    },\n    description: ['Determines whether or not the range of this axis is', 'computed in relation to the input data.', 'See `rangemode` for more info.', 'If `range` is provided, then `autorange` is set to *false*.'].join(' ')\n  },\n  rangemode: {\n    valType: 'enumerated',\n    values: ['normal', 'tozero', 'nonnegative'],\n    dflt: 'normal',\n    role: 'info',\n    editType: 'plot',\n    description: ['If *normal*, the range is computed in relation to the extrema', 'of the input data.', 'If *tozero*`, the range extends to 0,', 'regardless of the input data', 'If *nonnegative*, the range is non-negative,', 'regardless of the input data.', 'Applies only to linear axes.'].join(' ')\n  },\n  range: {\n    valType: 'info_array',\n    role: 'info',\n    items: [{\n      valType: 'any',\n      editType: 'axrange',\n      impliedEdits: {\n        '^autorange': false\n      },\n      anim: true\n    }, {\n      valType: 'any',\n      editType: 'axrange',\n      impliedEdits: {\n        '^autorange': false\n      },\n      anim: true\n    }],\n    editType: 'axrange',\n    impliedEdits: {\n      'autorange': false\n    },\n    anim: true,\n    description: ['Sets the range of this axis.', 'If the axis `type` is *log*, then you must take the log of your', 'desired range (e.g. to set the range from 1 to 100,', 'set the range from 0 to 2).', 'If the axis `type` is *date*, it should be date strings,', 'like date data, though Date objects and unix milliseconds', 'will be accepted and converted to strings.', 'If the axis `type` is *category*, it should be numbers,', 'using the scale where each category is assigned a serial', 'number from zero in the order it appears.'].join(' ')\n  },\n  fixedrange: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'info',\n    editType: 'calc',\n    description: ['Determines whether or not this axis is zoom-able.', 'If true, then zoom is disabled.'].join(' ')\n  },\n  // scaleanchor: not used directly, just put here for reference\n  // values are any opposite-letter axis id\n  scaleanchor: {\n    valType: 'enumerated',\n    values: [constants.idRegex.x.toString(), constants.idRegex.y.toString()],\n    role: 'info',\n    editType: 'plot',\n    description: ['If set to another axis id (e.g. `x2`, `y`), the range of this axis', 'changes together with the range of the corresponding axis', 'such that the scale of pixels per unit is in a constant ratio.', 'Both axes are still zoomable, but when you zoom one, the other will', 'zoom the same amount, keeping a fixed midpoint.', '`constrain` and `constraintoward` determine how we enforce the constraint.', 'You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`', 'but you can only link axes of the same `type`.', 'The linked axis can have the opposite letter (to constrain the aspect ratio)', 'or the same letter (to match scales across subplots).', 'Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant', 'and the last constraint encountered will be ignored to avoid possible', 'inconsistent constraints via `scaleratio`.', 'Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint', 'is currently forbidden.'].join(' ')\n  },\n  scaleratio: {\n    valType: 'number',\n    min: 0,\n    dflt: 1,\n    role: 'info',\n    editType: 'plot',\n    description: ['If this axis is linked to another by `scaleanchor`, this determines the pixel', 'to unit scale ratio. For example, if this value is 10, then every unit on', 'this axis spans 10 times the number of pixels as a unit on the linked axis.', 'Use this for example to create an elevation profile where the vertical scale', 'is exaggerated a fixed amount with respect to the horizontal.'].join(' ')\n  },\n  constrain: {\n    valType: 'enumerated',\n    values: ['range', 'domain'],\n    dflt: 'range',\n    role: 'info',\n    editType: 'plot',\n    description: ['If this axis needs to be compressed (either due to its own `scaleanchor` and', '`scaleratio` or those of the other axis), determines how that happens:', 'by increasing the *range* (default), or by decreasing the *domain*.'].join(' ')\n  },\n  // constraintoward: not used directly, just put here for reference\n  constraintoward: {\n    valType: 'enumerated',\n    values: ['left', 'center', 'right', 'top', 'middle', 'bottom'],\n    role: 'info',\n    editType: 'plot',\n    description: ['If this axis needs to be compressed (either due to its own `scaleanchor` and', '`scaleratio` or those of the other axis), determines which direction we push', 'the originally specified plot area. Options are *left*, *center* (default),', 'and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes.'].join(' ')\n  },\n  matches: {\n    valType: 'enumerated',\n    values: [constants.idRegex.x.toString(), constants.idRegex.y.toString()],\n    role: 'info',\n    editType: 'calc',\n    description: ['If set to another axis id (e.g. `x2`, `y`), the range of this axis', 'will match the range of the corresponding axis in data-coordinates space.', 'Moreover, matching axes share auto-range values, category lists and', 'histogram auto-bins.', 'Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint', 'is currently forbidden.', 'Moreover, note that matching axes must have the same `type`.'].join(' ')\n  },\n  // ticks\n  tickmode: {\n    valType: 'enumerated',\n    values: ['auto', 'linear', 'array'],\n    role: 'info',\n    editType: 'ticks',\n    impliedEdits: {\n      tick0: undefined,\n      dtick: undefined\n    },\n    description: ['Sets the tick mode for this axis.', 'If *auto*, the number of ticks is set via `nticks`.', 'If *linear*, the placement of the ticks is determined by', 'a starting position `tick0` and a tick step `dtick`', '(*linear* is the default value if `tick0` and `dtick` are provided).', 'If *array*, the placement of the ticks is set via `tickvals`', 'and the tick text is `ticktext`.', '(*array* is the default value if `tickvals` is provided).'].join(' ')\n  },\n  nticks: {\n    valType: 'integer',\n    min: 0,\n    dflt: 0,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Specifies the maximum number of ticks for the particular axis.', 'The actual number of ticks will be chosen automatically to be', 'less than or equal to `nticks`.', 'Has an effect only if `tickmode` is set to *auto*.'].join(' ')\n  },\n  tick0: {\n    valType: 'any',\n    role: 'style',\n    editType: 'ticks',\n    impliedEdits: {\n      tickmode: 'linear'\n    },\n    description: ['Sets the placement of the first tick on this axis.', 'Use with `dtick`.', 'If the axis `type` is *log*, then you must take the log of your starting tick', '(e.g. to set the starting tick to 100, set the `tick0` to 2)', 'except when `dtick`=*L<f>* (see `dtick` for more info).', 'If the axis `type` is *date*, it should be a date string, like date data.', 'If the axis `type` is *category*, it should be a number, using the scale where', 'each category is assigned a serial number from zero in the order it appears.'].join(' ')\n  },\n  dtick: {\n    valType: 'any',\n    role: 'style',\n    editType: 'ticks',\n    impliedEdits: {\n      tickmode: 'linear'\n    },\n    description: ['Sets the step in-between ticks on this axis. Use with `tick0`.', 'Must be a positive number, or special strings available to *log* and *date* axes.', 'If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n', 'is the tick number. For example,', 'to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.', 'To set tick marks at 1, 100, 10000, ... set dtick to 2.', 'To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.', '*log* has several special values; *L<f>*, where `f` is a positive number,', 'gives ticks linearly spaced in value (but not position).', 'For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.', 'To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).', '`tick0` is ignored for *D1* and *D2*.', 'If the axis `type` is *date*, then you must convert the time to milliseconds.', 'For example, to set the interval between ticks to one day,', 'set `dtick` to 86400000.0.', '*date* also has special values *M<n>* gives ticks spaced by a number of months.', '`n` must be a positive integer.', 'To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.', 'To set ticks every 4 years, set `dtick` to *M48*'].join(' ')\n  },\n  tickvals: {\n    valType: 'data_array',\n    editType: 'ticks',\n    description: ['Sets the values at which ticks on this axis appear.', 'Only has an effect if `tickmode` is set to *array*.', 'Used with `ticktext`.'].join(' ')\n  },\n  ticktext: {\n    valType: 'data_array',\n    editType: 'ticks',\n    description: ['Sets the text displayed at the ticks position via `tickvals`.', 'Only has an effect if `tickmode` is set to *array*.', 'Used with `tickvals`.'].join(' ')\n  },\n  ticks: {\n    valType: 'enumerated',\n    values: ['outside', 'inside', ''],\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines whether ticks are drawn or not.', 'If **, this axis\\' ticks are not drawn.', 'If *outside* (*inside*), this axis\\' are drawn outside (inside)', 'the axis lines.'].join(' ')\n  },\n  tickson: {\n    valType: 'enumerated',\n    values: ['labels', 'boundaries'],\n    role: 'info',\n    dflt: 'labels',\n    editType: 'ticks',\n    description: ['Determines where ticks and grid lines are drawn with respect to their', 'corresponding tick labels.', 'Only has an effect for axes of `type` *category* or *multicategory*.', 'When set to *boundaries*, ticks and grid lines are drawn half a category', 'to the left/bottom of labels.'].join(' ')\n  },\n  mirror: {\n    valType: 'enumerated',\n    values: [true, 'ticks', false, 'all', 'allticks'],\n    dflt: false,\n    role: 'style',\n    editType: 'ticks+layoutstyle',\n    description: ['Determines if the axis lines or/and ticks are mirrored to', 'the opposite side of the plotting area.', 'If *true*, the axis lines are mirrored.', 'If *ticks*, the axis lines and ticks are mirrored.', 'If *false*, mirroring is disable.', 'If *all*, axis lines are mirrored on all shared-axes subplots.', 'If *allticks*, axis lines and ticks are mirrored', 'on all shared-axes subplots.'].join(' ')\n  },\n  ticklen: {\n    valType: 'number',\n    min: 0,\n    dflt: 5,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the tick length (in px).'\n  },\n  tickwidth: {\n    valType: 'number',\n    min: 0,\n    dflt: 1,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the tick width (in px).'\n  },\n  tickcolor: {\n    valType: 'color',\n    dflt: colorAttrs.defaultLine,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the tick color.'\n  },\n  showticklabels: {\n    valType: 'boolean',\n    dflt: true,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Determines whether or not the tick labels are drawn.'\n  },\n  automargin: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines whether long tick labels automatically grow the figure', 'margins.'].join(' ')\n  },\n  showspikes: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'style',\n    editType: 'modebar',\n    description: ['Determines whether or not spikes (aka droplines) are drawn for this axis.', 'Note: This only takes affect when hovermode = closest'].join(' ')\n  },\n  spikecolor: {\n    valType: 'color',\n    dflt: null,\n    role: 'style',\n    editType: 'none',\n    description: 'Sets the spike color. If undefined, will use the series color'\n  },\n  spikethickness: {\n    valType: 'number',\n    dflt: 3,\n    role: 'style',\n    editType: 'none',\n    description: 'Sets the width (in px) of the zero line.'\n  },\n  spikedash: extendFlat({}, dash, {\n    dflt: 'dash',\n    editType: 'none'\n  }),\n  spikemode: {\n    valType: 'flaglist',\n    flags: ['toaxis', 'across', 'marker'],\n    role: 'style',\n    dflt: 'toaxis',\n    editType: 'none',\n    description: ['Determines the drawing mode for the spike line', 'If *toaxis*, the line is drawn from the data point to the axis the ', 'series is plotted on.', 'If *across*, the line is drawn across the entire plot area, and', 'supercedes *toaxis*.', 'If *marker*, then a marker dot is drawn on the axis the series is', 'plotted on'].join(' ')\n  },\n  spikesnap: {\n    valType: 'enumerated',\n    values: ['data', 'cursor'],\n    dflt: 'data',\n    role: 'style',\n    editType: 'none',\n    description: 'Determines whether spikelines are stuck to the cursor or to the closest datapoints.'\n  },\n  tickfont: fontAttrs({\n    editType: 'ticks',\n    description: 'Sets the tick font.'\n  }),\n  tickangle: {\n    valType: 'angle',\n    dflt: 'auto',\n    role: 'style',\n    editType: 'ticks',\n    description: ['Sets the angle of the tick labels with respect to the horizontal.', 'For example, a `tickangle` of -90 draws the tick labels', 'vertically.'].join(' ')\n  },\n  tickprefix: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets a tick label prefix.'\n  },\n  showtickprefix: {\n    valType: 'enumerated',\n    values: ['all', 'first', 'last', 'none'],\n    dflt: 'all',\n    role: 'style',\n    editType: 'ticks',\n    description: ['If *all*, all tick labels are displayed with a prefix.', 'If *first*, only the first tick is displayed with a prefix.', 'If *last*, only the last tick is displayed with a suffix.', 'If *none*, tick prefixes are hidden.'].join(' ')\n  },\n  ticksuffix: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets a tick label suffix.'\n  },\n  showticksuffix: {\n    valType: 'enumerated',\n    values: ['all', 'first', 'last', 'none'],\n    dflt: 'all',\n    role: 'style',\n    editType: 'ticks',\n    description: 'Same as `showtickprefix` but for tick suffixes.'\n  },\n  showexponent: {\n    valType: 'enumerated',\n    values: ['all', 'first', 'last', 'none'],\n    dflt: 'all',\n    role: 'style',\n    editType: 'ticks',\n    description: ['If *all*, all exponents are shown besides their significands.', 'If *first*, only the exponent of the first tick is shown.', 'If *last*, only the exponent of the last tick is shown.', 'If *none*, no exponents appear.'].join(' ')\n  },\n  exponentformat: {\n    valType: 'enumerated',\n    values: ['none', 'e', 'E', 'power', 'SI', 'B'],\n    dflt: 'B',\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines a formatting rule for the tick exponents.', 'For example, consider the number 1,000,000,000.', 'If *none*, it appears as 1,000,000,000.', 'If *e*, 1e+9.', 'If *E*, 1E+9.', 'If *power*, 1x10^9 (with 9 in a super script).', 'If *SI*, 1G.', 'If *B*, 1B.'].join(' ')\n  },\n  separatethousands: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'style',\n    editType: 'ticks',\n    description: ['If \"true\", even 4-digit integers are separated'].join(' ')\n  },\n  tickformat: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    editType: 'ticks',\n    description: ['Sets the tick label formatting rule using d3 formatting mini-languages', 'which are very similar to those in Python. For numbers, see:', FORMAT_LINK, 'And for dates see:', DATE_FORMAT_LINK, 'We add one item to d3\\'s date formatter: *%{n}f* for fractional seconds', 'with n digits. For example, *2016-10-13 09:15:23.456* with tickformat', '*%H~%M~%S.%2f* would display *09~15~23.46*'].join(' ')\n  },\n  tickformatstops: templatedArray('tickformatstop', {\n    enabled: {\n      valType: 'boolean',\n      role: 'info',\n      dflt: true,\n      editType: 'ticks',\n      description: ['Determines whether or not this stop is used.', 'If `false`, this stop is ignored even within its `dtickrange`.'].join(' ')\n    },\n    dtickrange: {\n      valType: 'info_array',\n      role: 'info',\n      items: [{\n        valType: 'any',\n        editType: 'ticks'\n      }, {\n        valType: 'any',\n        editType: 'ticks'\n      }],\n      editType: 'ticks',\n      description: ['range [*min*, *max*], where *min*, *max* - dtick values', 'which describe some zoom level, it is possible to omit *min*', 'or *max* value by passing *null*'].join(' ')\n    },\n    value: {\n      valType: 'string',\n      dflt: '',\n      role: 'style',\n      editType: 'ticks',\n      description: ['string - dtickformat for described zoom level, the same as *tickformat*'].join(' ')\n    },\n    editType: 'ticks'\n  }),\n  hoverformat: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    editType: 'none',\n    description: ['Sets the hover text formatting rule using d3 formatting mini-languages', 'which are very similar to those in Python. For numbers, see:', FORMAT_LINK, 'And for dates see:', DATE_FORMAT_LINK, 'We add one item to d3\\'s date formatter: *%{n}f* for fractional seconds', 'with n digits. For example, *2016-10-13 09:15:23.456* with tickformat', '*%H~%M~%S.%2f* would display *09~15~23.46*'].join(' ')\n  },\n  // lines and grids\n  showline: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'style',\n    editType: 'ticks+layoutstyle',\n    description: ['Determines whether or not a line bounding this axis is drawn.'].join(' ')\n  },\n  linecolor: {\n    valType: 'color',\n    dflt: colorAttrs.defaultLine,\n    role: 'style',\n    editType: 'layoutstyle',\n    description: 'Sets the axis line color.'\n  },\n  linewidth: {\n    valType: 'number',\n    min: 0,\n    dflt: 1,\n    role: 'style',\n    editType: 'ticks+layoutstyle',\n    description: 'Sets the width (in px) of the axis line.'\n  },\n  showgrid: {\n    valType: 'boolean',\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines whether or not grid lines are drawn.', 'If *true*, the grid lines are drawn at every tick mark.'].join(' ')\n  },\n  gridcolor: {\n    valType: 'color',\n    dflt: colorAttrs.lightLine,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the color of the grid lines.'\n  },\n  gridwidth: {\n    valType: 'number',\n    min: 0,\n    dflt: 1,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the width (in px) of the grid lines.'\n  },\n  zeroline: {\n    valType: 'boolean',\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines whether or not a line is drawn at along the 0 value', 'of this axis.', 'If *true*, the zero line is drawn on top of the grid lines.'].join(' ')\n  },\n  zerolinecolor: {\n    valType: 'color',\n    dflt: colorAttrs.defaultLine,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the line color of the zero line.'\n  },\n  zerolinewidth: {\n    valType: 'number',\n    dflt: 1,\n    role: 'style',\n    editType: 'ticks',\n    description: 'Sets the width (in px) of the zero line.'\n  },\n  showdividers: {\n    valType: 'boolean',\n    dflt: true,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Determines whether or not a dividers are drawn', 'between the category levels of this axis.', 'Only has an effect on *multicategory* axes.'].join(' ')\n  },\n  dividercolor: {\n    valType: 'color',\n    dflt: colorAttrs.defaultLine,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Sets the color of the dividers', 'Only has an effect on *multicategory* axes.'].join(' ')\n  },\n  dividerwidth: {\n    valType: 'number',\n    dflt: 1,\n    role: 'style',\n    editType: 'ticks',\n    description: ['Sets the width (in px) of the dividers', 'Only has an effect on *multicategory* axes.'].join(' ')\n  },\n  // TODO dividerlen: that would override \"to label base\" length?\n  // positioning attributes\n  // anchor: not used directly, just put here for reference\n  // values are any opposite-letter axis id\n  anchor: {\n    valType: 'enumerated',\n    values: ['free', constants.idRegex.x.toString(), constants.idRegex.y.toString()],\n    role: 'info',\n    editType: 'plot',\n    description: ['If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to', 'the corresponding opposite-letter axis.', 'If set to *free*, this axis\\' position is determined by `position`.'].join(' ')\n  },\n  // side: not used directly, as values depend on direction\n  // values are top, bottom for x axes, and left, right for y\n  side: {\n    valType: 'enumerated',\n    values: ['top', 'bottom', 'left', 'right'],\n    role: 'info',\n    editType: 'plot',\n    description: ['Determines whether a x (y) axis is positioned', 'at the *bottom* (*left*) or *top* (*right*)', 'of the plotting area.'].join(' ')\n  },\n  // overlaying: not used directly, just put here for reference\n  // values are false and any other same-letter axis id that's not\n  // itself overlaying anything\n  overlaying: {\n    valType: 'enumerated',\n    values: ['free', constants.idRegex.x.toString(), constants.idRegex.y.toString()],\n    role: 'info',\n    editType: 'plot',\n    description: ['If set a same-letter axis id, this axis is overlaid on top of', 'the corresponding same-letter axis, with traces and axes visible for both', 'axes.', 'If *false*, this axis does not overlay any same-letter axes.', 'In this case, for axes with overlapping domains only the highest-numbered', 'axis will be visible.'].join(' ')\n  },\n  layer: {\n    valType: 'enumerated',\n    values: ['above traces', 'below traces'],\n    dflt: 'above traces',\n    role: 'info',\n    editType: 'plot',\n    description: ['Sets the layer on which this axis is displayed.', 'If *above traces*, this axis is displayed above all the subplot\\'s traces', 'If *below traces*, this axis is displayed below all the subplot\\'s traces,', 'but above the grid lines.', 'Useful when used together with scatter-like traces with `cliponaxis`', 'set to *false* to show markers and/or text nodes above this axis.'].join(' ')\n  },\n  domain: {\n    valType: 'info_array',\n    role: 'info',\n    items: [{\n      valType: 'number',\n      min: 0,\n      max: 1,\n      editType: 'plot'\n    }, {\n      valType: 'number',\n      min: 0,\n      max: 1,\n      editType: 'plot'\n    }],\n    dflt: [0, 1],\n    editType: 'plot',\n    description: ['Sets the domain of this axis (in plot fraction).'].join(' ')\n  },\n  position: {\n    valType: 'number',\n    min: 0,\n    max: 1,\n    dflt: 0,\n    role: 'style',\n    editType: 'plot',\n    description: ['Sets the position of this axis in the plotting space', '(in normalized coordinates).', 'Only has an effect if `anchor` is set to *free*.'].join(' ')\n  },\n  categoryorder: {\n    valType: 'enumerated',\n    values: ['trace', 'category ascending', 'category descending', 'array', 'total ascending', 'total descending', 'min ascending', 'min descending', 'max ascending', 'max descending', 'sum ascending', 'sum descending', 'mean ascending', 'mean descending', 'median ascending', 'median descending'],\n    dflt: 'trace',\n    role: 'info',\n    editType: 'calc',\n    description: ['Specifies the ordering logic for the case of categorical variables.', 'By default, plotly uses *trace*, which specifies the order that is present in the data supplied.', 'Set `categoryorder` to *category ascending* or *category descending* if order should be determined by', 'the alphanumerical order of the category names.', 'Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category', 'is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to', 'the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.', 'Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the', 'numerical order of the values.', 'Similarly, the order can be determined by the min, max, sum, mean or median of all the values.'].join(' ')\n  },\n  categoryarray: {\n    valType: 'data_array',\n    role: 'info',\n    editType: 'calc',\n    description: ['Sets the order in which categories on this axis appear.', 'Only has an effect if `categoryorder` is set to *array*.', 'Used with `categoryorder`.'].join(' ')\n  },\n  uirevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'none',\n    description: ['Controls persistence of user-driven changes in axis `range`,', '`autorange`, and `title` if in `editable: true` configuration.', 'Defaults to `layout.uirevision`.'].join(' ')\n  },\n  editType: 'calc',\n  _deprecated: {\n    autotick: {\n      valType: 'boolean',\n      role: 'info',\n      editType: 'ticks',\n      description: ['Obsolete.', 'Set `tickmode` to *auto* for old `autotick` *true* behavior.', 'Set `tickmode` to *linear* for `autotick` *false*.'].join(' ')\n    },\n    title: {\n      valType: 'string',\n      role: 'info',\n      editType: 'ticks',\n      description: ['Value of `title` is no longer a simple *string* but a set of sub-attributes.', 'To set the axis\\' title, please use `title.text` now.'].join(' ')\n    },\n    titlefont: fontAttrs({\n      editType: 'ticks',\n      description: ['Former `titlefont` is now the sub-attribute `font` of `title`.', 'To customize title font properties, please use `title.font` now.'].join(' ')\n    })\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nexports.dash = {\n  valType: 'string',\n  // string type usually doesn't take values... this one should really be\n  // a special type or at least a special coercion function, from the GUI\n  // you only get these values but elsewhere the user can supply a list of\n  // dash lengths in px, and it will be honored\n  values: ['solid', 'dot', 'dash', 'longdash', 'dashdot', 'longdashdot'],\n  dflt: 'solid',\n  role: 'style',\n  editType: 'style',\n  description: ['Sets the dash style of lines. Set to a dash type string', '(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)', 'or a dash length list in px (eg *5px,10px,2px,2px*).'].join(' ')\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar cleanTicks = require('./clean_ticks');\n\nmodule.exports = function handleTickValueDefaults(containerIn, containerOut, coerce, axType) {\n  var tickmode;\n\n  if (containerIn.tickmode === 'array' && (axType === 'log' || axType === 'date')) {\n    tickmode = containerOut.tickmode = 'auto';\n  } else {\n    var tickmodeDefault = Array.isArray(containerIn.tickvals) ? 'array' : containerIn.dtick ? 'linear' : 'auto';\n    tickmode = coerce('tickmode', tickmodeDefault);\n  }\n\n  if (tickmode === 'auto') coerce('nticks');else if (tickmode === 'linear') {\n    // dtick is usually a positive number, but there are some\n    // special strings available for log or date axes\n    // tick0 also has special logic\n    var dtick = containerOut.dtick = cleanTicks.dtick(containerIn.dtick, axType);\n    containerOut.tick0 = cleanTicks.tick0(containerIn.tick0, axType, containerOut.calendar, dtick);\n  } else if (axType !== 'multicategory') {\n    var tickvals = coerce('tickvals');\n    if (tickvals === undefined) containerOut.tickmode = 'auto';else coerce('ticktext');\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar ONEDAY = require('../../constants/numerical').ONEDAY;\n/**\n * Return a validated dtick value for this axis\n *\n * @param {any} dtick: the candidate dtick. valid values are numbers and strings,\n *     and further constrained depending on the axis type.\n * @param {string} axType: the axis type\n */\n\n\nexports.dtick = function (dtick, axType) {\n  var isLog = axType === 'log';\n  var isDate = axType === 'date';\n  var isCat = axType === 'category';\n  var dtickDflt = isDate ? ONEDAY : 1;\n  if (!dtick) return dtickDflt;\n\n  if (isNumeric(dtick)) {\n    dtick = Number(dtick);\n    if (dtick <= 0) return dtickDflt;\n\n    if (isCat) {\n      // category dtick must be positive integers\n      return Math.max(1, Math.round(dtick));\n    }\n\n    if (isDate) {\n      // date dtick must be at least 0.1ms (our current precision)\n      return Math.max(0.1, dtick);\n    }\n\n    return dtick;\n  }\n\n  if (typeof dtick !== 'string' || !(isDate || isLog)) {\n    return dtickDflt;\n  }\n\n  var prefix = dtick.charAt(0);\n  var dtickNum = dtick.substr(1);\n  dtickNum = isNumeric(dtickNum) ? Number(dtickNum) : 0;\n\n  if (dtickNum <= 0 || !( // \"M<n>\" gives ticks every (integer) n months\n  isDate && prefix === 'M' && dtickNum === Math.round(dtickNum) || // \"L<f>\" gives ticks linearly spaced in data (not in position) every (float) f\n  isLog && prefix === 'L' || // \"D1\" gives powers of 10 with all small digits between, \"D2\" gives only 2 and 5\n  isLog && prefix === 'D' && (dtickNum === 1 || dtickNum === 2))) {\n    return dtickDflt;\n  }\n\n  return dtick;\n};\n/**\n * Return a validated tick0 for this axis\n *\n * @param {any} tick0: the candidate tick0. Valid values are numbers and strings,\n *     further constrained depending on the axis type\n * @param {string} axType: the axis type\n * @param {string} calendar: for date axes, the calendar to validate/convert with\n * @param {any} dtick: an already valid dtick. Only used for D1 and D2 log dticks,\n *     which do not support tick0 at all.\n */\n\n\nexports.tick0 = function (tick0, axType, calendar, dtick) {\n  if (axType === 'date') {\n    return Lib.cleanDate(tick0, Lib.dateTick0(calendar));\n  }\n\n  if (dtick === 'D1' || dtick === 'D2') {\n    // D1 and D2 modes ignore tick0 entirely\n    return undefined;\n  } // Aside from date axes, tick0 must be numeric\n\n\n  return isNumeric(tick0) ? Number(tick0) : 0;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // IMPORTANT - default colors should be in hex for compatibility\n\nexports.defaults = ['#1f77b4', // muted blue\n'#ff7f0e', // safety orange\n'#2ca02c', // cooked asparagus green\n'#d62728', // brick red\n'#9467bd', // muted purple\n'#8c564b', // chestnut brown\n'#e377c2', // raspberry yogurt pink\n'#7f7f7f', // middle gray\n'#bcbd22', // curry yellow-green\n'#17becf' // blue-teal\n];\nexports.defaultLine = '#444';\nexports.lightLine = '#eee';\nexports.background = '#fff';\nexports.borderLine = '#BEC8D9'; // with axis.color and Color.interp we aren't using lightLine\n// itself anymore, instead interpolating between axis.color\n// and the background color using tinycolor.mix. lightFraction\n// gives back exactly lightLine if the other colors are defaults.\n\nexports.lightFraction = 100 * (0xe - 0x4) / (0xf - 0x4);","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar loggers = require('./loggers');\n\nvar identity = require('./identity'); // don't trust floating point equality - fraction of bin size to call\n// \"on the line\" and ensure that they go the right way specified by\n// linelow\n\n\nvar roundingError = 1e-9;\n/**\n * findBin - find the bin for val - note that it can return outside the\n * bin range any pos. or neg. integer for linear bins, or -1 or\n * bins.length-1 for explicit.\n * bins is either an object {start,size,end} or an array length #bins+1\n * bins can be either increasing or decreasing but must be monotonic\n * for linear bins, we can just calculate. For listed bins, run a binary\n * search linelow (truthy) says the bin boundary should be attributed to\n * the lower bin rather than the default upper bin\n */\n\nexports.findBin = function (val, bins, linelow) {\n  if (isNumeric(bins.start)) {\n    return linelow ? Math.ceil((val - bins.start) / bins.size - roundingError) - 1 : Math.floor((val - bins.start) / bins.size + roundingError);\n  } else {\n    var n1 = 0;\n    var n2 = bins.length;\n    var c = 0;\n    var binSize = n2 > 1 ? (bins[n2 - 1] - bins[0]) / (n2 - 1) : 1;\n    var n, test;\n\n    if (binSize >= 0) {\n      test = linelow ? lessThan : lessOrEqual;\n    } else {\n      test = linelow ? greaterOrEqual : greaterThan;\n    }\n\n    val += binSize * roundingError * (linelow ? -1 : 1) * (binSize >= 0 ? 1 : -1); // c is just to avoid infinite loops if there's an error\n\n    while (n1 < n2 && c++ < 100) {\n      n = Math.floor((n1 + n2) / 2);\n      if (test(bins[n], val)) n1 = n + 1;else n2 = n;\n    }\n\n    if (c > 90) loggers.log('Long binary search...');\n    return n1 - 1;\n  }\n};\n\nfunction lessThan(a, b) {\n  return a < b;\n}\n\nfunction lessOrEqual(a, b) {\n  return a <= b;\n}\n\nfunction greaterThan(a, b) {\n  return a > b;\n}\n\nfunction greaterOrEqual(a, b) {\n  return a >= b;\n}\n\nexports.sorterAsc = function (a, b) {\n  return a - b;\n};\n\nexports.sorterDes = function (a, b) {\n  return b - a;\n};\n/**\n * find distinct values in an array, lumping together ones that appear to\n * just be off by a rounding error\n * return the distinct values and the minimum difference between any two\n */\n\n\nexports.distinctVals = function (valsIn) {\n  var vals = valsIn.slice(); // otherwise we sort the original array...\n\n  vals.sort(exports.sorterAsc);\n  var l = vals.length - 1;\n  var minDiff = vals[l] - vals[0] || 1;\n  var errDiff = minDiff / (l || 1) / 10000;\n  var v2 = [vals[0]];\n\n  for (var i = 0; i < l; i++) {\n    // make sure values aren't just off by a rounding error\n    if (vals[i + 1] > vals[i] + errDiff) {\n      minDiff = Math.min(minDiff, vals[i + 1] - vals[i]);\n      v2.push(vals[i + 1]);\n    }\n  }\n\n  return {\n    vals: v2,\n    minDiff: minDiff\n  };\n};\n/**\n * return the smallest element from (sorted) array arrayIn that's bigger than val,\n * or (reverse) the largest element smaller than val\n * used to find the best tick given the minimum (non-rounded) tick\n * particularly useful for date/time where things are not powers of 10\n * binary search is probably overkill here...\n */\n\n\nexports.roundUp = function (val, arrayIn, reverse) {\n  var low = 0;\n  var high = arrayIn.length - 1;\n  var mid;\n  var c = 0;\n  var dlow = reverse ? 0 : 1;\n  var dhigh = reverse ? 1 : 0;\n  var rounded = reverse ? Math.ceil : Math.floor; // c is just to avoid infinite loops if there's an error\n\n  while (low < high && c++ < 100) {\n    mid = rounded((low + high) / 2);\n    if (arrayIn[mid] <= val) low = mid + dlow;else high = mid - dhigh;\n  }\n\n  return arrayIn[low];\n};\n/**\n * Tweak to Array.sort(sortFn) that improves performance for pre-sorted arrays\n *\n * Note that newer browsers (such as Chrome v70+) are starting to pick up\n * on pre-sorted arrays which may render the following optimization unnecessary\n * in the future.\n *\n * Motivation: sometimes we need to sort arrays but the input is likely to\n * already be sorted. Browsers don't seem to pick up on pre-sorted arrays,\n * and in fact Chrome is actually *slower* sorting pre-sorted arrays than purely\n * random arrays. FF is at least faster if the array is pre-sorted, but still\n * not as fast as it could be.\n * Here's how this plays out sorting a length-1e6 array:\n *\n * Calls to Sort FN  |  Chrome bare  |  FF bare  |  Chrome tweak  |  FF tweak\n *                   |  v68.0 Mac    |  v61.0 Mac|                |\n * ------------------+---------------+-----------+----------------+------------\n * ordered           |  30.4e6       |  10.1e6   |  1e6           |  1e6\n * reversed          |  29.4e6       |  9.9e6    |  1e6 + reverse |  1e6 + reverse\n * random            |  ~21e6        |  ~18.7e6  |  ~21e6         |  ~18.7e6\n *\n * So this is a substantial win for pre-sorted (ordered or exactly reversed)\n * arrays. Including this wrapper on an unsorted array adds a penalty that will\n * in general be only a few calls to the sort function. The only case this\n * penalty will be significant is if the array is mostly sorted but there are\n * a few unsorted items near the end, but the penalty is still at most N calls\n * out of (for N=1e6) ~20N total calls\n *\n * @param {Array} array: the array, to be sorted in place\n * @param {function} sortFn: As in Array.sort, function(a, b) that puts\n *     item a before item b if the return is negative, a after b if positive,\n *     and no change if zero.\n * @return {Array}: the original array, sorted in place.\n */\n\n\nexports.sort = function (array, sortFn) {\n  var notOrdered = 0;\n  var notReversed = 0;\n\n  for (var i = 1; i < array.length; i++) {\n    var pairOrder = sortFn(array[i], array[i - 1]);\n    if (pairOrder < 0) notOrdered = 1;else if (pairOrder > 0) notReversed = 1;\n    if (notOrdered && notReversed) return array.sort(sortFn);\n  }\n\n  return notReversed ? array : array.reverse();\n};\n/**\n * find index in array 'arr' that minimizes 'fn'\n *\n * @param {array} arr : array where to search\n * @param {fn (optional)} fn : function to minimize,\n *   if not given, fn is the identity function\n * @return {integer}\n */\n\n\nexports.findIndexOfMin = function (arr, fn) {\n  fn = fn || identity;\n  var min = Infinity;\n  var ind;\n\n  for (var i = 0; i < arr.length; i++) {\n    var v = fn(arr[i]);\n\n    if (v < min) {\n      min = v;\n      ind = i;\n    }\n  }\n\n  return ind;\n};","module.exports = true;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  PTS_LINESONLY: 20,\n  // fixed parameters of clustering and clipping algorithms\n  // fraction of clustering tolerance \"so close we don't even consider it a new point\"\n  minTolerance: 0.2,\n  // how fast does clustering tolerance increase as you get away from the visible region\n  toleranceGrowth: 10,\n  // number of viewport sizes away from the visible region\n  // at which we clip all lines to the perimeter\n  maxScreensAway: 20,\n  eventDataKeys: []\n};","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar Lib = require('../../lib');\n\nmodule.exports = {\n  hasLines: function hasLines(trace) {\n    return trace.visible && trace.mode && trace.mode.indexOf('lines') !== -1;\n  },\n  hasMarkers: function hasMarkers(trace) {\n    return trace.visible && (trace.mode && trace.mode.indexOf('markers') !== -1 || // until splom implements 'mode'\n    trace.type === 'splom');\n  },\n  hasText: function hasText(trace) {\n    return trace.visible && trace.mode && trace.mode.indexOf('text') !== -1;\n  },\n  isBubble: function isBubble(trace) {\n    return Lib.isPlainObject(trace.marker) && Lib.isArrayOrTypedArray(trace.marker.size);\n  }\n};","var $export = require('./_export');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar fromCharCode = String.fromCharCode;\nvar $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars\n    var res = [];\n    var aLen = arguments.length;\n    var i = 0;\n    var code;\n    while (aLen > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.string.link\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar Color = require('../../components/color');\n\nvar tinycolor = require('tinycolor2');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel); // node attributes\n\n  var nodeIn = traceIn.node;\n  var nodeOut = Template.newContainer(traceOut, 'node');\n\n  function coerceNode(attr, dflt) {\n    return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n  }\n\n  coerceNode('label');\n  coerceNode('groups');\n  coerceNode('x');\n  coerceNode('y');\n  coerceNode('pad');\n  coerceNode('thickness');\n  coerceNode('line.color');\n  coerceNode('line.width');\n  coerceNode('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n  coerceNode('hovertemplate');\n  var colors = layout.colorway;\n\n  var defaultNodePalette = function defaultNodePalette(i) {\n    return colors[i % colors.length];\n  };\n\n  coerceNode('color', nodeOut.label.map(function (d, i) {\n    return Color.addOpacity(defaultNodePalette(i), 0.8);\n  })); // link attributes\n\n  var linkIn = traceIn.link || {};\n  var linkOut = Template.newContainer(traceOut, 'link');\n\n  function coerceLink(attr, dflt) {\n    return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n  }\n\n  coerceLink('label');\n  coerceLink('source');\n  coerceLink('target');\n  coerceLink('value');\n  coerceLink('line.color');\n  coerceLink('line.width');\n  coerceLink('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n  coerceLink('hovertemplate');\n  var defaultLinkColor = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333 ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n  coerceLink('color', Lib.repeat(defaultLinkColor, linkOut.value.length));\n  handleArrayContainerDefaults(linkIn, linkOut, {\n    name: 'colorscales',\n    handleItemDefaults: concentrationscalesDefaults\n  });\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('orientation');\n  coerce('valueformat');\n  coerce('valuesuffix');\n  var dfltArrangement;\n\n  if (nodeOut.x.length && nodeOut.y.length) {\n    dfltArrangement = 'freeform';\n  }\n\n  coerce('arrangement', dfltArrangement);\n  Lib.coerceFont(coerce, 'textfont', Lib.extendFlat({}, layout.font)); // disable 1D transforms - arrays here are 1D but their lengths/meanings\n  // don't match, between nodes and links\n\n  traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n  }\n\n  coerce('label');\n  coerce('cmin');\n  coerce('cmax');\n  coerce('colorscale');\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar Lib = require('../lib');\n\nvar Template = require('../plot_api/plot_template');\n/** Convenience wrapper for making array container logic DRY and consistent\n *\n * @param {object} parentObjIn\n *  user input object where the container in question is linked\n *  (i.e. either a user trace object or the user layout object)\n *\n * @param {object} parentObjOut\n *  full object where the coerced container will be linked\n *  (i.e. either a full trace object or the full layout object)\n *\n * @param {object} opts\n *  options object:\n *   - name {string}\n *      name of the key linking the container in question\n *   - inclusionAttr {string}\n *      name of the item attribute for inclusion/exclusion. Default is 'visible'.\n *      Since inclusion is true, use eg 'enabled' instead of 'disabled'.\n *   - handleItemDefaults {function}\n *      defaults method to be called on each item in the array container in question\n *\n *      Its arguments are:\n *          - itemIn {object} item in user layout\n *          - itemOut {object} item in full layout\n *          - parentObj {object} (as in closure)\n *          - opts {object} (as in closure)\n * N.B.\n *\n *  - opts is passed to handleItemDefaults so it can also store\n *    links to supplementary data (e.g. fullData for layout components)\n *\n */\n\n\nmodule.exports = function handleArrayContainerDefaults(parentObjIn, parentObjOut, opts) {\n  var name = opts.name;\n  var inclusionAttr = opts.inclusionAttr || 'visible';\n  var previousContOut = parentObjOut[name];\n  var contIn = Lib.isArrayOrTypedArray(parentObjIn[name]) ? parentObjIn[name] : [];\n  var contOut = parentObjOut[name] = [];\n  var templater = Template.arrayTemplater(parentObjOut, name, inclusionAttr);\n  var i, itemOut;\n\n  for (i = 0; i < contIn.length; i++) {\n    var itemIn = contIn[i];\n\n    if (!Lib.isPlainObject(itemIn)) {\n      itemOut = templater.newItem({});\n      itemOut[inclusionAttr] = false;\n    } else {\n      itemOut = templater.newItem(itemIn);\n    }\n\n    itemOut._index = i;\n\n    if (itemOut[inclusionAttr] !== false) {\n      opts.handleItemDefaults(itemIn, itemOut, parentObjOut, opts);\n    }\n\n    contOut.push(itemOut);\n  }\n\n  var defaultItems = templater.defaultItems();\n\n  for (i = 0; i < defaultItems.length; i++) {\n    itemOut = defaultItems[i];\n    itemOut._index = contOut.length;\n    opts.handleItemDefaults({}, itemOut, parentObjOut, opts, {});\n    contOut.push(itemOut);\n  } // in case this array gets its defaults rebuilt independent of the whole layout,\n  // relink the private keys just for this array.\n\n\n  if (Lib.isArrayOrTypedArray(previousContOut)) {\n    var len = Math.min(previousContOut.length, contOut.length);\n\n    for (i = 0; i < len; i++) {\n      Lib.relinkPrivateKeys(contOut[i], previousContOut[i]);\n    }\n  }\n\n  return contOut;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nmodule.exports = {\n  /**\n   * Standardize all missing data in calcdata to use undefined\n   * never null or NaN.\n   * That way we can use !==undefined, or !== BADNUM,\n   * to test for real data\n   */\n  BADNUM: undefined,\n\n  /*\n   * Limit certain operations to well below floating point max value\n   * to avoid glitches: Make sure that even when you multiply it by the\n   * number of pixels on a giant screen it still works\n   */\n  FP_SAFE: Number.MAX_VALUE / 10000,\n\n  /*\n   * conversion of date units to milliseconds\n   * year and month constants are marked \"AVG\"\n   * to remind us that not all years and months\n   * have the same length\n   */\n  ONEAVGYEAR: 31557600000,\n  // 365.25 days\n  ONEAVGMONTH: 2629800000,\n  // 1/12 of ONEAVGYEAR\n  ONEDAY: 86400000,\n  ONEHOUR: 3600000,\n  ONEMIN: 60000,\n  ONESEC: 1000,\n\n  /*\n   * For fast conversion btwn world calendars and epoch ms, the Julian Day Number\n   * of the unix epoch. From calendars.instance().newDate(1970, 1, 1).toJD()\n   */\n  EPOCHJD: 2440587.5,\n\n  /*\n   * Are two values nearly equal? Compare to 1PPM\n   */\n  ALMOST_EQUAL: 1 - 1e-6,\n\n  /*\n   * If we're asked to clip a non-positive log value, how far off-screen\n   * do we put it?\n   */\n  LOG_CLIP: 10,\n\n  /*\n   * not a number, but for displaying numbers: the \"minus sign\" symbol is\n   * wider than the regular ascii dash \"-\"\n   */\n  MINUS_SIGN: \"\\u2212\"\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar tinycolor = require('tinycolor2');\n\nvar Lib = require('../../lib');\n\nvar Events = require('../../lib/events');\n\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar overrideCursor = require('../../lib/override_cursor');\n\nvar Drawing = require('../drawing');\n\nvar Color = require('../color');\n\nvar dragElement = require('../dragelement');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar Registry = require('../../registry');\n\nvar helpers = require('./helpers');\n\nvar constants = require('./constants'); // hover labels for multiple horizontal bars get tilted by some angle,\n// then need to be offset differently if they overlap\n\n\nvar YANGLE = constants.YANGLE;\nvar YA_RADIANS = Math.PI * YANGLE / 180; // expansion of projected height\n\nvar YFACTOR = 1 / Math.sin(YA_RADIANS); // to make the appropriate post-rotation x offset,\n// you need both x and y offsets\n\nvar YSHIFTX = Math.cos(YA_RADIANS);\nvar YSHIFTY = Math.sin(YA_RADIANS); // size and display constants for hover text\n\nvar HOVERARROWSIZE = constants.HOVERARROWSIZE;\nvar HOVERTEXTPAD = constants.HOVERTEXTPAD; // fx.hover: highlight data on hover\n// evt can be a mousemove event, or an object with data about what points\n//   to hover on\n//      {xpx,ypx[,hovermode]} - pixel locations from top left\n//          (with optional overriding hovermode)\n//      {xval,yval[,hovermode]} - data values\n//      [{curveNumber,(pointNumber|xval and/or yval)}] -\n//              array of specific points to highlight\n//          pointNumber is a single integer if gd.data[curveNumber] is 1D,\n//              or a two-element array if it's 2D\n//          xval and yval are data values,\n//              1D data may specify either or both,\n//              2D data must specify both\n// subplot is an id string (default \"xy\")\n// makes use of gl.hovermode, which can be:\n//      x (find the points with the closest x values, ie a column),\n//      closest (find the single closest point)\n//    internally there are two more that occasionally get used:\n//      y (pick out a row - only used for multiple horizontal bar charts)\n//      array (used when the user specifies an explicit\n//          array of points to hover on)\n//\n// We wrap the hovers in a timer, to limit their frequency.\n// The actual rendering is done by private function _hover.\n\nexports.hover = function hover(gd, evt, subplot, noHoverEvent) {\n  gd = Lib.getGraphDiv(gd);\n  Lib.throttle(gd._fullLayout._uid + constants.HOVERID, constants.HOVERMINTIME, function () {\n    _hover(gd, evt, subplot, noHoverEvent);\n  });\n};\n/*\n * Draw a single hover item or an array of hover item in a pre-existing svg container somewhere\n * hoverItem should have keys:\n *    - x and y (or x0, x1, y0, and y1):\n *      the pixel position to mark, relative to opts.container\n *    - xLabel, yLabel, zLabel, text, and name:\n *      info to go in the label\n *    - color:\n *      the background color for the label.\n *    - idealAlign (optional):\n *      'left' or 'right' for which side of the x/y box to try to put this on first\n *    - borderColor (optional):\n *      color for the border, defaults to strongest contrast with color\n *    - fontFamily (optional):\n *      string, the font for this label, defaults to constants.HOVERFONT\n *    - fontSize (optional):\n *      the label font size, defaults to constants.HOVERFONTSIZE\n *    - fontColor (optional):\n *      defaults to borderColor\n * opts should have keys:\n *    - bgColor:\n *      the background color this is against, used if the trace is\n *      non-opaque, and for the name, which goes outside the box\n *    - container:\n *      a <svg> or <g> element to add the hover label to\n *    - outerContainer:\n *      normally a parent of `container`, sets the bounding box to use to\n *      constrain the hover label and determine whether to show it on the left or right\n * opts can have optional keys:\n *    - anchorIndex:\n        the index of the hover item used as an anchor for positioning.\n        The other hover items will be pushed up or down to prevent overlap.\n */\n\n\nexports.loneHover = function loneHover(hoverItems, opts) {\n  var multiHover = true;\n\n  if (!Array.isArray(hoverItems)) {\n    multiHover = false;\n    hoverItems = [hoverItems];\n  }\n\n  var pointsData = hoverItems.map(function (hoverItem) {\n    return {\n      color: hoverItem.color || Color.defaultLine,\n      x0: hoverItem.x0 || hoverItem.x || 0,\n      x1: hoverItem.x1 || hoverItem.x || 0,\n      y0: hoverItem.y0 || hoverItem.y || 0,\n      y1: hoverItem.y1 || hoverItem.y || 0,\n      xLabel: hoverItem.xLabel,\n      yLabel: hoverItem.yLabel,\n      zLabel: hoverItem.zLabel,\n      text: hoverItem.text,\n      name: hoverItem.name,\n      idealAlign: hoverItem.idealAlign,\n      // optional extra bits of styling\n      borderColor: hoverItem.borderColor,\n      fontFamily: hoverItem.fontFamily,\n      fontSize: hoverItem.fontSize,\n      fontColor: hoverItem.fontColor,\n      nameLength: hoverItem.nameLength,\n      textAlign: hoverItem.textAlign,\n      // filler to make createHoverText happy\n      trace: hoverItem.trace || {\n        index: 0,\n        hoverinfo: ''\n      },\n      xa: {\n        _offset: 0\n      },\n      ya: {\n        _offset: 0\n      },\n      index: 0,\n      hovertemplate: hoverItem.hovertemplate || false,\n      eventData: hoverItem.eventData || false,\n      hovertemplateLabels: hoverItem.hovertemplateLabels || false\n    };\n  });\n  var container3 = d3.select(opts.container);\n  var outerContainer3 = opts.outerContainer ? d3.select(opts.outerContainer) : container3;\n  var fullOpts = {\n    hovermode: 'closest',\n    rotateLabels: false,\n    bgColor: opts.bgColor || Color.background,\n    container: container3,\n    outerContainer: outerContainer3\n  };\n  var hoverLabel = createHoverText(pointsData, fullOpts, opts.gd); // Fix vertical overlap\n\n  var tooltipSpacing = 5;\n  var lastBottomY = 0;\n  var anchor = 0;\n  hoverLabel.sort(function (a, b) {\n    return a.y0 - b.y0;\n  }).each(function (d, i) {\n    var topY = d.y0 - d.by / 2;\n\n    if (topY - tooltipSpacing < lastBottomY) {\n      d.offset = lastBottomY - topY + tooltipSpacing;\n    } else {\n      d.offset = 0;\n    }\n\n    lastBottomY = topY + d.by + d.offset;\n    if (i === opts.anchorIndex || 0) anchor = d.offset;\n  }).each(function (d) {\n    d.offset -= anchor;\n  });\n  alignHoverText(hoverLabel, fullOpts.rotateLabels);\n  return multiHover ? hoverLabel : hoverLabel.node();\n}; // The actual implementation is here:\n\n\nfunction _hover(gd, evt, subplot, noHoverEvent) {\n  if (!subplot) subplot = 'xy'; // if the user passed in an array of subplots,\n  // use those instead of finding overlayed plots\n\n  var subplots = Array.isArray(subplot) ? subplot : [subplot];\n  var fullLayout = gd._fullLayout;\n  var plots = fullLayout._plots || [];\n  var plotinfo = plots[subplot];\n\n  var hasCartesian = fullLayout._has('cartesian'); // list of all overlaid subplots to look at\n\n\n  if (plotinfo) {\n    var overlayedSubplots = plotinfo.overlays.map(function (pi) {\n      return pi.id;\n    });\n    subplots = subplots.concat(overlayedSubplots);\n  }\n\n  var len = subplots.length;\n  var xaArray = new Array(len);\n  var yaArray = new Array(len);\n  var supportsCompare = false;\n\n  for (var i = 0; i < len; i++) {\n    var spId = subplots[i];\n\n    if (plots[spId]) {\n      // 'cartesian' case\n      supportsCompare = true;\n      xaArray[i] = plots[spId].xaxis;\n      yaArray[i] = plots[spId].yaxis;\n    } else if (fullLayout[spId] && fullLayout[spId]._subplot) {\n      // other subplot types\n      var _subplot = fullLayout[spId]._subplot;\n      xaArray[i] = _subplot.xaxis;\n      yaArray[i] = _subplot.yaxis;\n    } else {\n      Lib.warn('Unrecognized subplot: ' + spId);\n      return;\n    }\n  }\n\n  var hovermode = evt.hovermode || fullLayout.hovermode;\n  if (hovermode && !supportsCompare) hovermode = 'closest';\n\n  if (['x', 'y', 'closest'].indexOf(hovermode) === -1 || !gd.calcdata || gd.querySelector('.zoombox') || gd._dragging) {\n    return dragElement.unhoverRaw(gd, evt);\n  }\n\n  var hoverdistance = fullLayout.hoverdistance === -1 ? Infinity : fullLayout.hoverdistance;\n  var spikedistance = fullLayout.spikedistance === -1 ? Infinity : fullLayout.spikedistance; // hoverData: the set of candidate points we've found to highlight\n\n  var hoverData = []; // searchData: the data to search in. Mostly this is just a copy of\n  // gd.calcdata, filtered to the subplot and overlays we're on\n  // but if a point array is supplied it will be a mapping\n  // of indicated curves\n\n  var searchData = []; // [x|y]valArray: the axis values of the hover event\n  // mapped onto each of the currently selected overlaid subplots\n\n  var xvalArray, yvalArray;\n  var itemnum, curvenum, cd, trace, subplotId, subploti, mode, xval, yval, pointData, closedataPreviousLength; // spikePoints: the set of candidate points we've found to draw spikes to\n\n  var spikePoints = {\n    hLinePoint: null,\n    vLinePoint: null\n  }; // does subplot have one (or more) horizontal traces?\n  // This is used to determine whether we rotate the labels or not\n\n  var hasOneHorizontalTrace = false; // Figure out what we're hovering on:\n  // mouse location or user-supplied data\n\n  if (Array.isArray(evt)) {\n    // user specified an array of points to highlight\n    hovermode = 'array';\n\n    for (itemnum = 0; itemnum < evt.length; itemnum++) {\n      cd = gd.calcdata[evt[itemnum].curveNumber || 0];\n\n      if (cd) {\n        trace = cd[0].trace;\n\n        if (cd[0].trace.hoverinfo !== 'skip') {\n          searchData.push(cd);\n\n          if (trace.orientation === 'h') {\n            hasOneHorizontalTrace = true;\n          }\n        }\n      }\n    }\n  } else {\n    for (curvenum = 0; curvenum < gd.calcdata.length; curvenum++) {\n      cd = gd.calcdata[curvenum];\n      trace = cd[0].trace;\n\n      if (trace.hoverinfo !== 'skip' && helpers.isTraceInSubplots(trace, subplots)) {\n        searchData.push(cd);\n\n        if (trace.orientation === 'h') {\n          hasOneHorizontalTrace = true;\n        }\n      }\n    } // [x|y]px: the pixels (from top left) of the mouse location\n    // on the currently selected plot area\n    // add pointerX|Y property for drawing the spikes in spikesnap 'cursor' situation\n\n\n    var hasUserCalledHover = !evt.target;\n    var xpx, ypx;\n\n    if (hasUserCalledHover) {\n      if ('xpx' in evt) xpx = evt.xpx;else xpx = xaArray[0]._length / 2;\n      if ('ypx' in evt) ypx = evt.ypx;else ypx = yaArray[0]._length / 2;\n    } else {\n      // fire the beforehover event and quit if it returns false\n      // note that we're only calling this on real mouse events, so\n      // manual calls to fx.hover will always run.\n      if (Events.triggerHandler(gd, 'plotly_beforehover', evt) === false) {\n        return;\n      }\n\n      var dbb = evt.target.getBoundingClientRect();\n      xpx = evt.clientX - dbb.left;\n      ypx = evt.clientY - dbb.top; // in case hover was called from mouseout into hovertext,\n      // it's possible you're not actually over the plot anymore\n\n      if (xpx < 0 || xpx > xaArray[0]._length || ypx < 0 || ypx > yaArray[0]._length) {\n        return dragElement.unhoverRaw(gd, evt);\n      }\n    }\n\n    evt.pointerX = xpx + xaArray[0]._offset;\n    evt.pointerY = ypx + yaArray[0]._offset;\n    if ('xval' in evt) xvalArray = helpers.flat(subplots, evt.xval);else xvalArray = helpers.p2c(xaArray, xpx);\n    if ('yval' in evt) yvalArray = helpers.flat(subplots, evt.yval);else yvalArray = helpers.p2c(yaArray, ypx);\n\n    if (!isNumeric(xvalArray[0]) || !isNumeric(yvalArray[0])) {\n      Lib.warn('Fx.hover failed', evt, gd);\n      return dragElement.unhoverRaw(gd, evt);\n    }\n  } // the pixel distance to beat as a matching point\n  // in 'x' or 'y' mode this resets for each trace\n\n\n  var distance = Infinity; // find the closest point in each trace\n  // this is minimum dx and/or dy, depending on mode\n  // and the pixel position for the label (labelXpx, labelYpx)\n\n  for (curvenum = 0; curvenum < searchData.length; curvenum++) {\n    cd = searchData[curvenum]; // filter out invisible or broken data\n\n    if (!cd || !cd[0] || !cd[0].trace) continue;\n    trace = cd[0].trace;\n    if (trace.visible !== true || trace._length === 0) continue; // Explicitly bail out for these two. I don't know how to otherwise prevent\n    // the rest of this function from running and failing\n\n    if (['carpet', 'contourcarpet'].indexOf(trace._module.name) !== -1) continue;\n\n    if (trace.type === 'splom') {\n      // splom traces do not generate overlay subplots,\n      // it is safe to assume here splom traces correspond to the 0th subplot\n      subploti = 0;\n      subplotId = subplots[subploti];\n    } else {\n      subplotId = helpers.getSubplot(trace);\n      subploti = subplots.indexOf(subplotId);\n    } // within one trace mode can sometimes be overridden\n\n\n    mode = hovermode; // container for new point, also used to pass info into module.hoverPoints\n\n    pointData = {\n      // trace properties\n      cd: cd,\n      trace: trace,\n      xa: xaArray[subploti],\n      ya: yaArray[subploti],\n      // max distances for hover and spikes - for points that want to show but do not\n      // want to override other points, set distance/spikeDistance equal to max*Distance\n      // and it will not get filtered out but it will be guaranteed to have a greater\n      // distance than any point that calculated a real distance.\n      maxHoverDistance: hoverdistance,\n      maxSpikeDistance: spikedistance,\n      // point properties - override all of these\n      index: false,\n      // point index in trace - only used by plotly.js hoverdata consumers\n      distance: Math.min(distance, hoverdistance),\n      // pixel distance or pseudo-distance\n      // distance/pseudo-distance for spikes. This distance should always be calculated\n      // as if in \"closest\" mode, and should only be set if this point should\n      // generate a spike.\n      spikeDistance: Infinity,\n      // in some cases the spikes have different positioning from the hover label\n      // they don't need x0/x1, just one position\n      xSpike: undefined,\n      ySpike: undefined,\n      // where and how to display the hover label\n      color: Color.defaultLine,\n      // trace color\n      name: trace.name,\n      x0: undefined,\n      x1: undefined,\n      y0: undefined,\n      y1: undefined,\n      xLabelVal: undefined,\n      yLabelVal: undefined,\n      zLabelVal: undefined,\n      text: undefined\n    }; // add ref to subplot object (non-cartesian case)\n\n    if (fullLayout[subplotId]) {\n      pointData.subplot = fullLayout[subplotId]._subplot;\n    } // add ref to splom scene\n\n\n    if (fullLayout._splomScenes && fullLayout._splomScenes[trace.uid]) {\n      pointData.scene = fullLayout._splomScenes[trace.uid];\n    }\n\n    closedataPreviousLength = hoverData.length; // for a highlighting array, figure out what\n    // we're searching for with this element\n\n    if (mode === 'array') {\n      var selection = evt[curvenum];\n\n      if ('pointNumber' in selection) {\n        pointData.index = selection.pointNumber;\n        mode = 'closest';\n      } else {\n        mode = '';\n\n        if ('xval' in selection) {\n          xval = selection.xval;\n          mode = 'x';\n        }\n\n        if ('yval' in selection) {\n          yval = selection.yval;\n          mode = mode ? 'closest' : 'y';\n        }\n      }\n    } else {\n      xval = xvalArray[subploti];\n      yval = yvalArray[subploti];\n    } // Now if there is range to look in, find the points to hover.\n\n\n    if (hoverdistance !== 0) {\n      if (trace._module && trace._module.hoverPoints) {\n        var newPoints = trace._module.hoverPoints(pointData, xval, yval, mode, fullLayout._hoverlayer);\n\n        if (newPoints) {\n          var newPoint;\n\n          for (var newPointNum = 0; newPointNum < newPoints.length; newPointNum++) {\n            newPoint = newPoints[newPointNum];\n\n            if (isNumeric(newPoint.x0) && isNumeric(newPoint.y0)) {\n              hoverData.push(cleanPoint(newPoint, hovermode));\n            }\n          }\n        }\n      } else {\n        Lib.log('Unrecognized trace type in hover:', trace);\n      }\n    } // in closest mode, remove any existing (farther) points\n    // and don't look any farther than this latest point (or points, some\n    // traces like box & violin make multiple hover labels at once)\n\n\n    if (hovermode === 'closest' && hoverData.length > closedataPreviousLength) {\n      hoverData.splice(0, closedataPreviousLength);\n      distance = hoverData[0].distance;\n    } // Now if there is range to look in, find the points to draw the spikelines\n    // Do it only if there is no hoverData\n\n\n    if (hasCartesian && spikedistance !== 0) {\n      if (hoverData.length === 0) {\n        pointData.distance = spikedistance;\n        pointData.index = false;\n\n        var closestPoints = trace._module.hoverPoints(pointData, xval, yval, 'closest', fullLayout._hoverlayer);\n\n        if (closestPoints) {\n          closestPoints = closestPoints.filter(function (point) {\n            // some hover points, like scatter fills, do not allow spikes,\n            // so will generate a hover point but without a valid spikeDistance\n            return point.spikeDistance <= spikedistance;\n          });\n        }\n\n        if (closestPoints && closestPoints.length) {\n          var tmpPoint;\n          var closestVPoints = closestPoints.filter(function (point) {\n            return point.xa.showspikes;\n          });\n\n          if (closestVPoints.length) {\n            var closestVPt = closestVPoints[0];\n\n            if (isNumeric(closestVPt.x0) && isNumeric(closestVPt.y0)) {\n              tmpPoint = fillSpikePoint(closestVPt);\n\n              if (!spikePoints.vLinePoint || spikePoints.vLinePoint.spikeDistance > tmpPoint.spikeDistance) {\n                spikePoints.vLinePoint = tmpPoint;\n              }\n            }\n          }\n\n          var closestHPoints = closestPoints.filter(function (point) {\n            return point.ya.showspikes;\n          });\n\n          if (closestHPoints.length) {\n            var closestHPt = closestHPoints[0];\n\n            if (isNumeric(closestHPt.x0) && isNumeric(closestHPt.y0)) {\n              tmpPoint = fillSpikePoint(closestHPt);\n\n              if (!spikePoints.hLinePoint || spikePoints.hLinePoint.spikeDistance > tmpPoint.spikeDistance) {\n                spikePoints.hLinePoint = tmpPoint;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function selectClosestPoint(pointsData, spikedistance) {\n    var resultPoint = null;\n    var minDistance = Infinity;\n    var thisSpikeDistance;\n\n    for (var i = 0; i < pointsData.length; i++) {\n      thisSpikeDistance = pointsData[i].spikeDistance;\n\n      if (thisSpikeDistance < minDistance && thisSpikeDistance <= spikedistance) {\n        resultPoint = pointsData[i];\n        minDistance = thisSpikeDistance;\n      }\n    }\n\n    return resultPoint;\n  }\n\n  function fillSpikePoint(point) {\n    if (!point) return null;\n    return {\n      xa: point.xa,\n      ya: point.ya,\n      x: point.xSpike !== undefined ? point.xSpike : (point.x0 + point.x1) / 2,\n      y: point.ySpike !== undefined ? point.ySpike : (point.y0 + point.y1) / 2,\n      distance: point.distance,\n      spikeDistance: point.spikeDistance,\n      curveNumber: point.trace.index,\n      color: point.color,\n      pointNumber: point.index\n    };\n  }\n\n  var spikelineOpts = {\n    fullLayout: fullLayout,\n    container: fullLayout._hoverlayer,\n    outerContainer: fullLayout._paperdiv,\n    event: evt\n  };\n  var oldspikepoints = gd._spikepoints;\n  var newspikepoints = {\n    vLinePoint: spikePoints.vLinePoint,\n    hLinePoint: spikePoints.hLinePoint\n  };\n  gd._spikepoints = newspikepoints; // Now if it is not restricted by spikedistance option, set the points to draw the spikelines\n\n  if (hasCartesian && spikedistance !== 0) {\n    if (hoverData.length !== 0) {\n      var tmpHPointData = hoverData.filter(function (point) {\n        return point.ya.showspikes;\n      });\n      var tmpHPoint = selectClosestPoint(tmpHPointData, spikedistance);\n      spikePoints.hLinePoint = fillSpikePoint(tmpHPoint);\n      var tmpVPointData = hoverData.filter(function (point) {\n        return point.xa.showspikes;\n      });\n      var tmpVPoint = selectClosestPoint(tmpVPointData, spikedistance);\n      spikePoints.vLinePoint = fillSpikePoint(tmpVPoint);\n    }\n  } // if hoverData is empty check for the spikes to draw and quit if there are none\n\n\n  if (hoverData.length === 0) {\n    var result = dragElement.unhoverRaw(gd, evt);\n\n    if (hasCartesian && (spikePoints.hLinePoint !== null || spikePoints.vLinePoint !== null)) {\n      if (spikesChanged(oldspikepoints)) {\n        createSpikelines(gd, spikePoints, spikelineOpts);\n      }\n    }\n\n    return result;\n  }\n\n  if (hasCartesian) {\n    if (spikesChanged(oldspikepoints)) {\n      createSpikelines(gd, spikePoints, spikelineOpts);\n    }\n  }\n\n  hoverData.sort(function (d1, d2) {\n    return d1.distance - d2.distance;\n  }); // lastly, emit custom hover/unhover events\n\n  var oldhoverdata = gd._hoverdata;\n  var newhoverdata = []; // pull out just the data that's useful to\n  // other people and send it to the event\n\n  for (itemnum = 0; itemnum < hoverData.length; itemnum++) {\n    var pt = hoverData[itemnum];\n    var eventData = helpers.makeEventData(pt, pt.trace, pt.cd);\n\n    if (pt.hovertemplate !== false) {\n      var ht = false;\n\n      if (pt.cd[pt.index] && pt.cd[pt.index].ht) {\n        ht = pt.cd[pt.index].ht;\n      }\n\n      pt.hovertemplate = ht || pt.trace.hovertemplate || false;\n    }\n\n    pt.eventData = [eventData];\n    newhoverdata.push(eventData);\n  }\n\n  gd._hoverdata = newhoverdata;\n  var rotateLabels = hovermode === 'y' && (searchData.length > 1 || hoverData.length > 1) || hovermode === 'closest' && hasOneHorizontalTrace && hoverData.length > 1;\n  var bgColor = Color.combine(fullLayout.plot_bgcolor || Color.background, fullLayout.paper_bgcolor);\n  var labelOpts = {\n    hovermode: hovermode,\n    rotateLabels: rotateLabels,\n    bgColor: bgColor,\n    container: fullLayout._hoverlayer,\n    outerContainer: fullLayout._paperdiv,\n    commonLabelOpts: fullLayout.hoverlabel,\n    hoverdistance: fullLayout.hoverdistance\n  };\n  var hoverLabels = createHoverText(hoverData, labelOpts, gd);\n  hoverAvoidOverlaps(hoverLabels, rotateLabels ? 'xa' : 'ya', fullLayout);\n  alignHoverText(hoverLabels, rotateLabels); // TODO: tagName hack is needed to appease geo.js's hack of using evt.target=true\n  // we should improve the \"fx\" API so other plots can use it without these hack.\n\n  if (evt.target && evt.target.tagName) {\n    var hasClickToShow = Registry.getComponentMethod('annotations', 'hasClickToShow')(gd, newhoverdata);\n    overrideCursor(d3.select(evt.target), hasClickToShow ? 'pointer' : '');\n  } // don't emit events if called manually\n\n\n  if (!evt.target || noHoverEvent || !hoverChanged(gd, evt, oldhoverdata)) return;\n\n  if (oldhoverdata) {\n    gd.emit('plotly_unhover', {\n      event: evt,\n      points: oldhoverdata\n    });\n  }\n\n  gd.emit('plotly_hover', {\n    event: evt,\n    points: gd._hoverdata,\n    xaxes: xaArray,\n    yaxes: yaArray,\n    xvals: xvalArray,\n    yvals: yvalArray\n  });\n}\n\nvar EXTRA_STRING_REGEX = /<extra>([\\s\\S]*)<\\/extra>/;\n\nfunction createHoverText(hoverData, opts, gd) {\n  var fullLayout = gd._fullLayout;\n  var hovermode = opts.hovermode;\n  var rotateLabels = opts.rotateLabels;\n  var bgColor = opts.bgColor;\n  var container = opts.container;\n  var outerContainer = opts.outerContainer;\n  var commonLabelOpts = opts.commonLabelOpts || {}; // opts.fontFamily/Size are used for the common label\n  // and as defaults for each hover label, though the individual labels\n  // can override this.\n\n  var fontFamily = opts.fontFamily || constants.HOVERFONT;\n  var fontSize = opts.fontSize || constants.HOVERFONTSIZE;\n  var c0 = hoverData[0];\n  var xa = c0.xa;\n  var ya = c0.ya;\n  var commonAttr = hovermode === 'y' ? 'yLabel' : 'xLabel';\n  var t0 = c0[commonAttr];\n  var t00 = (String(t0) || '').split(' ')[0];\n  var outerContainerBB = outerContainer.node().getBoundingClientRect();\n  var outerTop = outerContainerBB.top;\n  var outerWidth = outerContainerBB.width;\n  var outerHeight = outerContainerBB.height; // show the common label, if any, on the axis\n  // never show a common label in array mode,\n  // even if sometimes there could be one\n\n  var showCommonLabel = t0 !== undefined && c0.distance <= opts.hoverdistance && (hovermode === 'x' || hovermode === 'y'); // all hover traces hoverinfo must contain the hovermode\n  // to have common labels\n\n  if (showCommonLabel) {\n    var allHaveZ = true;\n    var i, traceHoverinfo;\n\n    for (i = 0; i < hoverData.length; i++) {\n      if (allHaveZ && hoverData[i].zLabel === undefined) allHaveZ = false;\n      traceHoverinfo = hoverData[i].hoverinfo || hoverData[i].trace.hoverinfo;\n\n      if (traceHoverinfo) {\n        var parts = Array.isArray(traceHoverinfo) ? traceHoverinfo : traceHoverinfo.split('+');\n\n        if (parts.indexOf('all') === -1 && parts.indexOf(hovermode) === -1) {\n          showCommonLabel = false;\n          break;\n        }\n      }\n    } // xyz labels put all info in their main label, so have no need of a common label\n\n\n    if (allHaveZ) showCommonLabel = false;\n  }\n\n  var commonLabel = container.selectAll('g.axistext').data(showCommonLabel ? [0] : []);\n  commonLabel.enter().append('g').classed('axistext', true);\n  commonLabel.exit().remove();\n  commonLabel.each(function () {\n    var label = d3.select(this);\n    var lpath = Lib.ensureSingle(label, 'path', '', function (s) {\n      s.style({\n        'stroke-width': '1px'\n      });\n    });\n    var ltext = Lib.ensureSingle(label, 'text', '', function (s) {\n      // prohibit tex interpretation until we can handle\n      // tex and regular text together\n      s.attr('data-notex', 1);\n    });\n    var commonBgColor = commonLabelOpts.bgcolor || Color.defaultLine;\n    var commonStroke = commonLabelOpts.bordercolor || Color.contrast(commonBgColor);\n    var contrastColor = Color.contrast(commonBgColor);\n    var commonLabelFont = {\n      family: commonLabelOpts.font.family || fontFamily,\n      size: commonLabelOpts.font.size || fontSize,\n      color: commonLabelOpts.font.color || contrastColor\n    };\n    lpath.style({\n      fill: commonBgColor,\n      stroke: commonStroke\n    });\n    ltext.text(t0).call(Drawing.font, commonLabelFont).call(svgTextUtils.positionText, 0, 0).call(svgTextUtils.convertToTspans, gd);\n    label.attr('transform', '');\n    var tbb = ltext.node().getBoundingClientRect();\n    var lx, ly;\n\n    if (hovermode === 'x') {\n      var topsign = xa.side === 'top' ? '-' : '';\n      ltext.attr('text-anchor', 'middle').call(svgTextUtils.positionText, 0, xa.side === 'top' ? outerTop - tbb.bottom - HOVERARROWSIZE - HOVERTEXTPAD : outerTop - tbb.top + HOVERARROWSIZE + HOVERTEXTPAD);\n      lx = xa._offset + (c0.x0 + c0.x1) / 2;\n      ly = ya._offset + (xa.side === 'top' ? 0 : ya._length);\n      var halfWidth = tbb.width / 2 + HOVERTEXTPAD;\n\n      if (lx < halfWidth) {\n        lx = halfWidth;\n        lpath.attr('d', 'M-' + (halfWidth - HOVERARROWSIZE) + ',0' + 'L-' + (halfWidth - HOVERARROWSIZE * 2) + ',' + topsign + HOVERARROWSIZE + 'H' + (HOVERTEXTPAD + tbb.width / 2) + 'v' + topsign + (HOVERTEXTPAD * 2 + tbb.height) + 'H-' + halfWidth + 'V' + topsign + HOVERARROWSIZE + 'Z');\n      } else if (lx > fullLayout.width - halfWidth) {\n        lx = fullLayout.width - halfWidth;\n        lpath.attr('d', 'M' + (halfWidth - HOVERARROWSIZE) + ',0' + 'L' + halfWidth + ',' + topsign + HOVERARROWSIZE + 'v' + topsign + (HOVERTEXTPAD * 2 + tbb.height) + 'H-' + halfWidth + 'V' + topsign + HOVERARROWSIZE + 'H' + (halfWidth - HOVERARROWSIZE * 2) + 'Z');\n      } else {\n        lpath.attr('d', 'M0,0' + 'L' + HOVERARROWSIZE + ',' + topsign + HOVERARROWSIZE + 'H' + (HOVERTEXTPAD + tbb.width / 2) + 'v' + topsign + (HOVERTEXTPAD * 2 + tbb.height) + 'H-' + (HOVERTEXTPAD + tbb.width / 2) + 'V' + topsign + HOVERARROWSIZE + 'H-' + HOVERARROWSIZE + 'Z');\n      }\n    } else {\n      var anchor;\n      var sgn;\n      var leftsign;\n\n      if (ya.side === 'right') {\n        anchor = 'start';\n        sgn = 1;\n        leftsign = '';\n        lx = xa._offset + xa._length;\n      } else {\n        anchor = 'end';\n        sgn = -1;\n        leftsign = '-';\n        lx = xa._offset;\n      }\n\n      ly = ya._offset + (c0.y0 + c0.y1) / 2;\n      ltext.attr('text-anchor', anchor);\n      lpath.attr('d', 'M0,0' + 'L' + leftsign + HOVERARROWSIZE + ',' + HOVERARROWSIZE + 'V' + (HOVERTEXTPAD + tbb.height / 2) + 'h' + leftsign + (HOVERTEXTPAD * 2 + tbb.width) + 'V-' + (HOVERTEXTPAD + tbb.height / 2) + 'H' + leftsign + HOVERARROWSIZE + 'V-' + HOVERARROWSIZE + 'Z');\n      var halfHeight = tbb.height / 2;\n      var lty = outerTop - tbb.top - halfHeight;\n      var clipId = 'clip' + fullLayout._uid + 'commonlabel' + ya._id;\n      var clipPath;\n\n      if (lx < tbb.width + 2 * HOVERTEXTPAD + HOVERARROWSIZE) {\n        clipPath = 'M-' + (HOVERARROWSIZE + HOVERTEXTPAD) + '-' + halfHeight + 'h-' + (tbb.width - HOVERTEXTPAD) + 'V' + halfHeight + 'h' + (tbb.width - HOVERTEXTPAD) + 'Z';\n        var ltx = tbb.width - lx + HOVERTEXTPAD;\n        svgTextUtils.positionText(ltext, ltx, lty); // shift each line (except the longest) so that start-of-line\n        // is always visible\n\n        if (anchor === 'end') {\n          ltext.selectAll('tspan').each(function () {\n            var s = d3.select(this);\n            var dummy = Drawing.tester.append('text').text(s.text()).call(Drawing.font, commonLabelFont);\n            var dummyBB = dummy.node().getBoundingClientRect();\n\n            if (Math.round(dummyBB.width) < Math.round(tbb.width)) {\n              s.attr('x', ltx - dummyBB.width);\n            }\n\n            dummy.remove();\n          });\n        }\n      } else {\n        svgTextUtils.positionText(ltext, sgn * (HOVERTEXTPAD + HOVERARROWSIZE), lty);\n        clipPath = null;\n      }\n\n      var textClip = fullLayout._topclips.selectAll('#' + clipId).data(clipPath ? [0] : []);\n\n      textClip.enter().append('clipPath').attr('id', clipId).append('path');\n      textClip.exit().remove();\n      textClip.select('path').attr('d', clipPath);\n      Drawing.setClipUrl(ltext, clipPath ? clipId : null, gd);\n    }\n\n    label.attr('transform', 'translate(' + lx + ',' + ly + ')'); // remove the \"close but not quite\" points\n    // because of error bars, only take up to a space\n\n    hoverData = hoverData.filter(function (d) {\n      return d.zLabelVal !== undefined || (d[commonAttr] || '').split(' ')[0] === t00;\n    });\n  }); // show all the individual labels\n  // first create the objects\n\n  var hoverLabels = container.selectAll('g.hovertext').data(hoverData, function (d) {\n    // N.B. when multiple items have the same result key-function value,\n    // only the first of those items in hoverData gets rendered\n    return [d.trace.index, d.index, d.x0, d.y0, d.name, d.attr, d.xa, d.ya || ''].join(',');\n  });\n  hoverLabels.enter().append('g').classed('hovertext', true).each(function () {\n    var g = d3.select(this); // trace name label (rect and text.name)\n\n    g.append('rect').call(Color.fill, Color.addOpacity(bgColor, 0.8));\n    g.append('text').classed('name', true); // trace data label (path and text.nums)\n\n    g.append('path').style('stroke-width', '1px');\n    g.append('text').classed('nums', true).call(Drawing.font, fontFamily, fontSize);\n  });\n  hoverLabels.exit().remove(); // then put the text in, position the pointer to the data,\n  // and figure out sizes\n\n  hoverLabels.each(function (d) {\n    var g = d3.select(this).attr('transform', '');\n    var name = '';\n    var text = ''; // combine possible non-opaque trace color with bgColor\n\n    var color0 = d.bgcolor || d.color; // color for 'nums' part of the label\n\n    var numsColor = Color.combine(Color.opacity(color0) ? color0 : Color.defaultLine, bgColor); // color for 'name' part of the label\n\n    var nameColor = Color.combine(Color.opacity(d.color) ? d.color : Color.defaultLine, bgColor); // find a contrasting color for border and text\n\n    var contrastColor = d.borderColor || Color.contrast(numsColor); // to get custom 'name' labels pass cleanPoint\n\n    if (d.nameOverride !== undefined) d.name = d.nameOverride;\n\n    if (d.name) {\n      if (d.trace._meta) {\n        d.name = Lib.templateString(d.name, d.trace._meta);\n      }\n\n      name = plainText(d.name, d.nameLength);\n    }\n\n    if (d.zLabel !== undefined) {\n      if (d.xLabel !== undefined) text += 'x: ' + d.xLabel + '<br>';\n      if (d.yLabel !== undefined) text += 'y: ' + d.yLabel + '<br>';\n\n      if (d.trace.type !== 'choropleth' && d.trace.type !== 'choroplethmapbox') {\n        text += (text ? 'z: ' : '') + d.zLabel;\n      }\n    } else if (showCommonLabel && d[hovermode + 'Label'] === t0) {\n      text = d[(hovermode === 'x' ? 'y' : 'x') + 'Label'] || '';\n    } else if (d.xLabel === undefined) {\n      if (d.yLabel !== undefined && d.trace.type !== 'scattercarpet') {\n        text = d.yLabel;\n      }\n    } else if (d.yLabel === undefined) text = d.xLabel;else text = '(' + d.xLabel + ', ' + d.yLabel + ')';\n\n    if ((d.text || d.text === 0) && !Array.isArray(d.text)) {\n      text += (text ? '<br>' : '') + d.text;\n    } // used by other modules (initially just ternary) that\n    // manage their own hoverinfo independent of cleanPoint\n    // the rest of this will still apply, so such modules\n    // can still put things in (x|y|z)Label, text, and name\n    // and hoverinfo will still determine their visibility\n\n\n    if (d.extraText !== undefined) text += (text ? '<br>' : '') + d.extraText; // if 'text' is empty at this point,\n    // and hovertemplate is not defined,\n    // put 'name' in main label and don't show secondary label\n\n    if (text === '' && !d.hovertemplate) {\n      // if 'name' is also empty, remove entire label\n      if (name === '') g.remove();\n      text = name;\n    } // hovertemplate\n\n\n    var d3locale = fullLayout._d3locale;\n    var hovertemplate = d.hovertemplate || false;\n    var hovertemplateLabels = d.hovertemplateLabels || d;\n    var eventData = d.eventData[0] || {};\n\n    if (hovertemplate) {\n      text = Lib.hovertemplateString(hovertemplate, hovertemplateLabels, d3locale, eventData, d.trace._meta);\n      text = text.replace(EXTRA_STRING_REGEX, function (match, extra) {\n        // assign name for secondary text label\n        name = plainText(extra, d.nameLength); // remove from main text label\n\n        return '';\n      });\n    } // main label\n\n\n    var tx = g.select('text.nums').call(Drawing.font, d.fontFamily || fontFamily, d.fontSize || fontSize, d.fontColor || contrastColor).text(text).attr('data-notex', 1).call(svgTextUtils.positionText, 0, 0).call(svgTextUtils.convertToTspans, gd);\n    var tx2 = g.select('text.name');\n    var tx2width = 0;\n    var tx2height = 0; // secondary label for non-empty 'name'\n\n    if (name && name !== text) {\n      tx2.call(Drawing.font, d.fontFamily || fontFamily, d.fontSize || fontSize, nameColor).text(name).attr('data-notex', 1).call(svgTextUtils.positionText, 0, 0).call(svgTextUtils.convertToTspans, gd);\n      var t2bb = tx2.node().getBoundingClientRect();\n      tx2width = t2bb.width + 2 * HOVERTEXTPAD;\n      tx2height = t2bb.height + 2 * HOVERTEXTPAD;\n    } else {\n      tx2.remove();\n      g.select('rect').remove();\n    }\n\n    g.select('path').style({\n      fill: numsColor,\n      stroke: contrastColor\n    });\n    var tbb = tx.node().getBoundingClientRect();\n    var htx = d.xa._offset + (d.x0 + d.x1) / 2;\n    var hty = d.ya._offset + (d.y0 + d.y1) / 2;\n    var dx = Math.abs(d.x1 - d.x0);\n    var dy = Math.abs(d.y1 - d.y0);\n    var txTotalWidth = tbb.width + HOVERARROWSIZE + HOVERTEXTPAD + tx2width;\n    var anchorStartOK, anchorEndOK;\n    d.ty0 = outerTop - tbb.top;\n    d.bx = tbb.width + 2 * HOVERTEXTPAD;\n    d.by = Math.max(tbb.height + 2 * HOVERTEXTPAD, tx2height);\n    d.anchor = 'start';\n    d.txwidth = tbb.width;\n    d.tx2width = tx2width;\n    d.offset = 0;\n\n    if (rotateLabels) {\n      d.pos = htx;\n      anchorStartOK = hty + dy / 2 + txTotalWidth <= outerHeight;\n      anchorEndOK = hty - dy / 2 - txTotalWidth >= 0;\n\n      if ((d.idealAlign === 'top' || !anchorStartOK) && anchorEndOK) {\n        hty -= dy / 2;\n        d.anchor = 'end';\n      } else if (anchorStartOK) {\n        hty += dy / 2;\n        d.anchor = 'start';\n      } else d.anchor = 'middle';\n    } else {\n      d.pos = hty;\n      anchorStartOK = htx + dx / 2 + txTotalWidth <= outerWidth;\n      anchorEndOK = htx - dx / 2 - txTotalWidth >= 0;\n\n      if ((d.idealAlign === 'left' || !anchorStartOK) && anchorEndOK) {\n        htx -= dx / 2;\n        d.anchor = 'end';\n      } else if (anchorStartOK) {\n        htx += dx / 2;\n        d.anchor = 'start';\n      } else {\n        d.anchor = 'middle';\n        var txHalfWidth = txTotalWidth / 2;\n        var overflowR = htx + txHalfWidth - outerWidth;\n        var overflowL = htx - txHalfWidth;\n        if (overflowR > 0) htx -= overflowR;\n        if (overflowL < 0) htx += -overflowL;\n      }\n    }\n\n    tx.attr('text-anchor', d.anchor);\n    if (tx2width) tx2.attr('text-anchor', d.anchor);\n    g.attr('transform', 'translate(' + htx + ',' + hty + ')' + (rotateLabels ? 'rotate(' + YANGLE + ')' : ''));\n  });\n  return hoverLabels;\n} // Make groups of touching points, and within each group\n// move each point so that no labels overlap, but the average\n// label position is the same as it was before moving. Indicentally,\n// this is equivalent to saying all the labels are on equal linear\n// springs about their initial position. Initially, each point is\n// its own group, but as we find overlaps we will clump the points.\n//\n// Also, there are hard constraints at the edges of the graphs,\n// that push all groups to the middle so they are visible. I don't\n// know what happens if the group spans all the way from one edge to\n// the other, though it hardly matters - there's just too much\n// information then.\n\n\nfunction hoverAvoidOverlaps(hoverLabels, axKey, fullLayout) {\n  var nummoves = 0;\n  var axSign = 1;\n  var nLabels = hoverLabels.size(); // make groups of touching points\n\n  var pointgroups = new Array(nLabels);\n  var k = 0;\n  hoverLabels.each(function (d) {\n    var ax = d[axKey];\n    var axIsX = ax._id.charAt(0) === 'x';\n    var rng = ax.range;\n\n    if (k === 0 && rng && rng[0] > rng[1] !== axIsX) {\n      axSign = -1;\n    }\n\n    pointgroups[k++] = [{\n      datum: d,\n      traceIndex: d.trace.index,\n      dp: 0,\n      pos: d.pos,\n      posref: d.posref,\n      size: d.by * (axIsX ? YFACTOR : 1) / 2,\n      pmin: 0,\n      pmax: axIsX ? fullLayout.width : fullLayout.height\n    }];\n  });\n  pointgroups.sort(function (a, b) {\n    return a[0].posref - b[0].posref || // for equal positions, sort trace indices increasing or decreasing\n    // depending on whether the axis is reversed or not... so stacked\n    // traces will generally keep their order even if one trace adds\n    // nothing to the stack.\n    axSign * (b[0].traceIndex - a[0].traceIndex);\n  });\n  var donepositioning, topOverlap, bottomOverlap, i, j, pti, sumdp;\n\n  function constrainGroup(grp) {\n    var minPt = grp[0];\n    var maxPt = grp[grp.length - 1]; // overlap with the top - positive vals are overlaps\n\n    topOverlap = minPt.pmin - minPt.pos - minPt.dp + minPt.size; // overlap with the bottom - positive vals are overlaps\n\n    bottomOverlap = maxPt.pos + maxPt.dp + maxPt.size - minPt.pmax; // check for min overlap first, so that we always\n    // see the largest labels\n    // allow for .01px overlap, so we don't get an\n    // infinite loop from rounding errors\n\n    if (topOverlap > 0.01) {\n      for (j = grp.length - 1; j >= 0; j--) {\n        grp[j].dp += topOverlap;\n      }\n\n      donepositioning = false;\n    }\n\n    if (bottomOverlap < 0.01) return;\n\n    if (topOverlap < -0.01) {\n      // make sure we're not pushing back and forth\n      for (j = grp.length - 1; j >= 0; j--) {\n        grp[j].dp -= bottomOverlap;\n      }\n\n      donepositioning = false;\n    }\n\n    if (!donepositioning) return; // no room to fix positioning, delete off-screen points\n    // first see how many points we need to delete\n\n    var deleteCount = 0;\n\n    for (i = 0; i < grp.length; i++) {\n      pti = grp[i];\n      if (pti.pos + pti.dp + pti.size > minPt.pmax) deleteCount++;\n    } // start by deleting points whose data is off screen\n\n\n    for (i = grp.length - 1; i >= 0; i--) {\n      if (deleteCount <= 0) break;\n      pti = grp[i]; // pos has already been constrained to [pmin,pmax]\n      // so look for points close to that to delete\n\n      if (pti.pos > minPt.pmax - 1) {\n        pti.del = true;\n        deleteCount--;\n      }\n    }\n\n    for (i = 0; i < grp.length; i++) {\n      if (deleteCount <= 0) break;\n      pti = grp[i]; // pos has already been constrained to [pmin,pmax]\n      // so look for points close to that to delete\n\n      if (pti.pos < minPt.pmin + 1) {\n        pti.del = true;\n        deleteCount--; // shift the whole group minus into this new space\n\n        bottomOverlap = pti.size * 2;\n\n        for (j = grp.length - 1; j >= 0; j--) {\n          grp[j].dp -= bottomOverlap;\n        }\n      }\n    } // then delete points that go off the bottom\n\n\n    for (i = grp.length - 1; i >= 0; i--) {\n      if (deleteCount <= 0) break;\n      pti = grp[i];\n\n      if (pti.pos + pti.dp + pti.size > minPt.pmax) {\n        pti.del = true;\n        deleteCount--;\n      }\n    }\n  } // loop through groups, combining them if they overlap,\n  // until nothing moves\n\n\n  while (!donepositioning && nummoves <= nLabels) {\n    // to avoid infinite loops, don't move more times\n    // than there are traces\n    nummoves++; // assume nothing will move in this iteration,\n    // reverse this if it does\n\n    donepositioning = true;\n    i = 0;\n\n    while (i < pointgroups.length - 1) {\n      // the higher (g0) and lower (g1) point group\n      var g0 = pointgroups[i];\n      var g1 = pointgroups[i + 1]; // the lowest point in the higher group (p0)\n      // the highest point in the lower group (p1)\n\n      var p0 = g0[g0.length - 1];\n      var p1 = g1[0];\n      topOverlap = p0.pos + p0.dp + p0.size - p1.pos - p1.dp + p1.size; // Only group points that lie on the same axes\n\n      if (topOverlap > 0.01 && p0.pmin === p1.pmin && p0.pmax === p1.pmax) {\n        // push the new point(s) added to this group out of the way\n        for (j = g1.length - 1; j >= 0; j--) {\n          g1[j].dp += topOverlap;\n        } // add them to the group\n\n\n        g0.push.apply(g0, g1);\n        pointgroups.splice(i + 1, 1); // adjust for minimum average movement\n\n        sumdp = 0;\n\n        for (j = g0.length - 1; j >= 0; j--) {\n          sumdp += g0[j].dp;\n        }\n\n        bottomOverlap = sumdp / g0.length;\n\n        for (j = g0.length - 1; j >= 0; j--) {\n          g0[j].dp -= bottomOverlap;\n        }\n\n        donepositioning = false;\n      } else i++;\n    } // check if we're going off the plot on either side and fix\n\n\n    pointgroups.forEach(constrainGroup);\n  } // now put these offsets into hoverData\n\n\n  for (i = pointgroups.length - 1; i >= 0; i--) {\n    var grp = pointgroups[i];\n\n    for (j = grp.length - 1; j >= 0; j--) {\n      var pt = grp[j];\n      var hoverPt = pt.datum;\n      hoverPt.offset = pt.dp;\n      hoverPt.del = pt.del;\n    }\n  }\n}\n\nfunction alignHoverText(hoverLabels, rotateLabels) {\n  // finally set the text positioning relative to the data and draw the\n  // box around it\n  hoverLabels.each(function (d) {\n    var g = d3.select(this);\n    if (d.del) return g.remove();\n    var tx = g.select('text.nums');\n    var anchor = d.anchor;\n    var horzSign = anchor === 'end' ? -1 : 1;\n    var alignShift = {\n      start: 1,\n      end: -1,\n      middle: 0\n    }[anchor];\n    var txx = alignShift * (HOVERARROWSIZE + HOVERTEXTPAD);\n    var tx2x = txx + alignShift * (d.txwidth + HOVERTEXTPAD);\n    var offsetX = 0;\n    var offsetY = d.offset;\n\n    if (anchor === 'middle') {\n      txx -= d.tx2width / 2;\n      tx2x += d.txwidth / 2 + HOVERTEXTPAD;\n    }\n\n    if (rotateLabels) {\n      offsetY *= -YSHIFTY;\n      offsetX = d.offset * YSHIFTX;\n    }\n\n    g.select('path').attr('d', anchor === 'middle' ? // middle aligned: rect centered on data\n    'M-' + (d.bx / 2 + d.tx2width / 2) + ',' + (offsetY - d.by / 2) + 'h' + d.bx + 'v' + d.by + 'h-' + d.bx + 'Z' : // left or right aligned: side rect with arrow to data\n    'M0,0L' + (horzSign * HOVERARROWSIZE + offsetX) + ',' + (HOVERARROWSIZE + offsetY) + 'v' + (d.by / 2 - HOVERARROWSIZE) + 'h' + horzSign * d.bx + 'v-' + d.by + 'H' + (horzSign * HOVERARROWSIZE + offsetX) + 'V' + (offsetY - HOVERARROWSIZE) + 'Z');\n    var posX = txx + offsetX;\n    var posY = offsetY + d.ty0 - d.by / 2 + HOVERTEXTPAD;\n    var textAlign = d.textAlign || 'auto';\n\n    if (textAlign !== 'auto') {\n      if (textAlign === 'left' && anchor !== 'start') {\n        tx.attr('text-anchor', 'start');\n        posX = anchor === 'middle' ? -d.bx / 2 - d.tx2width / 2 + HOVERTEXTPAD : -d.bx - HOVERTEXTPAD;\n      } else if (textAlign === 'right' && anchor !== 'end') {\n        tx.attr('text-anchor', 'end');\n        posX = anchor === 'middle' ? d.bx / 2 - d.tx2width / 2 - HOVERTEXTPAD : d.bx + HOVERTEXTPAD;\n      }\n    }\n\n    tx.call(svgTextUtils.positionText, posX, posY);\n\n    if (d.tx2width) {\n      g.select('text.name').call(svgTextUtils.positionText, tx2x + alignShift * HOVERTEXTPAD + offsetX, offsetY + d.ty0 - d.by / 2 + HOVERTEXTPAD);\n      g.select('rect').call(Drawing.setRect, tx2x + (alignShift - 1) * d.tx2width / 2 + offsetX, offsetY - d.by / 2 - 1, d.tx2width, d.by + 2);\n    }\n  });\n}\n\nfunction cleanPoint(d, hovermode) {\n  var index = d.index;\n  var trace = d.trace || {};\n  var cd0 = d.cd[0];\n  var cd = d.cd[index] || {};\n\n  function pass(v) {\n    return v || isNumeric(v) && v === 0;\n  }\n\n  var getVal = Array.isArray(index) ? function (calcKey, traceKey) {\n    var v = Lib.castOption(cd0, index, calcKey);\n    return pass(v) ? v : Lib.extractOption({}, trace, '', traceKey);\n  } : function (calcKey, traceKey) {\n    return Lib.extractOption(cd, trace, calcKey, traceKey);\n  };\n\n  function fill(key, calcKey, traceKey) {\n    var val = getVal(calcKey, traceKey);\n    if (pass(val)) d[key] = val;\n  }\n\n  fill('hoverinfo', 'hi', 'hoverinfo');\n  fill('bgcolor', 'hbg', 'hoverlabel.bgcolor');\n  fill('borderColor', 'hbc', 'hoverlabel.bordercolor');\n  fill('fontFamily', 'htf', 'hoverlabel.font.family');\n  fill('fontSize', 'hts', 'hoverlabel.font.size');\n  fill('fontColor', 'htc', 'hoverlabel.font.color');\n  fill('nameLength', 'hnl', 'hoverlabel.namelength');\n  fill('textAlign', 'hta', 'hoverlabel.align');\n  d.posref = hovermode === 'y' || hovermode === 'closest' && trace.orientation === 'h' ? d.xa._offset + (d.x0 + d.x1) / 2 : d.ya._offset + (d.y0 + d.y1) / 2; // then constrain all the positions to be on the plot\n\n  d.x0 = Lib.constrain(d.x0, 0, d.xa._length);\n  d.x1 = Lib.constrain(d.x1, 0, d.xa._length);\n  d.y0 = Lib.constrain(d.y0, 0, d.ya._length);\n  d.y1 = Lib.constrain(d.y1, 0, d.ya._length); // and convert the x and y label values into formatted text\n\n  if (d.xLabelVal !== undefined) {\n    d.xLabel = 'xLabel' in d ? d.xLabel : Axes.hoverLabelText(d.xa, d.xLabelVal);\n    d.xVal = d.xa.c2d(d.xLabelVal);\n  }\n\n  if (d.yLabelVal !== undefined) {\n    d.yLabel = 'yLabel' in d ? d.yLabel : Axes.hoverLabelText(d.ya, d.yLabelVal);\n    d.yVal = d.ya.c2d(d.yLabelVal);\n  } // Traces like heatmaps generate the zLabel in their hoverPoints function\n\n\n  if (d.zLabelVal !== undefined && d.zLabel === undefined) {\n    d.zLabel = String(d.zLabelVal);\n  } // for box means and error bars, add the range to the label\n\n\n  if (!isNaN(d.xerr) && !(d.xa.type === 'log' && d.xerr <= 0)) {\n    var xeText = Axes.tickText(d.xa, d.xa.c2l(d.xerr), 'hover').text;\n\n    if (d.xerrneg !== undefined) {\n      d.xLabel += ' +' + xeText + ' / -' + Axes.tickText(d.xa, d.xa.c2l(d.xerrneg), 'hover').text;\n    } else d.xLabel += '  ' + xeText; // small distance penalty for error bars, so that if there are\n    // traces with errors and some without, the error bar label will\n    // hoist up to the point\n\n\n    if (hovermode === 'x') d.distance += 1;\n  }\n\n  if (!isNaN(d.yerr) && !(d.ya.type === 'log' && d.yerr <= 0)) {\n    var yeText = Axes.tickText(d.ya, d.ya.c2l(d.yerr), 'hover').text;\n\n    if (d.yerrneg !== undefined) {\n      d.yLabel += ' +' + yeText + ' / -' + Axes.tickText(d.ya, d.ya.c2l(d.yerrneg), 'hover').text;\n    } else d.yLabel += '  ' + yeText;\n\n    if (hovermode === 'y') d.distance += 1;\n  }\n\n  var infomode = d.hoverinfo || d.trace.hoverinfo;\n\n  if (infomode && infomode !== 'all') {\n    infomode = Array.isArray(infomode) ? infomode : infomode.split('+');\n    if (infomode.indexOf('x') === -1) d.xLabel = undefined;\n    if (infomode.indexOf('y') === -1) d.yLabel = undefined;\n    if (infomode.indexOf('z') === -1) d.zLabel = undefined;\n    if (infomode.indexOf('text') === -1) d.text = undefined;\n    if (infomode.indexOf('name') === -1) d.name = undefined;\n  }\n\n  return d;\n}\n\nfunction createSpikelines(gd, closestPoints, opts) {\n  var container = opts.container;\n  var fullLayout = opts.fullLayout;\n  var gs = fullLayout._size;\n  var evt = opts.event;\n  var showY = !!closestPoints.hLinePoint;\n  var showX = !!closestPoints.vLinePoint;\n  var xa, ya; // Remove old spikeline items\n\n  container.selectAll('.spikeline').remove();\n  if (!(showX || showY)) return;\n  var contrastColor = Color.combine(fullLayout.plot_bgcolor, fullLayout.paper_bgcolor); // Horizontal line (to y-axis)\n\n  if (showY) {\n    var hLinePoint = closestPoints.hLinePoint;\n    var hLinePointX, hLinePointY;\n    xa = hLinePoint && hLinePoint.xa;\n    ya = hLinePoint && hLinePoint.ya;\n    var ySnap = ya.spikesnap;\n\n    if (ySnap === 'cursor') {\n      hLinePointX = evt.pointerX;\n      hLinePointY = evt.pointerY;\n    } else {\n      hLinePointX = xa._offset + hLinePoint.x;\n      hLinePointY = ya._offset + hLinePoint.y;\n    }\n\n    var dfltHLineColor = tinycolor.readability(hLinePoint.color, contrastColor) < 1.5 ? Color.contrast(contrastColor) : hLinePoint.color;\n    var yMode = ya.spikemode;\n    var yThickness = ya.spikethickness;\n    var yColor = ya.spikecolor || dfltHLineColor;\n    var xEdge = Axes.getPxPosition(gd, ya);\n    var xBase, xEndSpike;\n\n    if (yMode.indexOf('toaxis') !== -1 || yMode.indexOf('across') !== -1) {\n      if (yMode.indexOf('toaxis') !== -1) {\n        xBase = xEdge;\n        xEndSpike = hLinePointX;\n      }\n\n      if (yMode.indexOf('across') !== -1) {\n        var xAcross0 = ya._counterDomainMin;\n        var xAcross1 = ya._counterDomainMax;\n\n        if (ya.anchor === 'free') {\n          xAcross0 = Math.min(xAcross0, ya.position);\n          xAcross1 = Math.max(xAcross1, ya.position);\n        }\n\n        xBase = gs.l + xAcross0 * gs.w;\n        xEndSpike = gs.l + xAcross1 * gs.w;\n      } // Foreground horizontal line (to y-axis)\n\n\n      container.insert('line', ':first-child').attr({\n        x1: xBase,\n        x2: xEndSpike,\n        y1: hLinePointY,\n        y2: hLinePointY,\n        'stroke-width': yThickness,\n        stroke: yColor,\n        'stroke-dasharray': Drawing.dashStyle(ya.spikedash, yThickness)\n      }).classed('spikeline', true).classed('crisp', true); // Background horizontal Line (to y-axis)\n\n      container.insert('line', ':first-child').attr({\n        x1: xBase,\n        x2: xEndSpike,\n        y1: hLinePointY,\n        y2: hLinePointY,\n        'stroke-width': yThickness + 2,\n        stroke: contrastColor\n      }).classed('spikeline', true).classed('crisp', true);\n    } // Y axis marker\n\n\n    if (yMode.indexOf('marker') !== -1) {\n      container.insert('circle', ':first-child').attr({\n        cx: xEdge + (ya.side !== 'right' ? yThickness : -yThickness),\n        cy: hLinePointY,\n        r: yThickness,\n        fill: yColor\n      }).classed('spikeline', true);\n    }\n  }\n\n  if (showX) {\n    var vLinePoint = closestPoints.vLinePoint;\n    var vLinePointX, vLinePointY;\n    xa = vLinePoint && vLinePoint.xa;\n    ya = vLinePoint && vLinePoint.ya;\n    var xSnap = xa.spikesnap;\n\n    if (xSnap === 'cursor') {\n      vLinePointX = evt.pointerX;\n      vLinePointY = evt.pointerY;\n    } else {\n      vLinePointX = xa._offset + vLinePoint.x;\n      vLinePointY = ya._offset + vLinePoint.y;\n    }\n\n    var dfltVLineColor = tinycolor.readability(vLinePoint.color, contrastColor) < 1.5 ? Color.contrast(contrastColor) : vLinePoint.color;\n    var xMode = xa.spikemode;\n    var xThickness = xa.spikethickness;\n    var xColor = xa.spikecolor || dfltVLineColor;\n    var yEdge = Axes.getPxPosition(gd, xa);\n    var yBase, yEndSpike;\n\n    if (xMode.indexOf('toaxis') !== -1 || xMode.indexOf('across') !== -1) {\n      if (xMode.indexOf('toaxis') !== -1) {\n        yBase = yEdge;\n        yEndSpike = vLinePointY;\n      }\n\n      if (xMode.indexOf('across') !== -1) {\n        var yAcross0 = xa._counterDomainMin;\n        var yAcross1 = xa._counterDomainMax;\n\n        if (xa.anchor === 'free') {\n          yAcross0 = Math.min(yAcross0, xa.position);\n          yAcross1 = Math.max(yAcross1, xa.position);\n        }\n\n        yBase = gs.t + (1 - yAcross1) * gs.h;\n        yEndSpike = gs.t + (1 - yAcross0) * gs.h;\n      } // Foreground vertical line (to x-axis)\n\n\n      container.insert('line', ':first-child').attr({\n        x1: vLinePointX,\n        x2: vLinePointX,\n        y1: yBase,\n        y2: yEndSpike,\n        'stroke-width': xThickness,\n        stroke: xColor,\n        'stroke-dasharray': Drawing.dashStyle(xa.spikedash, xThickness)\n      }).classed('spikeline', true).classed('crisp', true); // Background vertical line (to x-axis)\n\n      container.insert('line', ':first-child').attr({\n        x1: vLinePointX,\n        x2: vLinePointX,\n        y1: yBase,\n        y2: yEndSpike,\n        'stroke-width': xThickness + 2,\n        stroke: contrastColor\n      }).classed('spikeline', true).classed('crisp', true);\n    } // X axis marker\n\n\n    if (xMode.indexOf('marker') !== -1) {\n      container.insert('circle', ':first-child').attr({\n        cx: vLinePointX,\n        cy: yEdge - (xa.side !== 'top' ? xThickness : -xThickness),\n        r: xThickness,\n        fill: xColor\n      }).classed('spikeline', true);\n    }\n  }\n}\n\nfunction hoverChanged(gd, evt, oldhoverdata) {\n  // don't emit any events if nothing changed\n  if (!oldhoverdata || oldhoverdata.length !== gd._hoverdata.length) return true;\n\n  for (var i = oldhoverdata.length - 1; i >= 0; i--) {\n    var oldPt = oldhoverdata[i];\n    var newPt = gd._hoverdata[i];\n\n    if (oldPt.curveNumber !== newPt.curveNumber || String(oldPt.pointNumber) !== String(newPt.pointNumber) || String(oldPt.pointNumbers) !== String(newPt.pointNumbers)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction spikesChanged(gd, oldspikepoints) {\n  // don't relayout the plot because of new spikelines if spikelines points didn't change\n  if (!oldspikepoints) return true;\n  if (oldspikepoints.vLinePoint !== gd._spikepoints.vLinePoint || oldspikepoints.hLinePoint !== gd._spikepoints.hLinePoint) return true;\n  return false;\n}\n\nfunction plainText(s, len) {\n  return svgTextUtils.plainText(s || '', {\n    len: len,\n    allowedTags: ['br', 'sub', 'sup', 'b', 'i', 'em']\n  });\n}","'use strict';\n/**\r\n * Is this string all whitespace?\r\n * This solution kind of makes my brain hurt, but it's significantly faster\r\n * than !str.trim() or any other solution I could find.\r\n *\r\n * whitespace codes from: http://en.wikipedia.org/wiki/Whitespace_character\r\n * and verified with:\r\n *\r\n *  for(var i = 0; i < 65536; i++) {\r\n *      var s = String.fromCharCode(i);\r\n *      if(+s===0 && !s.trim()) console.log(i, s);\r\n *  }\r\n *\r\n * which counts a couple of these as *not* whitespace, but finds nothing else\r\n * that *is* whitespace. Note that charCodeAt stops at 16 bits, but it appears\r\n * that there are no whitespace characters above this, and code points above\r\n * this do not map onto white space characters.\r\n */\n\nmodule.exports = function (str) {\n  var l = str.length,\n      a;\n\n  for (var i = 0; i < l; i++) {\n    a = str.charCodeAt(i);\n\n    if ((a < 9 || a > 13) && a !== 32 && a !== 133 && a !== 160 && a !== 5760 && a !== 6158 && (a < 8192 || a > 8205) && a !== 8232 && a !== 8233 && a !== 8239 && a !== 8287 && a !== 8288 && a !== 12288 && a !== 65279) {\n      return false;\n    }\n  }\n\n  return true;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nexports.init2dArray = function (rowLength, colLength) {\n  var array = new Array(rowLength);\n\n  for (var i = 0; i < rowLength; i++) {\n    array[i] = new Array(colLength);\n  }\n\n  return array;\n};\n/**\n * transpose a (possibly ragged) 2d array z. inspired by\n * http://stackoverflow.com/questions/17428587/\n * transposing-a-2d-array-in-javascript\n */\n\n\nexports.transposeRagged = function (z) {\n  var maxlen = 0;\n  var zlen = z.length;\n  var i, j; // Maximum row length:\n\n  for (i = 0; i < zlen; i++) {\n    maxlen = Math.max(maxlen, z[i].length);\n  }\n\n  var t = new Array(maxlen);\n\n  for (i = 0; i < maxlen; i++) {\n    t[i] = new Array(zlen);\n\n    for (j = 0; j < zlen; j++) {\n      t[i][j] = z[j][i];\n    }\n  }\n\n  return t;\n}; // our own dot function so that we don't need to include numeric\n\n\nexports.dot = function (x, y) {\n  if (!(x.length && y.length) || x.length !== y.length) return null;\n  var len = x.length;\n  var out;\n  var i;\n\n  if (x[0].length) {\n    // mat-vec or mat-mat\n    out = new Array(len);\n\n    for (i = 0; i < len; i++) {\n      out[i] = exports.dot(x[i], y);\n    }\n  } else if (y[0].length) {\n    // vec-mat\n    var yTranspose = exports.transposeRagged(y);\n    out = new Array(yTranspose.length);\n\n    for (i = 0; i < yTranspose.length; i++) {\n      out[i] = exports.dot(x, yTranspose[i]);\n    }\n  } else {\n    // vec-vec\n    out = 0;\n\n    for (i = 0; i < len; i++) {\n      out += x[i] * y[i];\n    }\n  }\n\n  return out;\n}; // translate by (x,y)\n\n\nexports.translationMatrix = function (x, y) {\n  return [[1, 0, x], [0, 1, y], [0, 0, 1]];\n}; // rotate by alpha around (0,0)\n\n\nexports.rotationMatrix = function (alpha) {\n  var a = alpha * Math.PI / 180;\n  return [[Math.cos(a), -Math.sin(a), 0], [Math.sin(a), Math.cos(a), 0], [0, 0, 1]];\n}; // rotate by alpha around (x,y)\n\n\nexports.rotationXYMatrix = function (a, x, y) {\n  return exports.dot(exports.dot(exports.translationMatrix(x, y), exports.rotationMatrix(a)), exports.translationMatrix(-x, -y));\n}; // applies a 2D transformation matrix to either x and y params or an [x,y] array\n\n\nexports.apply2DTransform = function (transform) {\n  return function () {\n    var args = arguments;\n\n    if (args.length === 3) {\n      args = args[0];\n    } // from map\n\n\n    var xy = arguments.length === 1 ? args[0] : [args[0], args[1]];\n    return exports.dot(transform, [xy[0], xy[1], 1]).slice(0, 2);\n  };\n}; // applies a 2D transformation matrix to an [x1,y1,x2,y2] array (to transform a segment)\n\n\nexports.apply2DTransform2 = function (transform) {\n  var at = exports.apply2DTransform(transform);\n  return function (xys) {\n    return at(xys.slice(0, 2)).concat(at(xys.slice(2, 4)));\n  };\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar BADNUM = require('../constants/numerical').BADNUM; // precompile for speed\n\n\nvar JUNK = /^['\"%,$#\\s']+|[, ]|['\"%,$#\\s']+$/g;\n/**\n * cleanNumber: remove common leading and trailing cruft\n * Always returns either a number or BADNUM.\n */\n\nmodule.exports = function cleanNumber(v) {\n  if (typeof v === 'string') {\n    v = v.replace(JUNK, '');\n  }\n\n  if (isNumeric(v)) return Number(v);\n  return BADNUM;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar colorbarAttrs = require('../colorbar/attributes');\n\nvar counterRegex = require('../../lib/regex').counter;\n\nvar palettes = require('./scales.js').scales;\n\nvar paletteStr = Object.keys(palettes);\n\nfunction code(s) {\n  return '`' + s + '`';\n}\n/**\n * Make colorscale attribute declarations for\n *\n * - colorscale,\n * - (c|z)auto, (c|z)min, (c|z)max,\n * - autocolorscale, reversescale,\n * - showscale (optionally)\n * - color (optionally)\n *\n * @param {string} context (dflt: '', i.e. from trace root):\n *     the container this is in ('', *marker*, *marker.line* etc)\n *\n * @param {object} opts:\n *   - cLetter {string} (dflt: 'c'):\n *     leading letter for 'min', 'max and 'auto' attribute (either 'z' or 'c')\n *\n *   - colorAttr {string} (dflt: 'z' if `cLetter: 'z'`, 'color' if `cLetter: 'c'`):\n *     (for descriptions) sets the name of the color attribute that maps to the colorscale.\n *\n *     N.B. if `colorAttr: 'color'`, we include the `color` declaration here.\n *\n *   - onlyIfNumerical {string} (dflt: false' if `cLetter: 'z'`, true if `cLetter: 'c'`):\n *     (for descriptions) set to true if colorscale attribute only\n *\n *   - colorscaleDflt {string}:\n *     overrides the colorscale dflt\n *\n *   - autoColorDflt {boolean} (dflt true):\n *     normally autocolorscale.dflt is `true`, but pass `false` to override\n *\n *   - noScale {boolean} (dflt: true if `context: 'marker.line'`, false otherwise):\n *     set to `false` to not include showscale attribute (e.g. for 'marker.line')\n *\n *   - showScaleDflt {boolean} (dflt: true if `cLetter: 'z'`, false otherwise)\n *\n *   - editTypeOverride {boolean} (dflt: ''):\n *     most of these attributes already require a recalc, but the ones that do not\n *     have editType *style* or *plot* unless you override (presumably with *calc*)\n *\n *   - anim {boolean) (dflt: undefined): is 'color' animatable?\n *\n * @return {object}\n */\n\n\nmodule.exports = function colorScaleAttrs(context, opts) {\n  context = context || '';\n  opts = opts || {};\n  var cLetter = opts.cLetter || 'c';\n  var onlyIfNumerical = 'onlyIfNumerical' in opts ? opts.onlyIfNumerical : Boolean(context);\n  var noScale = 'noScale' in opts ? opts.noScale : context === 'marker.line';\n  var showScaleDflt = 'showScaleDflt' in opts ? opts.showScaleDflt : cLetter === 'z';\n  var colorscaleDflt = typeof opts.colorscaleDflt === 'string' ? palettes[opts.colorscaleDflt] : null;\n  var editTypeOverride = opts.editTypeOverride || '';\n  var contextHead = context ? context + '.' : '';\n  var colorAttr, colorAttrFull;\n\n  if ('colorAttr' in opts) {\n    colorAttr = opts.colorAttr;\n    colorAttrFull = opts.colorAttr;\n  } else {\n    colorAttr = {\n      z: 'z',\n      c: 'color'\n    }[cLetter];\n    colorAttrFull = 'in ' + code(contextHead + colorAttr);\n  }\n\n  var effectDesc = onlyIfNumerical ? ' Has an effect only if ' + colorAttrFull + 'is set to a numerical array.' : '';\n  var auto = cLetter + 'auto';\n  var min = cLetter + 'min';\n  var max = cLetter + 'max';\n  var mid = cLetter + 'mid';\n  var autoFull = code(contextHead + auto);\n  var minFull = code(contextHead + min);\n  var maxFull = code(contextHead + max);\n  var minmaxFull = minFull + ' and ' + maxFull;\n  var autoImpliedEdits = {};\n  autoImpliedEdits[min] = autoImpliedEdits[max] = undefined;\n  var minmaxImpliedEdits = {};\n  minmaxImpliedEdits[auto] = false;\n  var attrs = {};\n\n  if (colorAttr === 'color') {\n    attrs.color = {\n      valType: 'color',\n      arrayOk: true,\n      role: 'style',\n      editType: editTypeOverride || 'style',\n      description: ['Sets the', context, 'color.', ' It accepts either a specific color', ' or an array of numbers that are mapped to the colorscale', ' relative to the max and min values of the array or relative to', ' ' + minmaxFull + ' if set.'].join('')\n    };\n\n    if (opts.anim) {\n      attrs.color.anim = true;\n    }\n  }\n\n  attrs[auto] = {\n    valType: 'boolean',\n    role: 'info',\n    dflt: true,\n    editType: 'calc',\n    impliedEdits: autoImpliedEdits,\n    description: ['Determines whether or not the color domain is computed', ' with respect to the input data (here ' + colorAttrFull + ') or the bounds set in', ' ', minmaxFull, ' ', effectDesc, ' Defaults to `false` when ', minmaxFull, ' are set by the user.'].join('')\n  };\n  attrs[min] = {\n    valType: 'number',\n    role: 'info',\n    dflt: null,\n    editType: editTypeOverride || 'plot',\n    impliedEdits: minmaxImpliedEdits,\n    description: ['Sets the lower bound of the color domain.', effectDesc, ' Value should have the same units as ', colorAttrFull, ' and if set, ', maxFull, ' must be set as well.'].join('')\n  };\n  attrs[max] = {\n    valType: 'number',\n    role: 'info',\n    dflt: null,\n    editType: editTypeOverride || 'plot',\n    impliedEdits: minmaxImpliedEdits,\n    description: ['Sets the upper bound of the color domain.', effectDesc, ' Value should have the same units as ', colorAttrFull, ' and if set, ', minFull, ' must be set as well.'].join('')\n  };\n  attrs[mid] = {\n    valType: 'number',\n    role: 'info',\n    dflt: null,\n    editType: 'calc',\n    impliedEdits: autoImpliedEdits,\n    description: ['Sets the mid-point of the color domain by scaling ', minFull, ' and/or ', maxFull, ' to be equidistant to this point.', effectDesc, ' Value should have the same units as ', colorAttrFull, '. ', 'Has no effect when ', autoFull, ' is `false`.'].join('')\n  };\n  attrs.colorscale = {\n    valType: 'colorscale',\n    role: 'style',\n    editType: 'calc',\n    dflt: colorscaleDflt,\n    impliedEdits: {\n      autocolorscale: false\n    },\n    description: ['Sets the colorscale.', effectDesc, ' The colorscale must be an array containing', ' arrays mapping a normalized value to an', ' rgb, rgba, hex, hsl, hsv, or named color string.', ' At minimum, a mapping for the lowest (0) and highest (1)', ' values are required. For example,', ' `[[0, \\'rgb(0,0,255)\\'], [1, \\'rgb(255,0,0)\\']]`.', ' To control the bounds of the colorscale in color space,', ' use', minmaxFull, '.', ' Alternatively, `colorscale` may be a palette name string', ' of the following list: ' + paletteStr + '.'].join('')\n  };\n  attrs.autocolorscale = {\n    valType: 'boolean',\n    role: 'style',\n    // gets overrode in 'heatmap' & 'surface' for backwards comp.\n    dflt: opts.autoColorDflt === false ? false : true,\n    editType: 'calc',\n    impliedEdits: {\n      colorscale: undefined\n    },\n    description: ['Determines whether the colorscale is a default palette (`autocolorscale: true`)', ' or the palette determined by ', code(contextHead + 'colorscale'), '.', effectDesc, ' In case `colorscale` is unspecified or `autocolorscale` is true, the default ', ' palette will be chosen according to whether numbers in the `color` array are', ' all positive, all negative or mixed.'].join('')\n  };\n  attrs.reversescale = {\n    valType: 'boolean',\n    role: 'style',\n    dflt: false,\n    editType: 'plot',\n    description: ['Reverses the color mapping if true.', effectDesc, ' If true, ', minFull, ' will correspond to the last color', ' in the array and ', maxFull, ' will correspond to the first color.'].join('')\n  };\n\n  if (!noScale) {\n    attrs.showscale = {\n      valType: 'boolean',\n      role: 'info',\n      dflt: showScaleDflt,\n      editType: 'calc',\n      description: ['Determines whether or not a colorbar is displayed for this trace.', effectDesc].join('')\n    };\n    attrs.colorbar = colorbarAttrs;\n  }\n\n  if (!opts.noColorAxis) {\n    attrs.coloraxis = {\n      valType: 'subplotid',\n      role: 'info',\n      regex: counterRegex('coloraxis'),\n      dflt: null,\n      editType: 'calc',\n      description: ['Sets a reference to a shared color axis.', 'References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.', 'Settings for these shared color axes are set in the layout, under', '`layout.coloraxis`, `layout.coloraxis2`, etc.', 'Note that multiple color scales can be linked to the same color axis.'].join(' ')\n    };\n  }\n\n  return attrs;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n/**\n * convert a linear value into a logged value, folding negative numbers into\n * the given range\n */\n\n\nmodule.exports = function toLogRange(val, range) {\n  if (val > 0) return Math.log(val) / Math.LN10; // move a negative value reference to a log axis - just put the\n  // result at the lowest range value on the plot (or if the range also went negative,\n  // one millionth of the top of the range)\n\n  var newVal = Math.log(Math.min(range[0], range[1])) / Math.LN10;\n  if (!isNumeric(newVal)) newVal = Math.log(Math.max(range[0], range[1])) / Math.LN10 - 6;\n  return newVal;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/* global MathJax:false */\n\nrequire(\"core-js/modules/es6.string.from-code-point\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar d3 = require('d3');\n\nvar Lib = require('../lib');\n\nvar xmlnsNamespaces = require('../constants/xmlns_namespaces');\n\nvar LINE_SPACING = require('../constants/alignment').LINE_SPACING; // text converter\n\n\nfunction getSize(_selection, _dimension) {\n  return _selection.node().getBoundingClientRect()[_dimension];\n}\n\nvar FIND_TEX = /([^$]*)([$]+[^$]*[$]+)([^$]*)/;\n\nexports.convertToTspans = function (_context, gd, _callback) {\n  var str = _context.text(); // Until we get tex integrated more fully (so it can be used along with non-tex)\n  // allow some elements to prohibit it by attaching 'data-notex' to the original\n\n\n  var tex = !_context.attr('data-notex') && typeof MathJax !== 'undefined' && str.match(FIND_TEX);\n  var parent = d3.select(_context.node().parentNode);\n  if (parent.empty()) return;\n  var svgClass = _context.attr('class') ? _context.attr('class').split(' ')[0] : 'text';\n  svgClass += '-math';\n  parent.selectAll('svg.' + svgClass).remove();\n  parent.selectAll('g.' + svgClass + '-group').remove();\n\n  _context.style('display', null).attr({\n    // some callers use data-unformatted *from the <text> element* in 'cancel'\n    // so we need it here even if we're going to turn it into math\n    // these two (plus style and text-anchor attributes) form the key we're\n    // going to use for Drawing.bBox\n    'data-unformatted': str,\n    'data-math': 'N'\n  });\n\n  function showText() {\n    if (!parent.empty()) {\n      svgClass = _context.attr('class') + '-math';\n      parent.select('svg.' + svgClass).remove();\n    }\n\n    _context.text('').style('white-space', 'pre');\n\n    var hasLink = buildSVGText(_context.node(), str);\n\n    if (hasLink) {\n      // at least in Chrome, pointer-events does not seem\n      // to be honored in children of <text> elements\n      // so if we have an anchor, we have to make the\n      // whole element respond\n      _context.style('pointer-events', 'all');\n    }\n\n    exports.positionText(_context);\n    if (_callback) _callback.call(_context);\n  }\n\n  if (tex) {\n    (gd && gd._promises || []).push(new Promise(function (resolve) {\n      _context.style('display', 'none');\n\n      var fontSize = parseInt(_context.node().style.fontSize, 10);\n      var config = {\n        fontSize: fontSize\n      };\n      texToSVG(tex[2], config, function (_svgEl, _glyphDefs, _svgBBox) {\n        parent.selectAll('svg.' + svgClass).remove();\n        parent.selectAll('g.' + svgClass + '-group').remove();\n\n        var newSvg = _svgEl && _svgEl.select('svg');\n\n        if (!newSvg || !newSvg.node()) {\n          showText();\n          resolve();\n          return;\n        }\n\n        var mathjaxGroup = parent.append('g').classed(svgClass + '-group', true).attr({\n          'pointer-events': 'none',\n          'data-unformatted': str,\n          'data-math': 'Y'\n        });\n        mathjaxGroup.node().appendChild(newSvg.node()); // stitch the glyph defs\n\n        if (_glyphDefs && _glyphDefs.node()) {\n          newSvg.node().insertBefore(_glyphDefs.node().cloneNode(true), newSvg.node().firstChild);\n        }\n\n        newSvg.attr({\n          'class': svgClass,\n          height: _svgBBox.height,\n          preserveAspectRatio: 'xMinYMin meet'\n        }).style({\n          overflow: 'visible',\n          'pointer-events': 'none'\n        });\n        var fill = _context.node().style.fill || 'black';\n        var g = newSvg.select('g');\n        g.attr({\n          fill: fill,\n          stroke: fill\n        });\n        var newSvgW = getSize(g, 'width');\n        var newSvgH = getSize(g, 'height');\n        var newX = +_context.attr('x') - newSvgW * {\n          start: 0,\n          middle: 0.5,\n          end: 1\n        }[_context.attr('text-anchor') || 'start']; // font baseline is about 1/4 fontSize below centerline\n\n        var textHeight = fontSize || getSize(_context, 'height');\n        var dy = -textHeight / 4;\n\n        if (svgClass[0] === 'y') {\n          mathjaxGroup.attr({\n            transform: 'rotate(' + [-90, +_context.attr('x'), +_context.attr('y')] + ') translate(' + [-newSvgW / 2, dy - newSvgH / 2] + ')'\n          });\n          newSvg.attr({\n            x: +_context.attr('x'),\n            y: +_context.attr('y')\n          });\n        } else if (svgClass[0] === 'l') {\n          newSvg.attr({\n            x: _context.attr('x'),\n            y: dy - newSvgH / 2\n          });\n        } else if (svgClass[0] === 'a' && svgClass.indexOf('atitle') !== 0) {\n          newSvg.attr({\n            x: 0,\n            y: dy\n          });\n        } else {\n          newSvg.attr({\n            x: newX,\n            y: +_context.attr('y') + dy - newSvgH / 2\n          });\n        }\n\n        if (_callback) _callback.call(_context, mathjaxGroup);\n        resolve(mathjaxGroup);\n      });\n    }));\n  } else showText();\n\n  return _context;\n}; // MathJax\n\n\nvar LT_MATCH = /(<|&lt;|&#60;)/g;\nvar GT_MATCH = /(>|&gt;|&#62;)/g;\n\nfunction cleanEscapesForTex(s) {\n  return s.replace(LT_MATCH, '\\\\lt ').replace(GT_MATCH, '\\\\gt ');\n}\n\nfunction texToSVG(_texString, _config, _callback) {\n  var originalRenderer, originalConfig, originalProcessSectionDelay, tmpDiv;\n  MathJax.Hub.Queue(function () {\n    originalConfig = Lib.extendDeepAll({}, MathJax.Hub.config);\n    originalProcessSectionDelay = MathJax.Hub.processSectionDelay;\n\n    if (MathJax.Hub.processSectionDelay !== undefined) {\n      // MathJax 2.5+\n      MathJax.Hub.processSectionDelay = 0;\n    }\n\n    return MathJax.Hub.Config({\n      messageStyle: 'none',\n      tex2jax: {\n        inlineMath: [['$', '$'], ['\\\\(', '\\\\)']]\n      },\n      displayAlign: 'left'\n    });\n  }, function () {\n    // Get original renderer\n    originalRenderer = MathJax.Hub.config.menuSettings.renderer;\n\n    if (originalRenderer !== 'SVG') {\n      return MathJax.Hub.setRenderer('SVG');\n    }\n  }, function () {\n    var randomID = 'math-output-' + Lib.randstr({}, 64);\n    tmpDiv = d3.select('body').append('div').attr({\n      id: randomID\n    }).style({\n      visibility: 'hidden',\n      position: 'absolute'\n    }).style({\n      'font-size': _config.fontSize + 'px'\n    }).text(cleanEscapesForTex(_texString));\n    return MathJax.Hub.Typeset(tmpDiv.node());\n  }, function () {\n    var glyphDefs = d3.select('body').select('#MathJax_SVG_glyphs');\n\n    if (tmpDiv.select('.MathJax_SVG').empty() || !tmpDiv.select('svg').node()) {\n      Lib.log('There was an error in the tex syntax.', _texString);\n\n      _callback();\n    } else {\n      var svgBBox = tmpDiv.select('svg').node().getBoundingClientRect();\n\n      _callback(tmpDiv.select('.MathJax_SVG'), glyphDefs, svgBBox);\n    }\n\n    tmpDiv.remove();\n\n    if (originalRenderer !== 'SVG') {\n      return MathJax.Hub.setRenderer(originalRenderer);\n    }\n  }, function () {\n    if (originalProcessSectionDelay !== undefined) {\n      MathJax.Hub.processSectionDelay = originalProcessSectionDelay;\n    }\n\n    return MathJax.Hub.Config(originalConfig);\n  });\n}\n\nvar TAG_STYLES = {\n  // would like to use baseline-shift for sub/sup but FF doesn't support it\n  // so we need to use dy along with the uber hacky shift-back-to\n  // baseline below\n  sup: 'font-size:70%',\n  sub: 'font-size:70%',\n  b: 'font-weight:bold',\n  i: 'font-style:italic',\n  a: 'cursor:pointer',\n  span: '',\n  em: 'font-style:italic;font-weight:bold'\n}; // baseline shifts for sub and sup\n\nvar SHIFT_DY = {\n  sub: '0.3em',\n  sup: '-0.6em'\n}; // reset baseline by adding a tspan (empty except for a zero-width space)\n// with dy of -70% * SHIFT_DY (because font-size=70%)\n\nvar RESET_DY = {\n  sub: '-0.21em',\n  sup: '0.42em'\n};\nvar ZERO_WIDTH_SPACE = \"\\u200B\";\n/*\n * Whitelist of protocols in user-supplied urls. Mostly we want to avoid javascript\n * and related attack vectors. The empty items are there for IE, that in various\n * versions treats relative paths as having different flavors of no protocol, while\n * other browsers have these explicitly inherit the protocol of the page they're in.\n */\n\nvar PROTOCOLS = ['http:', 'https:', 'mailto:', '', undefined, ':'];\nvar NEWLINES = exports.NEWLINES = /(\\r\\n?|\\n)/g;\nvar SPLIT_TAGS = /(<[^<>]*>)/;\nvar ONE_TAG = /<(\\/?)([^ >]*)(\\s+(.*))?>/i;\nvar BR_TAG = /<br(\\s+.*)?>/i;\nexports.BR_TAG_ALL = /<br(\\s+.*)?>/gi;\n/*\n * style and href: pull them out of either single or double quotes. Also\n * - target: (_blank|_self|_parent|_top|framename)\n *     note that you can't use target to get a popup but if you use popup,\n *     a `framename` will be passed along as the name of the popup window.\n *     per the spec, cannot contain whitespace.\n *     for backward compatibility we default to '_blank'\n * - popup: a custom one for us to enable popup (new window) links. String\n *     for window.open -> strWindowFeatures, like 'menubar=yes,width=500,height=550'\n *     note that at least in Chrome, you need to give at least one property\n *     in this string or the page will open in a new tab anyway. We follow this\n *     convention and will not make a popup if this string is empty.\n *     per the spec, cannot contain whitespace.\n *\n * Because we hack in other attributes with style (sub & sup), drop any trailing\n * semicolon in user-supplied styles so we can consistently append the tag-dependent style\n *\n * These are for tag attributes; Chrome anyway will convert entities in\n * attribute values, but not in attribute names\n * you can test this by for example:\n * > p = document.createElement('p')\n * > p.innerHTML = '<span styl&#x65;=\"font-color:r&#x65;d;\">Hi</span>'\n * > p.innerHTML\n * <- '<span styl&#x65;=\"font-color:red;\">Hi</span>'\n */\n\nvar STYLEMATCH = /(^|[\\s\"'])style\\s*=\\s*(\"([^\"]*);?\"|'([^']*);?')/i;\nvar HREFMATCH = /(^|[\\s\"'])href\\s*=\\s*(\"([^\"]*)\"|'([^']*)')/i;\nvar TARGETMATCH = /(^|[\\s\"'])target\\s*=\\s*(\"([^\"\\s]*)\"|'([^'\\s]*)')/i;\nvar POPUPMATCH = /(^|[\\s\"'])popup\\s*=\\s*(\"([\\w=,]*)\"|'([\\w=,]*)')/i; // dedicated matcher for these quoted regexes, that can return their results\n// in two different places\n\nfunction getQuotedMatch(_str, re) {\n  if (!_str) return null;\n\n  var match = _str.match(re);\n\n  var result = match && (match[3] || match[4]);\n  return result && convertEntities(result);\n}\n\nvar COLORMATCH = /(^|;)\\s*color:/;\n/**\n * Strip string of tags\n *\n * @param {string} _str : input string\n * @param {object} opts :\n * - len {number} max length of output string\n * - allowedTags {array} list of pseudo-html tags to NOT strip\n * @return {string}\n */\n\nexports.plainText = function (_str, opts) {\n  opts = opts || {};\n  var len = opts.len !== undefined && opts.len !== -1 ? opts.len : Infinity;\n  var allowedTags = opts.allowedTags !== undefined ? opts.allowedTags : ['br'];\n  var ellipsis = '...';\n  var eLen = ellipsis.length;\n\n  var oldParts = _str.split(SPLIT_TAGS);\n\n  var newParts = [];\n  var prevTag = '';\n  var l = 0;\n\n  for (var i = 0; i < oldParts.length; i++) {\n    var p = oldParts[i];\n    var match = p.match(ONE_TAG);\n    var tagType = match && match[2].toLowerCase();\n\n    if (tagType) {\n      // N.B. tags do not count towards string length\n      if (allowedTags.indexOf(tagType) !== -1) {\n        newParts.push(p);\n        prevTag = tagType;\n      }\n    } else {\n      var pLen = p.length;\n\n      if (l + pLen < len) {\n        newParts.push(p);\n        l += pLen;\n      } else if (l < len) {\n        var pLen2 = len - l;\n\n        if (prevTag && (prevTag !== 'br' || pLen2 <= eLen || pLen <= eLen)) {\n          newParts.pop();\n        }\n\n        if (len > eLen) {\n          newParts.push(p.substr(0, pLen2 - eLen) + ellipsis);\n        } else {\n          newParts.push(p.substr(0, pLen2));\n        }\n\n        break;\n      }\n\n      prevTag = '';\n    }\n  }\n\n  return newParts.join('');\n};\n/*\n * N.B. HTML entities are listed without the leading '&' and trailing ';'\n * https://www.freeformatter.com/html-entities.html\n *\n * FWIW if we wanted to support the full set, it has 2261 entries:\n * https://www.w3.org/TR/html5/entities.json\n * though I notice that some of these are duplicates and/or are missing \";\"\n * eg: \"&amp;\", \"&amp\", \"&AMP;\", and \"&AMP\" all map to \"&\"\n * We no longer need to include numeric entities here, these are now handled\n * by String.fromCodePoint/fromCharCode\n *\n * Anyway the only ones that are really important to allow are the HTML special\n * chars <, >, and &, because these ones can trigger special processing if not\n * replaced by the corresponding entity.\n */\n\n\nvar entityToUnicode = {\n  mu: '',\n  amp: '&',\n  lt: '<',\n  gt: '>',\n  nbsp: '',\n  times: '',\n  plusmn: '',\n  deg: ''\n}; // NOTE: in general entities can contain uppercase too (so [a-zA-Z]) but all the\n// ones we support use only lowercase. If we ever change that, update the regex.\n\nvar ENTITY_MATCH = /&(#\\d+|#x[\\da-fA-F]+|[a-z]+);/g;\n\nfunction convertEntities(_str) {\n  return _str.replace(ENTITY_MATCH, function (fullMatch, innerMatch) {\n    var outChar;\n\n    if (innerMatch.charAt(0) === '#') {\n      // cannot use String.fromCodePoint in IE\n      outChar = fromCodePoint(innerMatch.charAt(1) === 'x' ? parseInt(innerMatch.substr(2), 16) : parseInt(innerMatch.substr(1), 10));\n    } else outChar = entityToUnicode[innerMatch]; // as in regular HTML, if we didn't decode the entity just\n    // leave the raw text in place.\n\n\n    return outChar || fullMatch;\n  });\n}\n\nexports.convertEntities = convertEntities;\n\nfunction fromCodePoint(code) {\n  // Don't allow overflow. In Chrome this turns into  but I feel like it's\n  // more useful to just not convert it at all.\n  if (code > 0x10FFFF) return;\n  var stringFromCodePoint = String.fromCodePoint;\n  if (stringFromCodePoint) return stringFromCodePoint(code); // IE doesn't have String.fromCodePoint\n  // see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint\n\n  var stringFromCharCode = String.fromCharCode;\n  if (code <= 0xFFFF) return stringFromCharCode(code);\n  return stringFromCharCode((code >> 10) + 0xD7C0, code % 0x400 + 0xDC00);\n}\n/*\n * buildSVGText: convert our pseudo-html into SVG tspan elements, and attach these\n * to containerNode\n *\n * @param {svg text element} containerNode: the <text> node to insert this text into\n * @param {string} str: the pseudo-html string to convert to svg\n *\n * @returns {bool}: does the result contain any links? We need to handle the text element\n *   somewhat differently if it does, so just keep track of this when it happens.\n */\n\n\nfunction buildSVGText(containerNode, str) {\n  /*\n   * Normalize behavior between IE and others wrt newlines and whitespace:pre\n   * this combination makes IE barf https://github.com/plotly/plotly.js/issues/746\n   * Chrome and FF display \\n, \\r, or \\r\\n as a space in this mode.\n   * I feel like at some point we turned these into <br> but currently we don't so\n   * I'm just going to cement what we do now in Chrome and FF\n   */\n  str = str.replace(NEWLINES, ' ');\n  var hasLink = false; // as we're building the text, keep track of what elements we're nested inside\n  // nodeStack will be an array of {node, type, style, href, target, popup}\n  // where only type: 'a' gets the last 3 and node is only added when it's created\n\n  var nodeStack = [];\n  var currentNode;\n  var currentLine = -1;\n\n  function newLine() {\n    currentLine++;\n    var lineNode = document.createElementNS(xmlnsNamespaces.svg, 'tspan');\n    d3.select(lineNode).attr({\n      \"class\": 'line',\n      dy: currentLine * LINE_SPACING + 'em'\n    });\n    containerNode.appendChild(lineNode);\n    currentNode = lineNode;\n    var oldNodeStack = nodeStack;\n    nodeStack = [{\n      node: lineNode\n    }];\n\n    if (oldNodeStack.length > 1) {\n      for (var i = 1; i < oldNodeStack.length; i++) {\n        enterNode(oldNodeStack[i]);\n      }\n    }\n  }\n\n  function enterNode(nodeSpec) {\n    var type = nodeSpec.type;\n    var nodeAttrs = {};\n    var nodeType;\n\n    if (type === 'a') {\n      nodeType = 'a';\n      var target = nodeSpec.target;\n      var href = nodeSpec.href;\n      var popup = nodeSpec.popup;\n\n      if (href) {\n        nodeAttrs = {\n          'xlink:xlink:show': target === '_blank' || target.charAt(0) !== '_' ? 'new' : 'replace',\n          target: target,\n          'xlink:xlink:href': href\n        };\n\n        if (popup) {\n          // security: href and target are not inserted as code but\n          // as attributes. popup is, but limited to /[A-Za-z0-9_=,]/\n          nodeAttrs.onclick = 'window.open(this.href.baseVal,this.target.baseVal,\"' + popup + '\");return false;';\n        }\n      }\n    } else nodeType = 'tspan';\n\n    if (nodeSpec.style) nodeAttrs.style = nodeSpec.style;\n    var newNode = document.createElementNS(xmlnsNamespaces.svg, nodeType);\n\n    if (type === 'sup' || type === 'sub') {\n      addTextNode(currentNode, ZERO_WIDTH_SPACE);\n      currentNode.appendChild(newNode);\n      var resetter = document.createElementNS(xmlnsNamespaces.svg, 'tspan');\n      addTextNode(resetter, ZERO_WIDTH_SPACE);\n      d3.select(resetter).attr('dy', RESET_DY[type]);\n      nodeAttrs.dy = SHIFT_DY[type];\n      currentNode.appendChild(newNode);\n      currentNode.appendChild(resetter);\n    } else {\n      currentNode.appendChild(newNode);\n    }\n\n    d3.select(newNode).attr(nodeAttrs);\n    currentNode = nodeSpec.node = newNode;\n    nodeStack.push(nodeSpec);\n  }\n\n  function addTextNode(node, text) {\n    node.appendChild(document.createTextNode(text));\n  }\n\n  function exitNode(type) {\n    // A bare closing tag can't close the root node. If we encounter this it\n    // means there's an extra closing tag that can just be ignored:\n    if (nodeStack.length === 1) {\n      Lib.log('Ignoring unexpected end tag </' + type + '>.', str);\n      return;\n    }\n\n    var innerNode = nodeStack.pop();\n\n    if (type !== innerNode.type) {\n      Lib.log('Start tag <' + innerNode.type + '> doesnt match end tag <' + type + '>. Pretending it did match.', str);\n    }\n\n    currentNode = nodeStack[nodeStack.length - 1].node;\n  }\n\n  var hasLines = BR_TAG.test(str);\n  if (hasLines) newLine();else {\n    currentNode = containerNode;\n    nodeStack = [{\n      node: containerNode\n    }];\n  }\n  var parts = str.split(SPLIT_TAGS);\n\n  for (var i = 0; i < parts.length; i++) {\n    var parti = parts[i];\n    var match = parti.match(ONE_TAG);\n    var tagType = match && match[2].toLowerCase();\n    var tagStyle = TAG_STYLES[tagType];\n\n    if (tagType === 'br') {\n      newLine();\n    } else if (tagStyle === undefined) {\n      addTextNode(currentNode, convertEntities(parti));\n    } else {\n      // tag - open or close\n      if (match[1]) {\n        exitNode(tagType);\n      } else {\n        var extra = match[4];\n        var nodeSpec = {\n          type: tagType\n        }; // now add style, from both the tag name and any extra css\n        // Most of the svg css that users will care about is just like html,\n        // but font color is different (uses fill). Let our users ignore this.\n\n        var css = getQuotedMatch(extra, STYLEMATCH);\n\n        if (css) {\n          css = css.replace(COLORMATCH, '$1 fill:');\n          if (tagStyle) css += ';' + tagStyle;\n        } else if (tagStyle) css = tagStyle;\n\n        if (css) nodeSpec.style = css;\n\n        if (tagType === 'a') {\n          hasLink = true;\n          var href = getQuotedMatch(extra, HREFMATCH);\n\n          if (href) {\n            // check safe protocols\n            var dummyAnchor = document.createElement('a');\n            dummyAnchor.href = href;\n\n            if (PROTOCOLS.indexOf(dummyAnchor.protocol) !== -1) {\n              // Decode href to allow both already encoded and not encoded\n              // URIs. Without decoding prior encoding, an already encoded\n              // URI would be encoded twice producing a semantically different URI.\n              nodeSpec.href = encodeURI(decodeURI(href));\n              nodeSpec.target = getQuotedMatch(extra, TARGETMATCH) || '_blank';\n              nodeSpec.popup = getQuotedMatch(extra, POPUPMATCH);\n            }\n          }\n        }\n\n        enterNode(nodeSpec);\n      }\n    }\n  }\n\n  return hasLink;\n}\n\nexports.lineCount = function lineCount(s) {\n  return s.selectAll('tspan.line').size() || 1;\n};\n\nexports.positionText = function positionText(s, x, y) {\n  return s.each(function () {\n    var text = d3.select(this);\n\n    function setOrGet(attr, val) {\n      if (val === undefined) {\n        val = text.attr(attr);\n\n        if (val === null) {\n          text.attr(attr, 0);\n          val = 0;\n        }\n      } else text.attr(attr, val);\n\n      return val;\n    }\n\n    var thisX = setOrGet('x', x);\n    var thisY = setOrGet('y', y);\n\n    if (this.nodeName === 'text') {\n      text.selectAll('tspan.line').attr({\n        x: thisX,\n        y: thisY\n      });\n    }\n  });\n};\n\nfunction alignHTMLWith(_base, container, options) {\n  var alignH = options.horizontalAlign;\n  var alignV = options.verticalAlign || 'top';\n\n  var bRect = _base.node().getBoundingClientRect();\n\n  var cRect = container.node().getBoundingClientRect();\n  var thisRect;\n  var getTop;\n  var getLeft;\n\n  if (alignV === 'bottom') {\n    getTop = function getTop() {\n      return bRect.bottom - thisRect.height;\n    };\n  } else if (alignV === 'middle') {\n    getTop = function getTop() {\n      return bRect.top + (bRect.height - thisRect.height) / 2;\n    };\n  } else {\n    // default: top\n    getTop = function getTop() {\n      return bRect.top;\n    };\n  }\n\n  if (alignH === 'right') {\n    getLeft = function getLeft() {\n      return bRect.right - thisRect.width;\n    };\n  } else if (alignH === 'center') {\n    getLeft = function getLeft() {\n      return bRect.left + (bRect.width - thisRect.width) / 2;\n    };\n  } else {\n    // default: left\n    getLeft = function getLeft() {\n      return bRect.left;\n    };\n  }\n\n  return function () {\n    thisRect = this.node().getBoundingClientRect();\n    this.style({\n      top: getTop() - cRect.top + 'px',\n      left: getLeft() - cRect.left + 'px',\n      'z-index': 1000\n    });\n    return this;\n  };\n}\n/*\n * Editable title\n * @param {d3.selection} context: the element being edited. Normally text,\n *   but if it isn't, you should provide the styling options\n * @param {object} options:\n *   @param {div} options.gd: graphDiv\n *   @param {d3.selection} options.delegate: item to bind events to if not this\n *   @param {boolean} options.immediate: start editing now (true) or on click (false, default)\n *   @param {string} options.fill: font color if not as shown\n *   @param {string} options.background: background color if not as shown\n *   @param {string} options.text: initial text, if not as shown\n *   @param {string} options.horizontalAlign: alignment of the edit box wrt. the bound element\n *   @param {string} options.verticalAlign: alignment of the edit box wrt. the bound element\n */\n\n\nexports.makeEditable = function (context, options) {\n  var gd = options.gd;\n  var _delegate = options.delegate;\n  var dispatch = d3.dispatch('edit', 'input', 'cancel');\n  var handlerElement = _delegate || context;\n  context.style({\n    'pointer-events': _delegate ? 'none' : 'all'\n  });\n  if (context.size() !== 1) throw new Error('boo');\n\n  function handleClick() {\n    appendEditable();\n    context.style({\n      opacity: 0\n    }); // also hide any mathjax svg\n\n    var svgClass = handlerElement.attr('class');\n    var mathjaxClass;\n    if (svgClass) mathjaxClass = '.' + svgClass.split(' ')[0] + '-math-group';else mathjaxClass = '[class*=-math-group]';\n\n    if (mathjaxClass) {\n      d3.select(context.node().parentNode).select(mathjaxClass).style({\n        opacity: 0\n      });\n    }\n  }\n\n  function selectElementContents(_el) {\n    var el = _el.node();\n\n    var range = document.createRange();\n    range.selectNodeContents(el);\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n    el.focus();\n  }\n\n  function appendEditable() {\n    var plotDiv = d3.select(gd);\n    var container = plotDiv.select('.svg-container');\n    var div = container.append('div');\n    var cStyle = context.node().style;\n    var fontSize = parseFloat(cStyle.fontSize || 12);\n    var initialText = options.text;\n    if (initialText === undefined) initialText = context.attr('data-unformatted');\n    div.classed('plugin-editable editable', true).style({\n      position: 'absolute',\n      'font-family': cStyle.fontFamily || 'Arial',\n      'font-size': fontSize,\n      color: options.fill || cStyle.fill || 'black',\n      opacity: 1,\n      'background-color': options.background || 'transparent',\n      outline: '#ffffff33 1px solid',\n      margin: [-fontSize / 8 + 1, 0, 0, -1].join('px ') + 'px',\n      padding: '0',\n      'box-sizing': 'border-box'\n    }).attr({\n      contenteditable: true\n    }).text(initialText).call(alignHTMLWith(context, container, options)).on('blur', function () {\n      gd._editing = false;\n      context.text(this.textContent).style({\n        opacity: 1\n      });\n      var svgClass = d3.select(this).attr('class');\n      var mathjaxClass;\n      if (svgClass) mathjaxClass = '.' + svgClass.split(' ')[0] + '-math-group';else mathjaxClass = '[class*=-math-group]';\n\n      if (mathjaxClass) {\n        d3.select(context.node().parentNode).select(mathjaxClass).style({\n          opacity: 0\n        });\n      }\n\n      var text = this.textContent;\n      d3.select(this).transition().duration(0).remove();\n      d3.select(document).on('mouseup', null);\n      dispatch.edit.call(context, text);\n    }).on('focus', function () {\n      var editDiv = this;\n      gd._editing = true;\n      d3.select(document).on('mouseup', function () {\n        if (d3.event.target === editDiv) return false;\n        if (document.activeElement === div.node()) div.node().blur();\n      });\n    }).on('keyup', function () {\n      if (d3.event.which === 27) {\n        gd._editing = false;\n        context.style({\n          opacity: 1\n        });\n        d3.select(this).style({\n          opacity: 0\n        }).on('blur', function () {\n          return false;\n        }).transition().remove();\n        dispatch.cancel.call(context, this.textContent);\n      } else {\n        dispatch.input.call(context, this.textContent);\n        d3.select(this).call(alignHTMLWith(context, container, options));\n      }\n    }).on('keydown', function () {\n      if (d3.event.which === 13) this.blur();\n    }).call(selectElementContents);\n  }\n\n  if (options.immediate) handleClick();else handlerElement.on('click', handleClick);\n  return d3.rebind(context, dispatch, 'on');\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar NOTEDATA = [];\n/**\n * notifier\n * @param {String} text The person's user name\n * @param {Number} [delay=1000] The delay time in milliseconds\n *          or 'long' which provides 2000 ms delay time.\n * @return {undefined} this function does not return a value\n */\n\nmodule.exports = function (text, displayLength) {\n  if (NOTEDATA.indexOf(text) !== -1) return;\n  NOTEDATA.push(text);\n  var ts = 1000;\n  if (isNumeric(displayLength)) ts = displayLength;else if (displayLength === 'long') ts = 3000;\n  var notifierContainer = d3.select('body').selectAll('.plotly-notifier').data([0]);\n  notifierContainer.enter().append('div').classed('plotly-notifier', true);\n  var notes = notifierContainer.selectAll('.notifier-note').data(NOTEDATA);\n\n  function killNote(transition) {\n    transition.duration(700).style('opacity', 0).each('end', function (thisText) {\n      var thisIndex = NOTEDATA.indexOf(thisText);\n      if (thisIndex !== -1) NOTEDATA.splice(thisIndex, 1);\n      d3.select(this).remove();\n    });\n  }\n\n  notes.enter().append('div').classed('notifier-note', true).style('opacity', 0).each(function (thisText) {\n    var note = d3.select(this);\n    note.append('button').classed('notifier-close', true).html('&times;').on('click', function () {\n      note.transition().call(killNote);\n    });\n    var p = note.append('p');\n    var lines = thisText.split(/<br\\s*\\/?>/g);\n\n    for (var i = 0; i < lines.length; i++) {\n      if (i) p.append('br');\n      p.append('span').text(lines[i]);\n    }\n\n    if (displayLength === 'stick') {\n      note.transition().duration(350).style('opacity', 1);\n    } else {\n      note.transition().duration(700).style('opacity', 1).transition().delay(ts).call(killNote);\n    }\n  });\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/*\n * make a regex for matching counter ids/names ie xaxis, xaxis2, xaxis10...\n *\n * @param {string} head: the head of the pattern, eg 'x' matches 'x', 'x2', 'x10' etc.\n *      'xy' is a special case for cartesian subplots: it matches 'x2y3' etc\n * @param {Optional(string)} tail: a fixed piece after the id\n *      eg counterRegex('scene', '.annotations') for scene2.annotations etc.\n * @param {boolean} openEnded: if true, the string may continue past the match.\n * @param {boolean} matchBeginning: if false, the string may start before the match.\n */\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nexports.counter = function (head, tail, openEnded, matchBeginning) {\n  var fullTail = (tail || '') + (openEnded ? '' : '$');\n  var startWithPrefix = matchBeginning === false ? '' : '^';\n\n  if (head === 'xy') {\n    return new RegExp(startWithPrefix + 'x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?' + fullTail);\n  }\n\n  return new RegExp(startWithPrefix + head + '([2-9]|[1-9][0-9]+)?' + fullTail);\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  nodeTextOffsetHorizontal: 4,\n  nodeTextOffsetVertical: 3,\n  nodePadAcross: 10,\n  sankeyIterations: 50,\n  forceIterations: 5,\n  forceTicksPerFrame: 10,\n  duration: 500,\n  ease: 'linear',\n  cn: {\n    sankey: 'sankey',\n    sankeyLinks: 'sankey-links',\n    sankeyLink: 'sankey-link',\n    sankeyNodeSet: 'sankey-node-set',\n    sankeyNode: 'sankey-node',\n    nodeRect: 'node-rect',\n    nodeCapture: 'node-capture',\n    nodeCentered: 'node-entered',\n    nodeLabelGuide: 'node-label-guide',\n    nodeLabel: 'node-label',\n    nodeLabelTextPath: 'node-label-text-path'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Plots = require('../../plots/plots');\n\nvar Registry = require('../../registry');\n\nvar Lib = require('../../lib');\n\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar Titles = require('../../components/titles');\n\nvar Color = require('../../components/color');\n\nvar Drawing = require('../../components/drawing');\n\nvar axAttrs = require('./layout_attributes');\n\nvar cleanTicks = require('./clean_ticks');\n\nvar constants = require('../../constants/numerical');\n\nvar ONEAVGYEAR = constants.ONEAVGYEAR;\nvar ONEAVGMONTH = constants.ONEAVGMONTH;\nvar ONEDAY = constants.ONEDAY;\nvar ONEHOUR = constants.ONEHOUR;\nvar ONEMIN = constants.ONEMIN;\nvar ONESEC = constants.ONESEC;\nvar MINUS_SIGN = constants.MINUS_SIGN;\nvar BADNUM = constants.BADNUM;\n\nvar alignmentConstants = require('../../constants/alignment');\n\nvar MID_SHIFT = alignmentConstants.MID_SHIFT;\nvar CAP_SHIFT = alignmentConstants.CAP_SHIFT;\nvar LINE_SPACING = alignmentConstants.LINE_SPACING;\nvar OPPOSITE_SIDE = alignmentConstants.OPPOSITE_SIDE;\nvar axes = module.exports = {};\naxes.setConvert = require('./set_convert');\n\nvar autoType = require('./axis_autotype');\n\nvar axisIds = require('./axis_ids');\n\naxes.id2name = axisIds.id2name;\naxes.name2id = axisIds.name2id;\naxes.cleanId = axisIds.cleanId;\naxes.list = axisIds.list;\naxes.listIds = axisIds.listIds;\naxes.getFromId = axisIds.getFromId;\naxes.getFromTrace = axisIds.getFromTrace;\n\nvar autorange = require('./autorange');\n\naxes.getAutoRange = autorange.getAutoRange;\naxes.findExtremes = autorange.findExtremes;\n/*\n * find the list of possible axes to reference with an xref or yref attribute\n * and coerce it to that list\n *\n * attr: the attribute we're generating a reference for. Should end in 'x' or 'y'\n *     but can be prefixed, like 'ax' for annotation's arrow x\n * dflt: the default to coerce to, or blank to use the first axis (falling back on\n *     extraOption if there is no axis)\n * extraOption: aside from existing axes with this letter, what non-axis value is allowed?\n *     Only required if it's different from `dflt`\n */\n\naxes.coerceRef = function (containerIn, containerOut, gd, attr, dflt, extraOption) {\n  var axLetter = attr.charAt(attr.length - 1);\n  var axlist = gd._fullLayout._subplots[axLetter + 'axis'];\n  var refAttr = attr + 'ref';\n  var attrDef = {};\n  if (!dflt) dflt = axlist[0] || extraOption;\n  if (!extraOption) extraOption = dflt; // data-ref annotations are not supported in gl2d yet\n\n  attrDef[refAttr] = {\n    valType: 'enumerated',\n    values: axlist.concat(extraOption ? [extraOption] : []),\n    dflt: dflt\n  }; // xref, yref\n\n  return Lib.coerce(containerIn, containerOut, attrDef, refAttr);\n};\n/*\n * coerce position attributes (range-type) that can be either on axes or absolute\n * (paper or pixel) referenced. The biggest complication here is that we don't know\n * before looking at the axis whether the value must be a number or not (it may be\n * a date string), so we can't use the regular valType='number' machinery\n *\n * axRef (string): the axis this position is referenced to, or:\n *     paper: fraction of the plot area\n *     pixel: pixels relative to some starting position\n * attr (string): the attribute in containerOut we are coercing\n * dflt (number): the default position, as a fraction or pixels. If the attribute\n *     is to be axis-referenced, this will be converted to an axis data value\n *\n * Also cleans the values, since the attribute definition itself has to say\n * valType: 'any' to handle date axes. This allows us to accept:\n * - for category axes: category names, and convert them here into serial numbers.\n *   Note that this will NOT work for axis range endpoints, because we don't know\n *   the category list yet (it's set by ax.makeCalcdata during calc)\n *   but it works for component (note, shape, images) positions.\n * - for date axes: JS Dates or milliseconds, and convert to date strings\n * - for other types: coerce them to numbers\n */\n\n\naxes.coercePosition = function (containerOut, gd, coerce, axRef, attr, dflt) {\n  var cleanPos, pos;\n\n  if (axRef === 'paper' || axRef === 'pixel') {\n    cleanPos = Lib.ensureNumber;\n    pos = coerce(attr, dflt);\n  } else {\n    var ax = axes.getFromId(gd, axRef);\n    dflt = ax.fraction2r(dflt);\n    pos = coerce(attr, dflt);\n    cleanPos = ax.cleanPos;\n  }\n\n  containerOut[attr] = cleanPos(pos);\n};\n\naxes.cleanPosition = function (pos, gd, axRef) {\n  var cleanPos = axRef === 'paper' || axRef === 'pixel' ? Lib.ensureNumber : axes.getFromId(gd, axRef).cleanPos;\n  return cleanPos(pos);\n};\n\naxes.redrawComponents = function (gd, axIds) {\n  axIds = axIds ? axIds : axes.listIds(gd);\n  var fullLayout = gd._fullLayout;\n\n  function _redrawOneComp(moduleName, methodName, stashName, shortCircuit) {\n    var method = Registry.getComponentMethod(moduleName, methodName);\n    var stash = {};\n\n    for (var i = 0; i < axIds.length; i++) {\n      var ax = fullLayout[axes.id2name(axIds[i])];\n      var indices = ax[stashName];\n\n      for (var j = 0; j < indices.length; j++) {\n        var ind = indices[j];\n\n        if (!stash[ind]) {\n          method(gd, ind);\n          stash[ind] = 1; // once is enough for images (which doesn't use the `i` arg anyway)\n\n          if (shortCircuit) return;\n        }\n      }\n    }\n  } // annotations and shapes 'draw' method is slow,\n  // use the finer-grained 'drawOne' method instead\n\n\n  _redrawOneComp('annotations', 'drawOne', '_annIndices');\n\n  _redrawOneComp('shapes', 'drawOne', '_shapeIndices');\n\n  _redrawOneComp('images', 'draw', '_imgIndices', true);\n};\n\nvar getDataConversions = axes.getDataConversions = function (gd, trace, target, targetArray) {\n  var ax; // If target points to an axis, use the type we already have for that\n  // axis to find the data type. Otherwise use the values to autotype.\n\n  var d2cTarget = target === 'x' || target === 'y' || target === 'z' ? target : targetArray; // In the case of an array target, make a mock data array\n  // and call supplyDefaults to the data type and\n  // setup the data-to-calc method.\n\n  if (Array.isArray(d2cTarget)) {\n    ax = {\n      type: autoType(targetArray),\n      _categories: []\n    };\n    axes.setConvert(ax); // build up ax._categories (usually done during ax.makeCalcdata()\n\n    if (ax.type === 'category') {\n      for (var i = 0; i < targetArray.length; i++) {\n        ax.d2c(targetArray[i]);\n      }\n    } // TODO what to do for transforms?\n\n  } else {\n    ax = axes.getFromTrace(gd, trace, d2cTarget);\n  } // if 'target' has corresponding axis\n  // -> use setConvert method\n\n\n  if (ax) return {\n    d2c: ax.d2c,\n    c2d: ax.c2d\n  }; // special case for 'ids'\n  // -> cast to String\n\n  if (d2cTarget === 'ids') return {\n    d2c: toString,\n    c2d: toString\n  }; // otherwise (e.g. numeric-array of 'marker.color' or 'marker.size')\n  // -> cast to Number\n\n  return {\n    d2c: toNum,\n    c2d: toNum\n  };\n};\n\nfunction toNum(v) {\n  return +v;\n}\n\nfunction toString(v) {\n  return String(v);\n}\n\naxes.getDataToCoordFunc = function (gd, trace, target, targetArray) {\n  return getDataConversions(gd, trace, target, targetArray).d2c;\n}; // get counteraxis letter for this axis (name or id)\n// this can also be used as the id for default counter axis\n\n\naxes.counterLetter = function (id) {\n  var axLetter = id.charAt(0);\n  if (axLetter === 'x') return 'y';\n  if (axLetter === 'y') return 'x';\n}; // incorporate a new minimum difference and first tick into\n// forced\n// note that _forceTick0 is linearized, so needs to be turned into\n// a range value for setting tick0\n\n\naxes.minDtick = function (ax, newDiff, newFirst, allow) {\n  // doesn't make sense to do forced min dTick on log or category axes,\n  // and the plot itself may decide to cancel (ie non-grouped bars)\n  if (['log', 'category', 'multicategory'].indexOf(ax.type) !== -1 || !allow) {\n    ax._minDtick = 0;\n  } else if (ax._minDtick === undefined) {\n    // undefined means there's nothing there yet\n    ax._minDtick = newDiff;\n    ax._forceTick0 = newFirst;\n  } else if (ax._minDtick) {\n    if ((ax._minDtick / newDiff + 1e-6) % 1 < 2e-6 && // existing minDtick is an integer multiple of newDiff\n    // (within rounding err)\n    // and forceTick0 can be shifted to newFirst\n    ((newFirst - ax._forceTick0) / newDiff % 1 + 1.000001) % 1 < 2e-6) {\n      ax._minDtick = newDiff;\n      ax._forceTick0 = newFirst;\n    } else if ((newDiff / ax._minDtick + 1e-6) % 1 > 2e-6 || // if the converse is true (newDiff is a multiple of minDtick and\n    // newFirst can be shifted to forceTick0) then do nothing - same\n    // forcing stands. Otherwise, cancel forced minimum\n    ((newFirst - ax._forceTick0) / ax._minDtick % 1 + 1.000001) % 1 > 2e-6) {\n      ax._minDtick = 0;\n    }\n  }\n}; // save a copy of the initial axis ranges in fullLayout\n// use them in mode bar and dblclick events\n\n\naxes.saveRangeInitial = function (gd, overwrite) {\n  var axList = axes.list(gd, '', true);\n  var hasOneAxisChanged = false;\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    var isNew = ax._rangeInitial === undefined;\n    var hasChanged = isNew || !(ax.range[0] === ax._rangeInitial[0] && ax.range[1] === ax._rangeInitial[1]);\n\n    if (isNew && ax.autorange === false || overwrite && hasChanged) {\n      ax._rangeInitial = ax.range.slice();\n      hasOneAxisChanged = true;\n    }\n  }\n\n  return hasOneAxisChanged;\n}; // save a copy of the initial spike visibility\n\n\naxes.saveShowSpikeInitial = function (gd, overwrite) {\n  var axList = axes.list(gd, '', true);\n  var hasOneAxisChanged = false;\n  var allSpikesEnabled = 'on';\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    var isNew = ax._showSpikeInitial === undefined;\n    var hasChanged = isNew || !(ax.showspikes === ax._showspikes);\n\n    if (isNew || overwrite && hasChanged) {\n      ax._showSpikeInitial = ax.showspikes;\n      hasOneAxisChanged = true;\n    }\n\n    if (allSpikesEnabled === 'on' && !ax.showspikes) {\n      allSpikesEnabled = 'off';\n    }\n  }\n\n  gd._fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n  return hasOneAxisChanged;\n};\n\naxes.autoBin = function (data, ax, nbins, is2d, calendar, size) {\n  var dataMin = Lib.aggNums(Math.min, null, data);\n  var dataMax = Lib.aggNums(Math.max, null, data);\n\n  if (ax.type === 'category' || ax.type === 'multicategory') {\n    return {\n      start: dataMin - 0.5,\n      end: dataMax + 0.5,\n      size: Math.max(1, Math.round(size) || 1),\n      _dataSpan: dataMax - dataMin\n    };\n  }\n\n  if (!calendar) calendar = ax.calendar; // piggyback off tick code to make \"nice\" bin sizes and edges\n\n  var dummyAx;\n\n  if (ax.type === 'log') {\n    dummyAx = {\n      type: 'linear',\n      range: [dataMin, dataMax]\n    };\n  } else {\n    dummyAx = {\n      type: ax.type,\n      range: Lib.simpleMap([dataMin, dataMax], ax.c2r, 0, calendar),\n      calendar: calendar\n    };\n  }\n\n  axes.setConvert(dummyAx);\n  size = size && cleanTicks.dtick(size, dummyAx.type);\n\n  if (size) {\n    dummyAx.dtick = size;\n    dummyAx.tick0 = cleanTicks.tick0(undefined, dummyAx.type, calendar);\n  } else {\n    var size0;\n    if (nbins) size0 = (dataMax - dataMin) / nbins;else {\n      // totally auto: scale off std deviation so the highest bin is\n      // somewhat taller than the total number of bins, but don't let\n      // the size get smaller than the 'nice' rounded down minimum\n      // difference between values\n      var distinctData = Lib.distinctVals(data);\n      var msexp = Math.pow(10, Math.floor(Math.log(distinctData.minDiff) / Math.LN10));\n      var minSize = msexp * Lib.roundUp(distinctData.minDiff / msexp, [0.9, 1.9, 4.9, 9.9], true);\n      size0 = Math.max(minSize, 2 * Lib.stdev(data) / Math.pow(data.length, is2d ? 0.25 : 0.4)); // fallback if ax.d2c output BADNUMs\n      // e.g. when user try to plot categorical bins\n      // on a layout.xaxis.type: 'linear'\n\n      if (!isNumeric(size0)) size0 = 1;\n    }\n    axes.autoTicks(dummyAx, size0);\n  }\n\n  var finalSize = dummyAx.dtick;\n  var binStart = axes.tickIncrement(axes.tickFirst(dummyAx), finalSize, 'reverse', calendar);\n  var binEnd, bincount; // check for too many data points right at the edges of bins\n  // (>50% within 1% of bin edges) or all data points integral\n  // and offset the bins accordingly\n\n  if (typeof finalSize === 'number') {\n    binStart = autoShiftNumericBins(binStart, data, dummyAx, dataMin, dataMax);\n    bincount = 1 + Math.floor((dataMax - binStart) / finalSize);\n    binEnd = binStart + bincount * finalSize;\n  } else {\n    // month ticks - should be the only nonlinear kind we have at this point.\n    // dtick (as supplied by axes.autoTick) only has nonlinear values on\n    // date and log axes, but even if you display a histogram on a log axis\n    // we bin it on a linear axis (which one could argue against, but that's\n    // a separate issue)\n    if (dummyAx.dtick.charAt(0) === 'M') {\n      binStart = autoShiftMonthBins(binStart, data, finalSize, dataMin, calendar);\n    } // calculate the endpoint for nonlinear ticks - you have to\n    // just increment until you're done\n\n\n    binEnd = binStart;\n    bincount = 0;\n\n    while (binEnd <= dataMax) {\n      binEnd = axes.tickIncrement(binEnd, finalSize, false, calendar);\n      bincount++;\n    }\n  }\n\n  return {\n    start: ax.c2r(binStart, 0, calendar),\n    end: ax.c2r(binEnd, 0, calendar),\n    size: finalSize,\n    _dataSpan: dataMax - dataMin\n  };\n};\n\nfunction autoShiftNumericBins(binStart, data, ax, dataMin, dataMax) {\n  var edgecount = 0;\n  var midcount = 0;\n  var intcount = 0;\n  var blankCount = 0;\n\n  function nearEdge(v) {\n    // is a value within 1% of a bin edge?\n    return (1 + (v - binStart) * 100 / ax.dtick) % 100 < 2;\n  }\n\n  for (var i = 0; i < data.length; i++) {\n    if (data[i] % 1 === 0) intcount++;else if (!isNumeric(data[i])) blankCount++;\n    if (nearEdge(data[i])) edgecount++;\n    if (nearEdge(data[i] + ax.dtick / 2)) midcount++;\n  }\n\n  var dataCount = data.length - blankCount;\n\n  if (intcount === dataCount && ax.type !== 'date') {\n    if (ax.dtick < 1) {\n      // all integers: if bin size is <1, it's because\n      // that was specifically requested (large nbins)\n      // so respect that... but center the bins containing\n      // integers on those integers\n      binStart = dataMin - 0.5 * ax.dtick;\n    } else {\n      // otherwise start half an integer down regardless of\n      // the bin size, just enough to clear up endpoint\n      // ambiguity about which integers are in which bins.\n      binStart -= 0.5;\n      if (binStart + ax.dtick < dataMin) binStart += ax.dtick;\n    }\n  } else if (midcount < dataCount * 0.1) {\n    if (edgecount > dataCount * 0.3 || nearEdge(dataMin) || nearEdge(dataMax)) {\n      // lots of points at the edge, not many in the middle\n      // shift half a bin\n      var binshift = ax.dtick / 2;\n      binStart += binStart + binshift < dataMin ? binshift : -binshift;\n    }\n  }\n\n  return binStart;\n}\n\nfunction autoShiftMonthBins(binStart, data, dtick, dataMin, calendar) {\n  var stats = Lib.findExactDates(data, calendar); // number of data points that needs to be an exact value\n  // to shift that increment to (near) the bin center\n\n  var threshold = 0.8;\n\n  if (stats.exactDays > threshold) {\n    var numMonths = Number(dtick.substr(1));\n\n    if (stats.exactYears > threshold && numMonths % 12 === 0) {\n      // The exact middle of a non-leap-year is 1.5 days into July\n      // so if we start the bins here, all but leap years will\n      // get hover-labeled as exact years.\n      binStart = axes.tickIncrement(binStart, 'M6', 'reverse') + ONEDAY * 1.5;\n    } else if (stats.exactMonths > threshold) {\n      // Months are not as clean, but if we shift half the *longest*\n      // month (31/2 days) then 31-day months will get labeled exactly\n      // and shorter months will get labeled with the correct month\n      // but shifted 12-36 hours into it.\n      binStart = axes.tickIncrement(binStart, 'M1', 'reverse') + ONEDAY * 15.5;\n    } else {\n      // Shifting half a day is exact, but since these are month bins it\n      // will always give a somewhat odd-looking label, until we do something\n      // smarter like showing the bin boundaries (or the bounds of the actual\n      // data in each bin)\n      binStart -= ONEDAY / 2;\n    }\n\n    var nextBinStart = axes.tickIncrement(binStart, dtick);\n    if (nextBinStart <= dataMin) return nextBinStart;\n  }\n\n  return binStart;\n} // ----------------------------------------------------\n// Ticks and grids\n// ----------------------------------------------------\n// ensure we have tick0, dtick, and tick rounding calculated\n\n\naxes.prepTicks = function (ax) {\n  var rng = Lib.simpleMap(ax.range, ax.r2l); // calculate max number of (auto) ticks to display based on plot size\n\n  if (ax.tickmode === 'auto' || !ax.dtick) {\n    var nt = ax.nticks;\n    var minPx;\n\n    if (!nt) {\n      if (ax.type === 'category' || ax.type === 'multicategory') {\n        minPx = ax.tickfont ? (ax.tickfont.size || 12) * 1.2 : 15;\n        nt = ax._length / minPx;\n      } else {\n        minPx = ax._id.charAt(0) === 'y' ? 40 : 80;\n        nt = Lib.constrain(ax._length / minPx, 4, 9) + 1;\n      } // radial axes span half their domain,\n      // multiply nticks value by two to get correct number of auto ticks.\n\n\n      if (ax._name === 'radialaxis') nt *= 2;\n    } // add a couple of extra digits for filling in ticks when we\n    // have explicit tickvals without tick text\n\n\n    if (ax.tickmode === 'array') nt *= 100;\n    axes.autoTicks(ax, Math.abs(rng[1] - rng[0]) / nt); // check for a forced minimum dtick\n\n    if (ax._minDtick > 0 && ax.dtick < ax._minDtick * 2) {\n      ax.dtick = ax._minDtick;\n      ax.tick0 = ax.l2r(ax._forceTick0);\n    }\n  } // check for missing tick0\n\n\n  if (!ax.tick0) {\n    ax.tick0 = ax.type === 'date' ? '2000-01-01' : 0;\n  } // ensure we don't try to make ticks below our minimum precision\n  // see https://github.com/plotly/plotly.js/issues/2892\n\n\n  if (ax.type === 'date' && ax.dtick < 0.1) ax.dtick = 0.1; // now figure out rounding of tick values\n\n  autoTickRound(ax);\n}; // calculate the ticks: text, values, positioning\n// if ticks are set to automatic, determine the right values (tick0,dtick)\n// in any case, set tickround to # of digits to round tick labels to,\n// or codes to this effect for log and date scales\n\n\naxes.calcTicks = function calcTicks(ax) {\n  axes.prepTicks(ax);\n  var rng = Lib.simpleMap(ax.range, ax.r2l); // now that we've figured out the auto values for formatting\n  // in case we're missing some ticktext, we can break out for array ticks\n\n  if (ax.tickmode === 'array') return arrayTicks(ax); // find the first tick\n\n  ax._tmin = axes.tickFirst(ax); // add a tiny bit so we get ticks which may have rounded out\n\n  var startTick = rng[0] * 1.0001 - rng[1] * 0.0001;\n  var endTick = rng[1] * 1.0001 - rng[0] * 0.0001; // check for reversed axis\n\n  var axrev = rng[1] < rng[0]; // No visible ticks? Quit.\n  // I've only seen this on category axes with all categories off the edge.\n\n  if (ax._tmin < startTick !== axrev) return []; // return the full set of tick vals\n\n  var tickVals = [];\n\n  if (ax.type === 'category' || ax.type === 'multicategory') {\n    endTick = axrev ? Math.max(-0.5, endTick) : Math.min(ax._categories.length - 0.5, endTick);\n  }\n\n  var isDLog = ax.type === 'log' && !(isNumeric(ax.dtick) || ax.dtick.charAt(0) === 'L');\n  var xPrevious = null;\n  var maxTicks = Math.max(1000, ax._length || 0);\n\n  for (var x = ax._tmin; axrev ? x >= endTick : x <= endTick; x = axes.tickIncrement(x, ax.dtick, axrev, ax.calendar)) {\n    // prevent infinite loops - no more than one tick per pixel,\n    // and make sure each value is different from the previous\n    if (tickVals.length > maxTicks || x === xPrevious) break;\n    xPrevious = x;\n    var minor = false;\n\n    if (isDLog && x !== (x | 0)) {\n      minor = true;\n    }\n\n    tickVals.push({\n      minor: minor,\n      value: x\n    });\n  } // If same angle over a full circle, the last tick vals is a duplicate.\n  // TODO must do something similar for angular date axes.\n\n\n  if (isAngular(ax) && Math.abs(rng[1] - rng[0]) === 360) {\n    tickVals.pop();\n  } // save the last tick as well as first, so we can\n  // show the exponent only on the last one\n\n\n  ax._tmax = (tickVals[tickVals.length - 1] || {}).value; // for showing the rest of a date when the main tick label is only the\n  // latter part: ax._prevDateHead holds what we showed most recently.\n  // Start with it cleared and mark that we're in calcTicks (ie calculating a\n  // whole string of these so we should care what the previous date head was!)\n\n  ax._prevDateHead = '';\n  ax._inCalcTicks = true;\n  var ticksOut = new Array(tickVals.length);\n\n  for (var i = 0; i < tickVals.length; i++) {\n    ticksOut[i] = axes.tickText(ax, tickVals[i].value, false, // hover\n    tickVals[i].minor // noSuffixPrefix\n    );\n  }\n\n  ax._inCalcTicks = false;\n  return ticksOut;\n};\n\nfunction arrayTicks(ax) {\n  var vals = ax.tickvals;\n  var text = ax.ticktext;\n  var ticksOut = new Array(vals.length);\n  var rng = Lib.simpleMap(ax.range, ax.r2l);\n  var r0expanded = rng[0] * 1.0001 - rng[1] * 0.0001;\n  var r1expanded = rng[1] * 1.0001 - rng[0] * 0.0001;\n  var tickMin = Math.min(r0expanded, r1expanded);\n  var tickMax = Math.max(r0expanded, r1expanded);\n  var j = 0; // without a text array, just format the given values as any other ticks\n  // except with more precision to the numbers\n\n  if (!Array.isArray(text)) text = []; // make sure showing ticks doesn't accidentally add new categories\n  // TODO multicategory, if we allow ticktext / tickvals\n\n  var tickVal2l = ax.type === 'category' ? ax.d2l_noadd : ax.d2l; // array ticks on log axes always show the full number\n  // (if no explicit ticktext overrides it)\n\n  if (ax.type === 'log' && String(ax.dtick).charAt(0) !== 'L') {\n    ax.dtick = 'L' + Math.pow(10, Math.floor(Math.min(ax.range[0], ax.range[1])) - 1);\n  }\n\n  for (var i = 0; i < vals.length; i++) {\n    var vali = tickVal2l(vals[i]);\n\n    if (vali > tickMin && vali < tickMax) {\n      if (text[i] === undefined) ticksOut[j] = axes.tickText(ax, vali);else ticksOut[j] = tickTextObj(ax, vali, String(text[i]));\n      j++;\n    }\n  }\n\n  if (j < vals.length) ticksOut.splice(j, vals.length - j);\n  return ticksOut;\n}\n\nvar roundBase10 = [2, 5, 10];\nvar roundBase24 = [1, 2, 3, 6, 12];\nvar roundBase60 = [1, 2, 5, 10, 15, 30]; // 2&3 day ticks are weird, but need something btwn 1&7\n\nvar roundDays = [1, 2, 3, 7, 14]; // approx. tick positions for log axes, showing all (1) and just 1, 2, 5 (2)\n// these don't have to be exact, just close enough to round to the right value\n\nvar roundLog1 = [-0.046, 0, 0.301, 0.477, 0.602, 0.699, 0.778, 0.845, 0.903, 0.954, 1];\nvar roundLog2 = [-0.301, 0, 0.301, 0.699, 1]; // N.B. `thetaunit; 'radians' angular axes must be converted to degrees\n\nvar roundAngles = [15, 30, 45, 90, 180];\n\nfunction roundDTick(roughDTick, base, roundingSet) {\n  return base * Lib.roundUp(roughDTick / base, roundingSet);\n} // autoTicks: calculate best guess at pleasant ticks for this axis\n// inputs:\n//      ax - an axis object\n//      roughDTick - rough tick spacing (to be turned into a nice round number)\n// outputs (into ax):\n//   tick0: starting point for ticks (not necessarily on the graph)\n//      usually 0 for numeric (=10^0=1 for log) or jan 1, 2000 for dates\n//   dtick: the actual, nice round tick spacing, usually a little larger than roughDTick\n//      if the ticks are spaced linearly (linear scale, categories,\n//          log with only full powers, date ticks < month),\n//          this will just be a number\n//      months: M#\n//      years: M# where # is 12*number of years\n//      log with linear ticks: L# where # is the linear tick spacing\n//      log showing powers plus some intermediates:\n//          D1 shows all digits, D2 shows 2 and 5\n\n\naxes.autoTicks = function (ax, roughDTick) {\n  var base;\n\n  function getBase(v) {\n    return Math.pow(v, Math.floor(Math.log(roughDTick) / Math.LN10));\n  }\n\n  if (ax.type === 'date') {\n    ax.tick0 = Lib.dateTick0(ax.calendar); // the criteria below are all based on the rough spacing we calculate\n    // being > half of the final unit - so precalculate twice the rough val\n\n    var roughX2 = 2 * roughDTick;\n\n    if (roughX2 > ONEAVGYEAR) {\n      roughDTick /= ONEAVGYEAR;\n      base = getBase(10);\n      ax.dtick = 'M' + 12 * roundDTick(roughDTick, base, roundBase10);\n    } else if (roughX2 > ONEAVGMONTH) {\n      roughDTick /= ONEAVGMONTH;\n      ax.dtick = 'M' + roundDTick(roughDTick, 1, roundBase24);\n    } else if (roughX2 > ONEDAY) {\n      ax.dtick = roundDTick(roughDTick, ONEDAY, roundDays); // get week ticks on sunday\n      // this will also move the base tick off 2000-01-01 if dtick is\n      // 2 or 3 days... but that's a weird enough case that we'll ignore it.\n\n      ax.tick0 = Lib.dateTick0(ax.calendar, true);\n    } else if (roughX2 > ONEHOUR) {\n      ax.dtick = roundDTick(roughDTick, ONEHOUR, roundBase24);\n    } else if (roughX2 > ONEMIN) {\n      ax.dtick = roundDTick(roughDTick, ONEMIN, roundBase60);\n    } else if (roughX2 > ONESEC) {\n      ax.dtick = roundDTick(roughDTick, ONESEC, roundBase60);\n    } else {\n      // milliseconds\n      base = getBase(10);\n      ax.dtick = roundDTick(roughDTick, base, roundBase10);\n    }\n  } else if (ax.type === 'log') {\n    ax.tick0 = 0;\n    var rng = Lib.simpleMap(ax.range, ax.r2l);\n\n    if (roughDTick > 0.7) {\n      // only show powers of 10\n      ax.dtick = Math.ceil(roughDTick);\n    } else if (Math.abs(rng[1] - rng[0]) < 1) {\n      // span is less than one power of 10\n      var nt = 1.5 * Math.abs((rng[1] - rng[0]) / roughDTick); // ticks on a linear scale, labeled fully\n\n      roughDTick = Math.abs(Math.pow(10, rng[1]) - Math.pow(10, rng[0])) / nt;\n      base = getBase(10);\n      ax.dtick = 'L' + roundDTick(roughDTick, base, roundBase10);\n    } else {\n      // include intermediates between powers of 10,\n      // labeled with small digits\n      // ax.dtick = \"D2\" (show 2 and 5) or \"D1\" (show all digits)\n      ax.dtick = roughDTick > 0.3 ? 'D2' : 'D1';\n    }\n  } else if (ax.type === 'category' || ax.type === 'multicategory') {\n    ax.tick0 = 0;\n    ax.dtick = Math.ceil(Math.max(roughDTick, 1));\n  } else if (isAngular(ax)) {\n    ax.tick0 = 0;\n    base = 1;\n    ax.dtick = roundDTick(roughDTick, base, roundAngles);\n  } else {\n    // auto ticks always start at 0\n    ax.tick0 = 0;\n    base = getBase(10);\n    ax.dtick = roundDTick(roughDTick, base, roundBase10);\n  } // prevent infinite loops\n\n\n  if (ax.dtick === 0) ax.dtick = 1; // TODO: this is from log axis histograms with autorange off\n\n  if (!isNumeric(ax.dtick) && typeof ax.dtick !== 'string') {\n    var olddtick = ax.dtick;\n    ax.dtick = 1;\n    throw 'ax.dtick error: ' + String(olddtick);\n  }\n}; // after dtick is already known, find tickround = precision\n// to display in tick labels\n//   for numeric ticks, integer # digits after . to round to\n//   for date ticks, the last date part to show (y,m,d,H,M,S)\n//      or an integer # digits past seconds\n\n\nfunction autoTickRound(ax) {\n  var dtick = ax.dtick;\n  ax._tickexponent = 0;\n\n  if (!isNumeric(dtick) && typeof dtick !== 'string') {\n    dtick = 1;\n  }\n\n  if (ax.type === 'category' || ax.type === 'multicategory') {\n    ax._tickround = null;\n  }\n\n  if (ax.type === 'date') {\n    // If tick0 is unusual, give tickround a bit more information\n    // not necessarily *all* the information in tick0 though, if it's really odd\n    // minimal string length for tick0: 'd' is 10, 'M' is 16, 'S' is 19\n    // take off a leading minus (year < 0) and i (intercalary month) so length is consistent\n    var tick0ms = ax.r2l(ax.tick0);\n    var tick0str = ax.l2r(tick0ms).replace(/(^-|i)/g, '');\n    var tick0len = tick0str.length;\n\n    if (String(dtick).charAt(0) === 'M') {\n      // any tick0 more specific than a year: alway show the full date\n      if (tick0len > 10 || tick0str.substr(5) !== '01-01') ax._tickround = 'd'; // show the month unless ticks are full multiples of a year\n      else ax._tickround = +dtick.substr(1) % 12 === 0 ? 'y' : 'm';\n    } else if (dtick >= ONEDAY && tick0len <= 10 || dtick >= ONEDAY * 15) ax._tickround = 'd';else if (dtick >= ONEMIN && tick0len <= 16 || dtick >= ONEHOUR) ax._tickround = 'M';else if (dtick >= ONESEC && tick0len <= 19 || dtick >= ONEMIN) ax._tickround = 'S';else {\n      // tickround is a number of digits of fractional seconds\n      // of any two adjacent ticks, at least one will have the maximum fractional digits\n      // of all possible ticks - so take the max. length of tick0 and the next one\n      var tick1len = ax.l2r(tick0ms + dtick).replace(/^-/, '').length;\n      ax._tickround = Math.max(tick0len, tick1len) - 20; // We shouldn't get here... but in case there's a situation I'm\n      // not thinking of where tick0str and tick1str are identical or\n      // something, fall back on maximum precision\n\n      if (ax._tickround < 0) ax._tickround = 4;\n    }\n  } else if (isNumeric(dtick) || dtick.charAt(0) === 'L') {\n    // linear or log (except D1, D2)\n    var rng = ax.range.map(ax.r2d || Number);\n    if (!isNumeric(dtick)) dtick = Number(dtick.substr(1)); // 2 digits past largest digit of dtick\n\n    ax._tickround = 2 - Math.floor(Math.log(dtick) / Math.LN10 + 0.01);\n    var maxend = Math.max(Math.abs(rng[0]), Math.abs(rng[1]));\n    var rangeexp = Math.floor(Math.log(maxend) / Math.LN10 + 0.01);\n\n    if (Math.abs(rangeexp) > 3) {\n      if (isSIFormat(ax.exponentformat) && !beyondSI(rangeexp)) {\n        ax._tickexponent = 3 * Math.round((rangeexp - 1) / 3);\n      } else ax._tickexponent = rangeexp;\n    }\n  } else {\n    // D1 or D2 (log)\n    ax._tickround = null;\n  }\n} // months and years don't have constant millisecond values\n// (but a year is always 12 months so we only need months)\n// log-scale ticks are also not consistently spaced, except\n// for pure powers of 10\n// numeric ticks always have constant differences, other datetime ticks\n// can all be calculated as constant number of milliseconds\n\n\naxes.tickIncrement = function (x, dtick, axrev, calendar) {\n  var axSign = axrev ? -1 : 1; // includes linear, all dates smaller than month, and pure 10^n in log\n\n  if (isNumeric(dtick)) return x + axSign * dtick; // everything else is a string, one character plus a number\n\n  var tType = dtick.charAt(0);\n  var dtSigned = axSign * Number(dtick.substr(1)); // Dates: months (or years - see Lib.incrementMonth)\n\n  if (tType === 'M') return Lib.incrementMonth(x, dtSigned, calendar); // Log scales: Linear, Digits\n  else if (tType === 'L') return Math.log(Math.pow(10, x) + dtSigned) / Math.LN10; // log10 of 2,5,10, or all digits (logs just have to be\n    // close enough to round)\n    else if (tType === 'D') {\n        var tickset = dtick === 'D2' ? roundLog2 : roundLog1;\n        var x2 = x + axSign * 0.01;\n        var frac = Lib.roundUp(Lib.mod(x2, 1), tickset, axrev);\n        return Math.floor(x2) + Math.log(d3.round(Math.pow(10, frac), 1)) / Math.LN10;\n      } else throw 'unrecognized dtick ' + String(dtick);\n}; // calculate the first tick on an axis\n\n\naxes.tickFirst = function (ax) {\n  var r2l = ax.r2l || Number;\n  var rng = Lib.simpleMap(ax.range, r2l);\n  var axrev = rng[1] < rng[0];\n  var sRound = axrev ? Math.floor : Math.ceil; // add a tiny extra bit to make sure we get ticks\n  // that may have been rounded out\n\n  var r0 = rng[0] * 1.0001 - rng[1] * 0.0001;\n  var dtick = ax.dtick;\n  var tick0 = r2l(ax.tick0);\n\n  if (isNumeric(dtick)) {\n    var tmin = sRound((r0 - tick0) / dtick) * dtick + tick0; // make sure no ticks outside the category list\n\n    if (ax.type === 'category' || ax.type === 'multicategory') {\n      tmin = Lib.constrain(tmin, 0, ax._categories.length - 1);\n    }\n\n    return tmin;\n  }\n\n  var tType = dtick.charAt(0);\n  var dtNum = Number(dtick.substr(1)); // Dates: months (or years)\n\n  if (tType === 'M') {\n    var cnt = 0;\n    var t0 = tick0;\n    var t1, mult, newDTick; // This algorithm should work for *any* nonlinear (but close to linear!)\n    // tick spacing. Limit to 10 iterations, for gregorian months it's normally <=3.\n\n    while (cnt < 10) {\n      t1 = axes.tickIncrement(t0, dtick, axrev, ax.calendar);\n\n      if ((t1 - r0) * (t0 - r0) <= 0) {\n        // t1 and t0 are on opposite sides of r0! we've succeeded!\n        if (axrev) return Math.min(t0, t1);\n        return Math.max(t0, t1);\n      }\n\n      mult = (r0 - (t0 + t1) / 2) / (t1 - t0);\n      newDTick = tType + (Math.abs(Math.round(mult)) || 1) * dtNum;\n      t0 = axes.tickIncrement(t0, newDTick, mult < 0 ? !axrev : axrev, ax.calendar);\n      cnt++;\n    }\n\n    Lib.error('tickFirst did not converge', ax);\n    return t0;\n  } else if (tType === 'L') {\n    // Log scales: Linear, Digits\n    return Math.log(sRound((Math.pow(10, r0) - tick0) / dtNum) * dtNum + tick0) / Math.LN10;\n  } else if (tType === 'D') {\n    var tickset = dtick === 'D2' ? roundLog2 : roundLog1;\n    var frac = Lib.roundUp(Lib.mod(r0, 1), tickset, axrev);\n    return Math.floor(r0) + Math.log(d3.round(Math.pow(10, frac), 1)) / Math.LN10;\n  } else throw 'unrecognized dtick ' + String(dtick);\n}; // draw the text for one tick.\n// px,py are the location on gd.paper\n// prefix is there so the x axis ticks can be dropped a line\n// ax is the axis layout, x is the tick value\n// hover is a (truthy) flag for whether to show numbers with a bit\n// more precision for hovertext\n\n\naxes.tickText = function (ax, x, hover, noSuffixPrefix) {\n  var out = tickTextObj(ax, x);\n  var arrayMode = ax.tickmode === 'array';\n  var extraPrecision = hover || arrayMode;\n  var axType = ax.type; // TODO multicategory, if we allow ticktext / tickvals\n\n  var tickVal2l = axType === 'category' ? ax.d2l_noadd : ax.d2l;\n  var i;\n\n  if (arrayMode && Array.isArray(ax.ticktext)) {\n    var rng = Lib.simpleMap(ax.range, ax.r2l);\n    var minDiff = Math.abs(rng[1] - rng[0]) / 10000;\n\n    for (i = 0; i < ax.ticktext.length; i++) {\n      if (Math.abs(x - tickVal2l(ax.tickvals[i])) < minDiff) break;\n    }\n\n    if (i < ax.ticktext.length) {\n      out.text = String(ax.ticktext[i]);\n      return out;\n    }\n  }\n\n  function isHidden(showAttr) {\n    if (showAttr === undefined) return true;\n    if (hover) return showAttr === 'none';\n    var firstOrLast = {\n      first: ax._tmin,\n      last: ax._tmax\n    }[showAttr];\n    return showAttr !== 'all' && x !== firstOrLast;\n  }\n\n  var hideexp = hover ? 'never' : ax.exponentformat !== 'none' && isHidden(ax.showexponent) ? 'hide' : '';\n  if (axType === 'date') formatDate(ax, out, hover, extraPrecision);else if (axType === 'log') formatLog(ax, out, hover, extraPrecision, hideexp);else if (axType === 'category') formatCategory(ax, out);else if (axType === 'multicategory') formatMultiCategory(ax, out, hover);else if (isAngular(ax)) formatAngle(ax, out, hover, extraPrecision, hideexp);else formatLinear(ax, out, hover, extraPrecision, hideexp); // add prefix and suffix\n\n  if (!noSuffixPrefix) {\n    if (ax.tickprefix && !isHidden(ax.showtickprefix)) out.text = ax.tickprefix + out.text;\n    if (ax.ticksuffix && !isHidden(ax.showticksuffix)) out.text += ax.ticksuffix;\n  } // Setup ticks and grid lines boundaries\n  // at 1/2 a 'category' to the left/bottom\n\n\n  if (ax.tickson === 'boundaries' || ax.showdividers) {\n    var inbounds = function inbounds(v) {\n      var p = ax.l2p(v);\n      return p >= 0 && p <= ax._length ? v : null;\n    };\n\n    out.xbnd = [inbounds(out.x - 0.5), inbounds(out.x + ax.dtick - 0.5)];\n  }\n\n  return out;\n};\n/**\n * create text for a hover label on this axis, with special handling of\n * log axes (where negative values can't be displayed but can appear in hover text)\n *\n * @param {object} ax: the axis to format text for\n * @param {number} val: calcdata value to format\n * @param {Optional(number)} val2: a second value to display\n *\n * @returns {string} `val` formatted as a string appropriate to this axis, or\n *     `val` and `val2` as a range (ie '<val> - <val2>') if `val2` is provided and\n *     it's different from `val`.\n */\n\n\naxes.hoverLabelText = function (ax, val, val2) {\n  if (val2 !== BADNUM && val2 !== val) {\n    return axes.hoverLabelText(ax, val) + ' - ' + axes.hoverLabelText(ax, val2);\n  }\n\n  var logOffScale = ax.type === 'log' && val <= 0;\n  var tx = axes.tickText(ax, ax.c2l(logOffScale ? -val : val), 'hover').text;\n\n  if (logOffScale) {\n    return val === 0 ? '0' : MINUS_SIGN + tx;\n  } // TODO: should we do something special if the axis calendar and\n  // the data calendar are different? Somehow display both dates with\n  // their system names? Right now it will just display in the axis calendar\n  // but users could add the other one as text.\n\n\n  return tx;\n};\n\nfunction tickTextObj(ax, x, text) {\n  var tf = ax.tickfont || {};\n  return {\n    x: x,\n    dx: 0,\n    dy: 0,\n    text: text || '',\n    fontSize: tf.size,\n    font: tf.family,\n    fontColor: tf.color\n  };\n}\n\nfunction formatDate(ax, out, hover, extraPrecision) {\n  var tr = ax._tickround;\n  var fmt = hover && ax.hoverformat || axes.getTickFormat(ax);\n\n  if (extraPrecision) {\n    // second or sub-second precision: extra always shows max digits.\n    // for other fields, extra precision just adds one field.\n    if (isNumeric(tr)) tr = 4;else tr = {\n      y: 'm',\n      m: 'd',\n      d: 'M',\n      M: 'S',\n      S: 4\n    }[tr];\n  }\n\n  var dateStr = Lib.formatDate(out.x, fmt, tr, ax._dateFormat, ax.calendar, ax._extraFormat);\n  var headStr;\n  var splitIndex = dateStr.indexOf('\\n');\n\n  if (splitIndex !== -1) {\n    headStr = dateStr.substr(splitIndex + 1);\n    dateStr = dateStr.substr(0, splitIndex);\n  }\n\n  if (extraPrecision) {\n    // if extraPrecision led to trailing zeros, strip them off\n    // actually, this can lead to removing even more zeros than\n    // in the original rounding, but that's fine because in these\n    // contexts uniformity is not so important (if there's even\n    // anything to be uniform with!)\n    // can we remove the whole time part?\n    if (dateStr === '00:00:00' || dateStr === '00:00') {\n      dateStr = headStr;\n      headStr = '';\n    } else if (dateStr.length === 8) {\n      // strip off seconds if they're zero (zero fractional seconds\n      // are already omitted)\n      // but we never remove minutes and leave just hours\n      dateStr = dateStr.replace(/:00$/, '');\n    }\n  }\n\n  if (headStr) {\n    if (hover) {\n      // hover puts it all on one line, so headPart works best up front\n      // except for year headPart: turn this into \"Jan 1, 2000\" etc.\n      if (tr === 'd') dateStr += ', ' + headStr;else dateStr = headStr + (dateStr ? ', ' + dateStr : '');\n    } else if (!ax._inCalcTicks || headStr !== ax._prevDateHead) {\n      dateStr += '<br>' + headStr;\n      ax._prevDateHead = headStr;\n    }\n  }\n\n  out.text = dateStr;\n}\n\nfunction formatLog(ax, out, hover, extraPrecision, hideexp) {\n  var dtick = ax.dtick;\n  var x = out.x;\n  var tickformat = ax.tickformat;\n  var dtChar0 = typeof dtick === 'string' && dtick.charAt(0);\n\n  if (hideexp === 'never') {\n    // If this is a hover label, then we must *never* hide the exponent\n    // for the sake of display, which could give the wrong value by\n    // potentially many orders of magnitude. If hideexp was 'never', then\n    // it's now succeeded by preventing the other condition from automating\n    // this choice. Thus we can unset it so that the axis formatting takes\n    // precedence.\n    hideexp = '';\n  }\n\n  if (extraPrecision && dtChar0 !== 'L') {\n    dtick = 'L3';\n    dtChar0 = 'L';\n  }\n\n  if (tickformat || dtChar0 === 'L') {\n    out.text = numFormat(Math.pow(10, x), ax, hideexp, extraPrecision);\n  } else if (isNumeric(dtick) || dtChar0 === 'D' && Lib.mod(x + 0.01, 1) < 0.1) {\n    var p = Math.round(x);\n    var absP = Math.abs(p);\n    var exponentFormat = ax.exponentformat;\n\n    if (exponentFormat === 'power' || isSIFormat(exponentFormat) && beyondSI(p)) {\n      if (p === 0) out.text = 1;else if (p === 1) out.text = '10';else out.text = '10<sup>' + (p > 1 ? '' : MINUS_SIGN) + absP + '</sup>';\n      out.fontSize *= 1.25;\n    } else if ((exponentFormat === 'e' || exponentFormat === 'E') && absP > 2) {\n      out.text = '1' + exponentFormat + (p > 0 ? '+' : MINUS_SIGN) + absP;\n    } else {\n      out.text = numFormat(Math.pow(10, x), ax, '', 'fakehover');\n\n      if (dtick === 'D1' && ax._id.charAt(0) === 'y') {\n        out.dy -= out.fontSize / 6;\n      }\n    }\n  } else if (dtChar0 === 'D') {\n    out.text = String(Math.round(Math.pow(10, Lib.mod(x, 1))));\n    out.fontSize *= 0.75;\n  } else throw 'unrecognized dtick ' + String(dtick); // if 9's are printed on log scale, move the 10's away a bit\n\n\n  if (ax.dtick === 'D1') {\n    var firstChar = String(out.text).charAt(0);\n\n    if (firstChar === '0' || firstChar === '1') {\n      if (ax._id.charAt(0) === 'y') {\n        out.dx -= out.fontSize / 4;\n      } else {\n        out.dy += out.fontSize / 2;\n        out.dx += (ax.range[1] > ax.range[0] ? 1 : -1) * out.fontSize * (x < 0 ? 0.5 : 0.25);\n      }\n    }\n  }\n}\n\nfunction formatCategory(ax, out) {\n  var tt = ax._categories[Math.round(out.x)];\n\n  if (tt === undefined) tt = '';\n  out.text = String(tt);\n}\n\nfunction formatMultiCategory(ax, out, hover) {\n  var v = Math.round(out.x);\n  var cats = ax._categories[v] || [];\n  var tt = cats[1] === undefined ? '' : String(cats[1]);\n  var tt2 = cats[0] === undefined ? '' : String(cats[0]);\n\n  if (hover) {\n    // TODO is this what we want?\n    out.text = tt2 + ' - ' + tt;\n  } else {\n    // setup for secondary labels\n    out.text = tt;\n    out.text2 = tt2;\n  }\n}\n\nfunction formatLinear(ax, out, hover, extraPrecision, hideexp) {\n  if (hideexp === 'never') {\n    // If this is a hover label, then we must *never* hide the exponent\n    // for the sake of display, which could give the wrong value by\n    // potentially many orders of magnitude. If hideexp was 'never', then\n    // it's now succeeded by preventing the other condition from automating\n    // this choice. Thus we can unset it so that the axis formatting takes\n    // precedence.\n    hideexp = '';\n  } else if (ax.showexponent === 'all' && Math.abs(out.x / ax.dtick) < 1e-6) {\n    // don't add an exponent to zero if we're showing all exponents\n    // so the only reason you'd show an exponent on zero is if it's the\n    // ONLY tick to get an exponent (first or last)\n    hideexp = 'hide';\n  }\n\n  out.text = numFormat(out.x, ax, hideexp, extraPrecision);\n}\n\nfunction formatAngle(ax, out, hover, extraPrecision, hideexp) {\n  if (ax.thetaunit === 'radians' && !hover) {\n    var num = out.x / 180;\n\n    if (num === 0) {\n      out.text = '0';\n    } else {\n      var frac = num2frac(num);\n\n      if (frac[1] >= 100) {\n        out.text = numFormat(Lib.deg2rad(out.x), ax, hideexp, extraPrecision);\n      } else {\n        var isNeg = out.x < 0;\n\n        if (frac[1] === 1) {\n          if (frac[0] === 1) out.text = '';else out.text = frac[0] + '';\n        } else {\n          out.text = ['<sup>', frac[0], '</sup>', '', '<sub>', frac[1], '</sub>', ''].join('');\n        }\n\n        if (isNeg) out.text = MINUS_SIGN + out.text;\n      }\n    }\n  } else {\n    out.text = numFormat(out.x, ax, hideexp, extraPrecision);\n  }\n} // inspired by\n// https://github.com/yisibl/num2fraction/blob/master/index.js\n\n\nfunction num2frac(num) {\n  function almostEq(a, b) {\n    return Math.abs(a - b) <= 1e-6;\n  }\n\n  function findGCD(a, b) {\n    return almostEq(b, 0) ? a : findGCD(b, a % b);\n  }\n\n  function findPrecision(n) {\n    var e = 1;\n\n    while (!almostEq(Math.round(n * e) / e, n)) {\n      e *= 10;\n    }\n\n    return e;\n  }\n\n  var precision = findPrecision(num);\n  var number = num * precision;\n  var gcd = Math.abs(findGCD(number, precision));\n  return [// numerator\n  Math.round(number / gcd), // denominator\n  Math.round(precision / gcd)];\n} // format a number (tick value) according to the axis settings\n// new, more reliable procedure than d3.round or similar:\n// add half the rounding increment, then stringify and truncate\n// also automatically switch to sci. notation\n\n\nvar SIPREFIXES = ['f', 'p', 'n', '', 'm', '', 'k', 'M', 'G', 'T'];\n\nfunction isSIFormat(exponentFormat) {\n  return exponentFormat === 'SI' || exponentFormat === 'B';\n} // are we beyond the range of common SI prefixes?\n// 10^-16 -> 1x10^-16\n// 10^-15 -> 1f\n// ...\n// 10^14 -> 100T\n// 10^15 -> 1x10^15\n// 10^16 -> 1x10^16\n\n\nfunction beyondSI(exponent) {\n  return exponent > 14 || exponent < -15;\n}\n\nfunction numFormat(v, ax, fmtoverride, hover) {\n  var isNeg = v < 0; // max number of digits past decimal point to show\n\n  var tickRound = ax._tickround;\n  var exponentFormat = fmtoverride || ax.exponentformat || 'B';\n  var exponent = ax._tickexponent;\n  var tickformat = axes.getTickFormat(ax);\n  var separatethousands = ax.separatethousands; // special case for hover: set exponent just for this value, and\n  // add a couple more digits of precision over tick labels\n\n  if (hover) {\n    // make a dummy axis obj to get the auto rounding and exponent\n    var ah = {\n      exponentformat: exponentFormat,\n      dtick: ax.showexponent === 'none' ? ax.dtick : isNumeric(v) ? Math.abs(v) || 1 : 1,\n      // if not showing any exponents, don't change the exponent\n      // from what we calculate\n      range: ax.showexponent === 'none' ? ax.range.map(ax.r2d) : [0, v || 1]\n    };\n    autoTickRound(ah);\n    tickRound = (Number(ah._tickround) || 0) + 4;\n    exponent = ah._tickexponent;\n    if (ax.hoverformat) tickformat = ax.hoverformat;\n  }\n\n  if (tickformat) return ax._numFormat(tickformat)(v).replace(/-/g, MINUS_SIGN); // 'epsilon' - rounding increment\n\n  var e = Math.pow(10, -tickRound) / 2; // exponentFormat codes:\n  // 'e' (1.2e+6, default)\n  // 'E' (1.2E+6)\n  // 'SI' (1.2M)\n  // 'B' (same as SI except 10^9=B not G)\n  // 'none' (1200000)\n  // 'power' (1.2x10^6)\n  // 'hide' (1.2, use 3rd argument=='hide' to eg\n  //      only show exponent on last tick)\n\n  if (exponentFormat === 'none') exponent = 0; // take the sign out, put it back manually at the end\n  // - makes cases easier\n\n  v = Math.abs(v);\n\n  if (v < e) {\n    // 0 is just 0, but may get exponent if it's the last tick\n    v = '0';\n    isNeg = false;\n  } else {\n    v += e; // take out a common exponent, if any\n\n    if (exponent) {\n      v *= Math.pow(10, -exponent);\n      tickRound += exponent;\n    } // round the mantissa\n\n\n    if (tickRound === 0) v = String(Math.floor(v));else if (tickRound < 0) {\n      v = String(Math.round(v));\n      v = v.substr(0, v.length + tickRound);\n\n      for (var i = tickRound; i < 0; i++) {\n        v += '0';\n      }\n    } else {\n      v = String(v);\n      var dp = v.indexOf('.') + 1;\n      if (dp) v = v.substr(0, dp + tickRound).replace(/\\.?0+$/, '');\n    } // insert appropriate decimal point and thousands separator\n\n    v = Lib.numSeparate(v, ax._separators, separatethousands);\n  } // add exponent\n\n\n  if (exponent && exponentFormat !== 'hide') {\n    if (isSIFormat(exponentFormat) && beyondSI(exponent)) exponentFormat = 'power';\n    var signedExponent;\n    if (exponent < 0) signedExponent = MINUS_SIGN + -exponent;else if (exponentFormat !== 'power') signedExponent = '+' + exponent;else signedExponent = String(exponent);\n\n    if (exponentFormat === 'e' || exponentFormat === 'E') {\n      v += exponentFormat + signedExponent;\n    } else if (exponentFormat === 'power') {\n      v += '10<sup>' + signedExponent + '</sup>';\n    } else if (exponentFormat === 'B' && exponent === 9) {\n      v += 'B';\n    } else if (isSIFormat(exponentFormat)) {\n      v += SIPREFIXES[exponent / 3 + 5];\n    }\n  } // put sign back in and return\n  // replace standard minus character (which is technically a hyphen)\n  // with a true minus sign\n\n\n  if (isNeg) return MINUS_SIGN + v;\n  return v;\n}\n\naxes.getTickFormat = function (ax) {\n  var i;\n\n  function convertToMs(dtick) {\n    return typeof dtick !== 'string' ? dtick : Number(dtick.replace('M', '')) * ONEAVGMONTH;\n  }\n\n  function compareLogTicks(left, right) {\n    var priority = ['L', 'D'];\n\n    if (typeof left === typeof right) {\n      if (typeof left === 'number') {\n        return left - right;\n      } else {\n        var leftPriority = priority.indexOf(left.charAt(0));\n        var rightPriority = priority.indexOf(right.charAt(0));\n\n        if (leftPriority === rightPriority) {\n          return Number(left.replace(/(L|D)/g, '')) - Number(right.replace(/(L|D)/g, ''));\n        } else {\n          return leftPriority - rightPriority;\n        }\n      }\n    } else {\n      return typeof left === 'number' ? 1 : -1;\n    }\n  }\n\n  function isProperStop(dtick, range, convert) {\n    var convertFn = convert || function (x) {\n      return x;\n    };\n\n    var leftDtick = range[0];\n    var rightDtick = range[1];\n    return (!leftDtick && typeof leftDtick !== 'number' || convertFn(leftDtick) <= convertFn(dtick)) && (!rightDtick && typeof rightDtick !== 'number' || convertFn(rightDtick) >= convertFn(dtick));\n  }\n\n  function isProperLogStop(dtick, range) {\n    var isLeftDtickNull = range[0] === null;\n    var isRightDtickNull = range[1] === null;\n    var isDtickInRangeLeft = compareLogTicks(dtick, range[0]) >= 0;\n    var isDtickInRangeRight = compareLogTicks(dtick, range[1]) <= 0;\n    return (isLeftDtickNull || isDtickInRangeLeft) && (isRightDtickNull || isDtickInRangeRight);\n  }\n\n  var tickstop, stopi;\n\n  if (ax.tickformatstops && ax.tickformatstops.length > 0) {\n    switch (ax.type) {\n      case 'date':\n      case 'linear':\n        {\n          for (i = 0; i < ax.tickformatstops.length; i++) {\n            stopi = ax.tickformatstops[i];\n\n            if (stopi.enabled && isProperStop(ax.dtick, stopi.dtickrange, convertToMs)) {\n              tickstop = stopi;\n              break;\n            }\n          }\n\n          break;\n        }\n\n      case 'log':\n        {\n          for (i = 0; i < ax.tickformatstops.length; i++) {\n            stopi = ax.tickformatstops[i];\n\n            if (stopi.enabled && isProperLogStop(ax.dtick, stopi.dtickrange)) {\n              tickstop = stopi;\n              break;\n            }\n          }\n\n          break;\n        }\n\n      default:\n    }\n  }\n\n  return tickstop ? tickstop.value : ax.tickformat;\n}; // getSubplots - extract all subplot IDs we need\n// as an array of items like 'xy', 'x2y', 'x2y2'...\n// sorted by x (x,x2,x3...) then y\n// optionally restrict to only subplots containing axis object ax\n//\n// NOTE: this is currently only used OUTSIDE plotly.js (toolpanel, webapp)\n// ideally we get rid of it there (or just copy this there) and remove it here\n\n\naxes.getSubplots = function (gd, ax) {\n  var subplotObj = gd._fullLayout._subplots;\n  var allSubplots = subplotObj.cartesian.concat(subplotObj.gl2d || []);\n  var out = ax ? axes.findSubplotsWithAxis(allSubplots, ax) : allSubplots;\n  out.sort(function (a, b) {\n    var aParts = a.substr(1).split('y');\n    var bParts = b.substr(1).split('y');\n    if (aParts[0] === bParts[0]) return +aParts[1] - +bParts[1];\n    return +aParts[0] - +bParts[0];\n  });\n  return out;\n}; // find all subplots with axis 'ax'\n// NOTE: this is only used in axes.getSubplots (only used outside plotly.js) and\n// gl2d/convert (where it restricts axis subplots to only those with gl2d)\n\n\naxes.findSubplotsWithAxis = function (subplots, ax) {\n  var axMatch = new RegExp(ax._id.charAt(0) === 'x' ? '^' + ax._id + 'y' : ax._id + '$');\n  var subplotsWithAx = [];\n\n  for (var i = 0; i < subplots.length; i++) {\n    var sp = subplots[i];\n    if (axMatch.test(sp)) subplotsWithAx.push(sp);\n  }\n\n  return subplotsWithAx;\n}; // makeClipPaths: prepare clipPaths for all single axes and all possible xy pairings\n\n\naxes.makeClipPaths = function (gd) {\n  var fullLayout = gd._fullLayout; // for more info: https://github.com/plotly/plotly.js/issues/2595\n\n  if (fullLayout._hasOnlyLargeSploms) return;\n  var fullWidth = {\n    _offset: 0,\n    _length: fullLayout.width,\n    _id: ''\n  };\n  var fullHeight = {\n    _offset: 0,\n    _length: fullLayout.height,\n    _id: ''\n  };\n  var xaList = axes.list(gd, 'x', true);\n  var yaList = axes.list(gd, 'y', true);\n  var clipList = [];\n  var i, j;\n\n  for (i = 0; i < xaList.length; i++) {\n    clipList.push({\n      x: xaList[i],\n      y: fullHeight\n    });\n\n    for (j = 0; j < yaList.length; j++) {\n      if (i === 0) clipList.push({\n        x: fullWidth,\n        y: yaList[j]\n      });\n      clipList.push({\n        x: xaList[i],\n        y: yaList[j]\n      });\n    }\n  } // selectors don't work right with camelCase tags,\n  // have to use class instead\n  // https://groups.google.com/forum/#!topic/d3-js/6EpAzQ2gU9I\n\n\n  var axClips = fullLayout._clips.selectAll('.axesclip').data(clipList, function (d) {\n    return d.x._id + d.y._id;\n  });\n\n  axClips.enter().append('clipPath').classed('axesclip', true).attr('id', function (d) {\n    return 'clip' + fullLayout._uid + d.x._id + d.y._id;\n  }).append('rect');\n  axClips.exit().remove();\n  axClips.each(function (d) {\n    d3.select(this).select('rect').attr({\n      x: d.x._offset || 0,\n      y: d.y._offset || 0,\n      width: d.x._length || 1,\n      height: d.y._length || 1\n    });\n  });\n};\n/**\n * Main multi-axis drawing routine!\n *\n * @param {DOM element} gd : graph div\n * @param {string or array of strings} arg : polymorphic argument\n * @param {object} opts:\n * - @param {boolean} skipTitle : optional flag to skip axis title draw/update\n *\n * Signature 1: Axes.draw(gd, 'redraw')\n *   use this to clear and redraw all axes on graph\n *\n * Signature 2: Axes.draw(gd, '')\n *   use this to draw all axes on graph w/o the selectAll().remove()\n *   of the 'redraw' signature\n *\n * Signature 3: Axes.draw(gd, [axId, axId2, ...])\n *   where the items are axis id string,\n *   use this to update multiple axes in one call\n *\n * N.B draw updates:\n * - ax._r (stored range for use by zoom/pan)\n * - ax._rl (stored linearized range for use by zoom/pan)\n */\n\n\naxes.draw = function (gd, arg, opts) {\n  var fullLayout = gd._fullLayout;\n\n  if (arg === 'redraw') {\n    fullLayout._paper.selectAll('g.subplot').each(function (d) {\n      var id = d[0];\n      var plotinfo = fullLayout._plots[id];\n      var xa = plotinfo.xaxis;\n      var ya = plotinfo.yaxis;\n      plotinfo.xaxislayer.selectAll('.' + xa._id + 'tick').remove();\n      plotinfo.yaxislayer.selectAll('.' + ya._id + 'tick').remove();\n      plotinfo.xaxislayer.selectAll('.' + xa._id + 'tick2').remove();\n      plotinfo.yaxislayer.selectAll('.' + ya._id + 'tick2').remove();\n      plotinfo.xaxislayer.selectAll('.' + xa._id + 'divider').remove();\n      plotinfo.yaxislayer.selectAll('.' + ya._id + 'divider').remove();\n      if (plotinfo.gridlayer) plotinfo.gridlayer.selectAll('path').remove();\n      if (plotinfo.zerolinelayer) plotinfo.zerolinelayer.selectAll('path').remove();\n\n      fullLayout._infolayer.select('.g-' + xa._id + 'title').remove();\n\n      fullLayout._infolayer.select('.g-' + ya._id + 'title').remove();\n    });\n  }\n\n  var axList = !arg || arg === 'redraw' ? axes.listIds(gd) : arg;\n  return Lib.syncOrAsync(axList.map(function (axId) {\n    return function () {\n      if (!axId) return;\n      var ax = axes.getFromId(gd, axId);\n      var axDone = axes.drawOne(gd, ax, opts);\n      ax._r = ax.range.slice();\n      ax._rl = Lib.simpleMap(ax._r, ax.r2l);\n      return axDone;\n    };\n  }));\n};\n/**\n * Draw one cartesian axis\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n * @param {object} opts\n * - @param {boolean} skipTitle (set to true to skip axis title draw call)\n *\n * Depends on:\n * - ax._mainSubplot (from linkSubplots)\n * - ax._mainAxis\n * - ax._anchorAxis\n * - ax._subplotsWith\n * - ax._counterDomainMin, ax._counterDomainMax (optionally, from linkSubplots)\n * - ax._tickAngles (on redraw only, old value relinked during supplyDefaults)\n * - ax._mainLinePosition (from lsInner)\n * - ax._mainMirrorPosition\n * - ax._linepositions\n *\n * Fills in:\n * - ax._vals:\n * - ax._gridVals:\n * - ax._selections:\n * - ax._tickAngles:\n * - ax._depth (when required only):\n * - and calls ax.setScale\n */\n\n\naxes.drawOne = function (gd, ax, opts) {\n  opts = opts || {};\n  var i, sp, plotinfo;\n  ax.setScale();\n  var fullLayout = gd._fullLayout;\n  var axId = ax._id;\n  var axLetter = axId.charAt(0);\n  var counterLetter = axes.counterLetter(axId);\n  var mainPlotinfo = fullLayout._plots[ax._mainSubplot]; // this happens when updating matched group with 'missing' axes\n\n  if (!mainPlotinfo) return;\n  var mainAxLayer = mainPlotinfo[axLetter + 'axislayer'];\n  var mainLinePosition = ax._mainLinePosition;\n  var mainMirrorPosition = ax._mainMirrorPosition;\n  var vals = ax._vals = axes.calcTicks(ax); // Add a couple of axis properties that should cause us to recreate\n  // elements. Used in d3 data function.\n\n  var axInfo = [ax.mirror, mainLinePosition, mainMirrorPosition].join('_');\n\n  for (i = 0; i < vals.length; i++) {\n    vals[i].axInfo = axInfo;\n  } // stash selections to avoid DOM queries e.g.\n  // - stash tickLabels selection, so that drawTitle can use it to scoot title\n\n\n  ax._selections = {}; // stash tick angle (including the computed 'auto' values) per tick-label class\n  // linkup 'previous' tick angles on redraws\n\n  if (ax._tickAngles) ax._prevTickAngles = ax._tickAngles;\n  ax._tickAngles = {}; // measure [in px] between axis position and outward-most part of bounding box\n  // (touching either the tick label or ticks)\n  // depth can be expansive to compute, so we only do so when required\n\n  ax._depth = null; // calcLabelLevelBbox can be expensive,\n  // so make sure to not call it twice during the same Axes.drawOne call\n  // by stashing label-level bounding boxes per tick-label class\n\n  var llbboxes = {};\n\n  function getLabelLevelBbox(suffix) {\n    var cls = axId + (suffix || 'tick');\n    if (!llbboxes[cls]) llbboxes[cls] = calcLabelLevelBbox(ax, cls);\n    return llbboxes[cls];\n  }\n\n  if (!ax.visible) return;\n  var transFn = axes.makeTransFn(ax);\n  var tickVals; // We remove zero lines, grid lines, and inside ticks if they're within 1px of the end\n  // The key case here is removing zero lines when the axis bound is zero\n\n  var valsClipped;\n\n  if (ax.tickson === 'boundaries') {\n    var boundaryVals = getBoundaryVals(ax, vals);\n    valsClipped = axes.clipEnds(ax, boundaryVals);\n    tickVals = ax.ticks === 'inside' ? valsClipped : boundaryVals;\n  } else {\n    valsClipped = axes.clipEnds(ax, vals);\n    tickVals = ax.ticks === 'inside' ? valsClipped : vals;\n  }\n\n  var gridVals = ax._gridVals = valsClipped;\n  var dividerVals = getDividerVals(ax, vals);\n\n  if (!fullLayout._hasOnlyLargeSploms) {\n    var subplotsWithAx = ax._subplotsWith; // keep track of which subplots (by main counter axis) we've already\n    // drawn grids for, so we don't overdraw overlaying subplots\n\n    var finishedGrids = {};\n\n    for (i = 0; i < subplotsWithAx.length; i++) {\n      sp = subplotsWithAx[i];\n      plotinfo = fullLayout._plots[sp];\n      var counterAxis = plotinfo[counterLetter + 'axis'];\n      var mainCounterID = counterAxis._mainAxis._id;\n      if (finishedGrids[mainCounterID]) continue;\n      finishedGrids[mainCounterID] = 1;\n      var gridPath = axLetter === 'x' ? 'M0,' + counterAxis._offset + 'v' + counterAxis._length : 'M' + counterAxis._offset + ',0h' + counterAxis._length;\n      axes.drawGrid(gd, ax, {\n        vals: gridVals,\n        counterAxis: counterAxis,\n        layer: plotinfo.gridlayer.select('.' + axId),\n        path: gridPath,\n        transFn: transFn\n      });\n      axes.drawZeroLine(gd, ax, {\n        counterAxis: counterAxis,\n        layer: plotinfo.zerolinelayer,\n        path: gridPath,\n        transFn: transFn\n      });\n    }\n  }\n\n  var tickSigns = axes.getTickSigns(ax);\n  var tickSubplots = [];\n\n  if (ax.ticks) {\n    var mainTickPath = axes.makeTickPath(ax, mainLinePosition, tickSigns[2]);\n    var mirrorTickPath;\n    var fullTickPath;\n\n    if (ax._anchorAxis && ax.mirror && ax.mirror !== true) {\n      mirrorTickPath = axes.makeTickPath(ax, mainMirrorPosition, tickSigns[3]);\n      fullTickPath = mainTickPath + mirrorTickPath;\n    } else {\n      mirrorTickPath = '';\n      fullTickPath = mainTickPath;\n    }\n\n    var tickPath;\n\n    if (ax.showdividers && ax.ticks === 'outside' && ax.tickson === 'boundaries') {\n      var dividerLookup = {};\n\n      for (i = 0; i < dividerVals.length; i++) {\n        dividerLookup[dividerVals[i].x] = 1;\n      }\n\n      tickPath = function tickPath(d) {\n        return dividerLookup[d.x] ? mirrorTickPath : fullTickPath;\n      };\n    } else {\n      tickPath = fullTickPath;\n    }\n\n    axes.drawTicks(gd, ax, {\n      vals: tickVals,\n      layer: mainAxLayer,\n      path: tickPath,\n      transFn: transFn\n    });\n\n    if (ax.mirror === 'allticks') {\n      tickSubplots = Object.keys(ax._linepositions || {});\n    }\n  }\n\n  for (i = 0; i < tickSubplots.length; i++) {\n    sp = tickSubplots[i];\n    plotinfo = fullLayout._plots[sp]; // [bottom or left, top or right], free and main are handled above\n\n    var linepositions = ax._linepositions[sp] || [];\n    var spTickPath = axes.makeTickPath(ax, linepositions[0], tickSigns[0]) + axes.makeTickPath(ax, linepositions[1], tickSigns[1]);\n    axes.drawTicks(gd, ax, {\n      vals: tickVals,\n      layer: plotinfo[axLetter + 'axislayer'],\n      path: spTickPath,\n      transFn: transFn\n    });\n  }\n\n  var seq = []; // tick labels - for now just the main labels.\n  // TODO: mirror labels, esp for subplots\n\n  seq.push(function () {\n    return axes.drawLabels(gd, ax, {\n      vals: vals,\n      layer: mainAxLayer,\n      transFn: transFn,\n      labelFns: axes.makeLabelFns(ax, mainLinePosition)\n    });\n  });\n\n  if (ax.type === 'multicategory') {\n    var pad = {\n      x: 2,\n      y: 10\n    }[axLetter];\n    seq.push(function () {\n      var bboxKey = {\n        x: 'height',\n        y: 'width'\n      }[axLetter];\n      var standoff = getLabelLevelBbox()[bboxKey] + pad + (ax._tickAngles[axId + 'tick'] ? ax.tickfont.size * LINE_SPACING : 0);\n      return axes.drawLabels(gd, ax, {\n        vals: getSecondaryLabelVals(ax, vals),\n        layer: mainAxLayer,\n        cls: axId + 'tick2',\n        repositionOnUpdate: true,\n        secondary: true,\n        transFn: transFn,\n        labelFns: axes.makeLabelFns(ax, mainLinePosition + standoff * tickSigns[4])\n      });\n    });\n    seq.push(function () {\n      ax._depth = tickSigns[4] * (getLabelLevelBbox('tick2')[ax.side] - mainLinePosition);\n      return drawDividers(gd, ax, {\n        vals: dividerVals,\n        layer: mainAxLayer,\n        path: axes.makeTickPath(ax, mainLinePosition, tickSigns[4], ax._depth),\n        transFn: transFn\n      });\n    });\n  } else if (ax.title.hasOwnProperty('standoff')) {\n    seq.push(function () {\n      ax._depth = tickSigns[4] * (getLabelLevelBbox()[ax.side] - mainLinePosition);\n    });\n  }\n\n  var hasRangeSlider = Registry.getComponentMethod('rangeslider', 'isVisible')(ax);\n  seq.push(function () {\n    var s = ax.side.charAt(0);\n    var sMirror = OPPOSITE_SIDE[ax.side].charAt(0);\n    var pos = axes.getPxPosition(gd, ax);\n    var outsideTickLen = ax.ticks === 'outside' ? ax.ticklen : 0;\n    var llbbox;\n    var push;\n    var mirrorPush;\n    var rangeSliderPush;\n\n    if (ax.automargin || hasRangeSlider) {\n      if (ax.type === 'multicategory') {\n        llbbox = getLabelLevelBbox('tick2');\n      } else {\n        llbbox = getLabelLevelBbox();\n\n        if (axLetter === 'x' && s === 'b') {\n          ax._depth = Math.max(llbbox.width > 0 ? llbbox.bottom - pos : 0, outsideTickLen);\n        }\n      }\n    }\n\n    if (ax.automargin) {\n      push = {\n        x: 0,\n        y: 0,\n        r: 0,\n        l: 0,\n        t: 0,\n        b: 0\n      };\n      var domainIndices = [0, 1];\n\n      if (axLetter === 'x') {\n        if (s === 'b') {\n          push[s] = ax._depth;\n        } else {\n          push[s] = ax._depth = Math.max(llbbox.width > 0 ? pos - llbbox.top : 0, outsideTickLen);\n          domainIndices.reverse();\n        }\n\n        if (llbbox.width > 0) {\n          var rExtra = llbbox.right - (ax._offset + ax._length);\n\n          if (rExtra > 0) {\n            push.xr = 1;\n            push.r = rExtra;\n          }\n\n          var lExtra = ax._offset - llbbox.left;\n\n          if (lExtra > 0) {\n            push.xl = 0;\n            push.l = lExtra;\n          }\n        }\n      } else {\n        if (s === 'l') {\n          push[s] = ax._depth = Math.max(llbbox.height > 0 ? pos - llbbox.left : 0, outsideTickLen);\n        } else {\n          push[s] = ax._depth = Math.max(llbbox.height > 0 ? llbbox.right - pos : 0, outsideTickLen);\n          domainIndices.reverse();\n        }\n\n        if (llbbox.height > 0) {\n          var bExtra = llbbox.bottom - (ax._offset + ax._length);\n\n          if (bExtra > 0) {\n            push.yb = 0;\n            push.b = bExtra;\n          }\n\n          var tExtra = ax._offset - llbbox.top;\n\n          if (tExtra > 0) {\n            push.yt = 1;\n            push.t = tExtra;\n          }\n        }\n      }\n\n      push[counterLetter] = ax.anchor === 'free' ? ax.position : ax._anchorAxis.domain[domainIndices[0]];\n\n      if (ax.title.text !== fullLayout._dfltTitle[axLetter]) {\n        push[s] += approxTitleDepth(ax) + (ax.title.standoff || 0);\n      }\n\n      if (ax.mirror && ax.anchor !== 'free') {\n        mirrorPush = {\n          x: 0,\n          y: 0,\n          r: 0,\n          l: 0,\n          t: 0,\n          b: 0\n        };\n        mirrorPush[sMirror] = ax.linewidth;\n        if (ax.mirror && ax.mirror !== true) mirrorPush[sMirror] += outsideTickLen;\n\n        if (ax.mirror === true || ax.mirror === 'ticks') {\n          mirrorPush[counterLetter] = ax._anchorAxis.domain[domainIndices[1]];\n        } else if (ax.mirror === 'all' || ax.mirror === 'allticks') {\n          mirrorPush[counterLetter] = [ax._counterDomainMin, ax._counterDomainMax][domainIndices[1]];\n        }\n      }\n    }\n\n    if (hasRangeSlider) {\n      rangeSliderPush = Registry.getComponentMethod('rangeslider', 'autoMarginOpts')(gd, ax);\n    }\n\n    Plots.autoMargin(gd, axAutoMarginID(ax), push);\n    Plots.autoMargin(gd, axMirrorAutoMarginID(ax), mirrorPush);\n    Plots.autoMargin(gd, rangeSliderAutoMarginID(ax), rangeSliderPush);\n  });\n\n  if (!opts.skipTitle && !(hasRangeSlider && ax.side === 'bottom')) {\n    seq.push(function () {\n      return drawTitle(gd, ax);\n    });\n  }\n\n  return Lib.syncOrAsync(seq);\n};\n\nfunction getBoundaryVals(ax, vals) {\n  var out = [];\n  var i; // boundaryVals are never used for labels;\n  // no need to worry about the other tickTextObj keys\n\n  var _push = function _push(d, bndIndex) {\n    var xb = d.xbnd[bndIndex];\n\n    if (xb !== null) {\n      out.push(Lib.extendFlat({}, d, {\n        x: xb\n      }));\n    }\n  };\n\n  if (vals.length) {\n    for (i = 0; i < vals.length; i++) {\n      _push(vals[i], 0);\n    }\n\n    _push(vals[i - 1], 1);\n  }\n\n  return out;\n}\n\nfunction getSecondaryLabelVals(ax, vals) {\n  var out = [];\n  var lookup = {};\n\n  for (var i = 0; i < vals.length; i++) {\n    var d = vals[i];\n\n    if (lookup[d.text2]) {\n      lookup[d.text2].push(d.x);\n    } else {\n      lookup[d.text2] = [d.x];\n    }\n  }\n\n  for (var k in lookup) {\n    out.push(tickTextObj(ax, Lib.interp(lookup[k], 0.5), k));\n  }\n\n  return out;\n}\n\nfunction getDividerVals(ax, vals) {\n  var out = [];\n  var i, current; // never used for labels;\n  // no need to worry about the other tickTextObj keys\n\n  var _push = function _push(d, bndIndex) {\n    var xb = d.xbnd[bndIndex];\n\n    if (xb !== null) {\n      out.push(Lib.extendFlat({}, d, {\n        x: xb\n      }));\n    }\n  };\n\n  if (ax.showdividers && vals.length) {\n    for (i = 0; i < vals.length; i++) {\n      var d = vals[i];\n\n      if (d.text2 !== current) {\n        _push(d, 0);\n      }\n\n      current = d.text2;\n    }\n\n    _push(vals[i - 1], 1);\n  }\n\n  return out;\n}\n\nfunction calcLabelLevelBbox(ax, cls) {\n  var top, bottom;\n  var left, right;\n\n  if (ax._selections[cls].size()) {\n    top = Infinity;\n    bottom = -Infinity;\n    left = Infinity;\n    right = -Infinity;\n\n    ax._selections[cls].each(function () {\n      var thisLabel = selectTickLabel(this); // Use parent node <g.(x|y)tick>, to make Drawing.bBox\n      // retrieve a bbox computed with transform info\n      //\n      // To improve perf, it would be nice to use `thisLabel.node()`\n      // (like in fixLabelOverlaps) instead and use Axes.getPxPosition\n      // together with the makeLabelFns outputs and `tickangle`\n      // to compute one bbox per (tick value x tick style)\n\n      var bb = Drawing.bBox(thisLabel.node().parentNode);\n      top = Math.min(top, bb.top);\n      bottom = Math.max(bottom, bb.bottom);\n      left = Math.min(left, bb.left);\n      right = Math.max(right, bb.right);\n    });\n  } else {\n    top = 0;\n    bottom = 0;\n    left = 0;\n    right = 0;\n  }\n\n  return {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    height: bottom - top,\n    width: right - left\n  };\n}\n/**\n * Which direction do the 'ax.side' values, and free ticks go?\n *\n * @param {object} ax (full) axis object\n *  - {string} _id (starting with 'x' or 'y')\n *  - {string} side\n *  - {string} ticks\n * @return {array} all entries are either -1 or 1\n *  - [0]: sign for top/right ticks (i.e. negative SVG direction)\n *  - [1]: sign for bottom/left ticks (i.e. positive SVG direction)\n *  - [2]: sign for ticks corresponding to 'ax.side'\n *  - [3]: sign for ticks mirroring 'ax.side'\n *  - [4]: sign of arrow starting at axis pointing towards margin\n */\n\n\naxes.getTickSigns = function (ax) {\n  var axLetter = ax._id.charAt(0);\n\n  var sideOpposite = {\n    x: 'top',\n    y: 'right'\n  }[axLetter];\n  var main = ax.side === sideOpposite ? 1 : -1;\n  var out = [-1, 1, main, -main]; // then we flip if outside XOR y axis\n\n  if (ax.ticks !== 'inside' === (axLetter === 'x')) {\n    out = out.map(function (v) {\n      return -v;\n    });\n  } // independent of `ticks`; do not flip this one\n\n\n  if (ax.side) {\n    out.push({\n      l: -1,\n      t: -1,\n      r: 1,\n      b: 1\n    }[ax.side.charAt(0)]);\n  }\n\n  return out;\n};\n/**\n * Make axis translate transform function\n *\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {number} _offset\n *  - {fn} l2p\n * @return {fn} function of calcTicks items\n */\n\n\naxes.makeTransFn = function (ax) {\n  var axLetter = ax._id.charAt(0);\n\n  var offset = ax._offset;\n  return axLetter === 'x' ? function (d) {\n    return 'translate(' + (offset + ax.l2p(d.x)) + ',0)';\n  } : function (d) {\n    return 'translate(0,' + (offset + ax.l2p(d.x)) + ')';\n  };\n};\n/**\n * Make axis tick path string\n *\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {number} ticklen\n *  - {number} linewidth\n * @param {number} shift along direction of ticklen\n * @param {1 or -1} sgn tick sign\n * @param {number (optional)} len tick length\n * @return {string}\n */\n\n\naxes.makeTickPath = function (ax, shift, sgn, len) {\n  len = len !== undefined ? len : ax.ticklen;\n\n  var axLetter = ax._id.charAt(0);\n\n  var pad = (ax.linewidth || 1) / 2;\n  return axLetter === 'x' ? 'M0,' + (shift + pad * sgn) + 'v' + len * sgn : 'M' + (shift + pad * sgn) + ',0h' + len * sgn;\n};\n/**\n * Make axis tick label x, y and anchor functions\n *\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {string} ticks\n *  - {number} ticklen\n *  - {string} side\n *  - {number} linewidth\n *  - {number} tickfont.size\n *  - {boolean} showline\n * @param {number} shift\n * @param {number} angle [in degrees] ...\n * @return {object}\n *  - {fn} xFn\n *  - {fn} yFn\n *  - {fn} anchorFn\n *  - {fn} heightFn\n *  - {number} labelStandoff (gap parallel to ticks)\n *  - {number} labelShift (gap perpendicular to ticks)\n */\n\n\naxes.makeLabelFns = function (ax, shift, angle) {\n  var axLetter = ax._id.charAt(0);\n\n  var ticksOnOutsideLabels = ax.tickson !== 'boundaries' && ax.ticks === 'outside';\n  var labelStandoff = 0;\n  var labelShift = 0;\n\n  if (ticksOnOutsideLabels) {\n    labelStandoff += ax.ticklen;\n  }\n\n  if (angle && ax.ticks === 'outside') {\n    var rad = Lib.deg2rad(angle);\n    labelStandoff = ax.ticklen * Math.cos(rad) + 1;\n    labelShift = ax.ticklen * Math.sin(rad);\n  }\n\n  if (ax.showticklabels && (ticksOnOutsideLabels || ax.showline)) {\n    labelStandoff += 0.2 * ax.tickfont.size;\n  }\n\n  labelStandoff += (ax.linewidth || 1) / 2;\n  var out = {\n    labelStandoff: labelStandoff,\n    labelShift: labelShift\n  };\n  var x0, y0, ff, flipIt;\n\n  if (axLetter === 'x') {\n    flipIt = ax.side === 'bottom' ? 1 : -1;\n    x0 = labelShift * flipIt;\n    y0 = shift + labelStandoff * flipIt;\n    ff = ax.side === 'bottom' ? 1 : -0.2;\n\n    out.xFn = function (d) {\n      return d.dx + x0;\n    };\n\n    out.yFn = function (d) {\n      return d.dy + y0 + d.fontSize * ff;\n    };\n\n    out.anchorFn = function (d, a) {\n      if (!isNumeric(a) || a === 0 || a === 180) {\n        return 'middle';\n      }\n\n      return a * flipIt < 0 ? 'end' : 'start';\n    };\n\n    out.heightFn = function (d, a, h) {\n      return a < -60 || a > 60 ? -0.5 * h : ax.side === 'top' ? -h : 0;\n    };\n  } else if (axLetter === 'y') {\n    flipIt = ax.side === 'right' ? 1 : -1;\n    x0 = labelStandoff;\n    y0 = -labelShift * flipIt;\n    ff = Math.abs(ax.tickangle) === 90 ? 0.5 : 0;\n\n    out.xFn = function (d) {\n      return d.dx + shift + (x0 + d.fontSize * ff) * flipIt;\n    };\n\n    out.yFn = function (d) {\n      return d.dy + y0 + d.fontSize * MID_SHIFT;\n    };\n\n    out.anchorFn = function (d, a) {\n      if (isNumeric(a) && Math.abs(a) === 90) {\n        return 'middle';\n      }\n\n      return ax.side === 'right' ? 'start' : 'end';\n    };\n\n    out.heightFn = function (d, a, h) {\n      a *= ax.side === 'left' ? 1 : -1;\n      return a < -30 ? -h : a < 30 ? -0.5 * h : 0;\n    };\n  }\n\n  return out;\n};\n\nfunction tickDataFn(d) {\n  return [d.text, d.x, d.axInfo, d.font, d.fontSize, d.fontColor].join('_');\n}\n/**\n * Draw axis ticks\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {string} ticks\n *  - {number} linewidth\n *  - {string} tickcolor\n * @param {object} opts\n * - {array of object} vals (calcTicks output-like)\n * - {d3 selection} layer\n * - {string or fn} path\n * - {fn} transFn\n * - {boolean} crisp (set to false to unset crisp-edge SVG rendering)\n */\n\n\naxes.drawTicks = function (gd, ax, opts) {\n  opts = opts || {};\n  var cls = ax._id + 'tick';\n  var ticks = opts.layer.selectAll('path.' + cls).data(ax.ticks ? opts.vals : [], tickDataFn);\n  ticks.exit().remove();\n  ticks.enter().append('path').classed(cls, 1).classed('ticks', 1).classed('crisp', opts.crisp !== false).call(Color.stroke, ax.tickcolor).style('stroke-width', Drawing.crispRound(gd, ax.tickwidth, 1) + 'px').attr('d', opts.path);\n  ticks.attr('transform', opts.transFn);\n};\n/**\n * Draw axis grid\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {boolean} showgrid\n *  - {string} gridcolor\n *  - {string} gridwidth\n *  - {boolean} zeroline\n *  - {string} type\n *  - {string} dtick\n * @param {object} opts\n * - {array of object} vals (calcTicks output-like)\n * - {d3 selection} layer\n * - {object} counterAxis (full axis object corresponding to counter axis)\n *     optional - only required if this axis supports zero lines\n * - {string or fn} path\n * - {fn} transFn\n * - {boolean} crisp (set to false to unset crisp-edge SVG rendering)\n */\n\n\naxes.drawGrid = function (gd, ax, opts) {\n  opts = opts || {};\n  var cls = ax._id + 'grid';\n  var vals = opts.vals;\n  var counterAx = opts.counterAxis;\n\n  if (ax.showgrid === false) {\n    vals = [];\n  } else if (counterAx && axes.shouldShowZeroLine(gd, ax, counterAx)) {\n    var isArrayMode = ax.tickmode === 'array';\n\n    for (var i = 0; i < vals.length; i++) {\n      var xi = vals[i].x;\n\n      if (isArrayMode ? !xi : Math.abs(xi) < ax.dtick / 100) {\n        vals = vals.slice(0, i).concat(vals.slice(i + 1)); // In array mode you can in principle have multiple\n        // ticks at 0, so test them all. Otherwise once we found\n        // one we can stop.\n\n        if (isArrayMode) i--;else break;\n      }\n    }\n  }\n\n  var grid = opts.layer.selectAll('path.' + cls).data(vals, tickDataFn);\n  grid.exit().remove();\n  grid.enter().append('path').classed(cls, 1).classed('crisp', opts.crisp !== false);\n  ax._gw = Drawing.crispRound(gd, ax.gridwidth, 1);\n  grid.attr('transform', opts.transFn).attr('d', opts.path).call(Color.stroke, ax.gridcolor || '#ddd').style('stroke-width', ax._gw + 'px');\n  if (typeof opts.path === 'function') grid.attr('d', opts.path);\n};\n/**\n * Draw axis zero-line\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {boolean} zeroline\n *  - {number} zerolinewidth\n *  - {string} zerolinecolor\n *  - {number (optional)} _gridWidthCrispRound\n * @param {object} opts\n * - {d3 selection} layer\n * - {object} counterAxis (full axis object corresponding to counter axis)\n * - {string or fn} path\n * - {fn} transFn\n * - {boolean} crisp (set to false to unset crisp-edge SVG rendering)\n */\n\n\naxes.drawZeroLine = function (gd, ax, opts) {\n  opts = opts || opts;\n  var cls = ax._id + 'zl';\n  var show = axes.shouldShowZeroLine(gd, ax, opts.counterAxis);\n  var zl = opts.layer.selectAll('path.' + cls).data(show ? [{\n    x: 0,\n    id: ax._id\n  }] : []);\n  zl.exit().remove();\n  zl.enter().append('path').classed(cls, 1).classed('zl', 1).classed('crisp', opts.crisp !== false).each(function () {\n    // use the fact that only one element can enter to trigger a sort.\n    // If several zerolines enter at the same time we will sort once per,\n    // but generally this should be a minimal overhead.\n    opts.layer.selectAll('path').sort(function (da, db) {\n      return axisIds.idSort(da.id, db.id);\n    });\n  });\n  zl.attr('transform', opts.transFn).attr('d', opts.path).call(Color.stroke, ax.zerolinecolor || Color.defaultLine).style('stroke-width', Drawing.crispRound(gd, ax.zerolinewidth, ax._gw || 1) + 'px');\n};\n/**\n * Draw axis tick labels\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {boolean} showticklabels\n *  - {number} tickangle\n *  - {object (optional)} _selections\n *  - {object} (optional)} _tickAngles\n *  - {object} (optional)} _prevTickAngles\n * @param {object} opts\n * - {array of object} vals (calcTicks output-like)\n * - {d3 selection} layer\n * - {string (optional)} cls (node className)\n * - {boolean} repositionOnUpdate (set to true to reposition update selection)\n * - {boolean} secondary\n * - {fn} transFn\n * - {object} labelFns\n *  + {fn} xFn\n *  + {fn} yFn\n *  + {fn} anchorFn\n *  + {fn} heightFn\n */\n\n\naxes.drawLabels = function (gd, ax, opts) {\n  opts = opts || {};\n  var fullLayout = gd._fullLayout;\n  var axId = ax._id;\n  var axLetter = axId.charAt(0);\n  var cls = opts.cls || axId + 'tick';\n  var vals = opts.vals;\n  var labelFns = opts.labelFns;\n  var tickAngle = opts.secondary ? 0 : ax.tickangle;\n  var prevAngle = (ax._prevTickAngles || {})[cls];\n  var tickLabels = opts.layer.selectAll('g.' + cls).data(ax.showticklabels ? vals : [], tickDataFn);\n  var labelsReady = [];\n  tickLabels.enter().append('g').classed(cls, 1).append('text') // only so tex has predictable alignment that we can\n  // alter later\n  .attr('text-anchor', 'middle').each(function (d) {\n    var thisLabel = d3.select(this);\n    var newPromise = gd._promises.length;\n    thisLabel.call(svgTextUtils.positionText, labelFns.xFn(d), labelFns.yFn(d)).call(Drawing.font, d.font, d.fontSize, d.fontColor).text(d.text).call(svgTextUtils.convertToTspans, gd);\n\n    if (gd._promises[newPromise]) {\n      // if we have an async label, we'll deal with that\n      // all here so take it out of gd._promises and\n      // instead position the label and promise this in\n      // labelsReady\n      labelsReady.push(gd._promises.pop().then(function () {\n        positionLabels(thisLabel, tickAngle);\n      }));\n    } else {\n      // sync label: just position it now.\n      positionLabels(thisLabel, tickAngle);\n    }\n  });\n  tickLabels.exit().remove();\n\n  if (opts.repositionOnUpdate) {\n    tickLabels.each(function (d) {\n      d3.select(this).select('text').call(svgTextUtils.positionText, labelFns.xFn(d), labelFns.yFn(d));\n    });\n  }\n\n  function positionLabels(s, angle) {\n    s.each(function (d) {\n      var thisLabel = d3.select(this);\n      var mathjaxGroup = thisLabel.select('.text-math-group');\n      var anchor = labelFns.anchorFn(d, angle);\n      var transform = opts.transFn.call(thisLabel.node(), d) + (isNumeric(angle) && +angle !== 0 ? ' rotate(' + angle + ',' + labelFns.xFn(d) + ',' + (labelFns.yFn(d) - d.fontSize / 2) + ')' : ''); // how much to shift a multi-line label to center it vertically.\n\n      var nLines = svgTextUtils.lineCount(thisLabel);\n      var lineHeight = LINE_SPACING * d.fontSize;\n      var anchorHeight = labelFns.heightFn(d, isNumeric(angle) ? +angle : 0, (nLines - 1) * lineHeight);\n\n      if (anchorHeight) {\n        transform += ' translate(0, ' + anchorHeight + ')';\n      }\n\n      if (mathjaxGroup.empty()) {\n        thisLabel.select('text').attr({\n          transform: transform,\n          'text-anchor': anchor\n        });\n      } else {\n        var mjWidth = Drawing.bBox(mathjaxGroup.node()).width;\n        var mjShift = mjWidth * {\n          end: -0.5,\n          start: 0.5\n        }[anchor];\n        mathjaxGroup.attr('transform', transform + (mjShift ? 'translate(' + mjShift + ',0)' : ''));\n      }\n    });\n  } // make sure all labels are correctly positioned at their base angle\n  // the positionLabels call above is only for newly drawn labels.\n  // do this without waiting, using the last calculated angle to\n  // minimize flicker, then do it again when we know all labels are\n  // there, putting back the prescribed angle to check for overlaps.\n\n\n  positionLabels(tickLabels, prevAngle + 1 ? prevAngle : tickAngle);\n\n  function allLabelsReady() {\n    return labelsReady.length && Promise.all(labelsReady);\n  }\n\n  var autoangle = null;\n\n  function fixLabelOverlaps() {\n    positionLabels(tickLabels, tickAngle); // check for auto-angling if x labels overlap\n    // don't auto-angle at all for log axes with\n    // base and digit format\n\n    if (vals.length && axLetter === 'x' && !isNumeric(tickAngle) && (ax.type !== 'log' || String(ax.dtick).charAt(0) !== 'D')) {\n      autoangle = 0;\n      var maxFontSize = 0;\n      var lbbArray = [];\n      var i;\n      tickLabels.each(function (d) {\n        maxFontSize = Math.max(maxFontSize, d.fontSize);\n        var x = ax.l2p(d.x);\n        var thisLabel = selectTickLabel(this);\n        var bb = Drawing.bBox(thisLabel.node());\n        lbbArray.push({\n          // ignore about y, just deal with x overlaps\n          top: 0,\n          bottom: 10,\n          height: 10,\n          left: x - bb.width / 2,\n          // impose a 2px gap\n          right: x + bb.width / 2 + 2,\n          width: bb.width + 2\n        });\n      });\n\n      if ((ax.tickson === 'boundaries' || ax.showdividers) && !opts.secondary) {\n        var gap = 2;\n        if (ax.ticks) gap += ax.tickwidth / 2; // TODO should secondary labels also fall into this fix-overlap regime?\n\n        for (i = 0; i < lbbArray.length; i++) {\n          var xbnd = vals[i].xbnd;\n          var lbb = lbbArray[i];\n\n          if (xbnd[0] !== null && lbb.left - ax.l2p(xbnd[0]) < gap || xbnd[1] !== null && ax.l2p(xbnd[1]) - lbb.right < gap) {\n            autoangle = 90;\n            break;\n          }\n        }\n      } else {\n        var vLen = vals.length;\n        var tickSpacing = Math.abs((vals[vLen - 1].x - vals[0].x) * ax._m) / (vLen - 1);\n        var rotate90 = tickSpacing < maxFontSize * 2.5 || ax.type === 'multicategory'; // any overlap at all - set 30 degrees or 90 degrees\n\n        for (i = 0; i < lbbArray.length - 1; i++) {\n          if (Lib.bBoxIntersect(lbbArray[i], lbbArray[i + 1])) {\n            autoangle = rotate90 ? 90 : 30;\n            break;\n          }\n        }\n      }\n\n      if (autoangle) {\n        positionLabels(tickLabels, autoangle);\n      }\n    }\n  }\n\n  if (ax._selections) {\n    ax._selections[cls] = tickLabels;\n  }\n\n  var seq = [allLabelsReady]; // N.B. during auto-margin redraws, if the axis fixed its label overlaps\n  // by rotating 90 degrees, do not attempt to re-fix its label overlaps\n  // as this can lead to infinite redraw loops!\n\n  if (ax.automargin && fullLayout._redrawFromAutoMarginCount && prevAngle === 90) {\n    autoangle = 90;\n    seq.push(function () {\n      positionLabels(tickLabels, prevAngle);\n    });\n  } else {\n    seq.push(fixLabelOverlaps);\n  } // save current tick angle for future redraws\n\n\n  if (ax._tickAngles) {\n    seq.push(function () {\n      ax._tickAngles[cls] = autoangle === null ? isNumeric(tickAngle) ? tickAngle : 0 : autoangle;\n    });\n  }\n\n  var done = Lib.syncOrAsync(seq);\n  if (done && done.then) gd._promises.push(done);\n  return done;\n};\n/**\n * Draw axis dividers\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {string} showdividers\n *  - {number} dividerwidth\n *  - {string} dividercolor\n * @param {object} opts\n * - {array of object} vals (calcTicks output-like)\n * - {d3 selection} layer\n * - {fn} path\n * - {fn} transFn\n */\n\n\nfunction drawDividers(gd, ax, opts) {\n  var cls = ax._id + 'divider';\n  var vals = opts.vals;\n  var dividers = opts.layer.selectAll('path.' + cls).data(vals, tickDataFn);\n  dividers.exit().remove();\n  dividers.enter().insert('path', ':first-child').classed(cls, 1).classed('crisp', 1).call(Color.stroke, ax.dividercolor).style('stroke-width', Drawing.crispRound(gd, ax.dividerwidth, 1) + 'px');\n  dividers.attr('transform', opts.transFn).attr('d', opts.path);\n}\n/**\n * Get axis position in px, that is the distance for the graph's\n * top (left) edge for x (y) axes.\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {string} side\n *  if anchored:\n *  - {object} _anchorAxis\n *  Otherwise:\n *  - {number} position\n * @return {number}\n */\n\n\naxes.getPxPosition = function (gd, ax) {\n  var gs = gd._fullLayout._size;\n\n  var axLetter = ax._id.charAt(0);\n\n  var side = ax.side;\n  var anchorAxis;\n\n  if (ax.anchor !== 'free') {\n    anchorAxis = ax._anchorAxis;\n  } else if (axLetter === 'x') {\n    anchorAxis = {\n      _offset: gs.t + (1 - (ax.position || 0)) * gs.h,\n      _length: 0\n    };\n  } else if (axLetter === 'y') {\n    anchorAxis = {\n      _offset: gs.l + (ax.position || 0) * gs.w,\n      _length: 0\n    };\n  }\n\n  if (side === 'top' || side === 'left') {\n    return anchorAxis._offset;\n  } else if (side === 'bottom' || side === 'right') {\n    return anchorAxis._offset + anchorAxis._length;\n  }\n};\n/**\n * Approximate axis title depth (w/o computing its bounding box)\n *\n * @param {object} ax (full) axis object\n *  - {string} title.text\n *  - {number} title.font.size\n *  - {number} title.standoff\n * @return {number} (in px)\n */\n\n\nfunction approxTitleDepth(ax) {\n  var fontSize = ax.title.font.size;\n  var extraLines = (ax.title.text.match(svgTextUtils.BR_TAG_ALL) || []).length;\n\n  if (ax.title.hasOwnProperty('standoff')) {\n    return extraLines ? fontSize * (CAP_SHIFT + extraLines * LINE_SPACING) : fontSize * CAP_SHIFT;\n  } else {\n    return extraLines ? fontSize * (extraLines + 1) * LINE_SPACING : fontSize;\n  }\n}\n/**\n * Draw axis title, compute default standoff if necessary\n *\n * @param {DOM element} gd\n * @param {object} ax (full) axis object\n *  - {string} _id\n *  - {string} _name\n *  - {string} side\n *  - {number} title.font.size\n *  - {object} _selections\n *\n *  - {number} _depth\n *  - {number} title.standoff\n *  OR\n *  - {number} linewidth\n *  - {boolean} showticklabels\n */\n\n\nfunction drawTitle(gd, ax) {\n  var fullLayout = gd._fullLayout;\n  var axId = ax._id;\n  var axLetter = axId.charAt(0);\n  var fontSize = ax.title.font.size;\n  var titleStandoff;\n\n  if (ax.title.hasOwnProperty('standoff')) {\n    titleStandoff = ax._depth + ax.title.standoff + approxTitleDepth(ax);\n  } else {\n    if (ax.type === 'multicategory') {\n      titleStandoff = ax._depth;\n    } else {\n      var offsetBase = 1.5;\n      titleStandoff = 10 + fontSize * offsetBase + (ax.linewidth ? ax.linewidth - 1 : 0);\n    }\n\n    if (axLetter === 'x') {\n      titleStandoff += ax.side === 'top' ? fontSize * (ax.showticklabels ? 1 : 0) : fontSize * (ax.showticklabels ? 1.5 : 0.5);\n    } else {\n      titleStandoff += ax.side === 'right' ? fontSize * (ax.showticklabels ? 1 : 0.5) : fontSize * (ax.showticklabels ? 0.5 : 0);\n    }\n  }\n\n  var pos = axes.getPxPosition(gd, ax);\n  var transform, x, y;\n\n  if (axLetter === 'x') {\n    x = ax._offset + ax._length / 2;\n    y = ax.side === 'top' ? pos - titleStandoff : pos + titleStandoff;\n  } else {\n    y = ax._offset + ax._length / 2;\n    x = ax.side === 'right' ? pos + titleStandoff : pos - titleStandoff;\n    transform = {\n      rotate: '-90',\n      offset: 0\n    };\n  }\n\n  var avoid;\n\n  if (ax.type !== 'multicategory') {\n    var tickLabels = ax._selections[ax._id + 'tick'];\n    avoid = {\n      selection: tickLabels,\n      side: ax.side\n    };\n\n    if (tickLabels && tickLabels.node() && tickLabels.node().parentNode) {\n      var translation = Drawing.getTranslate(tickLabels.node().parentNode);\n      avoid.offsetLeft = translation.x;\n      avoid.offsetTop = translation.y;\n    }\n\n    if (ax.title.hasOwnProperty('standoff')) {\n      avoid.pad = 0;\n    }\n  }\n\n  return Titles.draw(gd, axId + 'title', {\n    propContainer: ax,\n    propName: ax._name + '.title.text',\n    placeholder: fullLayout._dfltTitle[axLetter],\n    avoid: avoid,\n    transform: transform,\n    attributes: {\n      x: x,\n      y: y,\n      'text-anchor': 'middle'\n    }\n  });\n}\n\naxes.shouldShowZeroLine = function (gd, ax, counterAxis) {\n  var rng = Lib.simpleMap(ax.range, ax.r2l);\n  return rng[0] * rng[1] <= 0 && ax.zeroline && (ax.type === 'linear' || ax.type === '-') && (clipEnds(ax, 0) || !anyCounterAxLineAtZero(gd, ax, counterAxis, rng) || hasBarsOrFill(gd, ax));\n};\n\naxes.clipEnds = function (ax, vals) {\n  return vals.filter(function (d) {\n    return clipEnds(ax, d.x);\n  });\n};\n\nfunction clipEnds(ax, l) {\n  var p = ax.l2p(l);\n  return p > 1 && p < ax._length - 1;\n}\n\nfunction anyCounterAxLineAtZero(gd, ax, counterAxis, rng) {\n  var mainCounterAxis = counterAxis._mainAxis;\n  if (!mainCounterAxis) return;\n  var fullLayout = gd._fullLayout;\n\n  var axLetter = ax._id.charAt(0);\n\n  var counterLetter = axes.counterLetter(ax._id);\n  var zeroPosition = ax._offset + (Math.abs(rng[0]) < Math.abs(rng[1]) === (axLetter === 'x') ? 0 : ax._length);\n\n  function lineNearZero(ax2) {\n    if (!ax2.showline || !ax2.linewidth) return false;\n    var tolerance = Math.max((ax2.linewidth + ax.zerolinewidth) / 2, 1);\n\n    function closeEnough(pos2) {\n      return typeof pos2 === 'number' && Math.abs(pos2 - zeroPosition) < tolerance;\n    }\n\n    if (closeEnough(ax2._mainLinePosition) || closeEnough(ax2._mainMirrorPosition)) {\n      return true;\n    }\n\n    var linePositions = ax2._linepositions || {};\n\n    for (var k in linePositions) {\n      if (closeEnough(linePositions[k][0]) || closeEnough(linePositions[k][1])) {\n        return true;\n      }\n    }\n  }\n\n  var plotinfo = fullLayout._plots[counterAxis._mainSubplot];\n\n  if (!(plotinfo.mainplotinfo || plotinfo).overlays.length) {\n    return lineNearZero(counterAxis, zeroPosition);\n  }\n\n  var counterLetterAxes = axes.list(gd, counterLetter);\n\n  for (var i = 0; i < counterLetterAxes.length; i++) {\n    var counterAxis2 = counterLetterAxes[i];\n\n    if (counterAxis2._mainAxis === mainCounterAxis && lineNearZero(counterAxis2, zeroPosition)) {\n      return true;\n    }\n  }\n}\n\nfunction hasBarsOrFill(gd, ax) {\n  var fullData = gd._fullData;\n  var subplot = ax._mainSubplot;\n\n  var axLetter = ax._id.charAt(0);\n\n  for (var i = 0; i < fullData.length; i++) {\n    var trace = fullData[i];\n\n    if (trace.visible === true && trace.xaxis + trace.yaxis === subplot) {\n      if (Registry.traceIs(trace, 'bar-like') && trace.orientation === {\n        x: 'h',\n        y: 'v'\n      }[axLetter]) return true;\n      if (trace.fill && trace.fill.charAt(trace.fill.length - 1) === axLetter) return true;\n    }\n  }\n\n  return false;\n}\n\nfunction selectTickLabel(gTick) {\n  var s = d3.select(gTick);\n  var mj = s.select('.text-math-group');\n  return mj.empty() ? s.select('text') : mj;\n}\n/**\n * Find all margin pushers for 2D axes and reserve them for later use\n * Both label and rangeslider automargin calculations happen later so\n * we need to explicitly allow their ids in order to not delete them.\n *\n * TODO: can we pull the actual automargin calls forward to avoid this hack?\n * We're probably also doing multiple redraws in this case, would be faster\n * if we can just do the whole calculation ahead of time and draw once.\n */\n\n\naxes.allowAutoMargin = function (gd) {\n  var axList = axes.list(gd, '', true);\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n\n    if (ax.automargin) {\n      Plots.allowAutoMargin(gd, axAutoMarginID(ax));\n\n      if (ax.mirror) {\n        Plots.allowAutoMargin(gd, axMirrorAutoMarginID(ax));\n      }\n    }\n\n    if (Registry.getComponentMethod('rangeslider', 'isVisible')(ax)) {\n      Plots.allowAutoMargin(gd, rangeSliderAutoMarginID(ax));\n    }\n  }\n};\n\nfunction axAutoMarginID(ax) {\n  return ax._id + '.automargin';\n}\n\nfunction axMirrorAutoMarginID(ax) {\n  return axAutoMarginID(ax) + '.mirror';\n}\n\nfunction rangeSliderAutoMarginID(ax) {\n  return ax._id + '.rangeslider';\n} // swap all the presentation attributes of the axes showing these traces\n\n\naxes.swap = function (gd, traces) {\n  var axGroups = makeAxisGroups(gd, traces);\n\n  for (var i = 0; i < axGroups.length; i++) {\n    swapAxisGroup(gd, axGroups[i].x, axGroups[i].y);\n  }\n};\n\nfunction makeAxisGroups(gd, traces) {\n  var groups = [];\n  var i, j;\n\n  for (i = 0; i < traces.length; i++) {\n    var groupsi = [];\n    var xi = gd._fullData[traces[i]].xaxis;\n    var yi = gd._fullData[traces[i]].yaxis;\n    if (!xi || !yi) continue; // not a 2D cartesian trace?\n\n    for (j = 0; j < groups.length; j++) {\n      if (groups[j].x.indexOf(xi) !== -1 || groups[j].y.indexOf(yi) !== -1) {\n        groupsi.push(j);\n      }\n    }\n\n    if (!groupsi.length) {\n      groups.push({\n        x: [xi],\n        y: [yi]\n      });\n      continue;\n    }\n\n    var group0 = groups[groupsi[0]];\n    var groupj;\n\n    if (groupsi.length > 1) {\n      for (j = 1; j < groupsi.length; j++) {\n        groupj = groups[groupsi[j]];\n        mergeAxisGroups(group0.x, groupj.x);\n        mergeAxisGroups(group0.y, groupj.y);\n      }\n    }\n\n    mergeAxisGroups(group0.x, [xi]);\n    mergeAxisGroups(group0.y, [yi]);\n  }\n\n  return groups;\n}\n\nfunction mergeAxisGroups(intoSet, fromSet) {\n  for (var i = 0; i < fromSet.length; i++) {\n    if (intoSet.indexOf(fromSet[i]) === -1) intoSet.push(fromSet[i]);\n  }\n}\n\nfunction swapAxisGroup(gd, xIds, yIds) {\n  var xFullAxes = [];\n  var yFullAxes = [];\n  var layout = gd.layout;\n  var i, j;\n\n  for (i = 0; i < xIds.length; i++) {\n    xFullAxes.push(axes.getFromId(gd, xIds[i]));\n  }\n\n  for (i = 0; i < yIds.length; i++) {\n    yFullAxes.push(axes.getFromId(gd, yIds[i]));\n  }\n\n  var allAxKeys = Object.keys(axAttrs);\n  var noSwapAttrs = ['anchor', 'domain', 'overlaying', 'position', 'side', 'tickangle', 'editType'];\n  var numericTypes = ['linear', 'log'];\n\n  for (i = 0; i < allAxKeys.length; i++) {\n    var keyi = allAxKeys[i];\n    var xVal = xFullAxes[0][keyi];\n    var yVal = yFullAxes[0][keyi];\n    var allEqual = true;\n    var coerceLinearX = false;\n    var coerceLinearY = false;\n\n    if (keyi.charAt(0) === '_' || typeof xVal === 'function' || noSwapAttrs.indexOf(keyi) !== -1) {\n      continue;\n    }\n\n    for (j = 1; j < xFullAxes.length && allEqual; j++) {\n      var xVali = xFullAxes[j][keyi];\n\n      if (keyi === 'type' && numericTypes.indexOf(xVal) !== -1 && numericTypes.indexOf(xVali) !== -1 && xVal !== xVali) {\n        // type is special - if we find a mixture of linear and log,\n        // coerce them all to linear on flipping\n        coerceLinearX = true;\n      } else if (xVali !== xVal) allEqual = false;\n    }\n\n    for (j = 1; j < yFullAxes.length && allEqual; j++) {\n      var yVali = yFullAxes[j][keyi];\n\n      if (keyi === 'type' && numericTypes.indexOf(yVal) !== -1 && numericTypes.indexOf(yVali) !== -1 && yVal !== yVali) {\n        // type is special - if we find a mixture of linear and log,\n        // coerce them all to linear on flipping\n        coerceLinearY = true;\n      } else if (yFullAxes[j][keyi] !== yVal) allEqual = false;\n    }\n\n    if (allEqual) {\n      if (coerceLinearX) layout[xFullAxes[0]._name].type = 'linear';\n      if (coerceLinearY) layout[yFullAxes[0]._name].type = 'linear';\n      swapAxisAttrs(layout, keyi, xFullAxes, yFullAxes, gd._fullLayout._dfltTitle);\n    }\n  } // now swap x&y for any annotations anchored to these x & y\n\n\n  for (i = 0; i < gd._fullLayout.annotations.length; i++) {\n    var ann = gd._fullLayout.annotations[i];\n\n    if (xIds.indexOf(ann.xref) !== -1 && yIds.indexOf(ann.yref) !== -1) {\n      Lib.swapAttrs(layout.annotations[i], ['?']);\n    }\n  }\n}\n\nfunction swapAxisAttrs(layout, key, xFullAxes, yFullAxes, dfltTitle) {\n  // in case the value is the default for either axis,\n  // look at the first axis in each list and see if\n  // this key's value is undefined\n  var np = Lib.nestedProperty;\n  var xVal = np(layout[xFullAxes[0]._name], key).get();\n  var yVal = np(layout[yFullAxes[0]._name], key).get();\n  var i;\n\n  if (key === 'title') {\n    // special handling of placeholder titles\n    if (xVal && xVal.text === dfltTitle.x) {\n      xVal.text = dfltTitle.y;\n    }\n\n    if (yVal && yVal.text === dfltTitle.y) {\n      yVal.text = dfltTitle.x;\n    }\n  }\n\n  for (i = 0; i < xFullAxes.length; i++) {\n    np(layout, xFullAxes[i]._name + '.' + key).set(yVal);\n  }\n\n  for (i = 0; i < yFullAxes.length; i++) {\n    np(layout, yFullAxes[i]._name + '.' + key).set(xVal);\n  }\n}\n\nfunction isAngular(ax) {\n  return ax._id === 'angularaxis';\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar BADNUM = require('../../constants/numerical').BADNUM;\n\nmodule.exports = function autoType(array, calendar, opts) {\n  opts = opts || {};\n  if (!opts.noMultiCategory && multiCategory(array)) return 'multicategory';\n  if (moreDates(array, calendar)) return 'date';\n  if (category(array)) return 'category';\n  if (linearOK(array)) return 'linear';else return '-';\n}; // is there at least one number in array? If not, we should leave\n// ax.type empty so it can be autoset later\n\n\nfunction linearOK(array) {\n  if (!array) return false;\n\n  for (var i = 0; i < array.length; i++) {\n    if (isNumeric(array[i])) return true;\n  }\n\n  return false;\n} // does the array a have mostly dates rather than numbers?\n// note: some values can be neither (such as blanks, text)\n// 2- or 4-digit integers can be both, so require twice as many\n// dates as non-dates, to exclude cases with mostly 2 & 4 digit\n// numbers and a few dates\n// as with categories, consider DISTINCT values only.\n\n\nfunction moreDates(a, calendar) {\n  // test at most 1000 points, evenly spaced\n  var inc = Math.max(1, (a.length - 1) / 1000);\n  var dcnt = 0;\n  var ncnt = 0;\n  var seen = {};\n\n  for (var i = 0; i < a.length; i += inc) {\n    var ai = a[Math.round(i)];\n    var stri = String(ai);\n    if (seen[stri]) continue;\n    seen[stri] = 1;\n    if (Lib.isDateTime(ai, calendar)) dcnt += 1;\n    if (isNumeric(ai)) ncnt += 1;\n  }\n\n  return dcnt > ncnt * 2;\n} // are the (x,y)-values in gd.data mostly text?\n// require twice as many DISTINCT categories as distinct numbers\n\n\nfunction category(a) {\n  // test at most 1000 points\n  var inc = Math.max(1, (a.length - 1) / 1000);\n  var curvenums = 0;\n  var curvecats = 0;\n  var seen = {};\n\n  for (var i = 0; i < a.length; i += inc) {\n    var ai = a[Math.round(i)];\n    var stri = String(ai);\n    if (seen[stri]) continue;\n    seen[stri] = 1;\n    if (typeof ai === 'boolean') curvecats++;else if (Lib.cleanNumber(ai) !== BADNUM) curvenums++;else if (typeof ai === 'string') curvecats++;\n  }\n\n  return curvecats > curvenums * 2;\n} // very-loose requirements for multicategory,\n// trace modules that should never auto-type to multicategory\n// should be declared with 'noMultiCategory'\n\n\nfunction multiCategory(a) {\n  return Lib.isArrayOrTypedArray(a[0]) && Lib.isArrayOrTypedArray(a[1]);\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar identity = require('./identity');\n\nfunction wrap(d) {\n  return [d];\n}\n\nmodule.exports = {\n  // The D3 data binding concept and the General Update Pattern promotes the idea of\n  // traversing into the scenegraph by using the `.data(fun, keyFun)` call.\n  // The `fun` is most often a `repeat`, ie. the elements beneath a `<g>` element need\n  // access to the same data, or a `descend`, which fans a scenegraph node into a bunch of\n  // of elements, e.g. points, lines, rows, requiring an array as input.\n  // The role of the `keyFun` is to identify what elements are being entered/exited/updated,\n  // otherwise D3 reverts to using a plain index which would screw up `transition`s.\n  keyFun: function keyFun(d) {\n    return d.key;\n  },\n  repeat: wrap,\n  descend: identity,\n  // Plotly.js uses a convention of storing the actual contents of the `calcData` as the\n  // element zero of a container array. These helpers are just used for clarity as a\n  // newcomer to the codebase may not know what the `[0]` is, and whether there can be further\n  // elements (not atm).\n  wrap: wrap,\n  unwrap: function unwrap(d) {\n    return d[0];\n  }\n};","export default function (x, y) {\n  var nodes;\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = sx / n - x, sy = sy / n - y, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","export default function () {\n  return (Math.random() - 0.5) * 1e-6;\n}","export default function (d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | xp >= xm));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d,\n      i,\n      n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  } // If there were no (valid) points, abort.\n\n\n  if (x0 > x1 || y0 > y1) return this; // Expand the tree to cover the new points.\n\n  this.cover(x0, y0).cover(x1, y1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1; // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else {\n      var z = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n        i = (y < y0) << 1 | x < x0;\n        parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n\n        switch (i) {\n          case 0:\n            x1 = x0 + z, y1 = y0 + z;\n            break;\n\n          case 1:\n            x0 = x1 - z, y1 = y0 + z;\n            break;\n\n          case 2:\n            x1 = x0 + z, y0 = y1 - z;\n            break;\n\n          case 3:\n            x0 = x1 - z, y0 = y1 - z;\n            break;\n        }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}","export default function (node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","export function defaultY(d) {\n  return d[1];\n}\nexport default function (_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}","import \"core-js/modules/es6.array.find\";\nimport tree_add, { addAll as tree_addAll } from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, { defaultX } from \"./x.js\";\nimport tree_y, { defaultY } from \"./y.js\";\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(4)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(4)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function (radius) {\n  var nodes,\n      radii,\n      strength = 1,\n      iterations = 1;\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i,\n        n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data,\n          rj = quad.r,\n          r = ri + rj;\n\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n\n          if (l < r * r) {\n            if (x === 0) x = jiggle(), l += x * x;\n            if (y === 0) y = jiggle(), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n\n        return;\n      }\n\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    radii = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}","import Quad from \"./quad.js\";\nexport default function (x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (y1 = q.y0) > y3 || (x2 = q.x1) < x0 || (y2 = q.y1) < y0) continue; // Bisect the current quadrant.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n      quads.push(new Quad(node[3], xm, ym, x2, y2), new Quad(node[2], x1, ym, xm, y2), new Quad(node[1], xm, y1, x2, ym), new Quad(node[0], x1, y1, xm, ym)); // Visit the closest quadrant first.\n\n      if (i = (y >= ym) << 1 | x >= xm) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n        var dx = x - +this._x.call(null, node.data),\n            dy = y - +this._y.call(null, node.data),\n            d2 = dx * dx + dy * dy;\n\n        if (d2 < radius) {\n          var d = Math.sqrt(radius = d2);\n          x0 = x - d, y0 = y - d;\n          x3 = x + d, y3 = y + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 3] || parent[i + 2 & 3] || parent[i + 3 & 3]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3]) && node === (parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      y0,\n      x1,\n      y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n\n  return this;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      next = [],\n      q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          y0 = q.y0,\n          x1 = q.x1,\n          y1 = q.y1,\n          xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n\n  return this;\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { map } from \"d3-collection\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"missing: \" + nodeId);\n  return node;\n}\n\nexport default function (links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      iterations = 1;\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle();\n        y = target.y + target.vy - source.y - source.vy || jiggle();\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = map(nodes, id),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.links = function (_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function (_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function (_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nvar noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _ || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","import \"core-js/modules/es6.function.bind\";\nvar frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { dispatch } from \"d3-dispatch\";\nimport { map } from \"d3-collection\";\nimport { timer } from \"d3-timer\";\nexport function x(d) {\n  return d.x;\n}\nexport function y(d) {\n  return d.y;\n}\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\nexport default function (_nodes) {\n  var simulation,\n      _alpha = 1,\n      _alphaMin = 0.001,\n      _alphaDecay = 1 - Math.pow(_alphaMin, 1 / 300),\n      _alphaTarget = 0,\n      _velocityDecay = 0.6,\n      forces = map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (_nodes == null) _nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n\n    if (_alpha < _alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i,\n        n = _nodes.length,\n        node;\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      _alpha += (_alphaTarget - _alpha) * _alphaDecay;\n      forces.each(function (force) {\n        force(_alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        if (node.fx == null) node.x += node.vx *= _velocityDecay;else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= _velocityDecay;else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = _nodes.length, node; i < n; ++i) {\n      node = _nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(i),\n            angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(_nodes);\n    return force;\n  }\n\n  initializeNodes();\n  return simulation = {\n    tick: tick,\n    restart: function restart() {\n      return stepper.restart(step), simulation;\n    },\n    stop: function stop() {\n      return stepper.stop(), simulation;\n    },\n    nodes: function nodes(_) {\n      return arguments.length ? (_nodes = _, initializeNodes(), forces.each(initializeForce), simulation) : _nodes;\n    },\n    alpha: function alpha(_) {\n      return arguments.length ? (_alpha = +_, simulation) : _alpha;\n    },\n    alphaMin: function alphaMin(_) {\n      return arguments.length ? (_alphaMin = +_, simulation) : _alphaMin;\n    },\n    alphaDecay: function alphaDecay(_) {\n      return arguments.length ? (_alphaDecay = +_, simulation) : +_alphaDecay;\n    },\n    alphaTarget: function alphaTarget(_) {\n      return arguments.length ? (_alphaTarget = +_, simulation) : _alphaTarget;\n    },\n    velocityDecay: function velocityDecay(_) {\n      return arguments.length ? (_velocityDecay = 1 - _, simulation) : 1 - _velocityDecay;\n    },\n    force: function force(name, _) {\n      return arguments.length > 1 ? (_ == null ? forces.remove(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);\n    },\n    find: function find(x, y, radius) {\n      var i = 0,\n          n = _nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n      if (radius == null) radius = Infinity;else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n    on: function on(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\nimport { x, y } from \"./simulation\";\nexport default function () {\n  var nodes,\n      node,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree = quadtree(nodes, x, y).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) {\n      node = nodes[i], tree.visit(apply);\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    strengths = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n    }\n  }\n\n  function accumulate(quad) {\n    var strength = 0,\n        q,\n        c,\n        weight = 0,\n        x,\n        y,\n        i; // For internal nodes, accumulate forces from child quadrants.\n\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n\n      quad.x = x / weight;\n      quad.y = y / weight;\n    } // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n        q = quad;\n        q.x = q.data.x;\n        q.y = q.data.y;\n\n        do {\n          strength += strengths[q.data.index];\n        } while (q = q.next);\n      }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y; // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(), l += x * x;\n        if (y === 0) y = jiggle(), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n\n      return true;\n    } // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return; // Limit forces for very close nodes; randomize direction if coincident.\n\n\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(), l += x * x;\n      if (y === 0) y = jiggle(), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do {\n      if (quad.data !== node) {\n        w = strengths[quad.data.index] * alpha / l;\n        node.vx += x * w;\n        node.vy += y * w;\n      }\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function (_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function (_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function (_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (radius, x, y) {\n  var nodes,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = node.y - y || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      node.vy += dy * k;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _, initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}","export { default as forceCenter } from \"./center\";\nexport { default as forceCollide } from \"./collide\";\nexport { default as forceLink } from \"./link\";\nexport { default as forceManyBody } from \"./manyBody\";\nexport { default as forceRadial } from \"./radial\";\nexport { default as forceSimulation } from \"./simulation\";\nexport { default as forceX } from \"./x\";\nexport { default as forceY } from \"./y\";","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar colorScaleAttrs = require('./attributes');\n\nvar scales = require('./scales').scales;\n\nvar msg = 'Note that `autocolorscale` must be true for this attribute to work.';\nmodule.exports = {\n  editType: 'calc',\n  colorscale: {\n    editType: 'calc',\n    sequential: {\n      valType: 'colorscale',\n      dflt: scales.Reds,\n      role: 'style',\n      editType: 'calc',\n      description: ['Sets the default sequential colorscale for positive values.', msg].join(' ')\n    },\n    sequentialminus: {\n      valType: 'colorscale',\n      dflt: scales.Blues,\n      role: 'style',\n      editType: 'calc',\n      description: ['Sets the default sequential colorscale for negative values.', msg].join(' ')\n    },\n    diverging: {\n      valType: 'colorscale',\n      dflt: scales.RdBu,\n      role: 'style',\n      editType: 'calc',\n      description: ['Sets the default diverging colorscale.', msg].join(' ')\n    }\n  },\n  coloraxis: extendFlat({\n    // not really a 'subplot' attribute container,\n    // but this is the flag we use to denote attributes that\n    // support yaxis, yaxis2, yaxis3, ... counters\n    _isSubplotObj: true,\n    editType: 'calc',\n    description: [''].join(' ')\n  }, colorScaleAttrs('', {\n    colorAttr: 'corresponding trace color array(s)',\n    noColorAxis: true,\n    showScaleDflt: true\n  }))\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // works with our CSS cursor classes (see css/_cursor.scss)\n// to apply cursors to d3 single-element selections.\n// omit cursor to revert to the default.\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nmodule.exports = function setCursor(el3, csr) {\n  (el3.attr('class') || '').split(' ').forEach(function (cls) {\n    if (cls.indexOf('cursor-') === 0) el3.classed(cls, false);\n  });\n  if (csr) el3.classed('cursor-' + csr, true);\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // more info: http://stackoverflow.com/questions/18531624/isplainobject-thing\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nmodule.exports = function isPlainObject(obj) {\n  // We need to be a little less strict in the `imagetest` container because\n  // of how async image requests are handled.\n  //\n  // N.B. isPlainObject(new Constructor()) will return true in `imagetest`\n  if (window && window.process && window.process.versions) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n  }\n\n  return Object.prototype.toString.call(obj) === '[object Object]' && Object.getPrototypeOf(obj) === Object.prototype;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib'); // set cursors pointing toward the closest corner/side,\n// to indicate alignment\n// x and y are 0-1, fractions of the plot area\n\n\nvar cursorset = [['sw-resize', 's-resize', 'se-resize'], ['w-resize', 'move', 'e-resize'], ['nw-resize', 'n-resize', 'ne-resize']];\n\nmodule.exports = function getCursor(x, y, xanchor, yanchor) {\n  if (xanchor === 'left') x = 0;else if (xanchor === 'center') x = 1;else if (xanchor === 'right') x = 2;else x = Lib.constrain(Math.floor(x * 3), 0, 2);\n  if (yanchor === 'bottom') y = 0;else if (yanchor === 'middle') y = 1;else if (yanchor === 'top') y = 2;else y = Lib.constrain(Math.floor(y * 3), 0, 2);\n  return cursorset[y][x];\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nvar Registry = require('../../registry');\n\nvar Plots = require('../../plots/plots');\n\nvar axisIds = require('../../plots/cartesian/axis_ids');\n\nvar Lib = require('../../lib');\n\nvar Icons = require('../../fonts/ploticon');\n\nvar _ = Lib._;\nvar modeBarButtons = module.exports = {};\n/**\n * ModeBar buttons configuration\n *\n * @param {string} name\n *      name / id of the buttons (for tracking)\n * @param {string} title\n *      text that appears while hovering over the button,\n *      enter null, false or '' for no hover text\n * @param {string} icon\n *      svg icon object associated with the button\n *      can be linked to Plotly.Icons to use the default plotly icons\n * @param {string} [gravity]\n *      icon positioning\n * @param {function} click\n *      click handler associated with the button, a function of\n *      'gd' (the main graph object) and\n *      'ev' (the event object)\n * @param {string} [attr]\n *      attribute associated with button,\n *      use this with 'val' to keep track of the state\n * @param {*} [val]\n *      initial 'attr' value, can be a function of gd\n * @param {boolean} [toggle]\n *      is the button a toggle button?\n */\n\nmodeBarButtons.toImage = {\n  name: 'toImage',\n  title: function title(gd) {\n    var opts = gd._context.toImageButtonOptions || {};\n    var format = opts.format || 'png';\n    return format === 'png' ? _(gd, 'Download plot as a png') : // legacy text\n    _(gd, 'Download plot'); // generic non-PNG text\n  },\n  icon: Icons.camera,\n  click: function click(gd) {\n    var toImageButtonOptions = gd._context.toImageButtonOptions;\n    var opts = {\n      format: toImageButtonOptions.format || 'png'\n    };\n    Lib.notifier(_(gd, 'Taking snapshot - this may take a few seconds'), 'long');\n\n    if (opts.format !== 'svg' && Lib.isIE()) {\n      Lib.notifier(_(gd, 'IE only supports svg.  Changing format to svg.'), 'long');\n      opts.format = 'svg';\n    }\n\n    ['filename', 'width', 'height', 'scale'].forEach(function (key) {\n      if (key in toImageButtonOptions) {\n        opts[key] = toImageButtonOptions[key];\n      }\n    });\n    Registry.call('downloadImage', gd, opts).then(function (filename) {\n      Lib.notifier(_(gd, 'Snapshot succeeded') + ' - ' + filename, 'long');\n    })[\"catch\"](function () {\n      Lib.notifier(_(gd, 'Sorry, there was a problem downloading your snapshot!'), 'long');\n    });\n  }\n};\nmodeBarButtons.sendDataToCloud = {\n  name: 'sendDataToCloud',\n  title: function title(gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.disk,\n  click: function click(gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.editInChartStudio = {\n  name: 'editInChartStudio',\n  title: function title(gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.pencil,\n  click: function click(gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.zoom2d = {\n  name: 'zoom2d',\n  title: function title(gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleCartesian\n};\nmodeBarButtons.pan2d = {\n  name: 'pan2d',\n  title: function title(gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleCartesian\n};\nmodeBarButtons.select2d = {\n  name: 'select2d',\n  title: function title(gd) {\n    return _(gd, 'Box Select');\n  },\n  attr: 'dragmode',\n  val: 'select',\n  icon: Icons.selectbox,\n  click: handleCartesian\n};\nmodeBarButtons.lasso2d = {\n  name: 'lasso2d',\n  title: function title(gd) {\n    return _(gd, 'Lasso Select');\n  },\n  attr: 'dragmode',\n  val: 'lasso',\n  icon: Icons.lasso,\n  click: handleCartesian\n};\nmodeBarButtons.zoomIn2d = {\n  name: 'zoomIn2d',\n  title: function title(gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleCartesian\n};\nmodeBarButtons.zoomOut2d = {\n  name: 'zoomOut2d',\n  title: function title(gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleCartesian\n};\nmodeBarButtons.autoScale2d = {\n  name: 'autoScale2d',\n  title: function title(gd) {\n    return _(gd, 'Autoscale');\n  },\n  attr: 'zoom',\n  val: 'auto',\n  icon: Icons.autoscale,\n  click: handleCartesian\n};\nmodeBarButtons.resetScale2d = {\n  name: 'resetScale2d',\n  title: function title(gd) {\n    return _(gd, 'Reset axes');\n  },\n  attr: 'zoom',\n  val: 'reset',\n  icon: Icons.home,\n  click: handleCartesian\n};\nmodeBarButtons.hoverClosestCartesian = {\n  name: 'hoverClosestCartesian',\n  title: function title(gd) {\n    return _(gd, 'Show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleCartesian\n};\nmodeBarButtons.hoverCompareCartesian = {\n  name: 'hoverCompareCartesian',\n  title: function title(gd) {\n    return _(gd, 'Compare data on hover');\n  },\n  attr: 'hovermode',\n  val: function val(gd) {\n    return gd._fullLayout._isHoriz ? 'y' : 'x';\n  },\n  icon: Icons.tooltip_compare,\n  gravity: 'ne',\n  click: handleCartesian\n};\n\nfunction handleCartesian(gd, ev) {\n  var button = ev.currentTarget;\n  var astr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var aobj = {};\n  var axList = axisIds.list(gd, null, true);\n  var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n  var ax, i;\n\n  if (astr === 'zoom') {\n    var mag = val === 'in' ? 0.5 : 2;\n    var r0 = (1 + mag) / 2;\n    var r1 = (1 - mag) / 2;\n    var axName;\n\n    for (i = 0; i < axList.length; i++) {\n      ax = axList[i];\n\n      if (!ax.fixedrange) {\n        axName = ax._name;\n\n        if (val === 'auto') {\n          aobj[axName + '.autorange'] = true;\n        } else if (val === 'reset') {\n          if (ax._rangeInitial === undefined) {\n            aobj[axName + '.autorange'] = true;\n          } else {\n            var rangeInitial = ax._rangeInitial.slice();\n\n            aobj[axName + '.range[0]'] = rangeInitial[0];\n            aobj[axName + '.range[1]'] = rangeInitial[1];\n          } // N.B. \"reset\" also resets showspikes\n\n\n          if (ax._showSpikeInitial !== undefined) {\n            aobj[axName + '.showspikes'] = ax._showSpikeInitial;\n\n            if (allSpikesEnabled === 'on' && !ax._showSpikeInitial) {\n              allSpikesEnabled = 'off';\n            }\n          }\n        } else {\n          var rangeNow = [ax.r2l(ax.range[0]), ax.r2l(ax.range[1])];\n          var rangeNew = [r0 * rangeNow[0] + r1 * rangeNow[1], r0 * rangeNow[1] + r1 * rangeNow[0]];\n          aobj[axName + '.range[0]'] = ax.l2r(rangeNew[0]);\n          aobj[axName + '.range[1]'] = ax.l2r(rangeNew[1]);\n        }\n      }\n    }\n  } else {\n    // if ALL traces have orientation 'h', 'hovermode': 'x' otherwise: 'y'\n    if (astr === 'hovermode' && (val === 'x' || val === 'y')) {\n      val = fullLayout._isHoriz ? 'y' : 'x';\n      button.setAttribute('data-val', val);\n    }\n\n    aobj[astr] = val;\n  }\n\n  fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.zoom3d = {\n  name: 'zoom3d',\n  title: function title(gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'scene.dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleDrag3d\n};\nmodeBarButtons.pan3d = {\n  name: 'pan3d',\n  title: function title(gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'scene.dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleDrag3d\n};\nmodeBarButtons.orbitRotation = {\n  name: 'orbitRotation',\n  title: function title(gd) {\n    return _(gd, 'Orbital rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'orbit',\n  icon: Icons['3d_rotate'],\n  click: handleDrag3d\n};\nmodeBarButtons.tableRotation = {\n  name: 'tableRotation',\n  title: function title(gd) {\n    return _(gd, 'Turntable rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'turntable',\n  icon: Icons['z-axis'],\n  click: handleDrag3d\n};\n\nfunction handleDrag3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var sceneIds = gd._fullLayout._subplots.gl3d || [];\n  var layoutUpdate = {};\n  var parts = attr.split('.');\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    layoutUpdate[sceneIds[i] + '.' + parts[1]] = val;\n  } // for multi-type subplots\n\n\n  var val2d = val === 'pan' ? val : 'zoom';\n  layoutUpdate.dragmode = val2d;\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.resetCameraDefault3d = {\n  name: 'resetCameraDefault3d',\n  title: function title(gd) {\n    return _(gd, 'Reset camera to default');\n  },\n  attr: 'resetDefault',\n  icon: Icons.home,\n  click: handleCamera3d\n};\nmodeBarButtons.resetCameraLastSave3d = {\n  name: 'resetCameraLastSave3d',\n  title: function title(gd) {\n    return _(gd, 'Reset camera to last save');\n  },\n  attr: 'resetLastSave',\n  icon: Icons.movie,\n  click: handleCamera3d\n};\n\nfunction handleCamera3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var aobj = {};\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    var sceneId = sceneIds[i];\n    var camera = sceneId + '.camera';\n    var aspectratio = sceneId + '.aspectratio';\n    var aspectmode = sceneId + '.aspectmode';\n    var scene = fullLayout[sceneId]._scene;\n    var didUpdate;\n\n    if (attr === 'resetLastSave') {\n      aobj[camera + '.up'] = scene.viewInitial.up;\n      aobj[camera + '.eye'] = scene.viewInitial.eye;\n      aobj[camera + '.center'] = scene.viewInitial.center;\n      didUpdate = true;\n    } else if (attr === 'resetDefault') {\n      aobj[camera + '.up'] = null;\n      aobj[camera + '.eye'] = null;\n      aobj[camera + '.center'] = null;\n      didUpdate = true;\n    }\n\n    if (didUpdate) {\n      aobj[aspectratio + '.x'] = scene.viewInitial.aspectratio.x;\n      aobj[aspectratio + '.y'] = scene.viewInitial.aspectratio.y;\n      aobj[aspectratio + '.z'] = scene.viewInitial.aspectratio.z;\n      aobj[aspectmode] = scene.viewInitial.aspectmode;\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.hoverClosest3d = {\n  name: 'hoverClosest3d',\n  title: function title(gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleHover3d\n};\n\nfunction getNextHover3d(gd, ev) {\n  var button = ev.currentTarget;\n  var val = button._previousVal;\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var axes = ['xaxis', 'yaxis', 'zaxis']; // initialize 'current spike' object to be stored in the DOM\n\n  var currentSpikes = {};\n  var layoutUpdate = {};\n\n  if (val) {\n    layoutUpdate = val;\n    button._previousVal = null;\n  } else {\n    for (var i = 0; i < sceneIds.length; i++) {\n      var sceneId = sceneIds[i];\n      var sceneLayout = fullLayout[sceneId];\n      var hovermodeAStr = sceneId + '.hovermode';\n      currentSpikes[hovermodeAStr] = sceneLayout.hovermode;\n      layoutUpdate[hovermodeAStr] = false; // copy all the current spike attrs\n\n      for (var j = 0; j < 3; j++) {\n        var axis = axes[j];\n        var spikeAStr = sceneId + '.' + axis + '.showspikes';\n        layoutUpdate[spikeAStr] = false;\n        currentSpikes[spikeAStr] = sceneLayout[axis].showspikes;\n      }\n    }\n\n    button._previousVal = currentSpikes;\n  }\n\n  return layoutUpdate;\n}\n\nfunction handleHover3d(gd, ev) {\n  var layoutUpdate = getNextHover3d(gd, ev);\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.zoomInGeo = {\n  name: 'zoomInGeo',\n  title: function title(gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleGeo\n};\nmodeBarButtons.zoomOutGeo = {\n  name: 'zoomOutGeo',\n  title: function title(gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleGeo\n};\nmodeBarButtons.resetGeo = {\n  name: 'resetGeo',\n  title: function title(gd) {\n    return _(gd, 'Reset');\n  },\n  attr: 'reset',\n  val: null,\n  icon: Icons.autoscale,\n  click: handleGeo\n};\nmodeBarButtons.hoverClosestGeo = {\n  name: 'hoverClosestGeo',\n  title: function title(gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction handleGeo(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var geoIds = fullLayout._subplots.geo || [];\n\n  for (var i = 0; i < geoIds.length; i++) {\n    var id = geoIds[i];\n    var geoLayout = fullLayout[id];\n\n    if (attr === 'zoom') {\n      var scale = geoLayout.projection.scale;\n      var newScale = val === 'in' ? 2 * scale : 0.5 * scale;\n      Registry.call('_guiRelayout', gd, id + '.projection.scale', newScale);\n    }\n  }\n\n  if (attr === 'reset') {\n    resetView(gd, 'geo');\n  }\n}\n\nmodeBarButtons.hoverClosestGl2d = {\n  name: 'hoverClosestGl2d',\n  title: function title(gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\nmodeBarButtons.hoverClosestPie = {\n  name: 'hoverClosestPie',\n  title: function title(gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction getNextHover(gd) {\n  var fullLayout = gd._fullLayout;\n  if (fullLayout.hovermode) return false;\n\n  if (fullLayout._has('cartesian')) {\n    return fullLayout._isHoriz ? 'y' : 'x';\n  }\n\n  return 'closest';\n}\n\nfunction toggleHover(gd) {\n  var newHover = getNextHover(gd);\n  Registry.call('_guiRelayout', gd, 'hovermode', newHover);\n}\n\nmodeBarButtons.resetViewSankey = {\n  name: 'resetSankeyGroup',\n  title: function title(gd) {\n    return _(gd, 'Reset view');\n  },\n  icon: Icons.home,\n  click: function click(gd) {\n    var aObj = {\n      'node.groups': [],\n      'node.x': [],\n      'node.y': []\n    };\n\n    for (var i = 0; i < gd._fullData.length; i++) {\n      var viewInitial = gd._fullData[i]._viewInitial;\n      aObj['node.groups'].push(viewInitial.node.groups.slice());\n      aObj['node.x'].push(viewInitial.node.x.slice());\n      aObj['node.y'].push(viewInitial.node.y.slice());\n    }\n\n    Registry.call('restyle', gd, aObj);\n  }\n}; // buttons when more then one plot types are present\n\nmodeBarButtons.toggleHover = {\n  name: 'toggleHover',\n  title: function title(gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: function click(gd, ev) {\n    var layoutUpdate = getNextHover3d(gd, ev);\n    layoutUpdate.hovermode = getNextHover(gd);\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n  }\n};\nmodeBarButtons.resetViews = {\n  name: 'resetViews',\n  title: function title(gd) {\n    return _(gd, 'Reset views');\n  },\n  icon: Icons.home,\n  click: function click(gd, ev) {\n    var button = ev.currentTarget;\n    button.setAttribute('data-attr', 'zoom');\n    button.setAttribute('data-val', 'reset');\n    handleCartesian(gd, ev);\n    button.setAttribute('data-attr', 'resetLastSave');\n    handleCamera3d(gd, ev);\n    resetView(gd, 'geo');\n    resetView(gd, 'mapbox');\n  }\n};\nmodeBarButtons.toggleSpikelines = {\n  name: 'toggleSpikelines',\n  title: function title(gd) {\n    return _(gd, 'Toggle Spike Lines');\n  },\n  icon: Icons.spikeline,\n  attr: '_cartesianSpikesEnabled',\n  val: 'on',\n  click: function click(gd) {\n    var fullLayout = gd._fullLayout;\n    var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n    fullLayout._cartesianSpikesEnabled = allSpikesEnabled === 'on' ? 'off' : 'on';\n    Registry.call('_guiRelayout', gd, setSpikelineVisibility(gd));\n  }\n};\n\nfunction setSpikelineVisibility(gd) {\n  var fullLayout = gd._fullLayout;\n  var areSpikesOn = fullLayout._cartesianSpikesEnabled === 'on';\n  var axList = axisIds.list(gd, null, true);\n  var aobj = {};\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    aobj[ax._name + '.showspikes'] = areSpikesOn ? true : ax._showSpikeInitial;\n  }\n\n  return aobj;\n}\n\nmodeBarButtons.resetViewMapbox = {\n  name: 'resetViewMapbox',\n  title: function title(gd) {\n    return _(gd, 'Reset view');\n  },\n  attr: 'reset',\n  icon: Icons.home,\n  click: function click(gd) {\n    resetView(gd, 'mapbox');\n  }\n};\nmodeBarButtons.zoomInMapbox = {\n  name: 'zoomInMapbox',\n  title: function title(gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleMapboxZoom\n};\nmodeBarButtons.zoomOutMapbox = {\n  name: 'zoomOutMapbox',\n  title: function title(gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleMapboxZoom\n};\n\nfunction handleMapboxZoom(gd, ev) {\n  var button = ev.currentTarget;\n  var val = button.getAttribute('data-val');\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots.mapbox || [];\n  var scalar = 1.05;\n  var aObj = {};\n\n  for (var i = 0; i < subplotIds.length; i++) {\n    var id = subplotIds[i];\n    var current = fullLayout[id].zoom;\n    var next = val === 'in' ? scalar * current : current / scalar;\n    aObj[id + '.zoom'] = next;\n  }\n\n  Registry.call('_guiRelayout', gd, aObj);\n}\n\nfunction resetView(gd, subplotType) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[subplotType] || [];\n  var aObj = {};\n\n  for (var i = 0; i < subplotIds.length; i++) {\n    var id = subplotIds[i];\n    var subplotObj = fullLayout[id]._subplot;\n    var viewInitial = subplotObj.viewInitial;\n    var viewKeys = Object.keys(viewInitial);\n\n    for (var j = 0; j < viewKeys.length; j++) {\n      var key = viewKeys[j];\n      aObj[id + '.' + key] = viewInitial[key];\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aObj);\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar texttemplateAttrs = require('../../plots/template_attributes').texttemplateAttrs;\n\nvar hovertemplateAttrs = require('../../plots/template_attributes').hovertemplateAttrs;\n\nvar colorScaleAttrs = require('../../components/colorscale/attributes');\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar dash = require('../../components/drawing/attributes').dash;\n\nvar Drawing = require('../../components/drawing');\n\nvar constants = require('./constants');\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nmodule.exports = {\n  x: {\n    valType: 'data_array',\n    editType: 'calc+clearAxisTypes',\n    anim: true,\n    description: 'Sets the x coordinates.'\n  },\n  x0: {\n    valType: 'any',\n    dflt: 0,\n    role: 'info',\n    editType: 'calc+clearAxisTypes',\n    anim: true,\n    description: ['Alternate to `x`.', 'Builds a linear space of x coordinates.', 'Use with `dx`', 'where `x0` is the starting coordinate and `dx` the step.'].join(' ')\n  },\n  dx: {\n    valType: 'number',\n    dflt: 1,\n    role: 'info',\n    editType: 'calc',\n    anim: true,\n    description: ['Sets the x coordinate step.', 'See `x0` for more info.'].join(' ')\n  },\n  y: {\n    valType: 'data_array',\n    editType: 'calc+clearAxisTypes',\n    anim: true,\n    description: 'Sets the y coordinates.'\n  },\n  y0: {\n    valType: 'any',\n    dflt: 0,\n    role: 'info',\n    editType: 'calc+clearAxisTypes',\n    anim: true,\n    description: ['Alternate to `y`.', 'Builds a linear space of y coordinates.', 'Use with `dy`', 'where `y0` is the starting coordinate and `dy` the step.'].join(' ')\n  },\n  dy: {\n    valType: 'number',\n    dflt: 1,\n    role: 'info',\n    editType: 'calc',\n    anim: true,\n    description: ['Sets the y coordinate step.', 'See `y0` for more info.'].join(' ')\n  },\n  stackgroup: {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    editType: 'calc',\n    description: ['Set several scatter traces (on the same subplot) to the same', 'stackgroup in order to add their y values (or their x values if', '`orientation` is *h*). If blank or omitted this trace will not be', 'stacked. Stacking also turns `fill` on by default, using *tonexty*', '(*tonextx*) if `orientation` is *h* (*v*) and sets the default', '`mode` to *lines* irrespective of point count.', 'You can only stack on a numeric (linear or log) axis.', 'Traces in a `stackgroup` will only fill to (or be filled to) other', 'traces in the same group. With multiple `stackgroup`s or some', 'traces stacked and some not, if fill-linked traces are not already', 'consecutive, the later ones will be pushed down in the drawing order.'].join(' ')\n  },\n  orientation: {\n    valType: 'enumerated',\n    role: 'info',\n    values: ['v', 'h'],\n    editType: 'calc',\n    description: ['Only relevant when `stackgroup` is used, and only the first', '`orientation` found in the `stackgroup` will be used - including', 'if `visible` is *legendonly* but not if it is `false`. Sets the', 'stacking direction. With *v* (*h*), the y (x) values of subsequent', 'traces are added. Also affects the default value of `fill`.'].join(' ')\n  },\n  groupnorm: {\n    valType: 'enumerated',\n    values: ['', 'fraction', 'percent'],\n    dflt: '',\n    role: 'info',\n    editType: 'calc',\n    description: ['Only relevant when `stackgroup` is used, and only the first', '`groupnorm` found in the `stackgroup` will be used - including', 'if `visible` is *legendonly* but not if it is `false`.', 'Sets the normalization for the sum of this `stackgroup`.', 'With *fraction*, the value of each trace at each location is', 'divided by the sum of all trace values at that location.', '*percent* is the same but multiplied by 100 to show percentages.', 'If there are multiple subplots, or multiple `stackgroup`s on one', 'subplot, each will be normalized within its own set.'].join(' ')\n  },\n  stackgaps: {\n    valType: 'enumerated',\n    values: ['infer zero', 'interpolate'],\n    dflt: 'infer zero',\n    role: 'info',\n    editType: 'calc',\n    description: ['Only relevant when `stackgroup` is used, and only the first', '`stackgaps` found in the `stackgroup` will be used - including', 'if `visible` is *legendonly* but not if it is `false`.', 'Determines how we handle locations at which other traces in this', 'group have data but this one does not.', 'With *infer zero* we insert a zero at these locations.', 'With *interpolate* we linearly interpolate between existing', 'values, and extrapolate a constant beyond the existing values.' // TODO - implement interrupt mode\n    // '*interrupt* omits this trace from the stack at this location by',\n    // 'dropping abruptly, midway between the existing and missing locations.'\n    ].join(' ')\n  },\n  text: {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    arrayOk: true,\n    editType: 'calc',\n    description: ['Sets text elements associated with each (x,y) pair.', 'If a single string, the same string appears over', 'all the data points.', 'If an array of string, the items are mapped in order to the', 'this trace\\'s (x,y) coordinates.', 'If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,', 'these elements will be seen in the hover labels.'].join(' ')\n  },\n  texttemplate: texttemplateAttrs({}, {}),\n  hovertext: {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    arrayOk: true,\n    editType: 'style',\n    description: ['Sets hover text elements associated with each (x,y) pair.', 'If a single string, the same string appears over', 'all the data points.', 'If an array of string, the items are mapped in order to the', 'this trace\\'s (x,y) coordinates.', 'To be seen, trace `hoverinfo` must contain a *text* flag.'].join(' ')\n  },\n  mode: {\n    valType: 'flaglist',\n    flags: ['lines', 'markers', 'text'],\n    extras: ['none'],\n    role: 'info',\n    editType: 'calc',\n    description: ['Determines the drawing mode for this scatter trace.', 'If the provided `mode` includes *text* then the `text` elements', 'appear at the coordinates. Otherwise, the `text` elements', 'appear on hover.', 'If there are less than ' + constants.PTS_LINESONLY + ' points', 'and the trace is not stacked', 'then the default is *lines+markers*. Otherwise, *lines*.'].join(' ')\n  },\n  hoveron: {\n    valType: 'flaglist',\n    flags: ['points', 'fills'],\n    role: 'info',\n    editType: 'style',\n    description: ['Do the hover effects highlight individual points (markers or', 'line points) or do they highlight filled regions?', 'If the fill is *toself* or *tonext* and there are no markers', 'or text, then the default is *fills*, otherwise it is *points*.'].join(' ')\n  },\n  hovertemplate: hovertemplateAttrs({}, {\n    keys: constants.eventDataKeys\n  }),\n  line: {\n    color: {\n      valType: 'color',\n      role: 'style',\n      editType: 'style',\n      anim: true,\n      description: 'Sets the line color.'\n    },\n    width: {\n      valType: 'number',\n      min: 0,\n      dflt: 2,\n      role: 'style',\n      editType: 'style',\n      anim: true,\n      description: 'Sets the line width (in px).'\n    },\n    shape: {\n      valType: 'enumerated',\n      values: ['linear', 'spline', 'hv', 'vh', 'hvh', 'vhv'],\n      dflt: 'linear',\n      role: 'style',\n      editType: 'plot',\n      description: ['Determines the line shape.', 'With *spline* the lines are drawn using spline interpolation.', 'The other available values correspond to step-wise line shapes.'].join(' ')\n    },\n    smoothing: {\n      valType: 'number',\n      min: 0,\n      max: 1.3,\n      dflt: 1,\n      role: 'style',\n      editType: 'plot',\n      description: ['Has an effect only if `shape` is set to *spline*', 'Sets the amount of smoothing.', '*0* corresponds to no smoothing (equivalent to a *linear* shape).'].join(' ')\n    },\n    dash: extendFlat({}, dash, {\n      editType: 'style'\n    }),\n    simplify: {\n      valType: 'boolean',\n      dflt: true,\n      role: 'info',\n      editType: 'plot',\n      description: ['Simplifies lines by removing nearly-collinear points. When transitioning', 'lines, it may be desirable to disable this so that the number of points', 'along the resulting SVG path is unaffected.'].join(' ')\n    },\n    editType: 'plot'\n  },\n  connectgaps: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'info',\n    editType: 'calc',\n    description: ['Determines whether or not gaps', '(i.e. {nan} or missing values)', 'in the provided data arrays are connected.'].join(' ')\n  },\n  cliponaxis: {\n    valType: 'boolean',\n    dflt: true,\n    role: 'info',\n    editType: 'plot',\n    description: ['Determines whether or not markers and text nodes', 'are clipped about the subplot axes.', 'To show markers and text nodes above axis lines and tick labels,', 'make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*.'].join(' ')\n  },\n  fill: {\n    valType: 'enumerated',\n    values: ['none', 'tozeroy', 'tozerox', 'tonexty', 'tonextx', 'toself', 'tonext'],\n    role: 'style',\n    editType: 'calc',\n    description: ['Sets the area to fill with a solid color.', 'Defaults to *none* unless this trace is stacked, then it gets', '*tonexty* (*tonextx*) if `orientation` is *v* (*h*)', 'Use with `fillcolor` if not *none*.', '*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.', '*tonextx* and *tonexty* fill between the endpoints of this', 'trace and the endpoints of the trace before it, connecting those', 'endpoints with straight lines (to make a stacked area graph);', 'if there is no trace before it, they behave like *tozerox* and', '*tozeroy*.', '*toself* connects the endpoints of the trace (or each segment', 'of the trace if it has gaps) into a closed shape.', '*tonext* fills the space between two traces if one completely', 'encloses the other (eg consecutive contour lines), and behaves like', '*toself* if there is no trace before it. *tonext* should not be', 'used if one trace does not enclose the other.', 'Traces in a `stackgroup` will only fill to (or be filled to) other', 'traces in the same group. With multiple `stackgroup`s or some', 'traces stacked and some not, if fill-linked traces are not already', 'consecutive, the later ones will be pushed down in the drawing order.'].join(' ')\n  },\n  fillcolor: {\n    valType: 'color',\n    role: 'style',\n    editType: 'style',\n    anim: true,\n    description: ['Sets the fill color.', 'Defaults to a half-transparent variant of the line color,', 'marker color, or marker line color, whichever is available.'].join(' ')\n  },\n  marker: extendFlat({\n    symbol: {\n      valType: 'enumerated',\n      values: Drawing.symbolList,\n      dflt: 'circle',\n      arrayOk: true,\n      role: 'style',\n      editType: 'style',\n      description: ['Sets the marker symbol type.', 'Adding 100 is equivalent to appending *-open* to a symbol name.', 'Adding 200 is equivalent to appending *-dot* to a symbol name.', 'Adding 300 is equivalent to appending *-open-dot*', 'or *dot-open* to a symbol name.'].join(' ')\n    },\n    opacity: {\n      valType: 'number',\n      min: 0,\n      max: 1,\n      arrayOk: true,\n      role: 'style',\n      editType: 'style',\n      anim: true,\n      description: 'Sets the marker opacity.'\n    },\n    size: {\n      valType: 'number',\n      min: 0,\n      dflt: 6,\n      arrayOk: true,\n      role: 'style',\n      editType: 'calc',\n      anim: true,\n      description: 'Sets the marker size (in px).'\n    },\n    maxdisplayed: {\n      valType: 'number',\n      min: 0,\n      dflt: 0,\n      role: 'style',\n      editType: 'plot',\n      description: ['Sets a maximum number of points to be drawn on the graph.', '*0* corresponds to no limit.'].join(' ')\n    },\n    sizeref: {\n      valType: 'number',\n      dflt: 1,\n      role: 'style',\n      editType: 'calc',\n      description: ['Has an effect only if `marker.size` is set to a numerical array.', 'Sets the scale factor used to determine the rendered size of', 'marker points. Use with `sizemin` and `sizemode`.'].join(' ')\n    },\n    sizemin: {\n      valType: 'number',\n      min: 0,\n      dflt: 0,\n      role: 'style',\n      editType: 'calc',\n      description: ['Has an effect only if `marker.size` is set to a numerical array.', 'Sets the minimum size (in px) of the rendered marker points.'].join(' ')\n    },\n    sizemode: {\n      valType: 'enumerated',\n      values: ['diameter', 'area'],\n      dflt: 'diameter',\n      role: 'info',\n      editType: 'calc',\n      description: ['Has an effect only if `marker.size` is set to a numerical array.', 'Sets the rule for which the data in `size` is converted', 'to pixels.'].join(' ')\n    },\n    line: extendFlat({\n      width: {\n        valType: 'number',\n        min: 0,\n        arrayOk: true,\n        role: 'style',\n        editType: 'style',\n        anim: true,\n        description: 'Sets the width (in px) of the lines bounding the marker points.'\n      },\n      editType: 'calc'\n    }, colorScaleAttrs('marker.line', {\n      anim: true\n    })),\n    gradient: {\n      type: {\n        valType: 'enumerated',\n        values: ['radial', 'horizontal', 'vertical', 'none'],\n        arrayOk: true,\n        dflt: 'none',\n        role: 'style',\n        editType: 'calc',\n        description: ['Sets the type of gradient used to fill the markers'].join(' ')\n      },\n      color: {\n        valType: 'color',\n        arrayOk: true,\n        role: 'style',\n        editType: 'calc',\n        description: ['Sets the final color of the gradient fill:', 'the center color for radial, the right for horizontal,', 'or the bottom for vertical.'].join(' ')\n      },\n      editType: 'calc'\n    },\n    editType: 'calc'\n  }, colorScaleAttrs('marker', {\n    anim: true\n  })),\n  selected: {\n    marker: {\n      opacity: {\n        valType: 'number',\n        min: 0,\n        max: 1,\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker opacity of selected points.'\n      },\n      color: {\n        valType: 'color',\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker color of selected points.'\n      },\n      size: {\n        valType: 'number',\n        min: 0,\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker size of selected points.'\n      },\n      editType: 'style'\n    },\n    textfont: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the text font color of selected points.'\n      },\n      editType: 'style'\n    },\n    editType: 'style'\n  },\n  unselected: {\n    marker: {\n      opacity: {\n        valType: 'number',\n        min: 0,\n        max: 1,\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker opacity of unselected points, applied only when a selection exists.'\n      },\n      color: {\n        valType: 'color',\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker color of unselected points, applied only when a selection exists.'\n      },\n      size: {\n        valType: 'number',\n        min: 0,\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the marker size of unselected points, applied only when a selection exists.'\n      },\n      editType: 'style'\n    },\n    textfont: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        editType: 'style',\n        description: 'Sets the text font color of unselected points, applied only when a selection exists.'\n      },\n      editType: 'style'\n    },\n    editType: 'style'\n  },\n  textposition: {\n    valType: 'enumerated',\n    values: ['top left', 'top center', 'top right', 'middle left', 'middle center', 'middle right', 'bottom left', 'bottom center', 'bottom right'],\n    dflt: 'middle center',\n    arrayOk: true,\n    role: 'style',\n    editType: 'calc',\n    description: ['Sets the positions of the `text` elements', 'with respects to the (x,y) coordinates.'].join(' ')\n  },\n  textfont: fontAttrs({\n    editType: 'calc',\n    colorEditType: 'style',\n    arrayOk: true,\n    description: 'Sets the text font.'\n  }),\n  r: {\n    valType: 'data_array',\n    editType: 'calc',\n    description: ['r coordinates in scatter traces are deprecated!', 'Please switch to the *scatterpolar* trace type.', 'Sets the radial coordinates', 'for legacy polar chart only.'].join('')\n  },\n  t: {\n    valType: 'data_array',\n    editType: 'calc',\n    description: ['t coordinates in scatter traces are deprecated!', 'Please switch to the *scatterpolar* trace type.', 'Sets the angular coordinates', 'for legacy polar chart only.'].join('')\n  }\n};","'use strict';\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar isBrowser = require('is-browser');\n\nfunction detect() {\n  var supported = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    supported = false;\n  }\n\n  return supported;\n}\n\nmodule.exports = isBrowser && detect();","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar d3 = require('d3');\n\nvar loggers = require('./loggers');\n/**\n * Allow referencing a graph DOM element either directly\n * or by its id string\n *\n * @param {HTMLDivElement|string} gd: a graph element or its id\n *\n * @returns {HTMLDivElement} the DOM element of the graph\n */\n\n\nfunction getGraphDiv(gd) {\n  var gdElement;\n\n  if (typeof gd === 'string') {\n    gdElement = document.getElementById(gd);\n\n    if (gdElement === null) {\n      throw new Error('No DOM element with id \\'' + gd + '\\' exists on the page.');\n    }\n\n    return gdElement;\n  } else if (gd === null || gd === undefined) {\n    throw new Error('DOM element provided is null or undefined');\n  } // otherwise assume that gd is a DOM element\n\n\n  return gd;\n}\n\nfunction isPlotDiv(el) {\n  var el3 = d3.select(el);\n  return el3.node() instanceof HTMLElement && el3.size() && el3.classed('js-plotly-plot');\n}\n\nfunction removeElement(el) {\n  var elParent = el && el.parentNode;\n  if (elParent) elParent.removeChild(el);\n}\n/**\n * for dynamically adding style rules\n * makes one stylesheet that contains all rules added\n * by all calls to this function\n */\n\n\nfunction addStyleRule(selector, styleString) {\n  addRelatedStyleRule('global', selector, styleString);\n}\n/**\n * for dynamically adding style rules\n * to a stylesheet uniquely identified by a uid\n */\n\n\nfunction addRelatedStyleRule(uid, selector, styleString) {\n  var id = 'plotly.js-style-' + uid;\n  var style = document.getElementById(id);\n\n  if (!style) {\n    style = document.createElement('style');\n    style.setAttribute('id', id); // WebKit hack :(\n\n    style.appendChild(document.createTextNode(''));\n    document.head.appendChild(style);\n  }\n\n  var styleSheet = style.sheet;\n\n  if (styleSheet.insertRule) {\n    styleSheet.insertRule(selector + '{' + styleString + '}', 0);\n  } else if (styleSheet.addRule) {\n    styleSheet.addRule(selector, styleString, 0);\n  } else loggers.warn('addStyleRule failed');\n}\n/**\n * to remove from the page a stylesheet identified by a given uid\n */\n\n\nfunction deleteRelatedStyleRule(uid) {\n  var id = 'plotly.js-style-' + uid;\n  var style = document.getElementById(id);\n  if (style) removeElement(style);\n}\n\nmodule.exports = {\n  getGraphDiv: getGraphDiv,\n  isPlotDiv: isPlotDiv,\n  removeElement: removeElement,\n  addStyleRule: addStyleRule,\n  addRelatedStyleRule: addRelatedStyleRule,\n  deleteRelatedStyleRule: deleteRelatedStyleRule\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar Icons = require('../../fonts/ploticon');\n\nvar Parser = new DOMParser();\n/**\n * UI controller for interactive plots\n * @Class\n * @Param {object} opts\n * @Param {object} opts.buttons    nested arrays of grouped buttons config objects\n * @Param {object} opts.container  container div to append modeBar\n * @Param {object} opts.graphInfo  primary plot object containing data and layout\n */\n\nfunction ModeBar(opts) {\n  this.container = opts.container;\n  this.element = document.createElement('div');\n  this.update(opts.graphInfo, opts.buttons);\n  this.container.appendChild(this.element);\n}\n\nvar proto = ModeBar.prototype;\n/**\n * Update modeBar (buttons and logo)\n *\n * @param {object} graphInfo  primary plot object containing data and layout\n * @param {array of arrays} buttons nested arrays of grouped buttons to initialize\n *\n */\n\nproto.update = function (graphInfo, buttons) {\n  this.graphInfo = graphInfo;\n  var context = this.graphInfo._context;\n  var fullLayout = this.graphInfo._fullLayout;\n  var modeBarId = 'modebar-' + fullLayout._uid;\n  this.element.setAttribute('id', modeBarId);\n  this._uid = modeBarId;\n  this.element.className = 'modebar';\n  if (context.displayModeBar === 'hover') this.element.className += ' modebar--hover ease-bg';\n\n  if (fullLayout.modebar.orientation === 'v') {\n    this.element.className += ' vertical';\n    buttons = buttons.reverse();\n  }\n\n  var style = fullLayout.modebar;\n  var bgSelector = context.displayModeBar === 'hover' ? '.js-plotly-plot .plotly:hover ' : '';\n  Lib.deleteRelatedStyleRule(modeBarId);\n  Lib.addRelatedStyleRule(modeBarId, bgSelector + '#' + modeBarId + ' .modebar-group', 'background-color: ' + style.bgcolor);\n  Lib.addRelatedStyleRule(modeBarId, '#' + modeBarId + ' .modebar-btn .icon path', 'fill: ' + style.color);\n  Lib.addRelatedStyleRule(modeBarId, '#' + modeBarId + ' .modebar-btn:hover .icon path', 'fill: ' + style.activecolor);\n  Lib.addRelatedStyleRule(modeBarId, '#' + modeBarId + ' .modebar-btn.active .icon path', 'fill: ' + style.activecolor); // if buttons or logo have changed, redraw modebar interior\n\n  var needsNewButtons = !this.hasButtons(buttons);\n  var needsNewLogo = this.hasLogo !== context.displaylogo;\n  var needsNewLocale = this.locale !== context.locale;\n  this.locale = context.locale;\n\n  if (needsNewButtons || needsNewLogo || needsNewLocale) {\n    this.removeAllButtons();\n    this.updateButtons(buttons);\n\n    if (context.watermark || context.displaylogo) {\n      var logoGroup = this.getLogo();\n\n      if (context.watermark) {\n        logoGroup.className = logoGroup.className + ' watermark';\n      }\n\n      if (fullLayout.modebar.orientation === 'v') {\n        this.element.insertBefore(logoGroup, this.element.childNodes[0]);\n      } else {\n        this.element.appendChild(logoGroup);\n      }\n\n      this.hasLogo = true;\n    }\n  }\n\n  this.updateActiveButton();\n};\n\nproto.updateButtons = function (buttons) {\n  var _this = this;\n\n  this.buttons = buttons;\n  this.buttonElements = [];\n  this.buttonsNames = [];\n  this.buttons.forEach(function (buttonGroup) {\n    var group = _this.createGroup();\n\n    buttonGroup.forEach(function (buttonConfig) {\n      var buttonName = buttonConfig.name;\n\n      if (!buttonName) {\n        throw new Error('must provide button \\'name\\' in button config');\n      }\n\n      if (_this.buttonsNames.indexOf(buttonName) !== -1) {\n        throw new Error('button name \\'' + buttonName + '\\' is taken');\n      }\n\n      _this.buttonsNames.push(buttonName);\n\n      var button = _this.createButton(buttonConfig);\n\n      _this.buttonElements.push(button);\n\n      group.appendChild(button);\n    });\n\n    _this.element.appendChild(group);\n  });\n};\n/**\n * Empty div for containing a group of buttons\n * @Return {HTMLelement}\n */\n\n\nproto.createGroup = function () {\n  var group = document.createElement('div');\n  group.className = 'modebar-group';\n  return group;\n};\n/**\n * Create a new button div and set constant and configurable attributes\n * @Param {object} config (see ./buttons.js for more info)\n * @Return {HTMLelement}\n */\n\n\nproto.createButton = function (config) {\n  var _this = this;\n\n  var button = document.createElement('a');\n  button.setAttribute('rel', 'tooltip');\n  button.className = 'modebar-btn';\n  var title = config.title;\n  if (title === undefined) title = config.name; // for localization: allow title to be a callable that takes gd as arg\n  else if (typeof title === 'function') title = title(this.graphInfo);\n  if (title || title === 0) button.setAttribute('data-title', title);\n  if (config.attr !== undefined) button.setAttribute('data-attr', config.attr);\n  var val = config.val;\n\n  if (val !== undefined) {\n    if (typeof val === 'function') val = val(this.graphInfo);\n    button.setAttribute('data-val', val);\n  }\n\n  var click = config.click;\n\n  if (typeof click !== 'function') {\n    throw new Error('must provide button \\'click\\' function in button config');\n  } else {\n    button.addEventListener('click', function (ev) {\n      config.click(_this.graphInfo, ev); // only needed for 'hoverClosestGeo' which does not call relayout\n\n      _this.updateActiveButton(ev.currentTarget);\n    });\n  }\n\n  button.setAttribute('data-toggle', config.toggle || false);\n  if (config.toggle) d3.select(button).classed('active', true);\n  var icon = config.icon;\n\n  if (typeof icon === 'function') {\n    button.appendChild(icon());\n  } else {\n    button.appendChild(this.createIcon(icon || Icons.question));\n  }\n\n  button.setAttribute('data-gravity', config.gravity || 'n');\n  return button;\n};\n/**\n * Add an icon to a button\n * @Param {object} thisIcon\n * @Param {number} thisIcon.width\n * @Param {string} thisIcon.path\n * @Param {string} thisIcon.color\n * @Return {HTMLelement}\n */\n\n\nproto.createIcon = function (thisIcon) {\n  var iconHeight = isNumeric(thisIcon.height) ? Number(thisIcon.height) : thisIcon.ascent - thisIcon.descent;\n  var svgNS = 'http://www.w3.org/2000/svg';\n  var icon;\n\n  if (thisIcon.path) {\n    icon = document.createElementNS(svgNS, 'svg');\n    icon.setAttribute('viewBox', [0, 0, thisIcon.width, iconHeight].join(' '));\n    icon.setAttribute('class', 'icon');\n    var path = document.createElementNS(svgNS, 'path');\n    path.setAttribute('d', thisIcon.path);\n\n    if (thisIcon.transform) {\n      path.setAttribute('transform', thisIcon.transform);\n    } else if (thisIcon.ascent !== undefined) {\n      // Legacy icon transform calculation\n      path.setAttribute('transform', 'matrix(1 0 0 -1 0 ' + thisIcon.ascent + ')');\n    }\n\n    icon.appendChild(path);\n  }\n\n  if (thisIcon.svg) {\n    var svgDoc = Parser.parseFromString(thisIcon.svg, 'application/xml');\n    icon = svgDoc.childNodes[0];\n  }\n\n  icon.setAttribute('height', '1em');\n  icon.setAttribute('width', '1em');\n  return icon;\n};\n/**\n * Updates active button with attribute specified in layout\n * @Param {object} graphInfo plot object containing data and layout\n * @Return {HTMLelement}\n */\n\n\nproto.updateActiveButton = function (buttonClicked) {\n  var fullLayout = this.graphInfo._fullLayout;\n  var dataAttrClicked = buttonClicked !== undefined ? buttonClicked.getAttribute('data-attr') : null;\n  this.buttonElements.forEach(function (button) {\n    var thisval = button.getAttribute('data-val') || true;\n    var dataAttr = button.getAttribute('data-attr');\n    var isToggleButton = button.getAttribute('data-toggle') === 'true';\n    var button3 = d3.select(button); // Use 'data-toggle' and 'buttonClicked' to toggle buttons\n    // that have no one-to-one equivalent in fullLayout\n\n    if (isToggleButton) {\n      if (dataAttr === dataAttrClicked) {\n        button3.classed('active', !button3.classed('active'));\n      }\n    } else {\n      var val = dataAttr === null ? dataAttr : Lib.nestedProperty(fullLayout, dataAttr).get();\n      button3.classed('active', val === thisval);\n    }\n  });\n};\n/**\n * Check if modeBar is configured as button configuration argument\n *\n * @Param {object} buttons 2d array of grouped button config objects\n * @Return {boolean}\n */\n\n\nproto.hasButtons = function (buttons) {\n  var currentButtons = this.buttons;\n  if (!currentButtons) return false;\n  if (buttons.length !== currentButtons.length) return false;\n\n  for (var i = 0; i < buttons.length; ++i) {\n    if (buttons[i].length !== currentButtons[i].length) return false;\n\n    for (var j = 0; j < buttons[i].length; j++) {\n      if (buttons[i][j].name !== currentButtons[i][j].name) return false;\n    }\n  }\n\n  return true;\n};\n/**\n * @return {HTMLDivElement} The logo image wrapped in a group\n */\n\n\nproto.getLogo = function () {\n  var group = this.createGroup();\n  var a = document.createElement('a');\n  a.href = 'https://plot.ly/';\n  a.target = '_blank';\n  a.setAttribute('data-title', Lib._(this.graphInfo, 'Produced with Plotly'));\n  a.className = 'modebar-btn plotlyjsicon modebar-btn--logo';\n  a.appendChild(this.createIcon(Icons.newplotlylogo));\n  group.appendChild(a);\n  return group;\n};\n\nproto.removeAllButtons = function () {\n  while (this.element.firstChild) {\n    this.element.removeChild(this.element.firstChild);\n  }\n\n  this.hasLogo = false;\n};\n\nproto.destroy = function () {\n  Lib.removeElement(this.container.querySelector('.modebar'));\n  Lib.deleteRelatedStyleRule(this._uid);\n};\n\nfunction createModeBar(gd, buttons) {\n  var fullLayout = gd._fullLayout;\n  var modeBar = new ModeBar({\n    graphInfo: gd,\n    container: fullLayout._modebardiv.node(),\n    buttons: buttons\n  });\n\n  if (fullLayout._privateplot) {\n    d3.select(modeBar.element).append('span').classed('badge-private float--left', true).text('PRIVATE');\n  }\n\n  return modeBar;\n}\n\nmodule.exports = createModeBar;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nvar polybool = require('polybooljs');\n\nvar Registry = require('../../registry');\n\nvar Color = require('../../components/color');\n\nvar Fx = require('../../components/fx');\n\nvar Lib = require('../../lib');\n\nvar polygon = require('../../lib/polygon');\n\nvar throttle = require('../../lib/throttle');\n\nvar makeEventData = require('../../components/fx/helpers').makeEventData;\n\nvar getFromId = require('./axis_ids').getFromId;\n\nvar clearGlCanvases = require('../../lib/clear_gl_canvases');\n\nvar redrawReglTraces = require('../../plot_api/subroutines').redrawReglTraces;\n\nvar constants = require('./constants');\n\nvar MINSELECT = constants.MINSELECT;\nvar filteredPolygon = polygon.filter;\nvar polygonTester = polygon.tester;\n\nfunction getAxId(ax) {\n  return ax._id;\n}\n\nfunction prepSelect(e, startX, startY, dragOptions, mode) {\n  var gd = dragOptions.gd;\n  var fullLayout = gd._fullLayout;\n  var zoomLayer = fullLayout._zoomlayer;\n  var dragBBox = dragOptions.element.getBoundingClientRect();\n  var plotinfo = dragOptions.plotinfo;\n  var xs = plotinfo.xaxis._offset;\n  var ys = plotinfo.yaxis._offset;\n  var x0 = startX - dragBBox.left;\n  var y0 = startY - dragBBox.top;\n  var x1 = x0;\n  var y1 = y0;\n  var path0 = 'M' + x0 + ',' + y0;\n  var pw = dragOptions.xaxes[0]._length;\n  var ph = dragOptions.yaxes[0]._length;\n  var allAxes = dragOptions.xaxes.concat(dragOptions.yaxes);\n  var subtract = e.altKey;\n  var filterPoly, selectionTester, mergedPolygons, currentPolygon;\n  var i, searchInfo, eventData;\n  coerceSelectionsCache(e, gd, dragOptions);\n\n  if (mode === 'lasso') {\n    filterPoly = filteredPolygon([[x0, y0]], constants.BENDPX);\n  }\n\n  var outlines = zoomLayer.selectAll('path.select-outline-' + plotinfo.id).data([1, 2]);\n  outlines.enter().append('path').attr('class', function (d) {\n    return 'select-outline select-outline-' + d + ' select-outline-' + plotinfo.id;\n  }).attr('transform', 'translate(' + xs + ', ' + ys + ')').attr('d', path0 + 'Z');\n  var corners = zoomLayer.append('path').attr('class', 'zoombox-corners').style({\n    fill: Color.background,\n    stroke: Color.defaultLine,\n    'stroke-width': 1\n  }).attr('transform', 'translate(' + xs + ', ' + ys + ')').attr('d', 'M0,0Z');\n  var throttleID = fullLayout._uid + constants.SELECTID;\n  var selection = []; // find the traces to search for selection points\n\n  var searchTraces = determineSearchTraces(gd, dragOptions.xaxes, dragOptions.yaxes, dragOptions.subplot); // in v2 (once log ranges are fixed),\n  // we'll be able to p2r here for all axis types\n\n  function p2r(ax, v) {\n    return ax.type === 'log' ? ax.p2d(v) : ax.p2r(v);\n  }\n\n  function axValue(ax) {\n    var index = ax._id.charAt(0) === 'y' ? 1 : 0;\n    return function (v) {\n      return p2r(ax, v[index]);\n    };\n  }\n\n  function ascending(a, b) {\n    return a - b;\n  } // allow subplots to override fillRangeItems routine\n\n\n  var fillRangeItems;\n\n  if (plotinfo.fillRangeItems) {\n    fillRangeItems = plotinfo.fillRangeItems;\n  } else {\n    if (mode === 'select') {\n      fillRangeItems = function fillRangeItems(eventData, poly) {\n        var ranges = eventData.range = {};\n\n        for (i = 0; i < allAxes.length; i++) {\n          var ax = allAxes[i];\n\n          var axLetter = ax._id.charAt(0);\n\n          ranges[ax._id] = [p2r(ax, poly[axLetter + 'min']), p2r(ax, poly[axLetter + 'max'])].sort(ascending);\n        }\n      };\n    } else {\n      fillRangeItems = function fillRangeItems(eventData, poly, filterPoly) {\n        var dataPts = eventData.lassoPoints = {};\n\n        for (i = 0; i < allAxes.length; i++) {\n          var ax = allAxes[i];\n          dataPts[ax._id] = filterPoly.filtered.map(axValue(ax));\n        }\n      };\n    }\n  }\n\n  dragOptions.moveFn = function (dx0, dy0) {\n    x1 = Math.max(0, Math.min(pw, dx0 + x0));\n    y1 = Math.max(0, Math.min(ph, dy0 + y0));\n    var dx = Math.abs(x1 - x0);\n    var dy = Math.abs(y1 - y0);\n\n    if (mode === 'select') {\n      var direction = fullLayout.selectdirection;\n\n      if (fullLayout.selectdirection === 'any') {\n        if (dy < Math.min(dx * 0.6, MINSELECT)) direction = 'h';else if (dx < Math.min(dy * 0.6, MINSELECT)) direction = 'v';else direction = 'd';\n      } else {\n        direction = fullLayout.selectdirection;\n      }\n\n      if (direction === 'h') {\n        // horizontal motion: make a vertical box\n        currentPolygon = [[x0, 0], [x0, ph], [x1, ph], [x1, 0]];\n        currentPolygon.xmin = Math.min(x0, x1);\n        currentPolygon.xmax = Math.max(x0, x1);\n        currentPolygon.ymin = Math.min(0, ph);\n        currentPolygon.ymax = Math.max(0, ph); // extras to guide users in keeping a straight selection\n\n        corners.attr('d', 'M' + currentPolygon.xmin + ',' + (y0 - MINSELECT) + 'h-4v' + 2 * MINSELECT + 'h4Z' + 'M' + (currentPolygon.xmax - 1) + ',' + (y0 - MINSELECT) + 'h4v' + 2 * MINSELECT + 'h-4Z');\n      } else if (direction === 'v') {\n        // vertical motion: make a horizontal box\n        currentPolygon = [[0, y0], [0, y1], [pw, y1], [pw, y0]];\n        currentPolygon.xmin = Math.min(0, pw);\n        currentPolygon.xmax = Math.max(0, pw);\n        currentPolygon.ymin = Math.min(y0, y1);\n        currentPolygon.ymax = Math.max(y0, y1);\n        corners.attr('d', 'M' + (x0 - MINSELECT) + ',' + currentPolygon.ymin + 'v-4h' + 2 * MINSELECT + 'v4Z' + 'M' + (x0 - MINSELECT) + ',' + (currentPolygon.ymax - 1) + 'v4h' + 2 * MINSELECT + 'v-4Z');\n      } else if (direction === 'd') {\n        // diagonal motion\n        currentPolygon = [[x0, y0], [x0, y1], [x1, y1], [x1, y0]];\n        currentPolygon.xmin = Math.min(x0, x1);\n        currentPolygon.xmax = Math.max(x0, x1);\n        currentPolygon.ymin = Math.min(y0, y1);\n        currentPolygon.ymax = Math.max(y0, y1);\n        corners.attr('d', 'M0,0Z');\n      }\n    } else if (mode === 'lasso') {\n      filterPoly.addPt([x1, y1]);\n      currentPolygon = filterPoly.filtered;\n    } // create outline & tester\n\n\n    if (dragOptions.selectionDefs && dragOptions.selectionDefs.length) {\n      mergedPolygons = mergePolygons(dragOptions.mergedPolygons, currentPolygon, subtract);\n      currentPolygon.subtract = subtract;\n      selectionTester = multiTester(dragOptions.selectionDefs.concat([currentPolygon]));\n    } else {\n      mergedPolygons = [currentPolygon];\n      selectionTester = polygonTester(currentPolygon);\n    } // draw selection\n\n\n    drawSelection(mergedPolygons, outlines);\n    throttle.throttle(throttleID, constants.SELECTDELAY, function () {\n      selection = [];\n      var thisSelection;\n      var traceSelections = [];\n      var traceSelection;\n\n      for (i = 0; i < searchTraces.length; i++) {\n        searchInfo = searchTraces[i];\n        traceSelection = searchInfo._module.selectPoints(searchInfo, selectionTester);\n        traceSelections.push(traceSelection);\n        thisSelection = fillSelectionItem(traceSelection, searchInfo);\n\n        if (selection.length) {\n          for (var j = 0; j < thisSelection.length; j++) {\n            selection.push(thisSelection[j]);\n          }\n        } else selection = thisSelection;\n      }\n\n      eventData = {\n        points: selection\n      };\n      updateSelectedState(gd, searchTraces, eventData);\n      fillRangeItems(eventData, currentPolygon, filterPoly);\n      dragOptions.gd.emit('plotly_selecting', eventData);\n    });\n  };\n\n  dragOptions.clickFn = function (numClicks, evt) {\n    var clickmode = fullLayout.clickmode;\n    corners.remove();\n    throttle.done(throttleID).then(function () {\n      throttle.clear(throttleID);\n\n      if (numClicks === 2) {\n        // clear selection on doubleclick\n        outlines.remove();\n\n        for (i = 0; i < searchTraces.length; i++) {\n          searchInfo = searchTraces[i];\n\n          searchInfo._module.selectPoints(searchInfo, false);\n        }\n\n        updateSelectedState(gd, searchTraces);\n        clearSelectionsCache(dragOptions);\n        gd.emit('plotly_deselect', null);\n      } else {\n        if (clickmode.indexOf('select') > -1) {\n          selectOnClick(evt, gd, dragOptions.xaxes, dragOptions.yaxes, dragOptions.subplot, dragOptions, outlines);\n        }\n\n        if (clickmode === 'event') {\n          // TODO: remove in v2 - this was probably never intended to work as it does,\n          // but in case anyone depends on it we don't want to break it now.\n          // Note that click-to-select introduced pre v2 also emitts proper\n          // event data when clickmode is having 'select' in its flag list.\n          gd.emit('plotly_selected', undefined);\n        }\n      }\n\n      Fx.click(gd, evt);\n    })[\"catch\"](Lib.error);\n  };\n\n  dragOptions.doneFn = function () {\n    corners.remove();\n    throttle.done(throttleID).then(function () {\n      throttle.clear(throttleID);\n      dragOptions.gd.emit('plotly_selected', eventData);\n\n      if (currentPolygon && dragOptions.selectionDefs) {\n        // save last polygons\n        currentPolygon.subtract = subtract;\n        dragOptions.selectionDefs.push(currentPolygon); // we have to keep reference to arrays container\n\n        dragOptions.mergedPolygons.length = 0;\n        [].push.apply(dragOptions.mergedPolygons, mergedPolygons);\n      }\n\n      if (dragOptions.doneFnCompleted) {\n        dragOptions.doneFnCompleted(selection);\n      }\n    })[\"catch\"](Lib.error);\n  };\n}\n\nfunction selectOnClick(evt, gd, xAxes, yAxes, subplot, dragOptions, polygonOutlines) {\n  var hoverData = gd._hoverdata;\n  var clickmode = gd._fullLayout.clickmode;\n  var sendEvents = clickmode.indexOf('event') > -1;\n  var selection = [];\n  var searchTraces, searchInfo, currentSelectionDef, selectionTester, traceSelection;\n  var thisTracesSelection, pointOrBinSelected, subtract, eventData, i;\n\n  if (isHoverDataSet(hoverData)) {\n    coerceSelectionsCache(evt, gd, dragOptions);\n    searchTraces = determineSearchTraces(gd, xAxes, yAxes, subplot);\n    var clickedPtInfo = extractClickedPtInfo(hoverData, searchTraces);\n    var isBinnedTrace = clickedPtInfo.pointNumbers.length > 0; // Note: potentially costly operation isPointOrBinSelected is\n    // called as late as possible through the use of an assignment\n    // in an if condition.\n\n    if (isBinnedTrace ? isOnlyThisBinSelected(searchTraces, clickedPtInfo) : isOnlyOnePointSelected(searchTraces) && (pointOrBinSelected = isPointOrBinSelected(clickedPtInfo))) {\n      if (polygonOutlines) polygonOutlines.remove();\n\n      for (i = 0; i < searchTraces.length; i++) {\n        searchInfo = searchTraces[i];\n\n        searchInfo._module.selectPoints(searchInfo, false);\n      }\n\n      updateSelectedState(gd, searchTraces);\n      clearSelectionsCache(dragOptions);\n\n      if (sendEvents) {\n        gd.emit('plotly_deselect', null);\n      }\n    } else {\n      subtract = evt.shiftKey && (pointOrBinSelected !== undefined ? pointOrBinSelected : isPointOrBinSelected(clickedPtInfo));\n      currentSelectionDef = newPointSelectionDef(clickedPtInfo.pointNumber, clickedPtInfo.searchInfo, subtract);\n      var allSelectionDefs = dragOptions.selectionDefs.concat([currentSelectionDef]);\n      selectionTester = multiTester(allSelectionDefs);\n\n      for (i = 0; i < searchTraces.length; i++) {\n        traceSelection = searchTraces[i]._module.selectPoints(searchTraces[i], selectionTester);\n        thisTracesSelection = fillSelectionItem(traceSelection, searchTraces[i]);\n\n        if (selection.length) {\n          for (var j = 0; j < thisTracesSelection.length; j++) {\n            selection.push(thisTracesSelection[j]);\n          }\n        } else selection = thisTracesSelection;\n      }\n\n      eventData = {\n        points: selection\n      };\n      updateSelectedState(gd, searchTraces, eventData);\n\n      if (currentSelectionDef && dragOptions) {\n        dragOptions.selectionDefs.push(currentSelectionDef);\n      }\n\n      if (polygonOutlines) drawSelection(dragOptions.mergedPolygons, polygonOutlines);\n\n      if (sendEvents) {\n        gd.emit('plotly_selected', eventData);\n      }\n    }\n  }\n}\n/**\n * Constructs a new point selection definition object.\n */\n\n\nfunction newPointSelectionDef(pointNumber, searchInfo, subtract) {\n  return {\n    pointNumber: pointNumber,\n    searchInfo: searchInfo,\n    subtract: subtract\n  };\n}\n\nfunction isPointSelectionDef(o) {\n  return 'pointNumber' in o && 'searchInfo' in o;\n}\n/*\n * Constructs a new point number tester.\n */\n\n\nfunction newPointNumTester(pointSelectionDef) {\n  return {\n    xmin: 0,\n    xmax: 0,\n    ymin: 0,\n    ymax: 0,\n    pts: [],\n    contains: function contains(pt, omitFirstEdge, pointNumber, searchInfo) {\n      var idxWantedTrace = pointSelectionDef.searchInfo.cd[0].trace._expandedIndex;\n      var idxActualTrace = searchInfo.cd[0].trace._expandedIndex;\n      return idxActualTrace === idxWantedTrace && pointNumber === pointSelectionDef.pointNumber;\n    },\n    isRect: false,\n    degenerate: false,\n    subtract: pointSelectionDef.subtract\n  };\n}\n/**\n * Wraps multiple selection testers.\n *\n * @param {Array} list - An array of selection testers.\n *\n * @return a selection tester object with a contains function\n * that can be called to evaluate a point against all wrapped\n * selection testers that were passed in list.\n */\n\n\nfunction multiTester(list) {\n  var testers = [];\n  var xmin = isPointSelectionDef(list[0]) ? 0 : list[0][0][0];\n  var xmax = xmin;\n  var ymin = isPointSelectionDef(list[0]) ? 0 : list[0][0][1];\n  var ymax = ymin;\n\n  for (var i = 0; i < list.length; i++) {\n    if (isPointSelectionDef(list[i])) {\n      testers.push(newPointNumTester(list[i]));\n    } else {\n      var tester = polygon.tester(list[i]);\n      tester.subtract = list[i].subtract;\n      testers.push(tester);\n      xmin = Math.min(xmin, tester.xmin);\n      xmax = Math.max(xmax, tester.xmax);\n      ymin = Math.min(ymin, tester.ymin);\n      ymax = Math.max(ymax, tester.ymax);\n    }\n  }\n  /**\n   * Tests if the given point is within this tester.\n   *\n   * @param {Array} pt - [0] is the x coordinate, [1] is the y coordinate of the point.\n   * @param {*} arg - An optional parameter to pass down to wrapped testers.\n   * @param {number} pointNumber - The point number of the point within the underlying data array.\n   * @param {number} searchInfo - An object identifying the trace the point is contained in.\n   *\n   * @return {boolean} true if point is considered to be selected, false otherwise.\n   */\n\n\n  function contains(pt, arg, pointNumber, searchInfo) {\n    var contained = false;\n\n    for (var i = 0; i < testers.length; i++) {\n      if (testers[i].contains(pt, arg, pointNumber, searchInfo)) {\n        // if contained by subtract tester - exclude the point\n        contained = testers[i].subtract === false;\n      }\n    }\n\n    return contained;\n  }\n\n  return {\n    xmin: xmin,\n    xmax: xmax,\n    ymin: ymin,\n    ymax: ymax,\n    pts: [],\n    contains: contains,\n    isRect: false,\n    degenerate: false\n  };\n}\n\nfunction coerceSelectionsCache(evt, gd, dragOptions) {\n  var fullLayout = gd._fullLayout;\n  var plotinfo = dragOptions.plotinfo;\n  var selectingOnSameSubplot = fullLayout._lastSelectedSubplot && fullLayout._lastSelectedSubplot === plotinfo.id;\n  var hasModifierKey = evt.shiftKey || evt.altKey;\n\n  if (selectingOnSameSubplot && hasModifierKey && plotinfo.selection && plotinfo.selection.selectionDefs && !dragOptions.selectionDefs) {\n    // take over selection definitions from prev mode, if any\n    dragOptions.selectionDefs = plotinfo.selection.selectionDefs;\n    dragOptions.mergedPolygons = plotinfo.selection.mergedPolygons;\n  } else if (!hasModifierKey || !plotinfo.selection) {\n    clearSelectionsCache(dragOptions);\n  } // clear selection outline when selecting a different subplot\n\n\n  if (!selectingOnSameSubplot) {\n    clearSelect(gd);\n    fullLayout._lastSelectedSubplot = plotinfo.id;\n  }\n}\n\nfunction clearSelectionsCache(dragOptions) {\n  var plotinfo = dragOptions.plotinfo;\n  plotinfo.selection = {};\n  plotinfo.selection.selectionDefs = dragOptions.selectionDefs = [];\n  plotinfo.selection.mergedPolygons = dragOptions.mergedPolygons = [];\n}\n\nfunction determineSearchTraces(gd, xAxes, yAxes, subplot) {\n  var searchTraces = [];\n  var xAxisIds = xAxes.map(getAxId);\n  var yAxisIds = yAxes.map(getAxId);\n  var cd, trace, i;\n\n  for (i = 0; i < gd.calcdata.length; i++) {\n    cd = gd.calcdata[i];\n    trace = cd[0].trace;\n    if (trace.visible !== true || !trace._module || !trace._module.selectPoints) continue;\n\n    if (subplot && (trace.subplot === subplot || trace.geo === subplot)) {\n      searchTraces.push(createSearchInfo(trace._module, cd, xAxes[0], yAxes[0]));\n    } else if (trace.type === 'splom' && // FIXME: make sure we don't have more than single axis for splom\n    trace._xaxes[xAxisIds[0]] && trace._yaxes[yAxisIds[0]]) {\n      var info = createSearchInfo(trace._module, cd, xAxes[0], yAxes[0]);\n      info.scene = gd._fullLayout._splomScenes[trace.uid];\n      searchTraces.push(info);\n    } else if (trace.type === 'sankey') {\n      var sankeyInfo = createSearchInfo(trace._module, cd, xAxes[0], yAxes[0]);\n      searchTraces.push(sankeyInfo);\n    } else {\n      if (xAxisIds.indexOf(trace.xaxis) === -1) continue;\n      if (yAxisIds.indexOf(trace.yaxis) === -1) continue;\n      searchTraces.push(createSearchInfo(trace._module, cd, getFromId(gd, trace.xaxis), getFromId(gd, trace.yaxis)));\n    }\n  }\n\n  return searchTraces;\n\n  function createSearchInfo(module, calcData, xaxis, yaxis) {\n    return {\n      _module: module,\n      cd: calcData,\n      xaxis: xaxis,\n      yaxis: yaxis\n    };\n  }\n}\n\nfunction drawSelection(polygons, outlines) {\n  var paths = [];\n  var i, d;\n\n  for (i = 0; i < polygons.length; i++) {\n    var ppts = polygons[i];\n    paths.push(ppts.join('L') + 'L' + ppts[0]);\n  }\n\n  d = polygons.length > 0 ? 'M' + paths.join('M') + 'Z' : 'M0,0Z';\n  outlines.attr('d', d);\n}\n\nfunction isHoverDataSet(hoverData) {\n  return hoverData && Array.isArray(hoverData) && hoverData[0].hoverOnBox !== true;\n}\n\nfunction extractClickedPtInfo(hoverData, searchTraces) {\n  var hoverDatum = hoverData[0];\n  var pointNumber = -1;\n  var pointNumbers = [];\n  var searchInfo, i;\n\n  for (i = 0; i < searchTraces.length; i++) {\n    searchInfo = searchTraces[i];\n\n    if (hoverDatum.fullData._expandedIndex === searchInfo.cd[0].trace._expandedIndex) {\n      // Special case for box (and violin)\n      if (hoverDatum.hoverOnBox === true) {\n        break;\n      } // Hint: in some traces like histogram, one graphical element\n      // doesn't correspond to one particular data point, but to\n      // bins of data points. Thus, hoverDatum can have a binNumber\n      // property instead of pointNumber.\n\n\n      if (hoverDatum.pointNumber !== undefined) {\n        pointNumber = hoverDatum.pointNumber;\n      } else if (hoverDatum.binNumber !== undefined) {\n        pointNumber = hoverDatum.binNumber;\n        pointNumbers = hoverDatum.pointNumbers;\n      }\n\n      break;\n    }\n  }\n\n  return {\n    pointNumber: pointNumber,\n    pointNumbers: pointNumbers,\n    searchInfo: searchInfo\n  };\n}\n\nfunction isPointOrBinSelected(clickedPtInfo) {\n  var trace = clickedPtInfo.searchInfo.cd[0].trace;\n  var ptNum = clickedPtInfo.pointNumber;\n  var ptNums = clickedPtInfo.pointNumbers;\n  var ptNumsSet = ptNums.length > 0; // When pointsNumbers is set (e.g. histogram's binning),\n  // it is assumed that when the first point of\n  // a bin is selected, all others are as well\n\n  var ptNumToTest = ptNumsSet ? ptNums[0] : ptNum; // TODO potential performance improvement\n  // Primarily we need this function to determine if a click adds\n  // or subtracts from a selection.\n  // In cases `trace.selectedpoints` is a huge array, indexOf\n  // might be slow. One remedy would be to introduce a hash somewhere.\n\n  return trace.selectedpoints ? trace.selectedpoints.indexOf(ptNumToTest) > -1 : false;\n}\n\nfunction isOnlyThisBinSelected(searchTraces, clickedPtInfo) {\n  var tracesWithSelectedPts = [];\n  var searchInfo, trace, isSameTrace, i;\n\n  for (i = 0; i < searchTraces.length; i++) {\n    searchInfo = searchTraces[i];\n\n    if (searchInfo.cd[0].trace.selectedpoints && searchInfo.cd[0].trace.selectedpoints.length > 0) {\n      tracesWithSelectedPts.push(searchInfo);\n    }\n  }\n\n  if (tracesWithSelectedPts.length === 1) {\n    isSameTrace = tracesWithSelectedPts[0] === clickedPtInfo.searchInfo;\n\n    if (isSameTrace) {\n      trace = clickedPtInfo.searchInfo.cd[0].trace;\n\n      if (trace.selectedpoints.length === clickedPtInfo.pointNumbers.length) {\n        for (i = 0; i < clickedPtInfo.pointNumbers.length; i++) {\n          if (trace.selectedpoints.indexOf(clickedPtInfo.pointNumbers[i]) < 0) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isOnlyOnePointSelected(searchTraces) {\n  var len = 0;\n  var searchInfo, trace, i;\n\n  for (i = 0; i < searchTraces.length; i++) {\n    searchInfo = searchTraces[i];\n    trace = searchInfo.cd[0].trace;\n\n    if (trace.selectedpoints) {\n      if (trace.selectedpoints.length > 1) return false;\n      len += trace.selectedpoints.length;\n      if (len > 1) return false;\n    }\n  }\n\n  return len === 1;\n}\n\nfunction updateSelectedState(gd, searchTraces, eventData) {\n  var i, searchInfo, cd, trace; // before anything else, update preGUI if necessary\n\n  for (i = 0; i < searchTraces.length; i++) {\n    var fullInputTrace = searchTraces[i].cd[0].trace._fullInput;\n    var tracePreGUI = gd._fullLayout._tracePreGUI[fullInputTrace.uid] || {};\n\n    if (tracePreGUI.selectedpoints === undefined) {\n      tracePreGUI.selectedpoints = fullInputTrace._input.selectedpoints || null;\n    }\n  }\n\n  if (eventData) {\n    var pts = eventData.points || [];\n\n    for (i = 0; i < searchTraces.length; i++) {\n      trace = searchTraces[i].cd[0].trace;\n      trace._input.selectedpoints = trace._fullInput.selectedpoints = [];\n      if (trace._fullInput !== trace) trace.selectedpoints = [];\n    }\n\n    for (i = 0; i < pts.length; i++) {\n      var pt = pts[i];\n      var data = pt.data;\n      var fullData = pt.fullData;\n\n      if (pt.pointIndices) {\n        [].push.apply(data.selectedpoints, pt.pointIndices);\n\n        if (trace._fullInput !== trace) {\n          [].push.apply(fullData.selectedpoints, pt.pointIndices);\n        }\n      } else {\n        data.selectedpoints.push(pt.pointIndex);\n\n        if (trace._fullInput !== trace) {\n          fullData.selectedpoints.push(pt.pointIndex);\n        }\n      }\n    }\n  } else {\n    for (i = 0; i < searchTraces.length; i++) {\n      trace = searchTraces[i].cd[0].trace;\n      delete trace.selectedpoints;\n      delete trace._input.selectedpoints;\n\n      if (trace._fullInput !== trace) {\n        delete trace._fullInput.selectedpoints;\n      }\n    }\n  }\n\n  var hasRegl = false;\n\n  for (i = 0; i < searchTraces.length; i++) {\n    searchInfo = searchTraces[i];\n    cd = searchInfo.cd;\n    trace = cd[0].trace;\n\n    if (Registry.traceIs(trace, 'regl')) {\n      hasRegl = true;\n    }\n\n    var _module = searchInfo._module;\n    var fn = _module.styleOnSelect || _module.style;\n\n    if (fn) {\n      fn(gd, cd, cd[0].node3);\n      if (cd[0].nodeRangePlot3) fn(gd, cd, cd[0].nodeRangePlot3);\n    }\n  }\n\n  if (hasRegl) {\n    clearGlCanvases(gd);\n    redrawReglTraces(gd);\n  }\n}\n\nfunction mergePolygons(list, poly, subtract) {\n  var res;\n\n  if (subtract) {\n    res = polybool.difference({\n      regions: list,\n      inverted: false\n    }, {\n      regions: [poly],\n      inverted: false\n    });\n    return res.regions;\n  }\n\n  res = polybool.union({\n    regions: list,\n    inverted: false\n  }, {\n    regions: [poly],\n    inverted: false\n  });\n  return res.regions;\n}\n\nfunction fillSelectionItem(selection, searchInfo) {\n  if (Array.isArray(selection)) {\n    var cd = searchInfo.cd;\n    var trace = searchInfo.cd[0].trace;\n\n    for (var i = 0; i < selection.length; i++) {\n      selection[i] = makeEventData(selection[i], trace, cd);\n    }\n  }\n\n  return selection;\n} // until we get around to persistent selections, remove the outline\n// here. The selection itself will be removed when the plot redraws\n// at the end.\n\n\nfunction clearSelect(gd) {\n  var fullLayout = gd._fullLayout || {};\n  var zoomlayer = fullLayout._zoomlayer;\n\n  if (zoomlayer) {\n    zoomlayer.selectAll('.select-outline').remove();\n  }\n}\n\nmodule.exports = {\n  prepSelect: prepSelect,\n  clearSelect: clearSelect,\n  selectOnClick: selectOnClick\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric'); // used in the drawing step for 'scatter' and 'scattegeo' and\n// in the convert step for 'scatter3d'\n\n\nmodule.exports = function makeBubbleSizeFn(trace) {\n  var marker = trace.marker;\n  var sizeRef = marker.sizeref || 1;\n  var sizeMin = marker.sizemin || 0; // for bubble charts, allow scaling the provided value linearly\n  // and by area or diameter.\n  // Note this only applies to the array-value sizes\n\n  var baseFn = marker.sizemode === 'area' ? function (v) {\n    return Math.sqrt(v / sizeRef);\n  } : function (v) {\n    return v / sizeRef;\n  }; // TODO add support for position/negative bubbles?\n  // TODO add 'sizeoffset' attribute?\n\n  return function (v) {\n    var baseSize = baseFn(v / 2); // don't show non-numeric and negative sizes\n\n    return isNumeric(baseSize) && baseSize > 0 ? Math.max(baseSize, sizeMin) : 0;\n  };\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Plots = require('../../plots/plots');\n\nvar Registry = require('../../registry');\n\nvar Lib = require('../../lib');\n\nvar Drawing = require('../drawing');\n\nvar Color = require('../color');\n\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar interactConstants = require('../../constants/interactions');\n\nvar OPPOSITE_SIDE = require('../../constants/alignment').OPPOSITE_SIDE;\n\nvar numStripRE = / [XY][0-9]* /;\n/**\n * Titles - (re)draw titles on the axes and plot:\n * @param {DOM element} gd - the graphDiv\n * @param {string} titleClass - the css class of this title\n * @param {object} options - how and what to draw\n *      propContainer - the layout object containing `title` and `titlefont`\n *          attributes that apply to this title\n *      propName - the full name of the title property (for Plotly.relayout)\n *      [traceIndex] - include only if this property applies to one trace\n *          (such as a colorbar title) - then editing pipes to Plotly.restyle\n *          instead of Plotly.relayout\n *      placeholder - placeholder text for an empty editable title\n *      [avoid] {object} - include if this title should move to avoid other elements\n *          selection - d3 selection of elements to avoid\n *          side - which direction to move if there is a conflict\n *          [offsetLeft] - if these elements are subject to a translation\n *              wrt the title element\n *          [offsetTop]\n *      attributes {object} - position and alignment attributes\n *          x - pixels\n *          y - pixels\n *          text-anchor - start|middle|end\n *      transform {object} - how to transform the title after positioning\n *          rotate - degrees\n *          offset - shift up/down in the rotated frame (unused?)\n *      containerGroup - if an svg <g> element already exists to hold this\n *          title, include here. Otherwise it will go in fullLayout._infolayer\n *      _meta {object (optional} - meta key-value to for title with\n *          Lib.templateString, default to fullLayout._meta, if not provided\n *\n *  @return {selection} d3 selection of title container group\n */\n\nfunction draw(gd, titleClass, options) {\n  var cont = options.propContainer;\n  var prop = options.propName;\n  var placeholder = options.placeholder;\n  var traceIndex = options.traceIndex;\n  var avoid = options.avoid || {};\n  var attributes = options.attributes;\n  var transform = options.transform;\n  var group = options.containerGroup;\n  var fullLayout = gd._fullLayout;\n  var opacity = 1;\n  var isplaceholder = false;\n  var title = cont.title;\n  var txt = (title && title.text ? title.text : '').trim();\n  var font = title && title.font ? title.font : {};\n  var fontFamily = font.family;\n  var fontSize = font.size;\n  var fontColor = font.color; // only make this title editable if we positively identify its property\n  // as one that has editing enabled.\n\n  var editAttr;\n  if (prop === 'title.text') editAttr = 'titleText';else if (prop.indexOf('axis') !== -1) editAttr = 'axisTitleText';else if (prop.indexOf('colorbar' !== -1)) editAttr = 'colorbarTitleText';\n  var editable = gd._context.edits[editAttr];\n  if (txt === '') opacity = 0; // look for placeholder text while stripping out numbers from eg X2, Y3\n  // this is just for backward compatibility with the old version that had\n  // \"Click to enter X2 title\" and may have gotten saved in some old plots,\n  // we don't want this to show up when these are displayed.\n  else if (txt.replace(numStripRE, ' % ') === placeholder.replace(numStripRE, ' % ')) {\n      opacity = 0.2;\n      isplaceholder = true;\n      if (!editable) txt = '';\n    }\n\n  if (options._meta) {\n    txt = Lib.templateString(txt, options._meta);\n  } else if (fullLayout._meta) {\n    txt = Lib.templateString(txt, fullLayout._meta);\n  }\n\n  var elShouldExist = txt || editable;\n\n  if (!group) {\n    group = Lib.ensureSingle(fullLayout._infolayer, 'g', 'g-' + titleClass);\n  }\n\n  var el = group.selectAll('text').data(elShouldExist ? [0] : []);\n  el.enter().append('text');\n  el.text(txt) // this is hacky, but convertToTspans uses the class\n  // to determine whether to rotate mathJax...\n  // so we need to clear out any old class and put the\n  // correct one (only relevant for colorbars, at least\n  // for now) - ie don't use .classed\n  .attr('class', titleClass);\n  el.exit().remove();\n  if (!elShouldExist) return group;\n\n  function titleLayout(titleEl) {\n    Lib.syncOrAsync([drawTitle, scootTitle], titleEl);\n  }\n\n  function drawTitle(titleEl) {\n    var transformVal;\n\n    if (transform) {\n      transformVal = '';\n\n      if (transform.rotate) {\n        transformVal += 'rotate(' + [transform.rotate, attributes.x, attributes.y] + ')';\n      }\n\n      if (transform.offset) {\n        transformVal += 'translate(0, ' + transform.offset + ')';\n      }\n    } else {\n      transformVal = null;\n    }\n\n    titleEl.attr('transform', transformVal);\n    titleEl.style({\n      'font-family': fontFamily,\n      'font-size': d3.round(fontSize, 2) + 'px',\n      fill: Color.rgb(fontColor),\n      opacity: opacity * Color.opacity(fontColor),\n      'font-weight': Plots.fontWeight\n    }).attr(attributes).call(svgTextUtils.convertToTspans, gd);\n    return Plots.previousPromises(gd);\n  }\n\n  function scootTitle(titleElIn) {\n    var titleGroup = d3.select(titleElIn.node().parentNode);\n\n    if (avoid && avoid.selection && avoid.side && txt) {\n      titleGroup.attr('transform', null); // move toward avoid.side (= left, right, top, bottom) if needed\n      // can include pad (pixels, default 2)\n\n      var backside = OPPOSITE_SIDE[avoid.side];\n      var shiftSign = avoid.side === 'left' || avoid.side === 'top' ? -1 : 1;\n      var pad = isNumeric(avoid.pad) ? avoid.pad : 2;\n      var titlebb = Drawing.bBox(titleGroup.node());\n      var paperbb = {\n        left: 0,\n        top: 0,\n        right: fullLayout.width,\n        bottom: fullLayout.height\n      };\n      var maxshift = avoid.maxShift || shiftSign * (paperbb[avoid.side] - titlebb[avoid.side]);\n      var shift = 0; // Prevent the title going off the paper\n\n      if (maxshift < 0) {\n        shift = maxshift;\n      } else {\n        // so we don't have to offset each avoided element,\n        // give the title the opposite offset\n        var offsetLeft = avoid.offsetLeft || 0;\n        var offsetTop = avoid.offsetTop || 0;\n        titlebb.left -= offsetLeft;\n        titlebb.right -= offsetLeft;\n        titlebb.top -= offsetTop;\n        titlebb.bottom -= offsetTop; // iterate over a set of elements (avoid.selection)\n        // to avoid collisions with\n\n        avoid.selection.each(function () {\n          var avoidbb = Drawing.bBox(this);\n\n          if (Lib.bBoxIntersect(titlebb, avoidbb, pad)) {\n            shift = Math.max(shift, shiftSign * (avoidbb[avoid.side] - titlebb[backside]) + pad);\n          }\n        });\n        shift = Math.min(maxshift, shift);\n      }\n\n      if (shift > 0 || maxshift < 0) {\n        var shiftTemplate = {\n          left: [-shift, 0],\n          right: [shift, 0],\n          top: [0, -shift],\n          bottom: [0, shift]\n        }[avoid.side];\n        titleGroup.attr('transform', 'translate(' + shiftTemplate + ')');\n      }\n    }\n  }\n\n  el.call(titleLayout);\n\n  function setPlaceholder() {\n    opacity = 0;\n    isplaceholder = true;\n    el.text(placeholder).on('mouseover.opacity', function () {\n      d3.select(this).transition().duration(interactConstants.SHOW_PLACEHOLDER).style('opacity', 1);\n    }).on('mouseout.opacity', function () {\n      d3.select(this).transition().duration(interactConstants.HIDE_PLACEHOLDER).style('opacity', 0);\n    });\n  }\n\n  if (editable) {\n    if (!txt) setPlaceholder();else el.on('.opacity', null);\n    el.call(svgTextUtils.makeEditable, {\n      gd: gd\n    }).on('edit', function (text) {\n      if (traceIndex !== undefined) {\n        Registry.call('_guiRestyle', gd, prop, text, traceIndex);\n      } else {\n        Registry.call('_guiRelayout', gd, prop, text);\n      }\n    }).on('cancel', function () {\n      this.text(this.attr('data-unformatted')).call(titleLayout);\n    }).on('input', function (d) {\n      this.text(d || ' ').call(svgTextUtils.positionText, attributes.x, attributes.y);\n    });\n  }\n\n  el.classed('js-placeholder', isplaceholder);\n  return group;\n}\n\nmodule.exports = {\n  draw: draw\n};","/**\n * inspired by is-number <https://github.com/jonschlinkert/is-number>\n * but significantly simplified and sped up by ignoring number and string constructors\n * ie these return false:\n *   new Number(1)\n *   new String('1')\n */\n'use strict';\n\nvar allBlankCharCodes = require('is-string-blank');\n\nmodule.exports = function (n) {\n  var type = typeof n;\n\n  if (type === 'string') {\n    var original = n;\n    n = +n; // whitespace strings cast to zero - filter them out\n\n    if (n === 0 && allBlankCharCodes(original)) return false;\n  } else if (type !== 'number') return false;\n\n  return n - n < 1;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar mod = require('./mod').mod;\n/*\n * look for intersection of two line segments\n *   (1->2 and 3->4) - returns array [x,y] if they do, null if not\n */\n\n\nexports.segmentsIntersect = segmentsIntersect;\n\nfunction segmentsIntersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n  var a = x2 - x1;\n  var b = x3 - x1;\n  var c = x4 - x3;\n  var d = y2 - y1;\n  var e = y3 - y1;\n  var f = y4 - y3;\n  var det = a * f - c * d; // parallel lines? intersection is undefined\n  // ignore the case where they are colinear\n\n  if (det === 0) return null;\n  var t = (b * f - c * e) / det;\n  var u = (b * d - a * e) / det; // segments do not intersect?\n\n  if (u < 0 || u > 1 || t < 0 || t > 1) return null;\n  return {\n    x: x1 + a * t,\n    y: y1 + d * t\n  };\n}\n/*\n * find the minimum distance between two line segments (1->2 and 3->4)\n */\n\n\nexports.segmentDistance = function segmentDistance(x1, y1, x2, y2, x3, y3, x4, y4) {\n  if (segmentsIntersect(x1, y1, x2, y2, x3, y3, x4, y4)) return 0; // the two segments and their lengths squared\n\n  var x12 = x2 - x1;\n  var y12 = y2 - y1;\n  var x34 = x4 - x3;\n  var y34 = y4 - y3;\n  var ll12 = x12 * x12 + y12 * y12;\n  var ll34 = x34 * x34 + y34 * y34; // calculate distance squared, then take the sqrt at the very end\n\n  var dist2 = Math.min(perpDistance2(x12, y12, ll12, x3 - x1, y3 - y1), perpDistance2(x12, y12, ll12, x4 - x1, y4 - y1), perpDistance2(x34, y34, ll34, x1 - x3, y1 - y3), perpDistance2(x34, y34, ll34, x2 - x3, y2 - y3));\n  return Math.sqrt(dist2);\n};\n/*\n * distance squared from segment ab to point c\n * [xab, yab] is the vector b-a\n * [xac, yac] is the vector c-a\n * llab is the length squared of (b-a), just to simplify calculation\n */\n\n\nfunction perpDistance2(xab, yab, llab, xac, yac) {\n  var fcAB = xac * xab + yac * yab;\n\n  if (fcAB < 0) {\n    // point c is closer to point a\n    return xac * xac + yac * yac;\n  } else if (fcAB > llab) {\n    // point c is closer to point b\n    var xbc = xac - xab;\n    var ybc = yac - yab;\n    return xbc * xbc + ybc * ybc;\n  } else {\n    // perpendicular distance is the shortest\n    var crossProduct = xac * yab - yac * xab;\n    return crossProduct * crossProduct / llab;\n  }\n} // a very short-term cache for getTextLocation, just because\n// we're often looping over the same locations multiple times\n// invalidated as soon as we look at a different path\n\n\nvar locationCache, workingPath, workingTextWidth; // turn a path and position along it into x, y, and angle for the given text\n\nexports.getTextLocation = function getTextLocation(path, totalPathLen, positionOnPath, textWidth) {\n  if (path !== workingPath || textWidth !== workingTextWidth) {\n    locationCache = {};\n    workingPath = path;\n    workingTextWidth = textWidth;\n  }\n\n  if (locationCache[positionOnPath]) {\n    return locationCache[positionOnPath];\n  } // for the angle, use points on the path separated by the text width\n  // even though due to curvature, the text will cover a bit more than that\n\n\n  var p0 = path.getPointAtLength(mod(positionOnPath - textWidth / 2, totalPathLen));\n  var p1 = path.getPointAtLength(mod(positionOnPath + textWidth / 2, totalPathLen)); // note: atan handles 1/0 nicely\n\n  var theta = Math.atan((p1.y - p0.y) / (p1.x - p0.x)); // center the text at 2/3 of the center position plus 1/3 the p0/p1 midpoint\n  // that's the average position of this segment, assuming it's roughly quadratic\n\n  var pCenter = path.getPointAtLength(mod(positionOnPath, totalPathLen));\n  var x = (pCenter.x * 4 + p0.x + p1.x) / 6;\n  var y = (pCenter.y * 4 + p0.y + p1.y) / 6;\n  var out = {\n    x: x,\n    y: y,\n    theta: theta\n  };\n  locationCache[positionOnPath] = out;\n  return out;\n};\n\nexports.clearLocationCache = function () {\n  workingPath = null;\n};\n/*\n * Find the segment of `path` that's within the visible area\n * given by `bounds` {left, right, top, bottom}, to within a\n * precision of `buffer` px\n *\n * returns: undefined if nothing is visible, else object:\n * {\n *   min: position where the path first enters bounds, or 0 if it\n *        starts within bounds\n *   max: position where the path last exits bounds, or the path length\n *        if it finishes within bounds\n *   len: max - min, ie the length of visible path\n *   total: the total path length - just included so the caller doesn't\n *        need to call path.getTotalLength() again\n *   isClosed: true iff the start and end points of the path are both visible\n *        and are at the same point\n * }\n *\n * Works by starting from either end and repeatedly finding the distance from\n * that point to the plot area, and if it's outside the plot, moving along the\n * path by that distance (because the plot must be at least that far away on\n * the path). Note that if a path enters, exits, and re-enters the plot, we\n * will not capture this behavior.\n */\n\n\nexports.getVisibleSegment = function getVisibleSegment(path, bounds, buffer) {\n  var left = bounds.left;\n  var right = bounds.right;\n  var top = bounds.top;\n  var bottom = bounds.bottom;\n  var pMin = 0;\n  var pTotal = path.getTotalLength();\n  var pMax = pTotal;\n  var pt0, ptTotal;\n\n  function getDistToPlot(len) {\n    var pt = path.getPointAtLength(len); // hold on to the start and end points for `closed`\n\n    if (len === 0) pt0 = pt;else if (len === pTotal) ptTotal = pt;\n    var dx = pt.x < left ? left - pt.x : pt.x > right ? pt.x - right : 0;\n    var dy = pt.y < top ? top - pt.y : pt.y > bottom ? pt.y - bottom : 0;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  var distToPlot = getDistToPlot(pMin);\n\n  while (distToPlot) {\n    pMin += distToPlot + buffer;\n    if (pMin > pMax) return;\n    distToPlot = getDistToPlot(pMin);\n  }\n\n  distToPlot = getDistToPlot(pMax);\n\n  while (distToPlot) {\n    pMax -= distToPlot + buffer;\n    if (pMin > pMax) return;\n    distToPlot = getDistToPlot(pMax);\n  }\n\n  return {\n    min: pMin,\n    max: pMax,\n    len: pMax - pMin,\n    total: pTotal,\n    isClosed: pMin === 0 && pMax === pTotal && Math.abs(pt0.x - ptTotal.x) < 0.1 && Math.abs(pt0.y - ptTotal.y) < 0.1\n  };\n};\n/**\n * Find point on SVG path corresponding to a given constraint coordinate\n *\n * @param {SVGPathElement} path\n * @param {Number} val : constraint coordinate value\n * @param {String} coord : 'x' or 'y' the constraint coordinate\n * @param {Object} opts :\n *  - {Number} pathLength : supply total path length before hand\n *  - {Number} tolerance\n *  - {Number} iterationLimit\n * @return {SVGPoint}\n */\n\n\nexports.findPointOnPath = function findPointOnPath(path, val, coord, opts) {\n  opts = opts || {};\n  var pathLength = opts.pathLength || path.getTotalLength();\n  var tolerance = opts.tolerance || 1e-3;\n  var iterationLimit = opts.iterationLimit || 30; // if path starts at a val greater than the path tail (like on vertical violins),\n  // we must flip the sign of the computed diff.\n\n  var mul = path.getPointAtLength(0)[coord] > path.getPointAtLength(pathLength)[coord] ? -1 : 1;\n  var i = 0;\n  var b0 = 0;\n  var b1 = pathLength;\n  var mid;\n  var pt;\n  var diff;\n\n  while (i < iterationLimit) {\n    mid = (b0 + b1) / 2;\n    pt = path.getPointAtLength(mid);\n    diff = pt[coord] - val;\n\n    if (Math.abs(diff) < tolerance) {\n      return pt;\n    } else {\n      if (mul * diff > 0) {\n        b1 = mid;\n      } else {\n        b0 = mid;\n      }\n\n      i++;\n    }\n  }\n\n  return pt;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar cleanNumber = Lib.cleanNumber;\nvar ms2DateTime = Lib.ms2DateTime;\nvar dateTime2ms = Lib.dateTime2ms;\nvar ensureNumber = Lib.ensureNumber;\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\n\nvar numConstants = require('../../constants/numerical');\n\nvar FP_SAFE = numConstants.FP_SAFE;\nvar BADNUM = numConstants.BADNUM;\nvar LOG_CLIP = numConstants.LOG_CLIP;\n\nvar constants = require('./constants');\n\nvar axisIds = require('./axis_ids');\n\nfunction fromLog(v) {\n  return Math.pow(10, v);\n}\n\nfunction isValidCategory(v) {\n  return v !== null && v !== undefined;\n}\n/**\n * Define the conversion functions for an axis data is used in 5 ways:\n *\n *  d: data, in whatever form it's provided\n *  c: calcdata: turned into numbers, but not linearized\n *  l: linearized - same as c except for log axes (and other nonlinear\n *      mappings later?) this is used when we need to know if it's\n *      *possible* to show some data on this axis, without caring about\n *      the current range\n *  p: pixel value - mapped to the screen with current size and zoom\n *  r: ranges, tick0, and annotation positions match one of the above\n *     but are handled differently for different types:\n *     - linear and date: data format (d)\n *     - category: calcdata format (c), and will stay that way because\n *       the data format has no continuous mapping\n *     - log: linearized (l) format\n *       TODO: in v2.0 we plan to change it to data format. At that point\n *       shapes will work the same way as ranges, tick0, and annotations\n *       so they can use this conversion too.\n *\n * Creates/updates these conversion functions, and a few more utilities\n * like cleanRange, and makeCalcdata\n *\n * also clears the autotick constraints ._minDtick, ._forceTick0\n */\n\n\nmodule.exports = function setConvert(ax, fullLayout) {\n  fullLayout = fullLayout || {};\n  var axId = ax._id || 'x';\n  var axLetter = axId.charAt(0);\n\n  function toLog(v, clip) {\n    if (v > 0) return Math.log(v) / Math.LN10;else if (v <= 0 && clip && ax.range && ax.range.length === 2) {\n      // clip NaN (ie past negative infinity) to LOG_CLIP axis\n      // length past the negative edge\n      var r0 = ax.range[0];\n      var r1 = ax.range[1];\n      return 0.5 * (r0 + r1 - 2 * LOG_CLIP * Math.abs(r0 - r1));\n    } else return BADNUM;\n  }\n  /*\n   * wrapped dateTime2ms that:\n   * - accepts ms numbers for backward compatibility\n   * - inserts a dummy arg so calendar is the 3rd arg (see notes below).\n   * - defaults to ax.calendar\n   */\n\n\n  function dt2ms(v, _, calendar) {\n    // NOTE: Changed this behavior: previously we took any numeric value\n    // to be a ms, even if it was a string that could be a bare year.\n    // Now we convert it as a date if at all possible, and only try\n    // as (local) ms if that fails.\n    var ms = dateTime2ms(v, calendar || ax.calendar);\n\n    if (ms === BADNUM) {\n      if (isNumeric(v)) {\n        v = +v; // keep track of tenths of ms, that `new Date` will drop\n        // same logic as in Lib.ms2DateTime\n\n        var msecTenths = Math.floor(Lib.mod(v + 0.05, 1) * 10);\n        var msRounded = Math.round(v - msecTenths / 10);\n        ms = dateTime2ms(new Date(msRounded)) + msecTenths / 10;\n      } else return BADNUM;\n    }\n\n    return ms;\n  } // wrapped ms2DateTime to insert default ax.calendar\n\n\n  function ms2dt(v, r, calendar) {\n    return ms2DateTime(v, r, calendar || ax.calendar);\n  }\n\n  function getCategoryName(v) {\n    return ax._categories[Math.round(v)];\n  }\n  /*\n   * setCategoryIndex: return the index of category v,\n   * inserting it in the list if it's not already there\n   *\n   * this will enter the categories in the order it\n   * encounters them, ie all the categories from the\n   * first data set, then all the ones from the second\n   * that aren't in the first etc.\n   *\n   * it is assumed that this function is being invoked in the\n   * already sorted category order; otherwise there would be\n   * a disconnect between the array and the index returned\n   */\n\n\n  function setCategoryIndex(v) {\n    if (isValidCategory(v)) {\n      if (ax._categoriesMap === undefined) {\n        ax._categoriesMap = {};\n      }\n\n      if (ax._categoriesMap[v] !== undefined) {\n        return ax._categoriesMap[v];\n      } else {\n        ax._categories.push(typeof v === 'number' ? String(v) : v);\n\n        var curLength = ax._categories.length - 1;\n        ax._categoriesMap[v] = curLength;\n        return curLength;\n      }\n    }\n\n    return BADNUM;\n  }\n\n  function setMultiCategoryIndex(arrayIn, len) {\n    var arrayOut = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var v0 = (arrayIn[0] || [])[i];\n      var v1 = (arrayIn[1] || [])[i];\n      arrayOut[i] = getCategoryIndex([v0, v1]);\n    }\n\n    return arrayOut;\n  }\n\n  function getCategoryIndex(v) {\n    if (ax._categoriesMap) {\n      return ax._categoriesMap[v];\n    }\n  }\n\n  function getCategoryPosition(v) {\n    // d2l/d2c variant that that won't add categories but will also\n    // allow numbers to be mapped to the linearized axis positions\n    var index = getCategoryIndex(v);\n    if (index !== undefined) return index;\n    if (isNumeric(v)) return +v;\n  }\n\n  function l2p(v) {\n    if (!isNumeric(v)) return BADNUM; // include 2 fractional digits on pixel, for PDF zooming etc\n\n    return d3.round(ax._b + ax._m * v, 2);\n  }\n\n  function p2l(px) {\n    return (px - ax._b) / ax._m;\n  } // conversions among c/l/p are fairly simple - do them together for all axis types\n\n\n  ax.c2l = ax.type === 'log' ? toLog : ensureNumber;\n  ax.l2c = ax.type === 'log' ? fromLog : ensureNumber;\n  ax.l2p = l2p;\n  ax.p2l = p2l;\n  ax.c2p = ax.type === 'log' ? function (v, clip) {\n    return l2p(toLog(v, clip));\n  } : l2p;\n  ax.p2c = ax.type === 'log' ? function (px) {\n    return fromLog(p2l(px));\n  } : p2l;\n  /*\n   * now type-specific conversions for **ALL** other combinations\n   * they're all written out, instead of being combinations of each other, for\n   * both clarity and speed.\n   */\n\n  if (['linear', '-'].indexOf(ax.type) !== -1) {\n    // all are data vals, but d and r need cleaning\n    ax.d2r = ax.r2d = ax.d2c = ax.r2c = ax.d2l = ax.r2l = cleanNumber;\n    ax.c2d = ax.c2r = ax.l2d = ax.l2r = ensureNumber;\n\n    ax.d2p = ax.r2p = function (v) {\n      return ax.l2p(cleanNumber(v));\n    };\n\n    ax.p2d = ax.p2r = p2l;\n    ax.cleanPos = ensureNumber;\n  } else if (ax.type === 'log') {\n    // d and c are data vals, r and l are logged (but d and r need cleaning)\n    ax.d2r = ax.d2l = function (v, clip) {\n      return toLog(cleanNumber(v), clip);\n    };\n\n    ax.r2d = ax.r2c = function (v) {\n      return fromLog(cleanNumber(v));\n    };\n\n    ax.d2c = ax.r2l = cleanNumber;\n    ax.c2d = ax.l2r = ensureNumber;\n    ax.c2r = toLog;\n    ax.l2d = fromLog;\n\n    ax.d2p = function (v, clip) {\n      return ax.l2p(ax.d2r(v, clip));\n    };\n\n    ax.p2d = function (px) {\n      return fromLog(p2l(px));\n    };\n\n    ax.r2p = function (v) {\n      return ax.l2p(cleanNumber(v));\n    };\n\n    ax.p2r = p2l;\n    ax.cleanPos = ensureNumber;\n  } else if (ax.type === 'date') {\n    // r and d are date strings, l and c are ms\n\n    /*\n     * Any of these functions with r and d on either side, calendar is the\n     * **3rd** argument. log has reserved the second argument.\n     *\n     * Unless you need the special behavior of the second arg (ms2DateTime\n     * uses this to limit precision, toLog uses true to clip negatives\n     * to offscreen low rather than undefined), it's safe to pass 0.\n     */\n    ax.d2r = ax.r2d = Lib.identity;\n    ax.d2c = ax.r2c = ax.d2l = ax.r2l = dt2ms;\n    ax.c2d = ax.c2r = ax.l2d = ax.l2r = ms2dt;\n\n    ax.d2p = ax.r2p = function (v, _, calendar) {\n      return ax.l2p(dt2ms(v, 0, calendar));\n    };\n\n    ax.p2d = ax.p2r = function (px, r, calendar) {\n      return ms2dt(p2l(px), r, calendar);\n    };\n\n    ax.cleanPos = function (v) {\n      return Lib.cleanDate(v, BADNUM, ax.calendar);\n    };\n  } else if (ax.type === 'category') {\n    // d is categories (string)\n    // c and l are indices (numbers)\n    // r is categories or numbers\n    ax.d2c = ax.d2l = setCategoryIndex;\n    ax.r2d = ax.c2d = ax.l2d = getCategoryName;\n    ax.d2r = ax.d2l_noadd = getCategoryPosition;\n\n    ax.r2c = function (v) {\n      var index = getCategoryPosition(v);\n      return index !== undefined ? index : ax.fraction2r(0.5);\n    };\n\n    ax.l2r = ax.c2r = ensureNumber;\n    ax.r2l = getCategoryPosition;\n\n    ax.d2p = function (v) {\n      return ax.l2p(ax.r2c(v));\n    };\n\n    ax.p2d = function (px) {\n      return getCategoryName(p2l(px));\n    };\n\n    ax.r2p = ax.d2p;\n    ax.p2r = p2l;\n\n    ax.cleanPos = function (v) {\n      if (typeof v === 'string' && v !== '') return v;\n      return ensureNumber(v);\n    };\n  } else if (ax.type === 'multicategory') {\n    // N.B. multicategory axes don't define d2c and d2l,\n    // as 'data-to-calcdata' conversion needs to take into\n    // account all data array items as in ax.makeCalcdata.\n    ax.r2d = ax.c2d = ax.l2d = getCategoryName;\n    ax.d2r = ax.d2l_noadd = getCategoryPosition;\n\n    ax.r2c = function (v) {\n      var index = getCategoryPosition(v);\n      return index !== undefined ? index : ax.fraction2r(0.5);\n    };\n\n    ax.r2c_just_indices = getCategoryIndex;\n    ax.l2r = ax.c2r = ensureNumber;\n    ax.r2l = getCategoryPosition;\n\n    ax.d2p = function (v) {\n      return ax.l2p(ax.r2c(v));\n    };\n\n    ax.p2d = function (px) {\n      return getCategoryName(p2l(px));\n    };\n\n    ax.r2p = ax.d2p;\n    ax.p2r = p2l;\n\n    ax.cleanPos = function (v) {\n      if (Array.isArray(v) || typeof v === 'string' && v !== '') return v;\n      return ensureNumber(v);\n    };\n\n    ax.setupMultiCategory = function (fullData) {\n      var traceIndices = ax._traceIndices;\n      var i, j;\n      var matchGroups = fullLayout._axisMatchGroups;\n\n      if (matchGroups && matchGroups.length && ax._categories.length === 0) {\n        for (i = 0; i < matchGroups.length; i++) {\n          var group = matchGroups[i];\n\n          if (group[axId]) {\n            for (var axId2 in group) {\n              if (axId2 !== axId) {\n                var ax2 = fullLayout[axisIds.id2name(axId2)];\n                traceIndices = traceIndices.concat(ax2._traceIndices);\n              }\n            }\n          }\n        }\n      } // [ [cnt, {$cat: index}], for 1,2 ]\n\n\n      var seen = [[0, {}], [0, {}]]; // [ [arrayIn[0][i], arrayIn[1][i]], for i .. N ]\n\n      var list = [];\n\n      for (i = 0; i < traceIndices.length; i++) {\n        var trace = fullData[traceIndices[i]];\n\n        if (axLetter in trace) {\n          var arrayIn = trace[axLetter];\n          var len = trace._length || Lib.minRowLength(arrayIn);\n\n          if (isArrayOrTypedArray(arrayIn[0]) && isArrayOrTypedArray(arrayIn[1])) {\n            for (j = 0; j < len; j++) {\n              var v0 = arrayIn[0][j];\n              var v1 = arrayIn[1][j];\n\n              if (isValidCategory(v0) && isValidCategory(v1)) {\n                list.push([v0, v1]);\n\n                if (!(v0 in seen[0][1])) {\n                  seen[0][1][v0] = seen[0][0]++;\n                }\n\n                if (!(v1 in seen[1][1])) {\n                  seen[1][1][v1] = seen[1][0]++;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      list.sort(function (a, b) {\n        var ind0 = seen[0][1];\n        var d = ind0[a[0]] - ind0[b[0]];\n        if (d) return d;\n        var ind1 = seen[1][1];\n        return ind1[a[1]] - ind1[b[1]];\n      });\n\n      for (i = 0; i < list.length; i++) {\n        setCategoryIndex(list[i]);\n      }\n    };\n  } // find the range value at the specified (linear) fraction of the axis\n\n\n  ax.fraction2r = function (v) {\n    var rl0 = ax.r2l(ax.range[0]);\n    var rl1 = ax.r2l(ax.range[1]);\n    return ax.l2r(rl0 + v * (rl1 - rl0));\n  }; // find the fraction of the range at the specified range value\n\n\n  ax.r2fraction = function (v) {\n    var rl0 = ax.r2l(ax.range[0]);\n    var rl1 = ax.r2l(ax.range[1]);\n    return (ax.r2l(v) - rl0) / (rl1 - rl0);\n  };\n  /*\n   * cleanRange: make sure range is a couplet of valid & distinct values\n   * keep numbers away from the limits of floating point numbers,\n   * and dates away from the ends of our date system (+/- 9999 years)\n   *\n   * optional param rangeAttr: operate on a different attribute, like\n   * ax._r, rather than ax.range\n   */\n\n\n  ax.cleanRange = function (rangeAttr, opts) {\n    if (!opts) opts = {};\n    if (!rangeAttr) rangeAttr = 'range';\n    var range = Lib.nestedProperty(ax, rangeAttr).get();\n    var i, dflt;\n    if (ax.type === 'date') dflt = Lib.dfltRange(ax.calendar);else if (axLetter === 'y') dflt = constants.DFLTRANGEY;else dflt = opts.dfltRange || constants.DFLTRANGEX; // make sure we don't later mutate the defaults\n\n    dflt = dflt.slice();\n\n    if (ax.rangemode === 'tozero' || ax.rangemode === 'nonnegative') {\n      dflt[0] = 0;\n    }\n\n    if (!range || range.length !== 2) {\n      Lib.nestedProperty(ax, rangeAttr).set(dflt);\n      return;\n    }\n\n    if (ax.type === 'date' && !ax.autorange) {\n      // check if milliseconds or js date objects are provided for range\n      // and convert to date strings\n      range[0] = Lib.cleanDate(range[0], BADNUM, ax.calendar);\n      range[1] = Lib.cleanDate(range[1], BADNUM, ax.calendar);\n    }\n\n    for (i = 0; i < 2; i++) {\n      if (ax.type === 'date') {\n        if (!Lib.isDateTime(range[i], ax.calendar)) {\n          ax[rangeAttr] = dflt;\n          break;\n        }\n\n        if (ax.r2l(range[0]) === ax.r2l(range[1])) {\n          // split by +/- 1 second\n          var linCenter = Lib.constrain(ax.r2l(range[0]), Lib.MIN_MS + 1000, Lib.MAX_MS - 1000);\n          range[0] = ax.l2r(linCenter - 1000);\n          range[1] = ax.l2r(linCenter + 1000);\n          break;\n        }\n      } else {\n        if (!isNumeric(range[i])) {\n          if (isNumeric(range[1 - i])) {\n            range[i] = range[1 - i] * (i ? 10 : 0.1);\n          } else {\n            ax[rangeAttr] = dflt;\n            break;\n          }\n        }\n\n        if (range[i] < -FP_SAFE) range[i] = -FP_SAFE;else if (range[i] > FP_SAFE) range[i] = FP_SAFE;\n\n        if (range[0] === range[1]) {\n          // somewhat arbitrary: split by 1 or 1ppm, whichever is bigger\n          var inc = Math.max(1, Math.abs(range[0] * 1e-6));\n          range[0] -= inc;\n          range[1] += inc;\n        }\n      }\n    }\n  }; // set scaling to pixels\n\n\n  ax.setScale = function (usePrivateRange) {\n    var gs = fullLayout._size; // make sure we have a domain (pull it in from the axis\n    // this one is overlaying if necessary)\n\n    if (ax.overlaying) {\n      var ax2 = axisIds.getFromId({\n        _fullLayout: fullLayout\n      }, ax.overlaying);\n      ax.domain = ax2.domain;\n    } // While transitions are occuring, occurring, we get a double-transform\n    // issue if we transform the drawn layer *and* use the new axis range to\n    // draw the data. This allows us to construct setConvert using the pre-\n    // interaction values of the range:\n\n\n    var rangeAttr = usePrivateRange && ax._r ? '_r' : 'range';\n    var calendar = ax.calendar;\n    ax.cleanRange(rangeAttr);\n    var rl0 = ax.r2l(ax[rangeAttr][0], calendar);\n    var rl1 = ax.r2l(ax[rangeAttr][1], calendar);\n\n    if (axLetter === 'y') {\n      ax._offset = gs.t + (1 - ax.domain[1]) * gs.h;\n      ax._length = gs.h * (ax.domain[1] - ax.domain[0]);\n      ax._m = ax._length / (rl0 - rl1);\n      ax._b = -ax._m * rl1;\n    } else {\n      ax._offset = gs.l + ax.domain[0] * gs.w;\n      ax._length = gs.w * (ax.domain[1] - ax.domain[0]);\n      ax._m = ax._length / (rl1 - rl0);\n      ax._b = -ax._m * rl0;\n    }\n\n    if (!isFinite(ax._m) || !isFinite(ax._b) || ax._length < 0) {\n      fullLayout._replotting = false;\n      throw new Error('Something went wrong with axis scaling');\n    }\n  }; // makeCalcdata: takes an x or y array and converts it\n  // to a position on the axis object \"ax\"\n  // inputs:\n  //      trace - a data object from gd.data\n  //      axLetter - a string, either 'x' or 'y', for which item\n  //          to convert (TODO: is this now always the same as\n  //          the first letter of ax._id?)\n  // in case the expected data isn't there, make a list of\n  // integers based on the opposite data\n\n\n  ax.makeCalcdata = function (trace, axLetter) {\n    var arrayIn, arrayOut, i, len;\n    var axType = ax.type;\n    var cal = axType === 'date' && trace[axLetter + 'calendar'];\n\n    if (axLetter in trace) {\n      arrayIn = trace[axLetter];\n      len = trace._length || Lib.minRowLength(arrayIn);\n\n      if (Lib.isTypedArray(arrayIn) && (axType === 'linear' || axType === 'log')) {\n        if (len === arrayIn.length) {\n          return arrayIn;\n        } else if (arrayIn.subarray) {\n          return arrayIn.subarray(0, len);\n        }\n      }\n\n      if (axType === 'multicategory') {\n        return setMultiCategoryIndex(arrayIn, len);\n      }\n\n      arrayOut = new Array(len);\n\n      for (i = 0; i < len; i++) {\n        arrayOut[i] = ax.d2c(arrayIn[i], 0, cal);\n      }\n    } else {\n      var v0 = axLetter + '0' in trace ? ax.d2c(trace[axLetter + '0'], 0, cal) : 0;\n      var dv = trace['d' + axLetter] ? Number(trace['d' + axLetter]) : 1; // the opposing data, for size if we have x and dx etc\n\n      arrayIn = trace[{\n        x: 'y',\n        y: 'x'\n      }[axLetter]];\n      len = trace._length || arrayIn.length;\n      arrayOut = new Array(len);\n\n      for (i = 0; i < len; i++) {\n        arrayOut[i] = v0 + i * dv;\n      }\n    }\n\n    return arrayOut;\n  };\n\n  ax.isValidRange = function (range) {\n    return Array.isArray(range) && range.length === 2 && isNumeric(ax.r2l(range[0])) && isNumeric(ax.r2l(range[1]));\n  };\n\n  ax.isPtWithinRange = function (d, calendar) {\n    var coord = ax.c2l(d[axLetter], null, calendar);\n    var r0 = ax.r2l(ax.range[0]);\n    var r1 = ax.r2l(ax.range[1]);\n\n    if (r0 < r1) {\n      return r0 <= coord && coord <= r1;\n    } else {\n      // Reversed axis case.\n      return r1 <= coord && coord <= r0;\n    }\n  }; // should skip if not category nor multicategory\n\n\n  ax.clearCalc = function () {\n    var emptyCategories = function emptyCategories() {\n      ax._categories = [];\n      ax._categoriesMap = {};\n    };\n\n    var matchGroups = fullLayout._axisMatchGroups;\n\n    if (matchGroups && matchGroups.length) {\n      var found = false;\n\n      for (var i = 0; i < matchGroups.length; i++) {\n        var group = matchGroups[i];\n\n        if (group[axId]) {\n          found = true;\n          var categories = null;\n          var categoriesMap = null;\n\n          for (var axId2 in group) {\n            var ax2 = fullLayout[axisIds.id2name(axId2)];\n\n            if (ax2._categories) {\n              categories = ax2._categories;\n              categoriesMap = ax2._categoriesMap;\n              break;\n            }\n          }\n\n          if (categories && categoriesMap) {\n            ax._categories = categories;\n            ax._categoriesMap = categoriesMap;\n          } else {\n            emptyCategories();\n          }\n\n          break;\n        }\n      }\n\n      if (!found) emptyCategories();\n    } else {\n      emptyCategories();\n    }\n\n    if (ax._initialCategories) {\n      for (var j = 0; j < ax._initialCategories.length; j++) {\n        setCategoryIndex(ax._initialCategories[j]);\n      }\n    }\n  }; // sort the axis (and all the matching ones) by _initialCategories\n  // returns the indices of the traces affected by the reordering\n\n\n  ax.sortByInitialCategories = function () {\n    var affectedTraces = [];\n\n    var emptyCategories = function emptyCategories() {\n      ax._categories = [];\n      ax._categoriesMap = {};\n    };\n\n    emptyCategories();\n\n    if (ax._initialCategories) {\n      for (var j = 0; j < ax._initialCategories.length; j++) {\n        setCategoryIndex(ax._initialCategories[j]);\n      }\n    }\n\n    affectedTraces = affectedTraces.concat(ax._traceIndices); // Propagate to matching axes\n\n    var group = ax._matchGroup;\n\n    for (var axId2 in group) {\n      if (axId === axId2) continue;\n      var ax2 = fullLayout[axisIds.id2name(axId2)];\n      ax2._categories = ax._categories;\n      ax2._categoriesMap = ax._categoriesMap;\n      affectedTraces = affectedTraces.concat(ax2._traceIndices);\n    }\n\n    return affectedTraces;\n  }; // Propagate localization into the axis so that\n  // methods in Axes can use it w/o having to pass fullLayout\n  // Default (non-d3) number formatting uses separators directly\n  // dates and d3-formatted numbers use the d3 locale\n  // Fall back on default format for dummy axes that don't care about formatting\n\n\n  var locale = fullLayout._d3locale;\n\n  if (ax.type === 'date') {\n    ax._dateFormat = locale ? locale.timeFormat.utc : d3.time.format.utc;\n    ax._extraFormat = fullLayout._extraFormat;\n  } // occasionally we need _numFormat to pass through\n  // even though it won't be needed by this axis\n\n\n  ax._separators = fullLayout.separators;\n  ax._numFormat = locale ? locale.numberFormat : d3.format; // and for bar charts and box plots: reset forced minimum tick spacing\n\n  delete ax._minDtick;\n  delete ax._forceTick0;\n};","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? Were done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar Lib = require('../../lib');\n\nvar hasColorscale = require('./helpers').hasColorscale;\n\nvar extractOpts = require('./helpers').extractOpts;\n\nmodule.exports = function crossTraceDefaults(fullData, fullLayout) {\n  function replace(cont, k) {\n    var val = cont['_' + k];\n\n    if (val !== undefined) {\n      cont[k] = val;\n    }\n  }\n\n  function relinkColorAttrs(outerCont, cbOpt) {\n    var cont = cbOpt.container ? Lib.nestedProperty(outerCont, cbOpt.container).get() : outerCont;\n\n    if (cont) {\n      if (cont.coloraxis) {\n        // stash ref to color axis\n        cont._colorAx = fullLayout[cont.coloraxis];\n      } else {\n        var cOpts = extractOpts(cont);\n        var isAuto = cOpts.auto;\n\n        if (isAuto || cOpts.min === undefined) {\n          replace(cont, cbOpt.min);\n        }\n\n        if (isAuto || cOpts.max === undefined) {\n          replace(cont, cbOpt.max);\n        }\n\n        if (cOpts.autocolorscale) {\n          replace(cont, 'colorscale');\n        }\n      }\n    }\n  }\n\n  for (var i = 0; i < fullData.length; i++) {\n    var trace = fullData[i];\n    var cbOpts = trace._module.colorbar;\n\n    if (cbOpts) {\n      if (Array.isArray(cbOpts)) {\n        for (var j = 0; j < cbOpts.length; j++) {\n          relinkColorAttrs(trace, cbOpts[j]);\n        }\n      } else {\n        relinkColorAttrs(trace, cbOpts);\n      }\n    }\n\n    if (hasColorscale(trace, 'marker.line')) {\n      relinkColorAttrs(trace, {\n        container: 'marker.line',\n        min: 'cmin',\n        max: 'cmax'\n      });\n    }\n  }\n\n  for (var k in fullLayout._colorAxes) {\n    relinkColorAttrs(fullLayout[k], {\n      min: 'cmin',\n      max: 'cmax'\n    });\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nmodule.exports = function handleHoverLabelDefaults(contIn, contOut, coerce, opts) {\n  opts = opts || {};\n  coerce('hoverlabel.bgcolor', opts.bgcolor);\n  coerce('hoverlabel.bordercolor', opts.bordercolor);\n  coerce('hoverlabel.namelength', opts.namelength);\n  Lib.coerceFont(coerce, 'hoverlabel.font', opts.font);\n  coerce('hoverlabel.align', opts.align);\n};","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', { ownKeys: require('./_own-keys') });\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar d3 = require('d3');\n\nvar tinycolor = require('tinycolor2');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar Color = require('../color');\n\nvar isValidScale = require('./scales').isValid;\n\nfunction hasColorscale(trace, containerStr, colorKey) {\n  var container = containerStr ? Lib.nestedProperty(trace, containerStr).get() || {} : trace;\n  var color = container[colorKey || 'color'];\n  var isArrayWithOneNumber = false;\n\n  if (Lib.isArrayOrTypedArray(color)) {\n    for (var i = 0; i < color.length; i++) {\n      if (isNumeric(color[i])) {\n        isArrayWithOneNumber = true;\n        break;\n      }\n    }\n  }\n\n  return Lib.isPlainObject(container) && (isArrayWithOneNumber || container.showscale === true || isNumeric(container.cmin) && isNumeric(container.cmax) || isValidScale(container.colorscale) || Lib.isPlainObject(container.colorbar));\n}\n\nvar constantAttrs = ['showscale', 'autocolorscale', 'colorscale', 'reversescale', 'colorbar'];\nvar letterAttrs = ['min', 'max', 'mid', 'auto'];\n/**\n * Extract 'c' / 'z', trace / color axis colorscale options\n *\n * Note that it would be nice to replace all z* with c* equivalents in v2\n *\n * @param {object} cont : attribute container\n * @return {object}:\n *  - min: cmin or zmin\n *  - max: cmax or zmax\n *  - mid: cmid or zmid\n *  - auto: cauto or zauto\n *  - *scale: *scale attrs\n *  - colorbar: colorbar\n *  - _sync: function syncing attr and underscore dual (useful when calc'ing min/max)\n */\n\nfunction extractOpts(cont) {\n  var colorAx = cont._colorAx;\n  var cont2 = colorAx ? colorAx : cont;\n  var out = {};\n  var cLetter;\n  var i, k;\n\n  for (i = 0; i < constantAttrs.length; i++) {\n    k = constantAttrs[i];\n    out[k] = cont2[k];\n  }\n\n  if (colorAx) {\n    cLetter = 'c';\n\n    for (i = 0; i < letterAttrs.length; i++) {\n      k = letterAttrs[i];\n      out[k] = cont2['c' + k];\n    }\n  } else {\n    var k2;\n\n    for (i = 0; i < letterAttrs.length; i++) {\n      k = letterAttrs[i];\n      k2 = 'c' + k;\n\n      if (k2 in cont2) {\n        out[k] = cont2[k2];\n        continue;\n      }\n\n      k2 = 'z' + k;\n\n      if (k2 in cont2) {\n        out[k] = cont2[k2];\n      }\n    }\n\n    cLetter = k2.charAt(0);\n  }\n\n  out._sync = function (k, v) {\n    var k2 = letterAttrs.indexOf(k) !== -1 ? cLetter + k : k;\n    cont2[k2] = cont2['_' + k2] = v;\n  };\n\n  return out;\n}\n/**\n * Extract colorscale into numeric domain and color range.\n *\n * @param {object} cont colorscale container (e.g. trace, marker)\n *  - colorscale {array of arrays}\n *  - cmin/zmin {number}\n *  - cmax/zmax {number}\n *  - reversescale {boolean}\n *\n * @return {object}\n *  - domain {array}\n *  - range {array}\n */\n\n\nfunction extractScale(cont) {\n  var cOpts = extractOpts(cont);\n  var cmin = cOpts.min;\n  var cmax = cOpts.max;\n  var scl = cOpts.reversescale ? flipScale(cOpts.colorscale) : cOpts.colorscale;\n  var N = scl.length;\n  var domain = new Array(N);\n  var range = new Array(N);\n\n  for (var i = 0; i < N; i++) {\n    var si = scl[i];\n    domain[i] = cmin + si[0] * (cmax - cmin);\n    range[i] = si[1];\n  }\n\n  return {\n    domain: domain,\n    range: range\n  };\n}\n\nfunction flipScale(scl) {\n  var N = scl.length;\n  var sclNew = new Array(N);\n\n  for (var i = N - 1, j = 0; i >= 0; i--, j++) {\n    var si = scl[i];\n    sclNew[j] = [1 - si[0], si[1]];\n  }\n\n  return sclNew;\n}\n/**\n * General colorscale function generator.\n *\n * @param {object} specs output of Colorscale.extractScale or precomputed domain, range.\n *  - domain {array}\n *  - range {array}\n *\n * @param {object} opts\n *  - noNumericCheck {boolean} if true, scale func bypasses numeric checks\n *  - returnArray {boolean} if true, scale func return 4-item array instead of color strings\n *\n * @return {function}\n */\n\n\nfunction makeColorScaleFunc(specs, opts) {\n  opts = opts || {};\n  var domain = specs.domain;\n  var range = specs.range;\n  var N = range.length;\n\n  var _range = new Array(N);\n\n  for (var i = 0; i < N; i++) {\n    var rgba = tinycolor(range[i]).toRgb();\n    _range[i] = [rgba.r, rgba.g, rgba.b, rgba.a];\n  }\n\n  var _sclFunc = d3.scale.linear().domain(domain).range(_range).clamp(true);\n\n  var noNumericCheck = opts.noNumericCheck;\n  var returnArray = opts.returnArray;\n  var sclFunc;\n\n  if (noNumericCheck && returnArray) {\n    sclFunc = _sclFunc;\n  } else if (noNumericCheck) {\n    sclFunc = function sclFunc(v) {\n      return colorArray2rbga(_sclFunc(v));\n    };\n  } else if (returnArray) {\n    sclFunc = function sclFunc(v) {\n      if (isNumeric(v)) return _sclFunc(v);else if (tinycolor(v).isValid()) return v;else return Color.defaultLine;\n    };\n  } else {\n    sclFunc = function sclFunc(v) {\n      if (isNumeric(v)) return colorArray2rbga(_sclFunc(v));else if (tinycolor(v).isValid()) return v;else return Color.defaultLine;\n    };\n  } // colorbar draw looks into the d3 scale closure for domain and range\n\n\n  sclFunc.domain = _sclFunc.domain;\n\n  sclFunc.range = function () {\n    return range;\n  };\n\n  return sclFunc;\n}\n\nfunction makeColorScaleFuncFromTrace(trace, opts) {\n  return makeColorScaleFunc(extractScale(trace), opts);\n}\n\nfunction colorArray2rbga(colorArray) {\n  var colorObj = {\n    r: colorArray[0],\n    g: colorArray[1],\n    b: colorArray[2],\n    a: colorArray[3]\n  };\n  return tinycolor(colorObj).toRgbString();\n}\n\nmodule.exports = {\n  hasColorscale: hasColorscale,\n  extractOpts: extractOpts,\n  extractScale: extractScale,\n  flipScale: flipScale,\n  makeColorScaleFunc: makeColorScaleFunc,\n  makeColorScaleFuncFromTrace: makeColorScaleFuncFromTrace\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar layoutAttributes = require('./layout_attributes');\n/**\n * options: inherits outerTicks from axes.handleAxisDefaults\n */\n\n\nmodule.exports = function handleTickDefaults(containerIn, containerOut, coerce, options) {\n  var tickLen = Lib.coerce2(containerIn, containerOut, layoutAttributes, 'ticklen');\n  var tickWidth = Lib.coerce2(containerIn, containerOut, layoutAttributes, 'tickwidth');\n  var tickColor = Lib.coerce2(containerIn, containerOut, layoutAttributes, 'tickcolor', containerOut.color);\n  var showTicks = coerce('ticks', options.outerTicks || tickLen || tickWidth || tickColor ? 'outside' : '');\n\n  if (!showTicks) {\n    delete containerOut.ticklen;\n    delete containerOut.tickwidth;\n    delete containerOut.tickcolor;\n  }\n};","'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar fails = require('./_fails');\nvar getTime = Date.prototype.getTime;\nvar $toISOString = Date.prototype.toISOString;\n\nvar lz = function (num) {\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\nmodule.exports = (fails(function () {\n  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  $toISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');\n  var d = this;\n  var y = d.getUTCFullYear();\n  var m = d.getUTCMilliseconds();\n  var s = y < 0 ? '-' : y > 9999 ? '+' : '';\n  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n} : $toISOString;\n","require(\"core-js/modules/es6.array.for-each\");\n\n/*\n * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc\n * @license MIT\n * @preserve Project Home: https://github.com/voidqk/polybooljs\n */\nvar BuildLog = require('./lib/build-log');\n\nvar Epsilon = require('./lib/epsilon');\n\nvar Intersecter = require('./lib/intersecter');\n\nvar SegmentChainer = require('./lib/segment-chainer');\n\nvar SegmentSelector = require('./lib/segment-selector');\n\nvar GeoJSON = require('./lib/geojson');\n\nvar _buildLog = false;\n\nvar _epsilon = Epsilon();\n\nvar PolyBool;\nPolyBool = {\n  // getter/setter for buildLog\n  buildLog: function buildLog(bl) {\n    if (bl === true) _buildLog = BuildLog();else if (bl === false) _buildLog = false;\n    return _buildLog === false ? false : _buildLog.list;\n  },\n  // getter/setter for epsilon\n  epsilon: function epsilon(v) {\n    return _epsilon.epsilon(v);\n  },\n  // core API\n  segments: function segments(poly) {\n    var i = Intersecter(true, _epsilon, _buildLog);\n    poly.regions.forEach(i.addRegion);\n    return {\n      segments: i.calculate(poly.inverted),\n      inverted: poly.inverted\n    };\n  },\n  combine: function combine(segments1, segments2) {\n    var i3 = Intersecter(false, _epsilon, _buildLog);\n    return {\n      combined: i3.calculate(segments1.segments, segments1.inverted, segments2.segments, segments2.inverted),\n      inverted1: segments1.inverted,\n      inverted2: segments2.inverted\n    };\n  },\n  selectUnion: function selectUnion(combined) {\n    return {\n      segments: SegmentSelector.union(combined.combined, _buildLog),\n      inverted: combined.inverted1 || combined.inverted2\n    };\n  },\n  selectIntersect: function selectIntersect(combined) {\n    return {\n      segments: SegmentSelector.intersect(combined.combined, _buildLog),\n      inverted: combined.inverted1 && combined.inverted2\n    };\n  },\n  selectDifference: function selectDifference(combined) {\n    return {\n      segments: SegmentSelector.difference(combined.combined, _buildLog),\n      inverted: combined.inverted1 && !combined.inverted2\n    };\n  },\n  selectDifferenceRev: function selectDifferenceRev(combined) {\n    return {\n      segments: SegmentSelector.differenceRev(combined.combined, _buildLog),\n      inverted: !combined.inverted1 && combined.inverted2\n    };\n  },\n  selectXor: function selectXor(combined) {\n    return {\n      segments: SegmentSelector.xor(combined.combined, _buildLog),\n      inverted: combined.inverted1 !== combined.inverted2\n    };\n  },\n  polygon: function polygon(segments) {\n    return {\n      regions: SegmentChainer(segments.segments, _epsilon, _buildLog),\n      inverted: segments.inverted\n    };\n  },\n  // GeoJSON converters\n  polygonFromGeoJSON: function polygonFromGeoJSON(geojson) {\n    return GeoJSON.toPolygon(PolyBool, geojson);\n  },\n  polygonToGeoJSON: function polygonToGeoJSON(poly) {\n    return GeoJSON.fromPolygon(PolyBool, _epsilon, poly);\n  },\n  // helper functions for common operations\n  union: function union(poly1, poly2) {\n    return operate(poly1, poly2, PolyBool.selectUnion);\n  },\n  intersect: function intersect(poly1, poly2) {\n    return operate(poly1, poly2, PolyBool.selectIntersect);\n  },\n  difference: function difference(poly1, poly2) {\n    return operate(poly1, poly2, PolyBool.selectDifference);\n  },\n  differenceRev: function differenceRev(poly1, poly2) {\n    return operate(poly1, poly2, PolyBool.selectDifferenceRev);\n  },\n  xor: function xor(poly1, poly2) {\n    return operate(poly1, poly2, PolyBool.selectXor);\n  }\n};\n\nfunction operate(poly1, poly2, selector) {\n  var seg1 = PolyBool.segments(poly1);\n  var seg2 = PolyBool.segments(poly2);\n  var comb = PolyBool.combine(seg1, seg2);\n  var seg3 = selector(comb);\n  return PolyBool.polygon(seg3);\n}\n\nif (typeof window === 'object') window.PolyBool = PolyBool;\nmodule.exports = PolyBool;","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar overrideAll = require('plotly.js/src/plot_api/edit_types').overrideAll;\nvar getModuleCalcData = require('plotly.js/src/plots/get_data').getModuleCalcData;\nvar plot = require('./plot');\nvar fxAttrs = require('plotly.js/src/components/fx/layout_attributes');\n\nvar setCursor = require('plotly.js/src/lib/setcursor');\nvar dragElement = require('plotly.js/src/components/dragelement');\nvar prepSelect = require('plotly.js/src/plots/cartesian/select').prepSelect;\nvar Lib = require('plotly.js/src/lib');\nvar Registry = require('plotly.js/src/registry');\n\nvar SANKEY = 'sankey';\n\nexports.name = SANKEY;\n\nexports.baseLayoutAttrOverrides = overrideAll({\n  hoverlabel: fxAttrs.hoverlabel\n}, 'plot', 'nested');\n\nexports.plot = function (gd) {\n  var calcData = getModuleCalcData(gd.calcdata, SANKEY)[0];\n  plot(gd, calcData);\n  exports.updateFx(gd);\n};\n\nexports.clean = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var hadPlot = (oldFullLayout._has && oldFullLayout._has(SANKEY));\n  var hasPlot = (newFullLayout._has && newFullLayout._has(SANKEY));\n\n  if (hadPlot && !hasPlot) {\n    oldFullLayout._paperdiv.selectAll('.sankey').remove();\n    oldFullLayout._paperdiv.selectAll('.bgsankey').remove();\n  }\n};\n\nexports.updateFx = function (gd) {\n  for (var i = 0; i < gd._fullData.length; i++) {\n    subplotUpdateFx(gd, i);\n  }\n};\n\nfunction subplotUpdateFx(gd, index) {\n  var trace = gd._fullData[index];\n  var fullLayout = gd._fullLayout;\n\n  var dragMode = fullLayout.dragmode;\n  var cursor = fullLayout.dragmode === 'pan' ? 'move' : 'crosshair';\n  var bgRect = trace._bgRect;\n\n  if (dragMode === 'pan' || dragMode === 'zoom') return;\n\n  setCursor(bgRect, cursor);\n\n  var xaxis = {\n    _id: 'x',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateX,\n    _length: trace._sankey.width\n  };\n  var yaxis = {\n    _id: 'y',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateY,\n    _length: trace._sankey.height\n  };\n\n  // Note: dragOptions is needed to be declared for all dragmodes because\n  // it's the object that holds persistent selection state.\n  var dragOptions = {\n    gd: gd,\n    element: bgRect.node(),\n    plotinfo: {\n      id: index,\n      xaxis: xaxis,\n      yaxis: yaxis,\n      fillRangeItems: Lib.noop\n    },\n    subplot: index,\n    // create mock x/y axes for hover routine\n    xaxes: [xaxis],\n    yaxes: [yaxis],\n    doneFnCompleted: function (selection) {\n      var traceNow = gd._fullData[index];\n      var newGroups;\n      var oldGroups = traceNow.node.groups.slice();\n      var newGroup = [];\n\n      function findNode(pt) {\n        var nodes = traceNow._sankey.graph.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n          if (nodes[i].pointNumber === pt) return nodes[i];\n        }\n      }\n\n      for (var j = 0; j < selection.length; j++) {\n        var node = findNode(selection[j].pointNumber);\n        if (!node) continue;\n\n        // If the node represents a group\n        if (node.group) {\n          // Add all its children to the current selection\n          for (var k = 0; k < node.childrenNodes.length; k++) {\n            newGroup.push(node.childrenNodes[k].pointNumber);\n          }\n          // Flag group for removal from existing list of groups\n          oldGroups[node.pointNumber - traceNow.node._count] = false;\n        } else {\n          newGroup.push(node.pointNumber);\n        }\n      }\n\n      newGroups = oldGroups\n        .filter(Boolean)\n        .concat([newGroup]);\n\n      Registry.call('_guiRestyle', gd, {\n        'node.groups': [newGroups]\n      }, index);\n    }\n  };\n\n  dragOptions.prepFn = function (e, startX, startY) {\n    prepSelect(e, startX, startY, dragOptions, dragMode);\n  };\n\n  dragElement.init(dragOptions);\n}\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // for automatic alignment on dragging, <1/3 means left align,\n// >2/3 means right, and between is center. Pick the right fraction\n// based on where you are, and return the fraction corresponding to\n// that position on the object\n\nmodule.exports = function align(v, dv, v0, v1, anchor) {\n  var vmin = (v - v0) / (v1 - v0);\n  var vmax = vmin + dv / (v1 - v0);\n  var vc = (vmin + vmax) / 2; // explicitly specified anchor\n\n  if (anchor === 'left' || anchor === 'bottom') return vmin;\n  if (anchor === 'center' || anchor === 'middle') return vc;\n  if (anchor === 'right' || anchor === 'top') return vmax; // automatic based on position\n\n  if (vmin < 2 / 3 - vc) return vmin;\n  if (vmax > 4 / 3 - vc) return vmax;\n  return vc;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = function selectPoints(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var selection = [];\n  var fullData = cd[0].trace;\n  var nodes = fullData._sankey.graph.nodes;\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.partOfGroup) continue; // Those are invisible\n    // Position of node's centroid\n\n    var pos = [(node.x0 + node.x1) / 2, (node.y0 + node.y1) / 2]; // Swap x and y if trace is vertical\n\n    if (fullData.orientation === 'v') pos.reverse();\n\n    if (selectionTester && selectionTester.contains(pos, false, i, searchInfo)) {\n      selection.push({\n        pointNumber: node.pointNumber // TODO: add eventData\n\n      });\n    }\n  }\n\n  return selection;\n};","'use strict';\n\nvar isBrowser = require('is-browser');\n\nvar hasHover;\n\nif (typeof global.matchMedia === 'function') {\n  hasHover = !global.matchMedia('(hover: none)').matches;\n} else {\n  hasHover = isBrowser;\n}\n\nmodule.exports = hasHover;","import \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport { min, ascending, max, mean, sum } from 'd3-array';\nimport { map, nest } from 'd3-collection';\nimport { linkHorizontal } from 'd3-shape';\nimport findCircuits from 'elementary-circuits-directed-graph'; // For a given link, return the target node's depth\n\nfunction targetDepth(d) {\n  return d.target.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'left'\n\n\nfunction left(node) {\n  return node.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'right'\n\n\nfunction right(node, n) {\n  return n - 1 - node.height;\n} // The depth of a node when the nodeAlign (align) is set to 'justify'\n\n\nfunction justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n} // The depth of a node when the nodeAlign (align) is set to 'center'\n\n\nfunction center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n} // returns a function, using the parameter given to the sankey setting\n\n\nfunction constant(x) {\n  return function () {\n    return x;\n  };\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; /// https://github.com/tomshanley/d3-sankeyCircular-circular\n// sort links' breadth (ie top to bottom in a column), based on their source nodes' breadths\n\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n} // sort links' breadth (ie top to bottom in a column), based on their target nodes' breadths\n\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n} // sort nodes' breadth (ie top to bottom in a column)\n// if both nodes have circular links, or both don't have circular links, then sort by the top (y0) of the node\n// else push nodes that have top circular links to the top, and nodes that have bottom circular links to the bottom\n\n\nfunction ascendingBreadth(a, b) {\n  if (a.partOfCycle === b.partOfCycle) {\n    return a.y0 - b.y0;\n  } else {\n    if (a.circularLinkType === 'top' || b.circularLinkType === 'bottom') {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n} // return the value of a node or link\n\n\nfunction value(d) {\n  return d.value;\n} // return the vertical center of a node\n\n\nfunction nodeCenter(node) {\n  return (node.y0 + node.y1) / 2;\n} // return the vertical center of a link's source node\n\n\nfunction linkSourceCenter(link) {\n  return nodeCenter(link.source);\n} // return the vertical center of a link's target node\n\n\nfunction linkTargetCenter(link) {\n  return nodeCenter(link.target);\n} // Return the default value for ID for node, d.index\n\n\nfunction defaultId(d) {\n  return d.index;\n} // Return the default object the graph's nodes, graph.nodes\n\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n} // Return the default object the graph's nodes, graph.links\n\n\nfunction defaultLinks(graph) {\n  return graph.links;\n} // Return the node from the collection that matches the provided ID, or throw an error if no match\n\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error('missing: ' + id);\n  return node;\n}\n\nfunction getNodeID(node, id) {\n  return id(node);\n} // The main sankeyCircular functions\n// Some constants for circular link calculations\n\n\nvar verticalMargin = 25;\nvar baseRadius = 10;\nvar scale = 0.3; //Possibly let user control this, although anything over 0.5 starts to get too cramped\n\nfunction sankeyCircular() {\n  // Set the default values\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      // extent\n  dx = 24,\n      // nodeWidth\n  py,\n      // nodePadding, for vertical postioning\n  id = defaultId,\n      align = justify,\n      nodes = defaultNodes,\n      links = defaultLinks,\n      iterations = 32,\n      circularLinkGap = 2,\n      paddingRatio,\n      sortNodes = null;\n\n  function sankeyCircular() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments) // Process the graph's nodes and links, setting their positions\n      // 1.  Associate the nodes with their respective links, and vice versa\n\n    };\n    computeNodeLinks(graph); // 2.  Determine which links result in a circular path in the graph\n\n    identifyCircles(graph, id, sortNodes); // 4. Calculate the nodes' values, based on the values of the incoming and outgoing links\n\n    computeNodeValues(graph); // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n\n    computeNodeDepths(graph); // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n\n    computeNodeBreadths(graph, iterations, id);\n    computeLinkBreadths(graph); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n\n    var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n\n    for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n      resolveNodeLinkOverlaps(graph, y0, y1, id);\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n    } // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n\n\n    fillHeight(graph, y0, y1); // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  } // end of sankeyCircular function\n  // Set the sankeyCircular parameters\n  // nodeID, nodeAlign, nodeWidth, nodePadding, nodes, links, size, extent, iterations, nodePaddingRatio, circularLinkGap\n\n\n  sankeyCircular.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : id;\n  };\n\n  sankeyCircular.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : align;\n  };\n\n  sankeyCircular.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankeyCircular) : dx;\n  };\n\n  sankeyCircular.nodePadding = function (_) {\n    return arguments.length ? (py = +_, sankeyCircular) : py;\n  };\n\n  sankeyCircular.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : nodes;\n  };\n\n  sankeyCircular.links = function (_) {\n    return arguments.length ? (links = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : links;\n  };\n\n  sankeyCircular.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankeyCircular) : [x1 - x0, y1 - y0];\n  };\n\n  sankeyCircular.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankeyCircular) : [[x0, y0], [x1, y1]];\n  };\n\n  sankeyCircular.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankeyCircular) : iterations;\n  };\n\n  sankeyCircular.circularLinkGap = function (_) {\n    return arguments.length ? (circularLinkGap = +_, sankeyCircular) : circularLinkGap;\n  };\n\n  sankeyCircular.nodePaddingRatio = function (_) {\n    return arguments.length ? (paddingRatio = +_, sankeyCircular) : paddingRatio;\n  };\n\n  sankeyCircular.sortNodes = function (_) {\n    return arguments.length ? (sortNodes = _, sankeyCircular) : sortNodes;\n  };\n\n  sankeyCircular.update = function (graph) {\n    // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n    // computeNodeDepths(graph)\n    // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n    // computeNodeBreadths(graph, iterations, id)\n\n    computeLinkBreadths(graph); // Force position of circular link type based on position\n\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        link.circularLinkType = link.y0 + link.y1 < y1 ? 'top' : 'bottom';\n        link.source.circularLinkType = link.circularLinkType;\n        link.target.circularLinkType = link.circularLinkType;\n      }\n    });\n    sortSourceLinks(graph, y1, id, false); // Sort links but do not move nodes\n\n    sortTargetLinks(graph, y1, id); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n    // var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n    // for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n    //\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //   resolveNodeLinkOverlaps(graph, y0, y1, id)\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //\n    // }\n    // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n    // fillHeight(graph, y0, y1)\n    // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  }; // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n\n\n  function computeNodeLinks(graph) {\n    graph.nodes.forEach(function (node, i) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    var nodeById = map(graph.nodes, id);\n    graph.links.forEach(function (link, i) {\n      link.index = i;\n      var source = link.source;\n      var target = link.target;\n\n      if ((typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) !== 'object') {\n        source = link.source = find(nodeById, source);\n      }\n\n      if ((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) !== 'object') {\n        target = link.target = find(nodeById, target);\n      }\n\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n    return graph;\n  } // Compute the value (size) and cycleness of each node by summing the associated links.\n\n\n  function computeNodeValues(graph) {\n    graph.nodes.forEach(function (node) {\n      node.partOfCycle = false;\n      node.value = Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value));\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    });\n  }\n\n  function getCircleMargins(graph) {\n    var totalTopLinksWidth = 0,\n        totalBottomLinksWidth = 0,\n        totalRightLinksWidth = 0,\n        totalLeftLinksWidth = 0;\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        if (link.circularLinkType == 'top') {\n          totalTopLinksWidth = totalTopLinksWidth + link.width;\n        } else {\n          totalBottomLinksWidth = totalBottomLinksWidth + link.width;\n        }\n\n        if (link.target.column == 0) {\n          totalLeftLinksWidth = totalLeftLinksWidth + link.width;\n        }\n\n        if (link.source.column == maxColumn) {\n          totalRightLinksWidth = totalRightLinksWidth + link.width;\n        }\n      }\n    }); //account for radius of curves and padding between links\n\n    totalTopLinksWidth = totalTopLinksWidth > 0 ? totalTopLinksWidth + verticalMargin + baseRadius : totalTopLinksWidth;\n    totalBottomLinksWidth = totalBottomLinksWidth > 0 ? totalBottomLinksWidth + verticalMargin + baseRadius : totalBottomLinksWidth;\n    totalRightLinksWidth = totalRightLinksWidth > 0 ? totalRightLinksWidth + verticalMargin + baseRadius : totalRightLinksWidth;\n    totalLeftLinksWidth = totalLeftLinksWidth > 0 ? totalLeftLinksWidth + verticalMargin + baseRadius : totalLeftLinksWidth;\n    return {\n      \"top\": totalTopLinksWidth,\n      \"bottom\": totalBottomLinksWidth,\n      \"left\": totalLeftLinksWidth,\n      \"right\": totalRightLinksWidth\n    };\n  } // Update the x0, y0, x1 and y1 for the sankeyCircular, to allow space for any circular links\n\n\n  function scaleSankeySize(graph, margin) {\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    var currentWidth = x1 - x0;\n    var currentHeight = y1 - y0;\n    var newWidth = currentWidth + margin.right + margin.left;\n    var newHeight = currentHeight + margin.top + margin.bottom;\n    var scaleX = currentWidth / newWidth;\n    var scaleY = currentHeight / newHeight;\n    x0 = x0 * scaleX + margin.left;\n    x1 = margin.right == 0 ? x1 : x1 * scaleX;\n    y0 = y0 * scaleY + margin.top;\n    y1 = y1 * scaleY;\n    graph.nodes.forEach(function (node) {\n      node.x0 = x0 + node.column * ((x1 - x0 - dx) / maxColumn);\n      node.x1 = node.x0 + dx;\n    });\n    return scaleY;\n  } // Iteratively assign the depth for each node.\n  // Nodes are assigned the maximum depth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned depth zero, while\n  // nodes with no outgoing links are assigned the maximum depth.\n\n\n  function computeNodeDepths(graph) {\n    var nodes, next, x;\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.depth = x;\n        node.sourceLinks.forEach(function (link) {\n          if (next.indexOf(link.target) < 0 && !link.circular) {\n            next.push(link.target);\n          }\n        });\n      });\n    }\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.height = x;\n        node.targetLinks.forEach(function (link) {\n          if (next.indexOf(link.source) < 0 && !link.circular) {\n            next.push(link.source);\n          }\n        });\n      });\n    } // assign column numbers, and get max value\n\n\n    graph.nodes.forEach(function (node) {\n      node.column = Math.floor(align.call(null, node, x));\n    });\n  } // Assign nodes' breadths, and then shift nodes that overlap (resolveCollisions)\n\n\n  function computeNodeBreadths(graph, iterations, id) {\n    var columns = nest().key(function (d) {\n      return d.column;\n    }).sortKeys(ascending).entries(graph.nodes).map(function (d) {\n      return d.values;\n    });\n    initializeNodeBreadth(id);\n    resolveCollisions();\n\n    for (var alpha = 1, n = iterations; n > 0; --n) {\n      relaxLeftAndRight(alpha *= 0.99, id);\n      resolveCollisions();\n    }\n\n    function initializeNodeBreadth(id) {\n      //override py if nodePadding has been set\n      if (paddingRatio) {\n        var padding = Infinity;\n        columns.forEach(function (nodes) {\n          var thisPadding = y1 * paddingRatio / (nodes.length + 1);\n          padding = thisPadding < padding ? thisPadding : padding;\n        });\n        py = padding;\n      }\n\n      var ky = min(columns, function (nodes) {\n        return (y1 - y0 - (nodes.length - 1) * py) / sum(nodes, value);\n      }); //calculate the widths of the links\n\n      ky = ky * scale;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      }); //determine how much to scale down the chart, based on circular links\n\n      var margin = getCircleMargins(graph);\n      var ratio = scaleSankeySize(graph, margin); //re-calculate widths\n\n      ky = ky * ratio;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      });\n      columns.forEach(function (nodes) {\n        var nodesLength = nodes.length;\n        nodes.forEach(function (node, i) {\n          if (node.depth == columns.length - 1 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.depth == 0 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.partOfCycle) {\n            if (numberOfNonSelfLinkingCycles(node, id) == 0) {\n              node.y0 = y1 / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else if (node.circularLinkType == 'top') {\n              node.y0 = y0 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = y1 - node.value * ky - i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          } else {\n            if (margin.top == 0 || margin.bottom == 0) {\n              node.y0 = (y1 - y0) / nodesLength * i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = (y1 - y0) / 2 - nodesLength / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          }\n        });\n      });\n    } // For each node in each column, check the node's vertical position in relation to its targets and sources vertical position\n    // and shift up/down to be closer to the vertical middle of those targets and sources\n\n\n    function relaxLeftAndRight(alpha, id) {\n      var columnsLength = columns.length;\n      columns.forEach(function (nodes) {\n        var n = nodes.length;\n        var depth = nodes[0].depth;\n        nodes.forEach(function (node) {\n          // check the node is not an orphan\n          var nodeHeight;\n\n          if (node.sourceLinks.length || node.targetLinks.length) {\n            if (node.partOfCycle && numberOfNonSelfLinkingCycles(node, id) > 0) ;else if (depth == 0 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else if (depth == columnsLength - 1 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else {\n              var avg = 0;\n              var avgTargetY = mean(node.sourceLinks, linkTargetCenter);\n              var avgSourceY = mean(node.targetLinks, linkSourceCenter);\n\n              if (avgTargetY && avgSourceY) {\n                avg = (avgTargetY + avgSourceY) / 2;\n              } else {\n                avg = avgTargetY || avgSourceY;\n              }\n\n              var dy = (avg - nodeCenter(node)) * alpha; // positive if it node needs to move down\n\n              node.y0 += dy;\n              node.y1 += dy;\n            }\n          }\n        });\n      });\n    } // For each column, check if nodes are overlapping, and if so, shift up/down\n\n\n    function resolveCollisions() {\n      columns.forEach(function (nodes) {\n        var node,\n            dy,\n            y = y0,\n            n = nodes.length,\n            i; // Push any overlapping nodes down.\n\n        nodes.sort(ascendingBreadth);\n\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y - node.y0;\n\n          if (dy > 0) {\n            node.y0 += dy;\n            node.y1 += dy;\n          }\n\n          y = node.y1 + py;\n        } // If the bottommost node goes outside the bounds, push it back up.\n\n\n        dy = y - py - y1;\n\n        if (dy > 0) {\n          y = node.y0 -= dy, node.y1 -= dy; // Push any overlapping nodes back up.\n\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y1 + py - y;\n            if (dy > 0) node.y0 -= dy, node.y1 -= dy;\n            y = node.y0;\n          }\n        }\n      });\n    }\n  } // Assign the links y0 and y1 based on source/target nodes position,\n  // plus the link's relative position to other links to the same node\n\n\n  function computeLinkBreadths(graph) {\n    graph.nodes.forEach(function (node) {\n      node.sourceLinks.sort(ascendingTargetBreadth);\n      node.targetLinks.sort(ascendingSourceBreadth);\n    });\n    graph.nodes.forEach(function (node) {\n      var y0 = node.y0;\n      var y1 = y0; // start from the bottom of the node for cycle links\n\n      var y0cycle = node.y1;\n      var y1cycle = y0cycle;\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y0 = y0cycle - link.width / 2;\n          y0cycle = y0cycle - link.width;\n        } else {\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y1 = y1cycle - link.width / 2;\n          y1cycle = y1cycle - link.width;\n        } else {\n          link.y1 = y1 + link.width / 2;\n          y1 += link.width;\n        }\n      });\n    });\n  }\n\n  return sankeyCircular;\n} /// /////////////////////////////////////////////////////////////////////////////////\n// Cycle functions\n// portion of code to detect circular links based on Colin Fergus' bl.ock https://gist.github.com/cfergus/3956043\n// Identify circles in the link objects\n\n\nfunction identifyCircles(graph, id, sortNodes) {\n  var circularLinkID = 0;\n\n  if (sortNodes === null) {\n    // Building adjacency graph\n    var adjList = [];\n\n    for (var i = 0; i < graph.links.length; i++) {\n      var link = graph.links[i];\n      var source = link.source.index;\n      var target = link.target.index;\n      if (!adjList[source]) adjList[source] = [];\n      if (!adjList[target]) adjList[target] = []; // Add links if not already in set\n\n      if (adjList[source].indexOf(target) === -1) adjList[source].push(target);\n    } // Find all elementary circuits\n\n\n    var cycles = findCircuits(adjList); // Sort by circuits length\n\n    cycles.sort(function (a, b) {\n      return a.length - b.length;\n    });\n    var circularLinks = {};\n\n    for (i = 0; i < cycles.length; i++) {\n      var cycle = cycles[i];\n      var last = cycle.slice(-2);\n      if (!circularLinks[last[0]]) circularLinks[last[0]] = {};\n      circularLinks[last[0]][last[1]] = true;\n    }\n\n    graph.links.forEach(function (link) {\n      var target = link.target.index;\n      var source = link.source.index; // If self-linking or a back-edge\n\n      if (target === source || circularLinks[source] && circularLinks[source][target]) {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      } else {\n        link.circular = false;\n      }\n    });\n  } else {\n    graph.links.forEach(function (link) {\n      if (link.source[sortNodes] < link.target[sortNodes]) {\n        link.circular = false;\n      } else {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      }\n    });\n  }\n} // Assign a circular link type (top or bottom), based on:\n// - if the source/target node already has circular links, then use the same type\n// - if not, choose the type with fewer links\n\n\nfunction selectCircularLinkTypes(graph, id) {\n  var numberOfTops = 0;\n  var numberOfBottoms = 0;\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      // if either souce or target has type already use that\n      if (link.source.circularLinkType || link.target.circularLinkType) {\n        // default to source type if available\n        link.circularLinkType = link.source.circularLinkType ? link.source.circularLinkType : link.target.circularLinkType;\n      } else {\n        link.circularLinkType = numberOfTops < numberOfBottoms ? 'top' : 'bottom';\n      }\n\n      if (link.circularLinkType == 'top') {\n        numberOfTops = numberOfTops + 1;\n      } else {\n        numberOfBottoms = numberOfBottoms + 1;\n      }\n\n      graph.nodes.forEach(function (node) {\n        if (getNodeID(node, id) == getNodeID(link.source, id) || getNodeID(node, id) == getNodeID(link.target, id)) {\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    }\n  }); //correct self-linking links to be same direction as node\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      //if both source and target node are same type, then link should have same type\n      if (link.source.circularLinkType == link.target.circularLinkType) {\n        link.circularLinkType = link.source.circularLinkType;\n      } //if link is selflinking, then link should have same type as node\n\n\n      if (selfLinking(link, id)) {\n        link.circularLinkType = link.source.circularLinkType;\n      }\n    }\n  });\n} // Return the angle between a straight line between the source and target of the link, and the vertical plane of the node\n\n\nfunction linkAngle(link) {\n  var adjacent = Math.abs(link.y1 - link.y0);\n  var opposite = Math.abs(link.target.x0 - link.source.x1);\n  return Math.atan(opposite / adjacent);\n} // Check if two circular links potentially overlap\n\n\nfunction circularLinksCross(link1, link2) {\n  if (link1.source.column < link2.target.column) {\n    return false;\n  } else if (link1.target.column > link2.source.column) {\n    return false;\n  } else {\n    return true;\n  }\n} // Return the number of circular links for node, not including self linking links\n\n\nfunction numberOfNonSelfLinkingCycles(node, id) {\n  var sourceCount = 0;\n  node.sourceLinks.forEach(function (l) {\n    sourceCount = l.circular && !selfLinking(l, id) ? sourceCount + 1 : sourceCount;\n  });\n  var targetCount = 0;\n  node.targetLinks.forEach(function (l) {\n    targetCount = l.circular && !selfLinking(l, id) ? targetCount + 1 : targetCount;\n  });\n  return sourceCount + targetCount;\n} // Check if a circular link is the only circular link for both its source and target node\n\n\nfunction onlyCircularLink(link) {\n  var nodeSourceLinks = link.source.sourceLinks;\n  var sourceCount = 0;\n  nodeSourceLinks.forEach(function (l) {\n    sourceCount = l.circular ? sourceCount + 1 : sourceCount;\n  });\n  var nodeTargetLinks = link.target.targetLinks;\n  var targetCount = 0;\n  nodeTargetLinks.forEach(function (l) {\n    targetCount = l.circular ? targetCount + 1 : targetCount;\n  });\n\n  if (sourceCount > 1 || targetCount > 1) {\n    return false;\n  } else {\n    return true;\n  }\n} // creates vertical buffer values per set of top/bottom links\n\n\nfunction calcVerticalBuffer(links, circularLinkGap, id) {\n  links.sort(sortLinkColumnAscending);\n  links.forEach(function (link, i) {\n    var buffer = 0;\n\n    if (selfLinking(link, id) && onlyCircularLink(link)) {\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    } else {\n      var j = 0;\n\n      for (j; j < i; j++) {\n        if (circularLinksCross(links[i], links[j])) {\n          var bufferOverThisLink = links[j].circularPathData.verticalBuffer + links[j].width / 2 + circularLinkGap;\n          buffer = bufferOverThisLink > buffer ? bufferOverThisLink : buffer;\n        }\n      }\n\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    }\n  });\n  return links;\n} // calculate the optimum path for a link to reduce overlaps\n\n\nfunction addCircularPathData(graph, circularLinkGap, y1, id) {\n  //var baseRadius = 10\n  var buffer = 5; //var verticalMargin = 25\n\n  var minY = min(graph.links, function (link) {\n    return link.source.y0;\n  }); // create object for circular Path Data\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData = {};\n    }\n  }); // calc vertical offsets per top/bottom links\n\n  var topLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'top';\n  });\n  /* topLinks = */\n\n  calcVerticalBuffer(topLinks, circularLinkGap, id);\n  var bottomLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'bottom';\n  });\n  /* bottomLinks = */\n\n  calcVerticalBuffer(bottomLinks, circularLinkGap, id); // add the base data for each link\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData.arcRadius = link.width + baseRadius;\n      link.circularPathData.leftNodeBuffer = buffer;\n      link.circularPathData.rightNodeBuffer = buffer;\n      link.circularPathData.sourceWidth = link.source.x1 - link.source.x0;\n      link.circularPathData.sourceX = link.source.x0 + link.circularPathData.sourceWidth;\n      link.circularPathData.targetX = link.target.x0;\n      link.circularPathData.sourceY = link.y0;\n      link.circularPathData.targetY = link.y1; // for self linking paths, and that the only circular link in/out of that node\n\n      if (selfLinking(link, id) && onlyCircularLink(link)) {\n        link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2;\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = link.source.y1 + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = link.source.y0 - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } else {\n        // else calculate normally\n        // add left extent coordinates, based on links with same source column and circularLink type\n        var thisColumn = link.source.column;\n        var thisCircularLinkType = link.circularLinkType;\n        var sameColumnLinks = graph.links.filter(function (l) {\n          return l.source.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkSourceYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkSourceYAscending);\n        }\n\n        var radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // add right extent coordinates, based on links with same target column and circularLink type\n\n        thisColumn = link.target.column;\n        sameColumnLinks = graph.links.filter(function (l) {\n          return l.target.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkTargetYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkTargetYAscending);\n        }\n\n        radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // bottom links\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = Math.max(y1, link.source.y1, link.target.y1) + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = minY - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } // all links\n\n\n      link.circularPathData.leftInnerExtent = link.circularPathData.sourceX + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightInnerExtent = link.circularPathData.targetX - link.circularPathData.rightNodeBuffer;\n      link.circularPathData.leftFullExtent = link.circularPathData.sourceX + link.circularPathData.leftLargeArcRadius + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightFullExtent = link.circularPathData.targetX - link.circularPathData.rightLargeArcRadius - link.circularPathData.rightNodeBuffer;\n    }\n\n    if (link.circular) {\n      link.path = createCircularPathString(link);\n    } else {\n      var normalPath = linkHorizontal().source(function (d) {\n        var x = d.source.x0 + (d.source.x1 - d.source.x0);\n        var y = d.y0;\n        return [x, y];\n      }).target(function (d) {\n        var x = d.target.x0;\n        var y = d.y1;\n        return [x, y];\n      });\n      link.path = normalPath(link);\n    }\n  });\n} // create a d path using the addCircularPathData\n\n\nfunction createCircularPathString(link) {\n  var pathString = ''; // 'pathData' is assigned a value but never used\n  // var pathData = {}\n\n  if (link.circularLinkType == 'top') {\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY - link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line up to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line down\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY - link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  } else {\n    // bottom path\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY + link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line down to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line up\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY + link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  }\n\n  return pathString;\n} // sort links based on the distance between the source and tartget node columns\n// if the same, then use Y position of the source node\n\n\nfunction sortLinkColumnAscending(link1, link2) {\n  if (linkColumnDistance(link1) == linkColumnDistance(link2)) {\n    return link1.circularLinkType == 'bottom' ? sortLinkSourceYDescending(link1, link2) : sortLinkSourceYAscending(link1, link2);\n  } else {\n    return linkColumnDistance(link2) - linkColumnDistance(link1);\n  }\n} // sort ascending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYAscending(link1, link2) {\n  return link1.y0 - link2.y0;\n} // sort descending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYDescending(link1, link2) {\n  return link2.y0 - link1.y0;\n} // sort ascending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYAscending(link1, link2) {\n  return link1.y1 - link2.y1;\n} // sort descending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYDescending(link1, link2) {\n  return link2.y1 - link1.y1;\n} // return the distance between the link's target and source node, in terms of the nodes' column\n\n\nfunction linkColumnDistance(link) {\n  return link.target.column - link.source.column;\n} // return the distance between the link's target and source node, in terms of the nodes' X coordinate\n\n\nfunction linkXLength(link) {\n  return link.target.x0 - link.source.x1;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkSource(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link1's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 + heightFromY1ToPependicular : longerLink.y1 - heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkTarget(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 - heightFromY1ToPependicular : longerLink.y1 + heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Move any nodes that overlap links which span 2+ columns\n\n\nfunction resolveNodeLinkOverlaps(graph, y0, y1, id) {\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      return;\n    }\n\n    if (link.target.column - link.source.column > 1) {\n      var columnToTest = link.source.column + 1;\n      var maxColumnToTest = link.target.column - 1;\n      var i = 1;\n      var numberOfColumnsToTest = maxColumnToTest - columnToTest + 1;\n\n      for (i = 1; columnToTest <= maxColumnToTest; columnToTest++, i++) {\n        graph.nodes.forEach(function (node) {\n          if (node.column == columnToTest) {\n            var t = i / (numberOfColumnsToTest + 1); // Find all the points of a cubic bezier curve in javascript\n            // https://stackoverflow.com/questions/15397596/find-all-the-points-of-a-cubic-bezier-curve-in-javascript\n\n            var B0_t = Math.pow(1 - t, 3);\n            var B1_t = 3 * t * Math.pow(1 - t, 2);\n            var B2_t = 3 * Math.pow(t, 2) * (1 - t);\n            var B3_t = Math.pow(t, 3);\n            var py_t = B0_t * link.y0 + B1_t * link.y0 + B2_t * link.y1 + B3_t * link.y1;\n            var linkY0AtColumn = py_t - link.width / 2;\n            var linkY1AtColumn = py_t + link.width / 2;\n            var dy; // If top of link overlaps node, push node up\n\n            if (linkY0AtColumn > node.y0 && linkY0AtColumn < node.y1) {\n              dy = node.y1 - linkY0AtColumn + 10;\n              dy = node.circularLinkType == 'bottom' ? dy : -dy;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move up too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (nodesOverlap(node, otherNode)) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY1AtColumn > node.y0 && linkY1AtColumn < node.y1) {\n              // If bottom of link overlaps node, push node down\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move down too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY0AtColumn < node.y0 && linkY1AtColumn > node.y1) {\n              // if link completely overlaps node\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1);\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            }\n          }\n        });\n      }\n    }\n  });\n} // check if two nodes overlap\n\n\nfunction nodesOverlap(nodeA, nodeB) {\n  // test if nodeA top partially overlaps nodeB\n  if (nodeA.y0 > nodeB.y0 && nodeA.y0 < nodeB.y1) {\n    return true;\n  } else if (nodeA.y1 > nodeB.y0 && nodeA.y1 < nodeB.y1) {\n    // test if nodeA bottom partially overlaps nodeB\n    return true;\n  } else if (nodeA.y0 < nodeB.y0 && nodeA.y1 > nodeB.y1) {\n    // test if nodeA covers nodeB\n    return true;\n  } else {\n    return false;\n  }\n} // update a node, and its associated links, vertical positions (y0, y1)\n\n\nfunction adjustNodeHeight(node, dy, sankeyY0, sankeyY1) {\n  if (node.y0 + dy >= sankeyY0 && node.y1 + dy <= sankeyY1) {\n    node.y0 = node.y0 + dy;\n    node.y1 = node.y1 + dy;\n    node.targetLinks.forEach(function (l) {\n      l.y1 = l.y1 + dy;\n    });\n    node.sourceLinks.forEach(function (l) {\n      l.y0 = l.y0 + dy;\n    });\n  }\n\n  return node;\n} // sort and set the links' y0 for each node\n\n\nfunction sortSourceLinks(graph, y1, id, moveNodes) {\n  graph.nodes.forEach(function (node) {\n    // move any nodes up which are off the bottom\n    if (moveNodes && node.y + (node.y1 - node.y0) > y1) {\n      node.y = node.y - (node.y + (node.y1 - node.y0) - y1);\n    }\n\n    var nodesSourceLinks = graph.links.filter(function (l) {\n      return getNodeID(l.source, id) == getNodeID(node, id);\n    });\n    var nodeSourceLinksLength = nodesSourceLinks.length; // if more than 1 link then sort\n\n    if (nodeSourceLinksLength > 1) {\n      nodesSourceLinks.sort(function (link1, link2) {\n        // if both are not circular...\n        if (!link1.circular && !link2.circular) {\n          // if the target nodes are the same column, then sort by the link's target y\n          if (link1.target.column == link2.target.column) {\n            return link1.y1 - link2.y1;\n          } else if (!sameInclines(link1, link2)) {\n            // if the links slope in different directions, then sort by the link's target y\n            return link1.y1 - link2.y1; // if the links slope in same directions, then sort by any overlap\n          } else {\n            if (link1.target.column > link2.target.column) {\n              var link2Adj = linkPerpendicularYToLinkTarget(link2, link1);\n              return link1.y1 - link2Adj;\n            }\n\n            if (link2.target.column > link1.target.column) {\n              var link1Adj = linkPerpendicularYToLinkTarget(link1, link2);\n              return link1Adj - link2.y1;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link1.target.y1 - link2.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.target.column - link1.target.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link2.target.y1 - link1.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.target.column - link2.target.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y0 for links\n\n\n    var ySourceOffset = node.y0;\n    nodesSourceLinks.forEach(function (link) {\n      link.y0 = ySourceOffset + link.width / 2;\n      ySourceOffset = ySourceOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesSourceLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodeSourceLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesSourceLinks[j].width;\n        }\n\n        link.y0 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // sort and set the links' y1 for each node\n\n\nfunction sortTargetLinks(graph, y1, id) {\n  graph.nodes.forEach(function (node) {\n    var nodesTargetLinks = graph.links.filter(function (l) {\n      return getNodeID(l.target, id) == getNodeID(node, id);\n    });\n    var nodesTargetLinksLength = nodesTargetLinks.length;\n\n    if (nodesTargetLinksLength > 1) {\n      nodesTargetLinks.sort(function (link1, link2) {\n        // if both are not circular, the base on the source y position\n        if (!link1.circular && !link2.circular) {\n          if (link1.source.column == link2.source.column) {\n            return link1.y0 - link2.y0;\n          } else if (!sameInclines(link1, link2)) {\n            return link1.y0 - link2.y0;\n          } else {\n            // get the angle of the link to the further source node (ie the smaller column)\n            if (link2.source.column < link1.source.column) {\n              var link2Adj = linkPerpendicularYToLinkSource(link2, link1);\n              return link1.y0 - link2Adj;\n            }\n\n            if (link1.source.column < link2.source.column) {\n              var link1Adj = linkPerpendicularYToLinkSource(link1, link2);\n              return link1Adj - link2.y0;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.source.column - link2.source.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.source.column - link1.source.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y1 for links\n\n\n    var yTargetOffset = node.y0;\n    nodesTargetLinks.forEach(function (link) {\n      link.y1 = yTargetOffset + link.width / 2;\n      yTargetOffset = yTargetOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesTargetLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodesTargetLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesTargetLinks[j].width;\n        }\n\n        link.y1 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // test if links both slope up, or both slope down\n\n\nfunction sameInclines(link1, link2) {\n  return incline(link1) == incline(link2);\n} // returns the slope of a link, from source to target\n// up => slopes up from source to target\n// down => slopes down from source to target\n\n\nfunction incline(link) {\n  return link.y0 - link.y1 > 0 ? 'up' : 'down';\n} // check if link is self linking, ie links a node to the same node\n\n\nfunction selfLinking(link, id) {\n  return getNodeID(link.source, id) == getNodeID(link.target, id);\n}\n\nfunction fillHeight(graph, y0, y1) {\n  var nodes = graph.nodes;\n  var links = graph.links;\n  var top = false;\n  var bottom = false;\n  links.forEach(function (link) {\n    if (link.circularLinkType == \"top\") {\n      top = true;\n    } else if (link.circularLinkType == \"bottom\") {\n      bottom = true;\n    }\n  });\n\n  if (top == false || bottom == false) {\n    var minY0 = min(nodes, function (node) {\n      return node.y0;\n    });\n    var maxY1 = max(nodes, function (node) {\n      return node.y1;\n    });\n    var currentHeight = maxY1 - minY0;\n    var chartHeight = y1 - y0;\n    var ratio = chartHeight / currentHeight;\n    nodes.forEach(function (node) {\n      var nodeHeight = (node.y1 - node.y0) * ratio;\n      node.y0 = (node.y0 - minY0) * ratio;\n      node.y1 = node.y0 + nodeHeight;\n    });\n    links.forEach(function (link) {\n      link.y0 = (link.y0 - minY0) * ratio;\n      link.y1 = (link.y1 - minY0) * ratio;\n      link.width = link.width * ratio;\n    });\n  }\n}\n\nexport { sankeyCircular, center as sankeyCenter, left as sankeyLeft, right as sankeyRight, justify as sankeyJustify };","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // ASCEND: chop off the last nesting level - either [<n>] or .<key> - to ascend\n// the attribute tree. the remaining attrString is in match[1]\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar ASCEND = /^(.*)(\\.[^\\.\\[\\]]+|\\[\\d\\])$/; // SIMPLEATTR: is this an un-nested attribute? (no dots or brackets)\n\nvar SIMPLEATTR = /^[^\\.\\[\\]]+$/;\n/*\n * calculate a relative attribute string, similar to a relative path\n *\n * @param {string} baseAttr:\n *   an attribute string, such as 'annotations[3].x'. The \"current location\"\n *   is the attribute string minus the last component ('annotations[3]')\n * @param {string} relativeAttr:\n *   a route to the desired attribute string, using '^' to ascend\n *\n * @return {string} attrString:\n *   for example:\n *     relativeAttr('annotations[3].x', 'y') = 'annotations[3].y'\n *     relativeAttr('annotations[3].x', '^[2].z') = 'annotations[2].z'\n *     relativeAttr('annotations[3].x', '^^margin') = 'margin'\n *     relativeAttr('annotations[3].x', '^^margin.r') = 'margin.r'\n */\n\nmodule.exports = function (baseAttr, relativeAttr) {\n  while (relativeAttr) {\n    var match = baseAttr.match(ASCEND);\n    if (match) baseAttr = match[1];else if (baseAttr.match(SIMPLEATTR)) baseAttr = '';else throw new Error('bad relativeAttr call:' + [baseAttr, relativeAttr]);\n    if (relativeAttr.charAt(0) === '^') relativeAttr = relativeAttr.slice(1);else break;\n  }\n\n  if (baseAttr && relativeAttr.charAt(0) !== '[') {\n    return baseAttr + '.' + relativeAttr;\n  }\n\n  return baseAttr + relativeAttr;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar d3 = require('d3');\n/** Marker symbol definitions\n * users can specify markers either by number or name\n * add 100 (or '-open') and you get an open marker\n *  open markers have no fill and use line color as the stroke color\n * add 200 (or '-dot') and you get a dot in the middle\n * add both and you get both\n */\n\n\nmodule.exports = {\n  circle: {\n    n: 0,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs + 'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';\n    }\n  },\n  square: {\n    n: 1,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';\n    }\n  },\n  diamond: {\n    n: 2,\n    f: function f(r) {\n      var rd = d3.round(r * 1.3, 2);\n      return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z';\n    }\n  },\n  cross: {\n    n: 3,\n    f: function f(r) {\n      var rc = d3.round(r * 0.4, 2);\n      var rc2 = d3.round(r * 1.2, 2);\n      return 'M' + rc2 + ',' + rc + 'H' + rc + 'V' + rc2 + 'H-' + rc + 'V' + rc + 'H-' + rc2 + 'V-' + rc + 'H-' + rc + 'V-' + rc2 + 'H' + rc + 'V-' + rc + 'H' + rc2 + 'Z';\n    }\n  },\n  x: {\n    n: 4,\n    f: function f(r) {\n      var rx = d3.round(r * 0.8 / Math.sqrt(2), 2);\n      var ne = 'l' + rx + ',' + rx;\n      var se = 'l' + rx + ',-' + rx;\n      var sw = 'l-' + rx + ',-' + rx;\n      var nw = 'l-' + rx + ',' + rx;\n      return 'M0,' + rx + ne + se + sw + se + sw + nw + sw + nw + ne + nw + ne + 'Z';\n    }\n  },\n  'triangle-up': {\n    n: 5,\n    f: function f(r) {\n      var rt = d3.round(r * 2 / Math.sqrt(3), 2);\n      var r2 = d3.round(r / 2, 2);\n      var rs = d3.round(r, 2);\n      return 'M-' + rt + ',' + r2 + 'H' + rt + 'L0,-' + rs + 'Z';\n    }\n  },\n  'triangle-down': {\n    n: 6,\n    f: function f(r) {\n      var rt = d3.round(r * 2 / Math.sqrt(3), 2);\n      var r2 = d3.round(r / 2, 2);\n      var rs = d3.round(r, 2);\n      return 'M-' + rt + ',-' + r2 + 'H' + rt + 'L0,' + rs + 'Z';\n    }\n  },\n  'triangle-left': {\n    n: 7,\n    f: function f(r) {\n      var rt = d3.round(r * 2 / Math.sqrt(3), 2);\n      var r2 = d3.round(r / 2, 2);\n      var rs = d3.round(r, 2);\n      return 'M' + r2 + ',-' + rt + 'V' + rt + 'L-' + rs + ',0Z';\n    }\n  },\n  'triangle-right': {\n    n: 8,\n    f: function f(r) {\n      var rt = d3.round(r * 2 / Math.sqrt(3), 2);\n      var r2 = d3.round(r / 2, 2);\n      var rs = d3.round(r, 2);\n      return 'M-' + r2 + ',-' + rt + 'V' + rt + 'L' + rs + ',0Z';\n    }\n  },\n  'triangle-ne': {\n    n: 9,\n    f: function f(r) {\n      var r1 = d3.round(r * 0.6, 2);\n      var r2 = d3.round(r * 1.2, 2);\n      return 'M-' + r2 + ',-' + r1 + 'H' + r1 + 'V' + r2 + 'Z';\n    }\n  },\n  'triangle-se': {\n    n: 10,\n    f: function f(r) {\n      var r1 = d3.round(r * 0.6, 2);\n      var r2 = d3.round(r * 1.2, 2);\n      return 'M' + r1 + ',-' + r2 + 'V' + r1 + 'H-' + r2 + 'Z';\n    }\n  },\n  'triangle-sw': {\n    n: 11,\n    f: function f(r) {\n      var r1 = d3.round(r * 0.6, 2);\n      var r2 = d3.round(r * 1.2, 2);\n      return 'M' + r2 + ',' + r1 + 'H-' + r1 + 'V-' + r2 + 'Z';\n    }\n  },\n  'triangle-nw': {\n    n: 12,\n    f: function f(r) {\n      var r1 = d3.round(r * 0.6, 2);\n      var r2 = d3.round(r * 1.2, 2);\n      return 'M-' + r1 + ',' + r2 + 'V-' + r1 + 'H' + r2 + 'Z';\n    }\n  },\n  pentagon: {\n    n: 13,\n    f: function f(r) {\n      var x1 = d3.round(r * 0.951, 2);\n      var x2 = d3.round(r * 0.588, 2);\n      var y0 = d3.round(-r, 2);\n      var y1 = d3.round(r * -0.309, 2);\n      var y2 = d3.round(r * 0.809, 2);\n      return 'M' + x1 + ',' + y1 + 'L' + x2 + ',' + y2 + 'H-' + x2 + 'L-' + x1 + ',' + y1 + 'L0,' + y0 + 'Z';\n    }\n  },\n  hexagon: {\n    n: 14,\n    f: function f(r) {\n      var y0 = d3.round(r, 2);\n      var y1 = d3.round(r / 2, 2);\n      var x = d3.round(r * Math.sqrt(3) / 2, 2);\n      return 'M' + x + ',-' + y1 + 'V' + y1 + 'L0,' + y0 + 'L-' + x + ',' + y1 + 'V-' + y1 + 'L0,-' + y0 + 'Z';\n    }\n  },\n  hexagon2: {\n    n: 15,\n    f: function f(r) {\n      var x0 = d3.round(r, 2);\n      var x1 = d3.round(r / 2, 2);\n      var y = d3.round(r * Math.sqrt(3) / 2, 2);\n      return 'M-' + x1 + ',' + y + 'H' + x1 + 'L' + x0 + ',0L' + x1 + ',-' + y + 'H-' + x1 + 'L-' + x0 + ',0Z';\n    }\n  },\n  octagon: {\n    n: 16,\n    f: function f(r) {\n      var a = d3.round(r * 0.924, 2);\n      var b = d3.round(r * 0.383, 2);\n      return 'M-' + b + ',-' + a + 'H' + b + 'L' + a + ',-' + b + 'V' + b + 'L' + b + ',' + a + 'H-' + b + 'L-' + a + ',' + b + 'V-' + b + 'Z';\n    }\n  },\n  star: {\n    n: 17,\n    f: function f(r) {\n      var rs = r * 1.4;\n      var x1 = d3.round(rs * 0.225, 2);\n      var x2 = d3.round(rs * 0.951, 2);\n      var x3 = d3.round(rs * 0.363, 2);\n      var x4 = d3.round(rs * 0.588, 2);\n      var y0 = d3.round(-rs, 2);\n      var y1 = d3.round(rs * -0.309, 2);\n      var y3 = d3.round(rs * 0.118, 2);\n      var y4 = d3.round(rs * 0.809, 2);\n      var y5 = d3.round(rs * 0.382, 2);\n      return 'M' + x1 + ',' + y1 + 'H' + x2 + 'L' + x3 + ',' + y3 + 'L' + x4 + ',' + y4 + 'L0,' + y5 + 'L-' + x4 + ',' + y4 + 'L-' + x3 + ',' + y3 + 'L-' + x2 + ',' + y1 + 'H-' + x1 + 'L0,' + y0 + 'Z';\n    }\n  },\n  hexagram: {\n    n: 18,\n    f: function f(r) {\n      var y = d3.round(r * 0.66, 2);\n      var x1 = d3.round(r * 0.38, 2);\n      var x2 = d3.round(r * 0.76, 2);\n      return 'M-' + x2 + ',0l-' + x1 + ',-' + y + 'h' + x2 + 'l' + x1 + ',-' + y + 'l' + x1 + ',' + y + 'h' + x2 + 'l-' + x1 + ',' + y + 'l' + x1 + ',' + y + 'h-' + x2 + 'l-' + x1 + ',' + y + 'l-' + x1 + ',-' + y + 'h-' + x2 + 'Z';\n    }\n  },\n  'star-triangle-up': {\n    n: 19,\n    f: function f(r) {\n      var x = d3.round(r * Math.sqrt(3) * 0.8, 2);\n      var y1 = d3.round(r * 0.8, 2);\n      var y2 = d3.round(r * 1.6, 2);\n      var rc = d3.round(r * 4, 2);\n      var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';\n      return 'M-' + x + ',' + y1 + aPart + x + ',' + y1 + aPart + '0,-' + y2 + aPart + '-' + x + ',' + y1 + 'Z';\n    }\n  },\n  'star-triangle-down': {\n    n: 20,\n    f: function f(r) {\n      var x = d3.round(r * Math.sqrt(3) * 0.8, 2);\n      var y1 = d3.round(r * 0.8, 2);\n      var y2 = d3.round(r * 1.6, 2);\n      var rc = d3.round(r * 4, 2);\n      var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';\n      return 'M' + x + ',-' + y1 + aPart + '-' + x + ',-' + y1 + aPart + '0,' + y2 + aPart + x + ',-' + y1 + 'Z';\n    }\n  },\n  'star-square': {\n    n: 21,\n    f: function f(r) {\n      var rp = d3.round(r * 1.1, 2);\n      var rc = d3.round(r * 2, 2);\n      var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';\n      return 'M-' + rp + ',-' + rp + aPart + '-' + rp + ',' + rp + aPart + rp + ',' + rp + aPart + rp + ',-' + rp + aPart + '-' + rp + ',-' + rp + 'Z';\n    }\n  },\n  'star-diamond': {\n    n: 22,\n    f: function f(r) {\n      var rp = d3.round(r * 1.4, 2);\n      var rc = d3.round(r * 1.9, 2);\n      var aPart = 'A ' + rc + ',' + rc + ' 0 0 1 ';\n      return 'M-' + rp + ',0' + aPart + '0,' + rp + aPart + rp + ',0' + aPart + '0,-' + rp + aPart + '-' + rp + ',0' + 'Z';\n    }\n  },\n  'diamond-tall': {\n    n: 23,\n    f: function f(r) {\n      var x = d3.round(r * 0.7, 2);\n      var y = d3.round(r * 1.4, 2);\n      return 'M0,' + y + 'L' + x + ',0L0,-' + y + 'L-' + x + ',0Z';\n    }\n  },\n  'diamond-wide': {\n    n: 24,\n    f: function f(r) {\n      var x = d3.round(r * 1.4, 2);\n      var y = d3.round(r * 0.7, 2);\n      return 'M0,' + y + 'L' + x + ',0L0,-' + y + 'L-' + x + ',0Z';\n    }\n  },\n  hourglass: {\n    n: 25,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M' + rs + ',' + rs + 'H-' + rs + 'L' + rs + ',-' + rs + 'H-' + rs + 'Z';\n    },\n    noDot: true\n  },\n  bowtie: {\n    n: 26,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M' + rs + ',' + rs + 'V-' + rs + 'L-' + rs + ',' + rs + 'V-' + rs + 'Z';\n    },\n    noDot: true\n  },\n  'circle-cross': {\n    n: 27,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M0,' + rs + 'V-' + rs + 'M' + rs + ',0H-' + rs + 'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs + 'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';\n    },\n    needLine: true,\n    noDot: true\n  },\n  'circle-x': {\n    n: 28,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      var rc = d3.round(r / Math.sqrt(2), 2);\n      return 'M' + rc + ',' + rc + 'L-' + rc + ',-' + rc + 'M' + rc + ',-' + rc + 'L-' + rc + ',' + rc + 'M' + rs + ',0A' + rs + ',' + rs + ' 0 1,1 0,-' + rs + 'A' + rs + ',' + rs + ' 0 0,1 ' + rs + ',0Z';\n    },\n    needLine: true,\n    noDot: true\n  },\n  'square-cross': {\n    n: 29,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M0,' + rs + 'V-' + rs + 'M' + rs + ',0H-' + rs + 'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';\n    },\n    needLine: true,\n    noDot: true\n  },\n  'square-x': {\n    n: 30,\n    f: function f(r) {\n      var rs = d3.round(r, 2);\n      return 'M' + rs + ',' + rs + 'L-' + rs + ',-' + rs + 'M' + rs + ',-' + rs + 'L-' + rs + ',' + rs + 'M' + rs + ',' + rs + 'H-' + rs + 'V-' + rs + 'H' + rs + 'Z';\n    },\n    needLine: true,\n    noDot: true\n  },\n  'diamond-cross': {\n    n: 31,\n    f: function f(r) {\n      var rd = d3.round(r * 1.3, 2);\n      return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z' + 'M0,-' + rd + 'V' + rd + 'M-' + rd + ',0H' + rd;\n    },\n    needLine: true,\n    noDot: true\n  },\n  'diamond-x': {\n    n: 32,\n    f: function f(r) {\n      var rd = d3.round(r * 1.3, 2);\n      var r2 = d3.round(r * 0.65, 2);\n      return 'M' + rd + ',0L0,' + rd + 'L-' + rd + ',0L0,-' + rd + 'Z' + 'M-' + r2 + ',-' + r2 + 'L' + r2 + ',' + r2 + 'M-' + r2 + ',' + r2 + 'L' + r2 + ',-' + r2;\n    },\n    needLine: true,\n    noDot: true\n  },\n  'cross-thin': {\n    n: 33,\n    f: function f(r) {\n      var rc = d3.round(r * 1.4, 2);\n      return 'M0,' + rc + 'V-' + rc + 'M' + rc + ',0H-' + rc;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'x-thin': {\n    n: 34,\n    f: function f(r) {\n      var rx = d3.round(r, 2);\n      return 'M' + rx + ',' + rx + 'L-' + rx + ',-' + rx + 'M' + rx + ',-' + rx + 'L-' + rx + ',' + rx;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  asterisk: {\n    n: 35,\n    f: function f(r) {\n      var rc = d3.round(r * 1.2, 2);\n      var rs = d3.round(r * 0.85, 2);\n      return 'M0,' + rc + 'V-' + rc + 'M' + rc + ',0H-' + rc + 'M' + rs + ',' + rs + 'L-' + rs + ',-' + rs + 'M' + rs + ',-' + rs + 'L-' + rs + ',' + rs;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  hash: {\n    n: 36,\n    f: function f(r) {\n      var r1 = d3.round(r / 2, 2);\n      var r2 = d3.round(r, 2);\n      return 'M' + r1 + ',' + r2 + 'V-' + r2 + 'm-' + r2 + ',0V' + r2 + 'M' + r2 + ',' + r1 + 'H-' + r2 + 'm0,-' + r2 + 'H' + r2;\n    },\n    needLine: true,\n    noFill: true\n  },\n  'y-up': {\n    n: 37,\n    f: function f(r) {\n      var x = d3.round(r * 1.2, 2);\n      var y0 = d3.round(r * 1.6, 2);\n      var y1 = d3.round(r * 0.8, 2);\n      return 'M-' + x + ',' + y1 + 'L0,0M' + x + ',' + y1 + 'L0,0M0,-' + y0 + 'L0,0';\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'y-down': {\n    n: 38,\n    f: function f(r) {\n      var x = d3.round(r * 1.2, 2);\n      var y0 = d3.round(r * 1.6, 2);\n      var y1 = d3.round(r * 0.8, 2);\n      return 'M-' + x + ',-' + y1 + 'L0,0M' + x + ',-' + y1 + 'L0,0M0,' + y0 + 'L0,0';\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'y-left': {\n    n: 39,\n    f: function f(r) {\n      var y = d3.round(r * 1.2, 2);\n      var x0 = d3.round(r * 1.6, 2);\n      var x1 = d3.round(r * 0.8, 2);\n      return 'M' + x1 + ',' + y + 'L0,0M' + x1 + ',-' + y + 'L0,0M-' + x0 + ',0L0,0';\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'y-right': {\n    n: 40,\n    f: function f(r) {\n      var y = d3.round(r * 1.2, 2);\n      var x0 = d3.round(r * 1.6, 2);\n      var x1 = d3.round(r * 0.8, 2);\n      return 'M-' + x1 + ',' + y + 'L0,0M-' + x1 + ',-' + y + 'L0,0M' + x0 + ',0L0,0';\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'line-ew': {\n    n: 41,\n    f: function f(r) {\n      var rc = d3.round(r * 1.4, 2);\n      return 'M' + rc + ',0H-' + rc;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'line-ns': {\n    n: 42,\n    f: function f(r) {\n      var rc = d3.round(r * 1.4, 2);\n      return 'M0,' + rc + 'V-' + rc;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'line-ne': {\n    n: 43,\n    f: function f(r) {\n      var rx = d3.round(r, 2);\n      return 'M' + rx + ',-' + rx + 'L-' + rx + ',' + rx;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  },\n  'line-nw': {\n    n: 44,\n    f: function f(r) {\n      var rx = d3.round(r, 2);\n      return 'M' + rx + ',' + rx + 'L-' + rx + ',-' + rx;\n    },\n    needLine: true,\n    noDot: true,\n    noFill: true\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // Simple helper functions\n// none of these need any external deps\n\nmodule.exports = function identity(d) {\n  return d;\n};","// (c) Copyright 2017, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// convert between PolyBool polygon format and GeoJSON formats (Polygon and MultiPolygon)\n//\nvar GeoJSON = {\n  // convert a GeoJSON object to a PolyBool polygon\n  toPolygon: function toPolygon(PolyBool, geojson) {\n    // converts list of LineString's to segments\n    function GeoPoly(coords) {\n      // check for empty coords\n      if (coords.length <= 0) return PolyBool.segments({\n        inverted: false,\n        regions: []\n      }); // convert LineString to segments\n\n      function LineString(ls) {\n        // remove tail which should be the same as head\n        var reg = ls.slice(0, ls.length - 1);\n        return PolyBool.segments({\n          inverted: false,\n          regions: [reg]\n        });\n      } // the first LineString is considered the outside\n\n\n      var out = LineString(coords[0]); // the rest of the LineStrings are considered interior holes, so subtract them from the\n      // current result\n\n      for (var i = 1; i < coords.length; i++) {\n        out = PolyBool.selectDifference(PolyBool.combine(out, LineString(coords[i])));\n      }\n\n      return out;\n    }\n\n    if (geojson.type === 'Polygon') {\n      // single polygon, so just convert it and we're done\n      return PolyBool.polygon(GeoPoly(geojson.coordinates));\n    } else if (geojson.type === 'MultiPolygon') {\n      // multiple polygons, so union all the polygons together\n      var out = PolyBool.segments({\n        inverted: false,\n        regions: []\n      });\n\n      for (var i = 0; i < geojson.coordinates.length; i++) {\n        out = PolyBool.selectUnion(PolyBool.combine(out, GeoPoly(geojson.coordinates[i])));\n      }\n\n      return PolyBool.polygon(out);\n    }\n\n    throw new Error('PolyBool: Cannot convert GeoJSON object to PolyBool polygon');\n  },\n  // convert a PolyBool polygon to a GeoJSON object\n  fromPolygon: function fromPolygon(PolyBool, eps, poly) {\n    // make sure out polygon is clean\n    poly = PolyBool.polygon(PolyBool.segments(poly)); // test if r1 is inside r2\n\n    function regionInsideRegion(r1, r2) {\n      // we're guaranteed no lines intersect (because the polygon is clean), but a vertex\n      // could be on the edge -- so we just average pt[0] and pt[1] to produce a point on the\n      // edge of the first line, which cannot be on an edge\n      return eps.pointInsideRegion([(r1[0][0] + r1[1][0]) * 0.5, (r1[0][1] + r1[1][1]) * 0.5], r2);\n    } // calculate inside heirarchy\n    //\n    //  _____________________   _______    roots -> A       -> F\n    // |          A          | |   F   |            |          |\n    // |  _______   _______  | |  ___  |            +-- B      +-- G\n    // | |   B   | |   C   | | | |   | |            |   |\n    // | |  ___  | |  ___  | | | |   | |            |   +-- D\n    // | | | D | | | | E | | | | | G | |            |\n    // | | |___| | | |___| | | | |   | |            +-- C\n    // | |_______| |_______| | | |___| |                |\n    // |_____________________| |_______|                +-- E\n\n\n    function newNode(region) {\n      return {\n        region: region,\n        children: []\n      };\n    }\n\n    var roots = newNode(null);\n\n    function addChild(root, region) {\n      // first check if we're inside any children\n      for (var i = 0; i < root.children.length; i++) {\n        var child = root.children[i];\n\n        if (regionInsideRegion(region, child.region)) {\n          // we are, so insert inside them instead\n          addChild(child, region);\n          return;\n        }\n      } // not inside any children, so check to see if any children are inside us\n\n\n      var node = newNode(region);\n\n      for (var i = 0; i < root.children.length; i++) {\n        var child = root.children[i];\n\n        if (regionInsideRegion(child.region, region)) {\n          // oops... move the child beneath us, and remove them from root\n          node.children.push(child);\n          root.children.splice(i, 1);\n          i--;\n        }\n      } // now we can add ourselves\n\n\n      root.children.push(node);\n    } // add all regions to the root\n\n\n    for (var i = 0; i < poly.regions.length; i++) {\n      var region = poly.regions[i];\n      if (region.length < 3) // regions must have at least 3 points (sanity check)\n        continue;\n      addChild(roots, region);\n    } // with our heirarchy, we can distinguish between exterior borders, and interior holes\n    // the root nodes are exterior, children are interior, children's children are exterior,\n    // children's children's children are interior, etc\n    // while we're at it, exteriors are counter-clockwise, and interiors are clockwise\n\n\n    function forceWinding(region, clockwise) {\n      // first, see if we're clockwise or counter-clockwise\n      // https://en.wikipedia.org/wiki/Shoelace_formula\n      var winding = 0;\n      var last_x = region[region.length - 1][0];\n      var last_y = region[region.length - 1][1];\n      var copy = [];\n\n      for (var i = 0; i < region.length; i++) {\n        var curr_x = region[i][0];\n        var curr_y = region[i][1];\n        copy.push([curr_x, curr_y]); // create a copy while we're at it\n\n        winding += curr_y * last_x - curr_x * last_y;\n        last_x = curr_x;\n        last_y = curr_y;\n      } // this assumes Cartesian coordinates (Y is positive going up)\n\n\n      var isclockwise = winding < 0;\n      if (isclockwise !== clockwise) copy.reverse(); // while we're here, the last point must be the first point...\n\n      copy.push([copy[0][0], copy[0][1]]);\n      return copy;\n    }\n\n    var geopolys = [];\n\n    function addExterior(node) {\n      var poly = [forceWinding(node.region, false)];\n      geopolys.push(poly); // children of exteriors are interior\n\n      for (var i = 0; i < node.children.length; i++) {\n        poly.push(getInterior(node.children[i]));\n      }\n    }\n\n    function getInterior(node) {\n      // children of interiors are exterior\n      for (var i = 0; i < node.children.length; i++) {\n        addExterior(node.children[i]);\n      } // return the clockwise interior\n\n\n      return forceWinding(node.region, true);\n    } // root nodes are exterior\n\n\n    for (var i = 0; i < roots.children.length; i++) {\n      addExterior(roots.children[i]);\n    } // lastly, construct the approrpriate GeoJSON object\n\n\n    if (geopolys.length <= 0) // empty GeoJSON Polygon\n      return {\n        type: 'Polygon',\n        coordinates: []\n      };\n    if (geopolys.length == 1) // use a GeoJSON Polygon\n      return {\n        type: 'Polygon',\n        coordinates: geopolys[0]\n      };\n    return {\n      // otherwise, use a GeoJSON MultiPolygon\n      type: 'MultiPolygon',\n      coordinates: geopolys\n    };\n  }\n};\nmodule.exports = GeoJSON;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar Loggers = require('./lib/loggers');\n\nvar noop = require('./lib/noop');\n\nvar pushUnique = require('./lib/push_unique');\n\nvar isPlainObject = require('./lib/is_plain_object');\n\nvar addStyleRule = require('./lib/dom').addStyleRule;\n\nvar ExtendModule = require('./lib/extend');\n\nvar basePlotAttributes = require('./plots/attributes');\n\nvar baseLayoutAttributes = require('./plots/layout_attributes');\n\nvar extendFlat = ExtendModule.extendFlat;\nvar extendDeepAll = ExtendModule.extendDeepAll;\nexports.modules = {};\nexports.allCategories = {};\nexports.allTypes = [];\nexports.subplotsRegistry = {};\nexports.transformsRegistry = {};\nexports.componentsRegistry = {};\nexports.layoutArrayContainers = [];\nexports.layoutArrayRegexes = [];\nexports.traceLayoutAttributes = {};\nexports.localeRegistry = {};\nexports.apiMethodRegistry = {};\nexports.collectableSubplotTypes = null;\n/**\n * Top-level register routine, exported as Plotly.register\n *\n * @param {object array or array of objects} _modules :\n *  module object or list of module object to register.\n *\n *  A valid `moduleType: 'trace'` module has fields:\n *  - name {string} : the trace type\n *  - categories {array} : categories associated with this trace type,\n *                         tested with Register.traceIs()\n *  - meta {object} : meta info (mostly for plot-schema)\n *\n *  A valid `moduleType: 'locale'` module has fields:\n *  - name {string} : the locale name. Should be a 2-digit language string ('en', 'de')\n *                    optionally with a country/region code ('en-GB', 'de-CH'). If a country\n *                    code is used but the base language locale has not yet been supplied,\n *                    we will use this locale for the base as well.\n *  - dictionary {object} : the dictionary mapping input strings to localized strings\n *                          generally the keys should be the literal input strings, but\n *                          if default translations are provided you can use any string as a key.\n *  - format {object} : a `d3.locale` format specifier for this locale\n *                      any omitted keys we'll fall back on en-US.\n *\n *  A valid `moduleType: 'transform'` module has fields:\n *  - name {string} : transform name\n *  - transform {function} : default-level transform function\n *  - calcTransform {function} : calc-level transform function\n *  - attributes {object} : transform attributes declarations\n *  - supplyDefaults {function} : attributes default-supply function\n *\n *  A valid `moduleType: 'component'` module has fields:\n *  - name {string} : the component name, used it with Register.getComponentMethod()\n *                    to employ component method.\n *\n *  A valid `moduleType: 'apiMethod'` module has fields:\n *  - name {string} : the api method name.\n *  - fn {function} : the api method called with Register.call();\n *\n */\n\nexports.register = function register(_modules) {\n  exports.collectableSubplotTypes = null;\n\n  if (!_modules) {\n    throw new Error('No argument passed to Plotly.register.');\n  } else if (_modules && !Array.isArray(_modules)) {\n    _modules = [_modules];\n  }\n\n  for (var i = 0; i < _modules.length; i++) {\n    var newModule = _modules[i];\n\n    if (!newModule) {\n      throw new Error('Invalid module was attempted to be registered!');\n    }\n\n    switch (newModule.moduleType) {\n      case 'trace':\n        registerTraceModule(newModule);\n        break;\n\n      case 'transform':\n        registerTransformModule(newModule);\n        break;\n\n      case 'component':\n        registerComponentModule(newModule);\n        break;\n\n      case 'locale':\n        registerLocale(newModule);\n        break;\n\n      case 'apiMethod':\n        var name = newModule.name;\n        exports.apiMethodRegistry[name] = newModule.fn;\n        break;\n\n      default:\n        throw new Error('Invalid module was attempted to be registered!');\n    }\n  }\n};\n/**\n * Get registered module using trace object or trace type\n *\n * @param {object||string} trace\n *  trace object with prop 'type' or trace type as a string\n * @return {object}\n *  module object corresponding to trace type\n */\n\n\nexports.getModule = function (trace) {\n  var _module = exports.modules[getTraceType(trace)];\n  if (!_module) return false;\n  return _module._module;\n};\n/**\n * Determine if this trace type is in a given category\n *\n * @param {object||string} traceType\n *  a trace (object) or trace type (string)\n * @param {string} category\n *  category in question\n * @return {boolean}\n */\n\n\nexports.traceIs = function (traceType, category) {\n  traceType = getTraceType(traceType); // old plot.ly workspace hack, nothing to see here\n\n  if (traceType === 'various') return false;\n  var _module = exports.modules[traceType];\n\n  if (!_module) {\n    if (traceType && traceType !== 'area') {\n      Loggers.log('Unrecognized trace type ' + traceType + '.');\n    }\n\n    _module = exports.modules[basePlotAttributes.type.dflt];\n  }\n\n  return !!_module.categories[category];\n};\n/**\n * Determine if this trace has a transform of the given type and return\n * array of matching indices.\n *\n * @param {object} data\n *  a trace object (member of data or fullData)\n * @param {string} type\n *  type of trace to test\n * @return {array}\n *  array of matching indices. If none found, returns []\n */\n\n\nexports.getTransformIndices = function (data, type) {\n  var indices = [];\n  var transforms = data.transforms || [];\n\n  for (var i = 0; i < transforms.length; i++) {\n    if (transforms[i].type === type) {\n      indices.push(i);\n    }\n  }\n\n  return indices;\n};\n/**\n * Determine if this trace has a transform of the given type\n *\n * @param {object} data\n *  a trace object (member of data or fullData)\n * @param {string} type\n *  type of trace to test\n * @return {boolean}\n */\n\n\nexports.hasTransform = function (data, type) {\n  var transforms = data.transforms || [];\n\n  for (var i = 0; i < transforms.length; i++) {\n    if (transforms[i].type === type) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * Retrieve component module method. Falls back on noop if either the\n * module or the method is missing, so the result can always be safely called\n *\n * @param {string} name\n *  name of component (as declared in component module)\n * @param {string} method\n *  name of component module method\n * @return {function}\n */\n\n\nexports.getComponentMethod = function (name, method) {\n  var _module = exports.componentsRegistry[name];\n  if (!_module) return noop;\n  return _module[method] || noop;\n};\n/**\n * Call registered api method.\n *\n * @param {string} name : api method name\n * @param {...array} args : arguments passed to api method\n * @return {any} : returns api method output\n */\n\n\nexports.call = function () {\n  var name = arguments[0];\n  var args = [].slice.call(arguments, 1);\n  return exports.apiMethodRegistry[name].apply(null, args);\n};\n\nfunction registerTraceModule(_module) {\n  var thisType = _module.name;\n  var categoriesIn = _module.categories;\n  var meta = _module.meta;\n\n  if (exports.modules[thisType]) {\n    Loggers.log('Type ' + thisType + ' already registered');\n    return;\n  }\n\n  if (!exports.subplotsRegistry[_module.basePlotModule.name]) {\n    registerSubplot(_module.basePlotModule);\n  }\n\n  var categoryObj = {};\n\n  for (var i = 0; i < categoriesIn.length; i++) {\n    categoryObj[categoriesIn[i]] = true;\n    exports.allCategories[categoriesIn[i]] = true;\n  }\n\n  exports.modules[thisType] = {\n    _module: _module,\n    categories: categoryObj\n  };\n\n  if (meta && Object.keys(meta).length) {\n    exports.modules[thisType].meta = meta;\n  }\n\n  exports.allTypes.push(thisType);\n\n  for (var componentName in exports.componentsRegistry) {\n    mergeComponentAttrsToTrace(componentName, thisType);\n  }\n  /*\n   * Collect all trace layout attributes in one place for easier lookup later\n   * but don't merge them into the base schema as it would confuse the docs\n   * (at least after https://github.com/plotly/documentation/issues/202 gets done!)\n   */\n\n\n  if (_module.layoutAttributes) {\n    extendFlat(exports.traceLayoutAttributes, _module.layoutAttributes);\n  }\n\n  var basePlotModule = _module.basePlotModule;\n  var bpmName = basePlotModule.name; // add mapbox-gl CSS here to avoid console warning on instantiation\n\n  if (bpmName === 'mapbox') {\n    var styleRules = basePlotModule.constants.styleRules;\n\n    for (var k in styleRules) {\n      addStyleRule('.js-plotly-plot .plotly .mapboxgl-' + k, styleRules[k]);\n    }\n  } // if `plotly-geo-assets.js` is not included,\n  // add `PlotlyGeoAssets` global to stash references to all fetched\n  // topojson / geojson data\n\n\n  if ((bpmName === 'geo' || bpmName === 'mapbox') && typeof window !== undefined && window.PlotlyGeoAssets === undefined) {\n    window.PlotlyGeoAssets = {\n      topojson: {}\n    };\n  }\n}\n\nfunction registerSubplot(_module) {\n  var plotType = _module.name;\n\n  if (exports.subplotsRegistry[plotType]) {\n    Loggers.log('Plot type ' + plotType + ' already registered.');\n    return;\n  } // relayout array handling will look for component module methods with this\n  // name and won't find them because this is a subplot module... but that\n  // should be fine, it will just fall back on redrawing the plot.\n\n\n  findArrayRegexps(_module); // not sure what's best for the 'cartesian' type at this point\n\n  exports.subplotsRegistry[plotType] = _module;\n\n  for (var componentName in exports.componentsRegistry) {\n    mergeComponentAttrsToSubplot(componentName, _module.name);\n  }\n}\n\nfunction registerComponentModule(_module) {\n  if (typeof _module.name !== 'string') {\n    throw new Error('Component module *name* must be a string.');\n  }\n\n  var name = _module.name;\n  exports.componentsRegistry[name] = _module;\n\n  if (_module.layoutAttributes) {\n    if (_module.layoutAttributes._isLinkedToArray) {\n      pushUnique(exports.layoutArrayContainers, name);\n    }\n\n    findArrayRegexps(_module);\n  }\n\n  for (var traceType in exports.modules) {\n    mergeComponentAttrsToTrace(name, traceType);\n  }\n\n  for (var subplotName in exports.subplotsRegistry) {\n    mergeComponentAttrsToSubplot(name, subplotName);\n  }\n\n  for (var transformType in exports.transformsRegistry) {\n    mergeComponentAttrsToTransform(name, transformType);\n  }\n\n  if (_module.schema && _module.schema.layout) {\n    extendDeepAll(baseLayoutAttributes, _module.schema.layout);\n  }\n}\n\nfunction registerTransformModule(_module) {\n  if (typeof _module.name !== 'string') {\n    throw new Error('Transform module *name* must be a string.');\n  }\n\n  var prefix = 'Transform module ' + _module.name;\n  var hasTransform = typeof _module.transform === 'function';\n  var hasCalcTransform = typeof _module.calcTransform === 'function';\n\n  if (!hasTransform && !hasCalcTransform) {\n    throw new Error(prefix + ' is missing a *transform* or *calcTransform* method.');\n  }\n\n  if (hasTransform && hasCalcTransform) {\n    Loggers.log([prefix + ' has both a *transform* and *calcTransform* methods.', 'Please note that all *transform* methods are executed', 'before all *calcTransform* methods.'].join(' '));\n  }\n\n  if (!isPlainObject(_module.attributes)) {\n    Loggers.log(prefix + ' registered without an *attributes* object.');\n  }\n\n  if (typeof _module.supplyDefaults !== 'function') {\n    Loggers.log(prefix + ' registered without a *supplyDefaults* method.');\n  }\n\n  exports.transformsRegistry[_module.name] = _module;\n\n  for (var componentName in exports.componentsRegistry) {\n    mergeComponentAttrsToTransform(componentName, _module.name);\n  }\n}\n\nfunction registerLocale(_module) {\n  var locale = _module.name;\n  var baseLocale = locale.split('-')[0];\n  var newDict = _module.dictionary;\n  var newFormat = _module.format;\n  var hasDict = newDict && Object.keys(newDict).length;\n  var hasFormat = newFormat && Object.keys(newFormat).length;\n  var locales = exports.localeRegistry;\n  var localeObj = locales[locale];\n  if (!localeObj) locales[locale] = localeObj = {}; // Should we use this dict for the base locale?\n  // In case we're overwriting a previous dict for this locale, check\n  // whether the base matches the full locale dict now. If we're not\n  // overwriting, locales[locale] is undefined so this just checks if\n  // baseLocale already had a dict or not.\n  // Same logic for dateFormats\n\n  if (baseLocale !== locale) {\n    var baseLocaleObj = locales[baseLocale];\n    if (!baseLocaleObj) locales[baseLocale] = baseLocaleObj = {};\n\n    if (hasDict && baseLocaleObj.dictionary === localeObj.dictionary) {\n      baseLocaleObj.dictionary = newDict;\n    }\n\n    if (hasFormat && baseLocaleObj.format === localeObj.format) {\n      baseLocaleObj.format = newFormat;\n    }\n  }\n\n  if (hasDict) localeObj.dictionary = newDict;\n  if (hasFormat) localeObj.format = newFormat;\n}\n\nfunction findArrayRegexps(_module) {\n  if (_module.layoutAttributes) {\n    var arrayAttrRegexps = _module.layoutAttributes._arrayAttrRegexps;\n\n    if (arrayAttrRegexps) {\n      for (var i = 0; i < arrayAttrRegexps.length; i++) {\n        pushUnique(exports.layoutArrayRegexes, arrayAttrRegexps[i]);\n      }\n    }\n  }\n}\n\nfunction mergeComponentAttrsToTrace(componentName, traceType) {\n  var componentSchema = exports.componentsRegistry[componentName].schema;\n  if (!componentSchema || !componentSchema.traces) return;\n  var traceAttrs = componentSchema.traces[traceType];\n\n  if (traceAttrs) {\n    extendDeepAll(exports.modules[traceType]._module.attributes, traceAttrs);\n  }\n}\n\nfunction mergeComponentAttrsToTransform(componentName, transformType) {\n  var componentSchema = exports.componentsRegistry[componentName].schema;\n  if (!componentSchema || !componentSchema.transforms) return;\n  var transformAttrs = componentSchema.transforms[transformType];\n\n  if (transformAttrs) {\n    extendDeepAll(exports.transformsRegistry[transformType].attributes, transformAttrs);\n  }\n}\n\nfunction mergeComponentAttrsToSubplot(componentName, subplotName) {\n  var componentSchema = exports.componentsRegistry[componentName].schema;\n  if (!componentSchema || !componentSchema.subplots) return;\n  var subplotModule = exports.subplotsRegistry[subplotName];\n  var subplotAttrs = subplotModule.layoutAttributes;\n  var subplotAttr = subplotModule.attr === 'subplot' ? subplotModule.name : subplotModule.attr;\n  if (Array.isArray(subplotAttr)) subplotAttr = subplotAttr[0];\n  var componentLayoutAttrs = componentSchema.subplots[subplotAttr];\n\n  if (subplotAttrs && componentLayoutAttrs) {\n    extendDeepAll(subplotAttrs, componentLayoutAttrs);\n  }\n}\n\nfunction getTraceType(traceType) {\n  if (typeof traceType === 'object') traceType = traceType.type;\n  return traceType;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar extractOpts = require('./helpers').extractOpts;\n\nmodule.exports = function calc(gd, trace, opts) {\n  var fullLayout = gd._fullLayout;\n  var vals = opts.vals;\n  var containerStr = opts.containerStr;\n  var container = containerStr ? Lib.nestedProperty(trace, containerStr).get() : trace;\n  var cOpts = extractOpts(container);\n  var auto = cOpts.auto !== false;\n  var min = cOpts.min;\n  var max = cOpts.max;\n  var mid = cOpts.mid;\n\n  var minVal = function minVal() {\n    return Lib.aggNums(Math.min, null, vals);\n  };\n\n  var maxVal = function maxVal() {\n    return Lib.aggNums(Math.max, null, vals);\n  };\n\n  if (min === undefined) {\n    min = minVal();\n  } else if (auto) {\n    if (container._colorAx && isNumeric(min)) {\n      min = Math.min(min, minVal());\n    } else {\n      min = minVal();\n    }\n  }\n\n  if (max === undefined) {\n    max = maxVal();\n  } else if (auto) {\n    if (container._colorAx && isNumeric(max)) {\n      max = Math.max(max, maxVal());\n    } else {\n      max = maxVal();\n    }\n  }\n\n  if (auto && mid !== undefined) {\n    if (max - mid > mid - min) {\n      min = mid - (max - mid);\n    } else if (max - mid < mid - min) {\n      max = mid + (mid - min);\n    }\n  }\n\n  if (min === max) {\n    min -= 0.5;\n    max += 0.5;\n  }\n\n  cOpts._sync('min', min);\n\n  cOpts._sync('max', max);\n\n  if (cOpts.autocolorscale) {\n    var scl;\n    if (min * max < 0) scl = fullLayout.colorscale.diverging;else if (min >= 0) scl = fullLayout.colorscale.sequential;else scl = fullLayout.colorscale.sequentialminus;\n\n    cOpts._sync('colorscale', scl);\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * This will be transferred over to gd and overridden by\n * config args to Plotly.plot.\n *\n * The defaults are the appropriate settings for plotly.js,\n * so we get the right experience without any config argument.\n *\n * N.B. the config options are not coerced using Lib.coerce so keys\n * like `valType` and `values` are only set for documentation purposes\n * at the moment.\n */\n\nvar configAttributes = {\n  staticPlot: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Determines whether the graphs are interactive or not.', 'If *false*, no interactivity, for export or image generation.'].join(' ')\n  },\n  plotlyServerURL: {\n    valType: 'string',\n    dflt: 'https://plot.ly',\n    description: ['Sets base URL for the \\'Edit in Chart Studio\\' (aka sendDataToCloud) mode bar button', 'and the showLink/sendData on-graph link'].join(' ')\n  },\n  editable: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Determines whether the graph is editable or not.', 'Sets all pieces of `edits`', 'unless a separate `edits` config item overrides individual parts.'].join(' ')\n  },\n  edits: {\n    annotationPosition: {\n      valType: 'boolean',\n      dflt: false,\n      description: ['Determines if the main anchor of the annotation is editable.', 'The main anchor corresponds to the', 'text (if no arrow) or the arrow (which drags the whole thing leaving', 'the arrow length & direction unchanged).'].join(' ')\n    },\n    annotationTail: {\n      valType: 'boolean',\n      dflt: false,\n      description: ['Has only an effect for annotations with arrows.', 'Enables changing the length and direction of the arrow.'].join(' ')\n    },\n    annotationText: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables editing annotation text.'\n    },\n    axisTitleText: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables editing axis title text.'\n    },\n    colorbarPosition: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables moving colorbars.'\n    },\n    colorbarTitleText: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables editing colorbar title text.'\n    },\n    legendPosition: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables moving the legend.'\n    },\n    legendText: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables editing the trace name fields from the legend'\n    },\n    shapePosition: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables moving shapes.'\n    },\n    titleText: {\n      valType: 'boolean',\n      dflt: false,\n      description: 'Enables editing the global layout title.'\n    }\n  },\n  autosizable: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Determines whether the graphs are plotted with respect to', 'layout.autosize:true and infer its container size.'].join(' ')\n  },\n  responsive: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Determines whether to change the layout size when window is resized.', 'In v2, this option will be removed and will always be true.'].join(' ')\n  },\n  fillFrame: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['When `layout.autosize` is turned on, determines whether the graph', 'fills the container (the default) or the screen (if set to *true*).'].join(' ')\n  },\n  frameMargins: {\n    valType: 'number',\n    dflt: 0,\n    min: 0,\n    max: 0.5,\n    description: ['When `layout.autosize` is turned on, set the frame margins', 'in fraction of the graph size.'].join(' ')\n  },\n  scrollZoom: {\n    valType: 'flaglist',\n    flags: ['cartesian', 'gl3d', 'geo', 'mapbox'],\n    extras: [true, false],\n    dflt: 'gl3d+geo+mapbox',\n    description: ['Determines whether mouse wheel or two-finger scroll zooms is enable.', 'Turned on by default for gl3d, geo and mapbox subplots', '(as these subplot types do not have zoombox via pan),', 'but turned off by default for cartesian subplots.', 'Set `scrollZoom` to *false* to disable scrolling for all subplots.'].join(' ')\n  },\n  doubleClick: {\n    valType: 'enumerated',\n    values: [false, 'reset', 'autosize', 'reset+autosize'],\n    dflt: 'reset+autosize',\n    description: ['Sets the double click interaction mode.', 'Has an effect only in cartesian plots.', 'If *false*, double click is disable.', 'If *reset*, double click resets the axis ranges to their initial values.', 'If *autosize*, double click set the axis ranges to their autorange values.', 'If *reset+autosize*, the odd double clicks resets the axis ranges', 'to their initial values and even double clicks set the axis ranges', 'to their autorange values.'].join(' ')\n  },\n  doubleClickDelay: {\n    valType: 'number',\n    dflt: 300,\n    min: 0,\n    description: ['Sets the delay for registering a double-click in ms.', 'This is the time interval (in ms) between first mousedown and', '2nd mouseup to constitute a double-click.', 'This setting propagates to all on-subplot double clicks', '(except for geo and mapbox) and on-legend double clicks.'].join(' ')\n  },\n  showAxisDragHandles: {\n    valType: 'boolean',\n    dflt: true,\n    description: ['Set to *false* to omit cartesian axis pan/zoom drag handles.'].join(' ')\n  },\n  showAxisRangeEntryBoxes: {\n    valType: 'boolean',\n    dflt: true,\n    description: ['Set to *false* to omit direct range entry at the pan/zoom drag points,', 'note that `showAxisDragHandles` must be enabled to have an effect.'].join(' ')\n  },\n  showTips: {\n    valType: 'boolean',\n    dflt: true,\n    description: ['Determines whether or not tips are shown while interacting', 'with the resulting graphs.'].join(' ')\n  },\n  showLink: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Determines whether a link to plot.ly is displayed', 'at the bottom right corner of resulting graphs.', 'Use with `sendData` and `linkText`.'].join(' ')\n  },\n  linkText: {\n    valType: 'string',\n    dflt: 'Edit chart',\n    noBlank: true,\n    description: ['Sets the text appearing in the `showLink` link.'].join(' ')\n  },\n  sendData: {\n    valType: 'boolean',\n    dflt: true,\n    description: ['If *showLink* is true, does it contain data', 'just link to a plot.ly file?'].join(' ')\n  },\n  showSources: {\n    valType: 'any',\n    dflt: false,\n    description: ['Adds a source-displaying function to show sources on', 'the resulting graphs.'].join(' ')\n  },\n  displayModeBar: {\n    valType: 'enumerated',\n    values: ['hover', true, false],\n    dflt: 'hover',\n    description: ['Determines the mode bar display mode.', 'If *true*, the mode bar is always visible.', 'If *false*, the mode bar is always hidden.', 'If *hover*, the mode bar is visible while the mouse cursor', 'is on the graph container.'].join(' ')\n  },\n  showSendToCloud: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Should we include a ModeBar button, labeled \"Edit in Chart Studio\",', 'that sends this chart to plot.ly or another plotly server as specified', 'by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0', 'this button was included by default, now it is opt-in using this flag.', 'Note that this button can (depending on `plotlyServerURL`) send your data', 'to an external server. However that server does not persist your data', 'until you arrive at the Chart Studio and explicitly click \"Save\".'].join(' ')\n  },\n  showEditInChartStudio: {\n    valType: 'boolean',\n    dflt: false,\n    description: ['Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.', 'Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,', 'only `showEditInChartStudio` will be honored.'].join(' ')\n  },\n  modeBarButtonsToRemove: {\n    valType: 'any',\n    dflt: [],\n    description: ['Remove mode bar buttons by name.', 'See ./components/modebar/buttons.js for the list of names.'].join(' ')\n  },\n  modeBarButtonsToAdd: {\n    valType: 'any',\n    dflt: [],\n    description: ['Add mode bar button using config objects', 'See ./components/modebar/buttons.js for list of arguments.'].join(' ')\n  },\n  modeBarButtons: {\n    valType: 'any',\n    dflt: false,\n    description: ['Define fully custom mode bar buttons as nested array,', 'where the outer arrays represents button groups, and', 'the inner arrays have buttons config objects or names of default buttons', 'See ./components/modebar/buttons.js for more info.'].join(' ')\n  },\n  toImageButtonOptions: {\n    valType: 'any',\n    dflt: {},\n    description: ['Statically override options for toImage modebar button', 'allowed keys are format, filename, width, height, scale', 'see ../components/modebar/buttons.js'].join(' ')\n  },\n  displaylogo: {\n    valType: 'boolean',\n    dflt: true,\n    description: ['Determines whether or not the plotly logo is displayed', 'on the end of the mode bar.'].join(' ')\n  },\n  watermark: {\n    valType: 'boolean',\n    dflt: false,\n    description: 'watermark the images with the company\\'s logo'\n  },\n  plotGlPixelRatio: {\n    valType: 'number',\n    dflt: 2,\n    min: 1,\n    max: 4,\n    description: ['Set the pixel ratio during WebGL image export.', 'This config option was formerly named `plot3dPixelRatio`', 'which is now deprecated.'].join(' ')\n  },\n  setBackground: {\n    valType: 'any',\n    dflt: 'transparent',\n    description: ['Set function to add the background color (i.e. `layout.paper_color`)', 'to a different container.', 'This function take the graph div as first argument and the current background', 'color as second argument.', 'Alternatively, set to string *opaque* to ensure there is white behind it.'].join(' ')\n  },\n  topojsonURL: {\n    valType: 'string',\n    noBlank: true,\n    dflt: 'https://cdn.plot.ly/',\n    description: ['Set the URL to topojson used in geo charts.', 'By default, the topojson files are fetched from cdn.plot.ly.', 'For example, set this option to:', '<path-to-plotly.js>/dist/topojson/', 'to render geographical feature using the topojson files', 'that ship with the plotly.js module.'].join(' ')\n  },\n  mapboxAccessToken: {\n    valType: 'string',\n    dflt: null,\n    description: ['Mapbox access token (required to plot mapbox trace types)', 'If using an Mapbox Atlas server, set this option to \\'\\'', 'so that plotly.js won\\'t attempt to authenticate to the public Mapbox server.'].join(' ')\n  },\n  logging: {\n    valType: 'integer',\n    min: 0,\n    max: 2,\n    dflt: 1,\n    description: ['Turn all console logging on or off (errors will be thrown)', 'This should ONLY be set via Plotly.setPlotConfig', 'Available levels:', '0: no logs', '1: warnings and errors, but not informational messages', '2: verbose logs'].join(' ')\n  },\n  notifyOnLogging: {\n    valType: 'integer',\n    min: 0,\n    max: 2,\n    dflt: 0,\n    description: ['Set on-graph logging (notifier) level', 'This should ONLY be set via Plotly.setPlotConfig', 'Available levels:', '0: no on-graph logs', '1: warnings and errors, but not informational messages', '2: verbose logs'].join(' ')\n  },\n  queueLength: {\n    valType: 'integer',\n    min: 0,\n    dflt: 0,\n    description: 'Sets the length of the undo/redo queue.'\n  },\n  globalTransforms: {\n    valType: 'any',\n    dflt: [],\n    description: ['Set global transform to be applied to all traces with no', 'specification needed'].join(' ')\n  },\n  locale: {\n    valType: 'string',\n    dflt: 'en-US',\n    description: ['Which localization should we use?', 'Should be a string like \\'en\\' or \\'en-US\\'.'].join(' ')\n  },\n  locales: {\n    valType: 'any',\n    dflt: {},\n    description: ['Localization definitions', 'Locales can be provided either here (specific to one chart) or globally', 'by registering them as modules.', 'Should be an object of objects {locale: {dictionary: {...}, format: {...}}}', '{', '  da: {', '      dictionary: {\\'Reset axes\\': \\'Nulstil aksler\\', ...},', '      format: {months: [...], shortMonths: [...]}', '  },', '  ...', '}', 'All parts are optional. When looking for translation or format fields, we', 'look first for an exact match in a config locale, then in a registered', 'module. If those fail, we strip off any regionalization (\\'en-US\\' -> \\'en\\')', 'and try each (config, registry) again. The final fallback for translation', 'is untranslated (which is US English) and for formats is the base English', '(the only consequence being the last fallback date format %x is DD/MM/YYYY', 'instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored', 'for our automatic number formatting, but can be used in custom formats.'].join(' ')\n  }\n};\nvar dfltConfig = {};\n\nfunction crawl(src, target) {\n  for (var k in src) {\n    var obj = src[k];\n\n    if (obj.valType) {\n      target[k] = obj.dflt;\n    } else {\n      if (!target[k]) {\n        target[k] = {};\n      }\n\n      crawl(obj, target[k]);\n    }\n  }\n}\n\ncrawl(configAttributes, dfltConfig);\nmodule.exports = {\n  configAttributes: configAttributes,\n  dfltConfig: dfltConfig\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar Registry = require('../../registry');\n\nvar constants = require('./constants'); // convert between axis names (xaxis, xaxis2, etc, elements of gd.layout)\n// and axis id's (x, x2, etc). Would probably have ditched 'xaxis'\n// completely in favor of just 'x' if it weren't ingrained in the API etc.\n\n\nexports.id2name = function id2name(id) {\n  if (typeof id !== 'string' || !id.match(constants.AX_ID_PATTERN)) return;\n  var axNum = id.substr(1);\n  if (axNum === '1') axNum = '';\n  return id.charAt(0) + 'axis' + axNum;\n};\n\nexports.name2id = function name2id(name) {\n  if (!name.match(constants.AX_NAME_PATTERN)) return;\n  var axNum = name.substr(5);\n  if (axNum === '1') axNum = '';\n  return name.charAt(0) + axNum;\n};\n\nexports.cleanId = function cleanId(id, axLetter) {\n  if (!id.match(constants.AX_ID_PATTERN)) return;\n  if (axLetter && id.charAt(0) !== axLetter) return;\n  var axNum = id.substr(1).replace(/^0+/, '');\n  if (axNum === '1') axNum = '';\n  return id.charAt(0) + axNum;\n}; // get all axis objects, as restricted in listNames\n\n\nexports.list = function (gd, axLetter, only2d) {\n  var fullLayout = gd._fullLayout;\n  if (!fullLayout) return [];\n  var idList = exports.listIds(gd, axLetter);\n  var out = new Array(idList.length);\n  var i;\n\n  for (i = 0; i < idList.length; i++) {\n    var idi = idList[i];\n    out[i] = fullLayout[idi.charAt(0) + 'axis' + idi.substr(1)];\n  }\n\n  if (!only2d) {\n    var sceneIds3D = fullLayout._subplots.gl3d || [];\n\n    for (i = 0; i < sceneIds3D.length; i++) {\n      var scene = fullLayout[sceneIds3D[i]];\n      if (axLetter) out.push(scene[axLetter + 'axis']);else out.push(scene.xaxis, scene.yaxis, scene.zaxis);\n    }\n  }\n\n  return out;\n}; // get all axis ids, optionally restricted by letter\n// this only makes sense for 2d axes\n\n\nexports.listIds = function (gd, axLetter) {\n  var fullLayout = gd._fullLayout;\n  if (!fullLayout) return [];\n  var subplotLists = fullLayout._subplots;\n  if (axLetter) return subplotLists[axLetter + 'axis'];\n  return subplotLists.xaxis.concat(subplotLists.yaxis);\n}; // get an axis object from its id 'x','x2' etc\n// optionally, id can be a subplot (ie 'x2y3') and type gets x or y from it\n\n\nexports.getFromId = function (gd, id, type) {\n  var fullLayout = gd._fullLayout;\n  if (type === 'x') id = id.replace(/y[0-9]*/, '');else if (type === 'y') id = id.replace(/x[0-9]*/, '');\n  return fullLayout[exports.id2name(id)];\n}; // get an axis object of specified type from the containing trace\n\n\nexports.getFromTrace = function (gd, fullTrace, type) {\n  var fullLayout = gd._fullLayout;\n  var ax = null;\n\n  if (Registry.traceIs(fullTrace, 'gl3d')) {\n    var scene = fullTrace.scene;\n\n    if (scene.substr(0, 5) === 'scene') {\n      ax = fullLayout[scene][type + 'axis'];\n    }\n  } else {\n    ax = exports.getFromId(gd, fullTrace[type + 'axis'] || type);\n  }\n\n  return ax;\n}; // sort x, x2, x10, y, y2, y10...\n\n\nexports.idSort = function (id1, id2) {\n  var letter1 = id1.charAt(0);\n  var letter2 = id2.charAt(0);\n  if (letter1 !== letter2) return letter1 > letter2 ? 1 : -1;\n  return +(id1.substr(1) || 1) - +(id2.substr(1) || 1);\n};\n\nexports.getAxisGroup = function getAxisGroup(fullLayout, axId) {\n  var matchGroups = fullLayout._axisMatchGroups;\n\n  for (var i = 0; i < matchGroups.length; i++) {\n    var group = matchGroups[i];\n    if (group[axId]) return 'g' + i;\n  }\n\n  return axId;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\n\nvar isPlainObject = require('./is_plain_object');\n/**\n * Relink private _keys and keys with a function value from one container\n * to the new container.\n * Relink means copying if object is pass-by-value and adding a reference\n * if object is pass-by-ref.\n * This prevents deepCopying massive structures like a webgl context.\n */\n\n\nmodule.exports = function relinkPrivateKeys(toContainer, fromContainer) {\n  for (var k in fromContainer) {\n    var fromVal = fromContainer[k];\n    var toVal = toContainer[k];\n\n    if (toVal === fromVal) {\n      continue;\n    }\n\n    if (k.charAt(0) === '_' || typeof fromVal === 'function') {\n      // if it already exists at this point, it's something\n      // that we recreate each time around, so ignore it\n      if (k in toContainer) continue;\n      toContainer[k] = fromVal;\n    } else if (isArrayOrTypedArray(fromVal) && isArrayOrTypedArray(toVal) && isPlainObject(fromVal[0])) {\n      // filter out data_array items that can contain user objects\n      // most of the time the toVal === fromVal check will catch these early\n      // but if the user makes new ones we also don't want to recurse in.\n      if (k === 'customdata' || k === 'ids') continue; // recurse into arrays containers\n\n      var minLen = Math.min(fromVal.length, toVal.length);\n\n      for (var j = 0; j < minLen; j++) {\n        if (toVal[j] !== fromVal[j] && isPlainObject(fromVal[j]) && isPlainObject(toVal[j])) {\n          relinkPrivateKeys(toVal[j], fromVal[j]);\n        }\n      }\n    } else if (isPlainObject(fromVal) && isPlainObject(toVal)) {\n      // recurse into objects, but only if they still exist\n      relinkPrivateKeys(toVal, fromVal);\n      if (!Object.keys(toVal).length) delete toContainer[k];\n    }\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar hasColorbar = require('../colorbar/has_colorbar');\n\nvar colorbarDefaults = require('../colorbar/defaults');\n\nvar isValidScale = require('./scales').isValid;\n\nvar traceIs = require('../../registry').traceIs;\n\nfunction npMaybe(parentCont, prefix) {\n  var containerStr = prefix.slice(0, prefix.length - 1);\n  return prefix ? Lib.nestedProperty(parentCont, containerStr).get() || {} : parentCont;\n}\n/**\n * Colorscale / colorbar default handler\n *\n * @param {object} parentContIn : user (input) parent container (e.g. trace or layout coloraxis object)\n * @param {object} parentContOut : full parent container\n * @param {object} layout : (full) layout object\n * @param {fn} coerce : Lib.coerce wrapper\n * @param {object} opts :\n * - prefix {string} : attr string prefix to colorscale container from parent root\n * - cLetter {string} : 'c or 'z' color letter\n */\n\n\nmodule.exports = function colorScaleDefaults(parentContIn, parentContOut, layout, coerce, opts) {\n  var prefix = opts.prefix;\n  var cLetter = opts.cLetter;\n  var inTrace = '_module' in parentContOut;\n  var containerIn = npMaybe(parentContIn, prefix);\n  var containerOut = npMaybe(parentContOut, prefix);\n  var template = npMaybe(parentContOut._template || {}, prefix) || {}; // colorScaleDefaults wrapper called if-ever we need to reset the colorscale\n  // attributes for containers that were linked to invalid color axes\n\n  var thisFn = function thisFn() {\n    delete parentContIn.coloraxis;\n    delete parentContOut.coloraxis;\n    return colorScaleDefaults(parentContIn, parentContOut, layout, coerce, opts);\n  };\n\n  if (inTrace) {\n    var colorAxes = layout._colorAxes || {};\n    var colorAx = coerce(prefix + 'coloraxis');\n\n    if (colorAx) {\n      var colorbarVisuals = traceIs(parentContOut, 'contour') && Lib.nestedProperty(parentContOut, 'contours.coloring').get() || 'heatmap';\n      var stash = colorAxes[colorAx];\n\n      if (stash) {\n        stash[2].push(thisFn);\n\n        if (stash[0] !== colorbarVisuals) {\n          stash[0] = false;\n          Lib.warn(['Ignoring coloraxis:', colorAx, 'setting', 'as it is linked to incompatible colorscales.'].join(' '));\n        }\n      } else {\n        // stash:\n        // - colorbar visual 'type'\n        // - colorbar options to help in Colorbar.draw\n        // - list of colorScaleDefaults wrapper functions\n        colorAxes[colorAx] = [colorbarVisuals, parentContOut, [thisFn]];\n      }\n\n      return;\n    }\n  }\n\n  var minIn = containerIn[cLetter + 'min'];\n  var maxIn = containerIn[cLetter + 'max'];\n  var validMinMax = isNumeric(minIn) && isNumeric(maxIn) && minIn < maxIn;\n  var auto = coerce(prefix + cLetter + 'auto', !validMinMax);\n\n  if (auto) {\n    coerce(prefix + cLetter + 'mid');\n  } else {\n    coerce(prefix + cLetter + 'min');\n    coerce(prefix + cLetter + 'max');\n  } // handles both the trace case (autocolorscale is false by default) and\n  // the marker and marker.line case (autocolorscale is true by default)\n\n\n  var sclIn = containerIn.colorscale;\n  var sclTemplate = template.colorscale;\n  var autoColorscaleDflt;\n  if (sclIn !== undefined) autoColorscaleDflt = !isValidScale(sclIn);\n  if (sclTemplate !== undefined) autoColorscaleDflt = !isValidScale(sclTemplate);\n  coerce(prefix + 'autocolorscale', autoColorscaleDflt);\n  coerce(prefix + 'colorscale');\n  coerce(prefix + 'reversescale');\n\n  if (prefix !== 'marker.line.') {\n    // handles both the trace case where the dflt is listed in attributes and\n    // the marker case where the dflt is determined by hasColorbar\n    var showScaleDflt;\n    if (prefix && inTrace) showScaleDflt = hasColorbar(containerIn);\n    var showScale = coerce(prefix + 'showscale', showScaleDflt);\n\n    if (showScale) {\n      if (prefix && template) containerOut._template = template;\n      colorbarDefaults(containerIn, containerOut, layout);\n    }\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar Registry = require('../registry');\n\nvar Lib = require('../lib');\n/*\n * Create or update an observer. This function is designed to be\n * idempotent so that it can be called over and over as the component\n * updates, and will attach and detach listeners as needed.\n *\n * @param {optional object} container\n *      An object on which the observer is stored. This is the mechanism\n *      by which it is idempotent. If it already exists, another won't be\n *      added. Each time it's called, the value lookup table is updated.\n * @param {array} commandList\n *      An array of commands, following either `buttons` of `updatemenus`\n *      or `steps` of `sliders`.\n * @param {function} onchange\n *      A listener called when the value is changed. Receives data object\n *      with information about the new state.\n */\n\n\nexports.manageCommandObserver = function (gd, container, commandList, onchange) {\n  var ret = {};\n  var enabled = true;\n\n  if (container && container._commandObserver) {\n    ret = container._commandObserver;\n  }\n\n  if (!ret.cache) {\n    ret.cache = {};\n  } // Either create or just recompute this:\n\n\n  ret.lookupTable = {};\n  var binding = exports.hasSimpleAPICommandBindings(gd, commandList, ret.lookupTable);\n\n  if (container && container._commandObserver) {\n    if (!binding) {\n      // If container exists and there are no longer any bindings,\n      // remove existing:\n      if (container._commandObserver.remove) {\n        container._commandObserver.remove();\n\n        container._commandObserver = null;\n        return ret;\n      }\n    } else {\n      // If container exists and there *are* bindings, then the lookup\n      // table should have been updated and check is already attached,\n      // so there's nothing to be done:\n      return ret;\n    }\n  } // Determine whether there's anything to do for this binding:\n\n\n  if (binding) {\n    // Build the cache:\n    bindingValueHasChanged(gd, binding, ret.cache);\n\n    ret.check = function check() {\n      if (!enabled) return;\n      var update = bindingValueHasChanged(gd, binding, ret.cache);\n\n      if (update.changed && onchange) {\n        // Disable checks for the duration of this command in order to avoid\n        // infinite loops:\n        if (ret.lookupTable[update.value] !== undefined) {\n          ret.disable();\n          Promise.resolve(onchange({\n            value: update.value,\n            type: binding.type,\n            prop: binding.prop,\n            traces: binding.traces,\n            index: ret.lookupTable[update.value]\n          })).then(ret.enable, ret.enable);\n        }\n      }\n\n      return update.changed;\n    };\n\n    var checkEvents = ['plotly_relayout', 'plotly_redraw', 'plotly_restyle', 'plotly_update', 'plotly_animatingframe', 'plotly_afterplot'];\n\n    for (var i = 0; i < checkEvents.length; i++) {\n      gd._internalOn(checkEvents[i], ret.check);\n    }\n\n    ret.remove = function () {\n      for (var i = 0; i < checkEvents.length; i++) {\n        gd._removeInternalListener(checkEvents[i], ret.check);\n      }\n    };\n  } else {\n    // TODO: It'd be really neat to actually give a *reason* for this, but at least a warning\n    // is a start\n    Lib.log('Unable to automatically bind plot updates to API command');\n    ret.lookupTable = {};\n\n    ret.remove = function () {};\n  }\n\n  ret.disable = function disable() {\n    enabled = false;\n  };\n\n  ret.enable = function enable() {\n    enabled = true;\n  };\n\n  if (container) {\n    container._commandObserver = ret;\n  }\n\n  return ret;\n};\n/*\n * This function checks to see if an array of objects containing\n * method and args properties is compatible with automatic two-way\n * binding. The criteria right now are that\n *\n *   1. multiple traces may be affected\n *   2. only one property may be affected\n *   3. the same property must be affected by all commands\n */\n\n\nexports.hasSimpleAPICommandBindings = function (gd, commandList, bindingsByValue) {\n  var i;\n  var n = commandList.length;\n  var refBinding;\n\n  for (i = 0; i < n; i++) {\n    var binding;\n    var command = commandList[i];\n    var method = command.method;\n    var args = command.args;\n    if (!Array.isArray(args)) args = []; // If any command has no method, refuse to bind:\n\n    if (!method) {\n      return false;\n    }\n\n    var bindings = exports.computeAPICommandBindings(gd, method, args); // Right now, handle one and *only* one property being set:\n\n    if (bindings.length !== 1) {\n      return false;\n    }\n\n    if (!refBinding) {\n      refBinding = bindings[0];\n\n      if (Array.isArray(refBinding.traces)) {\n        refBinding.traces.sort();\n      }\n    } else {\n      binding = bindings[0];\n\n      if (binding.type !== refBinding.type) {\n        return false;\n      }\n\n      if (binding.prop !== refBinding.prop) {\n        return false;\n      }\n\n      if (Array.isArray(refBinding.traces)) {\n        if (Array.isArray(binding.traces)) {\n          binding.traces.sort();\n\n          for (var j = 0; j < refBinding.traces.length; j++) {\n            if (refBinding.traces[j] !== binding.traces[j]) {\n              return false;\n            }\n          }\n        } else {\n          return false;\n        }\n      } else {\n        if (binding.prop !== refBinding.prop) {\n          return false;\n        }\n      }\n    }\n\n    binding = bindings[0];\n    var value = binding.value;\n\n    if (Array.isArray(value)) {\n      if (value.length === 1) {\n        value = value[0];\n      } else {\n        return false;\n      }\n    }\n\n    if (bindingsByValue) {\n      bindingsByValue[value] = i;\n    }\n  }\n\n  return refBinding;\n};\n\nfunction bindingValueHasChanged(gd, binding, cache) {\n  var container, value, obj;\n  var changed = false;\n\n  if (binding.type === 'data') {\n    // If it's data, we need to get a trace. Based on the limited scope\n    // of what we cover, we can just take the first trace from the list,\n    // or otherwise just the first trace:\n    container = gd._fullData[binding.traces !== null ? binding.traces[0] : 0];\n  } else if (binding.type === 'layout') {\n    container = gd._fullLayout;\n  } else {\n    return false;\n  }\n\n  value = Lib.nestedProperty(container, binding.prop).get();\n  obj = cache[binding.type] = cache[binding.type] || {};\n\n  if (obj.hasOwnProperty(binding.prop)) {\n    if (obj[binding.prop] !== value) {\n      changed = true;\n    }\n  }\n\n  obj[binding.prop] = value;\n  return {\n    changed: changed,\n    value: value\n  };\n}\n/*\n * Execute an API command. There's really not much to this; it just provides\n * a common hook so that implementations don't need to be synchronized across\n * multiple components with the ability to invoke API commands.\n *\n * @param {string} method\n *      The name of the plotly command to execute. Must be one of 'animate',\n *      'restyle', 'relayout', 'update'.\n * @param {array} args\n *      A list of arguments passed to the API command\n */\n\n\nexports.executeAPICommand = function (gd, method, args) {\n  if (method === 'skip') return Promise.resolve();\n  var _method = Registry.apiMethodRegistry[method];\n  var allArgs = [gd];\n  if (!Array.isArray(args)) args = [];\n\n  for (var i = 0; i < args.length; i++) {\n    allArgs.push(args[i]);\n  }\n\n  return _method.apply(null, allArgs)[\"catch\"](function (err) {\n    Lib.warn('API call to Plotly.' + method + ' rejected.', err);\n    return Promise.reject(err);\n  });\n};\n\nexports.computeAPICommandBindings = function (gd, method, args) {\n  var bindings;\n  if (!Array.isArray(args)) args = [];\n\n  switch (method) {\n    case 'restyle':\n      bindings = computeDataBindings(gd, args);\n      break;\n\n    case 'relayout':\n      bindings = computeLayoutBindings(gd, args);\n      break;\n\n    case 'update':\n      bindings = computeDataBindings(gd, [args[0], args[2]]).concat(computeLayoutBindings(gd, [args[1]]));\n      break;\n\n    case 'animate':\n      bindings = computeAnimateBindings(gd, args);\n      break;\n\n    default:\n      // This is the case where intelligent logic about what affects\n      // this command is not implemented. It causes no ill effects.\n      // For example, addFrames simply won't bind to a control component.\n      bindings = [];\n  }\n\n  return bindings;\n};\n\nfunction computeAnimateBindings(gd, args) {\n  // We'll assume that the only relevant modification an animation\n  // makes that's meaningfully tracked is the frame:\n  if (Array.isArray(args[0]) && args[0].length === 1 && ['string', 'number'].indexOf(typeof args[0][0]) !== -1) {\n    return [{\n      type: 'layout',\n      prop: '_currentFrame',\n      value: args[0][0].toString()\n    }];\n  } else {\n    return [];\n  }\n}\n\nfunction computeLayoutBindings(gd, args) {\n  var bindings = [];\n  var astr = args[0];\n  var aobj = {};\n\n  if (typeof astr === 'string') {\n    aobj[astr] = args[1];\n  } else if (Lib.isPlainObject(astr)) {\n    aobj = astr;\n  } else {\n    return bindings;\n  }\n\n  crawl(aobj, function (path, attrName, attr) {\n    bindings.push({\n      type: 'layout',\n      prop: path,\n      value: attr\n    });\n  }, '', 0);\n  return bindings;\n}\n\nfunction computeDataBindings(gd, args) {\n  var traces, astr, val, aobj;\n  var bindings = []; // Logic copied from Plotly.restyle:\n\n  astr = args[0];\n  val = args[1];\n  traces = args[2];\n  aobj = {};\n\n  if (typeof astr === 'string') {\n    aobj[astr] = val;\n  } else if (Lib.isPlainObject(astr)) {\n    // the 3-arg form\n    aobj = astr;\n\n    if (traces === undefined) {\n      traces = val;\n    }\n  } else {\n    return bindings;\n  }\n\n  if (traces === undefined) {\n    // Explicitly assign this to null instead of undefined:\n    traces = null;\n  }\n\n  crawl(aobj, function (path, attrName, _attr) {\n    var thisTraces;\n    var attr;\n\n    if (Array.isArray(_attr)) {\n      attr = _attr.slice();\n      var nAttr = Math.min(attr.length, gd.data.length);\n\n      if (traces) {\n        nAttr = Math.min(nAttr, traces.length);\n      }\n\n      thisTraces = [];\n\n      for (var j = 0; j < nAttr; j++) {\n        thisTraces[j] = traces ? traces[j] : j;\n      }\n    } else {\n      attr = _attr;\n      thisTraces = traces ? traces.slice() : null;\n    } // Convert [7] to just 7 when traces is null:\n\n\n    if (thisTraces === null) {\n      if (Array.isArray(attr)) {\n        attr = attr[0];\n      }\n    } else if (Array.isArray(thisTraces)) {\n      if (!Array.isArray(attr)) {\n        var tmp = attr;\n        attr = [];\n\n        for (var i = 0; i < thisTraces.length; i++) {\n          attr[i] = tmp;\n        }\n      }\n\n      attr.length = Math.min(thisTraces.length, attr.length);\n    }\n\n    bindings.push({\n      type: 'data',\n      prop: path,\n      traces: thisTraces,\n      value: attr\n    });\n  }, '', 0);\n  return bindings;\n}\n\nfunction crawl(attrs, callback, path, depth) {\n  Object.keys(attrs).forEach(function (attrName) {\n    var attr = attrs[attrName];\n    if (attrName[0] === '_') return;\n    var thisPath = path + (depth > 0 ? '.' : '') + attrName;\n\n    if (Lib.isPlainObject(attr)) {\n      crawl(attr, callback, thisPath, depth + 1);\n    } else {\n      // Only execute the callback on leaf nodes:\n      callback(thisPath, attrName, attr);\n    }\n  });\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar tinycolor = require('tinycolor2');\n\nvar scales = {\n  'Greys': [[0, 'rgb(0,0,0)'], [1, 'rgb(255,255,255)']],\n  'YlGnBu': [[0, 'rgb(8,29,88)'], [0.125, 'rgb(37,52,148)'], [0.25, 'rgb(34,94,168)'], [0.375, 'rgb(29,145,192)'], [0.5, 'rgb(65,182,196)'], [0.625, 'rgb(127,205,187)'], [0.75, 'rgb(199,233,180)'], [0.875, 'rgb(237,248,217)'], [1, 'rgb(255,255,217)']],\n  'Greens': [[0, 'rgb(0,68,27)'], [0.125, 'rgb(0,109,44)'], [0.25, 'rgb(35,139,69)'], [0.375, 'rgb(65,171,93)'], [0.5, 'rgb(116,196,118)'], [0.625, 'rgb(161,217,155)'], [0.75, 'rgb(199,233,192)'], [0.875, 'rgb(229,245,224)'], [1, 'rgb(247,252,245)']],\n  'YlOrRd': [[0, 'rgb(128,0,38)'], [0.125, 'rgb(189,0,38)'], [0.25, 'rgb(227,26,28)'], [0.375, 'rgb(252,78,42)'], [0.5, 'rgb(253,141,60)'], [0.625, 'rgb(254,178,76)'], [0.75, 'rgb(254,217,118)'], [0.875, 'rgb(255,237,160)'], [1, 'rgb(255,255,204)']],\n  'Bluered': [[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']],\n  // modified RdBu based on\n  // http://www.kennethmoreland.com/color-maps/\n  'RdBu': [[0, 'rgb(5,10,172)'], [0.35, 'rgb(106,137,247)'], [0.5, 'rgb(190,190,190)'], [0.6, 'rgb(220,170,132)'], [0.7, 'rgb(230,145,90)'], [1, 'rgb(178,10,28)']],\n  // Scale for non-negative numeric values\n  'Reds': [[0, 'rgb(220,220,220)'], [0.2, 'rgb(245,195,157)'], [0.4, 'rgb(245,160,105)'], [1, 'rgb(178,10,28)']],\n  // Scale for non-positive numeric values\n  'Blues': [[0, 'rgb(5,10,172)'], [0.35, 'rgb(40,60,190)'], [0.5, 'rgb(70,100,245)'], [0.6, 'rgb(90,120,245)'], [0.7, 'rgb(106,137,247)'], [1, 'rgb(220,220,220)']],\n  'Picnic': [[0, 'rgb(0,0,255)'], [0.1, 'rgb(51,153,255)'], [0.2, 'rgb(102,204,255)'], [0.3, 'rgb(153,204,255)'], [0.4, 'rgb(204,204,255)'], [0.5, 'rgb(255,255,255)'], [0.6, 'rgb(255,204,255)'], [0.7, 'rgb(255,153,255)'], [0.8, 'rgb(255,102,204)'], [0.9, 'rgb(255,102,102)'], [1, 'rgb(255,0,0)']],\n  'Rainbow': [[0, 'rgb(150,0,90)'], [0.125, 'rgb(0,0,200)'], [0.25, 'rgb(0,25,255)'], [0.375, 'rgb(0,152,255)'], [0.5, 'rgb(44,255,150)'], [0.625, 'rgb(151,255,0)'], [0.75, 'rgb(255,234,0)'], [0.875, 'rgb(255,111,0)'], [1, 'rgb(255,0,0)']],\n  'Portland': [[0, 'rgb(12,51,131)'], [0.25, 'rgb(10,136,186)'], [0.5, 'rgb(242,211,56)'], [0.75, 'rgb(242,143,56)'], [1, 'rgb(217,30,30)']],\n  'Jet': [[0, 'rgb(0,0,131)'], [0.125, 'rgb(0,60,170)'], [0.375, 'rgb(5,255,255)'], [0.625, 'rgb(255,255,0)'], [0.875, 'rgb(250,0,0)'], [1, 'rgb(128,0,0)']],\n  'Hot': [[0, 'rgb(0,0,0)'], [0.3, 'rgb(230,0,0)'], [0.6, 'rgb(255,210,0)'], [1, 'rgb(255,255,255)']],\n  'Blackbody': [[0, 'rgb(0,0,0)'], [0.2, 'rgb(230,0,0)'], [0.4, 'rgb(230,210,0)'], [0.7, 'rgb(255,255,255)'], [1, 'rgb(160,200,255)']],\n  'Earth': [[0, 'rgb(0,0,130)'], [0.1, 'rgb(0,180,180)'], [0.2, 'rgb(40,210,40)'], [0.4, 'rgb(230,230,50)'], [0.6, 'rgb(120,70,20)'], [1, 'rgb(255,255,255)']],\n  'Electric': [[0, 'rgb(0,0,0)'], [0.15, 'rgb(30,0,100)'], [0.4, 'rgb(120,0,100)'], [0.6, 'rgb(160,90,0)'], [0.8, 'rgb(230,200,0)'], [1, 'rgb(255,250,220)']],\n  'Viridis': [[0, '#440154'], [0.06274509803921569, '#48186a'], [0.12549019607843137, '#472d7b'], [0.18823529411764706, '#424086'], [0.25098039215686274, '#3b528b'], [0.3137254901960784, '#33638d'], [0.3764705882352941, '#2c728e'], [0.4392156862745098, '#26828e'], [0.5019607843137255, '#21918c'], [0.5647058823529412, '#1fa088'], [0.6274509803921569, '#28ae80'], [0.6901960784313725, '#3fbc73'], [0.7529411764705882, '#5ec962'], [0.8156862745098039, '#84d44b'], [0.8784313725490196, '#addc30'], [0.9411764705882353, '#d8e219'], [1, '#fde725']],\n  'Cividis': [[0.000000, 'rgb(0,32,76)'], [0.058824, 'rgb(0,42,102)'], [0.117647, 'rgb(0,52,110)'], [0.176471, 'rgb(39,63,108)'], [0.235294, 'rgb(60,74,107)'], [0.294118, 'rgb(76,85,107)'], [0.352941, 'rgb(91,95,109)'], [0.411765, 'rgb(104,106,112)'], [0.470588, 'rgb(117,117,117)'], [0.529412, 'rgb(131,129,120)'], [0.588235, 'rgb(146,140,120)'], [0.647059, 'rgb(161,152,118)'], [0.705882, 'rgb(176,165,114)'], [0.764706, 'rgb(192,177,109)'], [0.823529, 'rgb(209,191,102)'], [0.882353, 'rgb(225,204,92)'], [0.941176, 'rgb(243,219,79)'], [1.000000, 'rgb(255,233,69)']]\n};\nvar defaultScale = scales.RdBu;\n\nfunction getScale(scl, dflt) {\n  if (!dflt) dflt = defaultScale;\n  if (!scl) return dflt;\n\n  function parseScale() {\n    try {\n      scl = scales[scl] || JSON.parse(scl);\n    } catch (e) {\n      scl = dflt;\n    }\n  }\n\n  if (typeof scl === 'string') {\n    parseScale(); // occasionally scl is double-JSON encoded...\n\n    if (typeof scl === 'string') parseScale();\n  }\n\n  if (!isValidScaleArray(scl)) return dflt;\n  return scl;\n}\n\nfunction isValidScaleArray(scl) {\n  var highestVal = 0;\n  if (!Array.isArray(scl) || scl.length < 2) return false;\n  if (!scl[0] || !scl[scl.length - 1]) return false;\n  if (+scl[0][0] !== 0 || +scl[scl.length - 1][0] !== 1) return false;\n\n  for (var i = 0; i < scl.length; i++) {\n    var si = scl[i];\n\n    if (si.length !== 2 || +si[0] < highestVal || !tinycolor(si[1]).isValid()) {\n      return false;\n    }\n\n    highestVal = +si[0];\n  }\n\n  return true;\n}\n\nfunction isValidScale(scl) {\n  if (scales[scl] !== undefined) return true;else return isValidScaleArray(scl);\n}\n\nmodule.exports = {\n  scales: scales,\n  defaultScale: defaultScale,\n  get: getScale,\n  isValid: isValidScale\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar mouseOffset = require('mouse-event-offset');\n\nvar hasHover = require('has-hover');\n\nvar supportsPassive = require('has-passive-events');\n\nvar removeElement = require('../../lib').removeElement;\n\nvar constants = require('../../plots/cartesian/constants');\n\nvar dragElement = module.exports = {};\ndragElement.align = require('./align');\ndragElement.getCursor = require('./cursor');\n\nvar unhover = require('./unhover');\n\ndragElement.unhover = unhover.wrapped;\ndragElement.unhoverRaw = unhover.raw;\n/**\n * Abstracts click & drag interactions\n *\n * During the interaction, a \"coverSlip\" element - a transparent\n * div covering the whole page - is created, which has two key effects:\n * - Lets you drag beyond the boundaries of the plot itself without\n *   dropping (but if you drag all the way out of the browser window the\n *   interaction will end)\n * - Freezes the cursor: whatever mouse cursor the drag element had when the\n *   interaction started gets copied to the coverSlip for use until mouseup\n *\n * If the user executes a drag bigger than MINDRAG, callbacks will fire as:\n *      prepFn, moveFn (1 or more times), doneFn\n * If the user does not drag enough, prepFn and clickFn will fire.\n *\n * Note: If you cancel contextmenu, clickFn will fire even with a right click\n * (unlike native events) so you'll get a `plotly_click` event. Cancel context eg:\n *    gd.addEventListener('contextmenu', function(e) { e.preventDefault(); });\n * TODO: we should probably turn this into a `config` parameter, so we can fix it\n * such that if you *don't* cancel contextmenu, we can prevent partial drags, which\n * put you in a weird state.\n *\n * If the user clicks multiple times quickly, clickFn will fire each time\n * but numClicks will increase to help you recognize doubleclicks.\n *\n * @param {object} options with keys:\n *      element (required) the DOM element to drag\n *      prepFn (optional) function(event, startX, startY)\n *          executed on mousedown\n *          startX and startY are the clientX and clientY pixel position\n *          of the mousedown event\n *      moveFn (optional) function(dx, dy)\n *          executed on move, ONLY after we've exceeded MINDRAG\n *          (we keep executing moveFn if you move back to where you started)\n *          dx and dy are the net pixel offset of the drag,\n *          dragged is true/false, has the mouse moved enough to\n *          constitute a drag\n *      doneFn (optional) function(e)\n *          executed on mouseup, ONLY if we exceeded MINDRAG (so you can be\n *          sure that moveFn has been called at least once)\n *          numClicks is how many clicks we've registered within\n *          a doubleclick time\n *          e is the original mouseup event\n *      clickFn (optional) function(numClicks, e)\n *          executed on mouseup if we have NOT exceeded MINDRAG (ie moveFn\n *          has not been called at all)\n *          numClicks is how many clicks we've registered within\n *          a doubleclick time\n *          e is the original mousedown event\n *      clampFn (optional, function(dx, dy) return [dx2, dy2])\n *          Provide custom clamping function for small displacements.\n *          By default, clamping is done using `minDrag` to x and y displacements\n *          independently.\n */\n\ndragElement.init = function init(options) {\n  var gd = options.gd;\n  var numClicks = 1;\n  var doubleClickDelay = gd._context.doubleClickDelay;\n  var element = options.element;\n  var startX, startY, newMouseDownTime, cursor, dragCover, initialEvent, initialTarget, rightClick;\n  if (!gd._mouseDownTime) gd._mouseDownTime = 0;\n  element.style.pointerEvents = 'all';\n  element.onmousedown = onStart;\n\n  if (!supportsPassive) {\n    element.ontouchstart = onStart;\n  } else {\n    if (element._ontouchstart) {\n      element.removeEventListener('touchstart', element._ontouchstart);\n    }\n\n    element._ontouchstart = onStart;\n    element.addEventListener('touchstart', onStart, {\n      passive: false\n    });\n  }\n\n  function _clampFn(dx, dy, minDrag) {\n    if (Math.abs(dx) < minDrag) dx = 0;\n    if (Math.abs(dy) < minDrag) dy = 0;\n    return [dx, dy];\n  }\n\n  var clampFn = options.clampFn || _clampFn;\n\n  function onStart(e) {\n    // make dragging and dragged into properties of gd\n    // so that others can look at and modify them\n    gd._dragged = false;\n    gd._dragging = true;\n    var offset = pointerOffset(e);\n    startX = offset[0];\n    startY = offset[1];\n    initialTarget = e.target;\n    initialEvent = e;\n    rightClick = e.buttons === 2 || e.ctrlKey; // fix Fx.hover for touch events\n\n    if (typeof e.clientX === 'undefined' && typeof e.clientY === 'undefined') {\n      e.clientX = startX;\n      e.clientY = startY;\n    }\n\n    newMouseDownTime = new Date().getTime();\n\n    if (newMouseDownTime - gd._mouseDownTime < doubleClickDelay) {\n      // in a click train\n      numClicks += 1;\n    } else {\n      // new click train\n      numClicks = 1;\n      gd._mouseDownTime = newMouseDownTime;\n    }\n\n    if (options.prepFn) options.prepFn(e, startX, startY);\n\n    if (hasHover && !rightClick) {\n      dragCover = coverSlip();\n      dragCover.style.cursor = window.getComputedStyle(element).cursor;\n    } else if (!hasHover) {\n      // document acts as a dragcover for mobile, bc we can't create dragcover dynamically\n      dragCover = document;\n      cursor = window.getComputedStyle(document.documentElement).cursor;\n      document.documentElement.style.cursor = window.getComputedStyle(element).cursor;\n    }\n\n    document.addEventListener('mouseup', onDone);\n    document.addEventListener('touchend', onDone);\n\n    if (options.dragmode !== false) {\n      e.preventDefault();\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('touchmove', onMove, {\n        passive: false\n      });\n    }\n\n    return;\n  }\n\n  function onMove(e) {\n    e.preventDefault();\n    var offset = pointerOffset(e);\n    var minDrag = options.minDrag || constants.MINDRAG;\n    var dxdy = clampFn(offset[0] - startX, offset[1] - startY, minDrag);\n    var dx = dxdy[0];\n    var dy = dxdy[1];\n\n    if (dx || dy) {\n      gd._dragged = true;\n      dragElement.unhover(gd);\n    }\n\n    if (gd._dragged && options.moveFn && !rightClick) {\n      gd._dragdata = {\n        element: element,\n        dx: dx,\n        dy: dy\n      };\n      options.moveFn(dx, dy);\n    }\n\n    return;\n  }\n\n  function onDone(e) {\n    delete gd._dragdata;\n\n    if (options.dragmode !== false) {\n      e.preventDefault();\n      document.removeEventListener('mousemove', onMove);\n      document.removeEventListener('touchmove', onMove);\n    }\n\n    document.removeEventListener('mouseup', onDone);\n    document.removeEventListener('touchend', onDone);\n\n    if (hasHover) {\n      removeElement(dragCover);\n    } else if (cursor) {\n      dragCover.documentElement.style.cursor = cursor;\n      cursor = null;\n    }\n\n    if (!gd._dragging) {\n      gd._dragged = false;\n      return;\n    }\n\n    gd._dragging = false; // don't count as a dblClick unless the mouseUp is also within\n    // the dblclick delay\n\n    if (new Date().getTime() - gd._mouseDownTime > doubleClickDelay) {\n      numClicks = Math.max(numClicks - 1, 1);\n    }\n\n    if (gd._dragged) {\n      if (options.doneFn) options.doneFn();\n    } else {\n      if (options.clickFn) options.clickFn(numClicks, initialEvent); // If we haven't dragged, this should be a click. But because of the\n      // coverSlip changing the element, the natural system might not generate one,\n      // so we need to make our own. But right clicks don't normally generate\n      // click events, only contextmenu events, which happen on mousedown.\n\n      if (!rightClick) {\n        var e2;\n\n        try {\n          e2 = new MouseEvent('click', e);\n        } catch (err) {\n          var offset = pointerOffset(e);\n          e2 = document.createEvent('MouseEvents');\n          e2.initMouseEvent('click', e.bubbles, e.cancelable, e.view, e.detail, e.screenX, e.screenY, offset[0], offset[1], e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\n        }\n\n        initialTarget.dispatchEvent(e2);\n      }\n    }\n\n    gd._dragging = false;\n    gd._dragged = false;\n    return;\n  }\n};\n\nfunction coverSlip() {\n  var cover = document.createElement('div');\n  cover.className = 'dragcover';\n  var cStyle = cover.style;\n  cStyle.position = 'fixed';\n  cStyle.left = 0;\n  cStyle.right = 0;\n  cStyle.top = 0;\n  cStyle.bottom = 0;\n  cStyle.zIndex = 999999999;\n  cStyle.background = 'none';\n  document.body.appendChild(cover);\n  return cover;\n}\n\ndragElement.coverSlip = coverSlip;\n\nfunction pointerOffset(e) {\n  return mouseOffset(e.changedTouches ? e.changedTouches[0] : e, document.body);\n}","\"use strict\";\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nmodule.exports = stronglyConnectedComponents;\n\nfunction stronglyConnectedComponents(adjList) {\n  var numVertices = adjList.length;\n  var index = new Array(numVertices);\n  var lowValue = new Array(numVertices);\n  var active = new Array(numVertices);\n  var child = new Array(numVertices);\n  var scc = new Array(numVertices);\n  var sccLinks = new Array(numVertices); //Initialize tables\n\n  for (var i = 0; i < numVertices; ++i) {\n    index[i] = -1;\n    lowValue[i] = 0;\n    active[i] = false;\n    child[i] = 0;\n    scc[i] = -1;\n    sccLinks[i] = [];\n  } // The strongConnect function\n\n\n  var count = 0;\n  var components = [];\n  var sccAdjList = [];\n\n  function strongConnect(v) {\n    // To avoid running out of stack space, this emulates the recursive behaviour of the normal algorithm, effectively using T as the call stack.\n    var S = [v],\n        T = [v];\n    index[v] = lowValue[v] = count;\n    active[v] = true;\n    count += 1;\n\n    while (T.length > 0) {\n      v = T[T.length - 1];\n      var e = adjList[v];\n\n      if (child[v] < e.length) {\n        // If we're not done iterating over the children, first try finishing that.\n        for (var i = child[v]; i < e.length; ++i) {\n          // Start where we left off.\n          var u = e[i];\n\n          if (index[u] < 0) {\n            index[u] = lowValue[u] = count;\n            active[u] = true;\n            count += 1;\n            S.push(u);\n            T.push(u);\n            break; // First recurse, then continue here (with the same child!).\n            // There is a slight change to Tarjan's algorithm here.\n            // Normally, after having recursed, we set lowValue like we do for an active child (although some variants of the algorithm do it slightly differently).\n            // Here, we only do so if the child we recursed on is still active.\n            // The reasoning is that if it is no longer active, it must have had a lowValue equal to its own index, which means that it is necessarily higher than our lowValue.\n          } else if (active[u]) {\n            lowValue[v] = Math.min(lowValue[v], lowValue[u]) | 0;\n          }\n\n          if (scc[u] >= 0) {\n            // Node v is not yet assigned an scc, but once it is that scc can apparently reach scc[u].\n            sccLinks[v].push(scc[u]);\n          }\n        }\n\n        child[v] = i; // Remember where we left off.\n      } else {\n        // If we're done iterating over the children, check whether we have an scc.\n        if (lowValue[v] === index[v]) {\n          // TODO: It /might/ be true that T is always a prefix of S (at this point!!!), and if so, this could be used here.\n          var component = [];\n          var links = [],\n              linkCount = 0;\n\n          for (var i = S.length - 1; i >= 0; --i) {\n            var w = S[i];\n            active[w] = false;\n            component.push(w);\n            links.push(sccLinks[w]);\n            linkCount += sccLinks[w].length;\n            scc[w] = components.length;\n\n            if (w === v) {\n              S.length = i;\n              break;\n            }\n          }\n\n          components.push(component);\n          var allLinks = new Array(linkCount);\n\n          for (var i = 0; i < links.length; i++) {\n            for (var j = 0; j < links[i].length; j++) {\n              allLinks[--linkCount] = links[i][j];\n            }\n          }\n\n          sccAdjList.push(allLinks);\n        }\n\n        T.pop(); // Now we're finished exploring this particular node (normally corresponds to the return statement)\n      }\n    }\n  } //Run strong connect starting from each vertex\n\n\n  for (var i = 0; i < numVertices; ++i) {\n    if (index[i] < 0) {\n      strongConnect(i);\n    }\n  } // Compact sccAdjList\n\n\n  var newE;\n\n  for (var i = 0; i < sccAdjList.length; i++) {\n    var e = sccAdjList[i];\n    if (e.length === 0) continue;\n    e.sort(function (a, b) {\n      return a - b;\n    });\n    newE = [e[0]];\n\n    for (var j = 1; j < e.length; j++) {\n      if (e[j] !== e[j - 1]) {\n        newE.push(e[j]);\n      }\n    }\n\n    sccAdjList[i] = newE;\n  }\n\n  return {\n    components: components,\n    adjacencyList: sccAdjList\n  };\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar Lib = require('../../lib');\n\nvar layoutAttributes = require('./layout_attributes');\n\nvar handleArrayContainerDefaults = require('../array_container_defaults');\n\nmodule.exports = function handleTickLabelDefaults(containerIn, containerOut, coerce, axType, options, config) {\n  if (!config || config.pass === 1) {\n    handlePrefixSuffix(containerIn, containerOut, coerce, axType, options);\n  }\n\n  if (!config || config.pass === 2) {\n    handleOtherDefaults(containerIn, containerOut, coerce, axType, options);\n  }\n};\n\nfunction handlePrefixSuffix(containerIn, containerOut, coerce, axType, options) {\n  var showAttrDflt = getShowAttrDflt(containerIn);\n  var tickPrefix = coerce('tickprefix');\n  if (tickPrefix) coerce('showtickprefix', showAttrDflt);\n  var tickSuffix = coerce('ticksuffix', options.tickSuffixDflt);\n  if (tickSuffix) coerce('showticksuffix', showAttrDflt);\n}\n\nfunction handleOtherDefaults(containerIn, containerOut, coerce, axType, options) {\n  var showAttrDflt = getShowAttrDflt(containerIn);\n  var tickPrefix = coerce('tickprefix');\n  if (tickPrefix) coerce('showtickprefix', showAttrDflt);\n  var tickSuffix = coerce('ticksuffix', options.tickSuffixDflt);\n  if (tickSuffix) coerce('showticksuffix', showAttrDflt);\n  var showTickLabels = coerce('showticklabels');\n\n  if (showTickLabels) {\n    var font = options.font || {};\n    var contColor = containerOut.color; // as with titlefont.color, inherit axis.color only if one was\n    // explicitly provided\n\n    var dfltFontColor = contColor && contColor !== layoutAttributes.color.dflt ? contColor : font.color;\n    Lib.coerceFont(coerce, 'tickfont', {\n      family: font.family,\n      size: font.size,\n      color: dfltFontColor\n    });\n    coerce('tickangle');\n\n    if (axType !== 'category') {\n      var tickFormat = coerce('tickformat');\n      var tickformatStops = containerIn.tickformatstops;\n\n      if (Array.isArray(tickformatStops) && tickformatStops.length) {\n        handleArrayContainerDefaults(containerIn, containerOut, {\n          name: 'tickformatstops',\n          inclusionAttr: 'enabled',\n          handleItemDefaults: tickformatstopDefaults\n        });\n      }\n\n      if (!tickFormat && axType !== 'date') {\n        coerce('showexponent', showAttrDflt);\n        coerce('exponentformat');\n        coerce('separatethousands');\n      }\n    }\n  }\n}\n/*\n * Attributes 'showexponent', 'showtickprefix' and 'showticksuffix'\n * share values.\n *\n * If only 1 attribute is set,\n * the remaining attributes inherit that value.\n *\n * If 2 attributes are set to the same value,\n * the remaining attribute inherits that value.\n *\n * If 2 attributes are set to different values,\n * the remaining is set to its dflt value.\n *\n */\n\n\nfunction getShowAttrDflt(containerIn) {\n  var showAttrsAll = ['showexponent', 'showtickprefix', 'showticksuffix'];\n  var showAttrs = showAttrsAll.filter(function (a) {\n    return containerIn[a] !== undefined;\n  });\n\n  var sameVal = function sameVal(a) {\n    return containerIn[a] === containerIn[showAttrs[0]];\n  };\n\n  if (showAttrs.every(sameVal) || showAttrs.length === 1) {\n    return containerIn[showAttrs[0]];\n  }\n}\n\nfunction tickformatstopDefaults(valueIn, valueOut) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(valueIn, valueOut, layoutAttributes.tickformatstops, attr, dflt);\n  }\n\n  var enabled = coerce('enabled');\n\n  if (enabled) {\n    coerce('dtickrange');\n    coerce('value');\n  }\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Return news array containing only the unique items\n * found in input array.\n *\n * IMPORTANT: Note that items are considered unique\n * if `String({})` is unique. For example;\n *\n *  Lib.filterUnique([ { a: 1 }, { b: 2 } ])\n *\n *  returns [{ a: 1 }]\n *\n * and\n *\n *  Lib.filterUnique([ '1', 1 ])\n *\n *  returns ['1']\n *\n *\n * @param {array} array base array\n * @return {array} new filtered array\n */\n\nmodule.exports = function filterUnique(array) {\n  var seen = {};\n  var out = [];\n  var j = 0;\n\n  for (var i = 0; i < array.length; i++) {\n    var item = array[i];\n\n    if (seen[item] !== 1) {\n      seen[item] = 1;\n      out[j++] = item;\n    }\n  }\n\n  return out;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  mode: {\n    valType: 'enumerated',\n    dflt: 'afterall',\n    role: 'info',\n    values: ['immediate', 'next', 'afterall'],\n    description: ['Describes how a new animate call interacts with currently-running', 'animations. If `immediate`, current animations are interrupted and', 'the new animation is started. If `next`, the current frame is allowed', 'to complete, after which the new animation is started. If `afterall`', 'all existing frames are animated to completion before the new animation', 'is started.'].join(' ')\n  },\n  direction: {\n    valType: 'enumerated',\n    role: 'info',\n    values: ['forward', 'reverse'],\n    dflt: 'forward',\n    description: ['The direction in which to play the frames triggered by the animation call'].join(' ')\n  },\n  fromcurrent: {\n    valType: 'boolean',\n    dflt: false,\n    role: 'info',\n    description: ['Play frames starting at the current frame instead of the beginning.'].join(' ')\n  },\n  frame: {\n    duration: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 500,\n      description: ['The duration in milliseconds of each frame. If greater than the frame', 'duration, it will be limited to the frame duration.'].join(' ')\n    },\n    redraw: {\n      valType: 'boolean',\n      role: 'info',\n      dflt: true,\n      description: ['Redraw the plot at completion of the transition. This is desirable', 'for transitions that include properties that cannot be transitioned,', 'but may significantly slow down updates that do not require a full', 'redraw of the plot'].join(' ')\n    }\n  },\n  transition: {\n    duration: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 500,\n      editType: 'none',\n      description: ['The duration of the transition, in milliseconds. If equal to zero,', 'updates are synchronous.'].join(' ')\n    },\n    easing: {\n      valType: 'enumerated',\n      dflt: 'cubic-in-out',\n      values: ['linear', 'quad', 'cubic', 'sin', 'exp', 'circle', 'elastic', 'back', 'bounce', 'linear-in', 'quad-in', 'cubic-in', 'sin-in', 'exp-in', 'circle-in', 'elastic-in', 'back-in', 'bounce-in', 'linear-out', 'quad-out', 'cubic-out', 'sin-out', 'exp-out', 'circle-out', 'elastic-out', 'back-out', 'bounce-out', 'linear-in-out', 'quad-in-out', 'cubic-in-out', 'sin-in-out', 'exp-in-out', 'circle-in-out', 'elastic-in-out', 'back-in-out', 'bounce-in-out'],\n      role: 'info',\n      editType: 'none',\n      description: 'The easing function used for the transition'\n    },\n    ordering: {\n      valType: 'enumerated',\n      values: ['layout first', 'traces first'],\n      dflt: 'layout first',\n      role: 'info',\n      editType: 'none',\n      description: ['Determines whether the figure\\'s layout or traces smoothly transitions', 'during updates that make both traces and layout change.'].join(' ')\n    }\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Push array with unique items\n *\n * Ignores falsy items, except 0 so we can use it to construct arrays of indices.\n *\n * @param {array} array\n *  array to be filled\n * @param {any} item\n *  item to be or not to be inserted\n * @return {array}\n *  ref to array (now possibly containing one more item)\n *\n */\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nmodule.exports = function pushUnique(array, item) {\n  if (item instanceof RegExp) {\n    var itemStr = item.toString();\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i] instanceof RegExp && array[i].toString() === itemStr) {\n        return array;\n      }\n    }\n\n    array.push(item);\n  } else if ((item || item === 0) && array.indexOf(item) === -1) array.push(item);\n\n  return array;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar nestedProperty = require('./nested_property');\n\nvar SIMPLE_PROPERTY_REGEX = /^\\w*$/; // bitmask for deciding what's updated. Sometimes the name needs to be updated,\n// sometimes the value needs to be updated, and sometimes both do. This is just\n// a simple way to track what's updated such that it's a simple OR operation to\n// assimilate new updates.\n//\n// The only exception is the UNSET bit that tracks when we need to explicitly\n// unset and remove the property. This concrn arises because of the special\n// way in which nestedProperty handles null/undefined. When you specify `null`,\n// it prunes any unused items in the tree. I ran into some issues with it getting\n// null vs undefined confused, so UNSET is just a bit that forces the property\n// update to send `null`, removing the property explicitly rather than setting\n// it to undefined.\n\nvar NONE = 0;\nvar NAME = 1;\nvar VALUE = 2;\nvar BOTH = 3;\nvar UNSET = 4;\n\nmodule.exports = function keyedContainer(baseObj, path, keyName, valueName) {\n  keyName = keyName || 'name';\n  valueName = valueName || 'value';\n  var i, arr, baseProp;\n  var changeTypes = {};\n\n  if (path && path.length) {\n    baseProp = nestedProperty(baseObj, path);\n    arr = baseProp.get();\n  } else {\n    arr = baseObj;\n  }\n\n  path = path || ''; // Construct an index:\n\n  var indexLookup = {};\n\n  if (arr) {\n    for (i = 0; i < arr.length; i++) {\n      indexLookup[arr[i][keyName]] = i;\n    }\n  }\n\n  var isSimpleValueProp = SIMPLE_PROPERTY_REGEX.test(valueName);\n  var obj = {\n    set: function set(name, value) {\n      var changeType = value === null ? UNSET : NONE; // create the base array if necessary\n\n      if (!arr) {\n        if (!baseProp || changeType === UNSET) return;\n        arr = [];\n        baseProp.set(arr);\n      }\n\n      var idx = indexLookup[name];\n\n      if (idx === undefined) {\n        if (changeType === UNSET) return;\n        changeType = changeType | BOTH;\n        idx = arr.length;\n        indexLookup[name] = idx;\n      } else if (value !== (isSimpleValueProp ? arr[idx][valueName] : nestedProperty(arr[idx], valueName).get())) {\n        changeType = changeType | VALUE;\n      }\n\n      var newValue = arr[idx] = arr[idx] || {};\n      newValue[keyName] = name;\n\n      if (isSimpleValueProp) {\n        newValue[valueName] = value;\n      } else {\n        nestedProperty(newValue, valueName).set(value);\n      } // If it's not an unset, force that bit to be unset. This is all related to the fact\n      // that undefined and null are a bit specially implemented in nestedProperties.\n\n\n      if (value !== null) {\n        changeType = changeType & ~UNSET;\n      }\n\n      changeTypes[idx] = changeTypes[idx] | changeType;\n      return obj;\n    },\n    get: function get(name) {\n      if (!arr) return;\n      var idx = indexLookup[name];\n\n      if (idx === undefined) {\n        return undefined;\n      } else if (isSimpleValueProp) {\n        return arr[idx][valueName];\n      } else {\n        return nestedProperty(arr[idx], valueName).get();\n      }\n    },\n    rename: function rename(name, newName) {\n      var idx = indexLookup[name];\n      if (idx === undefined) return obj;\n      changeTypes[idx] = changeTypes[idx] | NAME;\n      indexLookup[newName] = idx;\n      delete indexLookup[name];\n      arr[idx][keyName] = newName;\n      return obj;\n    },\n    remove: function remove(name) {\n      var idx = indexLookup[name];\n      if (idx === undefined) return obj;\n      var object = arr[idx];\n\n      if (Object.keys(object).length > 2) {\n        // This object contains more than just the key/value, so unset\n        // the value without modifying the entry otherwise:\n        changeTypes[idx] = changeTypes[idx] | VALUE;\n        return obj.set(name, null);\n      }\n\n      if (isSimpleValueProp) {\n        for (i = idx; i < arr.length; i++) {\n          changeTypes[i] = changeTypes[i] | BOTH;\n        }\n\n        for (i = idx; i < arr.length; i++) {\n          indexLookup[arr[i][keyName]]--;\n        }\n\n        arr.splice(idx, 1);\n        delete indexLookup[name];\n      } else {\n        // Perform this update *strictly* so we can check whether the result's\n        // been pruned. If so, it's a removal. If not, it's a value unset only.\n        nestedProperty(object, valueName).set(null); // Now check if the top level nested property has any keys left. If so,\n        // the object still has values so we only want to unset the key. If not,\n        // the entire object can be removed since there's no other data.\n        // var topLevelKeys = Object.keys(object[valueName.split('.')[0]] || []);\n\n        changeTypes[idx] = changeTypes[idx] | VALUE | UNSET;\n      }\n\n      return obj;\n    },\n    constructUpdate: function constructUpdate() {\n      var astr, idx;\n      var update = {};\n      var changed = Object.keys(changeTypes);\n\n      for (var i = 0; i < changed.length; i++) {\n        idx = changed[i];\n        astr = path + '[' + idx + ']';\n\n        if (arr[idx]) {\n          if (changeTypes[idx] & NAME) {\n            update[astr + '.' + keyName] = arr[idx][keyName];\n          }\n\n          if (changeTypes[idx] & VALUE) {\n            if (isSimpleValueProp) {\n              update[astr + '.' + valueName] = changeTypes[idx] & UNSET ? null : arr[idx][valueName];\n            } else {\n              update[astr + '.' + valueName] = changeTypes[idx] & UNSET ? null : nestedProperty(arr[idx], valueName).get();\n            }\n          }\n        } else {\n          update[astr] = null;\n        }\n      }\n\n      return update;\n    }\n  };\n  return obj;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.some\");\n\nrequire(\"core-js/modules/es6.string.link\");\n\nvar tarjan = require('strongly-connected-components');\n\nvar Lib = require('../../lib');\n\nvar wrap = require('../../lib/gup').wrap;\n\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar isIndex = Lib.isIndex;\n\nvar Colorscale = require('../../components/colorscale');\n\nfunction convertToD3Sankey(trace) {\n  var nodeSpec = trace.node;\n  var linkSpec = trace.link;\n  var links = [];\n  var hasLinkColorArray = isArrayOrTypedArray(linkSpec.color);\n  var linkedNodes = {};\n  var components = {};\n  var componentCount = linkSpec.colorscales.length;\n  var i;\n\n  for (i = 0; i < componentCount; i++) {\n    var cscale = linkSpec.colorscales[i];\n    var specs = Colorscale.extractScale(cscale, {\n      cLetter: 'c'\n    });\n    var scale = Colorscale.makeColorScaleFunc(specs);\n    components[cscale.label] = scale;\n  }\n\n  var maxNodeId = 0;\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    if (linkSpec.source[i] > maxNodeId) maxNodeId = linkSpec.source[i];\n    if (linkSpec.target[i] > maxNodeId) maxNodeId = linkSpec.target[i];\n  }\n\n  var nodeCount = maxNodeId + 1;\n  trace.node._count = nodeCount; // Group nodes\n\n  var j;\n  var groups = trace.node.groups;\n  var groupLookup = {};\n\n  for (i = 0; i < groups.length; i++) {\n    var group = groups[i]; // Build a lookup table to quickly find in which group a node is\n\n    for (j = 0; j < group.length; j++) {\n      var nodeIndex = group[j];\n      var groupIndex = nodeCount + i;\n\n      if (groupLookup.hasOwnProperty(nodeIndex)) {\n        Lib.warn('Node ' + nodeIndex + ' is already part of a group.');\n      } else {\n        groupLookup[nodeIndex] = groupIndex;\n      }\n    }\n  } // Process links\n\n\n  var groupedLinks = {\n    source: [],\n    target: []\n  };\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    var val = linkSpec.value[i]; // remove negative values, but keep zeros with special treatment\n\n    var source = linkSpec.source[i];\n    var target = linkSpec.target[i];\n\n    if (!(val > 0 && isIndex(source, nodeCount) && isIndex(target, nodeCount))) {\n      continue;\n    } // Remove links that are within the same group\n\n\n    if (groupLookup.hasOwnProperty(source) && groupLookup.hasOwnProperty(target) && groupLookup[source] === groupLookup[target]) {\n      continue;\n    } // if link targets a node in the group, relink target to that group\n\n\n    if (groupLookup.hasOwnProperty(target)) {\n      target = groupLookup[target];\n    } // if link originates from a node in a group, relink source to that group\n\n\n    if (groupLookup.hasOwnProperty(source)) {\n      source = groupLookup[source];\n    }\n\n    source = +source;\n    target = +target;\n    linkedNodes[source] = linkedNodes[target] = true;\n    var label = '';\n    if (linkSpec.label && linkSpec.label[i]) label = linkSpec.label[i];\n    var concentrationscale = null;\n    if (label && components.hasOwnProperty(label)) concentrationscale = components[label];\n    links.push({\n      pointNumber: i,\n      label: label,\n      color: hasLinkColorArray ? linkSpec.color[i] : linkSpec.color,\n      concentrationscale: concentrationscale,\n      source: source,\n      target: target,\n      value: +val\n    });\n    groupedLinks.source.push(source);\n    groupedLinks.target.push(target);\n  } // Process nodes\n\n\n  var totalCount = nodeCount + groups.length;\n  var hasNodeColorArray = isArrayOrTypedArray(nodeSpec.color);\n  var nodes = [];\n\n  for (i = 0; i < totalCount; i++) {\n    if (!linkedNodes[i]) continue;\n    var l = nodeSpec.label[i];\n    nodes.push({\n      group: i > nodeCount - 1,\n      childrenNodes: [],\n      pointNumber: i,\n      label: l,\n      color: hasNodeColorArray ? nodeSpec.color[i] : nodeSpec.color\n    });\n  } // Check if we have circularity on the resulting graph\n\n\n  var circular = false;\n\n  if (circularityPresent(totalCount, groupedLinks.source, groupedLinks.target)) {\n    circular = true;\n  }\n\n  return {\n    circular: circular,\n    links: links,\n    nodes: nodes,\n    // Data structure for groups\n    groups: groups,\n    groupLookup: groupLookup\n  };\n}\n\nfunction circularityPresent(nodeLen, sources, targets) {\n  var nodes = Lib.init2dArray(nodeLen, 0);\n\n  for (var i = 0; i < Math.min(sources.length, targets.length); i++) {\n    if (Lib.isIndex(sources[i], nodeLen) && Lib.isIndex(targets[i], nodeLen)) {\n      if (sources[i] === targets[i]) {\n        return true; // self-link which is also a scc of one\n      }\n\n      nodes[sources[i]].push(targets[i]);\n    }\n  }\n\n  var scc = tarjan(nodes); // Tarjn's strongly connected components algorithm coded by Mikola Lysenko\n  // returns at least one non-singular component if there's circularity in the graph\n\n  return scc.components.some(function (c) {\n    return c.length > 1;\n  });\n}\n\nmodule.exports = function calc(gd, trace) {\n  var result = convertToD3Sankey(trace);\n  return wrap({\n    circular: result.circular,\n    _nodes: result.nodes,\n    _links: result.links,\n    // Data structure for grouping\n    _groups: result.groups,\n    _groupLookup: result.groupLookup\n  });\n};","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // fraction of some size to get to a named position\n\nmodule.exports = {\n  // from bottom left: this is the origin of our paper-reference\n  // positioning system\n  FROM_BL: {\n    left: 0,\n    center: 0.5,\n    right: 1,\n    bottom: 0,\n    middle: 0.5,\n    top: 1\n  },\n  // from top left: this is the screen pixel positioning origin\n  FROM_TL: {\n    left: 0,\n    center: 0.5,\n    right: 1,\n    bottom: 1,\n    middle: 0.5,\n    top: 0\n  },\n  // from bottom right: sometimes you just need the opposite of ^^\n  FROM_BR: {\n    left: 1,\n    center: 0.5,\n    right: 0,\n    bottom: 0,\n    middle: 0.5,\n    top: 1\n  },\n  // multiple of fontSize to get the vertical offset between lines\n  LINE_SPACING: 1.3,\n  // multiple of fontSize to shift from the baseline\n  // to the cap (captical letter) line\n  // (to use when we don't calculate this shift from Drawing.bBox)\n  // This is an approximation since in reality cap height can differ\n  // from font to font. However, according to Wikipedia\n  //   an \"average\" font might have a cap height of 70% of the em\n  // https://en.wikipedia.org/wiki/Em_(typography)#History\n  CAP_SHIFT: 0.70,\n  // half the cap height (distance between baseline and cap line)\n  // of an \"average\" font (for more info see above).\n  MID_SHIFT: 0.35,\n  OPPOSITE_SIDE: {\n    left: 'right',\n    right: 'left',\n    top: 'bottom',\n    bottom: 'top'\n  }\n};","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar axesAttrs = require('../../plots/cartesian/layout_attributes');\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar overrideAll = require('../../plot_api/edit_types').overrideAll;\n\nmodule.exports = overrideAll({\n  // TODO: only right is supported currently\n  //     orient: {\n  //         valType: 'enumerated',\n  //         role: 'info',\n  //         values: ['left', 'right', 'top', 'bottom'],\n  //         dflt: 'right',\n  //         description: [\n  //             'Determines which side are the labels on',\n  //             '(so left and right make vertical bars, etc.)'\n  //         ].join(' ')\n  //     },\n  thicknessmode: {\n    valType: 'enumerated',\n    values: ['fraction', 'pixels'],\n    role: 'style',\n    dflt: 'pixels',\n    description: ['Determines whether this color bar\\'s thickness', '(i.e. the measure in the constant color direction)', 'is set in units of plot *fraction* or in *pixels*.', 'Use `thickness` to set the value.'].join(' ')\n  },\n  thickness: {\n    valType: 'number',\n    role: 'style',\n    min: 0,\n    dflt: 30,\n    description: ['Sets the thickness of the color bar', 'This measure excludes the size of the padding, ticks and labels.'].join(' ')\n  },\n  lenmode: {\n    valType: 'enumerated',\n    values: ['fraction', 'pixels'],\n    role: 'info',\n    dflt: 'fraction',\n    description: ['Determines whether this color bar\\'s length', '(i.e. the measure in the color variation direction)', 'is set in units of plot *fraction* or in *pixels.', 'Use `len` to set the value.'].join(' ')\n  },\n  len: {\n    valType: 'number',\n    min: 0,\n    dflt: 1,\n    role: 'style',\n    description: ['Sets the length of the color bar', 'This measure excludes the padding of both ends.', 'That is, the color bar length is this length minus the', 'padding on both ends.'].join(' ')\n  },\n  x: {\n    valType: 'number',\n    dflt: 1.02,\n    min: -2,\n    max: 3,\n    role: 'style',\n    description: ['Sets the x position of the color bar (in plot fraction).'].join(' ')\n  },\n  xanchor: {\n    valType: 'enumerated',\n    values: ['left', 'center', 'right'],\n    dflt: 'left',\n    role: 'style',\n    description: ['Sets this color bar\\'s horizontal position anchor.', 'This anchor binds the `x` position to the *left*, *center*', 'or *right* of the color bar.'].join(' ')\n  },\n  xpad: {\n    valType: 'number',\n    role: 'style',\n    min: 0,\n    dflt: 10,\n    description: 'Sets the amount of padding (in px) along the x direction.'\n  },\n  y: {\n    valType: 'number',\n    role: 'style',\n    dflt: 0.5,\n    min: -2,\n    max: 3,\n    description: ['Sets the y position of the color bar (in plot fraction).'].join(' ')\n  },\n  yanchor: {\n    valType: 'enumerated',\n    values: ['top', 'middle', 'bottom'],\n    role: 'style',\n    dflt: 'middle',\n    description: ['Sets this color bar\\'s vertical position anchor', 'This anchor binds the `y` position to the *top*, *middle*', 'or *bottom* of the color bar.'].join(' ')\n  },\n  ypad: {\n    valType: 'number',\n    role: 'style',\n    min: 0,\n    dflt: 10,\n    description: 'Sets the amount of padding (in px) along the y direction.'\n  },\n  // a possible line around the bar itself\n  outlinecolor: axesAttrs.linecolor,\n  outlinewidth: axesAttrs.linewidth,\n  // Should outlinewidth have {dflt: 0} ?\n  // another possible line outside the padding and tick labels\n  bordercolor: axesAttrs.linecolor,\n  borderwidth: {\n    valType: 'number',\n    role: 'style',\n    min: 0,\n    dflt: 0,\n    description: ['Sets the width (in px) or the border enclosing this color bar.'].join(' ')\n  },\n  bgcolor: {\n    valType: 'color',\n    role: 'style',\n    dflt: 'rgba(0,0,0,0)',\n    description: 'Sets the color of padded area.'\n  },\n  // tick and title properties named and function exactly as in axes\n  tickmode: axesAttrs.tickmode,\n  nticks: axesAttrs.nticks,\n  tick0: axesAttrs.tick0,\n  dtick: axesAttrs.dtick,\n  tickvals: axesAttrs.tickvals,\n  ticktext: axesAttrs.ticktext,\n  ticks: extendFlat({}, axesAttrs.ticks, {\n    dflt: ''\n  }),\n  ticklen: axesAttrs.ticklen,\n  tickwidth: axesAttrs.tickwidth,\n  tickcolor: axesAttrs.tickcolor,\n  showticklabels: axesAttrs.showticklabels,\n  tickfont: fontAttrs({\n    description: 'Sets the color bar\\'s tick label font'\n  }),\n  tickangle: axesAttrs.tickangle,\n  tickformat: axesAttrs.tickformat,\n  tickformatstops: axesAttrs.tickformatstops,\n  tickprefix: axesAttrs.tickprefix,\n  showtickprefix: axesAttrs.showtickprefix,\n  ticksuffix: axesAttrs.ticksuffix,\n  showticksuffix: axesAttrs.showticksuffix,\n  separatethousands: axesAttrs.separatethousands,\n  exponentformat: axesAttrs.exponentformat,\n  showexponent: axesAttrs.showexponent,\n  title: {\n    text: {\n      valType: 'string',\n      role: 'info',\n      description: ['Sets the title of the color bar.', 'Note that before the existence of `title.text`, the title\\'s', 'contents used to be defined as the `title` attribute itself.', 'This behavior has been deprecated.'].join(' ')\n    },\n    font: fontAttrs({\n      description: ['Sets this color bar\\'s title font.', 'Note that the title\\'s font used to be set', 'by the now deprecated `titlefont` attribute.'].join(' ')\n    }),\n    side: {\n      valType: 'enumerated',\n      values: ['right', 'top', 'bottom'],\n      role: 'style',\n      dflt: 'top',\n      description: ['Determines the location of color bar\\'s title', 'with respect to the color bar.', 'Note that the title\\'s location used to be set', 'by the now deprecated `titleside` attribute.'].join(' ')\n    }\n  },\n  _deprecated: {\n    title: {\n      valType: 'string',\n      role: 'info',\n      description: ['Deprecated in favor of color bar\\'s `title.text`.', 'Note that value of color bar\\'s `title` is no longer a simple', '*string* but a set of sub-attributes.'].join(' ')\n    },\n    titlefont: fontAttrs({\n      description: 'Deprecated in favor of color bar\\'s `title.font`.'\n    }),\n    titleside: {\n      valType: 'enumerated',\n      values: ['right', 'top', 'bottom'],\n      role: 'style',\n      dflt: 'top',\n      description: 'Deprecated in favor of color bar\\'s `title.side`.'\n    }\n  }\n}, 'colorbars', 'from-root');","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Loggers = require('./loggers');\n\nvar mod = require('./mod').mod;\n\nvar constants = require('../constants/numerical');\n\nvar BADNUM = constants.BADNUM;\nvar ONEDAY = constants.ONEDAY;\nvar ONEHOUR = constants.ONEHOUR;\nvar ONEMIN = constants.ONEMIN;\nvar ONESEC = constants.ONESEC;\nvar EPOCHJD = constants.EPOCHJD;\n\nvar Registry = require('../registry');\n\nvar utcFormat = d3.time.format.utc;\nvar DATETIME_REGEXP = /^\\s*(-?\\d\\d\\d\\d|\\d\\d)(-(\\d?\\d)(-(\\d?\\d)([ Tt]([01]?\\d|2[0-3])(:([0-5]\\d)(:([0-5]\\d(\\.\\d+)?))?(Z|z|[+\\-]\\d\\d:?\\d\\d)?)?)?)?)?\\s*$/m; // special regex for chinese calendars to support yyyy-mmi-dd etc for intercalary months\n\nvar DATETIME_REGEXP_CN = /^\\s*(-?\\d\\d\\d\\d|\\d\\d)(-(\\d?\\di?)(-(\\d?\\d)([ Tt]([01]?\\d|2[0-3])(:([0-5]\\d)(:([0-5]\\d(\\.\\d+)?))?(Z|z|[+\\-]\\d\\d:?\\d\\d)?)?)?)?)?\\s*$/m; // for 2-digit years, the first year we map them onto\n\nvar YFIRST = new Date().getFullYear() - 70;\n\nfunction isWorldCalendar(calendar) {\n  return calendar && Registry.componentsRegistry.calendars && typeof calendar === 'string' && calendar !== 'gregorian';\n}\n/*\n * dateTick0: get the canonical tick for this calendar\n *\n * bool sunday is for week ticks, shift it to a Sunday.\n */\n\n\nexports.dateTick0 = function (calendar, sunday) {\n  if (isWorldCalendar(calendar)) {\n    return sunday ? Registry.getComponentMethod('calendars', 'CANONICAL_SUNDAY')[calendar] : Registry.getComponentMethod('calendars', 'CANONICAL_TICK')[calendar];\n  } else {\n    return sunday ? '2000-01-02' : '2000-01-01';\n  }\n};\n/*\n * dfltRange: for each calendar, give a valid default range\n */\n\n\nexports.dfltRange = function (calendar) {\n  if (isWorldCalendar(calendar)) {\n    return Registry.getComponentMethod('calendars', 'DFLTRANGE')[calendar];\n  } else {\n    return ['2000-01-01', '2001-01-01'];\n  }\n}; // is an object a javascript date?\n\n\nexports.isJSDate = function (v) {\n  return typeof v === 'object' && v !== null && typeof v.getTime === 'function';\n}; // The absolute limits of our date-time system\n// This is a little weird: we use MIN_MS and MAX_MS in dateTime2ms\n// but we use dateTime2ms to calculate them (after defining it!)\n\n\nvar MIN_MS, MAX_MS;\n/**\n * dateTime2ms - turn a date object or string s into milliseconds\n * (relative to 1970-01-01, per javascript standard)\n * optional calendar (string) to use a non-gregorian calendar\n *\n * Returns BADNUM if it doesn't find a date\n *\n * strings should have the form:\n *\n *    -?YYYY-mm-dd<sep>HH:MM:SS.sss<tzInfo>?\n *\n * <sep>: space (our normal standard) or T or t (ISO-8601)\n * <tzInfo>: Z, z, or [+\\-]HH:?MM and we THROW IT AWAY\n * this format comes from https://tools.ietf.org/html/rfc3339#section-5.6\n * but we allow it even with a space as the separator\n *\n * May truncate after any full field, and sss can be any length\n * even >3 digits, though javascript dates truncate to milliseconds,\n * we keep as much as javascript numeric precision can hold, but we only\n * report back up to 100 microsecond precision, because most dates support\n * this precision (close to 1970 support more, very far away support less)\n *\n * Expanded to support negative years to -9999 but you must always\n * give 4 digits, except for 2-digit positive years which we assume are\n * near the present time.\n * Note that we follow ISO 8601:2004: there *is* a year 0, which\n * is 1BC/BCE, and -1===2BC etc.\n *\n * World calendars: not all of these *have* agreed extensions to this full range,\n * if you have another calendar system but want a date range outside its validity,\n * you can use a gregorian date string prefixed with 'G' or 'g'.\n *\n * Where to cut off 2-digit years between 1900s and 2000s?\n * from http://support.microsoft.com/kb/244664:\n *   1930-2029 (the most retro of all...)\n * but in my mac chrome from eg. d=new Date(Date.parse('8/19/50')):\n *   1950-2049\n * by Java, from http://stackoverflow.com/questions/2024273/:\n *   now-80 - now+19\n * or FileMaker Pro, from\n *      http://www.filemaker.com/12help/html/add_view_data.4.21.html:\n *   now-70 - now+29\n * but python strptime etc, via\n *      http://docs.python.org/py3k/library/time.html:\n *   1969-2068 (super forward-looking, but static, not sliding!)\n *\n * lets go with now-70 to now+29, and if anyone runs into this problem\n * they can learn the hard way not to use 2-digit years, as no choice we\n * make now will cover all possibilities. mostly this will all be taken\n * care of in initial parsing, should only be an issue for hand-entered data\n * currently (2016) this range is:\n *   1946-2045\n */\n\nexports.dateTime2ms = function (s, calendar) {\n  // first check if s is a date object\n  if (exports.isJSDate(s)) {\n    // Convert to the UTC milliseconds that give the same\n    // hours as this date has in the local timezone\n    var tzOffset = s.getTimezoneOffset() * ONEMIN;\n    var offsetTweak = (s.getUTCMinutes() - s.getMinutes()) * ONEMIN + (s.getUTCSeconds() - s.getSeconds()) * ONESEC + (s.getUTCMilliseconds() - s.getMilliseconds());\n\n    if (offsetTweak) {\n      var comb = 3 * ONEMIN;\n      tzOffset = tzOffset - comb / 2 + mod(offsetTweak - tzOffset + comb / 2, comb);\n    }\n\n    s = Number(s) - tzOffset;\n    if (s >= MIN_MS && s <= MAX_MS) return s;\n    return BADNUM;\n  } // otherwise only accept strings and numbers\n\n\n  if (typeof s !== 'string' && typeof s !== 'number') return BADNUM;\n  s = String(s);\n  var isWorld = isWorldCalendar(calendar); // to handle out-of-range dates in international calendars, accept\n  // 'G' as a prefix to force the built-in gregorian calendar.\n\n  var s0 = s.charAt(0);\n\n  if (isWorld && (s0 === 'G' || s0 === 'g')) {\n    s = s.substr(1);\n    calendar = '';\n  }\n\n  var isChinese = isWorld && calendar.substr(0, 7) === 'chinese';\n  var match = s.match(isChinese ? DATETIME_REGEXP_CN : DATETIME_REGEXP);\n  if (!match) return BADNUM;\n  var y = match[1];\n  var m = match[3] || '1';\n  var d = Number(match[5] || 1);\n  var H = Number(match[7] || 0);\n  var M = Number(match[9] || 0);\n  var S = Number(match[11] || 0);\n\n  if (isWorld) {\n    // disallow 2-digit years for world calendars\n    if (y.length === 2) return BADNUM;\n    y = Number(y);\n    var cDate;\n\n    try {\n      var calInstance = Registry.getComponentMethod('calendars', 'getCal')(calendar);\n\n      if (isChinese) {\n        var isIntercalary = m.charAt(m.length - 1) === 'i';\n        m = parseInt(m, 10);\n        cDate = calInstance.newDate(y, calInstance.toMonthIndex(y, m, isIntercalary), d);\n      } else {\n        cDate = calInstance.newDate(y, Number(m), d);\n      }\n    } catch (e) {\n      return BADNUM;\n    } // Invalid ... date\n\n\n    if (!cDate) return BADNUM;\n    return (cDate.toJD() - EPOCHJD) * ONEDAY + H * ONEHOUR + M * ONEMIN + S * ONESEC;\n  }\n\n  if (y.length === 2) {\n    y = (Number(y) + 2000 - YFIRST) % 100 + YFIRST;\n  } else y = Number(y); // new Date uses months from 0; subtract 1 here just so we\n  // don't have to do it again during the validity test below\n\n\n  m -= 1; // javascript takes new Date(0..99,m,d) to mean 1900-1999, so\n  // to support years 0-99 we need to use setFullYear explicitly\n  // Note that 2000 is a leap year.\n\n  var date = new Date(Date.UTC(2000, m, d, H, M));\n  date.setUTCFullYear(y);\n  if (date.getUTCMonth() !== m) return BADNUM;\n  if (date.getUTCDate() !== d) return BADNUM;\n  return date.getTime() + S * ONESEC;\n};\n\nMIN_MS = exports.MIN_MS = exports.dateTime2ms('-9999');\nMAX_MS = exports.MAX_MS = exports.dateTime2ms('9999-12-31 23:59:59.9999'); // is string s a date? (see above)\n\nexports.isDateTime = function (s, calendar) {\n  return exports.dateTime2ms(s, calendar) !== BADNUM;\n}; // pad a number with zeroes, to given # of digits before the decimal point\n\n\nfunction lpad(val, digits) {\n  return String(val + Math.pow(10, digits)).substr(1);\n}\n/**\n * Turn ms into string of the form YYYY-mm-dd HH:MM:SS.ssss\n * Crop any trailing zeros in time, except never stop right after hours\n * (we could choose to crop '-01' from date too but for now we always\n * show the whole date)\n * Optional range r is the data range that applies, also in ms.\n * If rng is big, the later parts of time will be omitted\n */\n\n\nvar NINETYDAYS = 90 * ONEDAY;\nvar THREEHOURS = 3 * ONEHOUR;\nvar FIVEMIN = 5 * ONEMIN;\n\nexports.ms2DateTime = function (ms, r, calendar) {\n  if (typeof ms !== 'number' || !(ms >= MIN_MS && ms <= MAX_MS)) return BADNUM;\n  if (!r) r = 0;\n  var msecTenths = Math.floor(mod(ms + 0.05, 1) * 10);\n  var msRounded = Math.round(ms - msecTenths / 10);\n  var dateStr, h, m, s, msec10, d;\n\n  if (isWorldCalendar(calendar)) {\n    var dateJD = Math.floor(msRounded / ONEDAY) + EPOCHJD;\n    var timeMs = Math.floor(mod(ms, ONEDAY));\n\n    try {\n      dateStr = Registry.getComponentMethod('calendars', 'getCal')(calendar).fromJD(dateJD).formatDate('yyyy-mm-dd');\n    } catch (e) {\n      // invalid date in this calendar - fall back to Gyyyy-mm-dd\n      dateStr = utcFormat('G%Y-%m-%d')(new Date(msRounded));\n    } // yyyy does NOT guarantee 4-digit years. YYYY mostly does, but does\n    // other things for a few calendars, so we can't trust it. Just pad\n    // it manually (after the '-' if there is one)\n\n\n    if (dateStr.charAt(0) === '-') {\n      while (dateStr.length < 11) {\n        dateStr = '-0' + dateStr.substr(1);\n      }\n    } else {\n      while (dateStr.length < 10) {\n        dateStr = '0' + dateStr;\n      }\n    } // TODO: if this is faster, we could use this block for extracting\n    // the time components of regular gregorian too\n\n\n    h = r < NINETYDAYS ? Math.floor(timeMs / ONEHOUR) : 0;\n    m = r < NINETYDAYS ? Math.floor(timeMs % ONEHOUR / ONEMIN) : 0;\n    s = r < THREEHOURS ? Math.floor(timeMs % ONEMIN / ONESEC) : 0;\n    msec10 = r < FIVEMIN ? timeMs % ONESEC * 10 + msecTenths : 0;\n  } else {\n    d = new Date(msRounded);\n    dateStr = utcFormat('%Y-%m-%d')(d); // <90 days: add hours and minutes - never *only* add hours\n\n    h = r < NINETYDAYS ? d.getUTCHours() : 0;\n    m = r < NINETYDAYS ? d.getUTCMinutes() : 0; // <3 hours: add seconds\n\n    s = r < THREEHOURS ? d.getUTCSeconds() : 0; // <5 minutes: add ms (plus one extra digit, this is msec*10)\n\n    msec10 = r < FIVEMIN ? d.getUTCMilliseconds() * 10 + msecTenths : 0;\n  }\n\n  return includeTime(dateStr, h, m, s, msec10);\n}; // For converting old-style milliseconds to date strings,\n// we use the local timezone rather than UTC like we use\n// everywhere else, both for backward compatibility and\n// because that's how people mostly use javasript date objects.\n// Clip one extra day off our date range though so we can't get\n// thrown beyond the range by the timezone shift.\n\n\nexports.ms2DateTimeLocal = function (ms) {\n  if (!(ms >= MIN_MS + ONEDAY && ms <= MAX_MS - ONEDAY)) return BADNUM;\n  var msecTenths = Math.floor(mod(ms + 0.05, 1) * 10);\n  var d = new Date(Math.round(ms - msecTenths / 10));\n  var dateStr = d3.time.format('%Y-%m-%d')(d);\n  var h = d.getHours();\n  var m = d.getMinutes();\n  var s = d.getSeconds();\n  var msec10 = d.getUTCMilliseconds() * 10 + msecTenths;\n  return includeTime(dateStr, h, m, s, msec10);\n};\n\nfunction includeTime(dateStr, h, m, s, msec10) {\n  // include each part that has nonzero data in or after it\n  if (h || m || s || msec10) {\n    dateStr += ' ' + lpad(h, 2) + ':' + lpad(m, 2);\n\n    if (s || msec10) {\n      dateStr += ':' + lpad(s, 2);\n\n      if (msec10) {\n        var digits = 4;\n\n        while (msec10 % 10 === 0) {\n          digits -= 1;\n          msec10 /= 10;\n        }\n\n        dateStr += '.' + lpad(msec10, digits);\n      }\n    }\n  }\n\n  return dateStr;\n} // normalize date format to date string, in case it starts as\n// a Date object or milliseconds\n// optional dflt is the return value if cleaning fails\n\n\nexports.cleanDate = function (v, dflt, calendar) {\n  // let us use cleanDate to provide a missing default without an error\n  if (v === BADNUM) return dflt;\n\n  if (exports.isJSDate(v) || typeof v === 'number' && isFinite(v)) {\n    // do not allow milliseconds (old) or jsdate objects (inherently\n    // described as gregorian dates) with world calendars\n    if (isWorldCalendar(calendar)) {\n      Loggers.error('JS Dates and milliseconds are incompatible with world calendars', v);\n      return dflt;\n    } // NOTE: if someone puts in a year as a number rather than a string,\n    // this will mistakenly convert it thinking it's milliseconds from 1970\n    // that is: '2012' -> Jan. 1, 2012, but 2012 -> 2012 epoch milliseconds\n\n\n    v = exports.ms2DateTimeLocal(+v);\n    if (!v && dflt !== undefined) return dflt;\n  } else if (!exports.isDateTime(v, calendar)) {\n    Loggers.error('unrecognized date', v);\n    return dflt;\n  }\n\n  return v;\n};\n/*\n *  Date formatting for ticks and hovertext\n */\n\n/*\n * modDateFormat: Support world calendars, and add one item to\n * d3's vocabulary:\n * %{n}f where n is the max number of digits of fractional seconds\n */\n\n\nvar fracMatch = /%\\d?f/g;\n\nfunction modDateFormat(fmt, x, formatter, calendar) {\n  fmt = fmt.replace(fracMatch, function (match) {\n    var digits = Math.min(+match.charAt(1) || 6, 6);\n    var fracSecs = (x / 1000 % 1 + 2).toFixed(digits).substr(2).replace(/0+$/, '') || '0';\n    return fracSecs;\n  });\n  var d = new Date(Math.floor(x + 0.05));\n\n  if (isWorldCalendar(calendar)) {\n    try {\n      fmt = Registry.getComponentMethod('calendars', 'worldCalFmt')(fmt, x, calendar);\n    } catch (e) {\n      return 'Invalid';\n    }\n  }\n\n  return formatter(fmt)(d);\n}\n/*\n * formatTime: create a time string from:\n *   x: milliseconds\n *   tr: tickround ('M', 'S', or # digits)\n * only supports UTC times (where every day is 24 hours and 0 is at midnight)\n */\n\n\nvar MAXSECONDS = [59, 59.9, 59.99, 59.999, 59.9999];\n\nfunction formatTime(x, tr) {\n  var timePart = mod(x + 0.05, ONEDAY);\n  var timeStr = lpad(Math.floor(timePart / ONEHOUR), 2) + ':' + lpad(mod(Math.floor(timePart / ONEMIN), 60), 2);\n\n  if (tr !== 'M') {\n    if (!isNumeric(tr)) tr = 0; // should only be 'S'\n\n    /*\n     * this is a weird one - and shouldn't come up unless people\n     * monkey with tick0 in weird ways, but we need to do something!\n     * IN PARTICULAR we had better not display garbage (see below)\n     * for numbers we always round to the nearest increment of the\n     * precision we're showing, and this seems like the right way to\n     * handle seconds and milliseconds, as they have a decimal point\n     * and people will interpret that to mean rounding like numbers.\n     * but for larger increments we floor the value: it's always\n     * 2013 until the ball drops on the new year. We could argue about\n     * which field it is where we start rounding (should 12:08:59\n     * round to 12:09 if we're stopping at minutes?) but for now I'll\n     * say we round seconds but floor everything else. BUT that means\n     * we need to never round up to 60 seconds, ie 23:59:60\n     */\n\n    var sec = Math.min(mod(x / ONESEC, 60), MAXSECONDS[tr]);\n    var secStr = (100 + sec).toFixed(tr).substr(1);\n\n    if (tr > 0) {\n      secStr = secStr.replace(/0+$/, '').replace(/[\\.]$/, '');\n    }\n\n    timeStr += ':' + secStr;\n  }\n\n  return timeStr;\n}\n/*\n * formatDate: turn a date into tick or hover label text.\n *\n *   x: milliseconds, the value to convert\n *   fmt: optional, an explicit format string (d3 format, even for world calendars)\n *   tr: tickround ('y', 'm', 'd', 'M', 'S', or # digits)\n *      used if no explicit fmt is provided\n *   formatter: locale-aware d3 date formatter for standard gregorian calendars\n *      should be the result of exports.getD3DateFormat(gd)\n *   calendar: optional string, the world calendar system to use\n *\n * returns the date/time as a string, potentially with the leading portion\n * on a separate line (after '\\n')\n * Note that this means if you provide an explicit format which includes '\\n'\n * the axis may choose to strip things after it when they don't change from\n * one tick to the next (as it does with automatic formatting)\n */\n\n\nexports.formatDate = function (x, fmt, tr, formatter, calendar, extraFormat) {\n  calendar = isWorldCalendar(calendar) && calendar;\n\n  if (!fmt) {\n    if (tr === 'y') fmt = extraFormat.year;else if (tr === 'm') fmt = extraFormat.month;else if (tr === 'd') {\n      fmt = extraFormat.dayMonth + '\\n' + extraFormat.year;\n    } else {\n      return formatTime(x, tr) + '\\n' + modDateFormat(extraFormat.dayMonthYear, x, formatter, calendar);\n    }\n  }\n\n  return modDateFormat(fmt, x, formatter, calendar);\n};\n/*\n * incrementMonth: make a new milliseconds value from the given one,\n * having changed the month\n *\n * special case for world calendars: multiples of 12 are treated as years,\n * even for calendar systems that don't have (always or ever) 12 months/year\n * TODO: perhaps we need a different code for year increments to support this?\n *\n * ms (number): the initial millisecond value\n * dMonth (int): the (signed) number of months to shift\n * calendar (string): the calendar system to use\n *\n * changing month does not (and CANNOT) always preserve day, since\n * months have different lengths. The worst example of this is:\n *   d = new Date(1970,0,31); d.setMonth(1) -> Feb 31 turns into Mar 3\n *\n * But we want to be able to iterate over the last day of each month,\n * regardless of what its number is.\n * So shift 3 days forward, THEN set the new month, then unshift:\n *   1/31 -> 2/28 (or 29) -> 3/31 -> 4/30 -> ...\n *\n * Note that odd behavior still exists if you start from the 26th-28th:\n *   1/28 -> 2/28 -> 3/31\n * but at least you can't shift any dates into the wrong month,\n * and ticks on these days incrementing by month would be very unusual\n */\n\n\nvar THREEDAYS = 3 * ONEDAY;\n\nexports.incrementMonth = function (ms, dMonth, calendar) {\n  calendar = isWorldCalendar(calendar) && calendar; // pull time out and operate on pure dates, then add time back at the end\n  // this gives maximum precision - not that we *normally* care if we're\n  // incrementing by month, but better to be safe!\n\n  var timeMs = mod(ms, ONEDAY);\n  ms = Math.round(ms - timeMs);\n\n  if (calendar) {\n    try {\n      var dateJD = Math.round(ms / ONEDAY) + EPOCHJD;\n      var calInstance = Registry.getComponentMethod('calendars', 'getCal')(calendar);\n      var cDate = calInstance.fromJD(dateJD);\n      if (dMonth % 12) calInstance.add(cDate, dMonth, 'm');else calInstance.add(cDate, dMonth / 12, 'y');\n      return (cDate.toJD() - EPOCHJD) * ONEDAY + timeMs;\n    } catch (e) {\n      Loggers.error('invalid ms ' + ms + ' in calendar ' + calendar); // then keep going in gregorian even though the result will be 'Invalid'\n    }\n  }\n\n  var y = new Date(ms + THREEDAYS);\n  return y.setUTCMonth(y.getUTCMonth() + dMonth) + timeMs - THREEDAYS;\n};\n/*\n * findExactDates: what fraction of data is exact days, months, or years?\n *\n * data: array of millisecond values\n * calendar (string) the calendar to test against\n */\n\n\nexports.findExactDates = function (data, calendar) {\n  var exactYears = 0;\n  var exactMonths = 0;\n  var exactDays = 0;\n  var blankCount = 0;\n  var d;\n  var di;\n  var calInstance = isWorldCalendar(calendar) && Registry.getComponentMethod('calendars', 'getCal')(calendar);\n\n  for (var i = 0; i < data.length; i++) {\n    di = data[i]; // not date data at all\n\n    if (!isNumeric(di)) {\n      blankCount++;\n      continue;\n    } // not an exact date\n\n\n    if (di % ONEDAY) continue;\n\n    if (calInstance) {\n      try {\n        d = calInstance.fromJD(di / ONEDAY + EPOCHJD);\n\n        if (d.day() === 1) {\n          if (d.month() === 1) exactYears++;else exactMonths++;\n        } else exactDays++;\n      } catch (e) {// invalid date in this calendar - ignore it here.\n      }\n    } else {\n      d = new Date(di);\n\n      if (d.getUTCDate() === 1) {\n        if (d.getUTCMonth() === 0) exactYears++;else exactMonths++;\n      } else exactDays++;\n    }\n  }\n\n  exactMonths += exactYears;\n  exactDays += exactMonths;\n  var dataCount = data.length - blankCount;\n  return {\n    exactYears: exactYears / dataCount,\n    exactMonths: exactMonths / dataCount,\n    exactDays: exactDays / dataCount\n  };\n};","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.flags\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar tinycolor = require('tinycolor2');\n\nvar baseTraceAttrs = require('../plots/attributes');\n\nvar colorscales = require('../components/colorscale/scales');\n\nvar DESELECTDIM = require('../constants/interactions').DESELECTDIM;\n\nvar nestedProperty = require('./nested_property');\n\nvar counterRegex = require('./regex').counter;\n\nvar modHalf = require('./mod').modHalf;\n\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\n\nexports.valObjectMeta = {\n  data_array: {\n    // You can use *dflt=[] to force said array to exist though.\n    description: ['An {array} of data.', 'The value MUST be an {array}, or we ignore it.', 'Note that typed arrays (e.g. Float32Array) are supported.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      // TODO maybe `v: {type: 'float32', vals: [/* ... */]}` also\n      if (isArrayOrTypedArray(v)) propOut.set(v);else if (dflt !== undefined) propOut.set(dflt);\n    }\n  },\n  enumerated: {\n    description: ['Enumerated value type. The available values are listed', 'in `values`.'].join(' '),\n    requiredOpts: ['values'],\n    otherOpts: ['dflt', 'coerceNumber', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      if (opts.coerceNumber) v = +v;\n      if (opts.values.indexOf(v) === -1) propOut.set(dflt);else propOut.set(v);\n    },\n    validateFunction: function validateFunction(v, opts) {\n      if (opts.coerceNumber) v = +v;\n      var values = opts.values;\n\n      for (var i = 0; i < values.length; i++) {\n        var k = String(values[i]);\n\n        if (k.charAt(0) === '/' && k.charAt(k.length - 1) === '/') {\n          var regex = new RegExp(k.substr(1, k.length - 2));\n          if (regex.test(v)) return true;\n        } else if (v === values[i]) return true;\n      }\n\n      return false;\n    }\n  },\n  'boolean': {\n    description: 'A boolean (true/false) value.',\n    requiredOpts: [],\n    otherOpts: ['dflt'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      if (v === true || v === false) propOut.set(v);else propOut.set(dflt);\n    }\n  },\n  number: {\n    description: ['A number or a numeric value', '(e.g. a number inside a string).', 'When applicable, values greater (less) than `max` (`min`)', 'are coerced to the `dflt`.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt', 'min', 'max', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      if (!isNumeric(v) || opts.min !== undefined && v < opts.min || opts.max !== undefined && v > opts.max) {\n        propOut.set(dflt);\n      } else propOut.set(+v);\n    }\n  },\n  integer: {\n    description: ['An integer or an integer inside a string.', 'When applicable, values greater (less) than `max` (`min`)', 'are coerced to the `dflt`.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt', 'min', 'max', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      if (v % 1 || !isNumeric(v) || opts.min !== undefined && v < opts.min || opts.max !== undefined && v > opts.max) {\n        propOut.set(dflt);\n      } else propOut.set(+v);\n    }\n  },\n  string: {\n    description: ['A string value.', 'Numbers are converted to strings except for attributes with', '`strict` set to true.'].join(' '),\n    requiredOpts: [],\n    // TODO 'values shouldn't be in there (edge case: 'dash' in Scatter)\n    otherOpts: ['dflt', 'noBlank', 'strict', 'arrayOk', 'values'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      if (typeof v !== 'string') {\n        var okToCoerce = typeof v === 'number';\n        if (opts.strict === true || !okToCoerce) propOut.set(dflt);else propOut.set(String(v));\n      } else if (opts.noBlank && !v) propOut.set(dflt);else propOut.set(v);\n    }\n  },\n  color: {\n    description: ['A string describing color.', 'Supported formats:', '- hex (e.g. \\'#d3d3d3\\')', '- rgb (e.g. \\'rgb(255, 0, 0)\\')', '- rgba (e.g. \\'rgb(255, 0, 0, 0.5)\\')', '- hsl (e.g. \\'hsl(0, 100%, 50%)\\')', '- hsv (e.g. \\'hsv(0, 100%, 100%)\\')', '- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      if (tinycolor(v).isValid()) propOut.set(v);else propOut.set(dflt);\n    }\n  },\n  colorlist: {\n    description: ['A list of colors.', 'Must be an {array} containing valid colors.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      function isColor(color) {\n        return tinycolor(color).isValid();\n      }\n\n      if (!Array.isArray(v) || !v.length) propOut.set(dflt);else if (v.every(isColor)) propOut.set(v);else propOut.set(dflt);\n    }\n  },\n  colorscale: {\n    description: ['A Plotly colorscale either picked by a name:', '(any of', Object.keys(colorscales.scales).join(', '), ')', 'customized as an {array} of 2-element {arrays} where', 'the first element is the normalized color level value', '(starting at *0* and ending at *1*),', 'and the second item is a valid color string.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      propOut.set(colorscales.get(v, dflt));\n    }\n  },\n  angle: {\n    description: ['A number (in degree) between -180 and 180.'].join(' '),\n    requiredOpts: [],\n    otherOpts: ['dflt'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      if (v === 'auto') propOut.set('auto');else if (!isNumeric(v)) propOut.set(dflt);else propOut.set(modHalf(+v, 360));\n    }\n  },\n  subplotid: {\n    description: ['An id string of a subplot type (given by dflt), optionally', 'followed by an integer >1. e.g. if dflt=\\'geo\\', we can have', '\\'geo\\', \\'geo2\\', \\'geo3\\', ...'].join(' '),\n    requiredOpts: ['dflt'],\n    otherOpts: ['regex'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      var regex = opts.regex || counterRegex(dflt);\n\n      if (typeof v === 'string' && regex.test(v)) {\n        propOut.set(v);\n        return;\n      }\n\n      propOut.set(dflt);\n    },\n    validateFunction: function validateFunction(v, opts) {\n      var dflt = opts.dflt;\n      if (v === dflt) return true;\n      if (typeof v !== 'string') return false;\n      if (counterRegex(dflt).test(v)) return true;\n      return false;\n    }\n  },\n  flaglist: {\n    description: ['A string representing a combination of flags', '(order does not matter here).', 'Combine any of the available `flags` with *+*.', '(e.g. (\\'lines+markers\\')).', 'Values in `extras` cannot be combined.'].join(' '),\n    requiredOpts: ['flags'],\n    otherOpts: ['dflt', 'extras', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      if (typeof v !== 'string') {\n        propOut.set(dflt);\n        return;\n      }\n\n      if ((opts.extras || []).indexOf(v) !== -1) {\n        propOut.set(v);\n        return;\n      }\n\n      var vParts = v.split('+');\n      var i = 0;\n\n      while (i < vParts.length) {\n        var vi = vParts[i];\n\n        if (opts.flags.indexOf(vi) === -1 || vParts.indexOf(vi) < i) {\n          vParts.splice(i, 1);\n        } else i++;\n      }\n\n      if (!vParts.length) propOut.set(dflt);else propOut.set(vParts.join('+'));\n    }\n  },\n  any: {\n    description: 'Any type.',\n    requiredOpts: [],\n    otherOpts: ['dflt', 'values', 'arrayOk'],\n    coerceFunction: function coerceFunction(v, propOut, dflt) {\n      if (v === undefined) propOut.set(dflt);else propOut.set(v);\n    }\n  },\n  info_array: {\n    description: ['An {array} of plot information.'].join(' '),\n    requiredOpts: ['items'],\n    // set `dimensions=2` for a 2D array or '1-2' for either\n    // `items` may be a single object instead of an array, in which case\n    // `freeLength` must be true.\n    // if `dimensions='1-2'` and items is a 1D array, then the value can\n    // either be a matching 1D array or an array of such matching 1D arrays\n    otherOpts: ['dflt', 'freeLength', 'dimensions'],\n    coerceFunction: function coerceFunction(v, propOut, dflt, opts) {\n      // simplified coerce function just for array items\n      function coercePart(v, opts, dflt) {\n        var out;\n        var propPart = {\n          set: function set(v) {\n            out = v;\n          }\n        };\n        if (dflt === undefined) dflt = opts.dflt;\n        exports.valObjectMeta[opts.valType].coerceFunction(v, propPart, dflt, opts);\n        return out;\n      }\n\n      var twoD = opts.dimensions === 2 || opts.dimensions === '1-2' && Array.isArray(v) && Array.isArray(v[0]);\n\n      if (!Array.isArray(v)) {\n        propOut.set(dflt);\n        return;\n      }\n\n      var items = opts.items;\n      var vOut = [];\n      var arrayItems = Array.isArray(items);\n      var arrayItems2D = arrayItems && twoD && Array.isArray(items[0]);\n      var innerItemsOnly = twoD && arrayItems && !arrayItems2D;\n      var len = arrayItems && !innerItemsOnly ? items.length : v.length;\n      var i, j, row, item, len2, vNew;\n      dflt = Array.isArray(dflt) ? dflt : [];\n\n      if (twoD) {\n        for (i = 0; i < len; i++) {\n          vOut[i] = [];\n          row = Array.isArray(v[i]) ? v[i] : [];\n          if (innerItemsOnly) len2 = items.length;else if (arrayItems) len2 = items[i].length;else len2 = row.length;\n\n          for (j = 0; j < len2; j++) {\n            if (innerItemsOnly) item = items[j];else if (arrayItems) item = items[i][j];else item = items;\n            vNew = coercePart(row[j], item, (dflt[i] || [])[j]);\n            if (vNew !== undefined) vOut[i][j] = vNew;\n          }\n        }\n      } else {\n        for (i = 0; i < len; i++) {\n          vNew = coercePart(v[i], arrayItems ? items[i] : items, dflt[i]);\n          if (vNew !== undefined) vOut[i] = vNew;\n        }\n      }\n\n      propOut.set(vOut);\n    },\n    validateFunction: function validateFunction(v, opts) {\n      if (!Array.isArray(v)) return false;\n      var items = opts.items;\n      var arrayItems = Array.isArray(items);\n      var twoD = opts.dimensions === 2; // when free length is off, input and declared lengths must match\n\n      if (!opts.freeLength && v.length !== items.length) return false; // valid when all input items are valid\n\n      for (var i = 0; i < v.length; i++) {\n        if (twoD) {\n          if (!Array.isArray(v[i]) || !opts.freeLength && v[i].length !== items[i].length) {\n            return false;\n          }\n\n          for (var j = 0; j < v[i].length; j++) {\n            if (!validate(v[i][j], arrayItems ? items[i][j] : items)) {\n              return false;\n            }\n          }\n        } else if (!validate(v[i], arrayItems ? items[i] : items)) return false;\n      }\n\n      return true;\n    }\n  }\n};\n/**\n * Ensures that container[attribute] has a valid value.\n *\n * attributes[attribute] is an object with possible keys:\n * - valType: data_array, enumerated, boolean, ... as in valObjectMeta\n * - values: (enumerated only) array of allowed vals\n * - min, max: (number, integer only) inclusive bounds on allowed vals\n *      either or both may be omitted\n * - dflt: if attribute is invalid or missing, use this default\n *      if dflt is provided as an argument to lib.coerce it takes precedence\n *      as a convenience, returns the value it finally set\n */\n\nexports.coerce = function (containerIn, containerOut, attributes, attribute, dflt) {\n  var opts = nestedProperty(attributes, attribute).get();\n  var propIn = nestedProperty(containerIn, attribute);\n  var propOut = nestedProperty(containerOut, attribute);\n  var v = propIn.get();\n  var template = containerOut._template;\n\n  if (v === undefined && template) {\n    v = nestedProperty(template, attribute).get(); // already used the template value, so short-circuit the second check\n\n    template = 0;\n  }\n\n  if (dflt === undefined) dflt = opts.dflt;\n  /**\n   * arrayOk: value MAY be an array, then we do no value checking\n   * at this point, because it can be more complicated than the\n   * individual form (eg. some array vals can be numbers, even if the\n   * single values must be color strings)\n   */\n\n  if (opts.arrayOk && isArrayOrTypedArray(v)) {\n    propOut.set(v);\n    return v;\n  }\n\n  var coerceFunction = exports.valObjectMeta[opts.valType].coerceFunction;\n  coerceFunction(v, propOut, dflt, opts);\n  var out = propOut.get(); // in case v was provided but invalid, try the template again so it still\n  // overrides the regular default\n\n  if (template && out === dflt && !validate(v, opts)) {\n    v = nestedProperty(template, attribute).get();\n    coerceFunction(v, propOut, dflt, opts);\n    out = propOut.get();\n  }\n\n  return out;\n};\n/**\n * Variation on coerce\n *\n * Uses coerce to get attribute value if user input is valid,\n * returns attribute default if user input it not valid or\n * returns false if there is no user input.\n */\n\n\nexports.coerce2 = function (containerIn, containerOut, attributes, attribute, dflt) {\n  var propIn = nestedProperty(containerIn, attribute);\n  var propOut = exports.coerce(containerIn, containerOut, attributes, attribute, dflt);\n  var valIn = propIn.get();\n  return valIn !== undefined && valIn !== null ? propOut : false;\n};\n/*\n * Shortcut to coerce the three font attributes\n *\n * 'coerce' is a lib.coerce wrapper with implied first three arguments\n */\n\n\nexports.coerceFont = function (coerce, attr, dfltObj) {\n  var out = {};\n  dfltObj = dfltObj || {};\n  out.family = coerce(attr + '.family', dfltObj.family);\n  out.size = coerce(attr + '.size', dfltObj.size);\n  out.color = coerce(attr + '.color', dfltObj.color);\n  return out;\n};\n/** Coerce shortcut for 'hoverinfo'\n * handling 1-vs-multi-trace dflt logic\n *\n * @param {object} traceIn : user trace object\n * @param {object} traceOut : full trace object (requires _module ref)\n * @param {object} layoutOut : full layout object (require _dataLength ref)\n * @return {any} : the coerced value\n */\n\n\nexports.coerceHoverinfo = function (traceIn, traceOut, layoutOut) {\n  var moduleAttrs = traceOut._module.attributes;\n  var attrs = moduleAttrs.hoverinfo ? moduleAttrs : baseTraceAttrs;\n  var valObj = attrs.hoverinfo;\n  var dflt;\n\n  if (layoutOut._dataLength === 1) {\n    var flags = valObj.dflt === 'all' ? valObj.flags.slice() : valObj.dflt.split('+');\n    flags.splice(flags.indexOf('name'), 1);\n    dflt = flags.join('+');\n  }\n\n  return exports.coerce(traceIn, traceOut, attrs, 'hoverinfo', dflt);\n};\n/** Coerce shortcut for [un]selected.marker.opacity,\n *  which has special default logic, to ensure that it corresponds to the\n *  default selection behavior while allowing to be overtaken by any other\n *  [un]selected attribute.\n *\n *  N.B. This must be called *after* coercing all the other [un]selected attrs,\n *  to give the intended result.\n *\n * @param {object} traceOut : fullData item\n * @param {function} coerce : lib.coerce wrapper with implied first three arguments\n */\n\n\nexports.coerceSelectionMarkerOpacity = function (traceOut, coerce) {\n  if (!traceOut.marker) return;\n  var mo = traceOut.marker.opacity; // you can still have a `marker` container with no markers if there's text\n\n  if (mo === undefined) return;\n  var smoDflt;\n  var usmoDflt; // Don't give [un]selected.marker.opacity a default value if\n  // marker.opacity is an array: handle this during style step.\n  //\n  // Only give [un]selected.marker.opacity a default value if you don't\n  // set any other [un]selected attributes.\n\n  if (!isArrayOrTypedArray(mo) && !traceOut.selected && !traceOut.unselected) {\n    smoDflt = mo;\n    usmoDflt = DESELECTDIM * mo;\n  }\n\n  coerce('selected.marker.opacity', smoDflt);\n  coerce('unselected.marker.opacity', usmoDflt);\n};\n\nfunction validate(value, opts) {\n  var valObjectDef = exports.valObjectMeta[opts.valType];\n  if (opts.arrayOk && isArrayOrTypedArray(value)) return true;\n\n  if (valObjectDef.validateFunction) {\n    return valObjectDef.validateFunction(value, opts);\n  }\n\n  var failed = {};\n  var out = failed;\n  var propMock = {\n    set: function set(v) {\n      out = v;\n    }\n  }; // 'failed' just something mutable that won't be === anything else\n\n  valObjectDef.coerceFunction(value, propMock, failed, opts);\n  return out !== failed;\n}\n\nexports.validate = validate;","require(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\n// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n(function (Math) {\n  var trimLeft = /^\\s+/,\n      trimRight = /\\s+$/,\n      tinyCounter = 0,\n      mathRound = Math.round,\n      mathMin = Math.min,\n      mathMax = Math.max,\n      mathRandom = Math.random;\n\n  function tinycolor(color, opts) {\n    color = color ? color : '';\n    opts = opts || {}; // If input is already a tinycolor, return itself\n\n    if (color instanceof tinycolor) {\n      return color;\n    } // If we are called as a function, call using new instead\n\n\n    if (!(this instanceof tinycolor)) {\n      return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = mathRound(100 * this._a) / 100, this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType; // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n\n    if (this._r < 1) {\n      this._r = mathRound(this._r);\n    }\n\n    if (this._g < 1) {\n      this._g = mathRound(this._g);\n    }\n\n    if (this._b < 1) {\n      this._b = mathRound(this._b);\n    }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n  }\n\n  tinycolor.prototype = {\n    isDark: function isDark() {\n      return this.getBrightness() < 128;\n    },\n    isLight: function isLight() {\n      return !this.isDark();\n    },\n    isValid: function isValid() {\n      return this._ok;\n    },\n    getOriginalInput: function getOriginalInput() {\n      return this._originalInput;\n    },\n    getFormat: function getFormat() {\n      return this._format;\n    },\n    getAlpha: function getAlpha() {\n      return this._a;\n    },\n    getBrightness: function getBrightness() {\n      //http://www.w3.org/TR/AERT#color-contrast\n      var rgb = this.toRgb();\n      return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function getLuminance() {\n      //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n      var rgb = this.toRgb();\n      var RsRGB, GsRGB, BsRGB, R, G, B;\n      RsRGB = rgb.r / 255;\n      GsRGB = rgb.g / 255;\n      BsRGB = rgb.b / 255;\n\n      if (RsRGB <= 0.03928) {\n        R = RsRGB / 12.92;\n      } else {\n        R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      if (GsRGB <= 0.03928) {\n        G = GsRGB / 12.92;\n      } else {\n        G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      if (BsRGB <= 0.03928) {\n        B = BsRGB / 12.92;\n      } else {\n        B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n      }\n\n      return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n    },\n    setAlpha: function setAlpha(value) {\n      this._a = boundAlpha(value);\n      this._roundA = mathRound(100 * this._a) / 100;\n      return this;\n    },\n    toHsv: function toHsv() {\n      var hsv = rgbToHsv(this._r, this._g, this._b);\n      return {\n        h: hsv.h * 360,\n        s: hsv.s,\n        v: hsv.v,\n        a: this._a\n      };\n    },\n    toHsvString: function toHsvString() {\n      var hsv = rgbToHsv(this._r, this._g, this._b);\n      var h = mathRound(hsv.h * 360),\n          s = mathRound(hsv.s * 100),\n          v = mathRound(hsv.v * 100);\n      return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n    },\n    toHsl: function toHsl() {\n      var hsl = rgbToHsl(this._r, this._g, this._b);\n      return {\n        h: hsl.h * 360,\n        s: hsl.s,\n        l: hsl.l,\n        a: this._a\n      };\n    },\n    toHslString: function toHslString() {\n      var hsl = rgbToHsl(this._r, this._g, this._b);\n      var h = mathRound(hsl.h * 360),\n          s = mathRound(hsl.s * 100),\n          l = mathRound(hsl.l * 100);\n      return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n    },\n    toHex: function toHex(allow3Char) {\n      return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function toHexString(allow3Char) {\n      return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function toHex8(allow4Char) {\n      return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function toHex8String(allow4Char) {\n      return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function toRgb() {\n      return {\n        r: mathRound(this._r),\n        g: mathRound(this._g),\n        b: mathRound(this._b),\n        a: this._a\n      };\n    },\n    toRgbString: function toRgbString() {\n      return this._a == 1 ? \"rgb(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" : \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function toPercentageRgb() {\n      return {\n        r: mathRound(bound01(this._r, 255) * 100) + \"%\",\n        g: mathRound(bound01(this._g, 255) * 100) + \"%\",\n        b: mathRound(bound01(this._b, 255) * 100) + \"%\",\n        a: this._a\n      };\n    },\n    toPercentageRgbString: function toPercentageRgbString() {\n      return this._a == 1 ? \"rgb(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function toName() {\n      if (this._a === 0) {\n        return \"transparent\";\n      }\n\n      if (this._a < 1) {\n        return false;\n      }\n\n      return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function toFilter(secondColor) {\n      var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n      var secondHex8String = hex8String;\n      var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n      if (secondColor) {\n        var s = tinycolor(secondColor);\n        secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n      }\n\n      return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n    },\n    toString: function toString(format) {\n      var formatSet = !!format;\n      format = format || this._format;\n      var formattedString = false;\n      var hasAlpha = this._a < 1 && this._a >= 0;\n      var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n      if (needsAlphaFormat) {\n        // Special case for \"transparent\", all other non-alpha formats\n        // will return rgba when there is transparency.\n        if (format === \"name\" && this._a === 0) {\n          return this.toName();\n        }\n\n        return this.toRgbString();\n      }\n\n      if (format === \"rgb\") {\n        formattedString = this.toRgbString();\n      }\n\n      if (format === \"prgb\") {\n        formattedString = this.toPercentageRgbString();\n      }\n\n      if (format === \"hex\" || format === \"hex6\") {\n        formattedString = this.toHexString();\n      }\n\n      if (format === \"hex3\") {\n        formattedString = this.toHexString(true);\n      }\n\n      if (format === \"hex4\") {\n        formattedString = this.toHex8String(true);\n      }\n\n      if (format === \"hex8\") {\n        formattedString = this.toHex8String();\n      }\n\n      if (format === \"name\") {\n        formattedString = this.toName();\n      }\n\n      if (format === \"hsl\") {\n        formattedString = this.toHslString();\n      }\n\n      if (format === \"hsv\") {\n        formattedString = this.toHsvString();\n      }\n\n      return formattedString || this.toHexString();\n    },\n    clone: function clone() {\n      return tinycolor(this.toString());\n    },\n    _applyModification: function _applyModification(fn, args) {\n      var color = fn.apply(null, [this].concat([].slice.call(args)));\n      this._r = color._r;\n      this._g = color._g;\n      this._b = color._b;\n      this.setAlpha(color._a);\n      return this;\n    },\n    lighten: function lighten() {\n      return this._applyModification(_lighten, arguments);\n    },\n    brighten: function brighten() {\n      return this._applyModification(_brighten, arguments);\n    },\n    darken: function darken() {\n      return this._applyModification(_darken, arguments);\n    },\n    desaturate: function desaturate() {\n      return this._applyModification(_desaturate, arguments);\n    },\n    saturate: function saturate() {\n      return this._applyModification(_saturate, arguments);\n    },\n    greyscale: function greyscale() {\n      return this._applyModification(_greyscale, arguments);\n    },\n    spin: function spin() {\n      return this._applyModification(_spin, arguments);\n    },\n    _applyCombination: function _applyCombination(fn, args) {\n      return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function analogous() {\n      return this._applyCombination(_analogous, arguments);\n    },\n    complement: function complement() {\n      return this._applyCombination(_complement, arguments);\n    },\n    monochromatic: function monochromatic() {\n      return this._applyCombination(_monochromatic, arguments);\n    },\n    splitcomplement: function splitcomplement() {\n      return this._applyCombination(_splitcomplement, arguments);\n    },\n    triad: function triad() {\n      return this._applyCombination(_triad, arguments);\n    },\n    tetrad: function tetrad() {\n      return this._applyCombination(_tetrad, arguments);\n    }\n  }; // If input is an object, force 1 into \"1.0\" to handle ratios properly\n  // String input requires \"1.0\" as input, so 1 will be treated as 1\n\n  tinycolor.fromRatio = function (color, opts) {\n    if (typeof color == \"object\") {\n      var newColor = {};\n\n      for (var i in color) {\n        if (color.hasOwnProperty(i)) {\n          if (i === \"a\") {\n            newColor[i] = color[i];\n          } else {\n            newColor[i] = convertToPercentage(color[i]);\n          }\n        }\n      }\n\n      color = newColor;\n    }\n\n    return tinycolor(color, opts);\n  }; // Given a string or object, convert that input to RGB\n  // Possible string inputs:\n  //\n  //     \"red\"\n  //     \"#f00\" or \"f00\"\n  //     \"#ff0000\" or \"ff0000\"\n  //     \"#ff000000\" or \"ff000000\"\n  //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n  //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n  //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n  //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n  //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n  //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n  //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n  //\n\n\n  function inputToRGB(color) {\n    var rgb = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n      color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n      if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n        rgb = rgbToRgb(color.r, color.g, color.b);\n        ok = true;\n        format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n      } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n        s = convertToPercentage(color.s);\n        v = convertToPercentage(color.v);\n        rgb = hsvToRgb(color.h, s, v);\n        ok = true;\n        format = \"hsv\";\n      } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n        s = convertToPercentage(color.s);\n        l = convertToPercentage(color.l);\n        rgb = hslToRgb(color.h, s, l);\n        ok = true;\n        format = \"hsl\";\n      }\n\n      if (color.hasOwnProperty(\"a\")) {\n        a = color.a;\n      }\n    }\n\n    a = boundAlpha(a);\n    return {\n      ok: ok,\n      format: color.format || format,\n      r: mathMin(255, mathMax(rgb.r, 0)),\n      g: mathMin(255, mathMax(rgb.g, 0)),\n      b: mathMin(255, mathMax(rgb.b, 0)),\n      a: a\n    };\n  } // Conversion Functions\n  // --------------------\n  // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n  // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n  // `rgbToRgb`\n  // Handle bounds / percentage checking to conform to CSS color spec\n  // <http://www.w3.org/TR/css3-color/>\n  // *Assumes:* r, g, b in [0, 255] or [0, 1]\n  // *Returns:* { r, g, b } in [0, 255]\n\n\n  function rgbToRgb(r, g, b) {\n    return {\n      r: bound01(r, 255) * 255,\n      g: bound01(g, 255) * 255,\n      b: bound01(b, 255) * 255\n    };\n  } // `rgbToHsl`\n  // Converts an RGB color value to HSL.\n  // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n  // *Returns:* { h, s, l } in [0,1]\n\n\n  function rgbToHsl(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = mathMax(r, g, b),\n        min = mathMin(r, g, b);\n    var h,\n        s,\n        l = (max + min) / 2;\n\n    if (max == min) {\n      h = s = 0; // achromatic\n    } else {\n      var d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    return {\n      h: h,\n      s: s,\n      l: l\n    };\n  } // `hslToRgb`\n  // Converts an HSL color value to RGB.\n  // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n  // *Returns:* { r, g, b } in the set [0, 255]\n\n\n  function hslToRgb(h, s, l) {\n    var r, g, b;\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    }\n\n    if (s === 0) {\n      r = g = b = l; // achromatic\n    } else {\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      var p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return {\n      r: r * 255,\n      g: g * 255,\n      b: b * 255\n    };\n  } // `rgbToHsv`\n  // Converts an RGB color value to HSV\n  // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n  // *Returns:* { h, s, v } in [0,1]\n\n\n  function rgbToHsv(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = mathMax(r, g, b),\n        min = mathMin(r, g, b);\n    var h,\n        s,\n        v = max;\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if (max == min) {\n      h = 0; // achromatic\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    return {\n      h: h,\n      s: s,\n      v: v\n    };\n  } // `hsvToRgb`\n  // Converts an HSV color value to RGB.\n  // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n  // *Returns:* { r, g, b } in the set [0, 255]\n\n\n  function hsvToRgb(h, s, v) {\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n    return {\n      r: r * 255,\n      g: g * 255,\n      b: b * 255\n    };\n  } // `rgbToHex`\n  // Converts an RGB color to hex\n  // Assumes r, g, and b are contained in the set [0, 255]\n  // Returns a 3 or 6 character hex\n\n\n  function rgbToHex(r, g, b, allow3Char) {\n    var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))]; // Return a 3 character hex if possible\n\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n      return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n  } // `rgbaToHex`\n  // Converts an RGBA color plus alpha transparency to hex\n  // Assumes r, g, b are contained in the set [0, 255] and\n  // a in [0, 1]. Returns a 4 or 8 character rgba hex\n\n\n  function rgbaToHex(r, g, b, a, allow4Char) {\n    var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16)), pad2(convertDecimalToHex(a))]; // Return a 4 character hex if possible\n\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n      return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n  } // `rgbaToArgbHex`\n  // Converts an RGBA color to an ARGB Hex8 string\n  // Rarely used, but required for \"toFilter()\"\n\n\n  function rgbaToArgbHex(r, g, b, a) {\n    var hex = [pad2(convertDecimalToHex(a)), pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];\n    return hex.join(\"\");\n  } // `equals`\n  // Can be called with any tinycolor input\n\n\n  tinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) {\n      return false;\n    }\n\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n  };\n\n  tinycolor.random = function () {\n    return tinycolor.fromRatio({\n      r: mathRandom(),\n      g: mathRandom(),\n      b: mathRandom()\n    });\n  }; // Modification Functions\n  // ----------------------\n  // Thanks to less.js for some of the basics here\n  // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n\n  function _desaturate(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n  }\n\n  function _saturate(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n  }\n\n  function _greyscale(color) {\n    return tinycolor(color).desaturate(100);\n  }\n\n  function _lighten(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n  }\n\n  function _brighten(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * -(amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * -(amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * -(amount / 100))));\n    return tinycolor(rgb);\n  }\n\n  function _darken(color, amount) {\n    amount = amount === 0 ? 0 : amount || 10;\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n  } // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n  // Values outside of this range will be wrapped into this range.\n\n\n  function _spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n  } // Combination Functions\n  // ---------------------\n  // Thanks to jQuery xColor for some of the ideas behind these\n  // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n\n  function _complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n  }\n\n  function _triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 120) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 240) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 90) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 180) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 270) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [tinycolor(color), tinycolor({\n      h: (h + 72) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }), tinycolor({\n      h: (h + 216) % 360,\n      s: hsl.s,\n      l: hsl.l\n    })];\n  }\n\n  function _analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n      hsl.h = (hsl.h + part) % 360;\n      ret.push(tinycolor(hsl));\n    }\n\n    return ret;\n  }\n\n  function _monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h,\n        s = hsv.s,\n        v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n      ret.push(tinycolor({\n        h: h,\n        s: s,\n        v: v\n      }));\n      v = (v + modification) % 1;\n    }\n\n    return ret;\n  } // Utility Functions\n  // ---------------------\n\n\n  tinycolor.mix = function (color1, color2, amount) {\n    amount = amount === 0 ? 0 : amount || 50;\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n    var p = amount / 100;\n    var rgba = {\n      r: (rgb2.r - rgb1.r) * p + rgb1.r,\n      g: (rgb2.g - rgb1.g) * p + rgb1.g,\n      b: (rgb2.b - rgb1.b) * p + rgb1.b,\n      a: (rgb2.a - rgb1.a) * p + rgb1.a\n    };\n    return tinycolor(rgba);\n  }; // Readability Functions\n  // ---------------------\n  // <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n  // `contrast`\n  // Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\n\n\n  tinycolor.readability = function (color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n  }; // `isReadable`\n  // Ensure that foreground and background color combinations meet WCAG2 guidelines.\n  // The third argument is an optional Object.\n  //      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n  //      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n  // If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n  // *Example*\n  //    tinycolor.isReadable(\"#000\", \"#111\") => false\n  //    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\n\n\n  tinycolor.isReadable = function (color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n    out = false;\n    wcag2Parms = validateWCAG2Parms(wcag2);\n\n    switch (wcag2Parms.level + wcag2Parms.size) {\n      case \"AAsmall\":\n      case \"AAAlarge\":\n        out = readability >= 4.5;\n        break;\n\n      case \"AAlarge\":\n        out = readability >= 3;\n        break;\n\n      case \"AAAsmall\":\n        out = readability >= 7;\n        break;\n    }\n\n    return out;\n  }; // `mostReadable`\n  // Given a base color and a list of possible foreground or background\n  // colors for that base, returns the most readable color.\n  // Optionally returns Black or White if the most readable color is unreadable.\n  // *Example*\n  //    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n  //    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n  //    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n  //    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\n\n\n  tinycolor.mostReadable = function (baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors;\n    level = args.level;\n    size = args.size;\n\n    for (var i = 0; i < colorList.length; i++) {\n      readability = tinycolor.readability(baseColor, colorList[i]);\n\n      if (readability > bestScore) {\n        bestScore = readability;\n        bestColor = tinycolor(colorList[i]);\n      }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\n      \"level\": level,\n      \"size\": size\n    }) || !includeFallbackColors) {\n      return bestColor;\n    } else {\n      args.includeFallbackColors = false;\n      return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n    }\n  }; // Big List of Colors\n  // ------------------\n  // <http://www.w3.org/TR/css3-color/#svg-color>\n\n\n  var names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n  }; // Make it easy to access colors via `hexNames[hex]`\n\n  var hexNames = tinycolor.hexNames = flip(names); // Utilities\n  // ---------\n  // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n\n  function flip(o) {\n    var flipped = {};\n\n    for (var i in o) {\n      if (o.hasOwnProperty(i)) {\n        flipped[o[i]] = i;\n      }\n    }\n\n    return flipped;\n  } // Return a valid alpha value [0,1] with all invalid values being set to 1\n\n\n  function boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n      a = 1;\n    }\n\n    return a;\n  } // Take input from [0, n] and return it as [0, 1]\n\n\n  function bound01(n, max) {\n    if (isOnePointZero(n)) {\n      n = \"100%\";\n    }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n))); // Automatically convert percentage into number\n\n    if (processPercent) {\n      n = parseInt(n * max, 10) / 100;\n    } // Handle floating point rounding errors\n\n\n    if (Math.abs(n - max) < 0.000001) {\n      return 1;\n    } // Convert into [0, 1] range if it isn't already\n\n\n    return n % max / parseFloat(max);\n  } // Force a number between 0 and 1\n\n\n  function clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n  } // Parse a base-16 hex value into a base-10 integer\n\n\n  function parseIntFromHex(val) {\n    return parseInt(val, 16);\n  } // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n  // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n\n\n  function isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n  } // Check to see if string passed in is a percentage\n\n\n  function isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n  } // Force a hex value to have 2 characters\n\n\n  function pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n  } // Replace a decimal with it's percentage value\n\n\n  function convertToPercentage(n) {\n    if (n <= 1) {\n      n = n * 100 + \"%\";\n    }\n\n    return n;\n  } // Converts a decimal to a hex value\n\n\n  function convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n  } // Converts a hex value to a decimal\n\n\n  function convertHexToDecimal(h) {\n    return parseIntFromHex(h) / 255;\n  }\n\n  var matchers = function () {\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\"; // <http://www.w3.org/TR/css3-values/#number-value>\n\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\"; // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\"; // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    return {\n      CSS_UNIT: new RegExp(CSS_UNIT),\n      rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n      rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n      hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n      hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n      hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n      hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n      hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n      hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n      hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n      hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n  }(); // `isValidCSSUnit`\n  // Take in a single string / number and check to see if it looks like a CSS unit\n  // (see `matchers` above for definition).\n\n\n  function isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n  } // `stringInputToObject`\n  // Permissive string parsing.  Take in a number of formats, and output an object\n  // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n\n\n  function stringInputToObject(color) {\n    color = color.replace(trimLeft, '').replace(trimRight, '').toLowerCase();\n    var named = false;\n\n    if (names[color]) {\n      color = names[color];\n      named = true;\n    } else if (color == 'transparent') {\n      return {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 0,\n        format: \"name\"\n      };\n    } // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n\n\n    var match;\n\n    if (match = matchers.rgb.exec(color)) {\n      return {\n        r: match[1],\n        g: match[2],\n        b: match[3]\n      };\n    }\n\n    if (match = matchers.rgba.exec(color)) {\n      return {\n        r: match[1],\n        g: match[2],\n        b: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hsl.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        l: match[3]\n      };\n    }\n\n    if (match = matchers.hsla.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        l: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hsv.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        v: match[3]\n      };\n    }\n\n    if (match = matchers.hsva.exec(color)) {\n      return {\n        h: match[1],\n        s: match[2],\n        v: match[3],\n        a: match[4]\n      };\n    }\n\n    if (match = matchers.hex8.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1]),\n        g: parseIntFromHex(match[2]),\n        b: parseIntFromHex(match[3]),\n        a: convertHexToDecimal(match[4]),\n        format: named ? \"name\" : \"hex8\"\n      };\n    }\n\n    if (match = matchers.hex6.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1]),\n        g: parseIntFromHex(match[2]),\n        b: parseIntFromHex(match[3]),\n        format: named ? \"name\" : \"hex\"\n      };\n    }\n\n    if (match = matchers.hex4.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1] + '' + match[1]),\n        g: parseIntFromHex(match[2] + '' + match[2]),\n        b: parseIntFromHex(match[3] + '' + match[3]),\n        a: convertHexToDecimal(match[4] + '' + match[4]),\n        format: named ? \"name\" : \"hex8\"\n      };\n    }\n\n    if (match = matchers.hex3.exec(color)) {\n      return {\n        r: parseIntFromHex(match[1] + '' + match[1]),\n        g: parseIntFromHex(match[2] + '' + match[2]),\n        b: parseIntFromHex(match[3] + '' + match[3]),\n        format: named ? \"name\" : \"hex\"\n      };\n    }\n\n    return false;\n  }\n\n  function validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\n      \"level\": \"AA\",\n      \"size\": \"small\"\n    };\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n\n    if (level !== \"AA\" && level !== \"AAA\") {\n      level = \"AA\";\n    }\n\n    if (size !== \"small\" && size !== \"large\") {\n      size = \"small\";\n    }\n\n    return {\n      \"level\": level,\n      \"size\": size\n    };\n  } // Node: Export function\n\n\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n  } // AMD/requirejs: Define the module\n  else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return tinycolor;\n      });\n    } // Browser: Expose to window\n    else {\n        window.tinycolor = tinycolor;\n      }\n})(Math);","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nvar Registry = require('../registry');\n\nvar Lib = require('../lib');\n\nvar baseAttributes = require('../plots/attributes');\n\nvar baseLayoutAttributes = require('../plots/layout_attributes');\n\nvar frameAttributes = require('../plots/frame_attributes');\n\nvar animationAttributes = require('../plots/animation_attributes');\n\nvar configAttributes = require('./plot_config').configAttributes; // polar attributes are not part of the Registry yet\n\n\nvar polarAreaAttrs = require('../plots/polar/legacy/area_attributes');\n\nvar polarAxisAttrs = require('../plots/polar/legacy/axis_attributes');\n\nvar editTypes = require('./edit_types');\n\nvar extendFlat = Lib.extendFlat;\nvar extendDeepAll = Lib.extendDeepAll;\nvar isPlainObject = Lib.isPlainObject;\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar nestedProperty = Lib.nestedProperty;\nvar valObjectMeta = Lib.valObjectMeta;\nvar IS_SUBPLOT_OBJ = '_isSubplotObj';\nvar IS_LINKED_TO_ARRAY = '_isLinkedToArray';\nvar ARRAY_ATTR_REGEXPS = '_arrayAttrRegexps';\nvar DEPRECATED = '_deprecated';\nvar UNDERSCORE_ATTRS = [IS_SUBPLOT_OBJ, IS_LINKED_TO_ARRAY, ARRAY_ATTR_REGEXPS, DEPRECATED];\nexports.IS_SUBPLOT_OBJ = IS_SUBPLOT_OBJ;\nexports.IS_LINKED_TO_ARRAY = IS_LINKED_TO_ARRAY;\nexports.DEPRECATED = DEPRECATED;\nexports.UNDERSCORE_ATTRS = UNDERSCORE_ATTRS;\n/** Outputs the full plotly.js plot schema\n *\n * @return {object}\n *  - defs\n *  - traces\n *  - layout\n *  - transforms\n *  - frames\n *  - animations\n *  - config\n */\n\nexports.get = function () {\n  var traces = {};\n  Registry.allTypes.concat('area').forEach(function (type) {\n    traces[type] = getTraceAttributes(type);\n  });\n  var transforms = {};\n  Object.keys(Registry.transformsRegistry).forEach(function (type) {\n    transforms[type] = getTransformAttributes(type);\n  });\n  return {\n    defs: {\n      valObjects: valObjectMeta,\n      metaKeys: UNDERSCORE_ATTRS.concat(['description', 'role', 'editType', 'impliedEdits']),\n      editType: {\n        traces: editTypes.traces,\n        layout: editTypes.layout\n      },\n      impliedEdits: {\n        description: ['Sometimes when an attribute is changed, other attributes', 'must be altered as well in order to achieve the intended', 'result. For example, when `range` is specified, it is', 'important to set `autorange` to `false` or the new `range`', 'value would be lost in the redraw. `impliedEdits` is the', 'mechanism to do this: `impliedEdits: {autorange: false}`.', 'Each key is a relative paths to the attribute string to', 'change, using *^* to ascend into the parent container,', 'for example `range[0]` has `impliedEdits: {*^autorange*: false}`.', 'A value of `undefined` means that the attribute will not be', 'changed, but its previous value should be recorded in case', 'we want to reverse this change later. For example, `autorange`', 'has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}', 'because the range will likely be changed by redraw.'].join(' ')\n      }\n    },\n    traces: traces,\n    layout: getLayoutAttributes(),\n    transforms: transforms,\n    frames: getFramesAttributes(),\n    animation: formatAttributes(animationAttributes),\n    config: formatAttributes(configAttributes)\n  };\n};\n/**\n * Crawl the attribute tree, recursively calling a callback function\n *\n * @param {object} attrs\n *  The node of the attribute tree (e.g. the root) from which recursion originates\n * @param {Function} callback\n *  A callback function with the signature:\n *          @callback callback\n *          @param {object} attr an attribute\n *          @param {String} attrName name string\n *          @param {object[]} attrs all the attributes\n *          @param {Number} level the recursion level, 0 at the root\n *          @param {String} fullAttrString full attribute name (ie 'marker.line')\n * @param {Number} [specifiedLevel]\n *  The level in the tree, in order to let the callback function detect descend or backtrack,\n *  typically unsupplied (implied 0), just used by the self-recursive call.\n *  The necessity arises because the tree traversal is not controlled by callback return values.\n *  The decision to not use callback return values for controlling tree pruning arose from\n *  the goal of keeping the crawler backwards compatible. Observe that one of the pruning conditions\n *  precedes the callback call.\n * @param {string} [attrString]\n *  the path to the current attribute, as an attribute string (ie 'marker.line')\n *  typically unsupplied, but you may supply it if you want to disambiguate which attrs tree you\n *  are starting from\n *\n * @return {object} transformOut\n *  copy of transformIn that contains attribute defaults\n */\n\n\nexports.crawl = function (attrs, callback, specifiedLevel, attrString) {\n  var level = specifiedLevel || 0;\n  attrString = attrString || '';\n  Object.keys(attrs).forEach(function (attrName) {\n    var attr = attrs[attrName];\n    if (UNDERSCORE_ATTRS.indexOf(attrName) !== -1) return;\n    var fullAttrString = (attrString ? attrString + '.' : '') + attrName;\n    callback(attr, attrName, attrs, level, fullAttrString);\n    if (exports.isValObject(attr)) return;\n\n    if (isPlainObject(attr) && attrName !== 'impliedEdits') {\n      exports.crawl(attr, callback, level + 1, fullAttrString);\n    }\n  });\n};\n/** Is object a value object (or a container object)?\n *\n * @param {object} obj\n * @return {boolean}\n *  returns true for a valid value object and\n *  false for tree nodes in the attribute hierarchy\n */\n\n\nexports.isValObject = function (obj) {\n  return obj && obj.valType !== undefined;\n};\n/**\n * Find all data array attributes in a given trace object - including\n * `arrayOk` attributes.\n *\n * @param {object} trace\n *  full trace object that contains a reference to `_module.attributes`\n *\n * @return {array} arrayAttributes\n *  list of array attributes for the given trace\n */\n\n\nexports.findArrayAttributes = function (trace) {\n  var arrayAttributes = [];\n  var stack = [];\n  var isArrayStack = [];\n  var baseContainer, baseAttrName;\n\n  function callback(attr, attrName, attrs, level) {\n    stack = stack.slice(0, level).concat([attrName]);\n    isArrayStack = isArrayStack.slice(0, level).concat([attr && attr._isLinkedToArray]);\n    var splittableAttr = attr && (attr.valType === 'data_array' || attr.arrayOk === true) && !(stack[level - 1] === 'colorbar' && (attrName === 'ticktext' || attrName === 'tickvals')); // Manually exclude 'colorbar.tickvals' and 'colorbar.ticktext' for now\n    // which are declared as `valType: 'data_array'` but scale independently of\n    // the coordinate arrays.\n    //\n    // Down the road, we might want to add a schema field (e.g `uncorrelatedArray: true`)\n    // to distinguish attributes of the likes.\n\n    if (!splittableAttr) return;\n    crawlIntoTrace(baseContainer, 0, '');\n  }\n\n  function crawlIntoTrace(container, i, astrPartial) {\n    var item = container[stack[i]];\n    var newAstrPartial = astrPartial + stack[i];\n\n    if (i === stack.length - 1) {\n      if (isArrayOrTypedArray(item)) {\n        arrayAttributes.push(baseAttrName + newAstrPartial);\n      }\n    } else {\n      if (isArrayStack[i]) {\n        if (Array.isArray(item)) {\n          for (var j = 0; j < item.length; j++) {\n            if (isPlainObject(item[j])) {\n              crawlIntoTrace(item[j], i + 1, newAstrPartial + '[' + j + '].');\n            }\n          }\n        }\n      } else if (isPlainObject(item)) {\n        crawlIntoTrace(item, i + 1, newAstrPartial + '.');\n      }\n    }\n  }\n\n  baseContainer = trace;\n  baseAttrName = '';\n  exports.crawl(baseAttributes, callback);\n\n  if (trace._module && trace._module.attributes) {\n    exports.crawl(trace._module.attributes, callback);\n  }\n\n  var transforms = trace.transforms;\n\n  if (transforms) {\n    for (var i = 0; i < transforms.length; i++) {\n      var transform = transforms[i];\n      var module = transform._module;\n\n      if (module) {\n        baseAttrName = 'transforms[' + i + '].';\n        baseContainer = transform;\n        exports.crawl(module.attributes, callback);\n      }\n    }\n  }\n\n  return arrayAttributes;\n};\n/*\n * Find the valObject for one attribute in an existing trace\n *\n * @param {object} trace\n *  full trace object that contains a reference to `_module.attributes`\n * @param {object} parts\n *  an array of parts, like ['transforms', 1, 'value']\n *  typically from nestedProperty(...).parts\n *\n * @return {object|false}\n *  the valObject for this attribute, or the last found parent\n *  in some cases the innermost valObject will not exist, for example\n *  `valType: 'any'` attributes where we might set a part of the attribute.\n *  In that case, stop at the deepest valObject we *do* find.\n */\n\n\nexports.getTraceValObject = function (trace, parts) {\n  var head = parts[0];\n  var i = 1; // index to start recursing from\n\n  var moduleAttrs, valObject;\n\n  if (head === 'transforms') {\n    if (parts.length === 1) {\n      return baseAttributes.transforms;\n    }\n\n    var transforms = trace.transforms;\n    if (!Array.isArray(transforms) || !transforms.length) return false;\n    var tNum = parts[1];\n\n    if (!isIndex(tNum) || tNum >= transforms.length) {\n      return false;\n    }\n\n    moduleAttrs = (Registry.transformsRegistry[transforms[tNum].type] || {}).attributes;\n    valObject = moduleAttrs && moduleAttrs[parts[2]];\n    i = 3; // start recursing only inside the transform\n  } else if (trace.type === 'area') {\n    valObject = polarAreaAttrs[head];\n  } else {\n    // first look in the module for this trace\n    // components have already merged their trace attributes in here\n    var _module = trace._module;\n    if (!_module) _module = (Registry.modules[trace.type || baseAttributes.type.dflt] || {})._module;\n    if (!_module) return false;\n    moduleAttrs = _module.attributes;\n    valObject = moduleAttrs && moduleAttrs[head]; // then look in the subplot attributes\n\n    if (!valObject) {\n      var subplotModule = _module.basePlotModule;\n\n      if (subplotModule && subplotModule.attributes) {\n        valObject = subplotModule.attributes[head];\n      }\n    } // finally look in the global attributes\n\n\n    if (!valObject) valObject = baseAttributes[head];\n  }\n\n  return recurseIntoValObject(valObject, parts, i);\n};\n/*\n * Find the valObject for one layout attribute\n *\n * @param {array} parts\n *  an array of parts, like ['annotations', 1, 'x']\n *  typically from nestedProperty(...).parts\n *\n * @return {object|false}\n *  the valObject for this attribute, or the last found parent\n *  in some cases the innermost valObject will not exist, for example\n *  `valType: 'any'` attributes where we might set a part of the attribute.\n *  In that case, stop at the deepest valObject we *do* find.\n */\n\n\nexports.getLayoutValObject = function (fullLayout, parts) {\n  var valObject = layoutHeadAttr(fullLayout, parts[0]);\n  return recurseIntoValObject(valObject, parts, 1);\n};\n\nfunction layoutHeadAttr(fullLayout, head) {\n  var i, key, _module, attributes; // look for attributes of the subplot types used on the plot\n\n\n  var basePlotModules = fullLayout._basePlotModules;\n\n  if (basePlotModules) {\n    var out;\n\n    for (i = 0; i < basePlotModules.length; i++) {\n      _module = basePlotModules[i];\n\n      if (_module.attrRegex && _module.attrRegex.test(head)) {\n        // if a module defines overrides, these take precedence\n        // initially this is to allow gl2d different editTypes from svg cartesian\n        if (_module.layoutAttrOverrides) return _module.layoutAttrOverrides; // otherwise take the first attributes we find\n\n        if (!out && _module.layoutAttributes) out = _module.layoutAttributes;\n      } // a module can also override the behavior of base (and component) module layout attrs\n      // again see gl2d for initial use case\n\n\n      var baseOverrides = _module.baseLayoutAttrOverrides;\n      if (baseOverrides && head in baseOverrides) return baseOverrides[head];\n    }\n\n    if (out) return out;\n  } // look for layout attributes contributed by traces on the plot\n\n\n  var modules = fullLayout._modules;\n\n  if (modules) {\n    for (i = 0; i < modules.length; i++) {\n      attributes = modules[i].layoutAttributes;\n\n      if (attributes && head in attributes) {\n        return attributes[head];\n      }\n    }\n  }\n  /*\n   * Next look in components.\n   * Components that define a schema have already merged this into\n   * base and subplot attribute defs, so ignore these.\n   * Others (older style) all put all their attributes\n   * inside a container matching the module `name`\n   * eg `attributes` (array) or `legend` (object)\n   */\n\n\n  for (key in Registry.componentsRegistry) {\n    _module = Registry.componentsRegistry[key];\n\n    if (_module.name === 'colorscale' && head.indexOf('coloraxis') === 0) {\n      return _module.layoutAttributes[head];\n    } else if (!_module.schema && head === _module.name) {\n      return _module.layoutAttributes;\n    }\n  }\n\n  if (head in baseLayoutAttributes) return baseLayoutAttributes[head]; // Polar doesn't populate _modules or _basePlotModules\n  // just fall back on these when the others fail\n\n  if (head === 'radialaxis' || head === 'angularaxis') {\n    return polarAxisAttrs[head];\n  }\n\n  return polarAxisAttrs.layout[head] || false;\n}\n\nfunction recurseIntoValObject(valObject, parts, i) {\n  if (!valObject) return false;\n\n  if (valObject._isLinkedToArray) {\n    // skip array index, abort if we try to dive into an array without an index\n    if (isIndex(parts[i])) i++;else if (i < parts.length) return false;\n  } // now recurse as far as we can. Occasionally we have an attribute\n  // setting an internal part below what's in the schema; just return\n  // the innermost schema item we find.\n\n\n  for (; i < parts.length; i++) {\n    var newValObject = valObject[parts[i]];\n    if (isPlainObject(newValObject)) valObject = newValObject;else break;\n    if (i === parts.length - 1) break;\n\n    if (valObject._isLinkedToArray) {\n      i++;\n      if (!isIndex(parts[i])) return false;\n    } else if (valObject.valType === 'info_array') {\n      i++;\n      var index = parts[i];\n      if (!isIndex(index)) return false;\n      var items = valObject.items;\n\n      if (Array.isArray(items)) {\n        if (index >= items.length) return false;\n\n        if (valObject.dimensions === 2) {\n          i++;\n          if (parts.length === i) return valObject;\n          var index2 = parts[i];\n          if (!isIndex(index2)) return false;\n          valObject = items[index][index2];\n        } else valObject = items[index];\n      } else {\n        valObject = items;\n      }\n    }\n  }\n\n  return valObject;\n} // note: this is different from Lib.isIndex, this one doesn't accept numeric\n// strings, only actual numbers.\n\n\nfunction isIndex(val) {\n  return val === Math.round(val) && val >= 0;\n}\n\nfunction getTraceAttributes(type) {\n  var _module, basePlotModule;\n\n  if (type === 'area') {\n    _module = {\n      attributes: polarAreaAttrs\n    };\n    basePlotModule = {};\n  } else {\n    _module = Registry.modules[type]._module, basePlotModule = _module.basePlotModule;\n  }\n\n  var attributes = {}; // make 'type' the first attribute in the object\n\n  attributes.type = null;\n  var copyBaseAttributes = extendDeepAll({}, baseAttributes);\n  var copyModuleAttributes = extendDeepAll({}, _module.attributes); // prune global-level trace attributes that are already defined in a trace\n\n  exports.crawl(copyModuleAttributes, function (attr, attrName, attrs, level, fullAttrString) {\n    nestedProperty(copyBaseAttributes, fullAttrString).set(undefined); // Prune undefined attributes\n\n    if (attr === undefined) nestedProperty(copyModuleAttributes, fullAttrString).set(undefined);\n  }); // base attributes (same for all trace types)\n\n  extendDeepAll(attributes, copyBaseAttributes); // prune-out base attributes based on trace module categories\n\n  if (Registry.traceIs(type, 'noOpacity')) {\n    delete attributes.opacity;\n  }\n\n  if (!Registry.traceIs(type, 'showLegend')) {\n    delete attributes.showlegend;\n    delete attributes.legendgroup;\n  }\n\n  if (Registry.traceIs(type, 'noHover')) {\n    delete attributes.hoverinfo;\n    delete attributes.hoverlabel;\n  }\n\n  if (!_module.selectPoints) {\n    delete attributes.selectedpoints;\n  } // module attributes\n\n\n  extendDeepAll(attributes, copyModuleAttributes); // subplot attributes\n\n  if (basePlotModule.attributes) {\n    extendDeepAll(attributes, basePlotModule.attributes);\n  } // 'type' gets overwritten by baseAttributes; reset it here\n\n\n  attributes.type = type;\n  var out = {\n    meta: _module.meta || {},\n    categories: _module.categories || {},\n    animatable: Boolean(_module.animatable),\n    type: type,\n    attributes: formatAttributes(attributes)\n  }; // trace-specific layout attributes\n\n  if (_module.layoutAttributes) {\n    var layoutAttributes = {};\n    extendDeepAll(layoutAttributes, _module.layoutAttributes);\n    out.layoutAttributes = formatAttributes(layoutAttributes);\n  } // drop anim:true in non-animatable modules\n\n\n  if (!_module.animatable) {\n    exports.crawl(out, function (attr) {\n      if (exports.isValObject(attr) && 'anim' in attr) {\n        delete attr.anim;\n      }\n    });\n  }\n\n  return out;\n}\n\nfunction getLayoutAttributes() {\n  var layoutAttributes = {};\n\n  var key, _module; // global layout attributes\n\n\n  extendDeepAll(layoutAttributes, baseLayoutAttributes); // add base plot module layout attributes\n\n  for (key in Registry.subplotsRegistry) {\n    _module = Registry.subplotsRegistry[key];\n    if (!_module.layoutAttributes) continue;\n\n    if (Array.isArray(_module.attr)) {\n      for (var i = 0; i < _module.attr.length; i++) {\n        handleBasePlotModule(layoutAttributes, _module, _module.attr[i]);\n      }\n    } else {\n      var astr = _module.attr === 'subplot' ? _module.name : _module.attr;\n      handleBasePlotModule(layoutAttributes, _module, astr);\n    }\n  } // polar layout attributes\n\n\n  layoutAttributes = assignPolarLayoutAttrs(layoutAttributes); // add registered components layout attributes\n\n  for (key in Registry.componentsRegistry) {\n    _module = Registry.componentsRegistry[key];\n    var schema = _module.schema;\n\n    if (schema && (schema.subplots || schema.layout)) {\n      /*\n       * Components with defined schema have already been merged in at register time\n       * but a few components define attributes that apply only to xaxis\n       * not yaxis (rangeselector, rangeslider) - delete from y schema.\n       * Note that the input attributes for xaxis/yaxis are the same object\n       * so it's not possible to only add them to xaxis from the start.\n       * If we ever have such asymmetry the other way, or anywhere else,\n       * we will need to extend both this code and mergeComponentAttrsToSubplot\n       * (which will not find yaxis only for example)\n       */\n      var subplots = schema.subplots;\n\n      if (subplots && subplots.xaxis && !subplots.yaxis) {\n        for (var xkey in subplots.xaxis) {\n          delete layoutAttributes.yaxis[xkey];\n        }\n      }\n    } else if (_module.name === 'colorscale') {\n      extendDeepAll(layoutAttributes, _module.layoutAttributes);\n    } else if (_module.layoutAttributes) {\n      // older style without schema need to be explicitly merged in now\n      insertAttrs(layoutAttributes, _module.layoutAttributes, _module.name);\n    }\n  }\n\n  return {\n    layoutAttributes: formatAttributes(layoutAttributes)\n  };\n}\n\nfunction getTransformAttributes(type) {\n  var _module = Registry.transformsRegistry[type];\n  var attributes = extendDeepAll({}, _module.attributes); // add registered components transform attributes\n\n  Object.keys(Registry.componentsRegistry).forEach(function (k) {\n    var _module = Registry.componentsRegistry[k];\n\n    if (_module.schema && _module.schema.transforms && _module.schema.transforms[type]) {\n      Object.keys(_module.schema.transforms[type]).forEach(function (v) {\n        insertAttrs(attributes, _module.schema.transforms[type][v], v);\n      });\n    }\n  });\n  return {\n    attributes: formatAttributes(attributes)\n  };\n}\n\nfunction getFramesAttributes() {\n  var attrs = {\n    frames: extendDeepAll({}, frameAttributes)\n  };\n  formatAttributes(attrs);\n  return attrs.frames;\n}\n\nfunction formatAttributes(attrs) {\n  mergeValTypeAndRole(attrs);\n  formatArrayContainers(attrs);\n  stringify(attrs);\n  return attrs;\n}\n\nfunction mergeValTypeAndRole(attrs) {\n  function makeSrcAttr(attrName) {\n    return {\n      valType: 'string',\n      role: 'info',\n      description: ['Sets the source reference on plot.ly for ', attrName, '.'].join(' '),\n      editType: 'none'\n    };\n  }\n\n  function callback(attr, attrName, attrs) {\n    if (exports.isValObject(attr)) {\n      if (attr.valType === 'data_array') {\n        // all 'data_array' attrs have role 'data'\n        attr.role = 'data'; // all 'data_array' attrs have a corresponding 'src' attr\n\n        attrs[attrName + 'src'] = makeSrcAttr(attrName);\n      } else if (attr.arrayOk === true) {\n        // all 'arrayOk' attrs have a corresponding 'src' attr\n        attrs[attrName + 'src'] = makeSrcAttr(attrName);\n      }\n    } else if (isPlainObject(attr)) {\n      // all attrs container objects get role 'object'\n      attr.role = 'object';\n    }\n  }\n\n  exports.crawl(attrs, callback);\n}\n\nfunction formatArrayContainers(attrs) {\n  function callback(attr, attrName, attrs) {\n    if (!attr) return;\n    var itemName = attr[IS_LINKED_TO_ARRAY];\n    if (!itemName) return;\n    delete attr[IS_LINKED_TO_ARRAY];\n    attrs[attrName] = {\n      items: {}\n    };\n    attrs[attrName].items[itemName] = attr;\n    attrs[attrName].role = 'object';\n  }\n\n  exports.crawl(attrs, callback);\n} // this can take around 10ms and should only be run from PlotSchema.get(),\n// to ensure JSON.stringify(PlotSchema.get()) gives the intended result.\n\n\nfunction stringify(attrs) {\n  function walk(attr) {\n    for (var k in attr) {\n      if (isPlainObject(attr[k])) {\n        walk(attr[k]);\n      } else if (Array.isArray(attr[k])) {\n        for (var i = 0; i < attr[k].length; i++) {\n          walk(attr[k][i]);\n        }\n      } else {\n        // as JSON.stringify(/test/) // => {}\n        if (attr[k] instanceof RegExp) {\n          attr[k] = attr[k].toString();\n        }\n      }\n    }\n  }\n\n  walk(attrs);\n}\n\nfunction assignPolarLayoutAttrs(layoutAttributes) {\n  extendFlat(layoutAttributes, {\n    radialaxis: polarAxisAttrs.radialaxis,\n    angularaxis: polarAxisAttrs.angularaxis\n  });\n  extendFlat(layoutAttributes, polarAxisAttrs.layout);\n  return layoutAttributes;\n}\n\nfunction handleBasePlotModule(layoutAttributes, _module, astr) {\n  var np = nestedProperty(layoutAttributes, astr);\n  var attrs = extendDeepAll({}, _module.layoutAttributes);\n  attrs[IS_SUBPLOT_OBJ] = true;\n  np.set(attrs);\n}\n\nfunction insertAttrs(baseAttrs, newAttrs, astr) {\n  var np = nestedProperty(baseAttrs, astr);\n  np.set(extendDeepAll(np.get() || {}, newAttrs));\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar c = require('plotly.js/src/traces/sankey/constants');\nvar d3 = require('d3');\nvar tinycolor = require('tinycolor2');\nvar Color = require('plotly.js/src/components/color');\nvar Drawing = require('plotly.js/src/components/drawing');\n// BEGIN PATCH\nvar d3Sankey = require('d3-sankey');\n// END PATCH\nvar d3SankeyCircular = require('@plotly/d3-sankey-circular');\nvar d3Force = require('d3-force');\nvar Lib = require('plotly.js/src/lib');\nvar gup = require('plotly.js/src/lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\nvar interpolateNumber = require('d3-interpolate').interpolateNumber;\n\nvar Registry = require('plotly.js/src/registry');\n\n// view models\n\nfunction sankeyModel(layout, d, traceIndex) {\n  var calcData = unwrap(d);\n  var trace = calcData.trace;\n  var domain = trace.domain;\n  var horizontal = trace.orientation === 'h';\n  var nodePad = trace.node.pad;\n  var nodeThickness = trace.node.thickness;\n\n  var width = layout.width * (domain.x[1] - domain.x[0]);\n  var height = layout.height * (domain.y[1] - domain.y[0]);\n\n  var nodes = calcData._nodes;\n  var links = calcData._links;\n  var circular = calcData.circular;\n\n  // Select Sankey generator\n  var sankey;\n  if (circular) {\n    sankey = d3SankeyCircular\n      .sankeyCircular()\n      .circularLinkGap(0);\n  } else {\n    sankey = d3Sankey.sankey();\n  }\n\n  sankey\n    .iterations(c.sankeyIterations)\n    .size(horizontal ? [width, height] : [height, width])\n    .nodeWidth(nodeThickness)\n    .nodePadding(nodePad)\n    // BEGIN PATCH\n    .nodeAlign(d3Sankey.sankeyLeft)\n    .linkSort(null)\n    .nodeSort(null)\n    // END PATCH\n    .nodeId(function (d) {\n      return d.pointNumber;\n    })\n    .nodes(nodes)\n    .links(links);\n\n  var graph = sankey();\n\n  if (sankey.nodePadding() < nodePad) {\n    Lib.warn('node.pad was reduced to ', sankey.nodePadding(), ' to fit within the figure.');\n  }\n\n  // Counters for nested loops\n  var i, j, k;\n\n  // Create transient nodes for animations\n  for (var nodePointNumber in calcData._groupLookup) {\n    var groupIndex = parseInt(calcData._groupLookup[nodePointNumber]);\n\n    // Find node representing groupIndex\n    var groupingNode;\n\n    for (i = 0; i < graph.nodes.length; i++) {\n      if (graph.nodes[i].pointNumber === groupIndex) {\n        groupingNode = graph.nodes[i];\n        break;\n      }\n    }\n    // If groupinNode is undefined, no links are targeting this group\n    if (!groupingNode) continue;\n\n    var child = {\n      pointNumber: parseInt(nodePointNumber),\n      x0: groupingNode.x0,\n      x1: groupingNode.x1,\n      y0: groupingNode.y0,\n      y1: groupingNode.y1,\n      partOfGroup: true,\n      sourceLinks: [],\n      targetLinks: []\n    };\n\n    graph.nodes.unshift(child);\n    groupingNode.childrenNodes.unshift(child);\n  }\n\n  function computeLinkConcentrations() {\n    for (i = 0; i < graph.nodes.length; i++) {\n      var node = graph.nodes[i];\n      // Links connecting the same two nodes are part of a flow\n      var flows = {};\n      var flowKey;\n      var link;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        flowKey = link.source.pointNumber + ':' + link.target.pointNumber;\n        if (!flows.hasOwnProperty(flowKey)) flows[flowKey] = [];\n        flows[flowKey].push(link);\n      }\n\n      // Compute statistics for each flow\n      var keys = Object.keys(flows);\n      for (j = 0; j < keys.length; j++) {\n        flowKey = keys[j];\n        var flowLinks = flows[flowKey];\n\n        // Find the total size of the flow and total size per label\n        var total = 0;\n        var totalPerLabel = {};\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          if (!totalPerLabel[link.label]) totalPerLabel[link.label] = 0;\n          totalPerLabel[link.label] += link.value;\n          total += link.value;\n        }\n\n        // Find the ratio of the link's value and the size of the flow\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          link.flow = {\n            value: total,\n            labelConcentration: totalPerLabel[link.label] / total,\n            concentration: link.value / total,\n            links: flowLinks\n          };\n          if (link.concentrationscale) {\n            link.color = tinycolor(link.concentrationscale(link.flow.labelConcentration));\n          }\n        }\n      }\n\n      // Gather statistics of all links at current node\n      var totalOutflow = 0;\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        totalOutflow += node.sourceLinks[j].value;\n      }\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        link = node.sourceLinks[j];\n        link.concentrationOut = link.value / totalOutflow;\n      }\n\n      var totalInflow = 0;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        totalInflow += node.targetLinks[j].value;\n      }\n\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        link.concenrationIn = link.value / totalInflow;\n      }\n    }\n  }\n  computeLinkConcentrations();\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(columns) {\n    columns.forEach(function (nodes) {\n      var node;\n      var dy;\n      var y = 0;\n      var n = nodes.length;\n      var i;\n      nodes.sort(function (a, b) {\n        return a.y0 - b.y0;\n      });\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.y0 >= y) {\n          // No overlap\n        } else {\n          dy = (y - node.y0);\n          if (dy > 1e-6) {\n            node.y0 += dy\n            node.y1 += dy;\n          }\n        }\n        y = node.y1 + nodePad;\n      }\n    });\n  }\n\n  // Group nodes into columns based on their x position\n  function snapToColumns(nodes) {\n    // Sort nodes by x position\n    var orderedNodes = nodes.map(function (n, i) {\n      return {\n        x0: n.x0,\n        index: i\n      };\n    })\n      .sort(function (a, b) {\n        return a.x0 - b.x0;\n      });\n\n    var columns = [];\n    var colNumber = -1;\n    var colX; // Position of column\n    var lastX = -Infinity; // Position of last node\n    var dx;\n    for (i = 0; i < orderedNodes.length; i++) {\n      var node = nodes[orderedNodes[i].index];\n      // If the node does not overlap with the last one\n      if (node.x0 > lastX + nodeThickness) {\n        // Start a new column\n        colNumber += 1;\n        colX = node.x0;\n      }\n      lastX = node.x0;\n\n      // Add node to its associated column\n      if (!columns[colNumber]) columns[colNumber] = [];\n      columns[colNumber].push(node);\n\n      // Change node's x position to align it with its column\n      dx = colX - node.x0;\n      node.x0 += dx;\n      node.x1 += dx;\n    }\n    return columns;\n  }\n\n  // Force node position\n  if (trace.node.x.length && trace.node.y.length) {\n    for (i = 0; i < Math.min(trace.node.x.length, trace.node.y.length, graph.nodes.length); i++) {\n      if (trace.node.x[i] && trace.node.y[i]) {\n        var pos = [trace.node.x[i] * width, trace.node.y[i] * height];\n        graph.nodes[i].x0 = pos[0] - nodeThickness / 2;\n        graph.nodes[i].x1 = pos[0] + nodeThickness / 2;\n\n        var nodeHeight = graph.nodes[i].y1 - graph.nodes[i].y0;\n        graph.nodes[i].y0 = pos[1] - nodeHeight / 2;\n        graph.nodes[i].y1 = pos[1] + nodeHeight / 2;\n      }\n    }\n    if (trace.arrangement === 'snap') {\n      nodes = graph.nodes;\n      var columns = snapToColumns(nodes);\n      resolveCollisionsTopToBottom(columns);\n    }\n    // Update links\n    sankey.update(graph);\n  }\n\n\n  return {\n    circular: circular,\n    key: traceIndex,\n    trace: trace,\n    guid: Lib.randstr(),\n    horizontal: horizontal,\n    width: width,\n    height: height,\n    nodePad: trace.node.pad,\n    nodeLineColor: trace.node.line.color,\n    nodeLineWidth: trace.node.line.width,\n    linkLineColor: trace.link.line.color,\n    linkLineWidth: trace.link.line.width,\n    valueFormat: trace.valueformat,\n    valueSuffix: trace.valuesuffix,\n    textFont: trace.textfont,\n    translateX: domain.x[0] * layout.width + layout.margin.l,\n    translateY: layout.height - domain.y[1] * layout.height + layout.margin.t,\n    dragParallel: horizontal ? height : width,\n    dragPerpendicular: horizontal ? width : height,\n    arrangement: trace.arrangement,\n    sankey: sankey,\n    graph: graph,\n    forceLayouts: {},\n    interactionState: {\n      dragInProgress: false,\n      hovered: false\n    }\n  };\n}\n\nfunction linkModel(d, l, i) {\n  var tc = tinycolor(l.color);\n  var basicKey = l.source.label + '|' + l.target.label;\n  var key = basicKey + '__' + i;\n\n  // for event data\n  l.trace = d.trace;\n  l.curveNumber = d.trace.index;\n\n  return {\n    circular: d.circular,\n    key: key,\n    traceId: d.key,\n    pointNumber: l.pointNumber,\n    link: l,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    linkPath: linkPath,\n    linkLineColor: d.linkLineColor,\n    linkLineWidth: d.linkLineWidth,\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    parent: d,\n    interactionState: d.interactionState,\n    flow: l.flow\n  };\n}\n\nfunction createCircularClosedPathString(link) {\n  // Using coordinates computed by d3-sankey-circular\n  var pathString = '';\n  var offset = link.width / 2;\n  var coords = link.circularPathData;\n  if (link.circularLinkType === 'top') {\n    // Top path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY + offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY - offset) +\n      'Z';\n  } else {\n    // Bottom path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY - offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY + offset) +\n      'Z';\n  }\n  return pathString;\n}\n\nfunction linkPath() {\n  var curvature = 0.5;\n  function path(d) {\n    if (d.link.circular) {\n      return createCircularClosedPathString(d.link);\n    } else {\n      var x0 = d.link.source.x1;\n      var x1 = d.link.target.x0;\n      var xi = interpolateNumber(x0, x1);\n      var x2 = xi(curvature);\n      var x3 = xi(1 - curvature);\n      var y0a = d.link.y0 - d.link.width / 2;\n      var y0b = d.link.y0 + d.link.width / 2;\n      var y1a = d.link.y1 - d.link.width / 2;\n      var y1b = d.link.y1 + d.link.width / 2;\n      return 'M' + x0 + ',' + y0a +\n        'C' + x2 + ',' + y0a +\n        ' ' + x3 + ',' + y1a +\n        ' ' + x1 + ',' + y1a +\n        'L' + x1 + ',' + y1b +\n        'C' + x3 + ',' + y1b +\n        ' ' + x2 + ',' + y0b +\n        ' ' + x0 + ',' + y0b +\n        'Z';\n    }\n  }\n  return path;\n}\n\nfunction nodeModel(d, n) {\n  var tc = tinycolor(n.color);\n  var zoneThicknessPad = c.nodePadAcross;\n  var zoneLengthPad = d.nodePad / 2;\n  n.dx = n.x1 - n.x0;\n  n.dy = n.y1 - n.y0;\n  var visibleThickness = n.dx;\n  var visibleLength = Math.max(0.5, n.dy);\n\n  var key = 'node_' + n.pointNumber;\n  // If it's a group, it's mutable and should be unique\n  if (n.group) {\n    key = Lib.randstr();\n  }\n\n  // for event data\n  n.trace = d.trace;\n  n.curveNumber = d.trace.index;\n\n  return {\n    index: n.pointNumber,\n    key: key,\n    partOfGroup: n.partOfGroup || false,\n    group: n.group,\n    traceId: d.key,\n    trace: d.trace,\n    node: n,\n    nodePad: d.nodePad,\n    nodeLineColor: d.nodeLineColor,\n    nodeLineWidth: d.nodeLineWidth,\n    textFont: d.textFont,\n    size: d.horizontal ? d.height : d.width,\n    visibleWidth: Math.ceil(visibleThickness),\n    visibleHeight: visibleLength,\n    zoneX: -zoneThicknessPad,\n    zoneY: -zoneLengthPad,\n    zoneWidth: visibleThickness + 2 * zoneThicknessPad,\n    zoneHeight: visibleLength + 2 * zoneLengthPad,\n    labelY: d.horizontal ? n.dy / 2 + 1 : n.dx / 2 + 1,\n    left: n.originalLayer === 1,\n    sizeAcross: d.width,\n    forceLayouts: d.forceLayouts,\n    horizontal: d.horizontal,\n    darkBackground: tc.getBrightness() <= 128,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    graph: d.graph,\n    arrangement: d.arrangement,\n    uniqueNodeLabelPathId: [d.guid, d.key, key].join('_'),\n    interactionState: d.interactionState,\n    figure: d\n  };\n}\n\n// rendering snippets\n\nfunction updateNodePositions(sankeyNode) {\n  sankeyNode\n    .attr('transform', function (d) {\n      return 'translate(' + d.node.x0.toFixed(3) + ', ' + (d.node.y0).toFixed(3) + ')';\n    });\n}\n\nfunction updateNodeShapes(sankeyNode) {\n  sankeyNode.call(updateNodePositions);\n}\n\nfunction updateShapes(sankeyNode, sankeyLink) {\n  sankeyNode.call(updateNodeShapes);\n  sankeyLink.attr('d', linkPath());\n}\n\nfunction sizeNode(rect) {\n  rect\n    .attr('width', function (d) { return d.node.x1 - d.node.x0; })\n    .attr('height', function (d) { return d.visibleHeight; });\n}\n\nfunction salientEnough(d) { return (d.link.width > 1 || d.linkLineWidth > 0); }\n\nfunction sankeyTransform(d) {\n  var offset = 'translate(' + d.translateX + ',' + d.translateY + ')';\n  return offset + (d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)');\n}\n\nfunction nodeCentering(d) {\n  return 'translate(' + (d.horizontal ? 0 : d.labelY) + ' ' + (d.horizontal ? d.labelY : 0) + ')';\n}\n\nfunction textGuidePath(d) {\n  return d3.svg.line()([\n    [d.horizontal ? (d.left ? -d.sizeAcross : d.visibleWidth + c.nodeTextOffsetHorizontal) : c.nodeTextOffsetHorizontal, 0],\n    [d.horizontal ? (d.left ? - c.nodeTextOffsetHorizontal : d.sizeAcross) : d.visibleHeight - c.nodeTextOffsetHorizontal, 0]\n  ]);\n}\n\nfunction sankeyInverseTransform(d) { return d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)'; }\nfunction textFlip(d) { return d.horizontal ? 'scale(1 1)' : 'scale(-1 1)'; }\nfunction nodeTextColor(d) { return d.darkBackground && !d.horizontal ? 'rgb(255,255,255)' : 'rgb(0,0,0)'; }\nfunction nodeTextOffset(d) { return d.horizontal && d.left ? '100%' : '0%'; }\n\n// event handling\n\nfunction attachPointerEvents(selection, sankey, eventSet) {\n  selection\n    .on('.basic', null) // remove any preexisting handlers\n    .on('mouseover.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.hover(this, d, sankey);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mousemove.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.follow(this, d);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mouseout.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n    })\n    .on('click.basic', function (d) {\n      if (d.interactionState.hovered) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.select(this, d, sankey);\n      }\n    });\n}\n\nfunction attachDragHandler(sankeyNode, sankeyLink, callbacks, gd) {\n  var dragBehavior = d3.behavior.drag()\n    .origin(function (d) {\n      return {\n        x: d.node.x0 + d.visibleWidth / 2,\n        y: d.node.y0 + d.visibleHeight / 2\n      };\n    })\n\n    .on('dragstart', function (d) {\n      if (d.arrangement === 'fixed') return;\n      Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'dragcover', function (s) {\n        gd._fullLayout._dragCover = s;\n      });\n      Lib.raiseToTop(this);\n      d.interactionState.dragInProgress = d.node;\n\n      saveCurrentDragPosition(d.node);\n      if (d.interactionState.hovered) {\n        callbacks.nodeEvents.unhover.apply(0, d.interactionState.hovered);\n        d.interactionState.hovered = false;\n      }\n      if (d.arrangement === 'snap') {\n        var forceKey = d.traceId + '|' + d.key;\n        if (d.forceLayouts[forceKey]) {\n          d.forceLayouts[forceKey].alpha(1);\n        } else { // make a forceLayout if needed\n          attachForce(sankeyNode, forceKey, d, gd);\n        }\n        startForce(sankeyNode, sankeyLink, d, forceKey, gd);\n      }\n    })\n\n    .on('drag', function (d) {\n      if (d.arrangement === 'fixed') return;\n      var x = d3.event.x;\n      var y = d3.event.y;\n      if (d.arrangement === 'snap') {\n        d.node.x0 = x - d.visibleWidth / 2;\n        d.node.x1 = x + d.visibleWidth / 2;\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      } else {\n        if (d.arrangement === 'freeform') {\n          d.node.x0 = x - d.visibleWidth / 2;\n          d.node.x1 = x + d.visibleWidth / 2;\n        }\n        y = Math.max(0, Math.min(d.size - d.visibleHeight / 2, y));\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      }\n\n      saveCurrentDragPosition(d.node);\n      if (d.arrangement !== 'snap') {\n        d.sankey.update(d.graph);\n        updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n      }\n    })\n\n    .on('dragend', function (d) {\n      if (d.arrangement === 'fixed') return;\n      d.interactionState.dragInProgress = false;\n      for (var i = 0; i < d.node.childrenNodes.length; i++) {\n        d.node.childrenNodes[i].x = d.node.x;\n        d.node.childrenNodes[i].y = d.node.y;\n      }\n      if (d.arrangement !== 'snap') persistFinalNodePositions(d, gd);\n    });\n\n  sankeyNode\n    .on('.drag', null) // remove possible previous handlers\n    .call(dragBehavior);\n}\n\nfunction attachForce(sankeyNode, forceKey, d, gd) {\n  // Attach force to nodes in the same column (same x coordinate)\n  switchToForceFormat(d.graph.nodes);\n  var nodes = d.graph.nodes\n    .filter(function (n) { return n.originalX === d.node.originalX; })\n    // Filter out children\n    .filter(function (n) { return !n.partOfGroup; });\n  d.forceLayouts[forceKey] = d3Force.forceSimulation(nodes)\n    .alphaDecay(0)\n    .force('collide', d3Force.forceCollide()\n      .radius(function (n) { return n.dy / 2 + d.nodePad / 2; })\n      .strength(1)\n      .iterations(c.forceIterations))\n    .force('constrain', snappingForce(sankeyNode, forceKey, nodes, d, gd))\n    .stop();\n}\n\nfunction startForce(sankeyNode, sankeyLink, d, forceKey, gd) {\n  window.requestAnimationFrame(function faster() {\n    var i;\n    for (i = 0; i < c.forceTicksPerFrame; i++) {\n      d.forceLayouts[forceKey].tick();\n    }\n\n    var nodes = d.graph.nodes;\n    switchToSankeyFormat(nodes);\n\n    d.sankey.update(d.graph);\n    updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n\n    if (d.forceLayouts[forceKey].alpha() > 0) {\n      window.requestAnimationFrame(faster);\n    } else {\n      // Make sure the final x position is equal to its original value\n      // because the force simulation will have numerical error\n      var x = d.node.originalX;\n      d.node.x0 = x - d.visibleWidth / 2;\n      d.node.x1 = x + d.visibleWidth / 2;\n\n      persistFinalNodePositions(d, gd);\n    }\n  });\n}\n\nfunction snappingForce(sankeyNode, forceKey, nodes, d) {\n  return function _snappingForce() {\n    var maxVelocity = 0;\n    for (var i = 0; i < nodes.length; i++) {\n      var n = nodes[i];\n      if (n === d.interactionState.dragInProgress) { // constrain node position to the dragging pointer\n        n.x = n.lastDraggedX;\n        n.y = n.lastDraggedY;\n      } else {\n        n.vx = (n.originalX - n.x) / c.forceTicksPerFrame; // snap to layer\n        n.y = Math.min(d.size - n.dy / 2, Math.max(n.dy / 2, n.y)); // constrain to extent\n      }\n      maxVelocity = Math.max(maxVelocity, Math.abs(n.vx), Math.abs(n.vy));\n    }\n    if (!d.interactionState.dragInProgress && maxVelocity < 0.1 && d.forceLayouts[forceKey].alpha() > 0) {\n      d.forceLayouts[forceKey].alpha(0); // This will stop the animation loop\n    }\n  };\n}\n\n// basic data utilities\n\nfunction persistFinalNodePositions(d, gd) {\n  var x = [];\n  var y = [];\n  for (var i = 0; i < d.graph.nodes.length; i++) {\n    var nodeX = (d.graph.nodes[i].x0 + d.graph.nodes[i].x1) / 2;\n    var nodeY = (d.graph.nodes[i].y0 + d.graph.nodes[i].y1) / 2;\n    x.push(nodeX / d.figure.width);\n    y.push(nodeY / d.figure.height);\n  }\n  Registry.call('_guiRestyle', gd, {\n    'node.x': [x],\n    'node.y': [y]\n  }, d.trace.index)\n    .then(function () {\n      if (gd._fullLayout._dragCover) gd._fullLayout._dragCover.remove();\n    });\n}\n\nfunction persistOriginalPlace(nodes) {\n  var distinctLayerPositions = [];\n  var i;\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalX = (nodes[i].x0 + nodes[i].x1) / 2;\n    nodes[i].originalY = (nodes[i].y0 + nodes[i].y1) / 2;\n    if (distinctLayerPositions.indexOf(nodes[i].originalX) === -1) {\n      distinctLayerPositions.push(nodes[i].originalX);\n    }\n  }\n  distinctLayerPositions.sort(function (a, b) { return a - b; });\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalLayerIndex = distinctLayerPositions.indexOf(nodes[i].originalX);\n    nodes[i].originalLayer = nodes[i].originalLayerIndex / (distinctLayerPositions.length - 1);\n  }\n}\n\nfunction saveCurrentDragPosition(d) {\n  d.lastDraggedX = d.x0 + d.dx / 2;\n  d.lastDraggedY = d.y0 + d.dy / 2;\n}\n\nfunction sameLayer(d) {\n  return function (n) { return n.node.originalX === d.node.originalX; };\n}\n\nfunction switchToForceFormat(nodes) {\n  // force uses x, y as centers\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y = (nodes[i].y0 + nodes[i].y1) / 2;\n    nodes[i].x = (nodes[i].x0 + nodes[i].x1) / 2;\n  }\n}\n\nfunction switchToSankeyFormat(nodes) {\n  // sankey uses x0, x1, y0, y1\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y0 = nodes[i].y - nodes[i].dy / 2;\n    nodes[i].y1 = nodes[i].y0 + nodes[i].dy;\n\n    nodes[i].x0 = nodes[i].x - nodes[i].dx / 2;\n    nodes[i].x1 = nodes[i].x0 + nodes[i].dx;\n  }\n}\n\n// scene graph\nmodule.exports = function (gd, svg, calcData, layout, callbacks) {\n  // To prevent animation on first render\n  var firstRender = false;\n  Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'first-render', function () {\n    firstRender = true;\n  });\n\n  // To prevent animation on dragging\n  var dragcover = gd._fullLayout._dragCover;\n\n  var styledData = calcData\n    .filter(function (d) { return unwrap(d).trace.visible; })\n    .map(sankeyModel.bind(null, layout));\n\n  var sankey = svg.selectAll('.' + c.cn.sankey)\n    .data(styledData, keyFun);\n\n  sankey.exit()\n    .remove();\n\n  sankey.enter()\n    .append('g')\n    .classed(c.cn.sankey, true)\n    .style('box-sizing', 'content-box')\n    .style('position', 'absolute')\n    .style('left', 0)\n    .style('shape-rendering', 'geometricPrecision')\n    .style('pointer-events', 'auto')\n    .attr('transform', sankeyTransform);\n\n  sankey.each(function (d, i) {\n    gd._fullData[i]._sankey = d;\n    // Create dragbox if missing\n    var dragboxClassName = 'bgsankey-' + d.trace.uid + '-' + i;\n    Lib.ensureSingle(gd._fullLayout._draggers, 'rect', dragboxClassName);\n\n    gd._fullData[i]._bgRect = d3.select('.' + dragboxClassName);\n\n    // Style dragbox\n    gd._fullData[i]._bgRect\n      .style('pointer-events', 'all')\n      .attr('width', d.width)\n      .attr('height', d.height)\n      .attr('x', d.translateX)\n      .attr('y', d.translateY)\n      .classed('bgsankey', true)\n      .style({ fill: 'transparent', 'stroke-width': 0 });\n  });\n\n  sankey.transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', sankeyTransform);\n\n  var sankeyLinks = sankey.selectAll('.' + c.cn.sankeyLinks)\n    .data(repeat, keyFun);\n\n  sankeyLinks.enter()\n    .append('g')\n    .classed(c.cn.sankeyLinks, true)\n    .style('fill', 'none');\n\n  var sankeyLink = sankeyLinks.selectAll('.' + c.cn.sankeyLink)\n    .data(function (d) {\n      var links = d.graph.links;\n      return links\n        .filter(function (l) { return l.value; })\n        .map(linkModel.bind(null, d));\n    }, keyFun);\n\n  sankeyLink\n    .enter().append('path')\n    .classed(c.cn.sankeyLink, true)\n    .call(attachPointerEvents, sankey, callbacks.linkEvents);\n\n  sankeyLink\n    .style('stroke', function (d) {\n      return salientEnough(d) ? Color.tinyRGB(tinycolor(d.linkLineColor)) : d.tinyColorHue;\n    })\n    .style('stroke-opacity', function (d) {\n      return salientEnough(d) ? Color.opacity(d.linkLineColor) : d.tinyColorAlpha;\n    })\n    .style('fill', function (d) {\n      return d.tinyColorHue;\n    })\n    .style('fill-opacity', function (d) {\n      return d.tinyColorAlpha;\n    })\n    .style('stroke-width', function (d) {\n      return salientEnough(d) ? d.linkLineWidth : 1;\n    })\n    .attr('d', linkPath());\n\n  sankeyLink\n    .style('opacity', function () { return (gd._context.staticPlot || firstRender || dragcover) ? 1 : 0; })\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 1);\n\n  sankeyLink.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var sankeyNodeSet = sankey.selectAll('.' + c.cn.sankeyNodeSet)\n    .data(repeat, keyFun);\n\n  sankeyNodeSet.enter()\n    .append('g')\n    .classed(c.cn.sankeyNodeSet, true);\n\n  sankeyNodeSet\n    .style('cursor', function (d) {\n      switch (d.arrangement) {\n        case 'fixed': return 'default';\n        case 'perpendicular': return 'ns-resize';\n        default: return 'move';\n      }\n    });\n\n  var sankeyNode = sankeyNodeSet.selectAll('.' + c.cn.sankeyNode)\n    .data(function (d) {\n      var nodes = d.graph.nodes;\n      persistOriginalPlace(nodes);\n      return nodes\n        .map(nodeModel.bind(null, d));\n    }, keyFun);\n\n  sankeyNode.enter()\n    .append('g')\n    .classed(c.cn.sankeyNode, true)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return ((gd._context.staticPlot || firstRender) && !n.partOfGroup) ? 1 : 0; });\n\n  sankeyNode\n    .call(attachPointerEvents, sankey, callbacks.nodeEvents)\n    .call(attachDragHandler, sankeyLink, callbacks, gd); // has to be here as it binds sankeyLink\n\n  sankeyNode\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return n.partOfGroup ? 0 : 1; });\n\n  sankeyNode.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var nodeRect = sankeyNode.selectAll('.' + c.cn.nodeRect)\n    .data(repeat);\n\n  nodeRect.enter()\n    .append('rect')\n    .classed(c.cn.nodeRect, true)\n    .call(sizeNode);\n\n  nodeRect\n    .style('stroke-width', function (d) { return d.nodeLineWidth; })\n    .style('stroke', function (d) { return Color.tinyRGB(tinycolor(d.nodeLineColor)); })\n    .style('stroke-opacity', function (d) { return Color.opacity(d.nodeLineColor); })\n    .style('fill', function (d) { return d.tinyColorHue; })\n    .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n\n  nodeRect.transition()\n    .ease(c.ease).duration(c.duration)\n    .call(sizeNode);\n\n  var nodeCapture = sankeyNode.selectAll('.' + c.cn.nodeCapture)\n    .data(repeat);\n\n  nodeCapture.enter()\n    .append('rect')\n    .classed(c.cn.nodeCapture, true)\n    .style('fill-opacity', 0);\n\n  nodeCapture\n    .attr('x', function (d) { return d.zoneX; })\n    .attr('y', function (d) { return d.zoneY; })\n    .attr('width', function (d) { return d.zoneWidth; })\n    .attr('height', function (d) { return d.zoneHeight; });\n\n  var nodeCentered = sankeyNode.selectAll('.' + c.cn.nodeCentered)\n    .data(repeat);\n\n  nodeCentered.enter()\n    .append('g')\n    .classed(c.cn.nodeCentered, true)\n    .attr('transform', nodeCentering);\n\n  nodeCentered\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', nodeCentering);\n\n  var nodeLabelGuide = nodeCentered.selectAll('.' + c.cn.nodeLabelGuide)\n    .data(repeat);\n\n  nodeLabelGuide.enter()\n    .append('path')\n    .classed(c.cn.nodeLabelGuide, true)\n    .attr('id', function (d) { return d.uniqueNodeLabelPathId; })\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  nodeLabelGuide\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  var nodeLabel = nodeCentered.selectAll('.' + c.cn.nodeLabel)\n    .data(repeat);\n\n  nodeLabel.enter()\n    .append('text')\n    .classed(c.cn.nodeLabel, true)\n    .attr('transform', textFlip)\n    .style('user-select', 'none')\n    .style('cursor', 'default')\n    .style('fill', 'black');\n\n  nodeLabel\n    .style('text-shadow', function (d) {\n      return d.horizontal ? '-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff' : 'none';\n    })\n    .each(function (d) { Drawing.font(nodeLabel, d.textFont); });\n\n  nodeLabel\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', textFlip);\n\n  var nodeLabelTextPath = nodeLabel.selectAll('.' + c.cn.nodeLabelTextPath)\n    .data(repeat);\n\n  nodeLabelTextPath.enter()\n    .append('textPath')\n    .classed(c.cn.nodeLabelTextPath, true)\n    .attr('alignment-baseline', 'middle')\n    .attr('xlink:href', function (d) { return '#' + d.uniqueNodeLabelPathId; })\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n\n  nodeLabelTextPath\n    .text(function (d) { return d.horizontal || d.node.dy > 5 ? d.node.label : ''; })\n    .attr('text-anchor', function (d) { return d.horizontal && d.left ? 'end' : 'start'; });\n\n  nodeLabelTextPath\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar Lib = require('../../lib');\n\nvar id2name = require('./axis_ids').id2name;\n\nvar scaleZoom = require('./scale_zoom');\n\nvar makePadFn = require('./autorange').makePadFn;\n\nvar concatExtremes = require('./autorange').concatExtremes;\n\nvar ALMOST_EQUAL = require('../../constants/numerical').ALMOST_EQUAL;\n\nvar FROM_BL = require('../../constants/alignment').FROM_BL;\n\nexports.handleConstraintDefaults = function (containerIn, containerOut, coerce, opts) {\n  var allAxisIds = opts.allAxisIds;\n  var layoutOut = opts.layoutOut;\n  var scaleanchorDflt = opts.scaleanchorDflt;\n  var constrainDflt = opts.constrainDflt;\n  var constraintGroups = layoutOut._axisConstraintGroups;\n  var matchGroups = layoutOut._axisMatchGroups;\n  var axId = containerOut._id;\n  var axLetter = axId.charAt(0);\n  var splomStash = ((layoutOut._splomAxes || {})[axLetter] || {})[axId] || {};\n  var thisID = containerOut._id;\n  var letter = thisID.charAt(0); // coerce the constraint mechanics even if this axis has no scaleanchor\n  // because it may be the anchor of another axis.\n\n  var constrain = coerce('constrain', constrainDflt);\n  Lib.coerce(containerIn, containerOut, {\n    constraintoward: {\n      valType: 'enumerated',\n      values: letter === 'x' ? ['left', 'center', 'right'] : ['bottom', 'middle', 'top'],\n      dflt: letter === 'x' ? 'center' : 'middle'\n    }\n  }, 'constraintoward');\n  var matches, matchOpts;\n\n  if ((containerIn.matches || splomStash.matches) && !containerOut.fixedrange) {\n    matchOpts = getConstraintOpts(matchGroups, thisID, allAxisIds, layoutOut);\n    matches = Lib.coerce(containerIn, containerOut, {\n      matches: {\n        valType: 'enumerated',\n        values: matchOpts.linkableAxes || [],\n        dflt: splomStash.matches\n      }\n    }, 'matches');\n  } // 'matches' wins over 'scaleanchor' (for now)\n\n\n  var scaleanchor, scaleOpts;\n\n  if (!matches && !(containerOut.fixedrange && constrain !== 'domain') && (containerIn.scaleanchor || scaleanchorDflt)) {\n    scaleOpts = getConstraintOpts(constraintGroups, thisID, allAxisIds, layoutOut, constrain);\n    scaleanchor = Lib.coerce(containerIn, containerOut, {\n      scaleanchor: {\n        valType: 'enumerated',\n        values: scaleOpts.linkableAxes || []\n      }\n    }, 'scaleanchor', scaleanchorDflt);\n  }\n\n  if (matches) {\n    delete containerOut.constrain;\n    updateConstraintGroups(matchGroups, matchOpts.thisGroup, thisID, matches, 1);\n  } else if (allAxisIds.indexOf(containerIn.matches) !== -1) {\n    Lib.warn('ignored ' + containerOut._name + '.matches: \"' + containerIn.matches + '\" to avoid either an infinite loop ' + 'or because the target axis has fixed range.');\n  }\n\n  if (scaleanchor) {\n    var scaleratio = coerce('scaleratio'); // TODO: I suppose I could do attribute.min: Number.MIN_VALUE to avoid zero,\n    // but that seems hacky. Better way to say \"must be a positive number\"?\n    // Of course if you use several super-tiny values you could eventually\n    // force a product of these to zero and all hell would break loose...\n    // Likewise with super-huge values.\n\n    if (!scaleratio) scaleratio = containerOut.scaleratio = 1;\n    updateConstraintGroups(constraintGroups, scaleOpts.thisGroup, thisID, scaleanchor, scaleratio);\n  } else if (allAxisIds.indexOf(containerIn.scaleanchor) !== -1) {\n    Lib.warn('ignored ' + containerOut._name + '.scaleanchor: \"' + containerIn.scaleanchor + '\" to avoid either an infinite loop ' + 'and possibly inconsistent scaleratios, or because the target ' + 'axis has fixed range or this axis declares a *matches* constraint.');\n  }\n}; // If this axis is already part of a constraint group, we can't\n// scaleanchor any other axis in that group, or we'd make a loop.\n// Filter allAxisIds to enforce this, also matching axis types.\n\n\nfunction getConstraintOpts(groups, thisID, allAxisIds, layoutOut, constrain) {\n  var doesNotConstrainRange = constrain !== 'range';\n  var thisType = layoutOut[id2name(thisID)].type;\n  var i, j, idj, axj;\n  var linkableAxes = [];\n\n  for (j = 0; j < allAxisIds.length; j++) {\n    idj = allAxisIds[j];\n    if (idj === thisID) continue;\n    axj = layoutOut[id2name(idj)];\n\n    if (axj.type === thisType) {\n      if (!axj.fixedrange) {\n        linkableAxes.push(idj);\n      } else if (doesNotConstrainRange && axj.anchor) {\n        // allow domain constraints on subplots where\n        // BOTH axes have fixedrange:true and constrain:domain\n        var counterAxj = layoutOut[id2name(axj.anchor)];\n\n        if (counterAxj.fixedrange) {\n          linkableAxes.push(idj);\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < groups.length; i++) {\n    if (groups[i][thisID]) {\n      var thisGroup = groups[i];\n      var linkableAxesNoLoops = [];\n\n      for (j = 0; j < linkableAxes.length; j++) {\n        idj = linkableAxes[j];\n        if (!thisGroup[idj]) linkableAxesNoLoops.push(idj);\n      }\n\n      return {\n        linkableAxes: linkableAxesNoLoops,\n        thisGroup: thisGroup\n      };\n    }\n  }\n\n  return {\n    linkableAxes: linkableAxes,\n    thisGroup: null\n  };\n}\n/*\n * Add this axis to the axis constraint groups, which is the collection\n * of axes that are all constrained together on scale.\n *\n * constraintGroups: a list of objects. each object is\n * {axis_id: scale_within_group}, where scale_within_group is\n * only important relative to the rest of the group, and defines\n * the relative scales between all axes in the group\n *\n * thisGroup: the group the current axis is already in\n * thisID: the id if the current axis\n * scaleanchor: the id of the axis to scale it with\n * scaleratio: the ratio of this axis to the scaleanchor axis\n */\n\n\nfunction updateConstraintGroups(constraintGroups, thisGroup, thisID, scaleanchor, scaleratio) {\n  var i, j, groupi, keyj, thisGroupIndex;\n\n  if (thisGroup === null) {\n    thisGroup = {};\n    thisGroup[thisID] = 1;\n    thisGroupIndex = constraintGroups.length;\n    constraintGroups.push(thisGroup);\n  } else {\n    thisGroupIndex = constraintGroups.indexOf(thisGroup);\n  }\n\n  var thisGroupKeys = Object.keys(thisGroup); // we know that this axis isn't in any other groups, but we don't know\n  // about the scaleanchor axis. If it is, we need to merge the groups.\n\n  for (i = 0; i < constraintGroups.length; i++) {\n    groupi = constraintGroups[i];\n\n    if (i !== thisGroupIndex && groupi[scaleanchor]) {\n      var baseScale = groupi[scaleanchor];\n\n      for (j = 0; j < thisGroupKeys.length; j++) {\n        keyj = thisGroupKeys[j];\n        groupi[keyj] = baseScale * scaleratio * thisGroup[keyj];\n      }\n\n      constraintGroups.splice(thisGroupIndex, 1);\n      return;\n    }\n  } // otherwise, we insert the new scaleanchor axis as the base scale (1)\n  // in its group, and scale the rest of the group to it\n\n\n  if (scaleratio !== 1) {\n    for (j = 0; j < thisGroupKeys.length; j++) {\n      thisGroup[thisGroupKeys[j]] *= scaleratio;\n    }\n  }\n\n  thisGroup[scaleanchor] = 1;\n}\n\nexports.enforce = function enforce(gd) {\n  var fullLayout = gd._fullLayout;\n  var constraintGroups = fullLayout._axisConstraintGroups || [];\n  var i, j, axisID, ax, normScale, mode, factor;\n\n  for (i = 0; i < constraintGroups.length; i++) {\n    var group = constraintGroups[i];\n    var axisIDs = Object.keys(group);\n    var minScale = Infinity;\n    var maxScale = 0; // mostly matchScale will be the same as minScale\n    // ie we expand axis ranges to encompass *everything*\n    // that's currently in any of their ranges, but during\n    // autorange of a subset of axes we will ignore other\n    // axes for this purpose.\n\n    var matchScale = Infinity;\n    var normScales = {};\n    var axes = {};\n    var hasAnyDomainConstraint = false; // find the (normalized) scale of each axis in the group\n\n    for (j = 0; j < axisIDs.length; j++) {\n      axisID = axisIDs[j];\n      axes[axisID] = ax = fullLayout[id2name(axisID)];\n      if (ax._inputDomain) ax.domain = ax._inputDomain.slice();else ax._inputDomain = ax.domain.slice();\n      if (!ax._inputRange) ax._inputRange = ax.range.slice(); // set axis scale here so we can use _m rather than\n      // having to calculate it from length and range\n\n      ax.setScale(); // abs: inverted scales still satisfy the constraint\n\n      normScales[axisID] = normScale = Math.abs(ax._m) / group[axisID];\n      minScale = Math.min(minScale, normScale);\n\n      if (ax.constrain === 'domain' || !ax._constraintShrinkable) {\n        matchScale = Math.min(matchScale, normScale);\n      } // this has served its purpose, so remove it\n\n\n      delete ax._constraintShrinkable;\n      maxScale = Math.max(maxScale, normScale);\n      if (ax.constrain === 'domain') hasAnyDomainConstraint = true;\n    } // Do we have a constraint mismatch? Give a small buffer for rounding errors\n\n\n    if (minScale > ALMOST_EQUAL * maxScale && !hasAnyDomainConstraint) continue; // now increase any ranges we need to until all normalized scales are equal\n\n    for (j = 0; j < axisIDs.length; j++) {\n      axisID = axisIDs[j];\n      normScale = normScales[axisID];\n      ax = axes[axisID];\n      mode = ax.constrain; // even if the scale didn't change, if we're shrinking domain\n      // we need to recalculate in case `constraintoward` changed\n\n      if (normScale !== matchScale || mode === 'domain') {\n        factor = normScale / matchScale;\n\n        if (mode === 'range') {\n          scaleZoom(ax, factor);\n        } else {\n          // mode === 'domain'\n          var inputDomain = ax._inputDomain;\n          var domainShrunk = (ax.domain[1] - ax.domain[0]) / (inputDomain[1] - inputDomain[0]);\n          var rangeShrunk = (ax.r2l(ax.range[1]) - ax.r2l(ax.range[0])) / (ax.r2l(ax._inputRange[1]) - ax.r2l(ax._inputRange[0]));\n          factor /= domainShrunk;\n\n          if (factor * rangeShrunk < 1) {\n            // we've asked to magnify the axis more than we can just by\n            // enlarging the domain - so we need to constrict range\n            ax.domain = ax._input.domain = inputDomain.slice();\n            scaleZoom(ax, factor);\n            continue;\n          }\n\n          if (rangeShrunk < 1) {\n            // the range has previously been constricted by ^^, but we've\n            // switched to the domain-constricted regime, so reset range\n            ax.range = ax._input.range = ax._inputRange.slice();\n            factor *= rangeShrunk;\n          }\n\n          if (ax.autorange) {\n            /*\n             * range & factor may need to change because range was\n             * calculated for the larger scaling, so some pixel\n             * paddings may get cut off when we reduce the domain.\n             *\n             * This is easier than the regular autorange calculation\n             * because we already know the scaling `m`, but we still\n             * need to cut out impossible constraints (like\n             * annotations with super-long arrows). That's what\n             * outerMin/Max are for - if the expansion was going to\n             * go beyond the original domain, it must be impossible\n             */\n            var rl0 = ax.r2l(ax.range[0]);\n            var rl1 = ax.r2l(ax.range[1]);\n            var rangeCenter = (rl0 + rl1) / 2;\n            var rangeMin = rangeCenter;\n            var rangeMax = rangeCenter;\n            var halfRange = Math.abs(rl1 - rangeCenter); // extra tiny bit for rounding errors, in case we actually\n            // *are* expanding to the full domain\n\n            var outerMin = rangeCenter - halfRange * factor * 1.0001;\n            var outerMax = rangeCenter + halfRange * factor * 1.0001;\n            var getPad = makePadFn(ax);\n            updateDomain(ax, factor);\n            var m = Math.abs(ax._m);\n            var extremes = concatExtremes(gd, ax);\n            var minArray = extremes.min;\n            var maxArray = extremes.max;\n            var newVal;\n            var k;\n\n            for (k = 0; k < minArray.length; k++) {\n              newVal = minArray[k].val - getPad(minArray[k]) / m;\n\n              if (newVal > outerMin && newVal < rangeMin) {\n                rangeMin = newVal;\n              }\n            }\n\n            for (k = 0; k < maxArray.length; k++) {\n              newVal = maxArray[k].val + getPad(maxArray[k]) / m;\n\n              if (newVal < outerMax && newVal > rangeMax) {\n                rangeMax = newVal;\n              }\n            }\n\n            var domainExpand = (rangeMax - rangeMin) / (2 * halfRange);\n            factor /= domainExpand;\n            rangeMin = ax.l2r(rangeMin);\n            rangeMax = ax.l2r(rangeMax);\n            ax.range = ax._input.range = rl0 < rl1 ? [rangeMin, rangeMax] : [rangeMax, rangeMin];\n          }\n\n          updateDomain(ax, factor);\n        }\n      }\n    }\n  }\n}; // For use before autoranging, check if this axis was previously constrained\n// by domain but no longer is\n\n\nexports.clean = function clean(gd, ax) {\n  if (ax._inputDomain) {\n    var isConstrained = false;\n    var axId = ax._id;\n    var constraintGroups = gd._fullLayout._axisConstraintGroups;\n\n    for (var j = 0; j < constraintGroups.length; j++) {\n      if (constraintGroups[j][axId]) {\n        isConstrained = true;\n        break;\n      }\n    }\n\n    if (!isConstrained || ax.constrain !== 'domain') {\n      ax._input.domain = ax.domain = ax._inputDomain;\n      delete ax._inputDomain;\n    }\n  }\n};\n\nfunction updateDomain(ax, factor) {\n  var inputDomain = ax._inputDomain;\n  var centerFraction = FROM_BL[ax.constraintoward];\n  var center = inputDomain[0] + (inputDomain[1] - inputDomain[0]) * centerFraction;\n  ax.domain = ax._input.domain = [center + (inputDomain[0] - center) / factor, center + (inputDomain[1] - center) / factor];\n  ax.setScale();\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.typed.data-view\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar isArray = Array.isArray; // IE9 fallbacks\n\nvar ab = typeof ArrayBuffer === 'undefined' || !ArrayBuffer.isView ? {\n  isView: function isView() {\n    return false;\n  }\n} : ArrayBuffer;\nvar dv = typeof DataView === 'undefined' ? function () {} : DataView;\n\nfunction isTypedArray(a) {\n  return ab.isView(a) && !(a instanceof dv);\n}\n\nexports.isTypedArray = isTypedArray;\n\nfunction isArrayOrTypedArray(a) {\n  return isArray(a) || isTypedArray(a);\n}\n\nexports.isArrayOrTypedArray = isArrayOrTypedArray;\n/*\n * Test whether an input object is 1D.\n *\n * Assumes we already know the object is an array.\n *\n * Looks only at the first element, if the dimensionality is\n * not consistent we won't figure that out here.\n */\n\nfunction isArray1D(a) {\n  return !isArrayOrTypedArray(a[0]);\n}\n\nexports.isArray1D = isArray1D;\n/*\n * Ensures an array has the right amount of storage space. If it doesn't\n * exist, it creates an array. If it does exist, it returns it if too\n * short or truncates it in-place.\n *\n * The goal is to just reuse memory to avoid a bit of excessive garbage\n * collection.\n */\n\nexports.ensureArray = function (out, n) {\n  // TODO: typed array support here? This is only used in\n  // traces/carpet/compute_control_points\n  if (!isArray(out)) out = []; // If too long, truncate. (If too short, it will grow\n  // automatically so we don't care about that case)\n\n  out.length = n;\n  return out;\n};\n/*\n * TypedArray-compatible concatenation of n arrays\n * if all arrays are the same type it will preserve that type,\n * otherwise it falls back on Array.\n * Also tries to avoid copying, in case one array has zero length\n * But never mutates an existing array\n */\n\n\nexports.concat = function () {\n  var args = [];\n  var allArray = true;\n  var totalLen = 0;\n\n  var _constructor, arg0, i, argi, posi, leni, out, j;\n\n  for (i = 0; i < arguments.length; i++) {\n    argi = arguments[i];\n    leni = argi.length;\n\n    if (leni) {\n      if (arg0) args.push(argi);else {\n        arg0 = argi;\n        posi = leni;\n      }\n\n      if (isArray(argi)) {\n        _constructor = false;\n      } else {\n        allArray = false;\n\n        if (!totalLen) {\n          _constructor = argi.constructor;\n        } else if (_constructor !== argi.constructor) {\n          // TODO: in principle we could upgrade here,\n          // ie keep typed array but convert all to Float64Array?\n          _constructor = false;\n        }\n      }\n\n      totalLen += leni;\n    }\n  }\n\n  if (!totalLen) return [];\n  if (!args.length) return arg0;\n  if (allArray) return arg0.concat.apply(arg0, args);\n\n  if (_constructor) {\n    // matching typed arrays\n    out = new _constructor(totalLen);\n    out.set(arg0);\n\n    for (i = 0; i < args.length; i++) {\n      argi = args[i];\n      out.set(argi, posi);\n      posi += argi.length;\n    }\n\n    return out;\n  } // mismatched types or Array + typed\n\n\n  out = new Array(totalLen);\n\n  for (j = 0; j < arg0.length; j++) {\n    out[j] = arg0[j];\n  }\n\n  for (i = 0; i < args.length; i++) {\n    argi = args[i];\n\n    for (j = 0; j < argi.length; j++) {\n      out[posi + j] = argi[j];\n    }\n\n    posi += j;\n  }\n\n  return out;\n};\n\nexports.maxRowLength = function (z) {\n  return _rowLength(z, Math.max, 0);\n};\n\nexports.minRowLength = function (z) {\n  return _rowLength(z, Math.min, Infinity);\n};\n\nfunction _rowLength(z, fn, len0) {\n  if (isArrayOrTypedArray(z)) {\n    if (isArrayOrTypedArray(z[0])) {\n      var len = len0;\n\n      for (var i = 0; i < z.length; i++) {\n        len = fn(len, z[i].length);\n      }\n\n      return len;\n    } else {\n      return z.length;\n    }\n  }\n\n  return 0;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/** Filter out object items with visible !== true\n *  insider array container.\n *\n *  @param {array of objects} container\n *  @return {array of objects} of length <= container\n *\n */\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nmodule.exports = function filterVisible(container) {\n  var filterFn = isCalcData(container) ? calcDataFilter : baseFilter;\n  var out = [];\n\n  for (var i = 0; i < container.length; i++) {\n    var item = container[i];\n    if (filterFn(item)) out.push(item);\n  }\n\n  return out;\n};\n\nfunction baseFilter(item) {\n  return item.visible === true;\n}\n\nfunction calcDataFilter(item) {\n  var trace = item[0].trace;\n  return trace.visible === true && trace._length !== 0;\n}\n\nfunction isCalcData(cont) {\n  return Array.isArray(cont) && Array.isArray(cont[0]) && cont[0][0] && cont[0][0].trace;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Determine the position anchor property of x/y xanchor/yanchor components.\n *\n * - values < 1/3 align the low side at that fraction,\n * - values [1/3, 2/3] align the center at that fraction,\n * - values > 2/3 align the right at that fraction.\n */\n\nexports.isLeftAnchor = function isLeftAnchor(opts) {\n  return opts.xanchor === 'left' || opts.xanchor === 'auto' && opts.x <= 1 / 3;\n};\n\nexports.isCenterAnchor = function isCenterAnchor(opts) {\n  return opts.xanchor === 'center' || opts.xanchor === 'auto' && opts.x > 1 / 3 && opts.x < 2 / 3;\n};\n\nexports.isRightAnchor = function isRightAnchor(opts) {\n  return opts.xanchor === 'right' || opts.xanchor === 'auto' && opts.x >= 2 / 3;\n};\n\nexports.isTopAnchor = function isTopAnchor(opts) {\n  return opts.yanchor === 'top' || opts.yanchor === 'auto' && opts.y >= 2 / 3;\n};\n\nexports.isMiddleAnchor = function isMiddleAnchor(opts) {\n  return opts.yanchor === 'middle' || opts.yanchor === 'auto' && opts.y > 1 / 3 && opts.y < 2 / 3;\n};\n\nexports.isBottomAnchor = function isBottomAnchor(opts) {\n  return opts.yanchor === 'bottom' || opts.yanchor === 'auto' && opts.y <= 1 / 3;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar modModule = require('./mod');\n\nvar mod = modModule.mod;\nvar modHalf = modModule.modHalf;\nvar PI = Math.PI;\nvar twoPI = 2 * PI;\n\nfunction deg2rad(deg) {\n  return deg / 180 * PI;\n}\n\nfunction rad2deg(rad) {\n  return rad / PI * 180;\n}\n/**\n * is sector a full circle?\n * ... this comes up a lot in SVG path-drawing routines\n *\n * N.B. we consider all sectors that span more that 2pi 'full' circles\n *\n * @param {2-item array} aBnds : angular bounds in *radians*\n * @return {boolean}\n */\n\n\nfunction isFullCircle(aBnds) {\n  return Math.abs(aBnds[1] - aBnds[0]) > twoPI - 1e-14;\n}\n/**\n * angular delta between angle 'a' and 'b'\n * solution taken from: https://stackoverflow.com/a/2007279\n *\n * @param {number} a : first angle in *radians*\n * @param {number} b : second angle in *radians*\n * @return {number} angular delta in *radians*\n */\n\n\nfunction angleDelta(a, b) {\n  return modHalf(b - a, twoPI);\n}\n/**\n * angular distance between angle 'a' and 'b'\n *\n * @param {number} a : first angle in *radians*\n * @param {number} b : second angle in *radians*\n * @return {number} angular distance in *radians*\n */\n\n\nfunction angleDist(a, b) {\n  return Math.abs(angleDelta(a, b));\n}\n/**\n * is angle inside sector?\n *\n * @param {number} a : angle to test in *radians*\n * @param {2-item array} aBnds : sector's angular bounds in *radians*\n * @param {boolean}\n */\n\n\nfunction isAngleInsideSector(a, aBnds) {\n  if (isFullCircle(aBnds)) return true;\n  var s0, s1;\n\n  if (aBnds[0] < aBnds[1]) {\n    s0 = aBnds[0];\n    s1 = aBnds[1];\n  } else {\n    s0 = aBnds[1];\n    s1 = aBnds[0];\n  }\n\n  s0 = mod(s0, twoPI);\n  s1 = mod(s1, twoPI);\n  if (s0 > s1) s1 += twoPI;\n  var a0 = mod(a, twoPI);\n  var a1 = a0 + twoPI;\n  return a0 >= s0 && a0 <= s1 || a1 >= s0 && a1 <= s1;\n}\n/**\n * is pt (r,a) inside sector?\n *\n * @param {number} r : pt's radial coordinate\n * @param {number} a : pt's angular coordinate in *radians*\n * @param {2-item array} rBnds : sector's radial bounds\n * @param {2-item array} aBnds : sector's angular bounds in *radians*\n * @return {boolean}\n */\n\n\nfunction isPtInsideSector(r, a, rBnds, aBnds) {\n  if (!isAngleInsideSector(a, aBnds)) return false;\n  var r0, r1;\n\n  if (rBnds[0] < rBnds[1]) {\n    r0 = rBnds[0];\n    r1 = rBnds[1];\n  } else {\n    r0 = rBnds[1];\n    r1 = rBnds[0];\n  }\n\n  return r >= r0 && r <= r1;\n} // common to pathArc, pathSector and pathAnnulus\n\n\nfunction _path(r0, r1, a0, a1, cx, cy, isClosed) {\n  cx = cx || 0;\n  cy = cy || 0;\n  var isCircle = isFullCircle([a0, a1]);\n  var aStart, aMid, aEnd;\n  var rStart, rEnd;\n\n  if (isCircle) {\n    aStart = 0;\n    aMid = PI;\n    aEnd = twoPI;\n  } else {\n    if (a0 < a1) {\n      aStart = a0;\n      aEnd = a1;\n    } else {\n      aStart = a1;\n      aEnd = a0;\n    }\n  }\n\n  if (r0 < r1) {\n    rStart = r0;\n    rEnd = r1;\n  } else {\n    rStart = r1;\n    rEnd = r0;\n  } // N.B. svg coordinates here, where y increases downward\n\n\n  function pt(r, a) {\n    return [r * Math.cos(a) + cx, cy - r * Math.sin(a)];\n  }\n\n  var largeArc = Math.abs(aEnd - aStart) <= PI ? 0 : 1;\n\n  function arc(r, a, cw) {\n    return 'A' + [r, r] + ' ' + [0, largeArc, cw] + ' ' + pt(r, a);\n  }\n\n  var p;\n\n  if (isCircle) {\n    if (rStart === null) {\n      p = 'M' + pt(rEnd, aStart) + arc(rEnd, aMid, 0) + arc(rEnd, aEnd, 0) + 'Z';\n    } else {\n      p = 'M' + pt(rStart, aStart) + arc(rStart, aMid, 0) + arc(rStart, aEnd, 0) + 'Z' + 'M' + pt(rEnd, aStart) + arc(rEnd, aMid, 1) + arc(rEnd, aEnd, 1) + 'Z';\n    }\n  } else {\n    if (rStart === null) {\n      p = 'M' + pt(rEnd, aStart) + arc(rEnd, aEnd, 0);\n      if (isClosed) p += 'L0,0Z';\n    } else {\n      p = 'M' + pt(rStart, aStart) + 'L' + pt(rEnd, aStart) + arc(rEnd, aEnd, 0) + 'L' + pt(rStart, aEnd) + arc(rStart, aStart, 1) + 'Z';\n    }\n  }\n\n  return p;\n}\n/**\n * path an arc\n *\n * @param {number} r : radius\n * @param {number} a0 : first angular coordinate in *radians*\n * @param {number} a1 : second angular coordinate in *radians*\n * @param {number (optional)} cx : x coordinate of center\n * @param {number (optional)} cy : y coordinate of center\n * @return {string} svg path\n */\n\n\nfunction pathArc(r, a0, a1, cx, cy) {\n  return _path(null, r, a0, a1, cx, cy, 0);\n}\n/**\n * path a sector\n *\n * @param {number} r : radius\n * @param {number} a0 : first angular coordinate in *radians*\n * @param {number} a1 : second angular coordinate in *radians*\n * @param {number (optional)} cx : x coordinate of center\n * @param {number (optional)} cy : y coordinate of center\n * @return {string} svg path\n */\n\n\nfunction pathSector(r, a0, a1, cx, cy) {\n  return _path(null, r, a0, a1, cx, cy, 1);\n}\n/**\n * path an annulus\n *\n * @param {number} r0 : first radial coordinate\n * @param {number} r1 : second radial coordinate\n * @param {number} a0 : first angular coordinate in *radians*\n * @param {number} a1 : second angular coordinate in *radians*\n * @param {number (optional)} cx : x coordinate of center\n * @param {number (optional)} cy : y coordinate of center\n * @return {string} svg path\n */\n\n\nfunction pathAnnulus(r0, r1, a0, a1, cx, cy) {\n  return _path(r0, r1, a0, a1, cx, cy, 1);\n}\n\nmodule.exports = {\n  deg2rad: deg2rad,\n  rad2deg: rad2deg,\n  angleDelta: angleDelta,\n  angleDist: angleDist,\n  isFullCircle: isFullCircle,\n  isAngleInsideSector: isAngleInsideSector,\n  isPtInsideSector: isPtInsideSector,\n  pathArc: pathArc,\n  pathSector: pathSector,\n  pathAnnulus: pathAnnulus\n};","require(\"core-js/modules/es6.date.to-iso-string\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.string.fixed\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\n!function () {\n  var d3 = {\n    version: \"3.5.17\"\n  };\n\n  var d3_arraySlice = [].slice,\n      d3_array = function d3_array(list) {\n    return d3_arraySlice.call(list);\n  };\n\n  var d3_document = this.document;\n\n  function d3_documentElement(node) {\n    return node && (node.ownerDocument || node.document || node).documentElement;\n  }\n\n  function d3_window(node) {\n    return node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView);\n  }\n\n  if (d3_document) {\n    try {\n      d3_array(d3_document.documentElement.childNodes)[0].nodeType;\n    } catch (e) {\n      d3_array = function d3_array(list) {\n        var i = list.length,\n            array = new Array(i);\n\n        while (i--) {\n          array[i] = list[i];\n        }\n\n        return array;\n      };\n    }\n  }\n\n  if (!Date.now) Date.now = function () {\n    return +new Date();\n  };\n\n  if (d3_document) {\n    try {\n      d3_document.createElement(\"DIV\").style.setProperty(\"opacity\", 0, \"\");\n    } catch (error) {\n      var d3_element_prototype = this.Element.prototype,\n          d3_element_setAttribute = d3_element_prototype.setAttribute,\n          d3_element_setAttributeNS = d3_element_prototype.setAttributeNS,\n          d3_style_prototype = this.CSSStyleDeclaration.prototype,\n          d3_style_setProperty = d3_style_prototype.setProperty;\n\n      d3_element_prototype.setAttribute = function (name, value) {\n        d3_element_setAttribute.call(this, name, value + \"\");\n      };\n\n      d3_element_prototype.setAttributeNS = function (space, local, value) {\n        d3_element_setAttributeNS.call(this, space, local, value + \"\");\n      };\n\n      d3_style_prototype.setProperty = function (name, value, priority) {\n        d3_style_setProperty.call(this, name, value + \"\", priority);\n      };\n    }\n  }\n\n  d3.ascending = d3_ascending;\n\n  function d3_ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  d3.descending = function (a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  };\n\n  d3.min = function (array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if ((b = array[i]) != null && b >= b) {\n          a = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = array[i]) != null && a > b) a = b;\n      }\n    } else {\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null && b >= b) {\n          a = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null && a > b) a = b;\n      }\n    }\n\n    return a;\n  };\n\n  d3.max = function (array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if ((b = array[i]) != null && b >= b) {\n          a = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = array[i]) != null && b > a) a = b;\n      }\n    } else {\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null && b >= b) {\n          a = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null && b > a) a = b;\n      }\n    }\n\n    return a;\n  };\n\n  d3.extent = function (array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if ((b = array[i]) != null && b >= b) {\n          a = c = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = array[i]) != null) {\n          if (a > b) a = b;\n          if (c < b) c = b;\n        }\n      }\n    } else {\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null && b >= b) {\n          a = c = b;\n          break;\n        }\n      }\n\n      while (++i < n) {\n        if ((b = f.call(array, array[i], i)) != null) {\n          if (a > b) a = b;\n          if (c < b) c = b;\n        }\n      }\n    }\n\n    return [a, c];\n  };\n\n  function d3_number(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function d3_numeric(x) {\n    return !isNaN(x);\n  }\n\n  d3.sum = function (array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = +array[i])) s += a;\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = +f.call(array, array[i], i))) s += a;\n      }\n    }\n\n    return s;\n  };\n\n  d3.mean = function (array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(array[i]))) s += a;else --j;\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) s += a;else --j;\n      }\n    }\n\n    if (j) return s / j;\n  };\n\n  d3.quantile = function (values, p) {\n    var H = (values.length - 1) * p + 1,\n        h = Math.floor(H),\n        v = +values[h - 1],\n        e = H - h;\n    return e ? v + e * (values[h] - v) : v;\n  };\n\n  d3.median = function (array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(array[i]))) numbers.push(a);\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) numbers.push(a);\n      }\n    }\n\n    if (numbers.length) return d3.quantile(numbers.sort(d3_ascending), .5);\n  };\n\n  d3.variance = function (array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  };\n\n  d3.deviation = function () {\n    var v = d3.variance.apply(this, arguments);\n    return v ? Math.sqrt(v) : v;\n  };\n\n  function d3_bisector(compare) {\n    return {\n      left: function left(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n        }\n\n        return lo;\n      },\n      right: function right(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n        }\n\n        return lo;\n      }\n    };\n  }\n\n  var d3_bisect = d3_bisector(d3_ascending);\n  d3.bisectLeft = d3_bisect.left;\n  d3.bisect = d3.bisectRight = d3_bisect.right;\n\n  d3.bisector = function (f) {\n    return d3_bisector(f.length === 1 ? function (d, x) {\n      return d3_ascending(f(d), x);\n    } : f);\n  };\n\n  d3.shuffle = function (array, i0, i1) {\n    if ((m = arguments.length) < 3) {\n      i1 = array.length;\n      if (m < 2) i0 = 0;\n    }\n\n    var m = i1 - i0,\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0], array[m + i0] = array[i + i0], array[i + i0] = t;\n    }\n\n    return array;\n  };\n\n  d3.permute = function (array, indexes) {\n    var i = indexes.length,\n        permutes = new Array(i);\n\n    while (i--) {\n      permutes[i] = array[indexes[i]];\n    }\n\n    return permutes;\n  };\n\n  d3.pairs = function (array) {\n    var i = 0,\n        n = array.length - 1,\n        p0,\n        p1 = array[0],\n        pairs = new Array(n < 0 ? 0 : n);\n\n    while (i < n) {\n      pairs[i] = [p0 = p1, p1 = array[++i]];\n    }\n\n    return pairs;\n  };\n\n  d3.transpose = function (matrix) {\n    if (!(n = matrix.length)) return [];\n\n    for (var i = -1, m = d3.min(matrix, d3_transposeLength), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n\n    return transpose;\n  };\n\n  function d3_transposeLength(d) {\n    return d.length;\n  }\n\n  d3.zip = function () {\n    return d3.transpose(arguments);\n  };\n\n  d3.keys = function (map) {\n    var keys = [];\n\n    for (var key in map) {\n      keys.push(key);\n    }\n\n    return keys;\n  };\n\n  d3.values = function (map) {\n    var values = [];\n\n    for (var key in map) {\n      values.push(map[key]);\n    }\n\n    return values;\n  };\n\n  d3.entries = function (map) {\n    var entries = [];\n\n    for (var key in map) {\n      entries.push({\n        key: key,\n        value: map[key]\n      });\n    }\n\n    return entries;\n  };\n\n  d3.merge = function (arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) {\n      j += arrays[i].length;\n    }\n\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  };\n\n  var abs = Math.abs;\n\n  d3.range = function (start, stop, step) {\n    if (arguments.length < 3) {\n      step = 1;\n\n      if (arguments.length < 2) {\n        stop = start;\n        start = 0;\n      }\n    }\n\n    if ((stop - start) / step === Infinity) throw new Error(\"infinite range\");\n    var range = [],\n        k = d3_range_integerScale(abs(step)),\n        i = -1,\n        j;\n    start *= k, stop *= k, step *= k;\n    if (step < 0) while ((j = start + step * ++i) > stop) {\n      range.push(j / k);\n    } else while ((j = start + step * ++i) < stop) {\n      range.push(j / k);\n    }\n    return range;\n  };\n\n  function d3_range_integerScale(x) {\n    var k = 1;\n\n    while (x * k % 1) {\n      k *= 10;\n    }\n\n    return k;\n  }\n\n  function d3_class(ctor, properties) {\n    for (var key in properties) {\n      Object.defineProperty(ctor.prototype, key, {\n        value: properties[key],\n        enumerable: false\n      });\n    }\n  }\n\n  d3.map = function (object, f) {\n    var map = new d3_Map();\n\n    if (object instanceof d3_Map) {\n      object.forEach(function (key, value) {\n        map.set(key, value);\n      });\n    } else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (arguments.length === 1) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f.call(object, o = object[i], i), o);\n      }\n    } else {\n      for (var key in object) {\n        map.set(key, object[key]);\n      }\n    }\n\n    return map;\n  };\n\n  function d3_Map() {\n    this._ = Object.create(null);\n  }\n\n  var d3_map_proto = \"__proto__\",\n      d3_map_zero = \"\\x00\";\n  d3_class(d3_Map, {\n    has: d3_map_has,\n    get: function get(key) {\n      return this._[d3_map_escape(key)];\n    },\n    set: function set(key, value) {\n      return this._[d3_map_escape(key)] = value;\n    },\n    remove: d3_map_remove,\n    keys: d3_map_keys,\n    values: function values() {\n      var values = [];\n\n      for (var key in this._) {\n        values.push(this._[key]);\n      }\n\n      return values;\n    },\n    entries: function entries() {\n      var entries = [];\n\n      for (var key in this._) {\n        entries.push({\n          key: d3_map_unescape(key),\n          value: this._[key]\n        });\n      }\n\n      return entries;\n    },\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function forEach(f) {\n      for (var key in this._) {\n        f.call(this, d3_map_unescape(key), this._[key]);\n      }\n    }\n  });\n\n  function d3_map_escape(key) {\n    return (key += \"\") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key;\n  }\n\n  function d3_map_unescape(key) {\n    return (key += \"\")[0] === d3_map_zero ? key.slice(1) : key;\n  }\n\n  function d3_map_has(key) {\n    return d3_map_escape(key) in this._;\n  }\n\n  function d3_map_remove(key) {\n    return (key = d3_map_escape(key)) in this._ && delete this._[key];\n  }\n\n  function d3_map_keys() {\n    var keys = [];\n\n    for (var key in this._) {\n      keys.push(d3_map_unescape(key));\n    }\n\n    return keys;\n  }\n\n  function d3_map_size() {\n    var size = 0;\n\n    for (var key in this._) {\n      ++size;\n    }\n\n    return size;\n  }\n\n  function d3_map_empty() {\n    for (var key in this._) {\n      return false;\n    }\n\n    return true;\n  }\n\n  d3.nest = function () {\n    var nest = {},\n        keys = [],\n        sortKeys = [],\n        sortValues,\n        rollup;\n\n    function map(mapType, array, depth) {\n      if (depth >= keys.length) return rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;\n      var i = -1,\n          n = array.length,\n          key = keys[depth++],\n          keyValue,\n          object,\n          setter,\n          valuesByKey = new d3_Map(),\n          values;\n\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(object = array[i]))) {\n          values.push(object);\n        } else {\n          valuesByKey.set(keyValue, [object]);\n        }\n      }\n\n      if (mapType) {\n        object = mapType();\n\n        setter = function setter(keyValue, values) {\n          object.set(keyValue, map(mapType, values, depth));\n        };\n      } else {\n        object = {};\n\n        setter = function setter(keyValue, values) {\n          object[keyValue] = map(mapType, values, depth);\n        };\n      }\n\n      valuesByKey.forEach(setter);\n      return object;\n    }\n\n    function entries(map, depth) {\n      if (depth >= keys.length) return map;\n      var array = [],\n          sortKey = sortKeys[depth++];\n      map.forEach(function (key, keyMap) {\n        array.push({\n          key: key,\n          values: entries(keyMap, depth)\n        });\n      });\n      return sortKey ? array.sort(function (a, b) {\n        return sortKey(a.key, b.key);\n      }) : array;\n    }\n\n    nest.map = function (array, mapType) {\n      return map(mapType, array, 0);\n    };\n\n    nest.entries = function (array) {\n      return entries(map(d3.map, array, 0), 0);\n    };\n\n    nest.key = function (d) {\n      keys.push(d);\n      return nest;\n    };\n\n    nest.sortKeys = function (order) {\n      sortKeys[keys.length - 1] = order;\n      return nest;\n    };\n\n    nest.sortValues = function (order) {\n      sortValues = order;\n      return nest;\n    };\n\n    nest.rollup = function (f) {\n      rollup = f;\n      return nest;\n    };\n\n    return nest;\n  };\n\n  d3.set = function (array) {\n    var set = new d3_Set();\n    if (array) for (var i = 0, n = array.length; i < n; ++i) {\n      set.add(array[i]);\n    }\n    return set;\n  };\n\n  function d3_Set() {\n    this._ = Object.create(null);\n  }\n\n  d3_class(d3_Set, {\n    has: d3_map_has,\n    add: function add(key) {\n      this._[d3_map_escape(key += \"\")] = true;\n      return key;\n    },\n    remove: d3_map_remove,\n    values: d3_map_keys,\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function forEach(f) {\n      for (var key in this._) {\n        f.call(this, d3_map_unescape(key));\n      }\n    }\n  });\n  d3.behavior = {};\n\n  function d3_identity(d) {\n    return d;\n  }\n\n  d3.rebind = function (target, source) {\n    var i = 1,\n        n = arguments.length,\n        method;\n\n    while (++i < n) {\n      target[method = arguments[i]] = d3_rebind(target, source, source[method]);\n    }\n\n    return target;\n  };\n\n  function d3_rebind(target, source, method) {\n    return function () {\n      var value = method.apply(source, arguments);\n      return value === source ? target : value;\n    };\n  }\n\n  function d3_vendorSymbol(object, name) {\n    if (name in object) return name;\n    name = name.charAt(0).toUpperCase() + name.slice(1);\n\n    for (var i = 0, n = d3_vendorPrefixes.length; i < n; ++i) {\n      var prefixName = d3_vendorPrefixes[i] + name;\n      if (prefixName in object) return prefixName;\n    }\n  }\n\n  var d3_vendorPrefixes = [\"webkit\", \"ms\", \"moz\", \"Moz\", \"o\", \"O\"];\n\n  function d3_noop() {}\n\n  d3.dispatch = function () {\n    var dispatch = new d3_dispatch(),\n        i = -1,\n        n = arguments.length;\n\n    while (++i < n) {\n      dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    }\n\n    return dispatch;\n  };\n\n  function d3_dispatch() {}\n\n  d3_dispatch.prototype.on = function (type, listener) {\n    var i = type.indexOf(\".\"),\n        name = \"\";\n\n    if (i >= 0) {\n      name = type.slice(i + 1);\n      type = type.slice(0, i);\n    }\n\n    if (type) return arguments.length < 2 ? this[type].on(name) : this[type].on(name, listener);\n\n    if (arguments.length === 2) {\n      if (listener == null) for (type in this) {\n        if (this.hasOwnProperty(type)) this[type].on(name, null);\n      }\n      return this;\n    }\n  };\n\n  function d3_dispatch_event(dispatch) {\n    var listeners = [],\n        listenerByName = new d3_Map();\n\n    function event() {\n      var z = listeners,\n          i = -1,\n          n = z.length,\n          l;\n\n      while (++i < n) {\n        if (l = z[i].on) l.apply(this, arguments);\n      }\n\n      return dispatch;\n    }\n\n    event.on = function (name, listener) {\n      var l = listenerByName.get(name),\n          i;\n      if (arguments.length < 2) return l && l.on;\n\n      if (l) {\n        l.on = null;\n        listeners = listeners.slice(0, i = listeners.indexOf(l)).concat(listeners.slice(i + 1));\n        listenerByName.remove(name);\n      }\n\n      if (listener) listeners.push(listenerByName.set(name, {\n        on: listener\n      }));\n      return dispatch;\n    };\n\n    return event;\n  }\n\n  d3.event = null;\n\n  function d3_eventPreventDefault() {\n    d3.event.preventDefault();\n  }\n\n  function d3_eventSource() {\n    var e = d3.event,\n        s;\n\n    while (s = e.sourceEvent) {\n      e = s;\n    }\n\n    return e;\n  }\n\n  function d3_eventDispatch(target) {\n    var dispatch = new d3_dispatch(),\n        i = 0,\n        n = arguments.length;\n\n    while (++i < n) {\n      dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    }\n\n    dispatch.of = function (thiz, argumentz) {\n      return function (e1) {\n        try {\n          var e0 = e1.sourceEvent = d3.event;\n          e1.target = target;\n          d3.event = e1;\n          dispatch[e1.type].apply(thiz, argumentz);\n        } finally {\n          d3.event = e0;\n        }\n      };\n    };\n\n    return dispatch;\n  }\n\n  d3.requote = function (s) {\n    return s.replace(d3_requote_re, \"\\\\$&\");\n  };\n\n  var d3_requote_re = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  var d3_subclass = {}.__proto__ ? function (object, prototype) {\n    object.__proto__ = prototype;\n  } : function (object, prototype) {\n    for (var property in prototype) {\n      object[property] = prototype[property];\n    }\n  };\n\n  function d3_selection(groups) {\n    d3_subclass(groups, d3_selectionPrototype);\n    return groups;\n  }\n\n  var d3_select = function d3_select(s, n) {\n    return n.querySelector(s);\n  },\n      d3_selectAll = function d3_selectAll(s, n) {\n    return n.querySelectorAll(s);\n  },\n      _d3_selectMatches = function d3_selectMatches(n, s) {\n    var d3_selectMatcher = n.matches || n[d3_vendorSymbol(n, \"matchesSelector\")];\n\n    _d3_selectMatches = function d3_selectMatches(n, s) {\n      return d3_selectMatcher.call(n, s);\n    };\n\n    return _d3_selectMatches(n, s);\n  };\n\n  if (typeof Sizzle === \"function\") {\n    d3_select = function d3_select(s, n) {\n      return Sizzle(s, n)[0] || null;\n    };\n\n    d3_selectAll = Sizzle;\n    _d3_selectMatches = Sizzle.matchesSelector;\n  }\n\n  d3.selection = function () {\n    return d3.select(d3_document.documentElement);\n  };\n\n  var d3_selectionPrototype = d3.selection.prototype = [];\n\n  d3_selectionPrototype.select = function (selector) {\n    var subgroups = [],\n        subgroup,\n        subnode,\n        group,\n        node;\n    selector = d3_selection_selector(selector);\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n\n      for (var i = -1, n = group.length; ++i < n;) {\n        if (node = group[i]) {\n          subgroup.push(subnode = selector.call(node, node.__data__, i, j));\n          if (subnode && \"__data__\" in node) subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n\n    return d3_selection(subgroups);\n  };\n\n  function d3_selection_selector(selector) {\n    return typeof selector === \"function\" ? selector : function () {\n      return d3_select(selector, this);\n    };\n  }\n\n  d3_selectionPrototype.selectAll = function (selector) {\n    var subgroups = [],\n        subgroup,\n        node;\n    selector = d3_selection_selectorAll(selector);\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n;) {\n        if (node = group[i]) {\n          subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i, j)));\n          subgroup.parentNode = node;\n        }\n      }\n    }\n\n    return d3_selection(subgroups);\n  };\n\n  function d3_selection_selectorAll(selector) {\n    return typeof selector === \"function\" ? selector : function () {\n      return d3_selectAll(selector, this);\n    };\n  }\n\n  var d3_nsXhtml = \"http://www.w3.org/1999/xhtml\";\n  var d3_nsPrefix = {\n    svg: \"http://www.w3.org/2000/svg\",\n    xhtml: d3_nsXhtml,\n    xlink: \"http://www.w3.org/1999/xlink\",\n    xml: \"http://www.w3.org/XML/1998/namespace\",\n    xmlns: \"http://www.w3.org/2000/xmlns/\"\n  };\n  d3.ns = {\n    prefix: d3_nsPrefix,\n    qualify: function qualify(name) {\n      var i = name.indexOf(\":\"),\n          prefix = name;\n      if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n      return d3_nsPrefix.hasOwnProperty(prefix) ? {\n        space: d3_nsPrefix[prefix],\n        local: name\n      } : name;\n    }\n  };\n\n  d3_selectionPrototype.attr = function (name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node();\n        name = d3.ns.qualify(name);\n        return name.local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name);\n      }\n\n      for (value in name) {\n        this.each(d3_selection_attr(value, name[value]));\n      }\n\n      return this;\n    }\n\n    return this.each(d3_selection_attr(name, value));\n  };\n\n  function d3_selection_attr(name, value) {\n    name = d3.ns.qualify(name);\n\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n\n    function attrConstant() {\n      this.setAttribute(name, value);\n    }\n\n    function attrConstantNS() {\n      this.setAttributeNS(name.space, name.local, value);\n    }\n\n    function attrFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttribute(name);else this.setAttribute(name, x);\n    }\n\n    function attrFunctionNS() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttributeNS(name.space, name.local);else this.setAttributeNS(name.space, name.local, x);\n    }\n\n    return value == null ? name.local ? attrNullNS : attrNull : typeof value === \"function\" ? name.local ? attrFunctionNS : attrFunction : name.local ? attrConstantNS : attrConstant;\n  }\n\n  function d3_collapse(s) {\n    return s.trim().replace(/\\s+/g, \" \");\n  }\n\n  d3_selectionPrototype.classed = function (name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node(),\n            n = (name = d3_selection_classes(name)).length,\n            i = -1;\n\n        if (value = node.classList) {\n          while (++i < n) {\n            if (!value.contains(name[i])) return false;\n          }\n        } else {\n          value = node.getAttribute(\"class\");\n\n          while (++i < n) {\n            if (!d3_selection_classedRe(name[i]).test(value)) return false;\n          }\n        }\n\n        return true;\n      }\n\n      for (value in name) {\n        this.each(d3_selection_classed(value, name[value]));\n      }\n\n      return this;\n    }\n\n    return this.each(d3_selection_classed(name, value));\n  };\n\n  function d3_selection_classedRe(name) {\n    return new RegExp(\"(?:^|\\\\s+)\" + d3.requote(name) + \"(?:\\\\s+|$)\", \"g\");\n  }\n\n  function d3_selection_classes(name) {\n    return (name + \"\").trim().split(/^|\\s+/);\n  }\n\n  function d3_selection_classed(name, value) {\n    name = d3_selection_classes(name).map(d3_selection_classedName);\n    var n = name.length;\n\n    function classedConstant() {\n      var i = -1;\n\n      while (++i < n) {\n        name[i](this, value);\n      }\n    }\n\n    function classedFunction() {\n      var i = -1,\n          x = value.apply(this, arguments);\n\n      while (++i < n) {\n        name[i](this, x);\n      }\n    }\n\n    return typeof value === \"function\" ? classedFunction : classedConstant;\n  }\n\n  function d3_selection_classedName(name) {\n    var re = d3_selection_classedRe(name);\n    return function (node, value) {\n      if (c = node.classList) return value ? c.add(name) : c.remove(name);\n      var c = node.getAttribute(\"class\") || \"\";\n\n      if (value) {\n        re.lastIndex = 0;\n        if (!re.test(c)) node.setAttribute(\"class\", d3_collapse(c + \" \" + name));\n      } else {\n        node.setAttribute(\"class\", d3_collapse(c.replace(re, \" \")));\n      }\n    };\n  }\n\n  d3_selectionPrototype.style = function (name, value, priority) {\n    var n = arguments.length;\n\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n\n        for (priority in name) {\n          this.each(d3_selection_style(priority, name[priority], value));\n        }\n\n        return this;\n      }\n\n      if (n < 2) {\n        var node = this.node();\n        return d3_window(node).getComputedStyle(node, null).getPropertyValue(name);\n      }\n\n      priority = \"\";\n    }\n\n    return this.each(d3_selection_style(name, value, priority));\n  };\n\n  function d3_selection_style(name, value, priority) {\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n\n    function styleConstant() {\n      this.style.setProperty(name, value, priority);\n    }\n\n    function styleFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.style.removeProperty(name);else this.style.setProperty(name, x, priority);\n    }\n\n    return value == null ? styleNull : typeof value === \"function\" ? styleFunction : styleConstant;\n  }\n\n  d3_selectionPrototype.property = function (name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") return this.node()[name];\n\n      for (value in name) {\n        this.each(d3_selection_property(value, name[value]));\n      }\n\n      return this;\n    }\n\n    return this.each(d3_selection_property(name, value));\n  };\n\n  function d3_selection_property(name, value) {\n    function propertyNull() {\n      delete this[name];\n    }\n\n    function propertyConstant() {\n      this[name] = value;\n    }\n\n    function propertyFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) delete this[name];else this[name] = x;\n    }\n\n    return value == null ? propertyNull : typeof value === \"function\" ? propertyFunction : propertyConstant;\n  }\n\n  d3_selectionPrototype.text = function (value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function () {\n      var v = value.apply(this, arguments);\n      this.textContent = v == null ? \"\" : v;\n    } : value == null ? function () {\n      this.textContent = \"\";\n    } : function () {\n      this.textContent = value;\n    }) : this.node().textContent;\n  };\n\n  d3_selectionPrototype.html = function (value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function () {\n      var v = value.apply(this, arguments);\n      this.innerHTML = v == null ? \"\" : v;\n    } : value == null ? function () {\n      this.innerHTML = \"\";\n    } : function () {\n      this.innerHTML = value;\n    }) : this.node().innerHTML;\n  };\n\n  d3_selectionPrototype.append = function (name) {\n    name = d3_selection_creator(name);\n    return this.select(function () {\n      return this.appendChild(name.apply(this, arguments));\n    });\n  };\n\n  function d3_selection_creator(name) {\n    function create() {\n      var document = this.ownerDocument,\n          namespace = this.namespaceURI;\n      return namespace === d3_nsXhtml && document.documentElement.namespaceURI === d3_nsXhtml ? document.createElement(name) : document.createElementNS(namespace, name);\n    }\n\n    function createNS() {\n      return this.ownerDocument.createElementNS(name.space, name.local);\n    }\n\n    return typeof name === \"function\" ? name : (name = d3.ns.qualify(name)).local ? createNS : create;\n  }\n\n  d3_selectionPrototype.insert = function (name, before) {\n    name = d3_selection_creator(name);\n    before = d3_selection_selector(before);\n    return this.select(function () {\n      return this.insertBefore(name.apply(this, arguments), before.apply(this, arguments) || null);\n    });\n  };\n\n  d3_selectionPrototype.remove = function () {\n    return this.each(d3_selectionRemove);\n  };\n\n  function d3_selectionRemove() {\n    var parent = this.parentNode;\n    if (parent) parent.removeChild(this);\n  }\n\n  d3_selectionPrototype.data = function (value, key) {\n    var i = -1,\n        n = this.length,\n        group,\n        node;\n\n    if (!arguments.length) {\n      value = new Array(n = (group = this[0]).length);\n\n      while (++i < n) {\n        if (node = group[i]) {\n          value[i] = node.__data__;\n        }\n      }\n\n      return value;\n    }\n\n    function bind(group, groupData) {\n      var i,\n          n = group.length,\n          m = groupData.length,\n          n0 = Math.min(n, m),\n          updateNodes = new Array(m),\n          enterNodes = new Array(m),\n          exitNodes = new Array(n),\n          node,\n          nodeData;\n\n      if (key) {\n        var nodeByKeyValue = new d3_Map(),\n            keyValues = new Array(n),\n            keyValue;\n\n        for (i = -1; ++i < n;) {\n          if (node = group[i]) {\n            if (nodeByKeyValue.has(keyValue = key.call(node, node.__data__, i))) {\n              exitNodes[i] = node;\n            } else {\n              nodeByKeyValue.set(keyValue, node);\n            }\n\n            keyValues[i] = keyValue;\n          }\n        }\n\n        for (i = -1; ++i < m;) {\n          if (!(node = nodeByKeyValue.get(keyValue = key.call(groupData, nodeData = groupData[i], i)))) {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          } else if (node !== true) {\n            updateNodes[i] = node;\n            node.__data__ = nodeData;\n          }\n\n          nodeByKeyValue.set(keyValue, true);\n        }\n\n        for (i = -1; ++i < n;) {\n          if (i in keyValues && nodeByKeyValue.get(keyValues[i]) !== true) {\n            exitNodes[i] = group[i];\n          }\n        }\n      } else {\n        for (i = -1; ++i < n0;) {\n          node = group[i];\n          nodeData = groupData[i];\n\n          if (node) {\n            node.__data__ = nodeData;\n            updateNodes[i] = node;\n          } else {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          }\n        }\n\n        for (; i < m; ++i) {\n          enterNodes[i] = d3_selection_dataNode(groupData[i]);\n        }\n\n        for (; i < n; ++i) {\n          exitNodes[i] = group[i];\n        }\n      }\n\n      enterNodes.update = updateNodes;\n      enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode;\n      enter.push(enterNodes);\n      update.push(updateNodes);\n      exit.push(exitNodes);\n    }\n\n    var enter = d3_selection_enter([]),\n        update = d3_selection([]),\n        exit = d3_selection([]);\n\n    if (typeof value === \"function\") {\n      while (++i < n) {\n        bind(group = this[i], value.call(group, group.parentNode.__data__, i));\n      }\n    } else {\n      while (++i < n) {\n        bind(group = this[i], value);\n      }\n    }\n\n    update.enter = function () {\n      return enter;\n    };\n\n    update.exit = function () {\n      return exit;\n    };\n\n    return update;\n  };\n\n  function d3_selection_dataNode(data) {\n    return {\n      __data__: data\n    };\n  }\n\n  d3_selectionPrototype.datum = function (value) {\n    return arguments.length ? this.property(\"__data__\", value) : this.property(\"__data__\");\n  };\n\n  d3_selectionPrototype.filter = function (filter) {\n    var subgroups = [],\n        subgroup,\n        group,\n        node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n\n      for (var i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n\n    return d3_selection(subgroups);\n  };\n\n  function d3_selection_filter(selector) {\n    return function () {\n      return _d3_selectMatches(this, selector);\n    };\n  }\n\n  d3_selectionPrototype.order = function () {\n    for (var j = -1, m = this.length; ++j < m;) {\n      for (var group = this[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n        if (node = group[i]) {\n          if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n          next = node;\n        }\n      }\n    }\n\n    return this;\n  };\n\n  d3_selectionPrototype.sort = function (comparator) {\n    comparator = d3_selection_sortComparator.apply(this, arguments);\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      this[j].sort(comparator);\n    }\n\n    return this.order();\n  };\n\n  function d3_selection_sortComparator(comparator) {\n    if (!arguments.length) comparator = d3_ascending;\n    return function (a, b) {\n      return a && b ? comparator(a.__data__, b.__data__) : !a - !b;\n    };\n  }\n\n  d3_selectionPrototype.each = function (callback) {\n    return d3_selection_each(this, function (node, i, j) {\n      callback.call(node, node.__data__, i, j);\n    });\n  };\n\n  function d3_selection_each(groups, callback) {\n    for (var j = 0, m = groups.length; j < m; j++) {\n      for (var group = groups[j], i = 0, n = group.length, node; i < n; i++) {\n        if (node = group[i]) callback(node, i, j);\n      }\n    }\n\n    return groups;\n  }\n\n  d3_selectionPrototype.call = function (callback) {\n    var args = d3_array(arguments);\n    callback.apply(args[0] = this, args);\n    return this;\n  };\n\n  d3_selectionPrototype.empty = function () {\n    return !this.node();\n  };\n\n  d3_selectionPrototype.node = function () {\n    for (var j = 0, m = this.length; j < m; j++) {\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        var node = group[i];\n        if (node) return node;\n      }\n    }\n\n    return null;\n  };\n\n  d3_selectionPrototype.size = function () {\n    var n = 0;\n    d3_selection_each(this, function () {\n      ++n;\n    });\n    return n;\n  };\n\n  function d3_selection_enter(selection) {\n    d3_subclass(selection, d3_selection_enterPrototype);\n    return selection;\n  }\n\n  var d3_selection_enterPrototype = [];\n  d3.selection.enter = d3_selection_enter;\n  d3.selection.enter.prototype = d3_selection_enterPrototype;\n  d3_selection_enterPrototype.append = d3_selectionPrototype.append;\n  d3_selection_enterPrototype.empty = d3_selectionPrototype.empty;\n  d3_selection_enterPrototype.node = d3_selectionPrototype.node;\n  d3_selection_enterPrototype.call = d3_selectionPrototype.call;\n  d3_selection_enterPrototype.size = d3_selectionPrototype.size;\n\n  d3_selection_enterPrototype.select = function (selector) {\n    var subgroups = [],\n        subgroup,\n        subnode,\n        upgroup,\n        group,\n        node;\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      upgroup = (group = this[j]).update;\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = group.parentNode;\n\n      for (var i = -1, n = group.length; ++i < n;) {\n        if (node = group[i]) {\n          subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i, j));\n          subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n\n    return d3_selection(subgroups);\n  };\n\n  d3_selection_enterPrototype.insert = function (name, before) {\n    if (arguments.length < 2) before = d3_selection_enterInsertBefore(this);\n    return d3_selectionPrototype.insert.call(this, name, before);\n  };\n\n  function d3_selection_enterInsertBefore(enter) {\n    var i0, j0;\n    return function (d, i, j) {\n      var group = enter[j].update,\n          n = group.length,\n          node;\n      if (j != j0) j0 = j, i0 = 0;\n      if (i >= i0) i0 = i + 1;\n\n      while (!(node = group[i0]) && ++i0 < n) {\n        ;\n      }\n\n      return node;\n    };\n  }\n\n  d3.select = function (node) {\n    var group;\n\n    if (typeof node === \"string\") {\n      group = [d3_select(node, d3_document)];\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = [node];\n      group.parentNode = d3_documentElement(node);\n    }\n\n    return d3_selection([group]);\n  };\n\n  d3.selectAll = function (nodes) {\n    var group;\n\n    if (typeof nodes === \"string\") {\n      group = d3_array(d3_selectAll(nodes, d3_document));\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = d3_array(nodes);\n      group.parentNode = null;\n    }\n\n    return d3_selection([group]);\n  };\n\n  d3_selectionPrototype.on = function (type, listener, capture) {\n    var n = arguments.length;\n\n    if (n < 3) {\n      if (typeof type !== \"string\") {\n        if (n < 2) listener = false;\n\n        for (capture in type) {\n          this.each(d3_selection_on(capture, type[capture], listener));\n        }\n\n        return this;\n      }\n\n      if (n < 2) return (n = this.node()[\"__on\" + type]) && n._;\n      capture = false;\n    }\n\n    return this.each(d3_selection_on(type, listener, capture));\n  };\n\n  function d3_selection_on(type, listener, capture) {\n    var name = \"__on\" + type,\n        i = type.indexOf(\".\"),\n        wrap = d3_selection_onListener;\n    if (i > 0) type = type.slice(0, i);\n    var filter = d3_selection_onFilters.get(type);\n    if (filter) type = filter, wrap = d3_selection_onFilter;\n\n    function onRemove() {\n      var l = this[name];\n\n      if (l) {\n        this.removeEventListener(type, l, l.$);\n        delete this[name];\n      }\n    }\n\n    function onAdd() {\n      var l = wrap(listener, d3_array(arguments));\n      onRemove.call(this);\n      this.addEventListener(type, this[name] = l, l.$ = capture);\n      l._ = listener;\n    }\n\n    function removeAll() {\n      var re = new RegExp(\"^__on([^.]+)\" + d3.requote(type) + \"$\"),\n          match;\n\n      for (var name in this) {\n        if (match = name.match(re)) {\n          var l = this[name];\n          this.removeEventListener(match[1], l, l.$);\n          delete this[name];\n        }\n      }\n    }\n\n    return i ? listener ? onAdd : onRemove : listener ? d3_noop : removeAll;\n  }\n\n  var d3_selection_onFilters = d3.map({\n    mouseenter: \"mouseover\",\n    mouseleave: \"mouseout\"\n  });\n\n  if (d3_document) {\n    d3_selection_onFilters.forEach(function (k) {\n      if (\"on\" + k in d3_document) d3_selection_onFilters.remove(k);\n    });\n  }\n\n  function d3_selection_onListener(listener, argumentz) {\n    return function (e) {\n      var o = d3.event;\n      d3.event = e;\n      argumentz[0] = this.__data__;\n\n      try {\n        listener.apply(this, argumentz);\n      } finally {\n        d3.event = o;\n      }\n    };\n  }\n\n  function d3_selection_onFilter(listener, argumentz) {\n    var l = d3_selection_onListener(listener, argumentz);\n    return function (e) {\n      var target = this,\n          related = e.relatedTarget;\n\n      if (!related || related !== target && !(related.compareDocumentPosition(target) & 8)) {\n        l.call(target, e);\n      }\n    };\n  }\n\n  var d3_event_dragSelect,\n      d3_event_dragId = 0;\n\n  function d3_event_dragSuppress(node) {\n    var name = \".dragsuppress-\" + ++d3_event_dragId,\n        click = \"click\" + name,\n        w = d3.select(d3_window(node)).on(\"touchmove\" + name, d3_eventPreventDefault).on(\"dragstart\" + name, d3_eventPreventDefault).on(\"selectstart\" + name, d3_eventPreventDefault);\n\n    if (d3_event_dragSelect == null) {\n      d3_event_dragSelect = \"onselectstart\" in node ? false : d3_vendorSymbol(node.style, \"userSelect\");\n    }\n\n    if (d3_event_dragSelect) {\n      var style = d3_documentElement(node).style,\n          select = style[d3_event_dragSelect];\n      style[d3_event_dragSelect] = \"none\";\n    }\n\n    return function (suppressClick) {\n      w.on(name, null);\n      if (d3_event_dragSelect) style[d3_event_dragSelect] = select;\n\n      if (suppressClick) {\n        var off = function off() {\n          w.on(click, null);\n        };\n\n        w.on(click, function () {\n          d3_eventPreventDefault();\n          off();\n        }, true);\n        setTimeout(off, 0);\n      }\n    };\n  }\n\n  d3.mouse = function (container) {\n    return d3_mousePoint(container, d3_eventSource());\n  };\n\n  var d3_mouse_bug44083 = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;\n\n  function d3_mousePoint(container, e) {\n    if (e.changedTouches) e = e.changedTouches[0];\n    var svg = container.ownerSVGElement || container;\n\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n\n      if (d3_mouse_bug44083 < 0) {\n        var window = d3_window(container);\n\n        if (window.scrollX || window.scrollY) {\n          svg = d3.select(\"body\").append(\"svg\").style({\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            margin: 0,\n            padding: 0,\n            border: \"none\"\n          }, \"important\");\n          var ctm = svg[0][0].getScreenCTM();\n          d3_mouse_bug44083 = !(ctm.f || ctm.e);\n          svg.remove();\n        }\n      }\n\n      if (d3_mouse_bug44083) point.x = e.pageX, point.y = e.pageY;else point.x = e.clientX, point.y = e.clientY;\n      point = point.matrixTransform(container.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n\n    var rect = container.getBoundingClientRect();\n    return [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop];\n  }\n\n  d3.touch = function (container, touches, identifier) {\n    if (arguments.length < 3) identifier = touches, touches = d3_eventSource().changedTouches;\n    if (touches) for (var i = 0, n = touches.length, touch; i < n; ++i) {\n      if ((touch = touches[i]).identifier === identifier) {\n        return d3_mousePoint(container, touch);\n      }\n    }\n  };\n\n  d3.behavior.drag = function () {\n    var event = d3_eventDispatch(drag, \"drag\", \"dragstart\", \"dragend\"),\n        origin = null,\n        mousedown = dragstart(d3_noop, d3.mouse, d3_window, \"mousemove\", \"mouseup\"),\n        touchstart = dragstart(d3_behavior_dragTouchId, d3.touch, d3_identity, \"touchmove\", \"touchend\");\n\n    function drag() {\n      this.on(\"mousedown.drag\", mousedown).on(\"touchstart.drag\", touchstart);\n    }\n\n    function dragstart(id, position, subject, move, end) {\n      return function () {\n        var that = this,\n            target = d3.event.target.correspondingElement || d3.event.target,\n            parent = that.parentNode,\n            dispatch = event.of(that, arguments),\n            dragged = 0,\n            dragId = id(),\n            dragName = \".drag\" + (dragId == null ? \"\" : \"-\" + dragId),\n            dragOffset,\n            dragSubject = d3.select(subject(target)).on(move + dragName, moved).on(end + dragName, ended),\n            dragRestore = d3_event_dragSuppress(target),\n            position0 = position(parent, dragId);\n\n        if (origin) {\n          dragOffset = origin.apply(that, arguments);\n          dragOffset = [dragOffset.x - position0[0], dragOffset.y - position0[1]];\n        } else {\n          dragOffset = [0, 0];\n        }\n\n        dispatch({\n          type: \"dragstart\"\n        });\n\n        function moved() {\n          var position1 = position(parent, dragId),\n              dx,\n              dy;\n          if (!position1) return;\n          dx = position1[0] - position0[0];\n          dy = position1[1] - position0[1];\n          dragged |= dx | dy;\n          position0 = position1;\n          dispatch({\n            type: \"drag\",\n            x: position1[0] + dragOffset[0],\n            y: position1[1] + dragOffset[1],\n            dx: dx,\n            dy: dy\n          });\n        }\n\n        function ended() {\n          if (!position(parent, dragId)) return;\n          dragSubject.on(move + dragName, null).on(end + dragName, null);\n          dragRestore(dragged);\n          dispatch({\n            type: \"dragend\"\n          });\n        }\n      };\n    }\n\n    drag.origin = function (x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return drag;\n    };\n\n    return d3.rebind(drag, event, \"on\");\n  };\n\n  function d3_behavior_dragTouchId() {\n    return d3.event.changedTouches[0].identifier;\n  }\n\n  d3.touches = function (container, touches) {\n    if (arguments.length < 2) touches = d3_eventSource().touches;\n    return touches ? d3_array(touches).map(function (touch) {\n      var point = d3_mousePoint(container, touch);\n      point.identifier = touch.identifier;\n      return point;\n    }) : [];\n  };\n\n  var  = 1e-6,\n      2 =  * ,\n       = Math.PI,\n       = 2 * ,\n       =  - ,\n      half =  / 2,\n      d3_radians =  / 180,\n      d3_degrees = 180 / ;\n\n  function d3_sgn(x) {\n    return x > 0 ? 1 : x < 0 ? -1 : 0;\n  }\n\n  function d3_cross2d(a, b, c) {\n    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n  }\n\n  function d3_acos(x) {\n    return x > 1 ? 0 : x < -1 ?  : Math.acos(x);\n  }\n\n  function d3_asin(x) {\n    return x > 1 ? half : x < -1 ? -half : Math.asin(x);\n  }\n\n  function d3_sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n\n  function d3_cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n\n  function d3_tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n\n  function d3_haversin(x) {\n    return (x = Math.sin(x / 2)) * x;\n  }\n\n  var  = Math.SQRT2,\n      2 = 2,\n      4 = 4;\n\n  d3.interpolateZoom = function (p0, p1) {\n    var ux0 = p0[0],\n        uy0 = p0[1],\n        w0 = p0[2],\n        ux1 = p1[0],\n        uy1 = p1[1],\n        w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    if (d2 < 2) {\n      S = Math.log(w1 / w0) / ;\n\n      i = function i(t) {\n        return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp( * t * S)];\n      };\n    } else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + 4 * d2) / (2 * w0 * 2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - 4 * d2) / (2 * w1 * 2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / ;\n\n      i = function i(t) {\n        var s = t * S,\n            coshr0 = d3_cosh(r0),\n            u = w0 / (2 * d1) * (coshr0 * d3_tanh( * s + r0) - d3_sinh(r0));\n        return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh( * s + r0)];\n      };\n    }\n\n    i.duration = S * 1e3;\n    return i;\n  };\n\n  d3.behavior.zoom = function () {\n    var view = {\n      x: 0,\n      y: 0,\n      k: 1\n    },\n        translate0,\n        center0,\n        center,\n        size = [960, 500],\n        scaleExtent = d3_behavior_zoomInfinity,\n        duration = 250,\n        zooming = 0,\n        mousedown = \"mousedown.zoom\",\n        mousemove = \"mousemove.zoom\",\n        mouseup = \"mouseup.zoom\",\n        mousewheelTimer,\n        touchstart = \"touchstart.zoom\",\n        touchtime,\n        event = d3_eventDispatch(zoom, \"zoomstart\", \"zoom\", \"zoomend\"),\n        x0,\n        x1,\n        y0,\n        y1;\n\n    if (!d3_behavior_zoomWheel) {\n      d3_behavior_zoomWheel = \"onwheel\" in d3_document ? (d3_behavior_zoomDelta = function d3_behavior_zoomDelta() {\n        return -d3.event.deltaY * (d3.event.deltaMode ? 120 : 1);\n      }, \"wheel\") : \"onmousewheel\" in d3_document ? (d3_behavior_zoomDelta = function d3_behavior_zoomDelta() {\n        return d3.event.wheelDelta;\n      }, \"mousewheel\") : (d3_behavior_zoomDelta = function d3_behavior_zoomDelta() {\n        return -d3.event.detail;\n      }, \"MozMousePixelScroll\");\n    }\n\n    function zoom(g) {\n      g.on(mousedown, mousedowned).on(d3_behavior_zoomWheel + \".zoom\", mousewheeled).on(\"dblclick.zoom\", dblclicked).on(touchstart, touchstarted);\n    }\n\n    zoom.event = function (g) {\n      g.each(function () {\n        var dispatch = event.of(this, arguments),\n            view1 = view;\n\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.zoom\", function () {\n            view = this.__chart__ || {\n              x: 0,\n              y: 0,\n              k: 1\n            };\n            zoomstarted(dispatch);\n          }).tween(\"zoom:zoom\", function () {\n            var dx = size[0],\n                dy = size[1],\n                cx = center0 ? center0[0] : dx / 2,\n                cy = center0 ? center0[1] : dy / 2,\n                i = d3.interpolateZoom([(cx - view.x) / view.k, (cy - view.y) / view.k, dx / view.k], [(cx - view1.x) / view1.k, (cy - view1.y) / view1.k, dx / view1.k]);\n            return function (t) {\n              var l = i(t),\n                  k = dx / l[2];\n              this.__chart__ = view = {\n                x: cx - l[0] * k,\n                y: cy - l[1] * k,\n                k: k\n              };\n              zoomed(dispatch);\n            };\n          }).each(\"interrupt.zoom\", function () {\n            zoomended(dispatch);\n          }).each(\"end.zoom\", function () {\n            zoomended(dispatch);\n          });\n        } else {\n          this.__chart__ = view;\n          zoomstarted(dispatch);\n          zoomed(dispatch);\n          zoomended(dispatch);\n        }\n      });\n    };\n\n    zoom.translate = function (_) {\n      if (!arguments.length) return [view.x, view.y];\n      view = {\n        x: +_[0],\n        y: +_[1],\n        k: view.k\n      };\n      rescale();\n      return zoom;\n    };\n\n    zoom.scale = function (_) {\n      if (!arguments.length) return view.k;\n      view = {\n        x: view.x,\n        y: view.y,\n        k: null\n      };\n      scaleTo(+_);\n      rescale();\n      return zoom;\n    };\n\n    zoom.scaleExtent = function (_) {\n      if (!arguments.length) return scaleExtent;\n      scaleExtent = _ == null ? d3_behavior_zoomInfinity : [+_[0], +_[1]];\n      return zoom;\n    };\n\n    zoom.center = function (_) {\n      if (!arguments.length) return center;\n      center = _ && [+_[0], +_[1]];\n      return zoom;\n    };\n\n    zoom.size = function (_) {\n      if (!arguments.length) return size;\n      size = _ && [+_[0], +_[1]];\n      return zoom;\n    };\n\n    zoom.duration = function (_) {\n      if (!arguments.length) return duration;\n      duration = +_;\n      return zoom;\n    };\n\n    zoom.x = function (z) {\n      if (!arguments.length) return x1;\n      x1 = z;\n      x0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n\n    zoom.y = function (z) {\n      if (!arguments.length) return y1;\n      y1 = z;\n      y0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n\n    function location(p) {\n      return [(p[0] - view.x) / view.k, (p[1] - view.y) / view.k];\n    }\n\n    function point(l) {\n      return [l[0] * view.k + view.x, l[1] * view.k + view.y];\n    }\n\n    function scaleTo(s) {\n      view.k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], s));\n    }\n\n    function translateTo(p, l) {\n      l = point(l);\n      view.x += p[0] - l[0];\n      view.y += p[1] - l[1];\n    }\n\n    function zoomTo(that, p, l, k) {\n      that.__chart__ = {\n        x: view.x,\n        y: view.y,\n        k: view.k\n      };\n      scaleTo(Math.pow(2, k));\n      translateTo(center0 = p, l);\n      that = d3.select(that);\n      if (duration > 0) that = that.transition().duration(duration);\n      that.call(zoom.event);\n    }\n\n    function rescale() {\n      if (x1) x1.domain(x0.range().map(function (x) {\n        return (x - view.x) / view.k;\n      }).map(x0.invert));\n      if (y1) y1.domain(y0.range().map(function (y) {\n        return (y - view.y) / view.k;\n      }).map(y0.invert));\n    }\n\n    function zoomstarted(dispatch) {\n      if (!zooming++) dispatch({\n        type: \"zoomstart\"\n      });\n    }\n\n    function zoomed(dispatch) {\n      rescale();\n      dispatch({\n        type: \"zoom\",\n        scale: view.k,\n        translate: [view.x, view.y]\n      });\n    }\n\n    function zoomended(dispatch) {\n      if (! --zooming) dispatch({\n        type: \"zoomend\"\n      }), center0 = null;\n    }\n\n    function mousedowned() {\n      var that = this,\n          dispatch = event.of(that, arguments),\n          dragged = 0,\n          subject = d3.select(d3_window(that)).on(mousemove, moved).on(mouseup, ended),\n          location0 = location(d3.mouse(that)),\n          dragRestore = d3_event_dragSuppress(that);\n      d3_selection_interrupt.call(that);\n      zoomstarted(dispatch);\n\n      function moved() {\n        dragged = 1;\n        translateTo(d3.mouse(that), location0);\n        zoomed(dispatch);\n      }\n\n      function ended() {\n        subject.on(mousemove, null).on(mouseup, null);\n        dragRestore(dragged);\n        zoomended(dispatch);\n      }\n    }\n\n    function touchstarted() {\n      var that = this,\n          dispatch = event.of(that, arguments),\n          locations0 = {},\n          distance0 = 0,\n          scale0,\n          zoomName = \".zoom-\" + d3.event.changedTouches[0].identifier,\n          touchmove = \"touchmove\" + zoomName,\n          touchend = \"touchend\" + zoomName,\n          targets = [],\n          subject = d3.select(that),\n          dragRestore = d3_event_dragSuppress(that);\n      started();\n      zoomstarted(dispatch);\n      subject.on(mousedown, null).on(touchstart, started);\n\n      function relocate() {\n        var touches = d3.touches(that);\n        scale0 = view.k;\n        touches.forEach(function (t) {\n          if (t.identifier in locations0) locations0[t.identifier] = location(t);\n        });\n        return touches;\n      }\n\n      function started() {\n        var target = d3.event.target;\n        d3.select(target).on(touchmove, moved).on(touchend, ended);\n        targets.push(target);\n        var changed = d3.event.changedTouches;\n\n        for (var i = 0, n = changed.length; i < n; ++i) {\n          locations0[changed[i].identifier] = null;\n        }\n\n        var touches = relocate(),\n            now = Date.now();\n\n        if (touches.length === 1) {\n          if (now - touchtime < 500) {\n            var p = touches[0];\n            zoomTo(that, p, locations0[p.identifier], Math.floor(Math.log(view.k) / Math.LN2) + 1);\n            d3_eventPreventDefault();\n          }\n\n          touchtime = now;\n        } else if (touches.length > 1) {\n          var p = touches[0],\n              q = touches[1],\n              dx = p[0] - q[0],\n              dy = p[1] - q[1];\n          distance0 = dx * dx + dy * dy;\n        }\n      }\n\n      function moved() {\n        var touches = d3.touches(that),\n            p0,\n            l0,\n            p1,\n            l1;\n        d3_selection_interrupt.call(that);\n\n        for (var i = 0, n = touches.length; i < n; ++i, l1 = null) {\n          p1 = touches[i];\n\n          if (l1 = locations0[p1.identifier]) {\n            if (l0) break;\n            p0 = p1, l0 = l1;\n          }\n        }\n\n        if (l1) {\n          var distance1 = (distance1 = p1[0] - p0[0]) * distance1 + (distance1 = p1[1] - p0[1]) * distance1,\n              scale1 = distance0 && Math.sqrt(distance1 / distance0);\n          p0 = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n          l0 = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n          scaleTo(scale1 * scale0);\n        }\n\n        touchtime = null;\n        translateTo(p0, l0);\n        zoomed(dispatch);\n      }\n\n      function ended() {\n        if (d3.event.touches.length) {\n          var changed = d3.event.changedTouches;\n\n          for (var i = 0, n = changed.length; i < n; ++i) {\n            delete locations0[changed[i].identifier];\n          }\n\n          for (var identifier in locations0) {\n            return void relocate();\n          }\n        }\n\n        d3.selectAll(targets).on(zoomName, null);\n        subject.on(mousedown, mousedowned).on(touchstart, touchstarted);\n        dragRestore();\n        zoomended(dispatch);\n      }\n    }\n\n    function mousewheeled() {\n      var dispatch = event.of(this, arguments);\n      if (mousewheelTimer) clearTimeout(mousewheelTimer);else d3_selection_interrupt.call(this), translate0 = location(center0 = center || d3.mouse(this)), zoomstarted(dispatch);\n      mousewheelTimer = setTimeout(function () {\n        mousewheelTimer = null;\n        zoomended(dispatch);\n      }, 50);\n      d3_eventPreventDefault();\n      scaleTo(Math.pow(2, d3_behavior_zoomDelta() * .002) * view.k);\n      translateTo(center0, translate0);\n      zoomed(dispatch);\n    }\n\n    function dblclicked() {\n      var p = d3.mouse(this),\n          k = Math.log(view.k) / Math.LN2;\n      zoomTo(this, p, location(p), d3.event.shiftKey ? Math.ceil(k) - 1 : Math.floor(k) + 1);\n    }\n\n    return d3.rebind(zoom, event, \"on\");\n  };\n\n  var d3_behavior_zoomInfinity = [0, Infinity],\n      d3_behavior_zoomDelta,\n      d3_behavior_zoomWheel;\n  d3.color = d3_color;\n\n  function d3_color() {}\n\n  d3_color.prototype.toString = function () {\n    return this.rgb() + \"\";\n  };\n\n  d3.hsl = d3_hsl;\n\n  function d3_hsl(h, s, l) {\n    return this instanceof d3_hsl ? void (this.h = +h, this.s = +s, this.l = +l) : arguments.length < 2 ? h instanceof d3_hsl ? new d3_hsl(h.h, h.s, h.l) : d3_rgb_parse(\"\" + h, d3_rgb_hsl, d3_hsl) : new d3_hsl(h, s, l);\n  }\n\n  var d3_hslPrototype = d3_hsl.prototype = new d3_color();\n\n  d3_hslPrototype.brighter = function (k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, this.l / k);\n  };\n\n  d3_hslPrototype.darker = function (k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, k * this.l);\n  };\n\n  d3_hslPrototype.rgb = function () {\n    return d3_hsl_rgb(this.h, this.s, this.l);\n  };\n\n  function d3_hsl_rgb(h, s, l) {\n    var m1, m2;\n    h = isNaN(h) ? 0 : (h %= 360) < 0 ? h + 360 : h;\n    s = isNaN(s) ? 0 : s < 0 ? 0 : s > 1 ? 1 : s;\n    l = l < 0 ? 0 : l > 1 ? 1 : l;\n    m2 = l <= .5 ? l * (1 + s) : l + s - l * s;\n    m1 = 2 * l - m2;\n\n    function v(h) {\n      if (h > 360) h -= 360;else if (h < 0) h += 360;\n      if (h < 60) return m1 + (m2 - m1) * h / 60;\n      if (h < 180) return m2;\n      if (h < 240) return m1 + (m2 - m1) * (240 - h) / 60;\n      return m1;\n    }\n\n    function vv(h) {\n      return Math.round(v(h) * 255);\n    }\n\n    return new d3_rgb(vv(h + 120), vv(h), vv(h - 120));\n  }\n\n  d3.hcl = d3_hcl;\n\n  function d3_hcl(h, c, l) {\n    return this instanceof d3_hcl ? void (this.h = +h, this.c = +c, this.l = +l) : arguments.length < 2 ? h instanceof d3_hcl ? new d3_hcl(h.h, h.c, h.l) : h instanceof d3_lab ? d3_lab_hcl(h.l, h.a, h.b) : d3_lab_hcl((h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : new d3_hcl(h, c, l);\n  }\n\n  var d3_hclPrototype = d3_hcl.prototype = new d3_color();\n\n  d3_hclPrototype.brighter = function (k) {\n    return new d3_hcl(this.h, this.c, Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)));\n  };\n\n  d3_hclPrototype.darker = function (k) {\n    return new d3_hcl(this.h, this.c, Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)));\n  };\n\n  d3_hclPrototype.rgb = function () {\n    return d3_hcl_lab(this.h, this.c, this.l).rgb();\n  };\n\n  function d3_hcl_lab(h, c, l) {\n    if (isNaN(h)) h = 0;\n    if (isNaN(c)) c = 0;\n    return new d3_lab(l, Math.cos(h *= d3_radians) * c, Math.sin(h) * c);\n  }\n\n  d3.lab = d3_lab;\n\n  function d3_lab(l, a, b) {\n    return this instanceof d3_lab ? void (this.l = +l, this.a = +a, this.b = +b) : arguments.length < 2 ? l instanceof d3_lab ? new d3_lab(l.l, l.a, l.b) : l instanceof d3_hcl ? d3_hcl_lab(l.h, l.c, l.l) : d3_rgb_lab((l = d3_rgb(l)).r, l.g, l.b) : new d3_lab(l, a, b);\n  }\n\n  var d3_lab_K = 18;\n  var d3_lab_X = .95047,\n      d3_lab_Y = 1,\n      d3_lab_Z = 1.08883;\n  var d3_labPrototype = d3_lab.prototype = new d3_color();\n\n  d3_labPrototype.brighter = function (k) {\n    return new d3_lab(Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n\n  d3_labPrototype.darker = function (k) {\n    return new d3_lab(Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n\n  d3_labPrototype.rgb = function () {\n    return d3_lab_rgb(this.l, this.a, this.b);\n  };\n\n  function d3_lab_rgb(l, a, b) {\n    var y = (l + 16) / 116,\n        x = y + a / 500,\n        z = y - b / 200;\n    x = d3_lab_xyz(x) * d3_lab_X;\n    y = d3_lab_xyz(y) * d3_lab_Y;\n    z = d3_lab_xyz(z) * d3_lab_Z;\n    return new d3_rgb(d3_xyz_rgb(3.2404542 * x - 1.5371385 * y - .4985314 * z), d3_xyz_rgb(-.969266 * x + 1.8760108 * y + .041556 * z), d3_xyz_rgb(.0556434 * x - .2040259 * y + 1.0572252 * z));\n  }\n\n  function d3_lab_hcl(l, a, b) {\n    return l > 0 ? new d3_hcl(Math.atan2(b, a) * d3_degrees, Math.sqrt(a * a + b * b), l) : new d3_hcl(NaN, NaN, l);\n  }\n\n  function d3_lab_xyz(x) {\n    return x > .206893034 ? x * x * x : (x - 4 / 29) / 7.787037;\n  }\n\n  function d3_xyz_lab(x) {\n    return x > .008856 ? Math.pow(x, 1 / 3) : 7.787037 * x + 4 / 29;\n  }\n\n  function d3_xyz_rgb(r) {\n    return Math.round(255 * (r <= .00304 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055));\n  }\n\n  d3.rgb = d3_rgb;\n\n  function d3_rgb(r, g, b) {\n    return this instanceof d3_rgb ? void (this.r = ~~r, this.g = ~~g, this.b = ~~b) : arguments.length < 2 ? r instanceof d3_rgb ? new d3_rgb(r.r, r.g, r.b) : d3_rgb_parse(\"\" + r, d3_rgb, d3_hsl_rgb) : new d3_rgb(r, g, b);\n  }\n\n  function d3_rgbNumber(value) {\n    return new d3_rgb(value >> 16, value >> 8 & 255, value & 255);\n  }\n\n  function d3_rgbString(value) {\n    return d3_rgbNumber(value) + \"\";\n  }\n\n  var d3_rgbPrototype = d3_rgb.prototype = new d3_color();\n\n  d3_rgbPrototype.brighter = function (k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    var r = this.r,\n        g = this.g,\n        b = this.b,\n        i = 30;\n    if (!r && !g && !b) return new d3_rgb(i, i, i);\n    if (r && r < i) r = i;\n    if (g && g < i) g = i;\n    if (b && b < i) b = i;\n    return new d3_rgb(Math.min(255, r / k), Math.min(255, g / k), Math.min(255, b / k));\n  };\n\n  d3_rgbPrototype.darker = function (k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_rgb(k * this.r, k * this.g, k * this.b);\n  };\n\n  d3_rgbPrototype.hsl = function () {\n    return d3_rgb_hsl(this.r, this.g, this.b);\n  };\n\n  d3_rgbPrototype.toString = function () {\n    return \"#\" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b);\n  };\n\n  function d3_rgb_hex(v) {\n    return v < 16 ? \"0\" + Math.max(0, v).toString(16) : Math.min(255, v).toString(16);\n  }\n\n  function d3_rgb_parse(format, rgb, hsl) {\n    var r = 0,\n        g = 0,\n        b = 0,\n        m1,\n        m2,\n        color;\n    m1 = /([a-z]+)\\((.*)\\)/.exec(format = format.toLowerCase());\n\n    if (m1) {\n      m2 = m1[2].split(\",\");\n\n      switch (m1[1]) {\n        case \"hsl\":\n          {\n            return hsl(parseFloat(m2[0]), parseFloat(m2[1]) / 100, parseFloat(m2[2]) / 100);\n          }\n\n        case \"rgb\":\n          {\n            return rgb(d3_rgb_parseNumber(m2[0]), d3_rgb_parseNumber(m2[1]), d3_rgb_parseNumber(m2[2]));\n          }\n      }\n    }\n\n    if (color = d3_rgb_names.get(format)) {\n      return rgb(color.r, color.g, color.b);\n    }\n\n    if (format != null && format.charAt(0) === \"#\" && !isNaN(color = parseInt(format.slice(1), 16))) {\n      if (format.length === 4) {\n        r = (color & 3840) >> 4;\n        r = r >> 4 | r;\n        g = color & 240;\n        g = g >> 4 | g;\n        b = color & 15;\n        b = b << 4 | b;\n      } else if (format.length === 7) {\n        r = (color & 16711680) >> 16;\n        g = (color & 65280) >> 8;\n        b = color & 255;\n      }\n    }\n\n    return rgb(r, g, b);\n  }\n\n  function d3_rgb_hsl(r, g, b) {\n    var min = Math.min(r /= 255, g /= 255, b /= 255),\n        max = Math.max(r, g, b),\n        d = max - min,\n        h,\n        s,\n        l = (max + min) / 2;\n\n    if (d) {\n      s = l < .5 ? d / (max + min) : d / (2 - max - min);\n      if (r == max) h = (g - b) / d + (g < b ? 6 : 0);else if (g == max) h = (b - r) / d + 2;else h = (r - g) / d + 4;\n      h *= 60;\n    } else {\n      h = NaN;\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n\n    return new d3_hsl(h, s, l);\n  }\n\n  function d3_rgb_lab(r, g, b) {\n    r = d3_rgb_xyz(r);\n    g = d3_rgb_xyz(g);\n    b = d3_rgb_xyz(b);\n    var x = d3_xyz_lab((.4124564 * r + .3575761 * g + .1804375 * b) / d3_lab_X),\n        y = d3_xyz_lab((.2126729 * r + .7151522 * g + .072175 * b) / d3_lab_Y),\n        z = d3_xyz_lab((.0193339 * r + .119192 * g + .9503041 * b) / d3_lab_Z);\n    return d3_lab(116 * y - 16, 500 * (x - y), 200 * (y - z));\n  }\n\n  function d3_rgb_xyz(r) {\n    return (r /= 255) <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4);\n  }\n\n  function d3_rgb_parseNumber(c) {\n    var f = parseFloat(c);\n    return c.charAt(c.length - 1) === \"%\" ? Math.round(f * 2.55) : f;\n  }\n\n  var d3_rgb_names = d3.map({\n    aliceblue: 15792383,\n    antiquewhite: 16444375,\n    aqua: 65535,\n    aquamarine: 8388564,\n    azure: 15794175,\n    beige: 16119260,\n    bisque: 16770244,\n    black: 0,\n    blanchedalmond: 16772045,\n    blue: 255,\n    blueviolet: 9055202,\n    brown: 10824234,\n    burlywood: 14596231,\n    cadetblue: 6266528,\n    chartreuse: 8388352,\n    chocolate: 13789470,\n    coral: 16744272,\n    cornflowerblue: 6591981,\n    cornsilk: 16775388,\n    crimson: 14423100,\n    cyan: 65535,\n    darkblue: 139,\n    darkcyan: 35723,\n    darkgoldenrod: 12092939,\n    darkgray: 11119017,\n    darkgreen: 25600,\n    darkgrey: 11119017,\n    darkkhaki: 12433259,\n    darkmagenta: 9109643,\n    darkolivegreen: 5597999,\n    darkorange: 16747520,\n    darkorchid: 10040012,\n    darkred: 9109504,\n    darksalmon: 15308410,\n    darkseagreen: 9419919,\n    darkslateblue: 4734347,\n    darkslategray: 3100495,\n    darkslategrey: 3100495,\n    darkturquoise: 52945,\n    darkviolet: 9699539,\n    deeppink: 16716947,\n    deepskyblue: 49151,\n    dimgray: 6908265,\n    dimgrey: 6908265,\n    dodgerblue: 2003199,\n    firebrick: 11674146,\n    floralwhite: 16775920,\n    forestgreen: 2263842,\n    fuchsia: 16711935,\n    gainsboro: 14474460,\n    ghostwhite: 16316671,\n    gold: 16766720,\n    goldenrod: 14329120,\n    gray: 8421504,\n    green: 32768,\n    greenyellow: 11403055,\n    grey: 8421504,\n    honeydew: 15794160,\n    hotpink: 16738740,\n    indianred: 13458524,\n    indigo: 4915330,\n    ivory: 16777200,\n    khaki: 15787660,\n    lavender: 15132410,\n    lavenderblush: 16773365,\n    lawngreen: 8190976,\n    lemonchiffon: 16775885,\n    lightblue: 11393254,\n    lightcoral: 15761536,\n    lightcyan: 14745599,\n    lightgoldenrodyellow: 16448210,\n    lightgray: 13882323,\n    lightgreen: 9498256,\n    lightgrey: 13882323,\n    lightpink: 16758465,\n    lightsalmon: 16752762,\n    lightseagreen: 2142890,\n    lightskyblue: 8900346,\n    lightslategray: 7833753,\n    lightslategrey: 7833753,\n    lightsteelblue: 11584734,\n    lightyellow: 16777184,\n    lime: 65280,\n    limegreen: 3329330,\n    linen: 16445670,\n    magenta: 16711935,\n    maroon: 8388608,\n    mediumaquamarine: 6737322,\n    mediumblue: 205,\n    mediumorchid: 12211667,\n    mediumpurple: 9662683,\n    mediumseagreen: 3978097,\n    mediumslateblue: 8087790,\n    mediumspringgreen: 64154,\n    mediumturquoise: 4772300,\n    mediumvioletred: 13047173,\n    midnightblue: 1644912,\n    mintcream: 16121850,\n    mistyrose: 16770273,\n    moccasin: 16770229,\n    navajowhite: 16768685,\n    navy: 128,\n    oldlace: 16643558,\n    olive: 8421376,\n    olivedrab: 7048739,\n    orange: 16753920,\n    orangered: 16729344,\n    orchid: 14315734,\n    palegoldenrod: 15657130,\n    palegreen: 10025880,\n    paleturquoise: 11529966,\n    palevioletred: 14381203,\n    papayawhip: 16773077,\n    peachpuff: 16767673,\n    peru: 13468991,\n    pink: 16761035,\n    plum: 14524637,\n    powderblue: 11591910,\n    purple: 8388736,\n    rebeccapurple: 6697881,\n    red: 16711680,\n    rosybrown: 12357519,\n    royalblue: 4286945,\n    saddlebrown: 9127187,\n    salmon: 16416882,\n    sandybrown: 16032864,\n    seagreen: 3050327,\n    seashell: 16774638,\n    sienna: 10506797,\n    silver: 12632256,\n    skyblue: 8900331,\n    slateblue: 6970061,\n    slategray: 7372944,\n    slategrey: 7372944,\n    snow: 16775930,\n    springgreen: 65407,\n    steelblue: 4620980,\n    tan: 13808780,\n    teal: 32896,\n    thistle: 14204888,\n    tomato: 16737095,\n    turquoise: 4251856,\n    violet: 15631086,\n    wheat: 16113331,\n    white: 16777215,\n    whitesmoke: 16119285,\n    yellow: 16776960,\n    yellowgreen: 10145074\n  });\n  d3_rgb_names.forEach(function (key, value) {\n    d3_rgb_names.set(key, d3_rgbNumber(value));\n  });\n\n  function d3_functor(v) {\n    return typeof v === \"function\" ? v : function () {\n      return v;\n    };\n  }\n\n  d3.functor = d3_functor;\n  d3.xhr = d3_xhrType(d3_identity);\n\n  function d3_xhrType(response) {\n    return function (url, mimeType, callback) {\n      if (arguments.length === 2 && typeof mimeType === \"function\") callback = mimeType, mimeType = null;\n      return d3_xhr(url, mimeType, response, callback);\n    };\n  }\n\n  function d3_xhr(url, mimeType, response, callback) {\n    var xhr = {},\n        dispatch = d3.dispatch(\"beforesend\", \"progress\", \"load\", \"error\"),\n        headers = {},\n        request = new XMLHttpRequest(),\n        responseType = null;\n    if (this.XDomainRequest && !(\"withCredentials\" in request) && /^(http(s)?:)?\\/\\//.test(url)) request = new XDomainRequest();\n    \"onload\" in request ? request.onload = request.onerror = respond : request.onreadystatechange = function () {\n      request.readyState > 3 && respond();\n    };\n\n    function respond() {\n      var status = request.status,\n          result;\n\n      if (!status && d3_xhrHasResponse(request) || status >= 200 && status < 300 || status === 304) {\n        try {\n          result = response.call(xhr, request);\n        } catch (e) {\n          dispatch.error.call(xhr, e);\n          return;\n        }\n\n        dispatch.load.call(xhr, result);\n      } else {\n        dispatch.error.call(xhr, request);\n      }\n    }\n\n    request.onprogress = function (event) {\n      var o = d3.event;\n      d3.event = event;\n\n      try {\n        dispatch.progress.call(xhr, request);\n      } finally {\n        d3.event = o;\n      }\n    };\n\n    xhr.header = function (name, value) {\n      name = (name + \"\").toLowerCase();\n      if (arguments.length < 2) return headers[name];\n      if (value == null) delete headers[name];else headers[name] = value + \"\";\n      return xhr;\n    };\n\n    xhr.mimeType = function (value) {\n      if (!arguments.length) return mimeType;\n      mimeType = value == null ? null : value + \"\";\n      return xhr;\n    };\n\n    xhr.responseType = function (value) {\n      if (!arguments.length) return responseType;\n      responseType = value;\n      return xhr;\n    };\n\n    xhr.response = function (value) {\n      response = value;\n      return xhr;\n    };\n\n    [\"get\", \"post\"].forEach(function (method) {\n      xhr[method] = function () {\n        return xhr.send.apply(xhr, [method].concat(d3_array(arguments)));\n      };\n    });\n\n    xhr.send = function (method, data, callback) {\n      if (arguments.length === 2 && typeof data === \"function\") callback = data, data = null;\n      request.open(method, url, true);\n      if (mimeType != null && !(\"accept\" in headers)) headers[\"accept\"] = mimeType + \",*/*\";\n      if (request.setRequestHeader) for (var name in headers) {\n        request.setRequestHeader(name, headers[name]);\n      }\n      if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);\n      if (responseType != null) request.responseType = responseType;\n      if (callback != null) xhr.on(\"error\", callback).on(\"load\", function (request) {\n        callback(null, request);\n      });\n      dispatch.beforesend.call(xhr, request);\n      request.send(data == null ? null : data);\n      return xhr;\n    };\n\n    xhr.abort = function () {\n      request.abort();\n      return xhr;\n    };\n\n    d3.rebind(xhr, dispatch, \"on\");\n    return callback == null ? xhr : xhr.get(d3_xhr_fixCallback(callback));\n  }\n\n  function d3_xhr_fixCallback(callback) {\n    return callback.length === 1 ? function (error, request) {\n      callback(error == null ? request : null);\n    } : callback;\n  }\n\n  function d3_xhrHasResponse(request) {\n    var type = request.responseType;\n    return type && type !== \"text\" ? request.response : request.responseText;\n  }\n\n  d3.dsv = function (delimiter, mimeType) {\n    var reFormat = new RegExp('[\"' + delimiter + \"\\n]\"),\n        delimiterCode = delimiter.charCodeAt(0);\n\n    function dsv(url, row, callback) {\n      if (arguments.length < 3) callback = row, row = null;\n      var xhr = d3_xhr(url, mimeType, row == null ? response : typedResponse(row), callback);\n\n      xhr.row = function (_) {\n        return arguments.length ? xhr.response((row = _) == null ? response : typedResponse(_)) : row;\n      };\n\n      return xhr;\n    }\n\n    function response(request) {\n      return dsv.parse(request.responseText);\n    }\n\n    function typedResponse(f) {\n      return function (request) {\n        return dsv.parse(request.responseText, f);\n      };\n    }\n\n    dsv.parse = function (text, f) {\n      var o;\n      return dsv.parseRows(text, function (row, i) {\n        if (o) return o(row, i - 1);\n        var a = new Function(\"d\", \"return {\" + row.map(function (name, i) {\n          return JSON.stringify(name) + \": d[\" + i + \"]\";\n        }).join(\",\") + \"}\");\n        o = f ? function (row, i) {\n          return f(a(row), i);\n        } : a;\n      });\n    };\n\n    dsv.parseRows = function (text, f) {\n      var EOL = {},\n          EOF = {},\n          rows = [],\n          N = text.length,\n          I = 0,\n          n = 0,\n          t,\n          eol;\n\n      function token() {\n        if (I >= N) return EOF;\n        if (eol) return eol = false, EOL;\n        var j = I;\n\n        if (text.charCodeAt(j) === 34) {\n          var i = j;\n\n          while (i++ < N) {\n            if (text.charCodeAt(i) === 34) {\n              if (text.charCodeAt(i + 1) !== 34) break;\n              ++i;\n            }\n          }\n\n          I = i + 2;\n          var c = text.charCodeAt(i + 1);\n\n          if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(i + 2) === 10) ++I;\n          } else if (c === 10) {\n            eol = true;\n          }\n\n          return text.slice(j + 1, i).replace(/\"\"/g, '\"');\n        }\n\n        while (I < N) {\n          var c = text.charCodeAt(I++),\n              k = 1;\n          if (c === 10) eol = true;else if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(I) === 10) ++I, ++k;\n          } else if (c !== delimiterCode) continue;\n          return text.slice(j, I - k);\n        }\n\n        return text.slice(j);\n      }\n\n      while ((t = token()) !== EOF) {\n        var a = [];\n\n        while (t !== EOL && t !== EOF) {\n          a.push(t);\n          t = token();\n        }\n\n        if (f && (a = f(a, n++)) == null) continue;\n        rows.push(a);\n      }\n\n      return rows;\n    };\n\n    dsv.format = function (rows) {\n      if (Array.isArray(rows[0])) return dsv.formatRows(rows);\n      var fieldSet = new d3_Set(),\n          fields = [];\n      rows.forEach(function (row) {\n        for (var field in row) {\n          if (!fieldSet.has(field)) {\n            fields.push(fieldSet.add(field));\n          }\n        }\n      });\n      return [fields.map(formatValue).join(delimiter)].concat(rows.map(function (row) {\n        return fields.map(function (field) {\n          return formatValue(row[field]);\n        }).join(delimiter);\n      })).join(\"\\n\");\n    };\n\n    dsv.formatRows = function (rows) {\n      return rows.map(formatRow).join(\"\\n\");\n    };\n\n    function formatRow(row) {\n      return row.map(formatValue).join(delimiter);\n    }\n\n    function formatValue(text) {\n      return reFormat.test(text) ? '\"' + text.replace(/\\\"/g, '\"\"') + '\"' : text;\n    }\n\n    return dsv;\n  };\n\n  d3.csv = d3.dsv(\",\", \"text/csv\");\n  d3.tsv = d3.dsv(\"\t\", \"text/tab-separated-values\");\n\n  var d3_timer_queueHead,\n      d3_timer_queueTail,\n      d3_timer_interval,\n      d3_timer_timeout,\n      d3_timer_frame = this[d3_vendorSymbol(this, \"requestAnimationFrame\")] || function (callback) {\n    setTimeout(callback, 17);\n  };\n\n  d3.timer = function () {\n    d3_timer.apply(this, arguments);\n  };\n\n  function d3_timer(callback, delay, then) {\n    var n = arguments.length;\n    if (n < 2) delay = 0;\n    if (n < 3) then = Date.now();\n    var time = then + delay,\n        timer = {\n      c: callback,\n      t: time,\n      n: null\n    };\n    if (d3_timer_queueTail) d3_timer_queueTail.n = timer;else d3_timer_queueHead = timer;\n    d3_timer_queueTail = timer;\n\n    if (!d3_timer_interval) {\n      d3_timer_timeout = clearTimeout(d3_timer_timeout);\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n\n    return timer;\n  }\n\n  function d3_timer_step() {\n    var now = d3_timer_mark(),\n        delay = d3_timer_sweep() - now;\n\n    if (delay > 24) {\n      if (isFinite(delay)) {\n        clearTimeout(d3_timer_timeout);\n        d3_timer_timeout = setTimeout(d3_timer_step, delay);\n      }\n\n      d3_timer_interval = 0;\n    } else {\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n  }\n\n  d3.timer.flush = function () {\n    d3_timer_mark();\n    d3_timer_sweep();\n  };\n\n  function d3_timer_mark() {\n    var now = Date.now(),\n        timer = d3_timer_queueHead;\n\n    while (timer) {\n      if (now >= timer.t && timer.c(now - timer.t)) timer.c = null;\n      timer = timer.n;\n    }\n\n    return now;\n  }\n\n  function d3_timer_sweep() {\n    var t0,\n        t1 = d3_timer_queueHead,\n        time = Infinity;\n\n    while (t1) {\n      if (t1.c) {\n        if (t1.t < time) time = t1.t;\n        t1 = (t0 = t1).n;\n      } else {\n        t1 = t0 ? t0.n = t1.n : d3_timer_queueHead = t1.n;\n      }\n    }\n\n    d3_timer_queueTail = t0;\n    return time;\n  }\n\n  function d3_format_precision(x, p) {\n    return p - (x ? Math.ceil(Math.log(x) / Math.LN10) : 1);\n  }\n\n  d3.round = function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n  };\n\n  var d3_formatPrefixes = [\"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"].map(d3_formatPrefix);\n\n  d3.formatPrefix = function (value, precision) {\n    var i = 0;\n\n    if (value = +value) {\n      if (value < 0) value *= -1;\n      if (precision) value = d3.round(value, d3_format_precision(value, precision));\n      i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n      i = Math.max(-24, Math.min(24, Math.floor((i - 1) / 3) * 3));\n    }\n\n    return d3_formatPrefixes[8 + i / 3];\n  };\n\n  function d3_formatPrefix(d, i) {\n    var k = Math.pow(10, abs(8 - i) * 3);\n    return {\n      scale: i > 8 ? function (d) {\n        return d / k;\n      } : function (d) {\n        return d * k;\n      },\n      symbol: d\n    };\n  }\n\n  function d3_locale_numberFormat(locale) {\n    var locale_decimal = locale.decimal,\n        locale_thousands = locale.thousands,\n        locale_grouping = locale.grouping,\n        locale_currency = locale.currency,\n        formatGroup = locale_grouping && locale_thousands ? function (value, width) {\n      var i = value.length,\n          t = [],\n          j = 0,\n          g = locale_grouping[0],\n          length = 0;\n\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = locale_grouping[j = (j + 1) % locale_grouping.length];\n      }\n\n      return t.reverse().join(locale_thousands);\n    } : d3_identity;\n    return function (specifier) {\n      var match = d3_format_re.exec(specifier),\n          fill = match[1] || \" \",\n          align = match[2] || \">\",\n          sign = match[3] || \"-\",\n          symbol = match[4] || \"\",\n          zfill = match[5],\n          width = +match[6],\n          comma = match[7],\n          precision = match[8],\n          type = match[9],\n          scale = 1,\n          prefix = \"\",\n          suffix = \"\",\n          integer = false,\n          exponent = true;\n      if (precision) precision = +precision.substring(1);\n\n      if (zfill || fill === \"0\" && align === \"=\") {\n        zfill = fill = \"0\";\n        align = \"=\";\n      }\n\n      switch (type) {\n        case \"n\":\n          comma = true;\n          type = \"g\";\n          break;\n\n        case \"%\":\n          scale = 100;\n          suffix = \"%\";\n          type = \"f\";\n          break;\n\n        case \"p\":\n          scale = 100;\n          suffix = \"%\";\n          type = \"r\";\n          break;\n\n        case \"b\":\n        case \"o\":\n        case \"x\":\n        case \"X\":\n          if (symbol === \"#\") prefix = \"0\" + type.toLowerCase();\n\n        case \"c\":\n          exponent = false;\n\n        case \"d\":\n          integer = true;\n          precision = 0;\n          break;\n\n        case \"s\":\n          scale = -1;\n          type = \"r\";\n          break;\n      }\n\n      if (symbol === \"$\") prefix = locale_currency[0], suffix = locale_currency[1];\n      if (type == \"r\" && !precision) type = \"g\";\n\n      if (precision != null) {\n        if (type == \"g\") precision = Math.max(1, Math.min(21, precision));else if (type == \"e\" || type == \"f\") precision = Math.max(0, Math.min(20, precision));\n      }\n\n      type = d3_format_types.get(type) || d3_format_typeDefault;\n      var zcomma = zfill && comma;\n      return function (value) {\n        var fullSuffix = suffix;\n        if (integer && value % 1) return \"\";\n        var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, \"-\") : sign === \"-\" ? \"\" : sign;\n\n        if (scale < 0) {\n          var unit = d3.formatPrefix(value, precision);\n          value = unit.scale(value);\n          fullSuffix = unit.symbol + suffix;\n        } else {\n          value *= scale;\n        }\n\n        value = type(value, precision);\n        var i = value.lastIndexOf(\".\"),\n            before,\n            after;\n\n        if (i < 0) {\n          var j = exponent ? value.lastIndexOf(\"e\") : -1;\n          if (j < 0) before = value, after = \"\";else before = value.substring(0, j), after = value.substring(j);\n        } else {\n          before = value.substring(0, i);\n          after = locale_decimal + value.substring(i + 1);\n        }\n\n        if (!zfill && comma) before = formatGroup(before, Infinity);\n        var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length),\n            padding = length < width ? new Array(length = width - length + 1).join(fill) : \"\";\n        if (zcomma) before = formatGroup(padding + before, padding.length ? width - after.length : Infinity);\n        negative += prefix;\n        value = before + after;\n        return (align === \"<\" ? negative + value + padding : align === \">\" ? padding + negative + value : align === \"^\" ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;\n      };\n    };\n  }\n\n  var d3_format_re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n  var d3_format_types = d3.map({\n    b: function b(x) {\n      return x.toString(2);\n    },\n    c: function c(x) {\n      return String.fromCharCode(x);\n    },\n    o: function o(x) {\n      return x.toString(8);\n    },\n    x: function x(_x) {\n      return _x.toString(16);\n    },\n    X: function X(x) {\n      return x.toString(16).toUpperCase();\n    },\n    g: function g(x, p) {\n      return x.toPrecision(p);\n    },\n    e: function e(x, p) {\n      return x.toExponential(p);\n    },\n    f: function f(x, p) {\n      return x.toFixed(p);\n    },\n    r: function r(x, p) {\n      return (x = d3.round(x, d3_format_precision(x, p))).toFixed(Math.max(0, Math.min(20, d3_format_precision(x * (1 + 1e-15), p))));\n    }\n  });\n\n  function d3_format_typeDefault(x) {\n    return x + \"\";\n  }\n\n  var d3_time = d3.time = {},\n      d3_date = Date;\n\n  function d3_date_utc() {\n    this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]);\n  }\n\n  d3_date_utc.prototype = {\n    getDate: function getDate() {\n      return this._.getUTCDate();\n    },\n    getDay: function getDay() {\n      return this._.getUTCDay();\n    },\n    getFullYear: function getFullYear() {\n      return this._.getUTCFullYear();\n    },\n    getHours: function getHours() {\n      return this._.getUTCHours();\n    },\n    getMilliseconds: function getMilliseconds() {\n      return this._.getUTCMilliseconds();\n    },\n    getMinutes: function getMinutes() {\n      return this._.getUTCMinutes();\n    },\n    getMonth: function getMonth() {\n      return this._.getUTCMonth();\n    },\n    getSeconds: function getSeconds() {\n      return this._.getUTCSeconds();\n    },\n    getTime: function getTime() {\n      return this._.getTime();\n    },\n    getTimezoneOffset: function getTimezoneOffset() {\n      return 0;\n    },\n    valueOf: function valueOf() {\n      return this._.valueOf();\n    },\n    setDate: function setDate() {\n      d3_time_prototype.setUTCDate.apply(this._, arguments);\n    },\n    setDay: function setDay() {\n      d3_time_prototype.setUTCDay.apply(this._, arguments);\n    },\n    setFullYear: function setFullYear() {\n      d3_time_prototype.setUTCFullYear.apply(this._, arguments);\n    },\n    setHours: function setHours() {\n      d3_time_prototype.setUTCHours.apply(this._, arguments);\n    },\n    setMilliseconds: function setMilliseconds() {\n      d3_time_prototype.setUTCMilliseconds.apply(this._, arguments);\n    },\n    setMinutes: function setMinutes() {\n      d3_time_prototype.setUTCMinutes.apply(this._, arguments);\n    },\n    setMonth: function setMonth() {\n      d3_time_prototype.setUTCMonth.apply(this._, arguments);\n    },\n    setSeconds: function setSeconds() {\n      d3_time_prototype.setUTCSeconds.apply(this._, arguments);\n    },\n    setTime: function setTime() {\n      d3_time_prototype.setTime.apply(this._, arguments);\n    }\n  };\n  var d3_time_prototype = Date.prototype;\n\n  function d3_time_interval(local, step, number) {\n    function round(date) {\n      var d0 = local(date),\n          d1 = offset(d0, 1);\n      return date - d0 < d1 - date ? d0 : d1;\n    }\n\n    function ceil(date) {\n      step(date = local(new d3_date(date - 1)), 1);\n      return date;\n    }\n\n    function offset(date, k) {\n      step(date = new d3_date(+date), k);\n      return date;\n    }\n\n    function range(t0, t1, dt) {\n      var time = ceil(t0),\n          times = [];\n\n      if (dt > 1) {\n        while (time < t1) {\n          if (!(number(time) % dt)) times.push(new Date(+time));\n          step(time, 1);\n        }\n      } else {\n        while (time < t1) {\n          times.push(new Date(+time)), step(time, 1);\n        }\n      }\n\n      return times;\n    }\n\n    function range_utc(t0, t1, dt) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = t0;\n        return range(utc, t1, dt);\n      } finally {\n        d3_date = Date;\n      }\n    }\n\n    local.floor = local;\n    local.round = round;\n    local.ceil = ceil;\n    local.offset = offset;\n    local.range = range;\n    var utc = local.utc = d3_time_interval_utc(local);\n    utc.floor = utc;\n    utc.round = d3_time_interval_utc(round);\n    utc.ceil = d3_time_interval_utc(ceil);\n    utc.offset = d3_time_interval_utc(offset);\n    utc.range = range_utc;\n    return local;\n  }\n\n  function d3_time_interval_utc(method) {\n    return function (date, k) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = date;\n        return method(utc, k)._;\n      } finally {\n        d3_date = Date;\n      }\n    };\n  }\n\n  d3_time.year = d3_time_interval(function (date) {\n    date = d3_time.day(date);\n    date.setMonth(0, 1);\n    return date;\n  }, function (date, offset) {\n    date.setFullYear(date.getFullYear() + offset);\n  }, function (date) {\n    return date.getFullYear();\n  });\n  d3_time.years = d3_time.year.range;\n  d3_time.years.utc = d3_time.year.utc.range;\n  d3_time.day = d3_time_interval(function (date) {\n    var day = new d3_date(2e3, 0);\n    day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n    return day;\n  }, function (date, offset) {\n    date.setDate(date.getDate() + offset);\n  }, function (date) {\n    return date.getDate() - 1;\n  });\n  d3_time.days = d3_time.day.range;\n  d3_time.days.utc = d3_time.day.utc.range;\n\n  d3_time.dayOfYear = function (date) {\n    var year = d3_time.year(date);\n    return Math.floor((date - year - (date.getTimezoneOffset() - year.getTimezoneOffset()) * 6e4) / 864e5);\n  };\n\n  [\"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"].forEach(function (day, i) {\n    i = 7 - i;\n    var interval = d3_time[day] = d3_time_interval(function (date) {\n      (date = d3_time.day(date)).setDate(date.getDate() - (date.getDay() + i) % 7);\n      return date;\n    }, function (date, offset) {\n      date.setDate(date.getDate() + Math.floor(offset) * 7);\n    }, function (date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7) - (day !== i);\n    });\n    d3_time[day + \"s\"] = interval.range;\n    d3_time[day + \"s\"].utc = interval.utc.range;\n\n    d3_time[day + \"OfYear\"] = function (date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7);\n    };\n  });\n  d3_time.week = d3_time.sunday;\n  d3_time.weeks = d3_time.sunday.range;\n  d3_time.weeks.utc = d3_time.sunday.utc.range;\n  d3_time.weekOfYear = d3_time.sundayOfYear;\n\n  function d3_locale_timeFormat(locale) {\n    var locale_dateTime = locale.dateTime,\n        locale_date = locale.date,\n        locale_time = locale.time,\n        locale_periods = locale.periods,\n        locale_days = locale.days,\n        locale_shortDays = locale.shortDays,\n        locale_months = locale.months,\n        locale_shortMonths = locale.shortMonths;\n\n    function d3_time_format(template) {\n      var n = template.length;\n\n      function format(date) {\n        var string = [],\n            i = -1,\n            j = 0,\n            c,\n            p,\n            f;\n\n        while (++i < n) {\n          if (template.charCodeAt(i) === 37) {\n            string.push(template.slice(j, i));\n            if ((p = d3_time_formatPads[c = template.charAt(++i)]) != null) c = template.charAt(++i);\n            if (f = d3_time_formats[c]) c = f(date, p == null ? c === \"e\" ? \" \" : \"0\" : p);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n\n        string.push(template.slice(j, i));\n        return string.join(\"\");\n      }\n\n      format.parse = function (string) {\n        var d = {\n          y: 1900,\n          m: 0,\n          d: 1,\n          H: 0,\n          M: 0,\n          S: 0,\n          L: 0,\n          Z: null\n        },\n            i = d3_time_parse(d, template, string, 0);\n        if (i != string.length) return null;\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n        var localZ = d.Z != null && d3_date !== d3_date_utc,\n            date = new (localZ ? d3_date_utc : d3_date)();\n        if (\"j\" in d) date.setFullYear(d.y, 0, d.j);else if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          date.setFullYear(d.y, 0, 1);\n          date.setFullYear(d.y, 0, \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (date.getDay() + 5) % 7 : d.w + d.U * 7 - (date.getDay() + 6) % 7);\n        } else date.setFullYear(d.y, d.m, d.d);\n        date.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L);\n        return localZ ? date._ : date;\n      };\n\n      format.toString = function () {\n        return template;\n      };\n\n      return format;\n    }\n\n    function d3_time_parse(date, template, string, j) {\n      var c,\n          p,\n          t,\n          i = 0,\n          n = template.length,\n          m = string.length;\n\n      while (i < n) {\n        if (j >= m) return -1;\n        c = template.charCodeAt(i++);\n\n        if (c === 37) {\n          t = template.charAt(i++);\n          p = d3_time_parsers[t in d3_time_formatPads ? template.charAt(i++) : t];\n          if (!p || (j = p(date, string, j)) < 0) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n\n      return j;\n    }\n\n    d3_time_format.utc = function (template) {\n      var local = d3_time_format(template);\n\n      function format(date) {\n        try {\n          d3_date = d3_date_utc;\n          var utc = new d3_date();\n          utc._ = date;\n          return local(utc);\n        } finally {\n          d3_date = Date;\n        }\n      }\n\n      format.parse = function (string) {\n        try {\n          d3_date = d3_date_utc;\n          var date = local.parse(string);\n          return date && date._;\n        } finally {\n          d3_date = Date;\n        }\n      };\n\n      format.toString = local.toString;\n      return format;\n    };\n\n    d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti;\n    var d3_time_periodLookup = d3.map(),\n        d3_time_dayRe = d3_time_formatRe(locale_days),\n        d3_time_dayLookup = d3_time_formatLookup(locale_days),\n        d3_time_dayAbbrevRe = d3_time_formatRe(locale_shortDays),\n        d3_time_dayAbbrevLookup = d3_time_formatLookup(locale_shortDays),\n        d3_time_monthRe = d3_time_formatRe(locale_months),\n        d3_time_monthLookup = d3_time_formatLookup(locale_months),\n        d3_time_monthAbbrevRe = d3_time_formatRe(locale_shortMonths),\n        d3_time_monthAbbrevLookup = d3_time_formatLookup(locale_shortMonths);\n    locale_periods.forEach(function (p, i) {\n      d3_time_periodLookup.set(p.toLowerCase(), i);\n    });\n    var d3_time_formats = {\n      a: function a(d) {\n        return locale_shortDays[d.getDay()];\n      },\n      A: function A(d) {\n        return locale_days[d.getDay()];\n      },\n      b: function b(d) {\n        return locale_shortMonths[d.getMonth()];\n      },\n      B: function B(d) {\n        return locale_months[d.getMonth()];\n      },\n      c: d3_time_format(locale_dateTime),\n      d: function d(_d, p) {\n        return d3_time_formatPad(_d.getDate(), p, 2);\n      },\n      e: function e(d, p) {\n        return d3_time_formatPad(d.getDate(), p, 2);\n      },\n      H: function H(d, p) {\n        return d3_time_formatPad(d.getHours(), p, 2);\n      },\n      I: function I(d, p) {\n        return d3_time_formatPad(d.getHours() % 12 || 12, p, 2);\n      },\n      j: function j(d, p) {\n        return d3_time_formatPad(1 + d3_time.dayOfYear(d), p, 3);\n      },\n      L: function L(d, p) {\n        return d3_time_formatPad(d.getMilliseconds(), p, 3);\n      },\n      m: function m(d, p) {\n        return d3_time_formatPad(d.getMonth() + 1, p, 2);\n      },\n      M: function M(d, p) {\n        return d3_time_formatPad(d.getMinutes(), p, 2);\n      },\n      p: function p(d) {\n        return locale_periods[+(d.getHours() >= 12)];\n      },\n      S: function S(d, p) {\n        return d3_time_formatPad(d.getSeconds(), p, 2);\n      },\n      U: function U(d, p) {\n        return d3_time_formatPad(d3_time.sundayOfYear(d), p, 2);\n      },\n      w: function w(d) {\n        return d.getDay();\n      },\n      W: function W(d, p) {\n        return d3_time_formatPad(d3_time.mondayOfYear(d), p, 2);\n      },\n      x: d3_time_format(locale_date),\n      X: d3_time_format(locale_time),\n      y: function y(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 100, p, 2);\n      },\n      Y: function Y(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 1e4, p, 4);\n      },\n      Z: d3_time_zone,\n      \"%\": function _() {\n        return \"%\";\n      }\n    };\n    var d3_time_parsers = {\n      a: d3_time_parseWeekdayAbbrev,\n      A: d3_time_parseWeekday,\n      b: d3_time_parseMonthAbbrev,\n      B: d3_time_parseMonth,\n      c: d3_time_parseLocaleFull,\n      d: d3_time_parseDay,\n      e: d3_time_parseDay,\n      H: d3_time_parseHour24,\n      I: d3_time_parseHour24,\n      j: d3_time_parseDayOfYear,\n      L: d3_time_parseMilliseconds,\n      m: d3_time_parseMonthNumber,\n      M: d3_time_parseMinutes,\n      p: d3_time_parseAmPm,\n      S: d3_time_parseSeconds,\n      U: d3_time_parseWeekNumberSunday,\n      w: d3_time_parseWeekdayNumber,\n      W: d3_time_parseWeekNumberMonday,\n      x: d3_time_parseLocaleDate,\n      X: d3_time_parseLocaleTime,\n      y: d3_time_parseYear,\n      Y: d3_time_parseFullYear,\n      Z: d3_time_parseZone,\n      \"%\": d3_time_parseLiteralPercent\n    };\n\n    function d3_time_parseWeekdayAbbrev(date, string, i) {\n      d3_time_dayAbbrevRe.lastIndex = 0;\n      var n = d3_time_dayAbbrevRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function d3_time_parseWeekday(date, string, i) {\n      d3_time_dayRe.lastIndex = 0;\n      var n = d3_time_dayRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function d3_time_parseMonthAbbrev(date, string, i) {\n      d3_time_monthAbbrevRe.lastIndex = 0;\n      var n = d3_time_monthAbbrevRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function d3_time_parseMonth(date, string, i) {\n      d3_time_monthRe.lastIndex = 0;\n      var n = d3_time_monthRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function d3_time_parseLocaleFull(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.c.toString(), string, i);\n    }\n\n    function d3_time_parseLocaleDate(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.x.toString(), string, i);\n    }\n\n    function d3_time_parseLocaleTime(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.X.toString(), string, i);\n    }\n\n    function d3_time_parseAmPm(date, string, i) {\n      var n = d3_time_periodLookup.get(string.slice(i, i += 2).toLowerCase());\n      return n == null ? -1 : (date.p = n, i);\n    }\n\n    return d3_time_format;\n  }\n\n  var d3_time_formatPads = {\n    \"-\": \"\",\n    _: \" \",\n    \"0\": \"0\"\n  },\n      d3_time_numberRe = /^\\s*\\d+/,\n      d3_time_percentRe = /^%/;\n\n  function d3_time_formatPad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\",\n        string = (sign ? -value : value) + \"\",\n        length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n\n  function d3_time_formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(d3.requote).join(\"|\") + \")\", \"i\");\n  }\n\n  function d3_time_formatLookup(names) {\n    var map = new d3_Map(),\n        i = -1,\n        n = names.length;\n\n    while (++i < n) {\n      map.set(names[i].toLowerCase(), i);\n    }\n\n    return map;\n  }\n\n  function d3_time_parseWeekdayNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 1));\n    return n ? (date.w = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseWeekNumberSunday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.U = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseWeekNumberMonday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.W = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseFullYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 4));\n    return n ? (date.y = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.y = d3_time_expandYear(+n[0]), i + n[0].length) : -1;\n  }\n\n  function d3_time_parseZone(date, string, i) {\n    return /^[+-]\\d{4}$/.test(string = string.slice(i, i + 5)) ? (date.Z = -string, i + 5) : -1;\n  }\n\n  function d3_time_expandYear(d) {\n    return d + (d > 68 ? 1900 : 2e3);\n  }\n\n  function d3_time_parseMonthNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.m = n[0] - 1, i + n[0].length) : -1;\n  }\n\n  function d3_time_parseDay(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseDayOfYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.j = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseHour24(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.H = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseMinutes(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.M = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseSeconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.S = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_parseMilliseconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.L = +n[0], i + n[0].length) : -1;\n  }\n\n  function d3_time_zone(d) {\n    var z = d.getTimezoneOffset(),\n        zs = z > 0 ? \"-\" : \"+\",\n        zh = abs(z) / 60 | 0,\n        zm = abs(z) % 60;\n    return zs + d3_time_formatPad(zh, \"0\", 2) + d3_time_formatPad(zm, \"0\", 2);\n  }\n\n  function d3_time_parseLiteralPercent(date, string, i) {\n    d3_time_percentRe.lastIndex = 0;\n    var n = d3_time_percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n\n  function d3_time_formatMulti(formats) {\n    var n = formats.length,\n        i = -1;\n\n    while (++i < n) {\n      formats[i][0] = this(formats[i][0]);\n    }\n\n    return function (date) {\n      var i = 0,\n          f = formats[i];\n\n      while (!f[1](date)) {\n        f = formats[++i];\n      }\n\n      return f[0](date);\n    };\n  }\n\n  d3.locale = function (locale) {\n    return {\n      numberFormat: d3_locale_numberFormat(locale),\n      timeFormat: d3_locale_timeFormat(locale)\n    };\n  };\n\n  var d3_locale_enUS = d3.locale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [3],\n    currency: [\"$\", \"\"],\n    dateTime: \"%a %b %e %X %Y\",\n    date: \"%m/%d/%Y\",\n    time: \"%H:%M:%S\",\n    periods: [\"AM\", \"PM\"],\n    days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n    shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n  });\n  d3.format = d3_locale_enUS.numberFormat;\n  d3.geo = {};\n\n  function d3_adder() {}\n\n  d3_adder.prototype = {\n    s: 0,\n    t: 0,\n    add: function add(y) {\n      d3_adderSum(y, this.t, d3_adderTemp);\n      d3_adderSum(d3_adderTemp.s, this.s, this);\n      if (this.s) this.t += d3_adderTemp.t;else this.s = d3_adderTemp.t;\n    },\n    reset: function reset() {\n      this.s = this.t = 0;\n    },\n    valueOf: function valueOf() {\n      return this.s;\n    }\n  };\n  var d3_adderTemp = new d3_adder();\n\n  function d3_adderSum(a, b, o) {\n    var x = o.s = a + b,\n        bv = x - a,\n        av = x - bv;\n    o.t = a - av + (b - bv);\n  }\n\n  d3.geo.stream = function (object, listener) {\n    if (object && d3_geo_streamObjectType.hasOwnProperty(object.type)) {\n      d3_geo_streamObjectType[object.type](object, listener);\n    } else {\n      d3_geo_streamGeometry(object, listener);\n    }\n  };\n\n  function d3_geo_streamGeometry(geometry, listener) {\n    if (geometry && d3_geo_streamGeometryType.hasOwnProperty(geometry.type)) {\n      d3_geo_streamGeometryType[geometry.type](geometry, listener);\n    }\n  }\n\n  var d3_geo_streamObjectType = {\n    Feature: function Feature(feature, listener) {\n      d3_geo_streamGeometry(feature.geometry, listener);\n    },\n    FeatureCollection: function FeatureCollection(object, listener) {\n      var features = object.features,\n          i = -1,\n          n = features.length;\n\n      while (++i < n) {\n        d3_geo_streamGeometry(features[i].geometry, listener);\n      }\n    }\n  };\n  var d3_geo_streamGeometryType = {\n    Sphere: function Sphere(object, listener) {\n      listener.sphere();\n    },\n    Point: function Point(object, listener) {\n      object = object.coordinates;\n      listener.point(object[0], object[1], object[2]);\n    },\n    MultiPoint: function MultiPoint(object, listener) {\n      var coordinates = object.coordinates,\n          i = -1,\n          n = coordinates.length;\n\n      while (++i < n) {\n        object = coordinates[i], listener.point(object[0], object[1], object[2]);\n      }\n    },\n    LineString: function LineString(object, listener) {\n      d3_geo_streamLine(object.coordinates, listener, 0);\n    },\n    MultiLineString: function MultiLineString(object, listener) {\n      var coordinates = object.coordinates,\n          i = -1,\n          n = coordinates.length;\n\n      while (++i < n) {\n        d3_geo_streamLine(coordinates[i], listener, 0);\n      }\n    },\n    Polygon: function Polygon(object, listener) {\n      d3_geo_streamPolygon(object.coordinates, listener);\n    },\n    MultiPolygon: function MultiPolygon(object, listener) {\n      var coordinates = object.coordinates,\n          i = -1,\n          n = coordinates.length;\n\n      while (++i < n) {\n        d3_geo_streamPolygon(coordinates[i], listener);\n      }\n    },\n    GeometryCollection: function GeometryCollection(object, listener) {\n      var geometries = object.geometries,\n          i = -1,\n          n = geometries.length;\n\n      while (++i < n) {\n        d3_geo_streamGeometry(geometries[i], listener);\n      }\n    }\n  };\n\n  function d3_geo_streamLine(coordinates, listener, closed) {\n    var i = -1,\n        n = coordinates.length - closed,\n        coordinate;\n    listener.lineStart();\n\n    while (++i < n) {\n      coordinate = coordinates[i], listener.point(coordinate[0], coordinate[1], coordinate[2]);\n    }\n\n    listener.lineEnd();\n  }\n\n  function d3_geo_streamPolygon(coordinates, listener) {\n    var i = -1,\n        n = coordinates.length;\n    listener.polygonStart();\n\n    while (++i < n) {\n      d3_geo_streamLine(coordinates[i], listener, 1);\n    }\n\n    listener.polygonEnd();\n  }\n\n  d3.geo.area = function (object) {\n    d3_geo_areaSum = 0;\n    d3.geo.stream(object, d3_geo_area);\n    return d3_geo_areaSum;\n  };\n\n  var d3_geo_areaSum,\n      d3_geo_areaRingSum = new d3_adder();\n  var d3_geo_area = {\n    sphere: function sphere() {\n      d3_geo_areaSum += 4 * ;\n    },\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function polygonStart() {\n      d3_geo_areaRingSum.reset();\n      d3_geo_area.lineStart = d3_geo_areaRingStart;\n    },\n    polygonEnd: function polygonEnd() {\n      var area = 2 * d3_geo_areaRingSum;\n      d3_geo_areaSum += area < 0 ? 4 *  + area : area;\n      d3_geo_area.lineStart = d3_geo_area.lineEnd = d3_geo_area.point = d3_noop;\n    }\n  };\n\n  function d3_geo_areaRingStart() {\n    var 00, 00, 0, cos0, sin0;\n\n    d3_geo_area.point = function (, ) {\n      d3_geo_area.point = nextPoint;\n      0 = (00 = ) * d3_radians, cos0 = Math.cos( = (00 = ) * d3_radians / 2 +  / 4), sin0 = Math.sin();\n    };\n\n    function nextPoint(, ) {\n       *= d3_radians;\n       =  * d3_radians / 2 +  / 4;\n      var d =  - 0,\n          sd = d >= 0 ? 1 : -1,\n          ad = sd * d,\n          cos = Math.cos(),\n          sin = Math.sin(),\n          k = sin0 * sin,\n          u = cos0 * cos + k * Math.cos(ad),\n          v = k * sd * Math.sin(ad);\n      d3_geo_areaRingSum.add(Math.atan2(v, u));\n      0 = , cos0 = cos, sin0 = sin;\n    }\n\n    d3_geo_area.lineEnd = function () {\n      nextPoint(00, 00);\n    };\n  }\n\n  function d3_geo_cartesian(spherical) {\n    var  = spherical[0],\n         = spherical[1],\n        cos = Math.cos();\n    return [cos * Math.cos(), cos * Math.sin(), Math.sin()];\n  }\n\n  function d3_geo_cartesianDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n  }\n\n  function d3_geo_cartesianCross(a, b) {\n    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n  }\n\n  function d3_geo_cartesianAdd(a, b) {\n    a[0] += b[0];\n    a[1] += b[1];\n    a[2] += b[2];\n  }\n\n  function d3_geo_cartesianScale(vector, k) {\n    return [vector[0] * k, vector[1] * k, vector[2] * k];\n  }\n\n  function d3_geo_cartesianNormalize(d) {\n    var l = Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n    d[0] /= l;\n    d[1] /= l;\n    d[2] /= l;\n  }\n\n  function d3_geo_spherical(cartesian) {\n    return [Math.atan2(cartesian[1], cartesian[0]), d3_asin(cartesian[2])];\n  }\n\n  function d3_geo_sphericalEqual(a, b) {\n    return abs(a[0] - b[0]) <  && abs(a[1] - b[1]) < ;\n  }\n\n  d3.geo.bounds = function () {\n    var 0, 0, 1, 1, _, __, __, p0, dSum, ranges, range;\n    var bound = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function polygonStart() {\n        bound.point = ringPoint;\n        bound.lineStart = ringStart;\n        bound.lineEnd = ringEnd;\n        dSum = 0;\n        d3_geo_area.polygonStart();\n      },\n      polygonEnd: function polygonEnd() {\n        d3_geo_area.polygonEnd();\n        bound.point = point;\n        bound.lineStart = lineStart;\n        bound.lineEnd = lineEnd;\n        if (d3_geo_areaRingSum < 0) 0 = -(1 = 180), 0 = -(1 = 90);else if (dSum > ) 1 = 90;else if (dSum < -) 0 = -90;\n        range[0] = 0, range[1] = 1;\n      }\n    };\n\n    function point(, ) {\n      ranges.push(range = [0 = , 1 = ]);\n      if ( < 0) 0 = ;\n      if ( > 1) 1 = ;\n    }\n\n    function linePoint(, ) {\n      var p = d3_geo_cartesian([ * d3_radians,  * d3_radians]);\n\n      if (p0) {\n        var normal = d3_geo_cartesianCross(p0, p),\n            equatorial = [normal[1], -normal[0], 0],\n            inflection = d3_geo_cartesianCross(equatorial, normal);\n        d3_geo_cartesianNormalize(inflection);\n        inflection = d3_geo_spherical(inflection);\n        var d =  - _,\n            s = d > 0 ? 1 : -1,\n            i = inflection[0] * d3_degrees * s,\n            antimeridian = abs(d) > 180;\n\n        if (antimeridian ^ (s * _ < i && i < s * )) {\n          var i = inflection[1] * d3_degrees;\n          if (i > 1) 1 = i;\n        } else if (i = (i + 360) % 360 - 180, antimeridian ^ (s * _ < i && i < s * )) {\n          var i = -inflection[1] * d3_degrees;\n          if (i < 0) 0 = i;\n        } else {\n          if ( < 0) 0 = ;\n          if ( > 1) 1 = ;\n        }\n\n        if (antimeridian) {\n          if ( < _) {\n            if (angle(0, ) > angle(0, 1)) 1 = ;\n          } else {\n            if (angle(, 1) > angle(0, 1)) 0 = ;\n          }\n        } else {\n          if (1 >= 0) {\n            if ( < 0) 0 = ;\n            if ( > 1) 1 = ;\n          } else {\n            if ( > _) {\n              if (angle(0, ) > angle(0, 1)) 1 = ;\n            } else {\n              if (angle(, 1) > angle(0, 1)) 0 = ;\n            }\n          }\n        }\n      } else {\n        point(, );\n      }\n\n      p0 = p, _ = ;\n    }\n\n    function lineStart() {\n      bound.point = linePoint;\n    }\n\n    function lineEnd() {\n      range[0] = 0, range[1] = 1;\n      bound.point = point;\n      p0 = null;\n    }\n\n    function ringPoint(, ) {\n      if (p0) {\n        var d =  - _;\n        dSum += abs(d) > 180 ? d + (d > 0 ? 360 : -360) : d;\n      } else __ = , __ = ;\n\n      d3_geo_area.point(, );\n      linePoint(, );\n    }\n\n    function ringStart() {\n      d3_geo_area.lineStart();\n    }\n\n    function ringEnd() {\n      ringPoint(__, __);\n      d3_geo_area.lineEnd();\n      if (abs(dSum) > ) 0 = -(1 = 180);\n      range[0] = 0, range[1] = 1;\n      p0 = null;\n    }\n\n    function angle(0, 1) {\n      return (1 -= 0) < 0 ? 1 + 360 : 1;\n    }\n\n    function compareRanges(a, b) {\n      return a[0] - b[0];\n    }\n\n    function withinRange(x, range) {\n      return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n    }\n\n    return function (feature) {\n      1 = 1 = -(0 = 0 = Infinity);\n      ranges = [];\n      d3.geo.stream(feature, bound);\n      var n = ranges.length;\n\n      if (n) {\n        ranges.sort(compareRanges);\n\n        for (var i = 1, a = ranges[0], b, merged = [a]; i < n; ++i) {\n          b = ranges[i];\n\n          if (withinRange(b[0], a) || withinRange(b[1], a)) {\n            if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n            if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n          } else {\n            merged.push(a = b);\n          }\n        }\n\n        var best = -Infinity,\n            d;\n\n        for (var n = merged.length - 1, i = 0, a = merged[n], b; i <= n; a = b, ++i) {\n          b = merged[i];\n          if ((d = angle(a[1], b[0])) > best) best = d, 0 = b[0], 1 = a[1];\n        }\n      }\n\n      ranges = range = null;\n      return 0 === Infinity || 0 === Infinity ? [[NaN, NaN], [NaN, NaN]] : [[0, 0], [1, 1]];\n    };\n  }();\n\n  d3.geo.centroid = function (object) {\n    d3_geo_centroidW0 = d3_geo_centroidW1 = d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n    d3.geo.stream(object, d3_geo_centroid);\n    var x = d3_geo_centroidX2,\n        y = d3_geo_centroidY2,\n        z = d3_geo_centroidZ2,\n        m = x * x + y * y + z * z;\n\n    if (m < 2) {\n      x = d3_geo_centroidX1, y = d3_geo_centroidY1, z = d3_geo_centroidZ1;\n      if (d3_geo_centroidW1 < ) x = d3_geo_centroidX0, y = d3_geo_centroidY0, z = d3_geo_centroidZ0;\n      m = x * x + y * y + z * z;\n      if (m < 2) return [NaN, NaN];\n    }\n\n    return [Math.atan2(y, x) * d3_degrees, d3_asin(z / Math.sqrt(m)) * d3_degrees];\n  };\n\n  var d3_geo_centroidW0, d3_geo_centroidW1, d3_geo_centroidX0, d3_geo_centroidY0, d3_geo_centroidZ0, d3_geo_centroidX1, d3_geo_centroidY1, d3_geo_centroidZ1, d3_geo_centroidX2, d3_geo_centroidY2, d3_geo_centroidZ2;\n  var d3_geo_centroid = {\n    sphere: d3_noop,\n    point: d3_geo_centroidPoint,\n    lineStart: d3_geo_centroidLineStart,\n    lineEnd: d3_geo_centroidLineEnd,\n    polygonStart: function polygonStart() {\n      d3_geo_centroid.lineStart = d3_geo_centroidRingStart;\n    },\n    polygonEnd: function polygonEnd() {\n      d3_geo_centroid.lineStart = d3_geo_centroidLineStart;\n    }\n  };\n\n  function d3_geo_centroidPoint(, ) {\n     *= d3_radians;\n    var cos = Math.cos( *= d3_radians);\n    d3_geo_centroidPointXYZ(cos * Math.cos(), cos * Math.sin(), Math.sin());\n  }\n\n  function d3_geo_centroidPointXYZ(x, y, z) {\n    ++d3_geo_centroidW0;\n    d3_geo_centroidX0 += (x - d3_geo_centroidX0) / d3_geo_centroidW0;\n    d3_geo_centroidY0 += (y - d3_geo_centroidY0) / d3_geo_centroidW0;\n    d3_geo_centroidZ0 += (z - d3_geo_centroidZ0) / d3_geo_centroidW0;\n  }\n\n  function d3_geo_centroidLineStart() {\n    var x0, y0, z0;\n\n    d3_geo_centroid.point = function (, ) {\n       *= d3_radians;\n      var cos = Math.cos( *= d3_radians);\n      x0 = cos * Math.cos();\n      y0 = cos * Math.sin();\n      z0 = Math.sin();\n      d3_geo_centroid.point = nextPoint;\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n\n    function nextPoint(, ) {\n       *= d3_radians;\n      var cos = Math.cos( *= d3_radians),\n          x = cos * Math.cos(),\n          y = cos * Math.sin(),\n          z = Math.sin(),\n          w = Math.atan2(Math.sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n\n  function d3_geo_centroidLineEnd() {\n    d3_geo_centroid.point = d3_geo_centroidPoint;\n  }\n\n  function d3_geo_centroidRingStart() {\n    var 00, 00, x0, y0, z0;\n\n    d3_geo_centroid.point = function (, ) {\n      00 = , 00 = ;\n      d3_geo_centroid.point = nextPoint;\n       *= d3_radians;\n      var cos = Math.cos( *= d3_radians);\n      x0 = cos * Math.cos();\n      y0 = cos * Math.sin();\n      z0 = Math.sin();\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n\n    d3_geo_centroid.lineEnd = function () {\n      nextPoint(00, 00);\n      d3_geo_centroid.lineEnd = d3_geo_centroidLineEnd;\n      d3_geo_centroid.point = d3_geo_centroidPoint;\n    };\n\n    function nextPoint(, ) {\n       *= d3_radians;\n      var cos = Math.cos( *= d3_radians),\n          x = cos * Math.cos(),\n          y = cos * Math.sin(),\n          z = Math.sin(),\n          cx = y0 * z - z0 * y,\n          cy = z0 * x - x0 * z,\n          cz = x0 * y - y0 * x,\n          m = Math.sqrt(cx * cx + cy * cy + cz * cz),\n          u = x0 * x + y0 * y + z0 * z,\n          v = m && -d3_acos(u) / m,\n          w = Math.atan2(m, u);\n      d3_geo_centroidX2 += v * cx;\n      d3_geo_centroidY2 += v * cy;\n      d3_geo_centroidZ2 += v * cz;\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n\n  function d3_geo_compose(a, b) {\n    function compose(x, y) {\n      return x = a(x, y), b(x[0], x[1]);\n    }\n\n    if (a.invert && b.invert) compose.invert = function (x, y) {\n      return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n    };\n    return compose;\n  }\n\n  function d3_true() {\n    return true;\n  }\n\n  function d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener) {\n    var subject = [],\n        clip = [];\n    segments.forEach(function (segment) {\n      if ((n = segment.length - 1) <= 0) return;\n      var n,\n          p0 = segment[0],\n          p1 = segment[n];\n\n      if (d3_geo_sphericalEqual(p0, p1)) {\n        listener.lineStart();\n\n        for (var i = 0; i < n; ++i) {\n          listener.point((p0 = segment[i])[0], p0[1]);\n        }\n\n        listener.lineEnd();\n        return;\n      }\n\n      var a = new d3_geo_clipPolygonIntersection(p0, segment, null, true),\n          b = new d3_geo_clipPolygonIntersection(p0, null, a, false);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n      a = new d3_geo_clipPolygonIntersection(p1, segment, null, false);\n      b = new d3_geo_clipPolygonIntersection(p1, null, a, true);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n    });\n    clip.sort(compare);\n    d3_geo_clipPolygonLinkCircular(subject);\n    d3_geo_clipPolygonLinkCircular(clip);\n    if (!subject.length) return;\n\n    for (var i = 0, entry = clipStartInside, n = clip.length; i < n; ++i) {\n      clip[i].e = entry = !entry;\n    }\n\n    var start = subject[0],\n        points,\n        point;\n\n    while (1) {\n      var current = start,\n          isSubject = true;\n\n      while (current.v) {\n        if ((current = current.n) === start) return;\n      }\n\n      points = current.z;\n      listener.lineStart();\n\n      do {\n        current.v = current.o.v = true;\n\n        if (current.e) {\n          if (isSubject) {\n            for (var i = 0, n = points.length; i < n; ++i) {\n              listener.point((point = points[i])[0], point[1]);\n            }\n          } else {\n            interpolate(current.x, current.n.x, 1, listener);\n          }\n\n          current = current.n;\n        } else {\n          if (isSubject) {\n            points = current.p.z;\n\n            for (var i = points.length - 1; i >= 0; --i) {\n              listener.point((point = points[i])[0], point[1]);\n            }\n          } else {\n            interpolate(current.x, current.p.x, -1, listener);\n          }\n\n          current = current.p;\n        }\n\n        current = current.o;\n        points = current.z;\n        isSubject = !isSubject;\n      } while (!current.v);\n\n      listener.lineEnd();\n    }\n  }\n\n  function d3_geo_clipPolygonLinkCircular(array) {\n    if (!(n = array.length)) return;\n    var n,\n        i = 0,\n        a = array[0],\n        b;\n\n    while (++i < n) {\n      a.n = b = array[i];\n      b.p = a;\n      a = b;\n    }\n\n    a.n = b = array[0];\n    b.p = a;\n  }\n\n  function d3_geo_clipPolygonIntersection(point, points, other, entry) {\n    this.x = point;\n    this.z = points;\n    this.o = other;\n    this.e = entry;\n    this.v = false;\n    this.n = this.p = null;\n  }\n\n  function d3_geo_clip(pointVisible, clipLine, interpolate, clipStart) {\n    return function (rotate, listener) {\n      var line = clipLine(listener),\n          rotatedClipStart = rotate.invert(clipStart[0], clipStart[1]);\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function polygonStart() {\n          clip.point = pointRing;\n          clip.lineStart = ringStart;\n          clip.lineEnd = ringEnd;\n          segments = [];\n          polygon = [];\n        },\n        polygonEnd: function polygonEnd() {\n          clip.point = point;\n          clip.lineStart = lineStart;\n          clip.lineEnd = lineEnd;\n          segments = d3.merge(segments);\n          var clipStartInside = d3_geo_pointInPolygon(rotatedClipStart, polygon);\n\n          if (segments.length) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            d3_geo_clipPolygon(segments, d3_geo_clipSort, clipStartInside, interpolate, listener);\n          } else if (clipStartInside) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n            interpolate(null, null, 1, listener);\n            listener.lineEnd();\n          }\n\n          if (polygonStarted) listener.polygonEnd(), polygonStarted = false;\n          segments = polygon = null;\n        },\n        sphere: function sphere() {\n          listener.polygonStart();\n          listener.lineStart();\n          interpolate(null, null, 1, listener);\n          listener.lineEnd();\n          listener.polygonEnd();\n        }\n      };\n\n      function point(, ) {\n        var point = rotate(, );\n        if (pointVisible( = point[0],  = point[1])) listener.point(, );\n      }\n\n      function pointLine(, ) {\n        var point = rotate(, );\n        line.point(point[0], point[1]);\n      }\n\n      function lineStart() {\n        clip.point = pointLine;\n        line.lineStart();\n      }\n\n      function lineEnd() {\n        clip.point = point;\n        line.lineEnd();\n      }\n\n      var segments;\n      var buffer = d3_geo_clipBufferListener(),\n          ringListener = clipLine(buffer),\n          polygonStarted = false,\n          polygon,\n          ring;\n\n      function pointRing(, ) {\n        ring.push([, ]);\n        var point = rotate(, );\n        ringListener.point(point[0], point[1]);\n      }\n\n      function ringStart() {\n        ringListener.lineStart();\n        ring = [];\n      }\n\n      function ringEnd() {\n        pointRing(ring[0][0], ring[0][1]);\n        ringListener.lineEnd();\n        var clean = ringListener.clean(),\n            ringSegments = buffer.buffer(),\n            segment,\n            n = ringSegments.length;\n        ring.pop();\n        polygon.push(ring);\n        ring = null;\n        if (!n) return;\n\n        if (clean & 1) {\n          segment = ringSegments[0];\n          var n = segment.length - 1,\n              i = -1,\n              point;\n\n          if (n > 0) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n\n            while (++i < n) {\n              listener.point((point = segment[i])[0], point[1]);\n            }\n\n            listener.lineEnd();\n          }\n\n          return;\n        }\n\n        if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n        segments.push(ringSegments.filter(d3_geo_clipSegmentLength1));\n      }\n\n      return clip;\n    };\n  }\n\n  function d3_geo_clipSegmentLength1(segment) {\n    return segment.length > 1;\n  }\n\n  function d3_geo_clipBufferListener() {\n    var lines = [],\n        line;\n    return {\n      lineStart: function lineStart() {\n        lines.push(line = []);\n      },\n      point: function point(, ) {\n        line.push([, ]);\n      },\n      lineEnd: d3_noop,\n      buffer: function buffer() {\n        var buffer = lines;\n        lines = [];\n        line = null;\n        return buffer;\n      },\n      rejoin: function rejoin() {\n        if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n      }\n    };\n  }\n\n  function d3_geo_clipSort(a, b) {\n    return ((a = a.x)[0] < 0 ? a[1] - half -  : half - a[1]) - ((b = b.x)[0] < 0 ? b[1] - half -  : half - b[1]);\n  }\n\n  var d3_geo_clipAntimeridian = d3_geo_clip(d3_true, d3_geo_clipAntimeridianLine, d3_geo_clipAntimeridianInterpolate, [-, - / 2]);\n\n  function d3_geo_clipAntimeridianLine(listener) {\n    var 0 = NaN,\n        0 = NaN,\n        s0 = NaN,\n        _clean;\n\n    return {\n      lineStart: function lineStart() {\n        listener.lineStart();\n        _clean = 1;\n      },\n      point: function point(1, 1) {\n        var s1 = 1 > 0 ?  : -,\n            d = abs(1 - 0);\n\n        if (abs(d - ) < ) {\n          listener.point(0, 0 = (0 + 1) / 2 > 0 ? half : -half);\n          listener.point(s0, 0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(s1, 0);\n          listener.point(1, 0);\n          _clean = 0;\n        } else if (s0 !== s1 && d >= ) {\n          if (abs(0 - s0) < ) 0 -= s0 * ;\n          if (abs(1 - s1) < ) 1 -= s1 * ;\n          0 = d3_geo_clipAntimeridianIntersect(0, 0, 1, 1);\n          listener.point(s0, 0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(s1, 0);\n          _clean = 0;\n        }\n\n        listener.point(0 = 1, 0 = 1);\n        s0 = s1;\n      },\n      lineEnd: function lineEnd() {\n        listener.lineEnd();\n        0 = 0 = NaN;\n      },\n      clean: function clean() {\n        return 2 - _clean;\n      }\n    };\n  }\n\n  function d3_geo_clipAntimeridianIntersect(0, 0, 1, 1) {\n    var cos0,\n        cos1,\n        sin0_1 = Math.sin(0 - 1);\n    return abs(sin0_1) >  ? Math.atan((Math.sin(0) * (cos1 = Math.cos(1)) * Math.sin(1) - Math.sin(1) * (cos0 = Math.cos(0)) * Math.sin(0)) / (cos0 * cos1 * sin0_1)) : (0 + 1) / 2;\n  }\n\n  function d3_geo_clipAntimeridianInterpolate(from, to, direction, listener) {\n    var ;\n\n    if (from == null) {\n       = direction * half;\n      listener.point(-, );\n      listener.point(0, );\n      listener.point(, );\n      listener.point(, 0);\n      listener.point(, -);\n      listener.point(0, -);\n      listener.point(-, -);\n      listener.point(-, 0);\n      listener.point(-, );\n    } else if (abs(from[0] - to[0]) > ) {\n      var s = from[0] < to[0] ?  : -;\n       = direction * s / 2;\n      listener.point(-s, );\n      listener.point(0, );\n      listener.point(s, );\n    } else {\n      listener.point(to[0], to[1]);\n    }\n  }\n\n  function d3_geo_pointInPolygon(point, polygon) {\n    var meridian = point[0],\n        parallel = point[1],\n        meridianNormal = [Math.sin(meridian), -Math.cos(meridian), 0],\n        polarAngle = 0,\n        winding = 0;\n    d3_geo_areaRingSum.reset();\n\n    for (var i = 0, n = polygon.length; i < n; ++i) {\n      var ring = polygon[i],\n          m = ring.length;\n      if (!m) continue;\n      var point0 = ring[0],\n          0 = point0[0],\n          0 = point0[1] / 2 +  / 4,\n          sin0 = Math.sin(0),\n          cos0 = Math.cos(0),\n          j = 1;\n\n      while (true) {\n        if (j === m) j = 0;\n        point = ring[j];\n        var  = point[0],\n             = point[1] / 2 +  / 4,\n            sin = Math.sin(),\n            cos = Math.cos(),\n            d =  - 0,\n            sd = d >= 0 ? 1 : -1,\n            ad = sd * d,\n            antimeridian = ad > ,\n            k = sin0 * sin;\n        d3_geo_areaRingSum.add(Math.atan2(k * sd * Math.sin(ad), cos0 * cos + k * Math.cos(ad)));\n        polarAngle += antimeridian ? d + sd *  : d;\n\n        if (antimeridian ^ 0 >= meridian ^  >= meridian) {\n          var arc = d3_geo_cartesianCross(d3_geo_cartesian(point0), d3_geo_cartesian(point));\n          d3_geo_cartesianNormalize(arc);\n          var intersection = d3_geo_cartesianCross(meridianNormal, arc);\n          d3_geo_cartesianNormalize(intersection);\n          var arc = (antimeridian ^ d >= 0 ? -1 : 1) * d3_asin(intersection[2]);\n\n          if (parallel > arc || parallel === arc && (arc[0] || arc[1])) {\n            winding += antimeridian ^ d >= 0 ? 1 : -1;\n          }\n        }\n\n        if (!j++) break;\n        0 = , sin0 = sin, cos0 = cos, point0 = point;\n      }\n    }\n\n    return (polarAngle < - || polarAngle <  && d3_geo_areaRingSum < -) ^ winding & 1;\n  }\n\n  function d3_geo_clipCircle(radius) {\n    var cr = Math.cos(radius),\n        smallRadius = cr > 0,\n        notHemisphere = abs(cr) > ,\n        interpolate = d3_geo_circleInterpolate(radius, 6 * d3_radians);\n    return d3_geo_clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-, radius - ]);\n\n    function visible(, ) {\n      return Math.cos() * Math.cos() > cr;\n    }\n\n    function clipLine(listener) {\n      var point0, c0, v0, v00, _clean2;\n\n      return {\n        lineStart: function lineStart() {\n          v00 = v0 = false;\n          _clean2 = 1;\n        },\n        point: function point(, ) {\n          var point1 = [, ],\n              point2,\n              v = visible(, ),\n              c = smallRadius ? v ? 0 : code(, ) : v ? code( + ( < 0 ?  : -), ) : 0;\n          if (!point0 && (v00 = v0 = v)) listener.lineStart();\n\n          if (v !== v0) {\n            point2 = intersect(point0, point1);\n\n            if (d3_geo_sphericalEqual(point0, point2) || d3_geo_sphericalEqual(point1, point2)) {\n              point1[0] += ;\n              point1[1] += ;\n              v = visible(point1[0], point1[1]);\n            }\n          }\n\n          if (v !== v0) {\n            _clean2 = 0;\n\n            if (v) {\n              listener.lineStart();\n              point2 = intersect(point1, point0);\n              listener.point(point2[0], point2[1]);\n            } else {\n              point2 = intersect(point0, point1);\n              listener.point(point2[0], point2[1]);\n              listener.lineEnd();\n            }\n\n            point0 = point2;\n          } else if (notHemisphere && point0 && smallRadius ^ v) {\n            var t;\n\n            if (!(c & c0) && (t = intersect(point1, point0, true))) {\n              _clean2 = 0;\n\n              if (smallRadius) {\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n              } else {\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n              }\n            }\n          }\n\n          if (v && (!point0 || !d3_geo_sphericalEqual(point0, point1))) {\n            listener.point(point1[0], point1[1]);\n          }\n\n          point0 = point1, v0 = v, c0 = c;\n        },\n        lineEnd: function lineEnd() {\n          if (v0) listener.lineEnd();\n          point0 = null;\n        },\n        clean: function clean() {\n          return _clean2 | (v00 && v0) << 1;\n        }\n      };\n    }\n\n    function intersect(a, b, two) {\n      var pa = d3_geo_cartesian(a),\n          pb = d3_geo_cartesian(b);\n      var n1 = [1, 0, 0],\n          n2 = d3_geo_cartesianCross(pa, pb),\n          n2n2 = d3_geo_cartesianDot(n2, n2),\n          n1n2 = n2[0],\n          determinant = n2n2 - n1n2 * n1n2;\n      if (!determinant) return !two && a;\n      var c1 = cr * n2n2 / determinant,\n          c2 = -cr * n1n2 / determinant,\n          n1xn2 = d3_geo_cartesianCross(n1, n2),\n          A = d3_geo_cartesianScale(n1, c1),\n          B = d3_geo_cartesianScale(n2, c2);\n      d3_geo_cartesianAdd(A, B);\n      var u = n1xn2,\n          w = d3_geo_cartesianDot(A, u),\n          uu = d3_geo_cartesianDot(u, u),\n          t2 = w * w - uu * (d3_geo_cartesianDot(A, A) - 1);\n      if (t2 < 0) return;\n      var t = Math.sqrt(t2),\n          q = d3_geo_cartesianScale(u, (-w - t) / uu);\n      d3_geo_cartesianAdd(q, A);\n      q = d3_geo_spherical(q);\n      if (!two) return q;\n      var 0 = a[0],\n          1 = b[0],\n          0 = a[1],\n          1 = b[1],\n          z;\n      if (1 < 0) z = 0, 0 = 1, 1 = z;\n      var  = 1 - 0,\n          polar = abs( - ) < ,\n          meridian = polar ||  < ;\n      if (!polar && 1 < 0) z = 0, 0 = 1, 1 = z;\n\n      if (meridian ? polar ? 0 + 1 > 0 ^ q[1] < (abs(q[0] - 0) <  ? 0 : 1) : 0 <= q[1] && q[1] <= 1 :  >  ^ (0 <= q[0] && q[0] <= 1)) {\n        var q1 = d3_geo_cartesianScale(u, (-w + t) / uu);\n        d3_geo_cartesianAdd(q1, A);\n        return [q, d3_geo_spherical(q1)];\n      }\n    }\n\n    function code(, ) {\n      var r = smallRadius ? radius :  - radius,\n          code = 0;\n      if ( < -r) code |= 1;else if ( > r) code |= 2;\n      if ( < -r) code |= 4;else if ( > r) code |= 8;\n      return code;\n    }\n  }\n\n  function d3_geom_clipLine(x0, y0, x1, y1) {\n    return function (line) {\n      var a = line.a,\n          b = line.b,\n          ax = a.x,\n          ay = a.y,\n          bx = b.x,\n          by = b.y,\n          t0 = 0,\n          t1 = 1,\n          dx = bx - ax,\n          dy = by - ay,\n          r;\n      r = x0 - ax;\n      if (!dx && r > 0) return;\n      r /= dx;\n\n      if (dx < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dx > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n\n      r = x1 - ax;\n      if (!dx && r < 0) return;\n      r /= dx;\n\n      if (dx < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dx > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n\n      r = y0 - ay;\n      if (!dy && r > 0) return;\n      r /= dy;\n\n      if (dy < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dy > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n\n      r = y1 - ay;\n      if (!dy && r < 0) return;\n      r /= dy;\n\n      if (dy < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dy > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n\n      if (t0 > 0) line.a = {\n        x: ax + t0 * dx,\n        y: ay + t0 * dy\n      };\n      if (t1 < 1) line.b = {\n        x: ax + t1 * dx,\n        y: ay + t1 * dy\n      };\n      return line;\n    };\n  }\n\n  var d3_geo_clipExtentMAX = 1e9;\n\n  d3.geo.clipExtent = function () {\n    var x0,\n        y0,\n        x1,\n        y1,\n        _stream,\n        clip,\n        clipExtent = {\n      stream: function stream(output) {\n        if (_stream) _stream.valid = false;\n        _stream = clip(output);\n        _stream.valid = true;\n        return _stream;\n      },\n      extent: function extent(_) {\n        if (!arguments.length) return [[x0, y0], [x1, y1]];\n        clip = d3_geo_clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]);\n        if (_stream) _stream.valid = false, _stream = null;\n        return clipExtent;\n      }\n    };\n\n    return clipExtent.extent([[0, 0], [960, 500]]);\n  };\n\n  function d3_geo_clipExtent(x0, y0, x1, y1) {\n    return function (listener) {\n      var listener_ = listener,\n          bufferListener = d3_geo_clipBufferListener(),\n          clipLine = d3_geom_clipLine(x0, y0, x1, y1),\n          segments,\n          polygon,\n          ring;\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function polygonStart() {\n          listener = bufferListener;\n          segments = [];\n          polygon = [];\n          clean = true;\n        },\n        polygonEnd: function polygonEnd() {\n          listener = listener_;\n          segments = d3.merge(segments);\n          var clipStartInside = insidePolygon([x0, y1]),\n              inside = clean && clipStartInside,\n              visible = segments.length;\n\n          if (inside || visible) {\n            listener.polygonStart();\n\n            if (inside) {\n              listener.lineStart();\n              interpolate(null, null, 1, listener);\n              listener.lineEnd();\n            }\n\n            if (visible) {\n              d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener);\n            }\n\n            listener.polygonEnd();\n          }\n\n          segments = polygon = ring = null;\n        }\n      };\n\n      function insidePolygon(p) {\n        var wn = 0,\n            n = polygon.length,\n            y = p[1];\n\n        for (var i = 0; i < n; ++i) {\n          for (var j = 1, v = polygon[i], m = v.length, a = v[0], b; j < m; ++j) {\n            b = v[j];\n\n            if (a[1] <= y) {\n              if (b[1] > y && d3_cross2d(a, b, p) > 0) ++wn;\n            } else {\n              if (b[1] <= y && d3_cross2d(a, b, p) < 0) --wn;\n            }\n\n            a = b;\n          }\n        }\n\n        return wn !== 0;\n      }\n\n      function interpolate(from, to, direction, listener) {\n        var a = 0,\n            a1 = 0;\n\n        if (from == null || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoints(from, to) < 0 ^ direction > 0) {\n          do {\n            listener.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n          } while ((a = (a + direction + 4) % 4) !== a1);\n        } else {\n          listener.point(to[0], to[1]);\n        }\n      }\n\n      function pointVisible(x, y) {\n        return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n      }\n\n      function point(x, y) {\n        if (pointVisible(x, y)) listener.point(x, y);\n      }\n\n      var x__, y__, v__, x_, y_, v_, first, clean;\n\n      function lineStart() {\n        clip.point = linePoint;\n        if (polygon) polygon.push(ring = []);\n        first = true;\n        v_ = false;\n        x_ = y_ = NaN;\n      }\n\n      function lineEnd() {\n        if (segments) {\n          linePoint(x__, y__);\n          if (v__ && v_) bufferListener.rejoin();\n          segments.push(bufferListener.buffer());\n        }\n\n        clip.point = point;\n        if (v_) listener.lineEnd();\n      }\n\n      function linePoint(x, y) {\n        x = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, x));\n        y = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, y));\n        var v = pointVisible(x, y);\n        if (polygon) ring.push([x, y]);\n\n        if (first) {\n          x__ = x, y__ = y, v__ = v;\n          first = false;\n\n          if (v) {\n            listener.lineStart();\n            listener.point(x, y);\n          }\n        } else {\n          if (v && v_) listener.point(x, y);else {\n            var l = {\n              a: {\n                x: x_,\n                y: y_\n              },\n              b: {\n                x: x,\n                y: y\n              }\n            };\n\n            if (clipLine(l)) {\n              if (!v_) {\n                listener.lineStart();\n                listener.point(l.a.x, l.a.y);\n              }\n\n              listener.point(l.b.x, l.b.y);\n              if (!v) listener.lineEnd();\n              clean = false;\n            } else if (v) {\n              listener.lineStart();\n              listener.point(x, y);\n              clean = false;\n            }\n          }\n        }\n\n        x_ = x, y_ = y, v_ = v;\n      }\n\n      return clip;\n    };\n\n    function corner(p, direction) {\n      return abs(p[0] - x0) <  ? direction > 0 ? 0 : 3 : abs(p[0] - x1) <  ? direction > 0 ? 2 : 1 : abs(p[1] - y0) <  ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2;\n    }\n\n    function compare(a, b) {\n      return comparePoints(a.x, b.x);\n    }\n\n    function comparePoints(a, b) {\n      var ca = corner(a, 1),\n          cb = corner(b, 1);\n      return ca !== cb ? ca - cb : ca === 0 ? b[1] - a[1] : ca === 1 ? a[0] - b[0] : ca === 2 ? a[1] - b[1] : b[0] - a[0];\n    }\n  }\n\n  function d3_geo_conic(projectAt) {\n    var 0 = 0,\n        1 =  / 3,\n        m = d3_geo_projectionMutator(projectAt),\n        p = m(0, 1);\n\n    p.parallels = function (_) {\n      if (!arguments.length) return [0 /  * 180, 1 /  * 180];\n      return m(0 = _[0] *  / 180, 1 = _[1] *  / 180);\n    };\n\n    return p;\n  }\n\n  function d3_geo_conicEqualArea(0, 1) {\n    var sin0 = Math.sin(0),\n        n = (sin0 + Math.sin(1)) / 2,\n        C = 1 + sin0 * (2 * n - sin0),\n        0 = Math.sqrt(C) / n;\n\n    function forward(, ) {\n      var  = Math.sqrt(C - 2 * n * Math.sin()) / n;\n      return [ * Math.sin( *= n), 0 -  * Math.cos()];\n    }\n\n    forward.invert = function (x, y) {\n      var 0_y = 0 - y;\n      return [Math.atan2(x, 0_y) / n, d3_asin((C - (x * x + 0_y * 0_y) * n * n) / (2 * n))];\n    };\n\n    return forward;\n  }\n\n  (d3.geo.conicEqualArea = function () {\n    return d3_geo_conic(d3_geo_conicEqualArea);\n  }).raw = d3_geo_conicEqualArea;\n\n  d3.geo.albers = function () {\n    return d3.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070);\n  };\n\n  d3.geo.albersUsa = function () {\n    var lower48 = d3.geo.albers();\n    var alaska = d3.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]);\n    var hawaii = d3.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]);\n\n    var _point,\n        pointStream = {\n      point: function point(x, y) {\n        _point = [x, y];\n      }\n    },\n        lower48Point,\n        alaskaPoint,\n        hawaiiPoint;\n\n    function albersUsa(coordinates) {\n      var x = coordinates[0],\n          y = coordinates[1];\n      _point = null;\n      (lower48Point(x, y), _point) || (alaskaPoint(x, y), _point) || hawaiiPoint(x, y);\n      return _point;\n    }\n\n    albersUsa.invert = function (coordinates) {\n      var k = lower48.scale(),\n          t = lower48.translate(),\n          x = (coordinates[0] - t[0]) / k,\n          y = (coordinates[1] - t[1]) / k;\n      return (y >= .12 && y < .234 && x >= -.425 && x < -.214 ? alaska : y >= .166 && y < .234 && x >= -.214 && x < -.115 ? hawaii : lower48).invert(coordinates);\n    };\n\n    albersUsa.stream = function (stream) {\n      var lower48Stream = lower48.stream(stream),\n          alaskaStream = alaska.stream(stream),\n          hawaiiStream = hawaii.stream(stream);\n      return {\n        point: function point(x, y) {\n          lower48Stream.point(x, y);\n          alaskaStream.point(x, y);\n          hawaiiStream.point(x, y);\n        },\n        sphere: function sphere() {\n          lower48Stream.sphere();\n          alaskaStream.sphere();\n          hawaiiStream.sphere();\n        },\n        lineStart: function lineStart() {\n          lower48Stream.lineStart();\n          alaskaStream.lineStart();\n          hawaiiStream.lineStart();\n        },\n        lineEnd: function lineEnd() {\n          lower48Stream.lineEnd();\n          alaskaStream.lineEnd();\n          hawaiiStream.lineEnd();\n        },\n        polygonStart: function polygonStart() {\n          lower48Stream.polygonStart();\n          alaskaStream.polygonStart();\n          hawaiiStream.polygonStart();\n        },\n        polygonEnd: function polygonEnd() {\n          lower48Stream.polygonEnd();\n          alaskaStream.polygonEnd();\n          hawaiiStream.polygonEnd();\n        }\n      };\n    };\n\n    albersUsa.precision = function (_) {\n      if (!arguments.length) return lower48.precision();\n      lower48.precision(_);\n      alaska.precision(_);\n      hawaii.precision(_);\n      return albersUsa;\n    };\n\n    albersUsa.scale = function (_) {\n      if (!arguments.length) return lower48.scale();\n      lower48.scale(_);\n      alaska.scale(_ * .35);\n      hawaii.scale(_);\n      return albersUsa.translate(lower48.translate());\n    };\n\n    albersUsa.translate = function (_) {\n      if (!arguments.length) return lower48.translate();\n      var k = lower48.scale(),\n          x = +_[0],\n          y = +_[1];\n      lower48Point = lower48.translate(_).clipExtent([[x - .455 * k, y - .238 * k], [x + .455 * k, y + .238 * k]]).stream(pointStream).point;\n      alaskaPoint = alaska.translate([x - .307 * k, y + .201 * k]).clipExtent([[x - .425 * k + , y + .12 * k + ], [x - .214 * k - , y + .234 * k - ]]).stream(pointStream).point;\n      hawaiiPoint = hawaii.translate([x - .205 * k, y + .212 * k]).clipExtent([[x - .214 * k + , y + .166 * k + ], [x - .115 * k - , y + .234 * k - ]]).stream(pointStream).point;\n      return albersUsa;\n    };\n\n    return albersUsa.scale(1070);\n  };\n\n  var d3_geo_pathAreaSum,\n      d3_geo_pathAreaPolygon,\n      d3_geo_pathArea = {\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function polygonStart() {\n      d3_geo_pathAreaPolygon = 0;\n      d3_geo_pathArea.lineStart = d3_geo_pathAreaRingStart;\n    },\n    polygonEnd: function polygonEnd() {\n      d3_geo_pathArea.lineStart = d3_geo_pathArea.lineEnd = d3_geo_pathArea.point = d3_noop;\n      d3_geo_pathAreaSum += abs(d3_geo_pathAreaPolygon / 2);\n    }\n  };\n\n  function d3_geo_pathAreaRingStart() {\n    var x00, y00, x0, y0;\n\n    d3_geo_pathArea.point = function (x, y) {\n      d3_geo_pathArea.point = nextPoint;\n      x00 = x0 = x, y00 = y0 = y;\n    };\n\n    function nextPoint(x, y) {\n      d3_geo_pathAreaPolygon += y0 * x - x0 * y;\n      x0 = x, y0 = y;\n    }\n\n    d3_geo_pathArea.lineEnd = function () {\n      nextPoint(x00, y00);\n    };\n  }\n\n  var d3_geo_pathBoundsX0, d3_geo_pathBoundsY0, d3_geo_pathBoundsX1, d3_geo_pathBoundsY1;\n  var d3_geo_pathBounds = {\n    point: d3_geo_pathBoundsPoint,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n\n  function d3_geo_pathBoundsPoint(x, y) {\n    if (x < d3_geo_pathBoundsX0) d3_geo_pathBoundsX0 = x;\n    if (x > d3_geo_pathBoundsX1) d3_geo_pathBoundsX1 = x;\n    if (y < d3_geo_pathBoundsY0) d3_geo_pathBoundsY0 = y;\n    if (y > d3_geo_pathBoundsY1) d3_geo_pathBoundsY1 = y;\n  }\n\n  function d3_geo_pathBuffer() {\n    var pointCircle = d3_geo_pathBufferCircle(4.5),\n        buffer = [];\n    var stream = {\n      point: point,\n      lineStart: function lineStart() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function polygonStart() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function polygonEnd() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function pointRadius(_) {\n        pointCircle = d3_geo_pathBufferCircle(_);\n        return stream;\n      },\n      result: function result() {\n        if (buffer.length) {\n          var result = buffer.join(\"\");\n          buffer = [];\n          return result;\n        }\n      }\n    };\n\n    function point(x, y) {\n      buffer.push(\"M\", x, \",\", y, pointCircle);\n    }\n\n    function pointLineStart(x, y) {\n      buffer.push(\"M\", x, \",\", y);\n      stream.point = pointLine;\n    }\n\n    function pointLine(x, y) {\n      buffer.push(\"L\", x, \",\", y);\n    }\n\n    function lineEnd() {\n      stream.point = point;\n    }\n\n    function lineEndPolygon() {\n      buffer.push(\"Z\");\n    }\n\n    return stream;\n  }\n\n  function d3_geo_pathBufferCircle(radius) {\n    return \"m0,\" + radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius + \"z\";\n  }\n\n  var d3_geo_pathCentroid = {\n    point: d3_geo_pathCentroidPoint,\n    lineStart: d3_geo_pathCentroidLineStart,\n    lineEnd: d3_geo_pathCentroidLineEnd,\n    polygonStart: function polygonStart() {\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidRingStart;\n    },\n    polygonEnd: function polygonEnd() {\n      d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidLineStart;\n      d3_geo_pathCentroid.lineEnd = d3_geo_pathCentroidLineEnd;\n    }\n  };\n\n  function d3_geo_pathCentroidPoint(x, y) {\n    d3_geo_centroidX0 += x;\n    d3_geo_centroidY0 += y;\n    ++d3_geo_centroidZ0;\n  }\n\n  function d3_geo_pathCentroidLineStart() {\n    var x0, y0;\n\n    d3_geo_pathCentroid.point = function (x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    };\n\n    function nextPoint(x, y) {\n      var dx = x - x0,\n          dy = y - y0,\n          z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n  }\n\n  function d3_geo_pathCentroidLineEnd() {\n    d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n  }\n\n  function d3_geo_pathCentroidRingStart() {\n    var x00, y00, x0, y0;\n\n    d3_geo_pathCentroid.point = function (x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x00 = x0 = x, y00 = y0 = y);\n    };\n\n    function nextPoint(x, y) {\n      var dx = x - x0,\n          dy = y - y0,\n          z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      z = y0 * x - x0 * y;\n      d3_geo_centroidX2 += z * (x0 + x);\n      d3_geo_centroidY2 += z * (y0 + y);\n      d3_geo_centroidZ2 += z * 3;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n\n    d3_geo_pathCentroid.lineEnd = function () {\n      nextPoint(x00, y00);\n    };\n  }\n\n  function d3_geo_pathContext(context) {\n    var _pointRadius = 4.5;\n    var stream = {\n      point: point,\n      lineStart: function lineStart() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function polygonStart() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function polygonEnd() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function pointRadius(_) {\n        _pointRadius = _;\n        return stream;\n      },\n      result: d3_noop\n    };\n\n    function point(x, y) {\n      context.moveTo(x + _pointRadius, y);\n      context.arc(x, y, _pointRadius, 0, );\n    }\n\n    function pointLineStart(x, y) {\n      context.moveTo(x, y);\n      stream.point = pointLine;\n    }\n\n    function pointLine(x, y) {\n      context.lineTo(x, y);\n    }\n\n    function lineEnd() {\n      stream.point = point;\n    }\n\n    function lineEndPolygon() {\n      context.closePath();\n    }\n\n    return stream;\n  }\n\n  function d3_geo_resample(project) {\n    var 2 = .5,\n        cosMinDistance = Math.cos(30 * d3_radians),\n        maxDepth = 16;\n\n    function resample(stream) {\n      return (maxDepth ? resampleRecursive : resampleNone)(stream);\n    }\n\n    function resampleNone(stream) {\n      return d3_geo_transformPoint(stream, function (x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      });\n    }\n\n    function resampleRecursive(stream) {\n      var 00, 00, x00, y00, a00, b00, c00, 0, x0, y0, a0, b0, c0;\n      var resample = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function polygonStart() {\n          stream.polygonStart();\n          resample.lineStart = ringStart;\n        },\n        polygonEnd: function polygonEnd() {\n          stream.polygonEnd();\n          resample.lineStart = lineStart;\n        }\n      };\n\n      function point(x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      }\n\n      function lineStart() {\n        x0 = NaN;\n        resample.point = linePoint;\n        stream.lineStart();\n      }\n\n      function linePoint(, ) {\n        var c = d3_geo_cartesian([, ]),\n            p = project(, );\n        resampleLineTo(x0, y0, 0, a0, b0, c0, x0 = p[0], y0 = p[1], 0 = , a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n        stream.point(x0, y0);\n      }\n\n      function lineEnd() {\n        resample.point = point;\n        stream.lineEnd();\n      }\n\n      function ringStart() {\n        lineStart();\n        resample.point = ringPoint;\n        resample.lineEnd = ringEnd;\n      }\n\n      function ringPoint(, ) {\n        linePoint(00 = , 00 = ), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n        resample.point = linePoint;\n      }\n\n      function ringEnd() {\n        resampleLineTo(x0, y0, 0, a0, b0, c0, x00, y00, 00, a00, b00, c00, maxDepth, stream);\n        resample.lineEnd = lineEnd;\n        lineEnd();\n      }\n\n      return resample;\n    }\n\n    function resampleLineTo(x0, y0, 0, a0, b0, c0, x1, y1, 1, a1, b1, c1, depth, stream) {\n      var dx = x1 - x0,\n          dy = y1 - y0,\n          d2 = dx * dx + dy * dy;\n\n      if (d2 > 4 * 2 && depth--) {\n        var a = a0 + a1,\n            b = b0 + b1,\n            c = c0 + c1,\n            m = Math.sqrt(a * a + b * b + c * c),\n            2 = Math.asin(c /= m),\n            2 = abs(abs(c) - 1) <  || abs(0 - 1) <  ? (0 + 1) / 2 : Math.atan2(b, a),\n            p = project(2, 2),\n            x2 = p[0],\n            y2 = p[1],\n            dx2 = x2 - x0,\n            dy2 = y2 - y0,\n            dz = dy * dx2 - dx * dy2;\n\n        if (dz * dz / d2 > 2 || abs((dx * dx2 + dy * dy2) / d2 - .5) > .3 || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) {\n          resampleLineTo(x0, y0, 0, a0, b0, c0, x2, y2, 2, a /= m, b /= m, c, depth, stream);\n          stream.point(x2, y2);\n          resampleLineTo(x2, y2, 2, a, b, c, x1, y1, 1, a1, b1, c1, depth, stream);\n        }\n      }\n    }\n\n    resample.precision = function (_) {\n      if (!arguments.length) return Math.sqrt(2);\n      maxDepth = (2 = _ * _) > 0 && 16;\n      return resample;\n    };\n\n    return resample;\n  }\n\n  d3.geo.path = function () {\n    var pointRadius = 4.5,\n        projection,\n        context,\n        projectStream,\n        contextStream,\n        cacheStream;\n\n    function path(object) {\n      if (object) {\n        if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n        if (!cacheStream || !cacheStream.valid) cacheStream = projectStream(contextStream);\n        d3.geo.stream(object, cacheStream);\n      }\n\n      return contextStream.result();\n    }\n\n    path.area = function (object) {\n      d3_geo_pathAreaSum = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathArea));\n      return d3_geo_pathAreaSum;\n    };\n\n    path.centroid = function (object) {\n      d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathCentroid));\n      return d3_geo_centroidZ2 ? [d3_geo_centroidX2 / d3_geo_centroidZ2, d3_geo_centroidY2 / d3_geo_centroidZ2] : d3_geo_centroidZ1 ? [d3_geo_centroidX1 / d3_geo_centroidZ1, d3_geo_centroidY1 / d3_geo_centroidZ1] : d3_geo_centroidZ0 ? [d3_geo_centroidX0 / d3_geo_centroidZ0, d3_geo_centroidY0 / d3_geo_centroidZ0] : [NaN, NaN];\n    };\n\n    path.bounds = function (object) {\n      d3_geo_pathBoundsX1 = d3_geo_pathBoundsY1 = -(d3_geo_pathBoundsX0 = d3_geo_pathBoundsY0 = Infinity);\n      d3.geo.stream(object, projectStream(d3_geo_pathBounds));\n      return [[d3_geo_pathBoundsX0, d3_geo_pathBoundsY0], [d3_geo_pathBoundsX1, d3_geo_pathBoundsY1]];\n    };\n\n    path.projection = function (_) {\n      if (!arguments.length) return projection;\n      projectStream = (projection = _) ? _.stream || d3_geo_pathProjectStream(_) : d3_identity;\n      return reset();\n    };\n\n    path.context = function (_) {\n      if (!arguments.length) return context;\n      contextStream = (context = _) == null ? new d3_geo_pathBuffer() : new d3_geo_pathContext(_);\n      if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n      return reset();\n    };\n\n    path.pointRadius = function (_) {\n      if (!arguments.length) return pointRadius;\n      pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n      return path;\n    };\n\n    function reset() {\n      cacheStream = null;\n      return path;\n    }\n\n    return path.projection(d3.geo.albersUsa()).context(null);\n  };\n\n  function d3_geo_pathProjectStream(project) {\n    var resample = d3_geo_resample(function (x, y) {\n      return project([x * d3_degrees, y * d3_degrees]);\n    });\n    return function (stream) {\n      return d3_geo_projectionRadians(resample(stream));\n    };\n  }\n\n  d3.geo.transform = function (methods) {\n    return {\n      stream: function stream(_stream2) {\n        var transform = new d3_geo_transform(_stream2);\n\n        for (var k in methods) {\n          transform[k] = methods[k];\n        }\n\n        return transform;\n      }\n    };\n  };\n\n  function d3_geo_transform(stream) {\n    this.stream = stream;\n  }\n\n  d3_geo_transform.prototype = {\n    point: function point(x, y) {\n      this.stream.point(x, y);\n    },\n    sphere: function sphere() {\n      this.stream.sphere();\n    },\n    lineStart: function lineStart() {\n      this.stream.lineStart();\n    },\n    lineEnd: function lineEnd() {\n      this.stream.lineEnd();\n    },\n    polygonStart: function polygonStart() {\n      this.stream.polygonStart();\n    },\n    polygonEnd: function polygonEnd() {\n      this.stream.polygonEnd();\n    }\n  };\n\n  function d3_geo_transformPoint(stream, point) {\n    return {\n      point: point,\n      sphere: function sphere() {\n        stream.sphere();\n      },\n      lineStart: function lineStart() {\n        stream.lineStart();\n      },\n      lineEnd: function lineEnd() {\n        stream.lineEnd();\n      },\n      polygonStart: function polygonStart() {\n        stream.polygonStart();\n      },\n      polygonEnd: function polygonEnd() {\n        stream.polygonEnd();\n      }\n    };\n  }\n\n  d3.geo.projection = d3_geo_projection;\n  d3.geo.projectionMutator = d3_geo_projectionMutator;\n\n  function d3_geo_projection(project) {\n    return d3_geo_projectionMutator(function () {\n      return project;\n    })();\n  }\n\n  function d3_geo_projectionMutator(projectAt) {\n    var project,\n        rotate,\n        projectRotate,\n        projectResample = d3_geo_resample(function (x, y) {\n      x = project(x, y);\n      return [x[0] * k + x, y - x[1] * k];\n    }),\n        k = 150,\n        x = 480,\n        y = 250,\n         = 0,\n         = 0,\n         = 0,\n         = 0,\n         = 0,\n        x,\n        y,\n        preclip = d3_geo_clipAntimeridian,\n        postclip = d3_identity,\n        clipAngle = null,\n        clipExtent = null,\n        stream;\n\n    function projection(point) {\n      point = projectRotate(point[0] * d3_radians, point[1] * d3_radians);\n      return [point[0] * k + x, y - point[1] * k];\n    }\n\n    function invert(point) {\n      point = projectRotate.invert((point[0] - x) / k, (y - point[1]) / k);\n      return point && [point[0] * d3_degrees, point[1] * d3_degrees];\n    }\n\n    projection.stream = function (output) {\n      if (stream) stream.valid = false;\n      stream = d3_geo_projectionRadians(preclip(rotate, projectResample(postclip(output))));\n      stream.valid = true;\n      return stream;\n    };\n\n    projection.clipAngle = function (_) {\n      if (!arguments.length) return clipAngle;\n      preclip = _ == null ? (clipAngle = _, d3_geo_clipAntimeridian) : d3_geo_clipCircle((clipAngle = +_) * d3_radians);\n      return invalidate();\n    };\n\n    projection.clipExtent = function (_) {\n      if (!arguments.length) return clipExtent;\n      clipExtent = _;\n      postclip = _ ? d3_geo_clipExtent(_[0][0], _[0][1], _[1][0], _[1][1]) : d3_identity;\n      return invalidate();\n    };\n\n    projection.scale = function (_) {\n      if (!arguments.length) return k;\n      k = +_;\n      return reset();\n    };\n\n    projection.translate = function (_) {\n      if (!arguments.length) return [x, y];\n      x = +_[0];\n      y = +_[1];\n      return reset();\n    };\n\n    projection.center = function (_) {\n      if (!arguments.length) return [ * d3_degrees,  * d3_degrees];\n       = _[0] % 360 * d3_radians;\n       = _[1] % 360 * d3_radians;\n      return reset();\n    };\n\n    projection.rotate = function (_) {\n      if (!arguments.length) return [ * d3_degrees,  * d3_degrees,  * d3_degrees];\n       = _[0] % 360 * d3_radians;\n       = _[1] % 360 * d3_radians;\n       = _.length > 2 ? _[2] % 360 * d3_radians : 0;\n      return reset();\n    };\n\n    d3.rebind(projection, projectResample, \"precision\");\n\n    function reset() {\n      projectRotate = d3_geo_compose(rotate = d3_geo_rotation(, , ), project);\n      var center = project(, );\n      x = x - center[0] * k;\n      y = y + center[1] * k;\n      return invalidate();\n    }\n\n    function invalidate() {\n      if (stream) stream.valid = false, stream = null;\n      return projection;\n    }\n\n    return function () {\n      project = projectAt.apply(this, arguments);\n      projection.invert = project.invert && invert;\n      return reset();\n    };\n  }\n\n  function d3_geo_projectionRadians(stream) {\n    return d3_geo_transformPoint(stream, function (x, y) {\n      stream.point(x * d3_radians, y * d3_radians);\n    });\n  }\n\n  function d3_geo_equirectangular(, ) {\n    return [, ];\n  }\n\n  (d3.geo.equirectangular = function () {\n    return d3_geo_projection(d3_geo_equirectangular);\n  }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular;\n\n  d3.geo.rotation = function (rotate) {\n    rotate = d3_geo_rotation(rotate[0] % 360 * d3_radians, rotate[1] * d3_radians, rotate.length > 2 ? rotate[2] * d3_radians : 0);\n\n    function forward(coordinates) {\n      coordinates = rotate(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    }\n\n    forward.invert = function (coordinates) {\n      coordinates = rotate.invert(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    };\n\n    return forward;\n  };\n\n  function d3_geo_identityRotation(, ) {\n    return [ >  ?  -  :  < - ?  +  : , ];\n  }\n\n  d3_geo_identityRotation.invert = d3_geo_equirectangular;\n\n  function d3_geo_rotation(, , ) {\n    return  ?  ||  ? d3_geo_compose(d3_geo_rotation(), d3_geo_rotation(, )) : d3_geo_rotation() :  ||  ? d3_geo_rotation(, ) : d3_geo_identityRotation;\n  }\n\n  function d3_geo_forwardRotation() {\n    return function (, ) {\n      return  += , [ >  ?  -  :  < - ?  +  : , ];\n    };\n  }\n\n  function d3_geo_rotation() {\n    var rotation = d3_geo_forwardRotation();\n    rotation.invert = d3_geo_forwardRotation(-);\n    return rotation;\n  }\n\n  function d3_geo_rotation(, ) {\n    var cos = Math.cos(),\n        sin = Math.sin(),\n        cos = Math.cos(),\n        sin = Math.sin();\n\n    function rotation(, ) {\n      var cos = Math.cos(),\n          x = Math.cos() * cos,\n          y = Math.sin() * cos,\n          z = Math.sin(),\n          k = z * cos + x * sin;\n      return [Math.atan2(y * cos - k * sin, x * cos - z * sin), d3_asin(k * cos + y * sin)];\n    }\n\n    rotation.invert = function (, ) {\n      var cos = Math.cos(),\n          x = Math.cos() * cos,\n          y = Math.sin() * cos,\n          z = Math.sin(),\n          k = z * cos - y * sin;\n      return [Math.atan2(y * cos + z * sin, x * cos + k * sin), d3_asin(k * cos - x * sin)];\n    };\n\n    return rotation;\n  }\n\n  d3.geo.circle = function () {\n    var origin = [0, 0],\n        angle,\n        precision = 6,\n        interpolate;\n\n    function circle() {\n      var center = typeof origin === \"function\" ? origin.apply(this, arguments) : origin,\n          rotate = d3_geo_rotation(-center[0] * d3_radians, -center[1] * d3_radians, 0).invert,\n          ring = [];\n      interpolate(null, null, 1, {\n        point: function point(x, y) {\n          ring.push(x = rotate(x, y));\n          x[0] *= d3_degrees, x[1] *= d3_degrees;\n        }\n      });\n      return {\n        type: \"Polygon\",\n        coordinates: [ring]\n      };\n    }\n\n    circle.origin = function (x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return circle;\n    };\n\n    circle.angle = function (x) {\n      if (!arguments.length) return angle;\n      interpolate = d3_geo_circleInterpolate((angle = +x) * d3_radians, precision * d3_radians);\n      return circle;\n    };\n\n    circle.precision = function (_) {\n      if (!arguments.length) return precision;\n      interpolate = d3_geo_circleInterpolate(angle * d3_radians, (precision = +_) * d3_radians);\n      return circle;\n    };\n\n    return circle.angle(90);\n  };\n\n  function d3_geo_circleInterpolate(radius, precision) {\n    var cr = Math.cos(radius),\n        sr = Math.sin(radius);\n    return function (from, to, direction, listener) {\n      var step = direction * precision;\n\n      if (from != null) {\n        from = d3_geo_circleAngle(cr, from);\n        to = d3_geo_circleAngle(cr, to);\n        if (direction > 0 ? from < to : from > to) from += direction * ;\n      } else {\n        from = radius + direction * ;\n        to = radius - .5 * step;\n      }\n\n      for (var point, t = from; direction > 0 ? t > to : t < to; t -= step) {\n        listener.point((point = d3_geo_spherical([cr, -sr * Math.cos(t), -sr * Math.sin(t)]))[0], point[1]);\n      }\n    };\n  }\n\n  function d3_geo_circleAngle(cr, point) {\n    var a = d3_geo_cartesian(point);\n    a[0] -= cr;\n    d3_geo_cartesianNormalize(a);\n    var angle = d3_acos(-a[1]);\n    return ((-a[2] < 0 ? -angle : angle) + 2 * Math.PI - ) % (2 * Math.PI);\n  }\n\n  d3.geo.distance = function (a, b) {\n    var  = (b[0] - a[0]) * d3_radians,\n        0 = a[1] * d3_radians,\n        1 = b[1] * d3_radians,\n        sin = Math.sin(),\n        cos = Math.cos(),\n        sin0 = Math.sin(0),\n        cos0 = Math.cos(0),\n        sin1 = Math.sin(1),\n        cos1 = Math.cos(1),\n        t;\n    return Math.atan2(Math.sqrt((t = cos1 * sin) * t + (t = cos0 * sin1 - sin0 * cos1 * cos) * t), sin0 * sin1 + cos0 * cos1 * cos);\n  };\n\n  d3.geo.graticule = function () {\n    var x1,\n        x0,\n        X1,\n        X0,\n        y1,\n        y0,\n        Y1,\n        Y0,\n        dx = 10,\n        dy = dx,\n        DX = 90,\n        DY = 360,\n        x,\n        y,\n        X,\n        Y,\n        precision = 2.5;\n\n    function graticule() {\n      return {\n        type: \"MultiLineString\",\n        coordinates: lines()\n      };\n    }\n\n    function lines() {\n      return d3.range(Math.ceil(X0 / DX) * DX, X1, DX).map(X).concat(d3.range(Math.ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(d3.range(Math.ceil(x0 / dx) * dx, x1, dx).filter(function (x) {\n        return abs(x % DX) > ;\n      }).map(x)).concat(d3.range(Math.ceil(y0 / dy) * dy, y1, dy).filter(function (y) {\n        return abs(y % DY) > ;\n      }).map(y));\n    }\n\n    graticule.lines = function () {\n      return lines().map(function (coordinates) {\n        return {\n          type: \"LineString\",\n          coordinates: coordinates\n        };\n      });\n    };\n\n    graticule.outline = function () {\n      return {\n        type: \"Polygon\",\n        coordinates: [X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1))]\n      };\n    };\n\n    graticule.extent = function (_) {\n      if (!arguments.length) return graticule.minorExtent();\n      return graticule.majorExtent(_).minorExtent(_);\n    };\n\n    graticule.majorExtent = function (_) {\n      if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n      X0 = +_[0][0], X1 = +_[1][0];\n      Y0 = +_[0][1], Y1 = +_[1][1];\n      if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n      if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n      return graticule.precision(precision);\n    };\n\n    graticule.minorExtent = function (_) {\n      if (!arguments.length) return [[x0, y0], [x1, y1]];\n      x0 = +_[0][0], x1 = +_[1][0];\n      y0 = +_[0][1], y1 = +_[1][1];\n      if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n      if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n      return graticule.precision(precision);\n    };\n\n    graticule.step = function (_) {\n      if (!arguments.length) return graticule.minorStep();\n      return graticule.majorStep(_).minorStep(_);\n    };\n\n    graticule.majorStep = function (_) {\n      if (!arguments.length) return [DX, DY];\n      DX = +_[0], DY = +_[1];\n      return graticule;\n    };\n\n    graticule.minorStep = function (_) {\n      if (!arguments.length) return [dx, dy];\n      dx = +_[0], dy = +_[1];\n      return graticule;\n    };\n\n    graticule.precision = function (_) {\n      if (!arguments.length) return precision;\n      precision = +_;\n      x = d3_geo_graticuleX(y0, y1, 90);\n      y = d3_geo_graticuleY(x0, x1, precision);\n      X = d3_geo_graticuleX(Y0, Y1, 90);\n      Y = d3_geo_graticuleY(X0, X1, precision);\n      return graticule;\n    };\n\n    return graticule.majorExtent([[-180, -90 + ], [180, 90 - ]]).minorExtent([[-180, -80 - ], [180, 80 + ]]);\n  };\n\n  function d3_geo_graticuleX(y0, y1, dy) {\n    var y = d3.range(y0, y1 - , dy).concat(y1);\n    return function (x) {\n      return y.map(function (y) {\n        return [x, y];\n      });\n    };\n  }\n\n  function d3_geo_graticuleY(x0, x1, dx) {\n    var x = d3.range(x0, x1 - , dx).concat(x1);\n    return function (y) {\n      return x.map(function (x) {\n        return [x, y];\n      });\n    };\n  }\n\n  function d3_source(d) {\n    return d.source;\n  }\n\n  function d3_target(d) {\n    return d.target;\n  }\n\n  d3.geo.greatArc = function () {\n    var source = d3_source,\n        source_,\n        target = d3_target,\n        target_;\n\n    function greatArc() {\n      return {\n        type: \"LineString\",\n        coordinates: [source_ || source.apply(this, arguments), target_ || target.apply(this, arguments)]\n      };\n    }\n\n    greatArc.distance = function () {\n      return d3.geo.distance(source_ || source.apply(this, arguments), target_ || target.apply(this, arguments));\n    };\n\n    greatArc.source = function (_) {\n      if (!arguments.length) return source;\n      source = _, source_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n\n    greatArc.target = function (_) {\n      if (!arguments.length) return target;\n      target = _, target_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n\n    greatArc.precision = function () {\n      return arguments.length ? greatArc : 0;\n    };\n\n    return greatArc;\n  };\n\n  d3.geo.interpolate = function (source, target) {\n    return d3_geo_interpolate(source[0] * d3_radians, source[1] * d3_radians, target[0] * d3_radians, target[1] * d3_radians);\n  };\n\n  function d3_geo_interpolate(x0, y0, x1, y1) {\n    var cy0 = Math.cos(y0),\n        sy0 = Math.sin(y0),\n        cy1 = Math.cos(y1),\n        sy1 = Math.sin(y1),\n        kx0 = cy0 * Math.cos(x0),\n        ky0 = cy0 * Math.sin(x0),\n        kx1 = cy1 * Math.cos(x1),\n        ky1 = cy1 * Math.sin(x1),\n        d = 2 * Math.asin(Math.sqrt(d3_haversin(y1 - y0) + cy0 * cy1 * d3_haversin(x1 - x0))),\n        k = 1 / Math.sin(d);\n    var interpolate = d ? function (t) {\n      var B = Math.sin(t *= d) * k,\n          A = Math.sin(d - t) * k,\n          x = A * kx0 + B * kx1,\n          y = A * ky0 + B * ky1,\n          z = A * sy0 + B * sy1;\n      return [Math.atan2(y, x) * d3_degrees, Math.atan2(z, Math.sqrt(x * x + y * y)) * d3_degrees];\n    } : function () {\n      return [x0 * d3_degrees, y0 * d3_degrees];\n    };\n    interpolate.distance = d;\n    return interpolate;\n  }\n\n  d3.geo.length = function (object) {\n    d3_geo_lengthSum = 0;\n    d3.geo.stream(object, d3_geo_length);\n    return d3_geo_lengthSum;\n  };\n\n  var d3_geo_lengthSum;\n  var d3_geo_length = {\n    sphere: d3_noop,\n    point: d3_noop,\n    lineStart: d3_geo_lengthLineStart,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n\n  function d3_geo_lengthLineStart() {\n    var 0, sin0, cos0;\n\n    d3_geo_length.point = function (, ) {\n      0 =  * d3_radians, sin0 = Math.sin( *= d3_radians), cos0 = Math.cos();\n      d3_geo_length.point = nextPoint;\n    };\n\n    d3_geo_length.lineEnd = function () {\n      d3_geo_length.point = d3_geo_length.lineEnd = d3_noop;\n    };\n\n    function nextPoint(, ) {\n      var sin = Math.sin( *= d3_radians),\n          cos = Math.cos(),\n          t = abs(( *= d3_radians) - 0),\n          cos = Math.cos(t);\n      d3_geo_lengthSum += Math.atan2(Math.sqrt((t = cos * Math.sin(t)) * t + (t = cos0 * sin - sin0 * cos * cos) * t), sin0 * sin + cos0 * cos * cos);\n      0 = , sin0 = sin, cos0 = cos;\n    }\n  }\n\n  function d3_geo_azimuthal(scale, angle) {\n    function azimuthal(, ) {\n      var cos = Math.cos(),\n          cos = Math.cos(),\n          k = scale(cos * cos);\n      return [k * cos * Math.sin(), k * Math.sin()];\n    }\n\n    azimuthal.invert = function (x, y) {\n      var  = Math.sqrt(x * x + y * y),\n          c = angle(),\n          sinc = Math.sin(c),\n          cosc = Math.cos(c);\n      return [Math.atan2(x * sinc,  * cosc), Math.asin( && y * sinc / )];\n    };\n\n    return azimuthal;\n  }\n\n  var d3_geo_azimuthalEqualArea = d3_geo_azimuthal(function (coscos) {\n    return Math.sqrt(2 / (1 + coscos));\n  }, function () {\n    return 2 * Math.asin( / 2);\n  });\n  (d3.geo.azimuthalEqualArea = function () {\n    return d3_geo_projection(d3_geo_azimuthalEqualArea);\n  }).raw = d3_geo_azimuthalEqualArea;\n  var d3_geo_azimuthalEquidistant = d3_geo_azimuthal(function (coscos) {\n    var c = Math.acos(coscos);\n    return c && c / Math.sin(c);\n  }, d3_identity);\n  (d3.geo.azimuthalEquidistant = function () {\n    return d3_geo_projection(d3_geo_azimuthalEquidistant);\n  }).raw = d3_geo_azimuthalEquidistant;\n\n  function d3_geo_conicConformal(0, 1) {\n    var cos0 = Math.cos(0),\n        t = function t() {\n      return Math.tan( / 4 +  / 2);\n    },\n        n = 0 === 1 ? Math.sin(0) : Math.log(cos0 / Math.cos(1)) / Math.log(t(1) / t(0)),\n        F = cos0 * Math.pow(t(0), n) / n;\n\n    if (!n) return d3_geo_mercator;\n\n    function forward(, ) {\n      if (F > 0) {\n        if ( < -half + )  = -half + ;\n      } else {\n        if ( > half - )  = half - ;\n      }\n\n      var  = F / Math.pow(t(), n);\n      return [ * Math.sin(n * ), F -  * Math.cos(n * )];\n    }\n\n    forward.invert = function (x, y) {\n      var 0_y = F - y,\n           = d3_sgn(n) * Math.sqrt(x * x + 0_y * 0_y);\n      return [Math.atan2(x, 0_y) / n, 2 * Math.atan(Math.pow(F / , 1 / n)) - half];\n    };\n\n    return forward;\n  }\n\n  (d3.geo.conicConformal = function () {\n    return d3_geo_conic(d3_geo_conicConformal);\n  }).raw = d3_geo_conicConformal;\n\n  function d3_geo_conicEquidistant(0, 1) {\n    var cos0 = Math.cos(0),\n        n = 0 === 1 ? Math.sin(0) : (cos0 - Math.cos(1)) / (1 - 0),\n        G = cos0 / n + 0;\n    if (abs(n) < ) return d3_geo_equirectangular;\n\n    function forward(, ) {\n      var  = G - ;\n      return [ * Math.sin(n * ), G -  * Math.cos(n * )];\n    }\n\n    forward.invert = function (x, y) {\n      var 0_y = G - y;\n      return [Math.atan2(x, 0_y) / n, G - d3_sgn(n) * Math.sqrt(x * x + 0_y * 0_y)];\n    };\n\n    return forward;\n  }\n\n  (d3.geo.conicEquidistant = function () {\n    return d3_geo_conic(d3_geo_conicEquidistant);\n  }).raw = d3_geo_conicEquidistant;\n  var d3_geo_gnomonic = d3_geo_azimuthal(function (coscos) {\n    return 1 / coscos;\n  }, Math.atan);\n  (d3.geo.gnomonic = function () {\n    return d3_geo_projection(d3_geo_gnomonic);\n  }).raw = d3_geo_gnomonic;\n\n  function d3_geo_mercator(, ) {\n    return [, Math.log(Math.tan( / 4 +  / 2))];\n  }\n\n  d3_geo_mercator.invert = function (x, y) {\n    return [x, 2 * Math.atan(Math.exp(y)) - half];\n  };\n\n  function d3_geo_mercatorProjection(project) {\n    var m = d3_geo_projection(project),\n        scale = m.scale,\n        translate = m.translate,\n        clipExtent = m.clipExtent,\n        clipAuto;\n\n    m.scale = function () {\n      var v = scale.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n\n    m.translate = function () {\n      var v = translate.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n\n    m.clipExtent = function (_) {\n      var v = clipExtent.apply(m, arguments);\n\n      if (v === m) {\n        if (clipAuto = _ == null) {\n          var k =  * scale(),\n              t = translate();\n          clipExtent([[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]]);\n        }\n      } else if (clipAuto) {\n        v = null;\n      }\n\n      return v;\n    };\n\n    return m.clipExtent(null);\n  }\n\n  (d3.geo.mercator = function () {\n    return d3_geo_mercatorProjection(d3_geo_mercator);\n  }).raw = d3_geo_mercator;\n  var d3_geo_orthographic = d3_geo_azimuthal(function () {\n    return 1;\n  }, Math.asin);\n  (d3.geo.orthographic = function () {\n    return d3_geo_projection(d3_geo_orthographic);\n  }).raw = d3_geo_orthographic;\n  var d3_geo_stereographic = d3_geo_azimuthal(function (coscos) {\n    return 1 / (1 + coscos);\n  }, function () {\n    return 2 * Math.atan();\n  });\n  (d3.geo.stereographic = function () {\n    return d3_geo_projection(d3_geo_stereographic);\n  }).raw = d3_geo_stereographic;\n\n  function d3_geo_transverseMercator(, ) {\n    return [Math.log(Math.tan( / 4 +  / 2)), -];\n  }\n\n  d3_geo_transverseMercator.invert = function (x, y) {\n    return [-y, 2 * Math.atan(Math.exp(x)) - half];\n  };\n\n  (d3.geo.transverseMercator = function () {\n    var projection = d3_geo_mercatorProjection(d3_geo_transverseMercator),\n        center = projection.center,\n        rotate = projection.rotate;\n\n    projection.center = function (_) {\n      return _ ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n    };\n\n    projection.rotate = function (_) {\n      return _ ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n    };\n\n    return rotate([0, 0, 90]);\n  }).raw = d3_geo_transverseMercator;\n  d3.geom = {};\n\n  function d3_geom_pointX(d) {\n    return d[0];\n  }\n\n  function d3_geom_pointY(d) {\n    return d[1];\n  }\n\n  d3.geom.hull = function (vertices) {\n    var x = d3_geom_pointX,\n        y = d3_geom_pointY;\n    if (arguments.length) return hull(vertices);\n\n    function hull(data) {\n      if (data.length < 3) return [];\n      var fx = d3_functor(x),\n          fy = d3_functor(y),\n          i,\n          n = data.length,\n          points = [],\n          flippedPoints = [];\n\n      for (i = 0; i < n; i++) {\n        points.push([+fx.call(this, data[i], i), +fy.call(this, data[i], i), i]);\n      }\n\n      points.sort(d3_geom_hullOrder);\n\n      for (i = 0; i < n; i++) {\n        flippedPoints.push([points[i][0], -points[i][1]]);\n      }\n\n      var upper = d3_geom_hullUpper(points),\n          lower = d3_geom_hullUpper(flippedPoints);\n      var skipLeft = lower[0] === upper[0],\n          skipRight = lower[lower.length - 1] === upper[upper.length - 1],\n          polygon = [];\n\n      for (i = upper.length - 1; i >= 0; --i) {\n        polygon.push(data[points[upper[i]][2]]);\n      }\n\n      for (i = +skipLeft; i < lower.length - skipRight; ++i) {\n        polygon.push(data[points[lower[i]][2]]);\n      }\n\n      return polygon;\n    }\n\n    hull.x = function (_) {\n      return arguments.length ? (x = _, hull) : x;\n    };\n\n    hull.y = function (_) {\n      return arguments.length ? (y = _, hull) : y;\n    };\n\n    return hull;\n  };\n\n  function d3_geom_hullUpper(points) {\n    var n = points.length,\n        hull = [0, 1],\n        hs = 2;\n\n    for (var i = 2; i < n; i++) {\n      while (hs > 1 && d3_cross2d(points[hull[hs - 2]], points[hull[hs - 1]], points[i]) <= 0) {\n        --hs;\n      }\n\n      hull[hs++] = i;\n    }\n\n    return hull.slice(0, hs);\n  }\n\n  function d3_geom_hullOrder(a, b) {\n    return a[0] - b[0] || a[1] - b[1];\n  }\n\n  d3.geom.polygon = function (coordinates) {\n    d3_subclass(coordinates, d3_geom_polygonPrototype);\n    return coordinates;\n  };\n\n  var d3_geom_polygonPrototype = d3.geom.polygon.prototype = [];\n\n  d3_geom_polygonPrototype.area = function () {\n    var i = -1,\n        n = this.length,\n        a,\n        b = this[n - 1],\n        area = 0;\n\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      area += a[1] * b[0] - a[0] * b[1];\n    }\n\n    return area * .5;\n  };\n\n  d3_geom_polygonPrototype.centroid = function (k) {\n    var i = -1,\n        n = this.length,\n        x = 0,\n        y = 0,\n        a,\n        b = this[n - 1],\n        c;\n    if (!arguments.length) k = -1 / (6 * this.area());\n\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      c = a[0] * b[1] - b[0] * a[1];\n      x += (a[0] + b[0]) * c;\n      y += (a[1] + b[1]) * c;\n    }\n\n    return [x * k, y * k];\n  };\n\n  d3_geom_polygonPrototype.clip = function (subject) {\n    var input,\n        closed = d3_geom_polygonClosed(subject),\n        i = -1,\n        n = this.length - d3_geom_polygonClosed(this),\n        j,\n        m,\n        a = this[n - 1],\n        b,\n        c,\n        d;\n\n    while (++i < n) {\n      input = subject.slice();\n      subject.length = 0;\n      b = this[i];\n      c = input[(m = input.length - closed) - 1];\n      j = -1;\n\n      while (++j < m) {\n        d = input[j];\n\n        if (d3_geom_polygonInside(d, a, b)) {\n          if (!d3_geom_polygonInside(c, a, b)) {\n            subject.push(d3_geom_polygonIntersect(c, d, a, b));\n          }\n\n          subject.push(d);\n        } else if (d3_geom_polygonInside(c, a, b)) {\n          subject.push(d3_geom_polygonIntersect(c, d, a, b));\n        }\n\n        c = d;\n      }\n\n      if (closed) subject.push(subject[0]);\n      a = b;\n    }\n\n    return subject;\n  };\n\n  function d3_geom_polygonInside(p, a, b) {\n    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0]);\n  }\n\n  function d3_geom_polygonIntersect(c, d, a, b) {\n    var x1 = c[0],\n        x3 = a[0],\n        x21 = d[0] - x1,\n        x43 = b[0] - x3,\n        y1 = c[1],\n        y3 = a[1],\n        y21 = d[1] - y1,\n        y43 = b[1] - y3,\n        ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);\n    return [x1 + ua * x21, y1 + ua * y21];\n  }\n\n  function d3_geom_polygonClosed(coordinates) {\n    var a = coordinates[0],\n        b = coordinates[coordinates.length - 1];\n    return !(a[0] - b[0] || a[1] - b[1]);\n  }\n\n  var d3_geom_voronoiEdges,\n      d3_geom_voronoiCells,\n      d3_geom_voronoiBeaches,\n      d3_geom_voronoiBeachPool = [],\n      d3_geom_voronoiFirstCircle,\n      d3_geom_voronoiCircles,\n      d3_geom_voronoiCirclePool = [];\n\n  function d3_geom_voronoiBeach() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.edge = this.site = this.circle = null;\n  }\n\n  function d3_geom_voronoiCreateBeach(site) {\n    var beach = d3_geom_voronoiBeachPool.pop() || new d3_geom_voronoiBeach();\n    beach.site = site;\n    return beach;\n  }\n\n  function d3_geom_voronoiDetachBeach(beach) {\n    d3_geom_voronoiDetachCircle(beach);\n    d3_geom_voronoiBeaches.remove(beach);\n    d3_geom_voronoiBeachPool.push(beach);\n    d3_geom_voronoiRedBlackNode(beach);\n  }\n\n  function d3_geom_voronoiRemoveBeach(beach) {\n    var circle = beach.circle,\n        x = circle.x,\n        y = circle.cy,\n        vertex = {\n      x: x,\n      y: y\n    },\n        previous = beach.P,\n        next = beach.N,\n        disappearing = [beach];\n    d3_geom_voronoiDetachBeach(beach);\n    var lArc = previous;\n\n    while (lArc.circle && abs(x - lArc.circle.x) <  && abs(y - lArc.circle.cy) < ) {\n      previous = lArc.P;\n      disappearing.unshift(lArc);\n      d3_geom_voronoiDetachBeach(lArc);\n      lArc = previous;\n    }\n\n    disappearing.unshift(lArc);\n    d3_geom_voronoiDetachCircle(lArc);\n    var rArc = next;\n\n    while (rArc.circle && abs(x - rArc.circle.x) <  && abs(y - rArc.circle.cy) < ) {\n      next = rArc.N;\n      disappearing.push(rArc);\n      d3_geom_voronoiDetachBeach(rArc);\n      rArc = next;\n    }\n\n    disappearing.push(rArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var nArcs = disappearing.length,\n        iArc;\n\n    for (iArc = 1; iArc < nArcs; ++iArc) {\n      rArc = disappearing[iArc];\n      lArc = disappearing[iArc - 1];\n      d3_geom_voronoiSetEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n    }\n\n    lArc = disappearing[0];\n    rArc = disappearing[nArcs - 1];\n    rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, rArc.site, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n\n  function d3_geom_voronoiAddBeach(site) {\n    var x = site.x,\n        directrix = site.y,\n        lArc,\n        rArc,\n        dxl,\n        dxr,\n        node = d3_geom_voronoiBeaches._;\n\n    while (node) {\n      dxl = d3_geom_voronoiLeftBreakPoint(node, directrix) - x;\n      if (dxl > ) node = node.L;else {\n        dxr = x - d3_geom_voronoiRightBreakPoint(node, directrix);\n\n        if (dxr > ) {\n          if (!node.R) {\n            lArc = node;\n            break;\n          }\n\n          node = node.R;\n        } else {\n          if (dxl > -) {\n            lArc = node.P;\n            rArc = node;\n          } else if (dxr > -) {\n            lArc = node;\n            rArc = node.N;\n          } else {\n            lArc = rArc = node;\n          }\n\n          break;\n        }\n      }\n    }\n\n    var newArc = d3_geom_voronoiCreateBeach(site);\n    d3_geom_voronoiBeaches.insert(lArc, newArc);\n    if (!lArc && !rArc) return;\n\n    if (lArc === rArc) {\n      d3_geom_voronoiDetachCircle(lArc);\n      rArc = d3_geom_voronoiCreateBeach(lArc.site);\n      d3_geom_voronoiBeaches.insert(newArc, rArc);\n      newArc.edge = rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      d3_geom_voronoiAttachCircle(lArc);\n      d3_geom_voronoiAttachCircle(rArc);\n      return;\n    }\n\n    if (!rArc) {\n      newArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      return;\n    }\n\n    d3_geom_voronoiDetachCircle(lArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var lSite = lArc.site,\n        ax = lSite.x,\n        ay = lSite.y,\n        bx = site.x - ax,\n        by = site.y - ay,\n        rSite = rArc.site,\n        cx = rSite.x - ax,\n        cy = rSite.y - ay,\n        d = 2 * (bx * cy - by * cx),\n        hb = bx * bx + by * by,\n        hc = cx * cx + cy * cy,\n        vertex = {\n      x: (cy * hb - by * hc) / d + ax,\n      y: (bx * hc - cx * hb) / d + ay\n    };\n    d3_geom_voronoiSetEdgeEnd(rArc.edge, lSite, rSite, vertex);\n    newArc.edge = d3_geom_voronoiCreateEdge(lSite, site, null, vertex);\n    rArc.edge = d3_geom_voronoiCreateEdge(site, rSite, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n\n  function d3_geom_voronoiLeftBreakPoint(arc, directrix) {\n    var site = arc.site,\n        rfocx = site.x,\n        rfocy = site.y,\n        pby2 = rfocy - directrix;\n    if (!pby2) return rfocx;\n    var lArc = arc.P;\n    if (!lArc) return -Infinity;\n    site = lArc.site;\n    var lfocx = site.x,\n        lfocy = site.y,\n        plby2 = lfocy - directrix;\n    if (!plby2) return lfocx;\n    var hl = lfocx - rfocx,\n        aby2 = 1 / pby2 - 1 / plby2,\n        b = hl / plby2;\n    if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n    return (rfocx + lfocx) / 2;\n  }\n\n  function d3_geom_voronoiRightBreakPoint(arc, directrix) {\n    var rArc = arc.N;\n    if (rArc) return d3_geom_voronoiLeftBreakPoint(rArc, directrix);\n    var site = arc.site;\n    return site.y === directrix ? site.x : Infinity;\n  }\n\n  function d3_geom_voronoiCell(site) {\n    this.site = site;\n    this.edges = [];\n  }\n\n  d3_geom_voronoiCell.prototype.prepare = function () {\n    var halfEdges = this.edges,\n        iHalfEdge = halfEdges.length,\n        edge;\n\n    while (iHalfEdge--) {\n      edge = halfEdges[iHalfEdge].edge;\n      if (!edge.b || !edge.a) halfEdges.splice(iHalfEdge, 1);\n    }\n\n    halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);\n    return halfEdges.length;\n  };\n\n  function d3_geom_voronoiCloseCells(extent) {\n    var x0 = extent[0][0],\n        x1 = extent[1][0],\n        y0 = extent[0][1],\n        y1 = extent[1][1],\n        x2,\n        y2,\n        x3,\n        y3,\n        cells = d3_geom_voronoiCells,\n        iCell = cells.length,\n        cell,\n        iHalfEdge,\n        halfEdges,\n        nHalfEdges,\n        start,\n        end;\n\n    while (iCell--) {\n      cell = cells[iCell];\n      if (!cell || !cell.prepare()) continue;\n      halfEdges = cell.edges;\n      nHalfEdges = halfEdges.length;\n      iHalfEdge = 0;\n\n      while (iHalfEdge < nHalfEdges) {\n        end = halfEdges[iHalfEdge].end(), x3 = end.x, y3 = end.y;\n        start = halfEdges[++iHalfEdge % nHalfEdges].start(), x2 = start.x, y2 = start.y;\n\n        if (abs(x3 - x2) >  || abs(y3 - y2) > ) {\n          halfEdges.splice(iHalfEdge, 0, new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site, end, abs(x3 - x0) <  && y1 - y3 >  ? {\n            x: x0,\n            y: abs(x2 - x0) <  ? y2 : y1\n          } : abs(y3 - y1) <  && x1 - x3 >  ? {\n            x: abs(y2 - y1) <  ? x2 : x1,\n            y: y1\n          } : abs(x3 - x1) <  && y3 - y0 >  ? {\n            x: x1,\n            y: abs(x2 - x1) <  ? y2 : y0\n          } : abs(y3 - y0) <  && x3 - x0 >  ? {\n            x: abs(y2 - y0) <  ? x2 : x0,\n            y: y0\n          } : null), cell.site, null));\n          ++nHalfEdges;\n        }\n      }\n    }\n  }\n\n  function d3_geom_voronoiHalfEdgeOrder(a, b) {\n    return b.angle - a.angle;\n  }\n\n  function d3_geom_voronoiCircle() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.x = this.y = this.arc = this.site = this.cy = null;\n  }\n\n  function d3_geom_voronoiAttachCircle(arc) {\n    var lArc = arc.P,\n        rArc = arc.N;\n    if (!lArc || !rArc) return;\n    var lSite = lArc.site,\n        cSite = arc.site,\n        rSite = rArc.site;\n    if (lSite === rSite) return;\n    var bx = cSite.x,\n        by = cSite.y,\n        ax = lSite.x - bx,\n        ay = lSite.y - by,\n        cx = rSite.x - bx,\n        cy = rSite.y - by;\n    var d = 2 * (ax * cy - ay * cx);\n    if (d >= -2) return;\n    var ha = ax * ax + ay * ay,\n        hc = cx * cx + cy * cy,\n        x = (cy * ha - ay * hc) / d,\n        y = (ax * hc - cx * ha) / d,\n        cy = y + by;\n    var circle = d3_geom_voronoiCirclePool.pop() || new d3_geom_voronoiCircle();\n    circle.arc = arc;\n    circle.site = cSite;\n    circle.x = x + bx;\n    circle.y = cy + Math.sqrt(x * x + y * y);\n    circle.cy = cy;\n    arc.circle = circle;\n    var before = null,\n        node = d3_geom_voronoiCircles._;\n\n    while (node) {\n      if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {\n        if (node.L) node = node.L;else {\n          before = node.P;\n          break;\n        }\n      } else {\n        if (node.R) node = node.R;else {\n          before = node;\n          break;\n        }\n      }\n    }\n\n    d3_geom_voronoiCircles.insert(before, circle);\n    if (!before) d3_geom_voronoiFirstCircle = circle;\n  }\n\n  function d3_geom_voronoiDetachCircle(arc) {\n    var circle = arc.circle;\n\n    if (circle) {\n      if (!circle.P) d3_geom_voronoiFirstCircle = circle.N;\n      d3_geom_voronoiCircles.remove(circle);\n      d3_geom_voronoiCirclePool.push(circle);\n      d3_geom_voronoiRedBlackNode(circle);\n      arc.circle = null;\n    }\n  }\n\n  function d3_geom_voronoiClipEdges(extent) {\n    var edges = d3_geom_voronoiEdges,\n        clip = d3_geom_clipLine(extent[0][0], extent[0][1], extent[1][0], extent[1][1]),\n        i = edges.length,\n        e;\n\n    while (i--) {\n      e = edges[i];\n\n      if (!d3_geom_voronoiConnectEdge(e, extent) || !clip(e) || abs(e.a.x - e.b.x) <  && abs(e.a.y - e.b.y) < ) {\n        e.a = e.b = null;\n        edges.splice(i, 1);\n      }\n    }\n  }\n\n  function d3_geom_voronoiConnectEdge(edge, extent) {\n    var vb = edge.b;\n    if (vb) return true;\n    var va = edge.a,\n        x0 = extent[0][0],\n        x1 = extent[1][0],\n        y0 = extent[0][1],\n        y1 = extent[1][1],\n        lSite = edge.l,\n        rSite = edge.r,\n        lx = lSite.x,\n        ly = lSite.y,\n        rx = rSite.x,\n        ry = rSite.y,\n        fx = (lx + rx) / 2,\n        fy = (ly + ry) / 2,\n        fm,\n        fb;\n\n    if (ry === ly) {\n      if (fx < x0 || fx >= x1) return;\n\n      if (lx > rx) {\n        if (!va) va = {\n          x: fx,\n          y: y0\n        };else if (va.y >= y1) return;\n        vb = {\n          x: fx,\n          y: y1\n        };\n      } else {\n        if (!va) va = {\n          x: fx,\n          y: y1\n        };else if (va.y < y0) return;\n        vb = {\n          x: fx,\n          y: y0\n        };\n      }\n    } else {\n      fm = (lx - rx) / (ry - ly);\n      fb = fy - fm * fx;\n\n      if (fm < -1 || fm > 1) {\n        if (lx > rx) {\n          if (!va) va = {\n            x: (y0 - fb) / fm,\n            y: y0\n          };else if (va.y >= y1) return;\n          vb = {\n            x: (y1 - fb) / fm,\n            y: y1\n          };\n        } else {\n          if (!va) va = {\n            x: (y1 - fb) / fm,\n            y: y1\n          };else if (va.y < y0) return;\n          vb = {\n            x: (y0 - fb) / fm,\n            y: y0\n          };\n        }\n      } else {\n        if (ly < ry) {\n          if (!va) va = {\n            x: x0,\n            y: fm * x0 + fb\n          };else if (va.x >= x1) return;\n          vb = {\n            x: x1,\n            y: fm * x1 + fb\n          };\n        } else {\n          if (!va) va = {\n            x: x1,\n            y: fm * x1 + fb\n          };else if (va.x < x0) return;\n          vb = {\n            x: x0,\n            y: fm * x0 + fb\n          };\n        }\n      }\n    }\n\n    edge.a = va;\n    edge.b = vb;\n    return true;\n  }\n\n  function d3_geom_voronoiEdge(lSite, rSite) {\n    this.l = lSite;\n    this.r = rSite;\n    this.a = this.b = null;\n  }\n\n  function d3_geom_voronoiCreateEdge(lSite, rSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, rSite);\n    d3_geom_voronoiEdges.push(edge);\n    if (va) d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, va);\n    if (vb) d3_geom_voronoiSetEdgeEnd(edge, rSite, lSite, vb);\n    d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, lSite, rSite));\n    d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, rSite, lSite));\n    return edge;\n  }\n\n  function d3_geom_voronoiCreateBorderEdge(lSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, null);\n    edge.a = va;\n    edge.b = vb;\n    d3_geom_voronoiEdges.push(edge);\n    return edge;\n  }\n\n  function d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, vertex) {\n    if (!edge.a && !edge.b) {\n      edge.a = vertex;\n      edge.l = lSite;\n      edge.r = rSite;\n    } else if (edge.l === rSite) {\n      edge.b = vertex;\n    } else {\n      edge.a = vertex;\n    }\n  }\n\n  function d3_geom_voronoiHalfEdge(edge, lSite, rSite) {\n    var va = edge.a,\n        vb = edge.b;\n    this.edge = edge;\n    this.site = lSite;\n    this.angle = rSite ? Math.atan2(rSite.y - lSite.y, rSite.x - lSite.x) : edge.l === lSite ? Math.atan2(vb.x - va.x, va.y - vb.y) : Math.atan2(va.x - vb.x, vb.y - va.y);\n  }\n\n  d3_geom_voronoiHalfEdge.prototype = {\n    start: function start() {\n      return this.edge.l === this.site ? this.edge.a : this.edge.b;\n    },\n    end: function end() {\n      return this.edge.l === this.site ? this.edge.b : this.edge.a;\n    }\n  };\n\n  function d3_geom_voronoiRedBlackTree() {\n    this._ = null;\n  }\n\n  function d3_geom_voronoiRedBlackNode(node) {\n    node.U = node.C = node.L = node.R = node.P = node.N = null;\n  }\n\n  d3_geom_voronoiRedBlackTree.prototype = {\n    insert: function insert(after, node) {\n      var parent, grandpa, uncle;\n\n      if (after) {\n        node.P = after;\n        node.N = after.N;\n        if (after.N) after.N.P = node;\n        after.N = node;\n\n        if (after.R) {\n          after = after.R;\n\n          while (after.L) {\n            after = after.L;\n          }\n\n          after.L = node;\n        } else {\n          after.R = node;\n        }\n\n        parent = after;\n      } else if (this._) {\n        after = d3_geom_voronoiRedBlackFirst(this._);\n        node.P = null;\n        node.N = after;\n        after.P = after.L = node;\n        parent = after;\n      } else {\n        node.P = node.N = null;\n        this._ = node;\n        parent = null;\n      }\n\n      node.L = node.R = null;\n      node.U = parent;\n      node.C = true;\n      after = node;\n\n      while (parent && parent.C) {\n        grandpa = parent.U;\n\n        if (parent === grandpa.L) {\n          uncle = grandpa.R;\n\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.R) {\n              d3_geom_voronoiRedBlackRotateLeft(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, grandpa);\n          }\n        } else {\n          uncle = grandpa.L;\n\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.L) {\n              d3_geom_voronoiRedBlackRotateRight(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, grandpa);\n          }\n        }\n\n        parent = after.U;\n      }\n\n      this._.C = false;\n    },\n    remove: function remove(node) {\n      if (node.N) node.N.P = node.P;\n      if (node.P) node.P.N = node.N;\n      node.N = node.P = null;\n      var parent = node.U,\n          sibling,\n          left = node.L,\n          right = node.R,\n          next,\n          red;\n      if (!left) next = right;else if (!right) next = left;else next = d3_geom_voronoiRedBlackFirst(right);\n\n      if (parent) {\n        if (parent.L === node) parent.L = next;else parent.R = next;\n      } else {\n        this._ = next;\n      }\n\n      if (left && right) {\n        red = next.C;\n        next.C = node.C;\n        next.L = left;\n        left.U = next;\n\n        if (next !== right) {\n          parent = next.U;\n          next.U = node.U;\n          node = next.R;\n          parent.L = node;\n          next.R = right;\n          right.U = next;\n        } else {\n          next.U = parent;\n          parent = next;\n          node = next.R;\n        }\n      } else {\n        red = node.C;\n        node = next;\n      }\n\n      if (node) node.U = parent;\n      if (red) return;\n\n      if (node && node.C) {\n        node.C = false;\n        return;\n      }\n\n      do {\n        if (node === this._) break;\n\n        if (node === parent.L) {\n          sibling = parent.R;\n\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            sibling = parent.R;\n          }\n\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.R || !sibling.R.C) {\n              sibling.L.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateRight(this, sibling);\n              sibling = parent.R;\n            }\n\n            sibling.C = parent.C;\n            parent.C = sibling.R.C = false;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            node = this._;\n            break;\n          }\n        } else {\n          sibling = parent.L;\n\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            sibling = parent.L;\n          }\n\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.L || !sibling.L.C) {\n              sibling.R.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateLeft(this, sibling);\n              sibling = parent.L;\n            }\n\n            sibling.C = parent.C;\n            parent.C = sibling.L.C = false;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            node = this._;\n            break;\n          }\n        }\n\n        sibling.C = true;\n        node = parent;\n        parent = parent.U;\n      } while (!node.C);\n\n      if (node) node.C = false;\n    }\n  };\n\n  function d3_geom_voronoiRedBlackRotateLeft(tree, node) {\n    var p = node,\n        q = node.R,\n        parent = p.U;\n\n    if (parent) {\n      if (parent.L === p) parent.L = q;else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n\n    q.U = parent;\n    p.U = q;\n    p.R = q.L;\n    if (p.R) p.R.U = p;\n    q.L = p;\n  }\n\n  function d3_geom_voronoiRedBlackRotateRight(tree, node) {\n    var p = node,\n        q = node.L,\n        parent = p.U;\n\n    if (parent) {\n      if (parent.L === p) parent.L = q;else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n\n    q.U = parent;\n    p.U = q;\n    p.L = q.R;\n    if (p.L) p.L.U = p;\n    q.R = p;\n  }\n\n  function d3_geom_voronoiRedBlackFirst(node) {\n    while (node.L) {\n      node = node.L;\n    }\n\n    return node;\n  }\n\n  function d3_geom_voronoi(sites, bbox) {\n    var site = sites.sort(d3_geom_voronoiVertexOrder).pop(),\n        x0,\n        y0,\n        circle;\n    d3_geom_voronoiEdges = [];\n    d3_geom_voronoiCells = new Array(sites.length);\n    d3_geom_voronoiBeaches = new d3_geom_voronoiRedBlackTree();\n    d3_geom_voronoiCircles = new d3_geom_voronoiRedBlackTree();\n\n    while (true) {\n      circle = d3_geom_voronoiFirstCircle;\n\n      if (site && (!circle || site.y < circle.y || site.y === circle.y && site.x < circle.x)) {\n        if (site.x !== x0 || site.y !== y0) {\n          d3_geom_voronoiCells[site.i] = new d3_geom_voronoiCell(site);\n          d3_geom_voronoiAddBeach(site);\n          x0 = site.x, y0 = site.y;\n        }\n\n        site = sites.pop();\n      } else if (circle) {\n        d3_geom_voronoiRemoveBeach(circle.arc);\n      } else {\n        break;\n      }\n    }\n\n    if (bbox) d3_geom_voronoiClipEdges(bbox), d3_geom_voronoiCloseCells(bbox);\n    var diagram = {\n      cells: d3_geom_voronoiCells,\n      edges: d3_geom_voronoiEdges\n    };\n    d3_geom_voronoiBeaches = d3_geom_voronoiCircles = d3_geom_voronoiEdges = d3_geom_voronoiCells = null;\n    return diagram;\n  }\n\n  function d3_geom_voronoiVertexOrder(a, b) {\n    return b.y - a.y || b.x - a.x;\n  }\n\n  d3.geom.voronoi = function (points) {\n    var x = d3_geom_pointX,\n        y = d3_geom_pointY,\n        fx = x,\n        fy = y,\n        clipExtent = d3_geom_voronoiClipExtent;\n    if (points) return voronoi(points);\n\n    function voronoi(data) {\n      var polygons = new Array(data.length),\n          x0 = clipExtent[0][0],\n          y0 = clipExtent[0][1],\n          x1 = clipExtent[1][0],\n          y1 = clipExtent[1][1];\n      d3_geom_voronoi(sites(data), clipExtent).cells.forEach(function (cell, i) {\n        var edges = cell.edges,\n            site = cell.site,\n            polygon = polygons[i] = edges.length ? edges.map(function (e) {\n          var s = e.start();\n          return [s.x, s.y];\n        }) : site.x >= x0 && site.x <= x1 && site.y >= y0 && site.y <= y1 ? [[x0, y1], [x1, y1], [x1, y0], [x0, y0]] : [];\n        polygon.point = data[i];\n      });\n      return polygons;\n    }\n\n    function sites(data) {\n      return data.map(function (d, i) {\n        return {\n          x: Math.round(fx(d, i) / ) * ,\n          y: Math.round(fy(d, i) / ) * ,\n          i: i\n        };\n      });\n    }\n\n    voronoi.links = function (data) {\n      return d3_geom_voronoi(sites(data)).edges.filter(function (edge) {\n        return edge.l && edge.r;\n      }).map(function (edge) {\n        return {\n          source: data[edge.l.i],\n          target: data[edge.r.i]\n        };\n      });\n    };\n\n    voronoi.triangles = function (data) {\n      var triangles = [];\n      d3_geom_voronoi(sites(data)).cells.forEach(function (cell, i) {\n        var site = cell.site,\n            edges = cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),\n            j = -1,\n            m = edges.length,\n            e0,\n            s0,\n            e1 = edges[m - 1].edge,\n            s1 = e1.l === site ? e1.r : e1.l;\n\n        while (++j < m) {\n          e0 = e1;\n          s0 = s1;\n          e1 = edges[j].edge;\n          s1 = e1.l === site ? e1.r : e1.l;\n\n          if (i < s0.i && i < s1.i && d3_geom_voronoiTriangleArea(site, s0, s1) < 0) {\n            triangles.push([data[i], data[s0.i], data[s1.i]]);\n          }\n        }\n      });\n      return triangles;\n    };\n\n    voronoi.x = function (_) {\n      return arguments.length ? (fx = d3_functor(x = _), voronoi) : x;\n    };\n\n    voronoi.y = function (_) {\n      return arguments.length ? (fy = d3_functor(y = _), voronoi) : y;\n    };\n\n    voronoi.clipExtent = function (_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent;\n      clipExtent = _ == null ? d3_geom_voronoiClipExtent : _;\n      return voronoi;\n    };\n\n    voronoi.size = function (_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent && clipExtent[1];\n      return voronoi.clipExtent(_ && [[0, 0], _]);\n    };\n\n    return voronoi;\n  };\n\n  var d3_geom_voronoiClipExtent = [[-1e6, -1e6], [1e6, 1e6]];\n\n  function d3_geom_voronoiTriangleArea(a, b, c) {\n    return (a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y);\n  }\n\n  d3.geom.delaunay = function (vertices) {\n    return d3.geom.voronoi().triangles(vertices);\n  };\n\n  d3.geom.quadtree = function (points, x1, y1, x2, y2) {\n    var x = d3_geom_pointX,\n        y = d3_geom_pointY,\n        compat;\n\n    if (compat = arguments.length) {\n      x = d3_geom_quadtreeCompatX;\n      y = d3_geom_quadtreeCompatY;\n\n      if (compat === 3) {\n        y2 = y1;\n        x2 = x1;\n        y1 = x1 = 0;\n      }\n\n      return quadtree(points);\n    }\n\n    function quadtree(data) {\n      var d,\n          fx = d3_functor(x),\n          fy = d3_functor(y),\n          xs,\n          ys,\n          i,\n          n,\n          x1_,\n          y1_,\n          x2_,\n          y2_;\n\n      if (x1 != null) {\n        x1_ = x1, y1_ = y1, x2_ = x2, y2_ = y2;\n      } else {\n        x2_ = y2_ = -(x1_ = y1_ = Infinity);\n        xs = [], ys = [];\n        n = data.length;\n        if (compat) for (i = 0; i < n; ++i) {\n          d = data[i];\n          if (d.x < x1_) x1_ = d.x;\n          if (d.y < y1_) y1_ = d.y;\n          if (d.x > x2_) x2_ = d.x;\n          if (d.y > y2_) y2_ = d.y;\n          xs.push(d.x);\n          ys.push(d.y);\n        } else for (i = 0; i < n; ++i) {\n          var x_ = +fx(d = data[i], i),\n              y_ = +fy(d, i);\n          if (x_ < x1_) x1_ = x_;\n          if (y_ < y1_) y1_ = y_;\n          if (x_ > x2_) x2_ = x_;\n          if (y_ > y2_) y2_ = y_;\n          xs.push(x_);\n          ys.push(y_);\n        }\n      }\n\n      var dx = x2_ - x1_,\n          dy = y2_ - y1_;\n      if (dx > dy) y2_ = y1_ + dx;else x2_ = x1_ + dy;\n\n      function insert(n, d, x, y, x1, y1, x2, y2) {\n        if (isNaN(x) || isNaN(y)) return;\n\n        if (n.leaf) {\n          var nx = n.x,\n              ny = n.y;\n\n          if (nx != null) {\n            if (abs(nx - x) + abs(ny - y) < .01) {\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            } else {\n              var nPoint = n.point;\n              n.x = n.y = n.point = null;\n              insertChild(n, nPoint, nx, ny, x1, y1, x2, y2);\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            }\n          } else {\n            n.x = x, n.y = y, n.point = d;\n          }\n        } else {\n          insertChild(n, d, x, y, x1, y1, x2, y2);\n        }\n      }\n\n      function insertChild(n, d, x, y, x1, y1, x2, y2) {\n        var xm = (x1 + x2) * .5,\n            ym = (y1 + y2) * .5,\n            right = x >= xm,\n            below = y >= ym,\n            i = below << 1 | right;\n        n.leaf = false;\n        n = n.nodes[i] || (n.nodes[i] = d3_geom_quadtreeNode());\n        if (right) x1 = xm;else x2 = xm;\n        if (below) y1 = ym;else y2 = ym;\n        insert(n, d, x, y, x1, y1, x2, y2);\n      }\n\n      var root = d3_geom_quadtreeNode();\n\n      root.add = function (d) {\n        insert(root, d, +fx(d, ++i), +fy(d, i), x1_, y1_, x2_, y2_);\n      };\n\n      root.visit = function (f) {\n        d3_geom_quadtreeVisit(f, root, x1_, y1_, x2_, y2_);\n      };\n\n      root.find = function (point) {\n        return d3_geom_quadtreeFind(root, point[0], point[1], x1_, y1_, x2_, y2_);\n      };\n\n      i = -1;\n\n      if (x1 == null) {\n        while (++i < n) {\n          insert(root, data[i], xs[i], ys[i], x1_, y1_, x2_, y2_);\n        }\n\n        --i;\n      } else data.forEach(root.add);\n\n      xs = ys = data = d = null;\n      return root;\n    }\n\n    quadtree.x = function (_) {\n      return arguments.length ? (x = _, quadtree) : x;\n    };\n\n    quadtree.y = function (_) {\n      return arguments.length ? (y = _, quadtree) : y;\n    };\n\n    quadtree.extent = function (_) {\n      if (!arguments.length) return x1 == null ? null : [[x1, y1], [x2, y2]];\n      if (_ == null) x1 = y1 = x2 = y2 = null;else x1 = +_[0][0], y1 = +_[0][1], x2 = +_[1][0], y2 = +_[1][1];\n      return quadtree;\n    };\n\n    quadtree.size = function (_) {\n      if (!arguments.length) return x1 == null ? null : [x2 - x1, y2 - y1];\n      if (_ == null) x1 = y1 = x2 = y2 = null;else x1 = y1 = 0, x2 = +_[0], y2 = +_[1];\n      return quadtree;\n    };\n\n    return quadtree;\n  };\n\n  function d3_geom_quadtreeCompatX(d) {\n    return d.x;\n  }\n\n  function d3_geom_quadtreeCompatY(d) {\n    return d.y;\n  }\n\n  function d3_geom_quadtreeNode() {\n    return {\n      leaf: true,\n      nodes: [],\n      point: null,\n      x: null,\n      y: null\n    };\n  }\n\n  function d3_geom_quadtreeVisit(f, node, x1, y1, x2, y2) {\n    if (!f(node, x1, y1, x2, y2)) {\n      var sx = (x1 + x2) * .5,\n          sy = (y1 + y2) * .5,\n          children = node.nodes;\n      if (children[0]) d3_geom_quadtreeVisit(f, children[0], x1, y1, sx, sy);\n      if (children[1]) d3_geom_quadtreeVisit(f, children[1], sx, y1, x2, sy);\n      if (children[2]) d3_geom_quadtreeVisit(f, children[2], x1, sy, sx, y2);\n      if (children[3]) d3_geom_quadtreeVisit(f, children[3], sx, sy, x2, y2);\n    }\n  }\n\n  function d3_geom_quadtreeFind(root, x, y, x0, y0, x3, y3) {\n    var minDistance2 = Infinity,\n        closestPoint;\n\n    (function find(node, x1, y1, x2, y2) {\n      if (x1 > x3 || y1 > y3 || x2 < x0 || y2 < y0) return;\n\n      if (point = node.point) {\n        var point,\n            dx = x - node.x,\n            dy = y - node.y,\n            distance2 = dx * dx + dy * dy;\n\n        if (distance2 < minDistance2) {\n          var distance = Math.sqrt(minDistance2 = distance2);\n          x0 = x - distance, y0 = y - distance;\n          x3 = x + distance, y3 = y + distance;\n          closestPoint = point;\n        }\n      }\n\n      var children = node.nodes,\n          xm = (x1 + x2) * .5,\n          ym = (y1 + y2) * .5,\n          right = x >= xm,\n          below = y >= ym;\n\n      for (var i = below << 1 | right, j = i + 4; i < j; ++i) {\n        if (node = children[i & 3]) switch (i & 3) {\n          case 0:\n            find(node, x1, y1, xm, ym);\n            break;\n\n          case 1:\n            find(node, xm, y1, x2, ym);\n            break;\n\n          case 2:\n            find(node, x1, ym, xm, y2);\n            break;\n\n          case 3:\n            find(node, xm, ym, x2, y2);\n            break;\n        }\n      }\n    })(root, x0, y0, x3, y3);\n\n    return closestPoint;\n  }\n\n  d3.interpolateRgb = d3_interpolateRgb;\n\n  function d3_interpolateRgb(a, b) {\n    a = d3.rgb(a);\n    b = d3.rgb(b);\n    var ar = a.r,\n        ag = a.g,\n        ab = a.b,\n        br = b.r - ar,\n        bg = b.g - ag,\n        bb = b.b - ab;\n    return function (t) {\n      return \"#\" + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t));\n    };\n  }\n\n  d3.interpolateObject = d3_interpolateObject;\n\n  function d3_interpolateObject(a, b) {\n    var i = {},\n        c = {},\n        k;\n\n    for (k in a) {\n      if (k in b) {\n        i[k] = d3_interpolate(a[k], b[k]);\n      } else {\n        c[k] = a[k];\n      }\n    }\n\n    for (k in b) {\n      if (!(k in a)) {\n        c[k] = b[k];\n      }\n    }\n\n    return function (t) {\n      for (k in i) {\n        c[k] = i[k](t);\n      }\n\n      return c;\n    };\n  }\n\n  d3.interpolateNumber = d3_interpolateNumber;\n\n  function d3_interpolateNumber(a, b) {\n    a = +a, b = +b;\n    return function (t) {\n      return a * (1 - t) + b * t;\n    };\n  }\n\n  d3.interpolateString = d3_interpolateString;\n\n  function d3_interpolateString(a, b) {\n    var bi = d3_interpolate_numberA.lastIndex = d3_interpolate_numberB.lastIndex = 0,\n        am,\n        bm,\n        bs,\n        i = -1,\n        s = [],\n        q = [];\n    a = a + \"\", b = b + \"\";\n\n    while ((am = d3_interpolate_numberA.exec(a)) && (bm = d3_interpolate_numberB.exec(b))) {\n      if ((bs = bm.index) > bi) {\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs;else s[++i] = bs;\n      }\n\n      if ((am = am[0]) === (bm = bm[0])) {\n        if (s[i]) s[i] += bm;else s[++i] = bm;\n      } else {\n        s[++i] = null;\n        q.push({\n          i: i,\n          x: d3_interpolateNumber(am, bm)\n        });\n      }\n\n      bi = d3_interpolate_numberB.lastIndex;\n    }\n\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs;else s[++i] = bs;\n    }\n\n    return s.length < 2 ? q[0] ? (b = q[0].x, function (t) {\n      return b(t) + \"\";\n    }) : function () {\n      return b;\n    } : (b = q.length, function (t) {\n      for (var i = 0, o; i < b; ++i) {\n        s[(o = q[i]).i] = o.x(t);\n      }\n\n      return s.join(\"\");\n    });\n  }\n\n  var d3_interpolate_numberA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n      d3_interpolate_numberB = new RegExp(d3_interpolate_numberA.source, \"g\");\n  d3.interpolate = d3_interpolate;\n\n  function d3_interpolate(a, b) {\n    var i = d3.interpolators.length,\n        f;\n\n    while (--i >= 0 && !(f = d3.interpolators[i](a, b))) {\n      ;\n    }\n\n    return f;\n  }\n\n  d3.interpolators = [function (a, b) {\n    var t = typeof b;\n    return (t === \"string\" ? d3_rgb_names.has(b.toLowerCase()) || /^(#|rgb\\(|hsl\\()/i.test(b) ? d3_interpolateRgb : d3_interpolateString : b instanceof d3_color ? d3_interpolateRgb : Array.isArray(b) ? d3_interpolateArray : t === \"object\" && isNaN(b) ? d3_interpolateObject : d3_interpolateNumber)(a, b);\n  }];\n  d3.interpolateArray = d3_interpolateArray;\n\n  function d3_interpolateArray(a, b) {\n    var x = [],\n        c = [],\n        na = a.length,\n        nb = b.length,\n        n0 = Math.min(a.length, b.length),\n        i;\n\n    for (i = 0; i < n0; ++i) {\n      x.push(d3_interpolate(a[i], b[i]));\n    }\n\n    for (; i < na; ++i) {\n      c[i] = a[i];\n    }\n\n    for (; i < nb; ++i) {\n      c[i] = b[i];\n    }\n\n    return function (t) {\n      for (i = 0; i < n0; ++i) {\n        c[i] = x[i](t);\n      }\n\n      return c;\n    };\n  }\n\n  var d3_ease_default = function d3_ease_default() {\n    return d3_identity;\n  };\n\n  var d3_ease = d3.map({\n    linear: d3_ease_default,\n    poly: d3_ease_poly,\n    quad: function quad() {\n      return d3_ease_quad;\n    },\n    cubic: function cubic() {\n      return d3_ease_cubic;\n    },\n    sin: function sin() {\n      return d3_ease_sin;\n    },\n    exp: function exp() {\n      return d3_ease_exp;\n    },\n    circle: function circle() {\n      return d3_ease_circle;\n    },\n    elastic: d3_ease_elastic,\n    back: d3_ease_back,\n    bounce: function bounce() {\n      return d3_ease_bounce;\n    }\n  });\n  var d3_ease_mode = d3.map({\n    \"in\": d3_identity,\n    out: d3_ease_reverse,\n    \"in-out\": d3_ease_reflect,\n    \"out-in\": function outIn(f) {\n      return d3_ease_reflect(d3_ease_reverse(f));\n    }\n  });\n\n  d3.ease = function (name) {\n    var i = name.indexOf(\"-\"),\n        t = i >= 0 ? name.slice(0, i) : name,\n        m = i >= 0 ? name.slice(i + 1) : \"in\";\n    t = d3_ease.get(t) || d3_ease_default;\n    m = d3_ease_mode.get(m) || d3_identity;\n    return d3_ease_clamp(m(t.apply(null, d3_arraySlice.call(arguments, 1))));\n  };\n\n  function d3_ease_clamp(f) {\n    return function (t) {\n      return t <= 0 ? 0 : t >= 1 ? 1 : f(t);\n    };\n  }\n\n  function d3_ease_reverse(f) {\n    return function (t) {\n      return 1 - f(1 - t);\n    };\n  }\n\n  function d3_ease_reflect(f) {\n    return function (t) {\n      return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));\n    };\n  }\n\n  function d3_ease_quad(t) {\n    return t * t;\n  }\n\n  function d3_ease_cubic(t) {\n    return t * t * t;\n  }\n\n  function d3_ease_cubicInOut(t) {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    var t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n  }\n\n  function d3_ease_poly(e) {\n    return function (t) {\n      return Math.pow(t, e);\n    };\n  }\n\n  function d3_ease_sin(t) {\n    return 1 - Math.cos(t * half);\n  }\n\n  function d3_ease_exp(t) {\n    return Math.pow(2, 10 * (t - 1));\n  }\n\n  function d3_ease_circle(t) {\n    return 1 - Math.sqrt(1 - t * t);\n  }\n\n  function d3_ease_elastic(a, p) {\n    var s;\n    if (arguments.length < 2) p = .45;\n    if (arguments.length) s = p /  * Math.asin(1 / a);else a = 1, s = p / 4;\n    return function (t) {\n      return 1 + a * Math.pow(2, -10 * t) * Math.sin((t - s) *  / p);\n    };\n  }\n\n  function d3_ease_back(s) {\n    if (!s) s = 1.70158;\n    return function (t) {\n      return t * t * ((s + 1) * t - s);\n    };\n  }\n\n  function d3_ease_bounce(t) {\n    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;\n  }\n\n  d3.interpolateHcl = d3_interpolateHcl;\n\n  function d3_interpolateHcl(a, b) {\n    a = d3.hcl(a);\n    b = d3.hcl(b);\n    var ah = a.h,\n        ac = a.c,\n        al = a.l,\n        bh = b.h - ah,\n        bc = b.c - ac,\n        bl = b.l - al;\n    if (isNaN(bc)) bc = 0, ac = isNaN(ac) ? b.c : ac;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah;else if (bh > 180) bh -= 360;else if (bh < -180) bh += 360;\n    return function (t) {\n      return d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + \"\";\n    };\n  }\n\n  d3.interpolateHsl = d3_interpolateHsl;\n\n  function d3_interpolateHsl(a, b) {\n    a = d3.hsl(a);\n    b = d3.hsl(b);\n    var ah = a.h,\n        as = a.s,\n        al = a.l,\n        bh = b.h - ah,\n        bs = b.s - as,\n        bl = b.l - al;\n    if (isNaN(bs)) bs = 0, as = isNaN(as) ? b.s : as;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah;else if (bh > 180) bh -= 360;else if (bh < -180) bh += 360;\n    return function (t) {\n      return d3_hsl_rgb(ah + bh * t, as + bs * t, al + bl * t) + \"\";\n    };\n  }\n\n  d3.interpolateLab = d3_interpolateLab;\n\n  function d3_interpolateLab(a, b) {\n    a = d3.lab(a);\n    b = d3.lab(b);\n    var al = a.l,\n        aa = a.a,\n        ab = a.b,\n        bl = b.l - al,\n        ba = b.a - aa,\n        bb = b.b - ab;\n    return function (t) {\n      return d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + \"\";\n    };\n  }\n\n  d3.interpolateRound = d3_interpolateRound;\n\n  function d3_interpolateRound(a, b) {\n    b -= a;\n    return function (t) {\n      return Math.round(a + b * t);\n    };\n  }\n\n  d3.transform = function (string) {\n    var g = d3_document.createElementNS(d3.ns.prefix.svg, \"g\");\n    return (d3.transform = function (string) {\n      if (string != null) {\n        g.setAttribute(\"transform\", string);\n        var t = g.transform.baseVal.consolidate();\n      }\n\n      return new d3_transform(t ? t.matrix : d3_transformIdentity);\n    })(string);\n  };\n\n  function d3_transform(m) {\n    var r0 = [m.a, m.b],\n        r1 = [m.c, m.d],\n        kx = d3_transformNormalize(r0),\n        kz = d3_transformDot(r0, r1),\n        ky = d3_transformNormalize(d3_transformCombine(r1, r0, -kz)) || 0;\n\n    if (r0[0] * r1[1] < r1[0] * r0[1]) {\n      r0[0] *= -1;\n      r0[1] *= -1;\n      kx *= -1;\n      kz *= -1;\n    }\n\n    this.rotate = (kx ? Math.atan2(r0[1], r0[0]) : Math.atan2(-r1[0], r1[1])) * d3_degrees;\n    this.translate = [m.e, m.f];\n    this.scale = [kx, ky];\n    this.skew = ky ? Math.atan2(kz, ky) * d3_degrees : 0;\n  }\n\n  d3_transform.prototype.toString = function () {\n    return \"translate(\" + this.translate + \")rotate(\" + this.rotate + \")skewX(\" + this.skew + \")scale(\" + this.scale + \")\";\n  };\n\n  function d3_transformDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n  }\n\n  function d3_transformNormalize(a) {\n    var k = Math.sqrt(d3_transformDot(a, a));\n\n    if (k) {\n      a[0] /= k;\n      a[1] /= k;\n    }\n\n    return k;\n  }\n\n  function d3_transformCombine(a, b, k) {\n    a[0] += k * b[0];\n    a[1] += k * b[1];\n    return a;\n  }\n\n  var d3_transformIdentity = {\n    a: 1,\n    b: 0,\n    c: 0,\n    d: 1,\n    e: 0,\n    f: 0\n  };\n  d3.interpolateTransform = d3_interpolateTransform;\n\n  function d3_interpolateTransformPop(s) {\n    return s.length ? s.pop() + \",\" : \"\";\n  }\n\n  function d3_interpolateTranslate(ta, tb, s, q) {\n    if (ta[0] !== tb[0] || ta[1] !== tb[1]) {\n      var i = s.push(\"translate(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ta[0], tb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ta[1], tb[1])\n      });\n    } else if (tb[0] || tb[1]) {\n      s.push(\"translate(\" + tb + \")\");\n    }\n  }\n\n  function d3_interpolateRotate(ra, rb, s, q) {\n    if (ra !== rb) {\n      if (ra - rb > 180) rb += 360;else if (rb - ra > 180) ra += 360;\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"rotate(\", null, \")\") - 2,\n        x: d3_interpolateNumber(ra, rb)\n      });\n    } else if (rb) {\n      s.push(d3_interpolateTransformPop(s) + \"rotate(\" + rb + \")\");\n    }\n  }\n\n  function d3_interpolateSkew(wa, wb, s, q) {\n    if (wa !== wb) {\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"skewX(\", null, \")\") - 2,\n        x: d3_interpolateNumber(wa, wb)\n      });\n    } else if (wb) {\n      s.push(d3_interpolateTransformPop(s) + \"skewX(\" + wb + \")\");\n    }\n  }\n\n  function d3_interpolateScale(ka, kb, s, q) {\n    if (ka[0] !== kb[0] || ka[1] !== kb[1]) {\n      var i = s.push(d3_interpolateTransformPop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ka[0], kb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ka[1], kb[1])\n      });\n    } else if (kb[0] !== 1 || kb[1] !== 1) {\n      s.push(d3_interpolateTransformPop(s) + \"scale(\" + kb + \")\");\n    }\n  }\n\n  function d3_interpolateTransform(a, b) {\n    var s = [],\n        q = [];\n    a = d3.transform(a), b = d3.transform(b);\n    d3_interpolateTranslate(a.translate, b.translate, s, q);\n    d3_interpolateRotate(a.rotate, b.rotate, s, q);\n    d3_interpolateSkew(a.skew, b.skew, s, q);\n    d3_interpolateScale(a.scale, b.scale, s, q);\n    a = b = null;\n    return function (t) {\n      var i = -1,\n          n = q.length,\n          o;\n\n      while (++i < n) {\n        s[(o = q[i]).i] = o.x(t);\n      }\n\n      return s.join(\"\");\n    };\n  }\n\n  function d3_uninterpolateNumber(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function (x) {\n      return (x - a) / b;\n    };\n  }\n\n  function d3_uninterpolateClamp(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function (x) {\n      return Math.max(0, Math.min(1, (x - a) / b));\n    };\n  }\n\n  d3.layout = {};\n\n  d3.layout.bundle = function () {\n    return function (links) {\n      var paths = [],\n          i = -1,\n          n = links.length;\n\n      while (++i < n) {\n        paths.push(d3_layout_bundlePath(links[i]));\n      }\n\n      return paths;\n    };\n  };\n\n  function d3_layout_bundlePath(link) {\n    var start = link.source,\n        end = link.target,\n        lca = d3_layout_bundleLeastCommonAncestor(start, end),\n        points = [start];\n\n    while (start !== lca) {\n      start = start.parent;\n      points.push(start);\n    }\n\n    var k = points.length;\n\n    while (end !== lca) {\n      points.splice(k, 0, end);\n      end = end.parent;\n    }\n\n    return points;\n  }\n\n  function d3_layout_bundleAncestors(node) {\n    var ancestors = [],\n        parent = node.parent;\n\n    while (parent != null) {\n      ancestors.push(node);\n      node = parent;\n      parent = parent.parent;\n    }\n\n    ancestors.push(node);\n    return ancestors;\n  }\n\n  function d3_layout_bundleLeastCommonAncestor(a, b) {\n    if (a === b) return a;\n    var aNodes = d3_layout_bundleAncestors(a),\n        bNodes = d3_layout_bundleAncestors(b),\n        aNode = aNodes.pop(),\n        bNode = bNodes.pop(),\n        sharedNode = null;\n\n    while (aNode === bNode) {\n      sharedNode = aNode;\n      aNode = aNodes.pop();\n      bNode = bNodes.pop();\n    }\n\n    return sharedNode;\n  }\n\n  d3.layout.chord = function () {\n    var chord = {},\n        chords,\n        groups,\n        matrix,\n        n,\n        padding = 0,\n        sortGroups,\n        sortSubgroups,\n        sortChords;\n\n    function relayout() {\n      var subgroups = {},\n          groupSums = [],\n          groupIndex = d3.range(n),\n          subgroupIndex = [],\n          k,\n          x,\n          x0,\n          i,\n          j;\n      chords = [];\n      groups = [];\n      k = 0, i = -1;\n\n      while (++i < n) {\n        x = 0, j = -1;\n\n        while (++j < n) {\n          x += matrix[i][j];\n        }\n\n        groupSums.push(x);\n        subgroupIndex.push(d3.range(n));\n        k += x;\n      }\n\n      if (sortGroups) {\n        groupIndex.sort(function (a, b) {\n          return sortGroups(groupSums[a], groupSums[b]);\n        });\n      }\n\n      if (sortSubgroups) {\n        subgroupIndex.forEach(function (d, i) {\n          d.sort(function (a, b) {\n            return sortSubgroups(matrix[i][a], matrix[i][b]);\n          });\n        });\n      }\n\n      k = ( - padding * n) / k;\n      x = 0, i = -1;\n\n      while (++i < n) {\n        x0 = x, j = -1;\n\n        while (++j < n) {\n          var di = groupIndex[i],\n              dj = subgroupIndex[di][j],\n              v = matrix[di][dj],\n              a0 = x,\n              a1 = x += v * k;\n          subgroups[di + \"-\" + dj] = {\n            index: di,\n            subindex: dj,\n            startAngle: a0,\n            endAngle: a1,\n            value: v\n          };\n        }\n\n        groups[di] = {\n          index: di,\n          startAngle: x0,\n          endAngle: x,\n          value: groupSums[di]\n        };\n        x += padding;\n      }\n\n      i = -1;\n\n      while (++i < n) {\n        j = i - 1;\n\n        while (++j < n) {\n          var source = subgroups[i + \"-\" + j],\n              target = subgroups[j + \"-\" + i];\n\n          if (source.value || target.value) {\n            chords.push(source.value < target.value ? {\n              source: target,\n              target: source\n            } : {\n              source: source,\n              target: target\n            });\n          }\n        }\n      }\n\n      if (sortChords) resort();\n    }\n\n    function resort() {\n      chords.sort(function (a, b) {\n        return sortChords((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2);\n      });\n    }\n\n    chord.matrix = function (x) {\n      if (!arguments.length) return matrix;\n      n = (matrix = x) && matrix.length;\n      chords = groups = null;\n      return chord;\n    };\n\n    chord.padding = function (x) {\n      if (!arguments.length) return padding;\n      padding = x;\n      chords = groups = null;\n      return chord;\n    };\n\n    chord.sortGroups = function (x) {\n      if (!arguments.length) return sortGroups;\n      sortGroups = x;\n      chords = groups = null;\n      return chord;\n    };\n\n    chord.sortSubgroups = function (x) {\n      if (!arguments.length) return sortSubgroups;\n      sortSubgroups = x;\n      chords = null;\n      return chord;\n    };\n\n    chord.sortChords = function (x) {\n      if (!arguments.length) return sortChords;\n      sortChords = x;\n      if (chords) resort();\n      return chord;\n    };\n\n    chord.chords = function () {\n      if (!chords) relayout();\n      return chords;\n    };\n\n    chord.groups = function () {\n      if (!groups) relayout();\n      return groups;\n    };\n\n    return chord;\n  };\n\n  d3.layout.force = function () {\n    var force = {},\n        event = d3.dispatch(\"start\", \"tick\", \"end\"),\n        timer,\n        size = [1, 1],\n        drag,\n        alpha,\n        friction = .9,\n        linkDistance = d3_layout_forceLinkDistance,\n        linkStrength = d3_layout_forceLinkStrength,\n        charge = -30,\n        chargeDistance2 = d3_layout_forceChargeDistance2,\n        gravity = .1,\n        theta2 = .64,\n        nodes = [],\n        links = [],\n        distances,\n        strengths,\n        charges;\n\n    function repulse(node) {\n      return function (quad, x1, _, x2) {\n        if (quad.point !== node) {\n          var dx = quad.cx - node.x,\n              dy = quad.cy - node.y,\n              dw = x2 - x1,\n              dn = dx * dx + dy * dy;\n\n          if (dw * dw / theta2 < dn) {\n            if (dn < chargeDistance2) {\n              var k = quad.charge / dn;\n              node.px -= dx * k;\n              node.py -= dy * k;\n            }\n\n            return true;\n          }\n\n          if (quad.point && dn && dn < chargeDistance2) {\n            var k = quad.pointCharge / dn;\n            node.px -= dx * k;\n            node.py -= dy * k;\n          }\n        }\n\n        return !quad.charge;\n      };\n    }\n\n    force.tick = function () {\n      if ((alpha *= .99) < .005) {\n        timer = null;\n        event.end({\n          type: \"end\",\n          alpha: alpha = 0\n        });\n        return true;\n      }\n\n      var n = nodes.length,\n          m = links.length,\n          q,\n          i,\n          o,\n          s,\n          t,\n          l,\n          k,\n          x,\n          y;\n\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        s = o.source;\n        t = o.target;\n        x = t.x - s.x;\n        y = t.y - s.y;\n\n        if (l = x * x + y * y) {\n          l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l;\n          x *= l;\n          y *= l;\n          t.x -= x * (k = s.weight + t.weight ? s.weight / (s.weight + t.weight) : .5);\n          t.y -= y * k;\n          s.x += x * (k = 1 - k);\n          s.y += y * k;\n        }\n      }\n\n      if (k = alpha * gravity) {\n        x = size[0] / 2;\n        y = size[1] / 2;\n        i = -1;\n        if (k) while (++i < n) {\n          o = nodes[i];\n          o.x += (x - o.x) * k;\n          o.y += (y - o.y) * k;\n        }\n      }\n\n      if (charge) {\n        d3_layout_forceAccumulate(q = d3.geom.quadtree(nodes), alpha, charges);\n        i = -1;\n\n        while (++i < n) {\n          if (!(o = nodes[i]).fixed) {\n            q.visit(repulse(o));\n          }\n        }\n      }\n\n      i = -1;\n\n      while (++i < n) {\n        o = nodes[i];\n\n        if (o.fixed) {\n          o.x = o.px;\n          o.y = o.py;\n        } else {\n          o.x -= (o.px - (o.px = o.x)) * friction;\n          o.y -= (o.py - (o.py = o.y)) * friction;\n        }\n      }\n\n      event.tick({\n        type: \"tick\",\n        alpha: alpha\n      });\n    };\n\n    force.nodes = function (x) {\n      if (!arguments.length) return nodes;\n      nodes = x;\n      return force;\n    };\n\n    force.links = function (x) {\n      if (!arguments.length) return links;\n      links = x;\n      return force;\n    };\n\n    force.size = function (x) {\n      if (!arguments.length) return size;\n      size = x;\n      return force;\n    };\n\n    force.linkDistance = function (x) {\n      if (!arguments.length) return linkDistance;\n      linkDistance = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n\n    force.distance = force.linkDistance;\n\n    force.linkStrength = function (x) {\n      if (!arguments.length) return linkStrength;\n      linkStrength = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n\n    force.friction = function (x) {\n      if (!arguments.length) return friction;\n      friction = +x;\n      return force;\n    };\n\n    force.charge = function (x) {\n      if (!arguments.length) return charge;\n      charge = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n\n    force.chargeDistance = function (x) {\n      if (!arguments.length) return Math.sqrt(chargeDistance2);\n      chargeDistance2 = x * x;\n      return force;\n    };\n\n    force.gravity = function (x) {\n      if (!arguments.length) return gravity;\n      gravity = +x;\n      return force;\n    };\n\n    force.theta = function (x) {\n      if (!arguments.length) return Math.sqrt(theta2);\n      theta2 = x * x;\n      return force;\n    };\n\n    force.alpha = function (x) {\n      if (!arguments.length) return alpha;\n      x = +x;\n\n      if (alpha) {\n        if (x > 0) {\n          alpha = x;\n        } else {\n          timer.c = null, timer.t = NaN, timer = null;\n          event.end({\n            type: \"end\",\n            alpha: alpha = 0\n          });\n        }\n      } else if (x > 0) {\n        event.start({\n          type: \"start\",\n          alpha: alpha = x\n        });\n        timer = d3_timer(force.tick);\n      }\n\n      return force;\n    };\n\n    force.start = function () {\n      var i,\n          n = nodes.length,\n          m = links.length,\n          w = size[0],\n          h = size[1],\n          neighbors,\n          o;\n\n      for (i = 0; i < n; ++i) {\n        (o = nodes[i]).index = i;\n        o.weight = 0;\n      }\n\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        if (typeof o.source == \"number\") o.source = nodes[o.source];\n        if (typeof o.target == \"number\") o.target = nodes[o.target];\n        ++o.source.weight;\n        ++o.target.weight;\n      }\n\n      for (i = 0; i < n; ++i) {\n        o = nodes[i];\n        if (isNaN(o.x)) o.x = position(\"x\", w);\n        if (isNaN(o.y)) o.y = position(\"y\", h);\n        if (isNaN(o.px)) o.px = o.x;\n        if (isNaN(o.py)) o.py = o.y;\n      }\n\n      distances = [];\n      if (typeof linkDistance === \"function\") for (i = 0; i < m; ++i) {\n        distances[i] = +linkDistance.call(this, links[i], i);\n      } else for (i = 0; i < m; ++i) {\n        distances[i] = linkDistance;\n      }\n      strengths = [];\n      if (typeof linkStrength === \"function\") for (i = 0; i < m; ++i) {\n        strengths[i] = +linkStrength.call(this, links[i], i);\n      } else for (i = 0; i < m; ++i) {\n        strengths[i] = linkStrength;\n      }\n      charges = [];\n      if (typeof charge === \"function\") for (i = 0; i < n; ++i) {\n        charges[i] = +charge.call(this, nodes[i], i);\n      } else for (i = 0; i < n; ++i) {\n        charges[i] = charge;\n      }\n\n      function position(dimension, size) {\n        if (!neighbors) {\n          neighbors = new Array(n);\n\n          for (j = 0; j < n; ++j) {\n            neighbors[j] = [];\n          }\n\n          for (j = 0; j < m; ++j) {\n            var o = links[j];\n            neighbors[o.source.index].push(o.target);\n            neighbors[o.target.index].push(o.source);\n          }\n        }\n\n        var candidates = neighbors[i],\n            j = -1,\n            l = candidates.length,\n            x;\n\n        while (++j < l) {\n          if (!isNaN(x = candidates[j][dimension])) return x;\n        }\n\n        return Math.random() * size;\n      }\n\n      return force.resume();\n    };\n\n    force.resume = function () {\n      return force.alpha(.1);\n    };\n\n    force.stop = function () {\n      return force.alpha(0);\n    };\n\n    force.drag = function () {\n      if (!drag) drag = d3.behavior.drag().origin(d3_identity).on(\"dragstart.force\", d3_layout_forceDragstart).on(\"drag.force\", dragmove).on(\"dragend.force\", d3_layout_forceDragend);\n      if (!arguments.length) return drag;\n      this.on(\"mouseover.force\", d3_layout_forceMouseover).on(\"mouseout.force\", d3_layout_forceMouseout).call(drag);\n    };\n\n    function dragmove(d) {\n      d.px = d3.event.x, d.py = d3.event.y;\n      force.resume();\n    }\n\n    return d3.rebind(force, event, \"on\");\n  };\n\n  function d3_layout_forceDragstart(d) {\n    d.fixed |= 2;\n  }\n\n  function d3_layout_forceDragend(d) {\n    d.fixed &= ~6;\n  }\n\n  function d3_layout_forceMouseover(d) {\n    d.fixed |= 4;\n    d.px = d.x, d.py = d.y;\n  }\n\n  function d3_layout_forceMouseout(d) {\n    d.fixed &= ~4;\n  }\n\n  function d3_layout_forceAccumulate(quad, alpha, charges) {\n    var cx = 0,\n        cy = 0;\n    quad.charge = 0;\n\n    if (!quad.leaf) {\n      var nodes = quad.nodes,\n          n = nodes.length,\n          i = -1,\n          c;\n\n      while (++i < n) {\n        c = nodes[i];\n        if (c == null) continue;\n        d3_layout_forceAccumulate(c, alpha, charges);\n        quad.charge += c.charge;\n        cx += c.charge * c.cx;\n        cy += c.charge * c.cy;\n      }\n    }\n\n    if (quad.point) {\n      if (!quad.leaf) {\n        quad.point.x += Math.random() - .5;\n        quad.point.y += Math.random() - .5;\n      }\n\n      var k = alpha * charges[quad.point.index];\n      quad.charge += quad.pointCharge = k;\n      cx += k * quad.point.x;\n      cy += k * quad.point.y;\n    }\n\n    quad.cx = cx / quad.charge;\n    quad.cy = cy / quad.charge;\n  }\n\n  var d3_layout_forceLinkDistance = 20,\n      d3_layout_forceLinkStrength = 1,\n      d3_layout_forceChargeDistance2 = Infinity;\n\n  d3.layout.hierarchy = function () {\n    var sort = d3_layout_hierarchySort,\n        children = d3_layout_hierarchyChildren,\n        value = d3_layout_hierarchyValue;\n\n    function hierarchy(root) {\n      var stack = [root],\n          nodes = [],\n          node;\n      root.depth = 0;\n\n      while ((node = stack.pop()) != null) {\n        nodes.push(node);\n\n        if ((childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {\n          var n, childs, child;\n\n          while (--n >= 0) {\n            stack.push(child = childs[n]);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n\n          if (value) node.value = 0;\n          node.children = childs;\n        } else {\n          if (value) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          delete node.children;\n        }\n      }\n\n      d3_layout_hierarchyVisitAfter(root, function (node) {\n        var childs, parent;\n        if (sort && (childs = node.children)) childs.sort(sort);\n        if (value && (parent = node.parent)) parent.value += node.value;\n      });\n      return nodes;\n    }\n\n    hierarchy.sort = function (x) {\n      if (!arguments.length) return sort;\n      sort = x;\n      return hierarchy;\n    };\n\n    hierarchy.children = function (x) {\n      if (!arguments.length) return children;\n      children = x;\n      return hierarchy;\n    };\n\n    hierarchy.value = function (x) {\n      if (!arguments.length) return value;\n      value = x;\n      return hierarchy;\n    };\n\n    hierarchy.revalue = function (root) {\n      if (value) {\n        d3_layout_hierarchyVisitBefore(root, function (node) {\n          if (node.children) node.value = 0;\n        });\n        d3_layout_hierarchyVisitAfter(root, function (node) {\n          var parent;\n          if (!node.children) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          if (parent = node.parent) parent.value += node.value;\n        });\n      }\n\n      return root;\n    };\n\n    return hierarchy;\n  };\n\n  function d3_layout_hierarchyRebind(object, hierarchy) {\n    d3.rebind(object, hierarchy, \"sort\", \"children\", \"value\");\n    object.nodes = object;\n    object.links = d3_layout_hierarchyLinks;\n    return object;\n  }\n\n  function d3_layout_hierarchyVisitBefore(node, callback) {\n    var nodes = [node];\n\n    while ((node = nodes.pop()) != null) {\n      callback(node);\n\n      if ((children = node.children) && (n = children.length)) {\n        var n, children;\n\n        while (--n >= 0) {\n          nodes.push(children[n]);\n        }\n      }\n    }\n  }\n\n  function d3_layout_hierarchyVisitAfter(node, callback) {\n    var nodes = [node],\n        nodes2 = [];\n\n    while ((node = nodes.pop()) != null) {\n      nodes2.push(node);\n\n      if ((children = node.children) && (n = children.length)) {\n        var i = -1,\n            n,\n            children;\n\n        while (++i < n) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n\n    while ((node = nodes2.pop()) != null) {\n      callback(node);\n    }\n  }\n\n  function d3_layout_hierarchyChildren(d) {\n    return d.children;\n  }\n\n  function d3_layout_hierarchyValue(d) {\n    return d.value;\n  }\n\n  function d3_layout_hierarchySort(a, b) {\n    return b.value - a.value;\n  }\n\n  function d3_layout_hierarchyLinks(nodes) {\n    return d3.merge(nodes.map(function (parent) {\n      return (parent.children || []).map(function (child) {\n        return {\n          source: parent,\n          target: child\n        };\n      });\n    }));\n  }\n\n  d3.layout.partition = function () {\n    var hierarchy = d3.layout.hierarchy(),\n        size = [1, 1];\n\n    function position(node, x, dx, dy) {\n      var children = node.children;\n      node.x = x;\n      node.y = node.depth * dy;\n      node.dx = dx;\n      node.dy = dy;\n\n      if (children && (n = children.length)) {\n        var i = -1,\n            n,\n            c,\n            d;\n        dx = node.value ? dx / node.value : 0;\n\n        while (++i < n) {\n          position(c = children[i], x, d = c.value * dx, dy);\n          x += d;\n        }\n      }\n    }\n\n    function depth(node) {\n      var children = node.children,\n          d = 0;\n\n      if (children && (n = children.length)) {\n        var i = -1,\n            n;\n\n        while (++i < n) {\n          d = Math.max(d, depth(children[i]));\n        }\n      }\n\n      return 1 + d;\n    }\n\n    function partition(d, i) {\n      var nodes = hierarchy.call(this, d, i);\n      position(nodes[0], 0, size[0], size[1] / depth(nodes[0]));\n      return nodes;\n    }\n\n    partition.size = function (x) {\n      if (!arguments.length) return size;\n      size = x;\n      return partition;\n    };\n\n    return d3_layout_hierarchyRebind(partition, hierarchy);\n  };\n\n  d3.layout.pie = function () {\n    var value = Number,\n        sort = d3_layout_pieSortByValue,\n        startAngle = 0,\n        endAngle = ,\n        padAngle = 0;\n\n    function pie(data) {\n      var n = data.length,\n          values = data.map(function (d, i) {\n        return +value.call(pie, d, i);\n      }),\n          a = +(typeof startAngle === \"function\" ? startAngle.apply(this, arguments) : startAngle),\n          da = (typeof endAngle === \"function\" ? endAngle.apply(this, arguments) : endAngle) - a,\n          p = Math.min(Math.abs(da) / n, +(typeof padAngle === \"function\" ? padAngle.apply(this, arguments) : padAngle)),\n          pa = p * (da < 0 ? -1 : 1),\n          sum = d3.sum(values),\n          k = sum ? (da - n * pa) / sum : 0,\n          index = d3.range(n),\n          arcs = [],\n          v;\n      if (sort != null) index.sort(sort === d3_layout_pieSortByValue ? function (i, j) {\n        return values[j] - values[i];\n      } : function (i, j) {\n        return sort(data[i], data[j]);\n      });\n      index.forEach(function (i) {\n        arcs[i] = {\n          data: data[i],\n          value: v = values[i],\n          startAngle: a,\n          endAngle: a += v * k + pa,\n          padAngle: p\n        };\n      });\n      return arcs;\n    }\n\n    pie.value = function (_) {\n      if (!arguments.length) return value;\n      value = _;\n      return pie;\n    };\n\n    pie.sort = function (_) {\n      if (!arguments.length) return sort;\n      sort = _;\n      return pie;\n    };\n\n    pie.startAngle = function (_) {\n      if (!arguments.length) return startAngle;\n      startAngle = _;\n      return pie;\n    };\n\n    pie.endAngle = function (_) {\n      if (!arguments.length) return endAngle;\n      endAngle = _;\n      return pie;\n    };\n\n    pie.padAngle = function (_) {\n      if (!arguments.length) return padAngle;\n      padAngle = _;\n      return pie;\n    };\n\n    return pie;\n  };\n\n  var d3_layout_pieSortByValue = {};\n\n  d3.layout.stack = function () {\n    var values = d3_identity,\n        order = d3_layout_stackOrderDefault,\n        offset = d3_layout_stackOffsetZero,\n        out = d3_layout_stackOut,\n        x = d3_layout_stackX,\n        y = d3_layout_stackY;\n\n    function stack(data, index) {\n      if (!(n = data.length)) return data;\n      var series = data.map(function (d, i) {\n        return values.call(stack, d, i);\n      });\n      var points = series.map(function (d) {\n        return d.map(function (v, i) {\n          return [x.call(stack, v, i), y.call(stack, v, i)];\n        });\n      });\n      var orders = order.call(stack, points, index);\n      series = d3.permute(series, orders);\n      points = d3.permute(points, orders);\n      var offsets = offset.call(stack, points, index);\n      var m = series[0].length,\n          n,\n          i,\n          j,\n          o;\n\n      for (j = 0; j < m; ++j) {\n        out.call(stack, series[0][j], o = offsets[j], points[0][j][1]);\n\n        for (i = 1; i < n; ++i) {\n          out.call(stack, series[i][j], o += points[i - 1][j][1], points[i][j][1]);\n        }\n      }\n\n      return data;\n    }\n\n    stack.values = function (x) {\n      if (!arguments.length) return values;\n      values = x;\n      return stack;\n    };\n\n    stack.order = function (x) {\n      if (!arguments.length) return order;\n      order = typeof x === \"function\" ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault;\n      return stack;\n    };\n\n    stack.offset = function (x) {\n      if (!arguments.length) return offset;\n      offset = typeof x === \"function\" ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero;\n      return stack;\n    };\n\n    stack.x = function (z) {\n      if (!arguments.length) return x;\n      x = z;\n      return stack;\n    };\n\n    stack.y = function (z) {\n      if (!arguments.length) return y;\n      y = z;\n      return stack;\n    };\n\n    stack.out = function (z) {\n      if (!arguments.length) return out;\n      out = z;\n      return stack;\n    };\n\n    return stack;\n  };\n\n  function d3_layout_stackX(d) {\n    return d.x;\n  }\n\n  function d3_layout_stackY(d) {\n    return d.y;\n  }\n\n  function d3_layout_stackOut(d, y0, y) {\n    d.y0 = y0;\n    d.y = y;\n  }\n\n  var d3_layout_stackOrders = d3.map({\n    \"inside-out\": function insideOut(data) {\n      var n = data.length,\n          i,\n          j,\n          max = data.map(d3_layout_stackMaxIndex),\n          sums = data.map(d3_layout_stackReduceSum),\n          index = d3.range(n).sort(function (a, b) {\n        return max[a] - max[b];\n      }),\n          top = 0,\n          bottom = 0,\n          tops = [],\n          bottoms = [];\n\n      for (i = 0; i < n; ++i) {\n        j = index[i];\n\n        if (top < bottom) {\n          top += sums[j];\n          tops.push(j);\n        } else {\n          bottom += sums[j];\n          bottoms.push(j);\n        }\n      }\n\n      return bottoms.reverse().concat(tops);\n    },\n    reverse: function reverse(data) {\n      return d3.range(data.length).reverse();\n    },\n    \"default\": d3_layout_stackOrderDefault\n  });\n  var d3_layout_stackOffsets = d3.map({\n    silhouette: function silhouette(data) {\n      var n = data.length,\n          m = data[0].length,\n          sums = [],\n          max = 0,\n          i,\n          j,\n          o,\n          y0 = [];\n\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) {\n          o += data[i][j][1];\n        }\n\n        if (o > max) max = o;\n        sums.push(o);\n      }\n\n      for (j = 0; j < m; ++j) {\n        y0[j] = (max - sums[j]) / 2;\n      }\n\n      return y0;\n    },\n    wiggle: function wiggle(data) {\n      var n = data.length,\n          x = data[0],\n          m = x.length,\n          i,\n          j,\n          k,\n          s1,\n          s2,\n          s3,\n          dx,\n          o,\n          o0,\n          y0 = [];\n      y0[0] = o = o0 = 0;\n\n      for (j = 1; j < m; ++j) {\n        for (i = 0, s1 = 0; i < n; ++i) {\n          s1 += data[i][j][1];\n        }\n\n        for (i = 0, s2 = 0, dx = x[j][0] - x[j - 1][0]; i < n; ++i) {\n          for (k = 0, s3 = (data[i][j][1] - data[i][j - 1][1]) / (2 * dx); k < i; ++k) {\n            s3 += (data[k][j][1] - data[k][j - 1][1]) / dx;\n          }\n\n          s2 += s3 * data[i][j][1];\n        }\n\n        y0[j] = o -= s1 ? s2 / s1 * dx : 0;\n        if (o < o0) o0 = o;\n      }\n\n      for (j = 0; j < m; ++j) {\n        y0[j] -= o0;\n      }\n\n      return y0;\n    },\n    expand: function expand(data) {\n      var n = data.length,\n          m = data[0].length,\n          k = 1 / n,\n          i,\n          j,\n          o,\n          y0 = [];\n\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) {\n          o += data[i][j][1];\n        }\n\n        if (o) for (i = 0; i < n; i++) {\n          data[i][j][1] /= o;\n        } else for (i = 0; i < n; i++) {\n          data[i][j][1] = k;\n        }\n      }\n\n      for (j = 0; j < m; ++j) {\n        y0[j] = 0;\n      }\n\n      return y0;\n    },\n    zero: d3_layout_stackOffsetZero\n  });\n\n  function d3_layout_stackOrderDefault(data) {\n    return d3.range(data.length);\n  }\n\n  function d3_layout_stackOffsetZero(data) {\n    var j = -1,\n        m = data[0].length,\n        y0 = [];\n\n    while (++j < m) {\n      y0[j] = 0;\n    }\n\n    return y0;\n  }\n\n  function d3_layout_stackMaxIndex(array) {\n    var i = 1,\n        j = 0,\n        v = array[0][1],\n        k,\n        n = array.length;\n\n    for (; i < n; ++i) {\n      if ((k = array[i][1]) > v) {\n        j = i;\n        v = k;\n      }\n    }\n\n    return j;\n  }\n\n  function d3_layout_stackReduceSum(d) {\n    return d.reduce(d3_layout_stackSum, 0);\n  }\n\n  function d3_layout_stackSum(p, d) {\n    return p + d[1];\n  }\n\n  d3.layout.histogram = function () {\n    var frequency = true,\n        valuer = Number,\n        ranger = d3_layout_histogramRange,\n        binner = d3_layout_histogramBinSturges;\n\n    function histogram(data, i) {\n      var bins = [],\n          values = data.map(valuer, this),\n          range = ranger.call(this, values, i),\n          thresholds = binner.call(this, range, values, i),\n          bin,\n          i = -1,\n          n = values.length,\n          m = thresholds.length - 1,\n          k = frequency ? 1 : 1 / n,\n          x;\n\n      while (++i < m) {\n        bin = bins[i] = [];\n        bin.dx = thresholds[i + 1] - (bin.x = thresholds[i]);\n        bin.y = 0;\n      }\n\n      if (m > 0) {\n        i = -1;\n\n        while (++i < n) {\n          x = values[i];\n\n          if (x >= range[0] && x <= range[1]) {\n            bin = bins[d3.bisect(thresholds, x, 1, m) - 1];\n            bin.y += k;\n            bin.push(data[i]);\n          }\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function (x) {\n      if (!arguments.length) return valuer;\n      valuer = x;\n      return histogram;\n    };\n\n    histogram.range = function (x) {\n      if (!arguments.length) return ranger;\n      ranger = d3_functor(x);\n      return histogram;\n    };\n\n    histogram.bins = function (x) {\n      if (!arguments.length) return binner;\n      binner = typeof x === \"number\" ? function (range) {\n        return d3_layout_histogramBinFixed(range, x);\n      } : d3_functor(x);\n      return histogram;\n    };\n\n    histogram.frequency = function (x) {\n      if (!arguments.length) return frequency;\n      frequency = !!x;\n      return histogram;\n    };\n\n    return histogram;\n  };\n\n  function d3_layout_histogramBinSturges(range, values) {\n    return d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + 1));\n  }\n\n  function d3_layout_histogramBinFixed(range, n) {\n    var x = -1,\n        b = +range[0],\n        m = (range[1] - b) / n,\n        f = [];\n\n    while (++x <= n) {\n      f[x] = m * x + b;\n    }\n\n    return f;\n  }\n\n  function d3_layout_histogramRange(values) {\n    return [d3.min(values), d3.max(values)];\n  }\n\n  d3.layout.pack = function () {\n    var hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort),\n        padding = 0,\n        size = [1, 1],\n        radius;\n\n    function pack(d, i) {\n      var nodes = hierarchy.call(this, d, i),\n          root = nodes[0],\n          w = size[0],\n          h = size[1],\n          r = radius == null ? Math.sqrt : typeof radius === \"function\" ? radius : function () {\n        return radius;\n      };\n      root.x = root.y = 0;\n      d3_layout_hierarchyVisitAfter(root, function (d) {\n        d.r = +r(d.value);\n      });\n      d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n\n      if (padding) {\n        var dr = padding * (radius ? 1 : Math.max(2 * root.r / w, 2 * root.r / h)) / 2;\n        d3_layout_hierarchyVisitAfter(root, function (d) {\n          d.r += dr;\n        });\n        d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n        d3_layout_hierarchyVisitAfter(root, function (d) {\n          d.r -= dr;\n        });\n      }\n\n      d3_layout_packTransform(root, w / 2, h / 2, radius ? 1 : 1 / Math.max(2 * root.r / w, 2 * root.r / h));\n      return nodes;\n    }\n\n    pack.size = function (_) {\n      if (!arguments.length) return size;\n      size = _;\n      return pack;\n    };\n\n    pack.radius = function (_) {\n      if (!arguments.length) return radius;\n      radius = _ == null || typeof _ === \"function\" ? _ : +_;\n      return pack;\n    };\n\n    pack.padding = function (_) {\n      if (!arguments.length) return padding;\n      padding = +_;\n      return pack;\n    };\n\n    return d3_layout_hierarchyRebind(pack, hierarchy);\n  };\n\n  function d3_layout_packSort(a, b) {\n    return a.value - b.value;\n  }\n\n  function d3_layout_packInsert(a, b) {\n    var c = a._pack_next;\n    a._pack_next = b;\n    b._pack_prev = a;\n    b._pack_next = c;\n    c._pack_prev = b;\n  }\n\n  function d3_layout_packSplice(a, b) {\n    a._pack_next = b;\n    b._pack_prev = a;\n  }\n\n  function d3_layout_packIntersects(a, b) {\n    var dx = b.x - a.x,\n        dy = b.y - a.y,\n        dr = a.r + b.r;\n    return .999 * dr * dr > dx * dx + dy * dy;\n  }\n\n  function d3_layout_packSiblings(node) {\n    if (!(nodes = node.children) || !(n = nodes.length)) return;\n    var nodes,\n        xMin = Infinity,\n        xMax = -Infinity,\n        yMin = Infinity,\n        yMax = -Infinity,\n        a,\n        b,\n        c,\n        i,\n        j,\n        k,\n        n;\n\n    function bound(node) {\n      xMin = Math.min(node.x - node.r, xMin);\n      xMax = Math.max(node.x + node.r, xMax);\n      yMin = Math.min(node.y - node.r, yMin);\n      yMax = Math.max(node.y + node.r, yMax);\n    }\n\n    nodes.forEach(d3_layout_packLink);\n    a = nodes[0];\n    a.x = -a.r;\n    a.y = 0;\n    bound(a);\n\n    if (n > 1) {\n      b = nodes[1];\n      b.x = b.r;\n      b.y = 0;\n      bound(b);\n\n      if (n > 2) {\n        c = nodes[2];\n        d3_layout_packPlace(a, b, c);\n        bound(c);\n        d3_layout_packInsert(a, c);\n        a._pack_prev = c;\n        d3_layout_packInsert(c, b);\n        b = a._pack_next;\n\n        for (i = 3; i < n; i++) {\n          d3_layout_packPlace(a, b, c = nodes[i]);\n          var isect = 0,\n              s1 = 1,\n              s2 = 1;\n\n          for (j = b._pack_next; j !== b; j = j._pack_next, s1++) {\n            if (d3_layout_packIntersects(j, c)) {\n              isect = 1;\n              break;\n            }\n          }\n\n          if (isect == 1) {\n            for (k = a._pack_prev; k !== j._pack_prev; k = k._pack_prev, s2++) {\n              if (d3_layout_packIntersects(k, c)) {\n                break;\n              }\n            }\n          }\n\n          if (isect) {\n            if (s1 < s2 || s1 == s2 && b.r < a.r) d3_layout_packSplice(a, b = j);else d3_layout_packSplice(a = k, b);\n            i--;\n          } else {\n            d3_layout_packInsert(a, c);\n            b = c;\n            bound(c);\n          }\n        }\n      }\n    }\n\n    var cx = (xMin + xMax) / 2,\n        cy = (yMin + yMax) / 2,\n        cr = 0;\n\n    for (i = 0; i < n; i++) {\n      c = nodes[i];\n      c.x -= cx;\n      c.y -= cy;\n      cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));\n    }\n\n    node.r = cr;\n    nodes.forEach(d3_layout_packUnlink);\n  }\n\n  function d3_layout_packLink(node) {\n    node._pack_next = node._pack_prev = node;\n  }\n\n  function d3_layout_packUnlink(node) {\n    delete node._pack_next;\n    delete node._pack_prev;\n  }\n\n  function d3_layout_packTransform(node, x, y, k) {\n    var children = node.children;\n    node.x = x += k * node.x;\n    node.y = y += k * node.y;\n    node.r *= k;\n\n    if (children) {\n      var i = -1,\n          n = children.length;\n\n      while (++i < n) {\n        d3_layout_packTransform(children[i], x, y, k);\n      }\n    }\n  }\n\n  function d3_layout_packPlace(a, b, c) {\n    var db = a.r + c.r,\n        dx = b.x - a.x,\n        dy = b.y - a.y;\n\n    if (db && (dx || dy)) {\n      var da = b.r + c.r,\n          dc = dx * dx + dy * dy;\n      da *= da;\n      db *= db;\n      var x = .5 + (db - da) / (2 * dc),\n          y = Math.sqrt(Math.max(0, 2 * da * (db + dc) - (db -= dc) * db - da * da)) / (2 * dc);\n      c.x = a.x + x * dx + y * dy;\n      c.y = a.y + x * dy - y * dx;\n    } else {\n      c.x = a.x + db;\n      c.y = a.y;\n    }\n  }\n\n  d3.layout.tree = function () {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null),\n        separation = d3_layout_treeSeparation,\n        size = [1, 1],\n        nodeSize = null;\n\n    function tree(d, i) {\n      var nodes = hierarchy.call(this, d, i),\n          root0 = nodes[0],\n          root1 = wrapTree(root0);\n      d3_layout_hierarchyVisitAfter(root1, firstWalk), root1.parent.m = -root1.z;\n      d3_layout_hierarchyVisitBefore(root1, secondWalk);\n      if (nodeSize) d3_layout_hierarchyVisitBefore(root0, sizeNode);else {\n        var left = root0,\n            right = root0,\n            bottom = root0;\n        d3_layout_hierarchyVisitBefore(root0, function (node) {\n          if (node.x < left.x) left = node;\n          if (node.x > right.x) right = node;\n          if (node.depth > bottom.depth) bottom = node;\n        });\n        var tx = separation(left, right) / 2 - left.x,\n            kx = size[0] / (right.x + separation(right, left) / 2 + tx),\n            ky = size[1] / (bottom.depth || 1);\n        d3_layout_hierarchyVisitBefore(root0, function (node) {\n          node.x = (node.x + tx) * kx;\n          node.y = node.depth * ky;\n        });\n      }\n      return nodes;\n    }\n\n    function wrapTree(root0) {\n      var root1 = {\n        A: null,\n        children: [root0]\n      },\n          queue = [root1],\n          node1;\n\n      while ((node1 = queue.pop()) != null) {\n        for (var children = node1.children, child, i = 0, n = children.length; i < n; ++i) {\n          queue.push((children[i] = child = {\n            _: children[i],\n            parent: node1,\n            children: (child = children[i].children) && child.slice() || [],\n            A: null,\n            a: null,\n            z: 0,\n            m: 0,\n            c: 0,\n            s: 0,\n            t: null,\n            i: i\n          }).a = child);\n        }\n      }\n\n      return root1.children[0];\n    }\n\n    function firstWalk(v) {\n      var children = v.children,\n          siblings = v.parent.children,\n          w = v.i ? siblings[v.i - 1] : null;\n\n      if (children.length) {\n        d3_layout_treeShift(v);\n        var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n\n        if (w) {\n          v.z = w.z + separation(v._, w._);\n          v.m = v.z - midpoint;\n        } else {\n          v.z = midpoint;\n        }\n      } else if (w) {\n        v.z = w.z + separation(v._, w._);\n      }\n\n      v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n    }\n\n    function secondWalk(v) {\n      v._.x = v.z + v.parent.m;\n      v.m += v.parent.m;\n    }\n\n    function apportion(v, w, ancestor) {\n      if (w) {\n        var vip = v,\n            vop = v,\n            vim = w,\n            vom = vip.parent.children[0],\n            sip = vip.m,\n            sop = vop.m,\n            sim = vim.m,\n            som = vom.m,\n            shift;\n\n        while (vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim && vip) {\n          vom = d3_layout_treeLeft(vom);\n          vop = d3_layout_treeRight(vop);\n          vop.a = v;\n          shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n\n          if (shift > 0) {\n            d3_layout_treeMove(d3_layout_treeAncestor(vim, v, ancestor), v, shift);\n            sip += shift;\n            sop += shift;\n          }\n\n          sim += vim.m;\n          sip += vip.m;\n          som += vom.m;\n          sop += vop.m;\n        }\n\n        if (vim && !d3_layout_treeRight(vop)) {\n          vop.t = vim;\n          vop.m += sim - sop;\n        }\n\n        if (vip && !d3_layout_treeLeft(vom)) {\n          vom.t = vip;\n          vom.m += sip - som;\n          ancestor = v;\n        }\n      }\n\n      return ancestor;\n    }\n\n    function sizeNode(node) {\n      node.x *= size[0];\n      node.y = node.depth * size[1];\n    }\n\n    tree.separation = function (x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return tree;\n    };\n\n    tree.size = function (x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null ? sizeNode : null;\n      return tree;\n    };\n\n    tree.nodeSize = function (x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) == null ? null : sizeNode;\n      return tree;\n    };\n\n    return d3_layout_hierarchyRebind(tree, hierarchy);\n  };\n\n  function d3_layout_treeSeparation(a, b) {\n    return a.parent == b.parent ? 1 : 2;\n  }\n\n  function d3_layout_treeLeft(v) {\n    var children = v.children;\n    return children.length ? children[0] : v.t;\n  }\n\n  function d3_layout_treeRight(v) {\n    var children = v.children,\n        n;\n    return (n = children.length) ? children[n - 1] : v.t;\n  }\n\n  function d3_layout_treeMove(wm, wp, shift) {\n    var change = shift / (wp.i - wm.i);\n    wp.c -= change;\n    wp.s += shift;\n    wm.c += change;\n    wp.z += shift;\n    wp.m += shift;\n  }\n\n  function d3_layout_treeShift(v) {\n    var shift = 0,\n        change = 0,\n        children = v.children,\n        i = children.length,\n        w;\n\n    while (--i >= 0) {\n      w = children[i];\n      w.z += shift;\n      w.m += shift;\n      shift += w.s + (change += w.c);\n    }\n  }\n\n  function d3_layout_treeAncestor(vim, v, ancestor) {\n    return vim.a.parent === v.parent ? vim.a : ancestor;\n  }\n\n  d3.layout.cluster = function () {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null),\n        separation = d3_layout_treeSeparation,\n        size = [1, 1],\n        nodeSize = false;\n\n    function cluster(d, i) {\n      var nodes = hierarchy.call(this, d, i),\n          root = nodes[0],\n          previousNode,\n          x = 0;\n      d3_layout_hierarchyVisitAfter(root, function (node) {\n        var children = node.children;\n\n        if (children && children.length) {\n          node.x = d3_layout_clusterX(children);\n          node.y = d3_layout_clusterY(children);\n        } else {\n          node.x = previousNode ? x += separation(node, previousNode) : 0;\n          node.y = 0;\n          previousNode = node;\n        }\n      });\n      var left = d3_layout_clusterLeft(root),\n          right = d3_layout_clusterRight(root),\n          x0 = left.x - separation(left, right) / 2,\n          x1 = right.x + separation(right, left) / 2;\n      d3_layout_hierarchyVisitAfter(root, nodeSize ? function (node) {\n        node.x = (node.x - root.x) * size[0];\n        node.y = (root.y - node.y) * size[1];\n      } : function (node) {\n        node.x = (node.x - x0) / (x1 - x0) * size[0];\n        node.y = (1 - (root.y ? node.y / root.y : 1)) * size[1];\n      });\n      return nodes;\n    }\n\n    cluster.separation = function (x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return cluster;\n    };\n\n    cluster.size = function (x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null;\n      return cluster;\n    };\n\n    cluster.nodeSize = function (x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) != null;\n      return cluster;\n    };\n\n    return d3_layout_hierarchyRebind(cluster, hierarchy);\n  };\n\n  function d3_layout_clusterY(children) {\n    return 1 + d3.max(children, function (child) {\n      return child.y;\n    });\n  }\n\n  function d3_layout_clusterX(children) {\n    return children.reduce(function (x, child) {\n      return x + child.x;\n    }, 0) / children.length;\n  }\n\n  function d3_layout_clusterLeft(node) {\n    var children = node.children;\n    return children && children.length ? d3_layout_clusterLeft(children[0]) : node;\n  }\n\n  function d3_layout_clusterRight(node) {\n    var children = node.children,\n        n;\n    return children && (n = children.length) ? d3_layout_clusterRight(children[n - 1]) : node;\n  }\n\n  d3.layout.treemap = function () {\n    var hierarchy = d3.layout.hierarchy(),\n        round = Math.round,\n        size = [1, 1],\n        padding = null,\n        pad = d3_layout_treemapPadNull,\n        sticky = false,\n        stickies,\n        mode = \"squarify\",\n        ratio = .5 * (1 + Math.sqrt(5));\n\n    function scale(children, k) {\n      var i = -1,\n          n = children.length,\n          child,\n          area;\n\n      while (++i < n) {\n        area = (child = children[i]).value * (k < 0 ? 0 : k);\n        child.area = isNaN(area) || area <= 0 ? 0 : area;\n      }\n    }\n\n    function squarify(node) {\n      var children = node.children;\n\n      if (children && children.length) {\n        var rect = pad(node),\n            row = [],\n            remaining = children.slice(),\n            child,\n            best = Infinity,\n            score,\n            u = mode === \"slice\" ? rect.dx : mode === \"dice\" ? rect.dy : mode === \"slice-dice\" ? node.depth & 1 ? rect.dy : rect.dx : Math.min(rect.dx, rect.dy),\n            n;\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n\n        while ((n = remaining.length) > 0) {\n          row.push(child = remaining[n - 1]);\n          row.area += child.area;\n\n          if (mode !== \"squarify\" || (score = worst(row, u)) <= best) {\n            remaining.pop();\n            best = score;\n          } else {\n            row.area -= row.pop().area;\n            position(row, u, rect, false);\n            u = Math.min(rect.dx, rect.dy);\n            row.length = row.area = 0;\n            best = Infinity;\n          }\n        }\n\n        if (row.length) {\n          position(row, u, rect, true);\n          row.length = row.area = 0;\n        }\n\n        children.forEach(squarify);\n      }\n    }\n\n    function stickify(node) {\n      var children = node.children;\n\n      if (children && children.length) {\n        var rect = pad(node),\n            remaining = children.slice(),\n            child,\n            row = [];\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n\n        while (child = remaining.pop()) {\n          row.push(child);\n          row.area += child.area;\n\n          if (child.z != null) {\n            position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length);\n            row.length = row.area = 0;\n          }\n        }\n\n        children.forEach(stickify);\n      }\n    }\n\n    function worst(row, u) {\n      var s = row.area,\n          r,\n          rmax = 0,\n          rmin = Infinity,\n          i = -1,\n          n = row.length;\n\n      while (++i < n) {\n        if (!(r = row[i].area)) continue;\n        if (r < rmin) rmin = r;\n        if (r > rmax) rmax = r;\n      }\n\n      s *= s;\n      u *= u;\n      return s ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : Infinity;\n    }\n\n    function position(row, u, rect, flush) {\n      var i = -1,\n          n = row.length,\n          x = rect.x,\n          y = rect.y,\n          v = u ? round(row.area / u) : 0,\n          o;\n\n      if (u == rect.dx) {\n        if (flush || v > rect.dy) v = rect.dy;\n\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dy = v;\n          x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : 0);\n        }\n\n        o.z = true;\n        o.dx += rect.x + rect.dx - x;\n        rect.y += v;\n        rect.dy -= v;\n      } else {\n        if (flush || v > rect.dx) v = rect.dx;\n\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dx = v;\n          y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : 0);\n        }\n\n        o.z = false;\n        o.dy += rect.y + rect.dy - y;\n        rect.x += v;\n        rect.dx -= v;\n      }\n    }\n\n    function treemap(d) {\n      var nodes = stickies || hierarchy(d),\n          root = nodes[0];\n      root.x = root.y = 0;\n      if (root.value) root.dx = size[0], root.dy = size[1];else root.dx = root.dy = 0;\n      if (stickies) hierarchy.revalue(root);\n      scale([root], root.dx * root.dy / root.value);\n      (stickies ? stickify : squarify)(root);\n      if (sticky) stickies = nodes;\n      return nodes;\n    }\n\n    treemap.size = function (x) {\n      if (!arguments.length) return size;\n      size = x;\n      return treemap;\n    };\n\n    treemap.padding = function (x) {\n      if (!arguments.length) return padding;\n\n      function padFunction(node) {\n        var p = x.call(treemap, node, node.depth);\n        return p == null ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, typeof p === \"number\" ? [p, p, p, p] : p);\n      }\n\n      function padConstant(node) {\n        return d3_layout_treemapPad(node, x);\n      }\n\n      var type;\n      pad = (padding = x) == null ? d3_layout_treemapPadNull : (type = typeof x) === \"function\" ? padFunction : type === \"number\" ? (x = [x, x, x, x], padConstant) : padConstant;\n      return treemap;\n    };\n\n    treemap.round = function (x) {\n      if (!arguments.length) return round != Number;\n      round = x ? Math.round : Number;\n      return treemap;\n    };\n\n    treemap.sticky = function (x) {\n      if (!arguments.length) return sticky;\n      sticky = x;\n      stickies = null;\n      return treemap;\n    };\n\n    treemap.ratio = function (x) {\n      if (!arguments.length) return ratio;\n      ratio = x;\n      return treemap;\n    };\n\n    treemap.mode = function (x) {\n      if (!arguments.length) return mode;\n      mode = x + \"\";\n      return treemap;\n    };\n\n    return d3_layout_hierarchyRebind(treemap, hierarchy);\n  };\n\n  function d3_layout_treemapPadNull(node) {\n    return {\n      x: node.x,\n      y: node.y,\n      dx: node.dx,\n      dy: node.dy\n    };\n  }\n\n  function d3_layout_treemapPad(node, padding) {\n    var x = node.x + padding[3],\n        y = node.y + padding[0],\n        dx = node.dx - padding[1] - padding[3],\n        dy = node.dy - padding[0] - padding[2];\n\n    if (dx < 0) {\n      x += dx / 2;\n      dx = 0;\n    }\n\n    if (dy < 0) {\n      y += dy / 2;\n      dy = 0;\n    }\n\n    return {\n      x: x,\n      y: y,\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  d3.random = {\n    normal: function normal(, ) {\n      var n = arguments.length;\n      if (n < 2)  = 1;\n      if (n < 1)  = 0;\n      return function () {\n        var x, y, r;\n\n        do {\n          x = Math.random() * 2 - 1;\n          y = Math.random() * 2 - 1;\n          r = x * x + y * y;\n        } while (!r || r > 1);\n\n        return  +  * x * Math.sqrt(-2 * Math.log(r) / r);\n      };\n    },\n    logNormal: function logNormal() {\n      var random = d3.random.normal.apply(d3, arguments);\n      return function () {\n        return Math.exp(random());\n      };\n    },\n    bates: function bates(m) {\n      var random = d3.random.irwinHall(m);\n      return function () {\n        return random() / m;\n      };\n    },\n    irwinHall: function irwinHall(m) {\n      return function () {\n        for (var s = 0, j = 0; j < m; j++) {\n          s += Math.random();\n        }\n\n        return s;\n      };\n    }\n  };\n  d3.scale = {};\n\n  function d3_scaleExtent(domain) {\n    var start = domain[0],\n        stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  }\n\n  function d3_scaleRange(scale) {\n    return scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());\n  }\n\n  function d3_scale_bilinear(domain, range, uninterpolate, interpolate) {\n    var u = uninterpolate(domain[0], domain[1]),\n        i = interpolate(range[0], range[1]);\n    return function (x) {\n      return i(u(x));\n    };\n  }\n\n  function d3_scale_nice(domain, nice) {\n    var i0 = 0,\n        i1 = domain.length - 1,\n        x0 = domain[i0],\n        x1 = domain[i1],\n        dx;\n\n    if (x1 < x0) {\n      dx = i0, i0 = i1, i1 = dx;\n      dx = x0, x0 = x1, x1 = dx;\n    }\n\n    domain[i0] = nice.floor(x0);\n    domain[i1] = nice.ceil(x1);\n    return domain;\n  }\n\n  function d3_scale_niceStep(step) {\n    return step ? {\n      floor: function floor(x) {\n        return Math.floor(x / step) * step;\n      },\n      ceil: function ceil(x) {\n        return Math.ceil(x / step) * step;\n      }\n    } : d3_scale_niceIdentity;\n  }\n\n  var d3_scale_niceIdentity = {\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n\n  function d3_scale_polylinear(domain, range, uninterpolate, interpolate) {\n    var u = [],\n        i = [],\n        j = 0,\n        k = Math.min(domain.length, range.length) - 1;\n\n    if (domain[k] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n\n    while (++j <= k) {\n      u.push(uninterpolate(domain[j - 1], domain[j]));\n      i.push(interpolate(range[j - 1], range[j]));\n    }\n\n    return function (x) {\n      var j = d3.bisect(domain, x, 1, k) - 1;\n      return i[j](u[j](x));\n    };\n  }\n\n  d3.scale.linear = function () {\n    return d3_scale_linear([0, 1], [0, 1], d3_interpolate, false);\n  };\n\n  function d3_scale_linear(domain, range, interpolate, clamp) {\n    var output, input;\n\n    function rescale() {\n      var linear = Math.min(domain.length, range.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear,\n          uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;\n      output = linear(domain, range, uninterpolate, interpolate);\n      input = linear(range, domain, uninterpolate, d3_interpolate);\n      return scale;\n    }\n\n    function scale(x) {\n      return output(x);\n    }\n\n    scale.invert = function (y) {\n      return input(y);\n    };\n\n    scale.domain = function (x) {\n      if (!arguments.length) return domain;\n      domain = x.map(Number);\n      return rescale();\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n\n    scale.rangeRound = function (x) {\n      return scale.range(x).interpolate(d3_interpolateRound);\n    };\n\n    scale.clamp = function (x) {\n      if (!arguments.length) return clamp;\n      clamp = x;\n      return rescale();\n    };\n\n    scale.interpolate = function (x) {\n      if (!arguments.length) return interpolate;\n      interpolate = x;\n      return rescale();\n    };\n\n    scale.ticks = function (m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n\n    scale.tickFormat = function (m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n\n    scale.nice = function (m) {\n      d3_scale_linearNice(domain, m);\n      return rescale();\n    };\n\n    scale.copy = function () {\n      return d3_scale_linear(domain, range, interpolate, clamp);\n    };\n\n    return rescale();\n  }\n\n  function d3_scale_linearRebind(scale, linear) {\n    return d3.rebind(scale, linear, \"range\", \"rangeRound\", \"interpolate\", \"clamp\");\n  }\n\n  function d3_scale_linearNice(domain, m) {\n    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));\n    d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));\n    return domain;\n  }\n\n  function d3_scale_linearTickRange(domain, m) {\n    if (m == null) m = 10;\n    var extent = d3_scaleExtent(domain),\n        span = extent[1] - extent[0],\n        step = Math.pow(10, Math.floor(Math.log(span / m) / Math.LN10)),\n        err = m / span * step;\n    if (err <= .15) step *= 10;else if (err <= .35) step *= 5;else if (err <= .75) step *= 2;\n    extent[0] = Math.ceil(extent[0] / step) * step;\n    extent[1] = Math.floor(extent[1] / step) * step + step * .5;\n    extent[2] = step;\n    return extent;\n  }\n\n  function d3_scale_linearTicks(domain, m) {\n    return d3.range.apply(d3, d3_scale_linearTickRange(domain, m));\n  }\n\n  function d3_scale_linearTickFormat(domain, m, format) {\n    var range = d3_scale_linearTickRange(domain, m);\n\n    if (format) {\n      var match = d3_format_re.exec(format);\n      match.shift();\n\n      if (match[8] === \"s\") {\n        var prefix = d3.formatPrefix(Math.max(abs(range[0]), abs(range[1])));\n        if (!match[7]) match[7] = \".\" + d3_scale_linearPrecision(prefix.scale(range[2]));\n        match[8] = \"f\";\n        format = d3.format(match.join(\"\"));\n        return function (d) {\n          return format(prefix.scale(d)) + prefix.symbol;\n        };\n      }\n\n      if (!match[7]) match[7] = \".\" + d3_scale_linearFormatPrecision(match[8], range);\n      format = match.join(\"\");\n    } else {\n      format = \",.\" + d3_scale_linearPrecision(range[2]) + \"f\";\n    }\n\n    return d3.format(format);\n  }\n\n  var d3_scale_linearFormatSignificant = {\n    s: 1,\n    g: 1,\n    p: 1,\n    r: 1,\n    e: 1\n  };\n\n  function d3_scale_linearPrecision(value) {\n    return -Math.floor(Math.log(value) / Math.LN10 + .01);\n  }\n\n  function d3_scale_linearFormatPrecision(type, range) {\n    var p = d3_scale_linearPrecision(range[2]);\n    return type in d3_scale_linearFormatSignificant ? Math.abs(p - d3_scale_linearPrecision(Math.max(abs(range[0]), abs(range[1])))) + +(type !== \"e\") : p - (type === \"%\") * 2;\n  }\n\n  d3.scale.log = function () {\n    return d3_scale_log(d3.scale.linear().domain([0, 1]), 10, true, [1, 10]);\n  };\n\n  function d3_scale_log(linear, base, positive, domain) {\n    function log(x) {\n      return (positive ? Math.log(x < 0 ? 0 : x) : -Math.log(x > 0 ? 0 : -x)) / Math.log(base);\n    }\n\n    function pow(x) {\n      return positive ? Math.pow(base, x) : -Math.pow(base, -x);\n    }\n\n    function scale(x) {\n      return linear(log(x));\n    }\n\n    scale.invert = function (x) {\n      return pow(linear.invert(x));\n    };\n\n    scale.domain = function (x) {\n      if (!arguments.length) return domain;\n      positive = x[0] >= 0;\n      linear.domain((domain = x.map(Number)).map(log));\n      return scale;\n    };\n\n    scale.base = function (_) {\n      if (!arguments.length) return base;\n      base = +_;\n      linear.domain(domain.map(log));\n      return scale;\n    };\n\n    scale.nice = function () {\n      var niced = d3_scale_nice(domain.map(log), positive ? Math : d3_scale_logNiceNegative);\n      linear.domain(niced);\n      domain = niced.map(pow);\n      return scale;\n    };\n\n    scale.ticks = function () {\n      var extent = d3_scaleExtent(domain),\n          ticks = [],\n          u = extent[0],\n          v = extent[1],\n          i = Math.floor(log(u)),\n          j = Math.ceil(log(v)),\n          n = base % 1 ? 2 : base;\n\n      if (isFinite(j - i)) {\n        if (positive) {\n          for (; i < j; i++) {\n            for (var k = 1; k < n; k++) {\n              ticks.push(pow(i) * k);\n            }\n          }\n\n          ticks.push(pow(i));\n        } else {\n          ticks.push(pow(i));\n\n          for (; i++ < j;) {\n            for (var k = n - 1; k > 0; k--) {\n              ticks.push(pow(i) * k);\n            }\n          }\n        }\n\n        for (i = 0; ticks[i] < u; i++) {}\n\n        for (j = ticks.length; ticks[j - 1] > v; j--) {}\n\n        ticks = ticks.slice(i, j);\n      }\n\n      return ticks;\n    };\n\n    scale.tickFormat = function (n, format) {\n      if (!arguments.length) return d3_scale_logFormat;\n      if (arguments.length < 2) format = d3_scale_logFormat;else if (typeof format !== \"function\") format = d3.format(format);\n      var k = Math.max(1, base * n / scale.ticks().length);\n      return function (d) {\n        var i = d / pow(Math.round(log(d)));\n        if (i * base < base - .5) i *= base;\n        return i <= k ? format(d) : \"\";\n      };\n    };\n\n    scale.copy = function () {\n      return d3_scale_log(linear.copy(), base, positive, domain);\n    };\n\n    return d3_scale_linearRebind(scale, linear);\n  }\n\n  var d3_scale_logFormat = d3.format(\".0e\"),\n      d3_scale_logNiceNegative = {\n    floor: function floor(x) {\n      return -Math.ceil(-x);\n    },\n    ceil: function ceil(x) {\n      return -Math.floor(-x);\n    }\n  };\n\n  d3.scale.pow = function () {\n    return d3_scale_pow(d3.scale.linear(), 1, [0, 1]);\n  };\n\n  function d3_scale_pow(linear, exponent, domain) {\n    var powp = d3_scale_powPow(exponent),\n        powb = d3_scale_powPow(1 / exponent);\n\n    function scale(x) {\n      return linear(powp(x));\n    }\n\n    scale.invert = function (x) {\n      return powb(linear.invert(x));\n    };\n\n    scale.domain = function (x) {\n      if (!arguments.length) return domain;\n      linear.domain((domain = x.map(Number)).map(powp));\n      return scale;\n    };\n\n    scale.ticks = function (m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n\n    scale.tickFormat = function (m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n\n    scale.nice = function (m) {\n      return scale.domain(d3_scale_linearNice(domain, m));\n    };\n\n    scale.exponent = function (x) {\n      if (!arguments.length) return exponent;\n      powp = d3_scale_powPow(exponent = x);\n      powb = d3_scale_powPow(1 / exponent);\n      linear.domain(domain.map(powp));\n      return scale;\n    };\n\n    scale.copy = function () {\n      return d3_scale_pow(linear.copy(), exponent, domain);\n    };\n\n    return d3_scale_linearRebind(scale, linear);\n  }\n\n  function d3_scale_powPow(e) {\n    return function (x) {\n      return x < 0 ? -Math.pow(-x, e) : Math.pow(x, e);\n    };\n  }\n\n  d3.scale.sqrt = function () {\n    return d3.scale.pow().exponent(.5);\n  };\n\n  d3.scale.ordinal = function () {\n    return d3_scale_ordinal([], {\n      t: \"range\",\n      a: [[]]\n    });\n  };\n\n  function d3_scale_ordinal(domain, ranger) {\n    var index, range, rangeBand;\n\n    function scale(x) {\n      return range[((index.get(x) || (ranger.t === \"range\" ? index.set(x, domain.push(x)) : NaN)) - 1) % range.length];\n    }\n\n    function steps(start, step) {\n      return d3.range(domain.length).map(function (i) {\n        return start + step * i;\n      });\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) return domain;\n      domain = [];\n      index = new d3_Map();\n      var i = -1,\n          n = x.length,\n          xi;\n\n      while (++i < n) {\n        if (!index.has(xi = x[i])) index.set(xi, domain.push(xi));\n      }\n\n      return scale[ranger.t].apply(scale, ranger.a);\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) return range;\n      range = x;\n      rangeBand = 0;\n      ranger = {\n        t: \"range\",\n        a: arguments\n      };\n      return scale;\n    };\n\n    scale.rangePoints = function (x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0],\n          stop = x[1],\n          step = domain.length < 2 ? (start = (start + stop) / 2, 0) : (stop - start) / (domain.length - 1 + padding);\n      range = steps(start + step * padding / 2, step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangePoints\",\n        a: arguments\n      };\n      return scale;\n    };\n\n    scale.rangeRoundPoints = function (x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0],\n          stop = x[1],\n          step = domain.length < 2 ? (start = stop = Math.round((start + stop) / 2), 0) : (stop - start) / (domain.length - 1 + padding) | 0;\n      range = steps(start + Math.round(step * padding / 2 + (stop - start - (domain.length - 1 + padding) * step) / 2), step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangeRoundPoints\",\n        a: arguments\n      };\n      return scale;\n    };\n\n    scale.rangeBands = function (x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0],\n          start = x[reverse - 0],\n          stop = x[1 - reverse],\n          step = (stop - start) / (domain.length - padding + 2 * outerPadding);\n      range = steps(start + step * outerPadding, step);\n      if (reverse) range.reverse();\n      rangeBand = step * (1 - padding);\n      ranger = {\n        t: \"rangeBands\",\n        a: arguments\n      };\n      return scale;\n    };\n\n    scale.rangeRoundBands = function (x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0],\n          start = x[reverse - 0],\n          stop = x[1 - reverse],\n          step = Math.floor((stop - start) / (domain.length - padding + 2 * outerPadding));\n      range = steps(start + Math.round((stop - start - (domain.length - padding) * step) / 2), step);\n      if (reverse) range.reverse();\n      rangeBand = Math.round(step * (1 - padding));\n      ranger = {\n        t: \"rangeRoundBands\",\n        a: arguments\n      };\n      return scale;\n    };\n\n    scale.rangeBand = function () {\n      return rangeBand;\n    };\n\n    scale.rangeExtent = function () {\n      return d3_scaleExtent(ranger.a[0]);\n    };\n\n    scale.copy = function () {\n      return d3_scale_ordinal(domain, ranger);\n    };\n\n    return scale.domain(domain);\n  }\n\n  d3.scale.category10 = function () {\n    return d3.scale.ordinal().range(d3_category10);\n  };\n\n  d3.scale.category20 = function () {\n    return d3.scale.ordinal().range(d3_category20);\n  };\n\n  d3.scale.category20b = function () {\n    return d3.scale.ordinal().range(d3_category20b);\n  };\n\n  d3.scale.category20c = function () {\n    return d3.scale.ordinal().range(d3_category20c);\n  };\n\n  var d3_category10 = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(d3_rgbString);\n  var d3_category20 = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(d3_rgbString);\n  var d3_category20b = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(d3_rgbString);\n  var d3_category20c = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(d3_rgbString);\n\n  d3.scale.quantile = function () {\n    return d3_scale_quantile([], []);\n  };\n\n  function d3_scale_quantile(domain, range) {\n    var thresholds;\n\n    function rescale() {\n      var k = 0,\n          q = range.length;\n      thresholds = [];\n\n      while (++k < q) {\n        thresholds[k - 1] = d3.quantile(domain, k / q);\n      }\n\n      return scale;\n    }\n\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3.bisect(thresholds, x)];\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) return domain;\n      domain = x.map(d3_number).filter(d3_numeric).sort(d3_ascending);\n      return rescale();\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n\n    scale.quantiles = function () {\n      return thresholds;\n    };\n\n    scale.invertExtent = function (y) {\n      y = range.indexOf(y);\n      return y < 0 ? [NaN, NaN] : [y > 0 ? thresholds[y - 1] : domain[0], y < thresholds.length ? thresholds[y] : domain[domain.length - 1]];\n    };\n\n    scale.copy = function () {\n      return d3_scale_quantile(domain, range);\n    };\n\n    return rescale();\n  }\n\n  d3.scale.quantize = function () {\n    return d3_scale_quantize(0, 1, [0, 1]);\n  };\n\n  function d3_scale_quantize(x0, x1, range) {\n    var kx, i;\n\n    function scale(x) {\n      return range[Math.max(0, Math.min(i, Math.floor(kx * (x - x0))))];\n    }\n\n    function rescale() {\n      kx = range.length / (x1 - x0);\n      i = range.length - 1;\n      return scale;\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) return [x0, x1];\n      x0 = +x[0];\n      x1 = +x[x.length - 1];\n      return rescale();\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n\n    scale.invertExtent = function (y) {\n      y = range.indexOf(y);\n      y = y < 0 ? NaN : y / kx + x0;\n      return [y, y + 1 / kx];\n    };\n\n    scale.copy = function () {\n      return d3_scale_quantize(x0, x1, range);\n    };\n\n    return rescale();\n  }\n\n  d3.scale.threshold = function () {\n    return d3_scale_threshold([.5], [0, 1]);\n  };\n\n  function d3_scale_threshold(domain, range) {\n    function scale(x) {\n      if (x <= x) return range[d3.bisect(domain, x)];\n    }\n\n    scale.domain = function (_) {\n      if (!arguments.length) return domain;\n      domain = _;\n      return scale;\n    };\n\n    scale.range = function (_) {\n      if (!arguments.length) return range;\n      range = _;\n      return scale;\n    };\n\n    scale.invertExtent = function (y) {\n      y = range.indexOf(y);\n      return [domain[y - 1], domain[y]];\n    };\n\n    scale.copy = function () {\n      return d3_scale_threshold(domain, range);\n    };\n\n    return scale;\n  }\n\n  d3.scale.identity = function () {\n    return d3_scale_identity([0, 1]);\n  };\n\n  function d3_scale_identity(domain) {\n    function identity(x) {\n      return +x;\n    }\n\n    identity.invert = identity;\n\n    identity.domain = identity.range = function (x) {\n      if (!arguments.length) return domain;\n      domain = x.map(identity);\n      return identity;\n    };\n\n    identity.ticks = function (m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n\n    identity.tickFormat = function (m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n\n    identity.copy = function () {\n      return d3_scale_identity(domain);\n    };\n\n    return identity;\n  }\n\n  d3.svg = {};\n\n  function d3_zero() {\n    return 0;\n  }\n\n  d3.svg.arc = function () {\n    var innerRadius = d3_svg_arcInnerRadius,\n        outerRadius = d3_svg_arcOuterRadius,\n        cornerRadius = d3_zero,\n        padRadius = d3_svg_arcAuto,\n        startAngle = d3_svg_arcStartAngle,\n        endAngle = d3_svg_arcEndAngle,\n        padAngle = d3_svg_arcPadAngle;\n\n    function arc() {\n      var r0 = Math.max(0, +innerRadius.apply(this, arguments)),\n          r1 = Math.max(0, +outerRadius.apply(this, arguments)),\n          a0 = startAngle.apply(this, arguments) - half,\n          a1 = endAngle.apply(this, arguments) - half,\n          da = Math.abs(a1 - a0),\n          cw = a0 > a1 ? 0 : 1;\n      if (r1 < r0) rc = r1, r1 = r0, r0 = rc;\n      if (da >= ) return circleSegment(r1, cw) + (r0 ? circleSegment(r0, 1 - cw) : \"\") + \"Z\";\n      var rc,\n          cr,\n          rp,\n          ap,\n          p0 = 0,\n          p1 = 0,\n          x0,\n          y0,\n          x1,\n          y1,\n          x2,\n          y2,\n          x3,\n          y3,\n          path = [];\n\n      if (ap = (+padAngle.apply(this, arguments) || 0) / 2) {\n        rp = padRadius === d3_svg_arcAuto ? Math.sqrt(r0 * r0 + r1 * r1) : +padRadius.apply(this, arguments);\n        if (!cw) p1 *= -1;\n        if (r1) p1 = d3_asin(rp / r1 * Math.sin(ap));\n        if (r0) p0 = d3_asin(rp / r0 * Math.sin(ap));\n      }\n\n      if (r1) {\n        x0 = r1 * Math.cos(a0 + p1);\n        y0 = r1 * Math.sin(a0 + p1);\n        x1 = r1 * Math.cos(a1 - p1);\n        y1 = r1 * Math.sin(a1 - p1);\n        var l1 = Math.abs(a1 - a0 - 2 * p1) <=  ? 0 : 1;\n\n        if (p1 && d3_svg_arcSweep(x0, y0, x1, y1) === cw ^ l1) {\n          var h1 = (a0 + a1) / 2;\n          x0 = r1 * Math.cos(h1);\n          y0 = r1 * Math.sin(h1);\n          x1 = y1 = null;\n        }\n      } else {\n        x0 = y0 = 0;\n      }\n\n      if (r0) {\n        x2 = r0 * Math.cos(a1 - p0);\n        y2 = r0 * Math.sin(a1 - p0);\n        x3 = r0 * Math.cos(a0 + p0);\n        y3 = r0 * Math.sin(a0 + p0);\n        var l0 = Math.abs(a0 - a1 + 2 * p0) <=  ? 0 : 1;\n\n        if (p0 && d3_svg_arcSweep(x2, y2, x3, y3) === 1 - cw ^ l0) {\n          var h0 = (a0 + a1) / 2;\n          x2 = r0 * Math.cos(h0);\n          y2 = r0 * Math.sin(h0);\n          x3 = y3 = null;\n        }\n      } else {\n        x2 = y2 = 0;\n      }\n\n      if (da >  && (rc = Math.min(Math.abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments))) > .001) {\n        cr = r0 < r1 ^ cw ? 0 : 1;\n        var rc1 = rc,\n            rc0 = rc;\n\n        if (da < ) {\n          var oc = x3 == null ? [x2, y2] : x1 == null ? [x0, y0] : d3_geom_polygonIntersect([x0, y0], [x3, y3], [x1, y1], [x2, y2]),\n              ax = x0 - oc[0],\n              ay = y0 - oc[1],\n              bx = x1 - oc[0],\n              by = y1 - oc[1],\n              kc = 1 / Math.sin(Math.acos((ax * bx + ay * by) / (Math.sqrt(ax * ax + ay * ay) * Math.sqrt(bx * bx + by * by))) / 2),\n              lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = Math.min(rc, (r0 - lc) / (kc - 1));\n          rc1 = Math.min(rc, (r1 - lc) / (kc + 1));\n        }\n\n        if (x1 != null) {\n          var t30 = d3_svg_arcCornerTangents(x3 == null ? [x2, y2] : [x3, y3], [x0, y0], r1, rc1, cw),\n              t12 = d3_svg_arcCornerTangents([x1, y1], [x2, y2], r1, rc1, cw);\n\n          if (rc === rc1) {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t30[1], \"A\", r1, \",\", r1, \" 0 \", 1 - cw ^ d3_svg_arcSweep(t30[1][0], t30[1][1], t12[1][0], t12[1][1]), \",\", cw, \" \", t12[1], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t12[0]);\n          } else {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 1,\", cr, \" \", t12[0]);\n          }\n        } else {\n          path.push(\"M\", x0, \",\", y0);\n        }\n\n        if (x3 != null) {\n          var t03 = d3_svg_arcCornerTangents([x0, y0], [x3, y3], r0, -rc0, cw),\n              t21 = d3_svg_arcCornerTangents([x2, y2], x1 == null ? [x0, y0] : [x1, y1], r0, -rc0, cw);\n\n          if (rc === rc0) {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t21[1], \"A\", r0, \",\", r0, \" 0 \", cw ^ d3_svg_arcSweep(t21[1][0], t21[1][1], t03[1][0], t03[1][1]), \",\", 1 - cw, \" \", t03[1], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          } else {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          }\n        } else {\n          path.push(\"L\", x2, \",\", y2);\n        }\n      } else {\n        path.push(\"M\", x0, \",\", y0);\n        if (x1 != null) path.push(\"A\", r1, \",\", r1, \" 0 \", l1, \",\", cw, \" \", x1, \",\", y1);\n        path.push(\"L\", x2, \",\", y2);\n        if (x3 != null) path.push(\"A\", r0, \",\", r0, \" 0 \", l0, \",\", 1 - cw, \" \", x3, \",\", y3);\n      }\n\n      path.push(\"Z\");\n      return path.join(\"\");\n    }\n\n    function circleSegment(r1, cw) {\n      return \"M0,\" + r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + -r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + r1;\n    }\n\n    arc.innerRadius = function (v) {\n      if (!arguments.length) return innerRadius;\n      innerRadius = d3_functor(v);\n      return arc;\n    };\n\n    arc.outerRadius = function (v) {\n      if (!arguments.length) return outerRadius;\n      outerRadius = d3_functor(v);\n      return arc;\n    };\n\n    arc.cornerRadius = function (v) {\n      if (!arguments.length) return cornerRadius;\n      cornerRadius = d3_functor(v);\n      return arc;\n    };\n\n    arc.padRadius = function (v) {\n      if (!arguments.length) return padRadius;\n      padRadius = v == d3_svg_arcAuto ? d3_svg_arcAuto : d3_functor(v);\n      return arc;\n    };\n\n    arc.startAngle = function (v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return arc;\n    };\n\n    arc.endAngle = function (v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return arc;\n    };\n\n    arc.padAngle = function (v) {\n      if (!arguments.length) return padAngle;\n      padAngle = d3_functor(v);\n      return arc;\n    };\n\n    arc.centroid = function () {\n      var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n          a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - half;\n      return [Math.cos(a) * r, Math.sin(a) * r];\n    };\n\n    return arc;\n  };\n\n  var d3_svg_arcAuto = \"auto\";\n\n  function d3_svg_arcInnerRadius(d) {\n    return d.innerRadius;\n  }\n\n  function d3_svg_arcOuterRadius(d) {\n    return d.outerRadius;\n  }\n\n  function d3_svg_arcStartAngle(d) {\n    return d.startAngle;\n  }\n\n  function d3_svg_arcEndAngle(d) {\n    return d.endAngle;\n  }\n\n  function d3_svg_arcPadAngle(d) {\n    return d && d.padAngle;\n  }\n\n  function d3_svg_arcSweep(x0, y0, x1, y1) {\n    return (x0 - x1) * y0 - (y0 - y1) * x0 > 0 ? 0 : 1;\n  }\n\n  function d3_svg_arcCornerTangents(p0, p1, r1, rc, cw) {\n    var x01 = p0[0] - p1[0],\n        y01 = p0[1] - p1[1],\n        lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01),\n        ox = lo * y01,\n        oy = -lo * x01,\n        x1 = p0[0] + ox,\n        y1 = p0[1] + oy,\n        x2 = p1[0] + ox,\n        y2 = p1[1] + oy,\n        x3 = (x1 + x2) / 2,\n        y3 = (y1 + y2) / 2,\n        dx = x2 - x1,\n        dy = y2 - y1,\n        d2 = dx * dx + dy * dy,\n        r = r1 - rc,\n        D = x1 * y2 - x2 * y1,\n        d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D)),\n        cx0 = (D * dy - dx * d) / d2,\n        cy0 = (-D * dx - dy * d) / d2,\n        cx1 = (D * dy + dx * d) / d2,\n        cy1 = (-D * dx + dy * d) / d2,\n        dx0 = cx0 - x3,\n        dy0 = cy0 - y3,\n        dx1 = cx1 - x3,\n        dy1 = cy1 - y3;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n    return [[cx0 - ox, cy0 - oy], [cx0 * r1 / r, cy0 * r1 / r]];\n  }\n\n  function d3_svg_line(projection) {\n    var x = d3_geom_pointX,\n        y = d3_geom_pointY,\n        defined = d3_true,\n        interpolate = d3_svg_lineLinear,\n        interpolateKey = interpolate.key,\n        tension = .7;\n\n    function line(data) {\n      var segments = [],\n          points = [],\n          i = -1,\n          n = data.length,\n          d,\n          fx = d3_functor(x),\n          fy = d3_functor(y);\n\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points), tension));\n      }\n\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points.push([+fx.call(this, d, i), +fy.call(this, d, i)]);\n        } else if (points.length) {\n          segment();\n          points = [];\n        }\n      }\n\n      if (points.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n\n    line.x = function (_) {\n      if (!arguments.length) return x;\n      x = _;\n      return line;\n    };\n\n    line.y = function (_) {\n      if (!arguments.length) return y;\n      y = _;\n      return line;\n    };\n\n    line.defined = function (_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return line;\n    };\n\n    line.interpolate = function (_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _;else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      return line;\n    };\n\n    line.tension = function (_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return line;\n    };\n\n    return line;\n  }\n\n  d3.svg.line = function () {\n    return d3_svg_line(d3_identity);\n  };\n\n  var d3_svg_lineInterpolators = d3.map({\n    linear: d3_svg_lineLinear,\n    \"linear-closed\": d3_svg_lineLinearClosed,\n    step: d3_svg_lineStep,\n    \"step-before\": d3_svg_lineStepBefore,\n    \"step-after\": d3_svg_lineStepAfter,\n    basis: d3_svg_lineBasis,\n    \"basis-open\": d3_svg_lineBasisOpen,\n    \"basis-closed\": d3_svg_lineBasisClosed,\n    bundle: d3_svg_lineBundle,\n    cardinal: d3_svg_lineCardinal,\n    \"cardinal-open\": d3_svg_lineCardinalOpen,\n    \"cardinal-closed\": d3_svg_lineCardinalClosed,\n    monotone: d3_svg_lineMonotone\n  });\n  d3_svg_lineInterpolators.forEach(function (key, value) {\n    value.key = key;\n    value.closed = /-closed$/.test(key);\n  });\n\n  function d3_svg_lineLinear(points) {\n    return points.length > 1 ? points.join(\"L\") : points + \"Z\";\n  }\n\n  function d3_svg_lineLinearClosed(points) {\n    return points.join(\"L\") + \"Z\";\n  }\n\n  function d3_svg_lineStep(points) {\n    var i = 0,\n        n = points.length,\n        p = points[0],\n        path = [p[0], \",\", p[1]];\n\n    while (++i < n) {\n      path.push(\"H\", (p[0] + (p = points[i])[0]) / 2, \"V\", p[1]);\n    }\n\n    if (n > 1) path.push(\"H\", p[0]);\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineStepBefore(points) {\n    var i = 0,\n        n = points.length,\n        p = points[0],\n        path = [p[0], \",\", p[1]];\n\n    while (++i < n) {\n      path.push(\"V\", (p = points[i])[1], \"H\", p[0]);\n    }\n\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineStepAfter(points) {\n    var i = 0,\n        n = points.length,\n        p = points[0],\n        path = [p[0], \",\", p[1]];\n\n    while (++i < n) {\n      path.push(\"H\", (p = points[i])[0], \"V\", p[1]);\n    }\n\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineCardinalOpen(points, tension) {\n    return points.length < 4 ? d3_svg_lineLinear(points) : points[1] + d3_svg_lineHermite(points.slice(1, -1), d3_svg_lineCardinalTangents(points, tension));\n  }\n\n  function d3_svg_lineCardinalClosed(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinearClosed(points) : points[0] + d3_svg_lineHermite((points.push(points[0]), points), d3_svg_lineCardinalTangents([points[points.length - 2]].concat(points, [points[1]]), tension));\n  }\n\n  function d3_svg_lineCardinal(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension));\n  }\n\n  function d3_svg_lineHermite(points, tangents) {\n    if (tangents.length < 1 || points.length != tangents.length && points.length != tangents.length + 2) {\n      return d3_svg_lineLinear(points);\n    }\n\n    var quad = points.length != tangents.length,\n        path = \"\",\n        p0 = points[0],\n        p = points[1],\n        t0 = tangents[0],\n        t = t0,\n        pi = 1;\n\n    if (quad) {\n      path += \"Q\" + (p[0] - t0[0] * 2 / 3) + \",\" + (p[1] - t0[1] * 2 / 3) + \",\" + p[0] + \",\" + p[1];\n      p0 = points[1];\n      pi = 2;\n    }\n\n    if (tangents.length > 1) {\n      t = tangents[1];\n      p = points[pi];\n      pi++;\n      path += \"C\" + (p0[0] + t0[0]) + \",\" + (p0[1] + t0[1]) + \",\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n\n      for (var i = 2; i < tangents.length; i++, pi++) {\n        p = points[pi];\n        t = tangents[i];\n        path += \"S\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n      }\n    }\n\n    if (quad) {\n      var lp = points[pi];\n      path += \"Q\" + (p[0] + t[0] * 2 / 3) + \",\" + (p[1] + t[1] * 2 / 3) + \",\" + lp[0] + \",\" + lp[1];\n    }\n\n    return path;\n  }\n\n  function d3_svg_lineCardinalTangents(points, tension) {\n    var tangents = [],\n        a = (1 - tension) / 2,\n        p0,\n        p1 = points[0],\n        p2 = points[1],\n        i = 1,\n        n = points.length;\n\n    while (++i < n) {\n      p0 = p1;\n      p1 = p2;\n      p2 = points[i];\n      tangents.push([a * (p2[0] - p0[0]), a * (p2[1] - p0[1])]);\n    }\n\n    return tangents;\n  }\n\n  function d3_svg_lineBasis(points) {\n    if (points.length < 3) return d3_svg_lineLinear(points);\n    var i = 1,\n        n = points.length,\n        pi = points[0],\n        x0 = pi[0],\n        y0 = pi[1],\n        px = [x0, x0, x0, (pi = points[1])[0]],\n        py = [y0, y0, y0, pi[1]],\n        path = [x0, \",\", y0, \"L\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py)];\n    points.push(points[n - 1]);\n\n    while (++i <= n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n\n    points.pop();\n    path.push(\"L\", pi);\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineBasisOpen(points) {\n    if (points.length < 4) return d3_svg_lineLinear(points);\n    var path = [],\n        i = -1,\n        n = points.length,\n        pi,\n        px = [0],\n        py = [0];\n\n    while (++i < 3) {\n      pi = points[i];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n\n    path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + \",\" + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py));\n    --i;\n\n    while (++i < n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineBasisClosed(points) {\n    var path,\n        i = -1,\n        n = points.length,\n        m = n + 4,\n        pi,\n        px = [],\n        py = [];\n\n    while (++i < 4) {\n      pi = points[i % n];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n\n    path = [d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py)];\n    --i;\n\n    while (++i < m) {\n      pi = points[i % n];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n\n    return path.join(\"\");\n  }\n\n  function d3_svg_lineBundle(points, tension) {\n    var n = points.length - 1;\n\n    if (n) {\n      var x0 = points[0][0],\n          y0 = points[0][1],\n          dx = points[n][0] - x0,\n          dy = points[n][1] - y0,\n          i = -1,\n          p,\n          t;\n\n      while (++i <= n) {\n        p = points[i];\n        t = i / n;\n        p[0] = tension * p[0] + (1 - tension) * (x0 + t * dx);\n        p[1] = tension * p[1] + (1 - tension) * (y0 + t * dy);\n      }\n    }\n\n    return d3_svg_lineBasis(points);\n  }\n\n  function d3_svg_lineDot4(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n  }\n\n  var d3_svg_lineBasisBezier1 = [0, 2 / 3, 1 / 3, 0],\n      d3_svg_lineBasisBezier2 = [0, 1 / 3, 2 / 3, 0],\n      d3_svg_lineBasisBezier3 = [0, 1 / 6, 2 / 3, 1 / 6];\n\n  function d3_svg_lineBasisBezier(path, x, y) {\n    path.push(\"C\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, y));\n  }\n\n  function d3_svg_lineSlope(p0, p1) {\n    return (p1[1] - p0[1]) / (p1[0] - p0[0]);\n  }\n\n  function d3_svg_lineFiniteDifferences(points) {\n    var i = 0,\n        j = points.length - 1,\n        m = [],\n        p0 = points[0],\n        p1 = points[1],\n        d = m[0] = d3_svg_lineSlope(p0, p1);\n\n    while (++i < j) {\n      m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + 1]))) / 2;\n    }\n\n    m[i] = d;\n    return m;\n  }\n\n  function d3_svg_lineMonotoneTangents(points) {\n    var tangents = [],\n        d,\n        a,\n        b,\n        s,\n        m = d3_svg_lineFiniteDifferences(points),\n        i = -1,\n        j = points.length - 1;\n\n    while (++i < j) {\n      d = d3_svg_lineSlope(points[i], points[i + 1]);\n\n      if (abs(d) < ) {\n        m[i] = m[i + 1] = 0;\n      } else {\n        a = m[i] / d;\n        b = m[i + 1] / d;\n        s = a * a + b * b;\n\n        if (s > 9) {\n          s = d * 3 / Math.sqrt(s);\n          m[i] = s * a;\n          m[i + 1] = s * b;\n        }\n      }\n    }\n\n    i = -1;\n\n    while (++i <= j) {\n      s = (points[Math.min(j, i + 1)][0] - points[Math.max(0, i - 1)][0]) / (6 * (1 + m[i] * m[i]));\n      tangents.push([s || 0, m[i] * s || 0]);\n    }\n\n    return tangents;\n  }\n\n  function d3_svg_lineMonotone(points) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineMonotoneTangents(points));\n  }\n\n  d3.svg.line.radial = function () {\n    var line = d3_svg_line(d3_svg_lineRadial);\n    line.radius = line.x, delete line.x;\n    line.angle = line.y, delete line.y;\n    return line;\n  };\n\n  function d3_svg_lineRadial(points) {\n    var point,\n        i = -1,\n        n = points.length,\n        r,\n        a;\n\n    while (++i < n) {\n      point = points[i];\n      r = point[0];\n      a = point[1] - half;\n      point[0] = r * Math.cos(a);\n      point[1] = r * Math.sin(a);\n    }\n\n    return points;\n  }\n\n  function d3_svg_area(projection) {\n    var x0 = d3_geom_pointX,\n        x1 = d3_geom_pointX,\n        y0 = 0,\n        y1 = d3_geom_pointY,\n        defined = d3_true,\n        interpolate = d3_svg_lineLinear,\n        interpolateKey = interpolate.key,\n        interpolateReverse = interpolate,\n        L = \"L\",\n        tension = .7;\n\n    function area(data) {\n      var segments = [],\n          points0 = [],\n          points1 = [],\n          i = -1,\n          n = data.length,\n          d,\n          fx0 = d3_functor(x0),\n          fy0 = d3_functor(y0),\n          fx1 = x0 === x1 ? function () {\n        return x;\n      } : d3_functor(x1),\n          fy1 = y0 === y1 ? function () {\n        return y;\n      } : d3_functor(y1),\n          x,\n          y;\n\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), \"Z\");\n      }\n\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points0.push([x = +fx0.call(this, d, i), y = +fy0.call(this, d, i)]);\n          points1.push([+fx1.call(this, d, i), +fy1.call(this, d, i)]);\n        } else if (points0.length) {\n          segment();\n          points0 = [];\n          points1 = [];\n        }\n      }\n\n      if (points0.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n\n    area.x = function (_) {\n      if (!arguments.length) return x1;\n      x0 = x1 = _;\n      return area;\n    };\n\n    area.x0 = function (_) {\n      if (!arguments.length) return x0;\n      x0 = _;\n      return area;\n    };\n\n    area.x1 = function (_) {\n      if (!arguments.length) return x1;\n      x1 = _;\n      return area;\n    };\n\n    area.y = function (_) {\n      if (!arguments.length) return y1;\n      y0 = y1 = _;\n      return area;\n    };\n\n    area.y0 = function (_) {\n      if (!arguments.length) return y0;\n      y0 = _;\n      return area;\n    };\n\n    area.y1 = function (_) {\n      if (!arguments.length) return y1;\n      y1 = _;\n      return area;\n    };\n\n    area.defined = function (_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return area;\n    };\n\n    area.interpolate = function (_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _;else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      interpolateReverse = interpolate.reverse || interpolate;\n      L = interpolate.closed ? \"M\" : \"L\";\n      return area;\n    };\n\n    area.tension = function (_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return area;\n    };\n\n    return area;\n  }\n\n  d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter;\n  d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore;\n\n  d3.svg.area = function () {\n    return d3_svg_area(d3_identity);\n  };\n\n  d3.svg.area.radial = function () {\n    var area = d3_svg_area(d3_svg_lineRadial);\n    area.radius = area.x, delete area.x;\n    area.innerRadius = area.x0, delete area.x0;\n    area.outerRadius = area.x1, delete area.x1;\n    area.angle = area.y, delete area.y;\n    area.startAngle = area.y0, delete area.y0;\n    area.endAngle = area.y1, delete area.y1;\n    return area;\n  };\n\n  d3.svg.chord = function () {\n    var source = d3_source,\n        target = d3_target,\n        radius = d3_svg_chordRadius,\n        startAngle = d3_svg_arcStartAngle,\n        endAngle = d3_svg_arcEndAngle;\n\n    function chord(d, i) {\n      var s = subgroup(this, source, d, i),\n          t = subgroup(this, target, d, i);\n      return \"M\" + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (equals(s, t) ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + \"Z\";\n    }\n\n    function subgroup(self, f, d, i) {\n      var subgroup = f.call(self, d, i),\n          r = radius.call(self, subgroup, i),\n          a0 = startAngle.call(self, subgroup, i) - half,\n          a1 = endAngle.call(self, subgroup, i) - half;\n      return {\n        r: r,\n        a0: a0,\n        a1: a1,\n        p0: [r * Math.cos(a0), r * Math.sin(a0)],\n        p1: [r * Math.cos(a1), r * Math.sin(a1)]\n      };\n    }\n\n    function equals(a, b) {\n      return a.a0 == b.a0 && a.a1 == b.a1;\n    }\n\n    function arc(r, p, a) {\n      return \"A\" + r + \",\" + r + \" 0 \" + +(a > ) + \",1 \" + p;\n    }\n\n    function curve(r0, p0, r1, p1) {\n      return \"Q 0,0 \" + p1;\n    }\n\n    chord.radius = function (v) {\n      if (!arguments.length) return radius;\n      radius = d3_functor(v);\n      return chord;\n    };\n\n    chord.source = function (v) {\n      if (!arguments.length) return source;\n      source = d3_functor(v);\n      return chord;\n    };\n\n    chord.target = function (v) {\n      if (!arguments.length) return target;\n      target = d3_functor(v);\n      return chord;\n    };\n\n    chord.startAngle = function (v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return chord;\n    };\n\n    chord.endAngle = function (v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return chord;\n    };\n\n    return chord;\n  };\n\n  function d3_svg_chordRadius(d) {\n    return d.radius;\n  }\n\n  d3.svg.diagonal = function () {\n    var source = d3_source,\n        target = d3_target,\n        projection = d3_svg_diagonalProjection;\n\n    function diagonal(d, i) {\n      var p0 = source.call(this, d, i),\n          p3 = target.call(this, d, i),\n          m = (p0.y + p3.y) / 2,\n          p = [p0, {\n        x: p0.x,\n        y: m\n      }, {\n        x: p3.x,\n        y: m\n      }, p3];\n      p = p.map(projection);\n      return \"M\" + p[0] + \"C\" + p[1] + \" \" + p[2] + \" \" + p[3];\n    }\n\n    diagonal.source = function (x) {\n      if (!arguments.length) return source;\n      source = d3_functor(x);\n      return diagonal;\n    };\n\n    diagonal.target = function (x) {\n      if (!arguments.length) return target;\n      target = d3_functor(x);\n      return diagonal;\n    };\n\n    diagonal.projection = function (x) {\n      if (!arguments.length) return projection;\n      projection = x;\n      return diagonal;\n    };\n\n    return diagonal;\n  };\n\n  function d3_svg_diagonalProjection(d) {\n    return [d.x, d.y];\n  }\n\n  d3.svg.diagonal.radial = function () {\n    var diagonal = d3.svg.diagonal(),\n        projection = d3_svg_diagonalProjection,\n        projection_ = diagonal.projection;\n\n    diagonal.projection = function (x) {\n      return arguments.length ? projection_(d3_svg_diagonalRadialProjection(projection = x)) : projection;\n    };\n\n    return diagonal;\n  };\n\n  function d3_svg_diagonalRadialProjection(projection) {\n    return function () {\n      var d = projection.apply(this, arguments),\n          r = d[0],\n          a = d[1] - half;\n      return [r * Math.cos(a), r * Math.sin(a)];\n    };\n  }\n\n  d3.svg.symbol = function () {\n    var type = d3_svg_symbolType,\n        size = d3_svg_symbolSize;\n\n    function symbol(d, i) {\n      return (d3_svg_symbols.get(type.call(this, d, i)) || d3_svg_symbolCircle)(size.call(this, d, i));\n    }\n\n    symbol.type = function (x) {\n      if (!arguments.length) return type;\n      type = d3_functor(x);\n      return symbol;\n    };\n\n    symbol.size = function (x) {\n      if (!arguments.length) return size;\n      size = d3_functor(x);\n      return symbol;\n    };\n\n    return symbol;\n  };\n\n  function d3_svg_symbolSize() {\n    return 64;\n  }\n\n  function d3_svg_symbolType() {\n    return \"circle\";\n  }\n\n  function d3_svg_symbolCircle(size) {\n    var r = Math.sqrt(size / );\n    return \"M0,\" + r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + -r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + r + \"Z\";\n  }\n\n  var d3_svg_symbols = d3.map({\n    circle: d3_svg_symbolCircle,\n    cross: function cross(size) {\n      var r = Math.sqrt(size / 5) / 2;\n      return \"M\" + -3 * r + \",\" + -r + \"H\" + -r + \"V\" + -3 * r + \"H\" + r + \"V\" + -r + \"H\" + 3 * r + \"V\" + r + \"H\" + r + \"V\" + 3 * r + \"H\" + -r + \"V\" + r + \"H\" + -3 * r + \"Z\";\n    },\n    diamond: function diamond(size) {\n      var ry = Math.sqrt(size / (2 * d3_svg_symbolTan30)),\n          rx = ry * d3_svg_symbolTan30;\n      return \"M0,\" + -ry + \"L\" + rx + \",0\" + \" 0,\" + ry + \" \" + -rx + \",0\" + \"Z\";\n    },\n    square: function square(size) {\n      var r = Math.sqrt(size) / 2;\n      return \"M\" + -r + \",\" + -r + \"L\" + r + \",\" + -r + \" \" + r + \",\" + r + \" \" + -r + \",\" + r + \"Z\";\n    },\n    \"triangle-down\": function triangleDown(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3),\n          ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + ry + \"L\" + rx + \",\" + -ry + \" \" + -rx + \",\" + -ry + \"Z\";\n    },\n    \"triangle-up\": function triangleUp(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3),\n          ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + -ry + \"L\" + rx + \",\" + ry + \" \" + -rx + \",\" + ry + \"Z\";\n    }\n  });\n  d3.svg.symbolTypes = d3_svg_symbols.keys();\n  var d3_svg_symbolSqrt3 = Math.sqrt(3),\n      d3_svg_symbolTan30 = Math.tan(30 * d3_radians);\n\n  d3_selectionPrototype.transition = function (name) {\n    var id = d3_transitionInheritId || ++d3_transitionId,\n        ns = d3_transitionNamespace(name),\n        subgroups = [],\n        subgroup,\n        node,\n        transition = d3_transitionInherit || {\n      time: Date.now(),\n      ease: d3_ease_cubicInOut,\n      delay: 0,\n      duration: 250\n    };\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      subgroups.push(subgroup = []);\n\n      for (var group = this[j], i = -1, n = group.length; ++i < n;) {\n        if (node = group[i]) d3_transitionNode(node, i, ns, id, transition);\n        subgroup.push(node);\n      }\n    }\n\n    return d3_transition(subgroups, ns, id);\n  };\n\n  d3_selectionPrototype.interrupt = function (name) {\n    return this.each(name == null ? d3_selection_interrupt : d3_selection_interruptNS(d3_transitionNamespace(name)));\n  };\n\n  var d3_selection_interrupt = d3_selection_interruptNS(d3_transitionNamespace());\n\n  function d3_selection_interruptNS(ns) {\n    return function () {\n      var lock, activeId, active;\n\n      if ((lock = this[ns]) && (active = lock[activeId = lock.active])) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        if (--lock.count) delete lock[activeId];else delete this[ns];\n        lock.active += .5;\n        active.event && active.event.interrupt.call(this, this.__data__, active.index);\n      }\n    };\n  }\n\n  function d3_transition(groups, ns, id) {\n    d3_subclass(groups, d3_transitionPrototype);\n    groups.namespace = ns;\n    groups.id = id;\n    return groups;\n  }\n\n  var d3_transitionPrototype = [],\n      d3_transitionId = 0,\n      d3_transitionInheritId,\n      d3_transitionInherit;\n  d3_transitionPrototype.call = d3_selectionPrototype.call;\n  d3_transitionPrototype.empty = d3_selectionPrototype.empty;\n  d3_transitionPrototype.node = d3_selectionPrototype.node;\n  d3_transitionPrototype.size = d3_selectionPrototype.size;\n\n  d3.transition = function (selection, name) {\n    return selection && selection.transition ? d3_transitionInheritId ? selection.transition(name) : selection : d3.selection().transition(selection);\n  };\n\n  d3.transition.prototype = d3_transitionPrototype;\n\n  d3_transitionPrototype.select = function (selector) {\n    var id = this.id,\n        ns = this.namespace,\n        subgroups = [],\n        subgroup,\n        subnode,\n        node;\n    selector = d3_selection_selector(selector);\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      subgroups.push(subgroup = []);\n\n      for (var group = this[j], i = -1, n = group.length; ++i < n;) {\n        if ((node = group[i]) && (subnode = selector.call(node, node.__data__, i, j))) {\n          if (\"__data__\" in node) subnode.__data__ = node.__data__;\n          d3_transitionNode(subnode, i, ns, id, node[ns][id]);\n          subgroup.push(subnode);\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n\n    return d3_transition(subgroups, ns, id);\n  };\n\n  d3_transitionPrototype.selectAll = function (selector) {\n    var id = this.id,\n        ns = this.namespace,\n        subgroups = [],\n        subgroup,\n        subnodes,\n        node,\n        subnode,\n        transition;\n    selector = d3_selection_selectorAll(selector);\n\n    for (var j = -1, m = this.length; ++j < m;) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n;) {\n        if (node = group[i]) {\n          transition = node[ns][id];\n          subnodes = selector.call(node, node.__data__, i, j);\n          subgroups.push(subgroup = []);\n\n          for (var k = -1, o = subnodes.length; ++k < o;) {\n            if (subnode = subnodes[k]) d3_transitionNode(subnode, k, ns, id, transition);\n            subgroup.push(subnode);\n          }\n        }\n      }\n    }\n\n    return d3_transition(subgroups, ns, id);\n  };\n\n  d3_transitionPrototype.filter = function (filter) {\n    var subgroups = [],\n        subgroup,\n        group,\n        node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n\n    return d3_transition(subgroups, this.namespace, this.id);\n  };\n\n  d3_transitionPrototype.tween = function (name, tween) {\n    var id = this.id,\n        ns = this.namespace;\n    if (arguments.length < 2) return this.node()[ns][id].tween.get(name);\n    return d3_selection_each(this, tween == null ? function (node) {\n      node[ns][id].tween.remove(name);\n    } : function (node) {\n      node[ns][id].tween.set(name, tween);\n    });\n  };\n\n  function d3_transition_tween(groups, name, value, tween) {\n    var id = groups.id,\n        ns = groups.namespace;\n    return d3_selection_each(groups, typeof value === \"function\" ? function (node, i, j) {\n      node[ns][id].tween.set(name, tween(value.call(node, node.__data__, i, j)));\n    } : (value = tween(value), function (node) {\n      node[ns][id].tween.set(name, value);\n    }));\n  }\n\n  d3_transitionPrototype.attr = function (nameNS, value) {\n    if (arguments.length < 2) {\n      for (value in nameNS) {\n        this.attr(value, nameNS[value]);\n      }\n\n      return this;\n    }\n\n    var interpolate = nameNS == \"transform\" ? d3_interpolateTransform : d3_interpolate,\n        name = d3.ns.qualify(nameNS);\n\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n\n    function attrTween(b) {\n      return b == null ? attrNull : (b += \"\", function () {\n        var a = this.getAttribute(name),\n            i;\n        return a !== b && (i = interpolate(a, b), function (t) {\n          this.setAttribute(name, i(t));\n        });\n      });\n    }\n\n    function attrTweenNS(b) {\n      return b == null ? attrNullNS : (b += \"\", function () {\n        var a = this.getAttributeNS(name.space, name.local),\n            i;\n        return a !== b && (i = interpolate(a, b), function (t) {\n          this.setAttributeNS(name.space, name.local, i(t));\n        });\n      });\n    }\n\n    return d3_transition_tween(this, \"attr.\" + nameNS, value, name.local ? attrTweenNS : attrTween);\n  };\n\n  d3_transitionPrototype.attrTween = function (nameNS, tween) {\n    var name = d3.ns.qualify(nameNS);\n\n    function attrTween(d, i) {\n      var f = tween.call(this, d, i, this.getAttribute(name));\n      return f && function (t) {\n        this.setAttribute(name, f(t));\n      };\n    }\n\n    function attrTweenNS(d, i) {\n      var f = tween.call(this, d, i, this.getAttributeNS(name.space, name.local));\n      return f && function (t) {\n        this.setAttributeNS(name.space, name.local, f(t));\n      };\n    }\n\n    return this.tween(\"attr.\" + nameNS, name.local ? attrTweenNS : attrTween);\n  };\n\n  d3_transitionPrototype.style = function (name, value, priority) {\n    var n = arguments.length;\n\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n\n        for (priority in name) {\n          this.style(priority, name[priority], value);\n        }\n\n        return this;\n      }\n\n      priority = \"\";\n    }\n\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n\n    function styleString(b) {\n      return b == null ? styleNull : (b += \"\", function () {\n        var a = d3_window(this).getComputedStyle(this, null).getPropertyValue(name),\n            i;\n        return a !== b && (i = d3_interpolate(a, b), function (t) {\n          this.style.setProperty(name, i(t), priority);\n        });\n      });\n    }\n\n    return d3_transition_tween(this, \"style.\" + name, value, styleString);\n  };\n\n  d3_transitionPrototype.styleTween = function (name, tween, priority) {\n    if (arguments.length < 3) priority = \"\";\n\n    function styleTween(d, i) {\n      var f = tween.call(this, d, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(name));\n      return f && function (t) {\n        this.style.setProperty(name, f(t), priority);\n      };\n    }\n\n    return this.tween(\"style.\" + name, styleTween);\n  };\n\n  d3_transitionPrototype.text = function (value) {\n    return d3_transition_tween(this, \"text\", value, d3_transition_text);\n  };\n\n  function d3_transition_text(b) {\n    if (b == null) b = \"\";\n    return function () {\n      this.textContent = b;\n    };\n  }\n\n  d3_transitionPrototype.remove = function () {\n    var ns = this.namespace;\n    return this.each(\"end.transition\", function () {\n      var p;\n      if (this[ns].count < 2 && (p = this.parentNode)) p.removeChild(this);\n    });\n  };\n\n  d3_transitionPrototype.ease = function (value) {\n    var id = this.id,\n        ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].ease;\n    if (typeof value !== \"function\") value = d3.ease.apply(d3, arguments);\n    return d3_selection_each(this, function (node) {\n      node[ns][id].ease = value;\n    });\n  };\n\n  d3_transitionPrototype.delay = function (value) {\n    var id = this.id,\n        ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].delay;\n    return d3_selection_each(this, typeof value === \"function\" ? function (node, i, j) {\n      node[ns][id].delay = +value.call(node, node.__data__, i, j);\n    } : (value = +value, function (node) {\n      node[ns][id].delay = value;\n    }));\n  };\n\n  d3_transitionPrototype.duration = function (value) {\n    var id = this.id,\n        ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].duration;\n    return d3_selection_each(this, typeof value === \"function\" ? function (node, i, j) {\n      node[ns][id].duration = Math.max(1, value.call(node, node.__data__, i, j));\n    } : (value = Math.max(1, value), function (node) {\n      node[ns][id].duration = value;\n    }));\n  };\n\n  d3_transitionPrototype.each = function (type, listener) {\n    var id = this.id,\n        ns = this.namespace;\n\n    if (arguments.length < 2) {\n      var inherit = d3_transitionInherit,\n          inheritId = d3_transitionInheritId;\n\n      try {\n        d3_transitionInheritId = id;\n        d3_selection_each(this, function (node, i, j) {\n          d3_transitionInherit = node[ns][id];\n          type.call(node, node.__data__, i, j);\n        });\n      } finally {\n        d3_transitionInherit = inherit;\n        d3_transitionInheritId = inheritId;\n      }\n    } else {\n      d3_selection_each(this, function (node) {\n        var transition = node[ns][id];\n        (transition.event || (transition.event = d3.dispatch(\"start\", \"end\", \"interrupt\"))).on(type, listener);\n      });\n    }\n\n    return this;\n  };\n\n  d3_transitionPrototype.transition = function () {\n    var id0 = this.id,\n        id1 = ++d3_transitionId,\n        ns = this.namespace,\n        subgroups = [],\n        subgroup,\n        group,\n        node,\n        transition;\n\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if (node = group[i]) {\n          transition = node[ns][id0];\n          d3_transitionNode(node, i, ns, id1, {\n            time: transition.time,\n            ease: transition.ease,\n            delay: transition.delay + transition.duration,\n            duration: transition.duration\n          });\n        }\n\n        subgroup.push(node);\n      }\n    }\n\n    return d3_transition(subgroups, ns, id1);\n  };\n\n  function d3_transitionNamespace(name) {\n    return name == null ? \"__transition__\" : \"__transition_\" + name + \"__\";\n  }\n\n  function d3_transitionNode(node, i, ns, id, inherit) {\n    var lock = node[ns] || (node[ns] = {\n      active: 0,\n      count: 0\n    }),\n        transition = lock[id],\n        time,\n        timer,\n        duration,\n        ease,\n        tweens;\n\n    function schedule(elapsed) {\n      var delay = transition.delay;\n      timer.t = delay + time;\n      if (delay <= elapsed) return start(elapsed - delay);\n      timer.c = start;\n    }\n\n    function start(elapsed) {\n      var activeId = lock.active,\n          active = lock[activeId];\n\n      if (active) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        --lock.count;\n        delete lock[activeId];\n        active.event && active.event.interrupt.call(node, node.__data__, active.index);\n      }\n\n      for (var cancelId in lock) {\n        if (+cancelId < id) {\n          var cancel = lock[cancelId];\n          cancel.timer.c = null;\n          cancel.timer.t = NaN;\n          --lock.count;\n          delete lock[cancelId];\n        }\n      }\n\n      timer.c = tick;\n      d3_timer(function () {\n        if (timer.c && tick(elapsed || 1)) {\n          timer.c = null;\n          timer.t = NaN;\n        }\n\n        return 1;\n      }, 0, time);\n      lock.active = id;\n      transition.event && transition.event.start.call(node, node.__data__, i);\n      tweens = [];\n      transition.tween.forEach(function (key, value) {\n        if (value = value.call(node, node.__data__, i)) {\n          tweens.push(value);\n        }\n      });\n      ease = transition.ease;\n      duration = transition.duration;\n    }\n\n    function tick(elapsed) {\n      var t = elapsed / duration,\n          e = ease(t),\n          n = tweens.length;\n\n      while (n > 0) {\n        tweens[--n].call(node, e);\n      }\n\n      if (t >= 1) {\n        transition.event && transition.event.end.call(node, node.__data__, i);\n        if (--lock.count) delete lock[id];else delete node[ns];\n        return 1;\n      }\n    }\n\n    if (!transition) {\n      time = inherit.time;\n      timer = d3_timer(schedule, 0, time);\n      transition = lock[id] = {\n        tween: new d3_Map(),\n        time: time,\n        timer: timer,\n        delay: inherit.delay,\n        duration: inherit.duration,\n        ease: inherit.ease,\n        index: i\n      };\n      inherit = null;\n      ++lock.count;\n    }\n  }\n\n  d3.svg.axis = function () {\n    var scale = d3.scale.linear(),\n        orient = d3_svg_axisDefaultOrient,\n        innerTickSize = 6,\n        outerTickSize = 6,\n        tickPadding = 3,\n        tickArguments_ = [10],\n        tickValues = null,\n        tickFormat_;\n\n    function axis(g) {\n      g.each(function () {\n        var g = d3.select(this);\n        var scale0 = this.__chart__ || scale,\n            scale1 = this.__chart__ = scale.copy();\n        var ticks = tickValues == null ? scale1.ticks ? scale1.ticks.apply(scale1, tickArguments_) : scale1.domain() : tickValues,\n            tickFormat = tickFormat_ == null ? scale1.tickFormat ? scale1.tickFormat.apply(scale1, tickArguments_) : d3_identity : tickFormat_,\n            tick = g.selectAll(\".tick\").data(ticks, scale1),\n            tickEnter = tick.enter().insert(\"g\", \".domain\").attr(\"class\", \"tick\").style(\"opacity\", ),\n            tickExit = d3.transition(tick.exit()).style(\"opacity\", ).remove(),\n            tickUpdate = d3.transition(tick.order()).style(\"opacity\", 1),\n            tickSpacing = Math.max(innerTickSize, 0) + tickPadding,\n            tickTransform;\n        var range = d3_scaleRange(scale1),\n            path = g.selectAll(\".domain\").data([0]),\n            pathUpdate = (path.enter().append(\"path\").attr(\"class\", \"domain\"), d3.transition(path));\n        tickEnter.append(\"line\");\n        tickEnter.append(\"text\");\n        var lineEnter = tickEnter.select(\"line\"),\n            lineUpdate = tickUpdate.select(\"line\"),\n            text = tick.select(\"text\").text(tickFormat),\n            textEnter = tickEnter.select(\"text\"),\n            textUpdate = tickUpdate.select(\"text\"),\n            sign = orient === \"top\" || orient === \"left\" ? -1 : 1,\n            x1,\n            x2,\n            y1,\n            y2;\n\n        if (orient === \"bottom\" || orient === \"top\") {\n          tickTransform = d3_svg_axisX, x1 = \"x\", y1 = \"y\", x2 = \"x2\", y2 = \"y2\";\n          text.attr(\"dy\", sign < 0 ? \"0em\" : \".71em\").style(\"text-anchor\", \"middle\");\n          pathUpdate.attr(\"d\", \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize);\n        } else {\n          tickTransform = d3_svg_axisY, x1 = \"y\", y1 = \"x\", x2 = \"y2\", y2 = \"x2\";\n          text.attr(\"dy\", \".32em\").style(\"text-anchor\", sign < 0 ? \"end\" : \"start\");\n          pathUpdate.attr(\"d\", \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize);\n        }\n\n        lineEnter.attr(y2, sign * innerTickSize);\n        textEnter.attr(y1, sign * tickSpacing);\n        lineUpdate.attr(x2, 0).attr(y2, sign * innerTickSize);\n        textUpdate.attr(x1, 0).attr(y1, sign * tickSpacing);\n\n        if (scale1.rangeBand) {\n          var x = scale1,\n              dx = x.rangeBand() / 2;\n\n          scale0 = scale1 = function scale1(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, scale0);\n        }\n\n        tickEnter.call(tickTransform, scale0, scale1);\n        tickUpdate.call(tickTransform, scale1, scale1);\n      });\n    }\n\n    axis.scale = function (x) {\n      if (!arguments.length) return scale;\n      scale = x;\n      return axis;\n    };\n\n    axis.orient = function (x) {\n      if (!arguments.length) return orient;\n      orient = x in d3_svg_axisOrients ? x + \"\" : d3_svg_axisDefaultOrient;\n      return axis;\n    };\n\n    axis.ticks = function () {\n      if (!arguments.length) return tickArguments_;\n      tickArguments_ = d3_array(arguments);\n      return axis;\n    };\n\n    axis.tickValues = function (x) {\n      if (!arguments.length) return tickValues;\n      tickValues = x;\n      return axis;\n    };\n\n    axis.tickFormat = function (x) {\n      if (!arguments.length) return tickFormat_;\n      tickFormat_ = x;\n      return axis;\n    };\n\n    axis.tickSize = function (x) {\n      var n = arguments.length;\n      if (!n) return innerTickSize;\n      innerTickSize = +x;\n      outerTickSize = +arguments[n - 1];\n      return axis;\n    };\n\n    axis.innerTickSize = function (x) {\n      if (!arguments.length) return innerTickSize;\n      innerTickSize = +x;\n      return axis;\n    };\n\n    axis.outerTickSize = function (x) {\n      if (!arguments.length) return outerTickSize;\n      outerTickSize = +x;\n      return axis;\n    };\n\n    axis.tickPadding = function (x) {\n      if (!arguments.length) return tickPadding;\n      tickPadding = +x;\n      return axis;\n    };\n\n    axis.tickSubdivide = function () {\n      return arguments.length && axis;\n    };\n\n    return axis;\n  };\n\n  var d3_svg_axisDefaultOrient = \"bottom\",\n      d3_svg_axisOrients = {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  };\n\n  function d3_svg_axisX(selection, x0, x1) {\n    selection.attr(\"transform\", function (d) {\n      var v0 = x0(d);\n      return \"translate(\" + (isFinite(v0) ? v0 : x1(d)) + \",0)\";\n    });\n  }\n\n  function d3_svg_axisY(selection, y0, y1) {\n    selection.attr(\"transform\", function (d) {\n      var v0 = y0(d);\n      return \"translate(0,\" + (isFinite(v0) ? v0 : y1(d)) + \")\";\n    });\n  }\n\n  d3.svg.brush = function () {\n    var event = d3_eventDispatch(brush, \"brushstart\", \"brush\", \"brushend\"),\n        x = null,\n        y = null,\n        xExtent = [0, 0],\n        yExtent = [0, 0],\n        xExtentDomain,\n        yExtentDomain,\n        xClamp = true,\n        yClamp = true,\n        resizes = d3_svg_brushResizes[0];\n\n    function brush(g) {\n      g.each(function () {\n        var g = d3.select(this).style(\"pointer-events\", \"all\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\").on(\"mousedown.brush\", brushstart).on(\"touchstart.brush\", brushstart);\n        var background = g.selectAll(\".background\").data([0]);\n        background.enter().append(\"rect\").attr(\"class\", \"background\").style(\"visibility\", \"hidden\").style(\"cursor\", \"crosshair\");\n        g.selectAll(\".extent\").data([0]).enter().append(\"rect\").attr(\"class\", \"extent\").style(\"cursor\", \"move\");\n        var resize = g.selectAll(\".resize\").data(resizes, d3_identity);\n        resize.exit().remove();\n        resize.enter().append(\"g\").attr(\"class\", function (d) {\n          return \"resize \" + d;\n        }).style(\"cursor\", function (d) {\n          return d3_svg_brushCursor[d];\n        }).append(\"rect\").attr(\"x\", function (d) {\n          return /[ew]$/.test(d) ? -3 : null;\n        }).attr(\"y\", function (d) {\n          return /^[ns]/.test(d) ? -3 : null;\n        }).attr(\"width\", 6).attr(\"height\", 6).style(\"visibility\", \"hidden\");\n        resize.style(\"display\", brush.empty() ? \"none\" : null);\n        var gUpdate = d3.transition(g),\n            backgroundUpdate = d3.transition(background),\n            range;\n\n        if (x) {\n          range = d3_scaleRange(x);\n          backgroundUpdate.attr(\"x\", range[0]).attr(\"width\", range[1] - range[0]);\n          redrawX(gUpdate);\n        }\n\n        if (y) {\n          range = d3_scaleRange(y);\n          backgroundUpdate.attr(\"y\", range[0]).attr(\"height\", range[1] - range[0]);\n          redrawY(gUpdate);\n        }\n\n        redraw(gUpdate);\n      });\n    }\n\n    brush.event = function (g) {\n      g.each(function () {\n        var event_ = event.of(this, arguments),\n            extent1 = {\n          x: xExtent,\n          y: yExtent,\n          i: xExtentDomain,\n          j: yExtentDomain\n        },\n            extent0 = this.__chart__ || extent1;\n        this.__chart__ = extent1;\n\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.brush\", function () {\n            xExtentDomain = extent0.i;\n            yExtentDomain = extent0.j;\n            xExtent = extent0.x;\n            yExtent = extent0.y;\n            event_({\n              type: \"brushstart\"\n            });\n          }).tween(\"brush:brush\", function () {\n            var xi = d3_interpolateArray(xExtent, extent1.x),\n                yi = d3_interpolateArray(yExtent, extent1.y);\n            xExtentDomain = yExtentDomain = null;\n            return function (t) {\n              xExtent = extent1.x = xi(t);\n              yExtent = extent1.y = yi(t);\n              event_({\n                type: \"brush\",\n                mode: \"resize\"\n              });\n            };\n          }).each(\"end.brush\", function () {\n            xExtentDomain = extent1.i;\n            yExtentDomain = extent1.j;\n            event_({\n              type: \"brush\",\n              mode: \"resize\"\n            });\n            event_({\n              type: \"brushend\"\n            });\n          });\n        } else {\n          event_({\n            type: \"brushstart\"\n          });\n          event_({\n            type: \"brush\",\n            mode: \"resize\"\n          });\n          event_({\n            type: \"brushend\"\n          });\n        }\n      });\n    };\n\n    function redraw(g) {\n      g.selectAll(\".resize\").attr(\"transform\", function (d) {\n        return \"translate(\" + xExtent[+/e$/.test(d)] + \",\" + yExtent[+/^s/.test(d)] + \")\";\n      });\n    }\n\n    function redrawX(g) {\n      g.select(\".extent\").attr(\"x\", xExtent[0]);\n      g.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\", xExtent[1] - xExtent[0]);\n    }\n\n    function redrawY(g) {\n      g.select(\".extent\").attr(\"y\", yExtent[0]);\n      g.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\", yExtent[1] - yExtent[0]);\n    }\n\n    function brushstart() {\n      var target = this,\n          eventTarget = d3.select(d3.event.target),\n          event_ = event.of(target, arguments),\n          g = d3.select(target),\n          resizing = eventTarget.datum(),\n          resizingX = !/^(n|s)$/.test(resizing) && x,\n          resizingY = !/^(e|w)$/.test(resizing) && y,\n          dragging = eventTarget.classed(\"extent\"),\n          dragRestore = d3_event_dragSuppress(target),\n          center,\n          origin = d3.mouse(target),\n          offset;\n      var w = d3.select(d3_window(target)).on(\"keydown.brush\", keydown).on(\"keyup.brush\", keyup);\n\n      if (d3.event.changedTouches) {\n        w.on(\"touchmove.brush\", brushmove).on(\"touchend.brush\", brushend);\n      } else {\n        w.on(\"mousemove.brush\", brushmove).on(\"mouseup.brush\", brushend);\n      }\n\n      g.interrupt().selectAll(\"*\").interrupt();\n\n      if (dragging) {\n        origin[0] = xExtent[0] - origin[0];\n        origin[1] = yExtent[0] - origin[1];\n      } else if (resizing) {\n        var ex = +/w$/.test(resizing),\n            ey = +/^n/.test(resizing);\n        offset = [xExtent[1 - ex] - origin[0], yExtent[1 - ey] - origin[1]];\n        origin[0] = xExtent[ex];\n        origin[1] = yExtent[ey];\n      } else if (d3.event.altKey) center = origin.slice();\n\n      g.style(\"pointer-events\", \"none\").selectAll(\".resize\").style(\"display\", null);\n      d3.select(\"body\").style(\"cursor\", eventTarget.style(\"cursor\"));\n      event_({\n        type: \"brushstart\"\n      });\n      brushmove();\n\n      function keydown() {\n        if (d3.event.keyCode == 32) {\n          if (!dragging) {\n            center = null;\n            origin[0] -= xExtent[1];\n            origin[1] -= yExtent[1];\n            dragging = 2;\n          }\n\n          d3_eventPreventDefault();\n        }\n      }\n\n      function keyup() {\n        if (d3.event.keyCode == 32 && dragging == 2) {\n          origin[0] += xExtent[1];\n          origin[1] += yExtent[1];\n          dragging = 0;\n          d3_eventPreventDefault();\n        }\n      }\n\n      function brushmove() {\n        var point = d3.mouse(target),\n            moved = false;\n\n        if (offset) {\n          point[0] += offset[0];\n          point[1] += offset[1];\n        }\n\n        if (!dragging) {\n          if (d3.event.altKey) {\n            if (!center) center = [(xExtent[0] + xExtent[1]) / 2, (yExtent[0] + yExtent[1]) / 2];\n            origin[0] = xExtent[+(point[0] < center[0])];\n            origin[1] = yExtent[+(point[1] < center[1])];\n          } else center = null;\n        }\n\n        if (resizingX && move1(point, x, 0)) {\n          redrawX(g);\n          moved = true;\n        }\n\n        if (resizingY && move1(point, y, 1)) {\n          redrawY(g);\n          moved = true;\n        }\n\n        if (moved) {\n          redraw(g);\n          event_({\n            type: \"brush\",\n            mode: dragging ? \"move\" : \"resize\"\n          });\n        }\n      }\n\n      function move1(point, scale, i) {\n        var range = d3_scaleRange(scale),\n            r0 = range[0],\n            r1 = range[1],\n            position = origin[i],\n            extent = i ? yExtent : xExtent,\n            size = extent[1] - extent[0],\n            min,\n            max;\n\n        if (dragging) {\n          r0 -= position;\n          r1 -= size + position;\n        }\n\n        min = (i ? yClamp : xClamp) ? Math.max(r0, Math.min(r1, point[i])) : point[i];\n\n        if (dragging) {\n          max = (min += position) + size;\n        } else {\n          if (center) position = Math.max(r0, Math.min(r1, 2 * center[i] - min));\n\n          if (position < min) {\n            max = min;\n            min = position;\n          } else {\n            max = position;\n          }\n        }\n\n        if (extent[0] != min || extent[1] != max) {\n          if (i) yExtentDomain = null;else xExtentDomain = null;\n          extent[0] = min;\n          extent[1] = max;\n          return true;\n        }\n      }\n\n      function brushend() {\n        brushmove();\n        g.style(\"pointer-events\", \"all\").selectAll(\".resize\").style(\"display\", brush.empty() ? \"none\" : null);\n        d3.select(\"body\").style(\"cursor\", null);\n        w.on(\"mousemove.brush\", null).on(\"mouseup.brush\", null).on(\"touchmove.brush\", null).on(\"touchend.brush\", null).on(\"keydown.brush\", null).on(\"keyup.brush\", null);\n        dragRestore();\n        event_({\n          type: \"brushend\"\n        });\n      }\n    }\n\n    brush.x = function (z) {\n      if (!arguments.length) return x;\n      x = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n\n    brush.y = function (z) {\n      if (!arguments.length) return y;\n      y = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n\n    brush.clamp = function (z) {\n      if (!arguments.length) return x && y ? [xClamp, yClamp] : x ? xClamp : y ? yClamp : null;\n      if (x && y) xClamp = !!z[0], yClamp = !!z[1];else if (x) xClamp = !!z;else if (y) yClamp = !!z;\n      return brush;\n    };\n\n    brush.extent = function (z) {\n      var x0, x1, y0, y1, t;\n\n      if (!arguments.length) {\n        if (x) {\n          if (xExtentDomain) {\n            x0 = xExtentDomain[0], x1 = xExtentDomain[1];\n          } else {\n            x0 = xExtent[0], x1 = xExtent[1];\n            if (x.invert) x0 = x.invert(x0), x1 = x.invert(x1);\n            if (x1 < x0) t = x0, x0 = x1, x1 = t;\n          }\n        }\n\n        if (y) {\n          if (yExtentDomain) {\n            y0 = yExtentDomain[0], y1 = yExtentDomain[1];\n          } else {\n            y0 = yExtent[0], y1 = yExtent[1];\n            if (y.invert) y0 = y.invert(y0), y1 = y.invert(y1);\n            if (y1 < y0) t = y0, y0 = y1, y1 = t;\n          }\n        }\n\n        return x && y ? [[x0, y0], [x1, y1]] : x ? [x0, x1] : y && [y0, y1];\n      }\n\n      if (x) {\n        x0 = z[0], x1 = z[1];\n        if (y) x0 = x0[0], x1 = x1[0];\n        xExtentDomain = [x0, x1];\n        if (x.invert) x0 = x(x0), x1 = x(x1);\n        if (x1 < x0) t = x0, x0 = x1, x1 = t;\n        if (x0 != xExtent[0] || x1 != xExtent[1]) xExtent = [x0, x1];\n      }\n\n      if (y) {\n        y0 = z[0], y1 = z[1];\n        if (x) y0 = y0[1], y1 = y1[1];\n        yExtentDomain = [y0, y1];\n        if (y.invert) y0 = y(y0), y1 = y(y1);\n        if (y1 < y0) t = y0, y0 = y1, y1 = t;\n        if (y0 != yExtent[0] || y1 != yExtent[1]) yExtent = [y0, y1];\n      }\n\n      return brush;\n    };\n\n    brush.clear = function () {\n      if (!brush.empty()) {\n        xExtent = [0, 0], yExtent = [0, 0];\n        xExtentDomain = yExtentDomain = null;\n      }\n\n      return brush;\n    };\n\n    brush.empty = function () {\n      return !!x && xExtent[0] == xExtent[1] || !!y && yExtent[0] == yExtent[1];\n    };\n\n    return d3.rebind(brush, event, \"on\");\n  };\n\n  var d3_svg_brushCursor = {\n    n: \"ns-resize\",\n    e: \"ew-resize\",\n    s: \"ns-resize\",\n    w: \"ew-resize\",\n    nw: \"nwse-resize\",\n    ne: \"nesw-resize\",\n    se: \"nwse-resize\",\n    sw: \"nesw-resize\"\n  };\n  var d3_svg_brushResizes = [[\"n\", \"e\", \"s\", \"w\", \"nw\", \"ne\", \"se\", \"sw\"], [\"e\", \"w\"], [\"n\", \"s\"], []];\n  var d3_time_format = d3_time.format = d3_locale_enUS.timeFormat;\n  var d3_time_formatUtc = d3_time_format.utc;\n  var d3_time_formatIso = d3_time_formatUtc(\"%Y-%m-%dT%H:%M:%S.%LZ\");\n  d3_time_format.iso = Date.prototype.toISOString && +new Date(\"2000-01-01T00:00:00.000Z\") ? d3_time_formatIsoNative : d3_time_formatIso;\n\n  function d3_time_formatIsoNative(date) {\n    return date.toISOString();\n  }\n\n  d3_time_formatIsoNative.parse = function (string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  };\n\n  d3_time_formatIsoNative.toString = d3_time_formatIso.toString;\n  d3_time.second = d3_time_interval(function (date) {\n    return new d3_date(Math.floor(date / 1e3) * 1e3);\n  }, function (date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 1e3);\n  }, function (date) {\n    return date.getSeconds();\n  });\n  d3_time.seconds = d3_time.second.range;\n  d3_time.seconds.utc = d3_time.second.utc.range;\n  d3_time.minute = d3_time_interval(function (date) {\n    return new d3_date(Math.floor(date / 6e4) * 6e4);\n  }, function (date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 6e4);\n  }, function (date) {\n    return date.getMinutes();\n  });\n  d3_time.minutes = d3_time.minute.range;\n  d3_time.minutes.utc = d3_time.minute.utc.range;\n  d3_time.hour = d3_time_interval(function (date) {\n    var timezone = date.getTimezoneOffset() / 60;\n    return new d3_date((Math.floor(date / 36e5 - timezone) + timezone) * 36e5);\n  }, function (date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 36e5);\n  }, function (date) {\n    return date.getHours();\n  });\n  d3_time.hours = d3_time.hour.range;\n  d3_time.hours.utc = d3_time.hour.utc.range;\n  d3_time.month = d3_time_interval(function (date) {\n    date = d3_time.day(date);\n    date.setDate(1);\n    return date;\n  }, function (date, offset) {\n    date.setMonth(date.getMonth() + offset);\n  }, function (date) {\n    return date.getMonth();\n  });\n  d3_time.months = d3_time.month.range;\n  d3_time.months.utc = d3_time.month.utc.range;\n\n  function d3_time_scale(linear, methods, format) {\n    function scale(x) {\n      return linear(x);\n    }\n\n    scale.invert = function (x) {\n      return d3_time_scaleDate(linear.invert(x));\n    };\n\n    scale.domain = function (x) {\n      if (!arguments.length) return linear.domain().map(d3_time_scaleDate);\n      linear.domain(x);\n      return scale;\n    };\n\n    function tickMethod(extent, count) {\n      var span = extent[1] - extent[0],\n          target = span / count,\n          i = d3.bisect(d3_time_scaleSteps, target);\n      return i == d3_time_scaleSteps.length ? [methods.year, d3_scale_linearTickRange(extent.map(function (d) {\n        return d / 31536e6;\n      }), count)[2]] : !i ? [d3_time_scaleMilliseconds, d3_scale_linearTickRange(extent, count)[2]] : methods[target / d3_time_scaleSteps[i - 1] < d3_time_scaleSteps[i] / target ? i - 1 : i];\n    }\n\n    scale.nice = function (interval, skip) {\n      var domain = scale.domain(),\n          extent = d3_scaleExtent(domain),\n          method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" && tickMethod(extent, interval);\n      if (method) interval = method[0], skip = method[1];\n\n      function skipped(date) {\n        return !isNaN(date) && !interval.range(date, d3_time_scaleDate(+date + 1), skip).length;\n      }\n\n      return scale.domain(d3_scale_nice(domain, skip > 1 ? {\n        floor: function floor(date) {\n          while (skipped(date = interval.floor(date))) {\n            date = d3_time_scaleDate(date - 1);\n          }\n\n          return date;\n        },\n        ceil: function ceil(date) {\n          while (skipped(date = interval.ceil(date))) {\n            date = d3_time_scaleDate(+date + 1);\n          }\n\n          return date;\n        }\n      } : interval));\n    };\n\n    scale.ticks = function (interval, skip) {\n      var extent = d3_scaleExtent(scale.domain()),\n          method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" ? tickMethod(extent, interval) : !interval.range && [{\n        range: interval\n      }, skip];\n      if (method) interval = method[0], skip = method[1];\n      return interval.range(extent[0], d3_time_scaleDate(+extent[1] + 1), skip < 1 ? 1 : skip);\n    };\n\n    scale.tickFormat = function () {\n      return format;\n    };\n\n    scale.copy = function () {\n      return d3_time_scale(linear.copy(), methods, format);\n    };\n\n    return d3_scale_linearRebind(scale, linear);\n  }\n\n  function d3_time_scaleDate(t) {\n    return new Date(t);\n  }\n\n  var d3_time_scaleSteps = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6];\n  var d3_time_scaleLocalMethods = [[d3_time.second, 1], [d3_time.second, 5], [d3_time.second, 15], [d3_time.second, 30], [d3_time.minute, 1], [d3_time.minute, 5], [d3_time.minute, 15], [d3_time.minute, 30], [d3_time.hour, 1], [d3_time.hour, 3], [d3_time.hour, 6], [d3_time.hour, 12], [d3_time.day, 1], [d3_time.day, 2], [d3_time.week, 1], [d3_time.month, 1], [d3_time.month, 3], [d3_time.year, 1]];\n  var d3_time_scaleLocalFormat = d3_time_format.multi([[\".%L\", function (d) {\n    return d.getMilliseconds();\n  }], [\":%S\", function (d) {\n    return d.getSeconds();\n  }], [\"%I:%M\", function (d) {\n    return d.getMinutes();\n  }], [\"%I %p\", function (d) {\n    return d.getHours();\n  }], [\"%a %d\", function (d) {\n    return d.getDay() && d.getDate() != 1;\n  }], [\"%b %d\", function (d) {\n    return d.getDate() != 1;\n  }], [\"%B\", function (d) {\n    return d.getMonth();\n  }], [\"%Y\", d3_true]]);\n  var d3_time_scaleMilliseconds = {\n    range: function range(start, stop, step) {\n      return d3.range(Math.ceil(start / step) * step, +stop, step).map(d3_time_scaleDate);\n    },\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n  d3_time_scaleLocalMethods.year = d3_time.year;\n\n  d3_time.scale = function () {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat);\n  };\n\n  var d3_time_scaleUtcMethods = d3_time_scaleLocalMethods.map(function (m) {\n    return [m[0].utc, m[1]];\n  });\n  var d3_time_scaleUtcFormat = d3_time_formatUtc.multi([[\".%L\", function (d) {\n    return d.getUTCMilliseconds();\n  }], [\":%S\", function (d) {\n    return d.getUTCSeconds();\n  }], [\"%I:%M\", function (d) {\n    return d.getUTCMinutes();\n  }], [\"%I %p\", function (d) {\n    return d.getUTCHours();\n  }], [\"%a %d\", function (d) {\n    return d.getUTCDay() && d.getUTCDate() != 1;\n  }], [\"%b %d\", function (d) {\n    return d.getUTCDate() != 1;\n  }], [\"%B\", function (d) {\n    return d.getUTCMonth();\n  }], [\"%Y\", d3_true]]);\n  d3_time_scaleUtcMethods.year = d3_time.year.utc;\n\n  d3_time.scale.utc = function () {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleUtcMethods, d3_time_scaleUtcFormat);\n  };\n\n  d3.text = d3_xhrType(function (request) {\n    return request.responseText;\n  });\n\n  d3.json = function (url, callback) {\n    return d3_xhr(url, \"application/json\", d3_json, callback);\n  };\n\n  function d3_json(request) {\n    return JSON.parse(request.responseText);\n  }\n\n  d3.html = function (url, callback) {\n    return d3_xhr(url, \"text/html\", d3_html, callback);\n  };\n\n  function d3_html(request) {\n    var range = d3_document.createRange();\n    range.selectNode(d3_document.body);\n    return range.createContextualFragment(request.responseText);\n  }\n\n  d3.xml = d3_xhrType(function (request) {\n    return request.responseXML;\n  });\n  if (typeof define === \"function\" && define.amd) this.d3 = d3, define(d3);else if (typeof module === \"object\" && module.exports) module.exports = d3;else this.d3 = d3;\n}();","import \"core-js/modules/es6.array.is-array\";\nexport var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function has(key) {\n    return prefix + key in this;\n  },\n  get: function get(key) {\n    return this[prefix + key];\n  },\n  set: function set(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function remove(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function clear() {\n    for (var property in this) {\n      if (property[0] === prefix) delete this[property];\n    }\n  },\n  keys: function keys() {\n    var keys = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) keys.push(property.slice(1));\n    }\n\n    return keys;\n  },\n  values: function values() {\n    var values = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) values.push(this[property]);\n    }\n\n    return values;\n  },\n  entries: function entries() {\n    var entries = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) entries.push({\n        key: property.slice(1),\n        value: this[property]\n      });\n    }\n\n    return entries;\n  },\n  size: function size() {\n    var size = 0;\n\n    for (var property in this) {\n      if (property[0] === prefix) ++size;\n    }\n\n    return size;\n  },\n  empty: function empty() {\n    for (var property in this) {\n      if (property[0] === prefix) return false;\n    }\n\n    return true;\n  },\n  each: function each(f) {\n    for (var property in this) {\n      if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map(); // Copy constructor.\n\n  if (object instanceof Map) object.each(function (value, key) {\n    map.set(key, value);\n  }); // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f(o = object[i], i, object), o);\n      }\n    } // Convert object to map.\n    else if (object) for (var key in object) {\n        map.set(key, object[key]);\n      }\n  return map;\n}\n\nexport default map;","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.sort\";\nimport map from \"./map\";\nexport default function () {\n  var keys = [],\n      _sortKeys = [],\n      _sortValues,\n      _rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (_sortValues != null) array.sort(_sortValues);\n      return _rollup != null ? _rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function (values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n    return result;\n  }\n\n  function _entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array,\n        sortKey = _sortKeys[depth - 1];\n    if (_rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {\n      array.push({\n        key: k,\n        values: _entries(v, depth)\n      });\n    });\n    return sortKey != null ? array.sort(function (a, b) {\n      return sortKey(a.key, b.key);\n    }) : array;\n  }\n\n  return nest = {\n    object: function object(array) {\n      return apply(array, 0, createObject, setObject);\n    },\n    map: function map(array) {\n      return apply(array, 0, createMap, setMap);\n    },\n    entries: function entries(array) {\n      return _entries(apply(array, 0, createMap, setMap), 0);\n    },\n    key: function key(d) {\n      keys.push(d);\n      return nest;\n    },\n    sortKeys: function sortKeys(order) {\n      _sortKeys[keys.length - 1] = order;\n      return nest;\n    },\n    sortValues: function sortValues(order) {\n      _sortValues = order;\n      return nest;\n    },\n    rollup: function rollup(f) {\n      _rollup = f;\n      return nest;\n    }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport { default as map, prefix } from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function add(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set(); // Copy constructor.\n\n  if (object instanceof Set) object.each(function (value) {\n    set.add(value);\n  }); // Otherwise, assume its an array.\n  else if (object) {\n      var i = -1,\n          n = object.length;\n      if (f == null) while (++i < n) {\n        set.add(object[i]);\n      } else while (++i < n) {\n        set.add(f(object[i], i, object));\n      }\n    }\n  return set;\n}\n\nexport default set;","export { default as nest } from \"./nest\";\nexport { default as set } from \"./set\";\nexport { default as map } from \"./map\";\nexport { default as keys } from \"./keys\";\nexport { default as values } from \"./values\";\nexport { default as entries } from \"./entries\";","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar colorScaleAttrs = require('./layout_attributes');\n\nvar colorScaleDefaults = require('./defaults');\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(layoutIn, layoutOut, colorScaleAttrs, attr, dflt);\n  }\n\n  coerce('colorscale.sequential');\n  coerce('colorscale.sequentialminus');\n  coerce('colorscale.diverging');\n  var colorAxes = layoutOut._colorAxes;\n  var colorAxIn, colorAxOut;\n\n  function coerceAx(attr, dflt) {\n    return Lib.coerce(colorAxIn, colorAxOut, colorScaleAttrs.coloraxis, attr, dflt);\n  }\n\n  for (var k in colorAxes) {\n    var stash = colorAxes[k];\n\n    if (stash[0]) {\n      colorAxIn = layoutIn[k] || {};\n      colorAxOut = Template.newContainer(layoutOut, k, 'coloraxis');\n      colorAxOut._name = k;\n      colorScaleDefaults(colorAxIn, colorAxOut, layoutOut, coerceAx, {\n        prefix: '',\n        cLetter: 'c'\n      });\n    } else {\n      // re-coerce colorscale attributes w/o coloraxis\n      for (var i = 0; i < stash[2].length; i++) {\n        stash[2][i]();\n      }\n\n      delete layoutOut._colorAxes[k];\n    }\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nexports.xmlns = 'http://www.w3.org/2000/xmlns/';\nexports.svg = 'http://www.w3.org/2000/svg';\nexports.xlink = 'http://www.w3.org/1999/xlink'; // the 'old' d3 quirk got fix in v3.5.7\n// https://github.com/mbostock/d3/commit/a6f66e9dd37f764403fc7c1f26be09ab4af24fed\n\nexports.svgAttrs = {\n  xmlns: exports.svg,\n  'xmlns:xlink': exports.xlink\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nmodule.exports = function hasColorbar(container) {\n  return Lib.isPlainObject(container.colorbar);\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  /**\n   * Timing information for interactive elements\n   */\n  SHOW_PLACEHOLDER: 100,\n  HIDE_PLACEHOLDER: 1000,\n  // opacity dimming fraction for points that are not in selection\n  DESELECTDIM: 0.2\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\n/**\n * convert a string s (such as 'xaxis.range[0]')\n * representing a property of nested object into set and get methods\n * also return the string and object so we don't have to keep track of them\n * allows [-1] for an array index, to set a property inside all elements\n * of an array\n * eg if obj = {arr: [{a: 1}, {a: 2}]}\n * you can do p = nestedProperty(obj, 'arr[-1].a')\n * but you cannot set the array itself this way, to do that\n * just set the whole array.\n * eg if obj = {arr: [1, 2, 3]}\n * you can't do nestedProperty(obj, 'arr[-1]').set(5)\n * but you can do nestedProperty(obj, 'arr').set([5, 5, 5])\n */\n\n\nmodule.exports = function nestedProperty(container, propStr) {\n  if (isNumeric(propStr)) propStr = String(propStr);else if (typeof propStr !== 'string' || propStr.substr(propStr.length - 4) === '[-1]') {\n    throw 'bad property string';\n  }\n  var j = 0;\n  var propParts = propStr.split('.');\n  var indexed;\n  var indices;\n  var i; // check for parts of the nesting hierarchy that are numbers (ie array elements)\n\n  while (j < propParts.length) {\n    // look for non-bracket chars, then any number of [##] blocks\n    indexed = String(propParts[j]).match(/^([^\\[\\]]*)((\\[\\-?[0-9]*\\])+)$/);\n\n    if (indexed) {\n      if (indexed[1]) propParts[j] = indexed[1]; // allow propStr to start with bracketed array indices\n      else if (j === 0) propParts.splice(0, 1);else throw 'bad property string';\n      indices = indexed[2].substr(1, indexed[2].length - 2).split('][');\n\n      for (i = 0; i < indices.length; i++) {\n        j++;\n        propParts.splice(j, 0, Number(indices[i]));\n      }\n    }\n\n    j++;\n  }\n\n  if (typeof container !== 'object') {\n    return badContainer(container, propStr, propParts);\n  }\n\n  return {\n    set: npSet(container, propParts, propStr),\n    get: npGet(container, propParts),\n    astr: propStr,\n    parts: propParts,\n    obj: container\n  };\n};\n\nfunction npGet(cont, parts) {\n  return function () {\n    var curCont = cont;\n    var curPart;\n    var allSame;\n    var out;\n    var i;\n    var j;\n\n    for (i = 0; i < parts.length - 1; i++) {\n      curPart = parts[i];\n\n      if (curPart === -1) {\n        allSame = true;\n        out = [];\n\n        for (j = 0; j < curCont.length; j++) {\n          out[j] = npGet(curCont[j], parts.slice(i + 1))();\n          if (out[j] !== out[0]) allSame = false;\n        }\n\n        return allSame ? out[0] : out;\n      }\n\n      if (typeof curPart === 'number' && !isArrayOrTypedArray(curCont)) {\n        return undefined;\n      }\n\n      curCont = curCont[curPart];\n\n      if (typeof curCont !== 'object' || curCont === null) {\n        return undefined;\n      }\n    } // only hit this if parts.length === 1\n\n\n    if (typeof curCont !== 'object' || curCont === null) return undefined;\n    out = curCont[parts[i]];\n    if (out === null) return undefined;\n    return out;\n  };\n}\n/*\n * Can this value be deleted? We can delete `undefined`, and `null` except INSIDE an\n * *args* array.\n *\n * Previously we also deleted some `{}` and `[]`, in order to try and make set/unset\n * a net noop; but this causes far more complication than it's worth, and still had\n * lots of exceptions. See https://github.com/plotly/plotly.js/issues/1410\n *\n * *args* arrays get passed directly to API methods and we should respect null if\n * the user put it there, but otherwise null is deleted as we use it as code\n * in restyle/relayout/update for \"delete this value\" whereas undefined means\n * \"ignore this edit\"\n */\n\n\nvar ARGS_PATTERN = /(^|\\.)args\\[/;\n\nfunction isDeletable(val, propStr) {\n  return val === undefined || val === null && !propStr.match(ARGS_PATTERN);\n}\n\nfunction npSet(cont, parts, propStr) {\n  return function (val) {\n    var curCont = cont;\n    var propPart = '';\n    var containerLevels = [[cont, propPart]];\n    var toDelete = isDeletable(val, propStr);\n    var curPart;\n    var i;\n\n    for (i = 0; i < parts.length - 1; i++) {\n      curPart = parts[i];\n\n      if (typeof curPart === 'number' && !isArrayOrTypedArray(curCont)) {\n        throw 'array index but container is not an array';\n      } // handle special -1 array index\n\n\n      if (curPart === -1) {\n        toDelete = !setArrayAll(curCont, parts.slice(i + 1), val, propStr);\n        if (toDelete) break;else return;\n      }\n\n      if (!checkNewContainer(curCont, curPart, parts[i + 1], toDelete)) {\n        break;\n      }\n\n      curCont = curCont[curPart];\n\n      if (typeof curCont !== 'object' || curCont === null) {\n        throw 'container is not an object';\n      }\n\n      propPart = joinPropStr(propPart, curPart);\n      containerLevels.push([curCont, propPart]);\n    }\n\n    if (toDelete) {\n      if (i === parts.length - 1) {\n        delete curCont[parts[i]]; // The one bit of pruning we still do: drop `undefined` from the end of arrays.\n        // In case someone has already unset previous items, continue until we hit a\n        // non-undefined value.\n\n        if (Array.isArray(curCont) && +parts[i] === curCont.length - 1) {\n          while (curCont.length && curCont[curCont.length - 1] === undefined) {\n            curCont.pop();\n          }\n        }\n      }\n    } else curCont[parts[i]] = val;\n  };\n}\n\nfunction joinPropStr(propStr, newPart) {\n  var toAdd = newPart;\n  if (isNumeric(newPart)) toAdd = '[' + newPart + ']';else if (propStr) toAdd = '.' + newPart;\n  return propStr + toAdd;\n} // handle special -1 array index\n\n\nfunction setArrayAll(containerArray, innerParts, val, propStr) {\n  var arrayVal = isArrayOrTypedArray(val);\n  var allSet = true;\n  var thisVal = val;\n  var thisPropStr = propStr.replace('-1', 0);\n  var deleteThis = arrayVal ? false : isDeletable(val, thisPropStr);\n  var firstPart = innerParts[0];\n  var i;\n\n  for (i = 0; i < containerArray.length; i++) {\n    thisPropStr = propStr.replace('-1', i);\n\n    if (arrayVal) {\n      thisVal = val[i % val.length];\n      deleteThis = isDeletable(thisVal, thisPropStr);\n    }\n\n    if (deleteThis) allSet = false;\n\n    if (!checkNewContainer(containerArray, i, firstPart, deleteThis)) {\n      continue;\n    }\n\n    npSet(containerArray[i], innerParts, propStr.replace('-1', i))(thisVal);\n  }\n\n  return allSet;\n}\n/**\n * make new sub-container as needed.\n * returns false if there's no container and none is needed\n * because we're only deleting an attribute\n */\n\n\nfunction checkNewContainer(container, part, nextPart, toDelete) {\n  if (container[part] === undefined) {\n    if (toDelete) return false;\n    if (typeof nextPart === 'number') container[part] = [];else container[part] = {};\n  }\n\n  return true;\n}\n\nfunction badContainer(container, propStr, propParts) {\n  return {\n    set: function set() {\n      throw 'bad container';\n    },\n    get: function get() {},\n    astr: propStr,\n    parts: propParts,\n    obj: container\n  };\n}","// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar rApply = (require('./_global').Reflect || {}).apply;\nvar fApply = Function.apply;\n// MS Edge argumentsList argument is optional\n$export($export.S + $export.F * !require('./_fails')(function () {\n  rApply(function () { /* empty */ });\n}), 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList) {\n    var T = aFunction(target);\n    var L = anObject(argumentsList);\n    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);\n  }\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  'undo': {\n    'width': 857.1,\n    'height': 1000,\n    'path': 'm857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'home': {\n    'width': 928.6,\n    'height': 1000,\n    'path': 'm786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'camera-retro': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'zoombox': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'pan': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'zoom_plus': {\n    'width': 875,\n    'height': 1000,\n    'path': 'm1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'zoom_minus': {\n    'width': 875,\n    'height': 1000,\n    'path': 'm0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'autoscale': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'tooltip_basic': {\n    'width': 1500,\n    'height': 1000,\n    'path': 'm375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'tooltip_compare': {\n    'width': 1125,\n    'height': 1000,\n    'path': 'm187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'plotlylogo': {\n    'width': 1542,\n    'height': 1000,\n    'path': 'm0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'z-axis': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  '3d_rotate': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'camera': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'movie': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'question': {\n    'width': 857.1,\n    'height': 1000,\n    'path': 'm500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'disk': {\n    'width': 857.1,\n    'height': 1000,\n    'path': 'm214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'lasso': {\n    'width': 1031,\n    'height': 1000,\n    'path': 'm1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'selectbox': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'm0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z',\n    'transform': 'matrix(1 0 0 -1 0 850)'\n  },\n  'spikeline': {\n    'width': 1000,\n    'height': 1000,\n    'path': 'M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z',\n    'transform': 'matrix(1.5 0 0 -1.5 0 850)'\n  },\n  'pencil': {\n    'width': 1792,\n    'height': 1792,\n    'path': 'M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z',\n    'transform': 'matrix(1 0 0 1 0 1)'\n  },\n  'newplotlylogo': {\n    'name': 'newplotlylogo',\n    'svg': '<svg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 132 132\\'><defs><style>.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id=\\'symbol\\'><rect class=\\'cls-1\\' width=\\'132\\' height=\\'132\\' rx=\\'6\\' ry=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'78\\' cy=\\'54\\' r=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'102\\' cy=\\'30\\' r=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'78\\' cy=\\'30\\' r=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'54\\' cy=\\'30\\' r=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'30\\' cy=\\'30\\' r=\\'6\\'/><circle class=\\'cls-2\\' cx=\\'30\\' cy=\\'54\\' r=\\'6\\'/><path class=\\'cls-3\\' d=\\'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z\\'/><path class=\\'cls-3\\' d=\\'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z\\'/><path class=\\'cls-3\\' d=\\'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z\\'/><path class=\\'cls-3\\' d=\\'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z\\'/></g></svg>'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  FORMAT_LINK: 'https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format',\n  DATE_FORMAT_LINK: 'https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Formatting.md#format'\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  // hover labels for multiple horizontal bars get tilted by this angle\n  YANGLE: 60,\n  // size and display constants for hover text\n  // pixel size of hover arrows\n  HOVERARROWSIZE: 6,\n  // pixels padding around text\n  HOVERTEXTPAD: 3,\n  // hover font\n  HOVERFONTSIZE: 13,\n  HOVERFONT: 'Arial, sans-serif',\n  // minimum time (msec) between hover calls\n  HOVERMINTIME: 50,\n  // ID suffix (with fullLayout._uid) for hover events in the throttle cache\n  HOVERID: '-hover'\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Registry = require('../../registry');\n\nvar hover = require('./hover').hover;\n\nmodule.exports = function click(gd, evt, subplot) {\n  var annotationsDone = Registry.getComponentMethod('annotations', 'onClick')(gd, gd._hoverdata); // fallback to fail-safe in case the plot type's hover method doesn't pass the subplot.\n  // Ternary, for example, didn't, but it was caught because tested.\n\n  if (subplot !== undefined) {\n    // The true flag at the end causes it to re-run the hover computation to figure out *which*\n    // point is being clicked. Without this, clicking is somewhat unreliable.\n    hover(gd, evt, subplot, true);\n  }\n\n  function emitClick() {\n    gd.emit('plotly_click', {\n      points: gd._hoverdata,\n      event: evt\n    });\n  }\n\n  if (gd._hoverdata && evt && evt.target) {\n    if (annotationsDone && annotationsDone.then) {\n      annotationsDone.then(emitClick);\n    } else emitClick(); // why do we get a double event without this???\n\n\n    if (evt.stopImmediatePropagation) evt.stopImmediatePropagation();\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nvar timerCache = {};\n/**\n * Throttle a callback. `callback` executes synchronously only if\n * more than `minInterval` milliseconds have already elapsed since the latest\n * call (if any). Otherwise we wait until `minInterval` is over and execute the\n * last callback received while waiting.\n * So the first and last events in a train are always executed (eventually)\n * but some of the events in the middle can be dropped.\n *\n * @param {string} id: an identifier to mark events to throttle together\n * @param {number} minInterval: minimum time, in milliseconds, between\n *   invocations of `callback`\n * @param {function} callback: the function to throttle. `callback` itself\n *   should be a purely synchronous function.\n */\n\nexports.throttle = function throttle(id, minInterval, callback) {\n  var cache = timerCache[id];\n  var now = Date.now();\n\n  if (!cache) {\n    /*\n     * Throw out old items before making a new one, to prevent the cache\n     * getting overgrown, for example from old plots that have been replaced.\n     * 1 minute age is arbitrary.\n     */\n    for (var idi in timerCache) {\n      if (timerCache[idi].ts < now - 60000) {\n        delete timerCache[idi];\n      }\n    }\n\n    cache = timerCache[id] = {\n      ts: 0,\n      timer: null\n    };\n  }\n\n  _clearTimeout(cache);\n\n  function exec() {\n    callback();\n    cache.ts = Date.now();\n\n    if (cache.onDone) {\n      cache.onDone();\n      cache.onDone = null;\n    }\n  }\n\n  if (now > cache.ts + minInterval) {\n    exec();\n    return;\n  }\n\n  cache.timer = setTimeout(function () {\n    exec();\n    cache.timer = null;\n  }, minInterval);\n};\n\nexports.done = function (id) {\n  var cache = timerCache[id];\n  if (!cache || !cache.timer) return Promise.resolve();\n  return new Promise(function (resolve) {\n    var previousOnDone = cache.onDone;\n\n    cache.onDone = function onDone() {\n      if (previousOnDone) previousOnDone();\n      resolve();\n      cache.onDone = null;\n    };\n  });\n};\n/**\n * Clear the throttle cache for one or all timers\n * @param {optional string} id:\n *   if provided, clear just this timer\n *   if omitted, clear all timers (mainly useful for testing)\n */\n\n\nexports.clear = function (id) {\n  if (id) {\n    _clearTimeout(timerCache[id]);\n\n    delete timerCache[id];\n  } else {\n    for (var idi in timerCache) {\n      exports.clear(idi);\n    }\n  }\n};\n\nfunction _clearTimeout(cache) {\n  if (cache && cache.timer !== null) {\n    clearTimeout(cache.timer);\n    cache.timer = null;\n  }\n}","require(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nvar tarjan = require('strongly-connected-components');\n\nmodule.exports = function findCircuits(edges, cb) {\n  var circuits = []; // Output\n\n  var stack = [];\n  var blocked = [];\n  var B = {};\n  var Ak = [];\n  var s;\n\n  function unblock(u) {\n    blocked[u] = false;\n\n    if (B.hasOwnProperty(u)) {\n      Object.keys(B[u]).forEach(function (w) {\n        delete B[u][w];\n\n        if (blocked[w]) {\n          unblock(w);\n        }\n      });\n    }\n  }\n\n  function circuit(v) {\n    var found = false;\n    stack.push(v);\n    blocked[v] = true; // L1\n\n    var i;\n    var w;\n\n    for (i = 0; i < Ak[v].length; i++) {\n      w = Ak[v][i];\n\n      if (w === s) {\n        output(s, stack);\n        found = true;\n      } else if (!blocked[w]) {\n        found = circuit(w);\n      }\n    } // L2\n\n\n    if (found) {\n      unblock(v);\n    } else {\n      for (i = 0; i < Ak[v].length; i++) {\n        w = Ak[v][i];\n        var entry = B[w];\n\n        if (!entry) {\n          entry = {};\n          B[w] = entry;\n        }\n\n        entry[w] = true;\n      }\n    }\n\n    stack.pop();\n    return found;\n  }\n\n  function output(start, stack) {\n    var cycle = [].concat(stack).concat(start);\n\n    if (cb) {\n      cb(circuit);\n    } else {\n      circuits.push(cycle);\n    }\n  }\n\n  function subgraph(minId) {\n    // Remove edges with indice smaller than minId\n    for (var i = 0; i < edges.length; i++) {\n      if (i < minId) edges[i] = [];\n      edges[i] = edges[i].filter(function (i) {\n        return i >= minId;\n      });\n    }\n  }\n\n  function adjacencyStructureSCC(from) {\n    // Make subgraph starting from vertex minId\n    subgraph(from);\n    var g = edges; // Find strongly connected components using Tarjan algorithm\n\n    var sccs = tarjan(g); // Filter out trivial connected components (ie. made of one node)\n\n    var ccs = sccs.components.filter(function (scc) {\n      return scc.length > 1;\n    }); // Find least vertex\n\n    var leastVertex = Infinity;\n    var leastVertexComponent;\n\n    for (var i = 0; i < ccs.length; i++) {\n      for (var j = 0; j < ccs[i].length; j++) {\n        if (ccs[i][j] < leastVertex) {\n          leastVertex = ccs[i][j];\n          leastVertexComponent = i;\n        }\n      }\n    }\n\n    var cc = ccs[leastVertexComponent];\n    if (!cc) return false; // Return the adjacency list of first component\n\n    var adjList = edges.map(function (l, index) {\n      if (cc.indexOf(index) === -1) return [];\n      return l.filter(function (i) {\n        return cc.indexOf(i) !== -1;\n      });\n    });\n    return {\n      leastVertex: leastVertex,\n      adjList: adjList\n    };\n  }\n\n  s = 0;\n  var n = edges.length;\n\n  while (s < n) {\n    // find strong component with least vertex in\n    // subgraph starting from vertex `s`\n    var p = adjacencyStructureSCC(s); // Its least vertex\n\n    s = p.leastVertex; // Its adjacency list\n\n    Ak = p.adjList;\n\n    if (Ak) {\n      for (var i = 0; i < Ak.length; i++) {\n        for (var j = 0; j < Ak[i].length; j++) {\n          var vertexId = Ak[i][j];\n          blocked[+vertexId] = false;\n          B[vertexId] = {};\n        }\n      }\n\n      circuit(s);\n      s = s + 1;\n    } else {\n      s = n;\n    }\n  }\n\n  if (cb) {\n    return;\n  } else {\n    return circuits;\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar tinycolor = require('tinycolor2');\n\nvar Registry = require('../../registry');\n\nvar Color = require('../color');\n\nvar Colorscale = require('../colorscale');\n\nvar Lib = require('../../lib');\n\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar xmlnsNamespaces = require('../../constants/xmlns_namespaces');\n\nvar alignment = require('../../constants/alignment');\n\nvar LINE_SPACING = alignment.LINE_SPACING;\n\nvar DESELECTDIM = require('../../constants/interactions').DESELECTDIM;\n\nvar subTypes = require('../../traces/scatter/subtypes');\n\nvar makeBubbleSizeFn = require('../../traces/scatter/make_bubble_size_func');\n\nvar appendArrayPointValue = require('../../components/fx/helpers').appendArrayPointValue;\n\nvar drawing = module.exports = {}; // -----------------------------------------------------\n// styling functions for plot elements\n// -----------------------------------------------------\n\ndrawing.font = function (s, family, size, color) {\n  // also allow the form font(s, {family, size, color})\n  if (Lib.isPlainObject(family)) {\n    color = family.color;\n    size = family.size;\n    family = family.family;\n  }\n\n  if (family) s.style('font-family', family);\n  if (size + 1) s.style('font-size', size + 'px');\n  if (color) s.call(Color.fill, color);\n};\n/*\n * Positioning helpers\n * Note: do not use `setPosition` with <text> nodes modified by\n * `svgTextUtils.convertToTspans`. Use `svgTextUtils.positionText`\n * instead, so that <tspan.line> elements get updated to match.\n */\n\n\ndrawing.setPosition = function (s, x, y) {\n  s.attr('x', x).attr('y', y);\n};\n\ndrawing.setSize = function (s, w, h) {\n  s.attr('width', w).attr('height', h);\n};\n\ndrawing.setRect = function (s, x, y, w, h) {\n  s.call(drawing.setPosition, x, y).call(drawing.setSize, w, h);\n};\n/** Translate node\n *\n * @param {object} d : calcdata point item\n * @param {sel} sel : d3 selction of node to translate\n * @param {object} xa : corresponding full xaxis object\n * @param {object} ya : corresponding full yaxis object\n *\n * @return {boolean} :\n *  true if selection got translated\n *  false if selection could not get translated\n */\n\n\ndrawing.translatePoint = function (d, sel, xa, ya) {\n  var x = xa.c2p(d.x);\n  var y = ya.c2p(d.y);\n\n  if (isNumeric(x) && isNumeric(y) && sel.node()) {\n    // for multiline text this works better\n    if (sel.node().nodeName === 'text') {\n      sel.attr('x', x).attr('y', y);\n    } else {\n      sel.attr('transform', 'translate(' + x + ',' + y + ')');\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\ndrawing.translatePoints = function (s, xa, ya) {\n  s.each(function (d) {\n    var sel = d3.select(this);\n    drawing.translatePoint(d, sel, xa, ya);\n  });\n};\n\ndrawing.hideOutsideRangePoint = function (d, sel, xa, ya, xcalendar, ycalendar) {\n  sel.attr('display', xa.isPtWithinRange(d, xcalendar) && ya.isPtWithinRange(d, ycalendar) ? null : 'none');\n};\n\ndrawing.hideOutsideRangePoints = function (traceGroups, subplot) {\n  if (!subplot._hasClipOnAxisFalse) return;\n  var xa = subplot.xaxis;\n  var ya = subplot.yaxis;\n  traceGroups.each(function (d) {\n    var trace = d[0].trace;\n    var xcalendar = trace.xcalendar;\n    var ycalendar = trace.ycalendar;\n    var selector = Registry.traceIs(trace, 'bar-like') ? '.bartext' : '.point,.textpoint';\n    traceGroups.selectAll(selector).each(function (d) {\n      drawing.hideOutsideRangePoint(d, d3.select(this), xa, ya, xcalendar, ycalendar);\n    });\n  });\n};\n\ndrawing.crispRound = function (gd, lineWidth, dflt) {\n  // for lines that disable antialiasing we want to\n  // make sure the width is an integer, and at least 1 if it's nonzero\n  if (!lineWidth || !isNumeric(lineWidth)) return dflt || 0; // but not for static plots - these don't get antialiased anyway.\n\n  if (gd._context.staticPlot) return lineWidth;\n  if (lineWidth < 1) return 1;\n  return Math.round(lineWidth);\n};\n\ndrawing.singleLineStyle = function (d, s, lw, lc, ld) {\n  s.style('fill', 'none');\n  var line = (((d || [])[0] || {}).trace || {}).line || {};\n  var lw1 = lw || line.width || 0;\n  var dash = ld || line.dash || '';\n  Color.stroke(s, lc || line.color);\n  drawing.dashLine(s, dash, lw1);\n};\n\ndrawing.lineGroupStyle = function (s, lw, lc, ld) {\n  s.style('fill', 'none').each(function (d) {\n    var line = (((d || [])[0] || {}).trace || {}).line || {};\n    var lw1 = lw || line.width || 0;\n    var dash = ld || line.dash || '';\n    d3.select(this).call(Color.stroke, lc || line.color).call(drawing.dashLine, dash, lw1);\n  });\n};\n\ndrawing.dashLine = function (s, dash, lineWidth) {\n  lineWidth = +lineWidth || 0;\n  dash = drawing.dashStyle(dash, lineWidth);\n  s.style({\n    'stroke-dasharray': dash,\n    'stroke-width': lineWidth + 'px'\n  });\n};\n\ndrawing.dashStyle = function (dash, lineWidth) {\n  lineWidth = +lineWidth || 1;\n  var dlw = Math.max(lineWidth, 3);\n  if (dash === 'solid') dash = '';else if (dash === 'dot') dash = dlw + 'px,' + dlw + 'px';else if (dash === 'dash') dash = 3 * dlw + 'px,' + 3 * dlw + 'px';else if (dash === 'longdash') dash = 5 * dlw + 'px,' + 5 * dlw + 'px';else if (dash === 'dashdot') {\n    dash = 3 * dlw + 'px,' + dlw + 'px,' + dlw + 'px,' + dlw + 'px';\n  } else if (dash === 'longdashdot') {\n    dash = 5 * dlw + 'px,' + 2 * dlw + 'px,' + dlw + 'px,' + 2 * dlw + 'px';\n  } // otherwise user wrote the dasharray themselves - leave it be\n\n  return dash;\n}; // Same as fillGroupStyle, except in this case the selection may be a transition\n\n\ndrawing.singleFillStyle = function (sel) {\n  var node = d3.select(sel.node());\n  var data = node.data();\n  var fillcolor = (((data[0] || [])[0] || {}).trace || {}).fillcolor;\n\n  if (fillcolor) {\n    sel.call(Color.fill, fillcolor);\n  }\n};\n\ndrawing.fillGroupStyle = function (s) {\n  s.style('stroke-width', 0).each(function (d) {\n    var shape = d3.select(this); // N.B. 'd' won't be a calcdata item when\n    // fill !== 'none' on a segment-less and marker-less trace\n\n    if (d[0].trace) {\n      shape.call(Color.fill, d[0].trace.fillcolor);\n    }\n  });\n};\n\nvar SYMBOLDEFS = require('./symbol_defs');\n\ndrawing.symbolNames = [];\ndrawing.symbolFuncs = [];\ndrawing.symbolNeedLines = {};\ndrawing.symbolNoDot = {};\ndrawing.symbolNoFill = {};\ndrawing.symbolList = [];\nObject.keys(SYMBOLDEFS).forEach(function (k) {\n  var symDef = SYMBOLDEFS[k];\n  var n = symDef.n;\n  drawing.symbolList.push(n, k, n + 100, k + '-open');\n  drawing.symbolNames[n] = k;\n  drawing.symbolFuncs[n] = symDef.f;\n\n  if (symDef.needLine) {\n    drawing.symbolNeedLines[n] = true;\n  }\n\n  if (symDef.noDot) {\n    drawing.symbolNoDot[n] = true;\n  } else {\n    drawing.symbolList.push(n + 200, k + '-dot', n + 300, k + '-open-dot');\n  }\n\n  if (symDef.noFill) {\n    drawing.symbolNoFill[n] = true;\n  }\n});\nvar MAXSYMBOL = drawing.symbolNames.length; // add a dot in the middle of the symbol\n\nvar DOTPATH = 'M0,0.5L0.5,0L0,-0.5L-0.5,0Z';\n\ndrawing.symbolNumber = function (v) {\n  if (typeof v === 'string') {\n    var vbase = 0;\n\n    if (v.indexOf('-open') > 0) {\n      vbase = 100;\n      v = v.replace('-open', '');\n    }\n\n    if (v.indexOf('-dot') > 0) {\n      vbase += 200;\n      v = v.replace('-dot', '');\n    }\n\n    v = drawing.symbolNames.indexOf(v);\n\n    if (v >= 0) {\n      v += vbase;\n    }\n  }\n\n  return v % 100 >= MAXSYMBOL || v >= 400 ? 0 : Math.floor(Math.max(v, 0));\n};\n\nfunction makePointPath(symbolNumber, r) {\n  var base = symbolNumber % 100;\n  return drawing.symbolFuncs[base](r) + (symbolNumber >= 200 ? DOTPATH : '');\n}\n\nvar HORZGRADIENT = {\n  x1: 1,\n  x2: 0,\n  y1: 0,\n  y2: 0\n};\nvar VERTGRADIENT = {\n  x1: 0,\n  x2: 0,\n  y1: 1,\n  y2: 0\n};\nvar stopFormatter = d3.format('~.1f');\nvar gradientInfo = {\n  radial: {\n    node: 'radialGradient'\n  },\n  radialreversed: {\n    node: 'radialGradient',\n    reversed: true\n  },\n  horizontal: {\n    node: 'linearGradient',\n    attrs: HORZGRADIENT\n  },\n  horizontalreversed: {\n    node: 'linearGradient',\n    attrs: HORZGRADIENT,\n    reversed: true\n  },\n  vertical: {\n    node: 'linearGradient',\n    attrs: VERTGRADIENT\n  },\n  verticalreversed: {\n    node: 'linearGradient',\n    attrs: VERTGRADIENT,\n    reversed: true\n  }\n};\n/**\n * gradient: create and apply a gradient fill\n *\n * @param {object} sel: d3 selection to apply this gradient to\n *     You can use `selection.call(Drawing.gradient, ...)`\n * @param {DOM element} gd: the graph div `sel` is part of\n * @param {string} gradientID: a unique (within this plot) identifier\n *     for this gradient, so that we don't create unnecessary definitions\n * @param {string} type: 'radial', 'horizontal', or 'vertical', optionally with\n *     'reversed' at the end. Normally radial goes center to edge,\n *     horizontal goes right to left, and vertical goes bottom to top\n * @param {array} colorscale: as in attribute values, [[fraction, color], ...]\n * @param {string} prop: the property to apply to, 'fill' or 'stroke'\n */\n\ndrawing.gradient = function (sel, gd, gradientID, type, colorscale, prop) {\n  var len = colorscale.length;\n  var info = gradientInfo[type];\n  var colorStops = new Array(len);\n\n  for (var i = 0; i < len; i++) {\n    if (info.reversed) {\n      colorStops[len - 1 - i] = [stopFormatter((1 - colorscale[i][0]) * 100), colorscale[i][1]];\n    } else {\n      colorStops[i] = [stopFormatter(colorscale[i][0] * 100), colorscale[i][1]];\n    }\n  }\n\n  var fullLayout = gd._fullLayout;\n  var fullID = 'g' + fullLayout._uid + '-' + gradientID;\n\n  var gradient = fullLayout._defs.select('.gradients').selectAll('#' + fullID).data([type + colorStops.join(';')], Lib.identity);\n\n  gradient.exit().remove();\n  gradient.enter().append(info.node).each(function () {\n    var el = d3.select(this);\n    if (info.attrs) el.attr(info.attrs);\n    el.attr('id', fullID);\n    var stops = el.selectAll('stop').data(colorStops);\n    stops.exit().remove();\n    stops.enter().append('stop');\n    stops.each(function (d) {\n      var tc = tinycolor(d[1]);\n      d3.select(this).attr({\n        offset: d[0] + '%',\n        'stop-color': Color.tinyRGB(tc),\n        'stop-opacity': tc.getAlpha()\n      });\n    });\n  });\n  sel.style(prop, getFullUrl(fullID, gd)).style(prop + '-opacity', null);\n\n  var className2query = function className2query(s) {\n    return '.' + s.attr('class').replace(/\\s/g, '.');\n  };\n\n  var k = className2query(d3.select(sel.node().parentNode)) + '>' + className2query(sel);\n  fullLayout._gradientUrlQueryParts[k] = 1;\n};\n/*\n * Make the gradients container and clear out any previous gradients.\n * We never collect all the gradients we need in one place,\n * so we can't ever remove gradients that have stopped being useful,\n * except all at once before a full redraw.\n * The upside of this is arbitrary points can share gradient defs\n */\n\n\ndrawing.initGradients = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var gradientsGroup = Lib.ensureSingle(fullLayout._defs, 'g', 'gradients');\n  gradientsGroup.selectAll('linearGradient,radialGradient').remove(); // initialize stash of query parts filled in Drawing.gradient,\n  // used to fix URL strings during image exports\n\n  fullLayout._gradientUrlQueryParts = {};\n};\n\ndrawing.pointStyle = function (s, trace, gd) {\n  if (!s.size()) return;\n  var fns = drawing.makePointStyleFns(trace);\n  s.each(function (d) {\n    drawing.singlePointStyle(d, d3.select(this), trace, fns, gd);\n  });\n};\n\ndrawing.singlePointStyle = function (d, sel, trace, fns, gd) {\n  var marker = trace.marker;\n  var markerLine = marker.line;\n  sel.style('opacity', fns.selectedOpacityFn ? fns.selectedOpacityFn(d) : d.mo === undefined ? marker.opacity : d.mo);\n\n  if (fns.ms2mrc) {\n    var r; // handle multi-trace graph edit case\n\n    if (d.ms === 'various' || marker.size === 'various') {\n      r = 3;\n    } else {\n      r = fns.ms2mrc(d.ms);\n    } // store the calculated size so hover can use it\n\n\n    d.mrc = r;\n\n    if (fns.selectedSizeFn) {\n      r = d.mrc = fns.selectedSizeFn(d);\n    } // turn the symbol into a sanitized number\n\n\n    var x = drawing.symbolNumber(d.mx || marker.symbol) || 0; // save if this marker is open\n    // because that impacts how to handle colors\n\n    d.om = x % 200 >= 100;\n    sel.attr('d', makePointPath(x, r));\n  }\n\n  var perPointGradient = false;\n  var fillColor, lineColor, lineWidth; // 'so' is suspected outliers, for box plots\n\n  if (d.so) {\n    lineWidth = markerLine.outlierwidth;\n    lineColor = markerLine.outliercolor;\n    fillColor = marker.outliercolor;\n  } else {\n    var markerLineWidth = (markerLine || {}).width;\n    lineWidth = (d.mlw + 1 || markerLineWidth + 1 || // TODO: we need the latter for legends... can we get rid of it?\n    (d.trace ? (d.trace.marker.line || {}).width : 0) + 1) - 1 || 0;\n    if ('mlc' in d) lineColor = d.mlcc = fns.lineScale(d.mlc); // weird case: array wasn't long enough to apply to every point\n    else if (Lib.isArrayOrTypedArray(markerLine.color)) lineColor = Color.defaultLine;else lineColor = markerLine.color;\n\n    if (Lib.isArrayOrTypedArray(marker.color)) {\n      fillColor = Color.defaultLine;\n      perPointGradient = true;\n    }\n\n    if ('mc' in d) {\n      fillColor = d.mcc = fns.markerScale(d.mc);\n    } else {\n      fillColor = marker.color || 'rgba(0,0,0,0)';\n    }\n\n    if (fns.selectedColorFn) {\n      fillColor = fns.selectedColorFn(d);\n    }\n  }\n\n  if (d.om) {\n    // open markers can't have zero linewidth, default to 1px,\n    // and use fill color as stroke color\n    sel.call(Color.stroke, fillColor).style({\n      'stroke-width': (lineWidth || 1) + 'px',\n      fill: 'none'\n    });\n  } else {\n    sel.style('stroke-width', (d.isBlank ? 0 : lineWidth) + 'px');\n    var markerGradient = marker.gradient;\n    var gradientType = d.mgt;\n    if (gradientType) perPointGradient = true;else gradientType = markerGradient && markerGradient.type; // for legend - arrays will propagate through here, but we don't need\n    // to treat it as per-point.\n\n    if (Array.isArray(gradientType)) {\n      gradientType = gradientType[0];\n      if (!gradientInfo[gradientType]) gradientType = 0;\n    }\n\n    if (gradientType && gradientType !== 'none') {\n      var gradientColor = d.mgc;\n      if (gradientColor) perPointGradient = true;else gradientColor = markerGradient.color;\n      var gradientID = trace.uid;\n      if (perPointGradient) gradientID += '-' + d.i;\n      drawing.gradient(sel, gd, gradientID, gradientType, [[0, gradientColor], [1, fillColor]], 'fill');\n    } else {\n      Color.fill(sel, fillColor);\n    }\n\n    if (lineWidth) {\n      Color.stroke(sel, lineColor);\n    }\n  }\n};\n\ndrawing.makePointStyleFns = function (trace) {\n  var out = {};\n  var marker = trace.marker; // allow array marker and marker line colors to be\n  // scaled by given max and min to colorscales\n\n  out.markerScale = drawing.tryColorscale(marker, '');\n  out.lineScale = drawing.tryColorscale(marker, 'line');\n\n  if (Registry.traceIs(trace, 'symbols')) {\n    out.ms2mrc = subTypes.isBubble(trace) ? makeBubbleSizeFn(trace) : function () {\n      return (marker.size || 6) / 2;\n    };\n  }\n\n  if (trace.selectedpoints) {\n    Lib.extendFlat(out, drawing.makeSelectedPointStyleFns(trace));\n  }\n\n  return out;\n};\n\ndrawing.makeSelectedPointStyleFns = function (trace) {\n  var out = {};\n  var selectedAttrs = trace.selected || {};\n  var unselectedAttrs = trace.unselected || {};\n  var marker = trace.marker || {};\n  var selectedMarker = selectedAttrs.marker || {};\n  var unselectedMarker = unselectedAttrs.marker || {};\n  var mo = marker.opacity;\n  var smo = selectedMarker.opacity;\n  var usmo = unselectedMarker.opacity;\n  var smoIsDefined = smo !== undefined;\n  var usmoIsDefined = usmo !== undefined;\n\n  if (Lib.isArrayOrTypedArray(mo) || smoIsDefined || usmoIsDefined) {\n    out.selectedOpacityFn = function (d) {\n      var base = d.mo === undefined ? marker.opacity : d.mo;\n\n      if (d.selected) {\n        return smoIsDefined ? smo : base;\n      } else {\n        return usmoIsDefined ? usmo : DESELECTDIM * base;\n      }\n    };\n  }\n\n  var mc = marker.color;\n  var smc = selectedMarker.color;\n  var usmc = unselectedMarker.color;\n\n  if (smc || usmc) {\n    out.selectedColorFn = function (d) {\n      var base = d.mcc || mc;\n\n      if (d.selected) {\n        return smc || base;\n      } else {\n        return usmc || base;\n      }\n    };\n  }\n\n  var ms = marker.size;\n  var sms = selectedMarker.size;\n  var usms = unselectedMarker.size;\n  var smsIsDefined = sms !== undefined;\n  var usmsIsDefined = usms !== undefined;\n\n  if (Registry.traceIs(trace, 'symbols') && (smsIsDefined || usmsIsDefined)) {\n    out.selectedSizeFn = function (d) {\n      var base = d.mrc || ms / 2;\n\n      if (d.selected) {\n        return smsIsDefined ? sms / 2 : base;\n      } else {\n        return usmsIsDefined ? usms / 2 : base;\n      }\n    };\n  }\n\n  return out;\n};\n\ndrawing.makeSelectedTextStyleFns = function (trace) {\n  var out = {};\n  var selectedAttrs = trace.selected || {};\n  var unselectedAttrs = trace.unselected || {};\n  var textFont = trace.textfont || {};\n  var selectedTextFont = selectedAttrs.textfont || {};\n  var unselectedTextFont = unselectedAttrs.textfont || {};\n  var tc = textFont.color;\n  var stc = selectedTextFont.color;\n  var utc = unselectedTextFont.color;\n\n  out.selectedTextColorFn = function (d) {\n    var base = d.tc || tc;\n\n    if (d.selected) {\n      return stc || base;\n    } else {\n      if (utc) return utc;else return stc ? base : Color.addOpacity(base, DESELECTDIM);\n    }\n  };\n\n  return out;\n};\n\ndrawing.selectedPointStyle = function (s, trace) {\n  if (!s.size() || !trace.selectedpoints) return;\n  var fns = drawing.makeSelectedPointStyleFns(trace);\n  var marker = trace.marker || {};\n  var seq = [];\n\n  if (fns.selectedOpacityFn) {\n    seq.push(function (pt, d) {\n      pt.style('opacity', fns.selectedOpacityFn(d));\n    });\n  }\n\n  if (fns.selectedColorFn) {\n    seq.push(function (pt, d) {\n      Color.fill(pt, fns.selectedColorFn(d));\n    });\n  }\n\n  if (fns.selectedSizeFn) {\n    seq.push(function (pt, d) {\n      var mx = d.mx || marker.symbol || 0;\n      var mrc2 = fns.selectedSizeFn(d);\n      pt.attr('d', makePointPath(drawing.symbolNumber(mx), mrc2)); // save for Drawing.selectedTextStyle\n\n      d.mrc2 = mrc2;\n    });\n  }\n\n  if (seq.length) {\n    s.each(function (d) {\n      var pt = d3.select(this);\n\n      for (var i = 0; i < seq.length; i++) {\n        seq[i](pt, d);\n      }\n    });\n  }\n};\n\ndrawing.tryColorscale = function (marker, prefix) {\n  var cont = prefix ? Lib.nestedProperty(marker, prefix).get() : marker;\n\n  if (cont) {\n    var colorArray = cont.color;\n\n    if ((cont.colorscale || cont._colorAx) && Lib.isArrayOrTypedArray(colorArray)) {\n      return Colorscale.makeColorScaleFuncFromTrace(cont);\n    }\n  }\n\n  return Lib.identity;\n};\n\nvar TEXTOFFSETSIGN = {\n  start: 1,\n  end: -1,\n  middle: 0,\n  bottom: 1,\n  top: -1\n};\n\nfunction textPointPosition(s, textPosition, fontSize, markerRadius) {\n  var group = d3.select(s.node().parentNode);\n  var v = textPosition.indexOf('top') !== -1 ? 'top' : textPosition.indexOf('bottom') !== -1 ? 'bottom' : 'middle';\n  var h = textPosition.indexOf('left') !== -1 ? 'end' : textPosition.indexOf('right') !== -1 ? 'start' : 'middle'; // if markers are shown, offset a little more than\n  // the nominal marker size\n  // ie 2/1.6 * nominal, bcs some markers are a bit bigger\n\n  var r = markerRadius ? markerRadius / 0.8 + 1 : 0;\n  var numLines = (svgTextUtils.lineCount(s) - 1) * LINE_SPACING + 1;\n  var dx = TEXTOFFSETSIGN[h] * r;\n  var dy = fontSize * 0.75 + TEXTOFFSETSIGN[v] * r + (TEXTOFFSETSIGN[v] - 1) * numLines * fontSize / 2; // fix the overall text group position\n\n  s.attr('text-anchor', h);\n  group.attr('transform', 'translate(' + dx + ',' + dy + ')');\n}\n\nfunction extracTextFontSize(d, trace) {\n  var fontSize = d.ts || trace.textfont.size;\n  return isNumeric(fontSize) && fontSize > 0 ? fontSize : 0;\n} // draw text at points\n\n\ndrawing.textPointStyle = function (s, trace, gd) {\n  if (!s.size()) return;\n  var selectedTextColorFn;\n\n  if (trace.selectedpoints) {\n    var fns = drawing.makeSelectedTextStyleFns(trace);\n    selectedTextColorFn = fns.selectedTextColorFn;\n  }\n\n  var texttemplate = trace.texttemplate;\n  var fullLayout = gd._fullLayout;\n  s.each(function (d) {\n    var p = d3.select(this);\n    var text = texttemplate ? Lib.extractOption(d, trace, 'txt', 'texttemplate') : Lib.extractOption(d, trace, 'tx', 'text');\n\n    if (!text && text !== 0) {\n      p.remove();\n      return;\n    }\n\n    if (texttemplate) {\n      var labels = trace._module.formatLabels ? trace._module.formatLabels(d, trace, fullLayout) : {};\n      var pointValues = {};\n      appendArrayPointValue(pointValues, trace, d.i);\n      var meta = trace._meta || {};\n      text = Lib.texttemplateString(text, labels, fullLayout._d3locale, pointValues, d, meta);\n    }\n\n    var pos = d.tp || trace.textposition;\n    var fontSize = extracTextFontSize(d, trace);\n    var fontColor = selectedTextColorFn ? selectedTextColorFn(d) : d.tc || trace.textfont.color;\n    p.call(drawing.font, d.tf || trace.textfont.family, fontSize, fontColor).text(text).call(svgTextUtils.convertToTspans, gd).call(textPointPosition, pos, fontSize, d.mrc);\n  });\n};\n\ndrawing.selectedTextStyle = function (s, trace) {\n  if (!s.size() || !trace.selectedpoints) return;\n  var fns = drawing.makeSelectedTextStyleFns(trace);\n  s.each(function (d) {\n    var tx = d3.select(this);\n    var tc = fns.selectedTextColorFn(d);\n    var tp = d.tp || trace.textposition;\n    var fontSize = extracTextFontSize(d, trace);\n    Color.fill(tx, tc);\n    textPointPosition(tx, tp, fontSize, d.mrc2 || d.mrc);\n  });\n}; // generalized Catmull-Rom splines, per\n// http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n\n\nvar CatmullRomExp = 0.5;\n\ndrawing.smoothopen = function (pts, smoothness) {\n  if (pts.length < 3) {\n    return 'M' + pts.join('L');\n  }\n\n  var path = 'M' + pts[0];\n  var tangents = [];\n  var i;\n\n  for (i = 1; i < pts.length - 1; i++) {\n    tangents.push(makeTangent(pts[i - 1], pts[i], pts[i + 1], smoothness));\n  }\n\n  path += 'Q' + tangents[0][0] + ' ' + pts[1];\n\n  for (i = 2; i < pts.length - 1; i++) {\n    path += 'C' + tangents[i - 2][1] + ' ' + tangents[i - 1][0] + ' ' + pts[i];\n  }\n\n  path += 'Q' + tangents[pts.length - 3][1] + ' ' + pts[pts.length - 1];\n  return path;\n};\n\ndrawing.smoothclosed = function (pts, smoothness) {\n  if (pts.length < 3) {\n    return 'M' + pts.join('L') + 'Z';\n  }\n\n  var path = 'M' + pts[0];\n  var pLast = pts.length - 1;\n  var tangents = [makeTangent(pts[pLast], pts[0], pts[1], smoothness)];\n  var i;\n\n  for (i = 1; i < pLast; i++) {\n    tangents.push(makeTangent(pts[i - 1], pts[i], pts[i + 1], smoothness));\n  }\n\n  tangents.push(makeTangent(pts[pLast - 1], pts[pLast], pts[0], smoothness));\n\n  for (i = 1; i <= pLast; i++) {\n    path += 'C' + tangents[i - 1][1] + ' ' + tangents[i][0] + ' ' + pts[i];\n  }\n\n  path += 'C' + tangents[pLast][1] + ' ' + tangents[0][0] + ' ' + pts[0] + 'Z';\n  return path;\n};\n\nfunction makeTangent(prevpt, thispt, nextpt, smoothness) {\n  var d1x = prevpt[0] - thispt[0];\n  var d1y = prevpt[1] - thispt[1];\n  var d2x = nextpt[0] - thispt[0];\n  var d2y = nextpt[1] - thispt[1];\n  var d1a = Math.pow(d1x * d1x + d1y * d1y, CatmullRomExp / 2);\n  var d2a = Math.pow(d2x * d2x + d2y * d2y, CatmullRomExp / 2);\n  var numx = (d2a * d2a * d1x - d1a * d1a * d2x) * smoothness;\n  var numy = (d2a * d2a * d1y - d1a * d1a * d2y) * smoothness;\n  var denom1 = 3 * d2a * (d1a + d2a);\n  var denom2 = 3 * d1a * (d1a + d2a);\n  return [[d3.round(thispt[0] + (denom1 && numx / denom1), 2), d3.round(thispt[1] + (denom1 && numy / denom1), 2)], [d3.round(thispt[0] - (denom2 && numx / denom2), 2), d3.round(thispt[1] - (denom2 && numy / denom2), 2)]];\n} // step paths - returns a generator function for paths\n// with the given step shape\n\n\nvar STEPPATH = {\n  hv: function hv(p0, p1) {\n    return 'H' + d3.round(p1[0], 2) + 'V' + d3.round(p1[1], 2);\n  },\n  vh: function vh(p0, p1) {\n    return 'V' + d3.round(p1[1], 2) + 'H' + d3.round(p1[0], 2);\n  },\n  hvh: function hvh(p0, p1) {\n    return 'H' + d3.round((p0[0] + p1[0]) / 2, 2) + 'V' + d3.round(p1[1], 2) + 'H' + d3.round(p1[0], 2);\n  },\n  vhv: function vhv(p0, p1) {\n    return 'V' + d3.round((p0[1] + p1[1]) / 2, 2) + 'H' + d3.round(p1[0], 2) + 'V' + d3.round(p1[1], 2);\n  }\n};\n\nvar STEPLINEAR = function STEPLINEAR(p0, p1) {\n  return 'L' + d3.round(p1[0], 2) + ',' + d3.round(p1[1], 2);\n};\n\ndrawing.steps = function (shape) {\n  var onestep = STEPPATH[shape] || STEPLINEAR;\n  return function (pts) {\n    var path = 'M' + d3.round(pts[0][0], 2) + ',' + d3.round(pts[0][1], 2);\n\n    for (var i = 1; i < pts.length; i++) {\n      path += onestep(pts[i - 1], pts[i]);\n    }\n\n    return path;\n  };\n}; // off-screen svg render testing element, shared by the whole page\n// uses the id 'js-plotly-tester' and stores it in drawing.tester\n\n\ndrawing.makeTester = function () {\n  var tester = Lib.ensureSingleById(d3.select('body'), 'svg', 'js-plotly-tester', function (s) {\n    s.attr(xmlnsNamespaces.svgAttrs).style({\n      position: 'absolute',\n      left: '-10000px',\n      top: '-10000px',\n      width: '9000px',\n      height: '9000px',\n      'z-index': '1'\n    });\n  }); // browsers differ on how they describe the bounding rect of\n  // the svg if its contents spill over... so make a 1x1px\n  // reference point we can measure off of.\n\n  var testref = Lib.ensureSingle(tester, 'path', 'js-reference-point', function (s) {\n    s.attr('d', 'M0,0H1V1H0Z').style({\n      'stroke-width': 0,\n      fill: 'black'\n    });\n  });\n  drawing.tester = tester;\n  drawing.testref = testref;\n};\n/*\n * use our offscreen tester to get a clientRect for an element,\n * in a reference frame where it isn't translated (or transformed) and\n * its anchor point is at (0,0)\n * always returns a copy of the bbox, so the caller can modify it safely\n *\n * @param {SVGElement} node: the element to measure. If possible this should be\n *   a <text> or MathJax <g> element that's already passed through\n *   `convertToTspans` because in that case we can cache the results, but it's\n *   possible to pass in any svg element.\n *\n * @param {boolean} inTester: is this element already in `drawing.tester`?\n *   If you are measuring a dummy element, rather than one you really intend\n *   to use on the plot, making it in `drawing.tester` in the first place\n *   allows us to test faster because it cuts out cloning and appending it.\n *\n * @param {string} hash: for internal use only, if we already know the cache key\n *   for this element beforehand.\n *\n * @return {object}: a plain object containing the width, height, left, right,\n *   top, and bottom of `node`\n */\n\n\ndrawing.savedBBoxes = {};\nvar savedBBoxesCount = 0;\nvar maxSavedBBoxes = 10000;\n\ndrawing.bBox = function (node, inTester, hash) {\n  /*\n   * Cache elements we've already measured so we don't have to\n   * remeasure the same thing many times\n   * We have a few bBox callers though who pass a node larger than\n   * a <text> or a MathJax <g>, such as an axis group containing many labels.\n   * These will not generate a hash (unless we figure out an appropriate\n   * hash key for them) and thus we will not hash them.\n   */\n  if (!hash) hash = nodeHash(node);\n  var out;\n\n  if (hash) {\n    out = drawing.savedBBoxes[hash];\n    if (out) return Lib.extendFlat({}, out);\n  } else if (node.childNodes.length === 1) {\n    /*\n     * If we have only one child element, which is itself hashable, make\n     * a new hash from this element plus its x,y,transform\n     * These bounding boxes *include* x,y,transform - mostly for use by\n     * callers trying to avoid overlaps (ie titles)\n     */\n    var innerNode = node.childNodes[0];\n    hash = nodeHash(innerNode);\n\n    if (hash) {\n      var x = +innerNode.getAttribute('x') || 0;\n      var y = +innerNode.getAttribute('y') || 0;\n      var transform = innerNode.getAttribute('transform');\n\n      if (!transform) {\n        // in this case, just varying x and y, don't bother caching\n        // the final bBox because the alteration is quick.\n        var innerBB = drawing.bBox(innerNode, false, hash);\n\n        if (x) {\n          innerBB.left += x;\n          innerBB.right += x;\n        }\n\n        if (y) {\n          innerBB.top += y;\n          innerBB.bottom += y;\n        }\n\n        return innerBB;\n      }\n      /*\n       * else we have a transform - rather than make a complicated\n       * (and error-prone and probably slow) transform parser/calculator,\n       * just continue on calculating the boundingClientRect of the group\n       * and use the new composite hash to cache it.\n       * That said, `innerNode.transform.baseVal` is an array of\n       * `SVGTransform` objects, that *do* seem to have a nice matrix\n       * multiplication interface that we could use to avoid making\n       * another getBoundingClientRect call...\n       */\n\n\n      hash += '~' + x + '~' + y + '~' + transform;\n      out = drawing.savedBBoxes[hash];\n      if (out) return Lib.extendFlat({}, out);\n    }\n  }\n\n  var testNode, tester;\n\n  if (inTester) {\n    testNode = node;\n  } else {\n    tester = drawing.tester.node(); // copy the node to test into the tester\n\n    testNode = node.cloneNode(true);\n    tester.appendChild(testNode);\n  } // standardize its position (and newline tspans if any)\n\n\n  d3.select(testNode).attr('transform', null).call(svgTextUtils.positionText, 0, 0);\n  var testRect = testNode.getBoundingClientRect();\n  var refRect = drawing.testref.node().getBoundingClientRect();\n  if (!inTester) tester.removeChild(testNode);\n  var bb = {\n    height: testRect.height,\n    width: testRect.width,\n    left: testRect.left - refRect.left,\n    top: testRect.top - refRect.top,\n    right: testRect.right - refRect.left,\n    bottom: testRect.bottom - refRect.top\n  }; // make sure we don't have too many saved boxes,\n  // or a long session could overload on memory\n  // by saving boxes for long-gone elements\n\n  if (savedBBoxesCount >= maxSavedBBoxes) {\n    drawing.savedBBoxes = {};\n    savedBBoxesCount = 0;\n  } // cache this bbox\n\n\n  if (hash) drawing.savedBBoxes[hash] = bb;\n  savedBBoxesCount++;\n  return Lib.extendFlat({}, bb);\n}; // capture everything about a node (at least in our usage) that\n// impacts its bounding box, given that bBox clears x, y, and transform\n\n\nfunction nodeHash(node) {\n  var inputText = node.getAttribute('data-unformatted');\n  if (inputText === null) return;\n  return inputText + node.getAttribute('data-math') + node.getAttribute('text-anchor') + node.getAttribute('style');\n}\n/**\n * Set clipPath URL in a way that work for all situations.\n *\n * In details, graphs on pages with <base> HTML tags need to prepend\n * the clip path ids with the page's base url EXCEPT during toImage exports.\n *\n * @param {d3 selection} s : node to add clip-path attribute\n * @param {string} localId : local clip-path (w/o base url) id\n * @param {DOM element || object} gd\n * - context._baseUrl {string}\n * - context._exportedPlot {boolean}\n */\n\n\ndrawing.setClipUrl = function (s, localId, gd) {\n  s.attr('clip-path', getFullUrl(localId, gd));\n};\n\nfunction getFullUrl(localId, gd) {\n  if (!localId) return null;\n  var context = gd._context;\n  var baseUrl = context._exportedPlot ? '' : context._baseUrl || '';\n  return 'url(\\'' + baseUrl + '#' + localId + '\\')';\n}\n\ndrawing.getTranslate = function (element) {\n  // Note the separator [^\\d] between x and y in this regex\n  // We generally use ',' but IE will convert it to ' '\n  var re = /.*\\btranslate\\((-?\\d*\\.?\\d*)[^-\\d]*(-?\\d*\\.?\\d*)[^\\d].*/;\n  var getter = element.attr ? 'attr' : 'getAttribute';\n  var transform = element[getter]('transform') || '';\n  var translate = transform.replace(re, function (match, p1, p2) {\n    return [p1, p2].join(' ');\n  }).split(' ');\n  return {\n    x: +translate[0] || 0,\n    y: +translate[1] || 0\n  };\n};\n\ndrawing.setTranslate = function (element, x, y) {\n  var re = /(\\btranslate\\(.*?\\);?)/;\n  var getter = element.attr ? 'attr' : 'getAttribute';\n  var setter = element.attr ? 'attr' : 'setAttribute';\n  var transform = element[getter]('transform') || '';\n  x = x || 0;\n  y = y || 0;\n  transform = transform.replace(re, '').trim();\n  transform += ' translate(' + x + ', ' + y + ')';\n  transform = transform.trim();\n  element[setter]('transform', transform);\n  return transform;\n};\n\ndrawing.getScale = function (element) {\n  var re = /.*\\bscale\\((\\d*\\.?\\d*)[^\\d]*(\\d*\\.?\\d*)[^\\d].*/;\n  var getter = element.attr ? 'attr' : 'getAttribute';\n  var transform = element[getter]('transform') || '';\n  var translate = transform.replace(re, function (match, p1, p2) {\n    return [p1, p2].join(' ');\n  }).split(' ');\n  return {\n    x: +translate[0] || 1,\n    y: +translate[1] || 1\n  };\n};\n\ndrawing.setScale = function (element, x, y) {\n  var re = /(\\bscale\\(.*?\\);?)/;\n  var getter = element.attr ? 'attr' : 'getAttribute';\n  var setter = element.attr ? 'attr' : 'setAttribute';\n  var transform = element[getter]('transform') || '';\n  x = x || 1;\n  y = y || 1;\n  transform = transform.replace(re, '').trim();\n  transform += ' scale(' + x + ', ' + y + ')';\n  transform = transform.trim();\n  element[setter]('transform', transform);\n  return transform;\n};\n\nvar SCALE_RE = /\\s*sc.*/;\n\ndrawing.setPointGroupScale = function (selection, xScale, yScale) {\n  xScale = xScale || 1;\n  yScale = yScale || 1;\n  if (!selection) return; // The same scale transform for every point:\n\n  var scale = xScale === 1 && yScale === 1 ? '' : ' scale(' + xScale + ',' + yScale + ')';\n  selection.each(function () {\n    var t = (this.getAttribute('transform') || '').replace(SCALE_RE, '');\n    t += scale;\n    t = t.trim();\n    this.setAttribute('transform', t);\n  });\n};\n\nvar TEXT_POINT_LAST_TRANSLATION_RE = /translate\\([^)]*\\)\\s*$/;\n\ndrawing.setTextPointsScale = function (selection, xScale, yScale) {\n  if (!selection) return;\n  selection.each(function () {\n    var transforms;\n    var el = d3.select(this);\n    var text = el.select('text');\n    if (!text.node()) return;\n    var x = parseFloat(text.attr('x') || 0);\n    var y = parseFloat(text.attr('y') || 0);\n    var existingTransform = (el.attr('transform') || '').match(TEXT_POINT_LAST_TRANSLATION_RE);\n\n    if (xScale === 1 && yScale === 1) {\n      transforms = [];\n    } else {\n      transforms = ['translate(' + x + ',' + y + ')', 'scale(' + xScale + ',' + yScale + ')', 'translate(' + -x + ',' + -y + ')'];\n    }\n\n    if (existingTransform) {\n      transforms.push(existingTransform);\n    }\n\n    el.attr('transform', transforms.join(' '));\n  });\n};","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar extendFlat = require('../lib/extend').extendFlat;\n/**\n * Make a xy domain attribute group\n *\n * @param {object} opts\n *   @param {string}\n *     opts.name: name to be inserted in the default description\n *   @param {boolean}\n *     opts.trace: set to true for trace containers\n *   @param {string}\n *     opts.editType: editType for all pieces\n *   @param {boolean}\n *     opts.noGridCell: set to true to omit `row` and `column`\n *\n * @param {object} extra\n *   @param {string}\n *     extra.description: extra description. N.B we use\n *     a separate extra container to make it compatible with\n *     the compress_attributes transform.\n *\n * @return {object} attributes object containing {x,y} as specified\n */\n\n\nexports.attributes = function (opts, extra) {\n  opts = opts || {};\n  extra = extra || {};\n  var base = {\n    valType: 'info_array',\n    role: 'info',\n    editType: opts.editType,\n    items: [{\n      valType: 'number',\n      min: 0,\n      max: 1,\n      editType: opts.editType\n    }, {\n      valType: 'number',\n      min: 0,\n      max: 1,\n      editType: opts.editType\n    }],\n    dflt: [0, 1]\n  };\n  var namePart = opts.name ? opts.name + ' ' : '';\n  var contPart = opts.trace ? 'trace ' : 'subplot ';\n  var descPart = extra.description ? ' ' + extra.description : '';\n  var out = {\n    x: extendFlat({}, base, {\n      description: ['Sets the horizontal domain of this ', namePart, contPart, '(in plot fraction).', descPart].join('')\n    }),\n    y: extendFlat({}, base, {\n      description: ['Sets the vertical domain of this ', namePart, contPart, '(in plot fraction).', descPart].join('')\n    }),\n    editType: opts.editType\n  };\n\n  if (!opts.noGridCell) {\n    out.row = {\n      valType: 'integer',\n      min: 0,\n      dflt: 0,\n      role: 'info',\n      editType: opts.editType,\n      description: ['If there is a layout grid, use the domain ', 'for this row in the grid for this ', namePart, contPart, '.', descPart].join('')\n    };\n    out.column = {\n      valType: 'integer',\n      min: 0,\n      dflt: 0,\n      role: 'info',\n      editType: opts.editType,\n      description: ['If there is a layout grid, use the domain ', 'for this column in the grid for this ', namePart, contPart, '.', descPart].join('')\n    };\n  }\n\n  return out;\n};\n\nexports.defaults = function (containerOut, layout, coerce, dfltDomains) {\n  var dfltX = dfltDomains && dfltDomains.x || [0, 1];\n  var dfltY = dfltDomains && dfltDomains.y || [0, 1];\n  var grid = layout.grid;\n\n  if (grid) {\n    var column = coerce('domain.column');\n\n    if (column !== undefined) {\n      if (column < grid.columns) dfltX = grid._domains.x[column];else delete containerOut.domain.column;\n    }\n\n    var row = coerce('domain.row');\n\n    if (row !== undefined) {\n      if (row < grid.rows) dfltY = grid._domains.y[row];else delete containerOut.domain.row;\n    }\n  }\n\n  var x = coerce('domain.x', dfltX);\n  var y = coerce('domain.y', dfltY); // don't accept bad input data\n\n  if (!(x[0] < x[1])) containerOut.domain.x = dfltX.slice();\n  if (!(y[0] < y[1])) containerOut.domain.y = dfltY.slice();\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Clear gl frame (if any). This is a common pattern as\n * we usually set `preserveDrawingBuffer: true` during\n * gl context creation (e.g. via `reglUtils.prepare`).\n *\n * @param {DOM node or object} gd : graph div object\n */\n\nmodule.exports = function clearGlCanvases(gd) {\n  var fullLayout = gd._fullLayout;\n\n  if (fullLayout._glcanvas && fullLayout._glcanvas.size()) {\n    fullLayout._glcanvas.each(function (d) {\n      if (d.regl) d.regl.clear({\n        color: true,\n        depth: true\n      });\n    });\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar Lib = require('../../lib');\n\nvar Registry = require('../../registry');\n\nmodule.exports = function calc(gd) {\n  var calcdata = gd.calcdata;\n  var fullLayout = gd._fullLayout;\n\n  function makeCoerceHoverInfo(trace) {\n    return function (val) {\n      return Lib.coerceHoverinfo({\n        hoverinfo: val\n      }, {\n        _module: trace._module\n      }, fullLayout);\n    };\n  }\n\n  for (var i = 0; i < calcdata.length; i++) {\n    var cd = calcdata[i];\n    var trace = cd[0].trace; // don't include hover calc fields for pie traces\n    // as calcdata items might be sorted by value and\n    // won't match the data array order.\n\n    if (Registry.traceIs(trace, 'pie-like')) continue;\n    var fillFn = Registry.traceIs(trace, '2dMap') ? paste : Lib.fillArray;\n    fillFn(trace.hoverinfo, cd, 'hi', makeCoerceHoverInfo(trace));\n    if (trace.hovertemplate) fillFn(trace.hovertemplate, cd, 'ht');\n    if (!trace.hoverlabel) continue;\n    fillFn(trace.hoverlabel.bgcolor, cd, 'hbg');\n    fillFn(trace.hoverlabel.bordercolor, cd, 'hbc');\n    fillFn(trace.hoverlabel.font.size, cd, 'hts');\n    fillFn(trace.hoverlabel.font.color, cd, 'htc');\n    fillFn(trace.hoverlabel.font.family, cd, 'htf');\n    fillFn(trace.hoverlabel.namelength, cd, 'hnl');\n    fillFn(trace.hoverlabel.align, cd, 'hta');\n  }\n};\n\nfunction paste(traceAttr, cd, cdAttr, fn) {\n  fn = fn || Lib.identity;\n\n  if (Array.isArray(traceAttr)) {\n    cd[0][cdAttr] = fn(traceAttr);\n  }\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Creates a set of padding attributes.\n *\n * @param {object} opts\n *   @param {string} editType:\n *     the editType for all pieces of this padding definition\n *\n * @return {object} attributes object containing {t, r, b, l} as specified\n */\n\nmodule.exports = function (opts) {\n  var editType = opts.editType;\n  return {\n    t: {\n      valType: 'number',\n      dflt: 0,\n      role: 'style',\n      editType: editType,\n      description: 'The amount of padding (in px) along the top of the component.'\n    },\n    r: {\n      valType: 'number',\n      dflt: 0,\n      role: 'style',\n      editType: editType,\n      description: 'The amount of padding (in px) on the right side of the component.'\n    },\n    b: {\n      valType: 'number',\n      dflt: 0,\n      role: 'style',\n      editType: editType,\n      description: 'The amount of padding (in px) along the bottom of the component.'\n    },\n    l: {\n      valType: 'number',\n      dflt: 0,\n      role: 'style',\n      editType: editType,\n      description: 'The amount of padding (in px) on the left side of the component.'\n    },\n    editType: editType\n  };\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar baseAttrs = require('../../plots/attributes');\n\nvar colorAttrs = require('../../components/color/attributes');\n\nvar fxAttrs = require('../../components/fx/attributes');\n\nvar domainAttrs = require('../../plots/domain').attributes;\n\nvar hovertemplateAttrs = require('../../plots/template_attributes').hovertemplateAttrs;\n\nvar colorAttributes = require('../../components/colorscale/attributes');\n\nvar templatedArray = require('../../plot_api/plot_template').templatedArray;\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar overrideAll = require('../../plot_api/edit_types').overrideAll;\n\nvar FORMAT_LINK = require('../../constants/docs').FORMAT_LINK;\n\nvar attrs = module.exports = overrideAll({\n  hoverinfo: extendFlat({}, baseAttrs.hoverinfo, {\n    flags: [],\n    arrayOk: false,\n    description: ['Determines which trace information appear on hover.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.', 'Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`', 'for nodes and links respectively.'].join(' ')\n  }),\n  hoverlabel: fxAttrs.hoverlabel,\n  domain: domainAttrs({\n    name: 'sankey',\n    trace: true\n  }),\n  orientation: {\n    valType: 'enumerated',\n    values: ['v', 'h'],\n    dflt: 'h',\n    role: 'style',\n    description: 'Sets the orientation of the Sankey diagram.'\n  },\n  valueformat: {\n    valType: 'string',\n    dflt: '.3s',\n    role: 'style',\n    description: ['Sets the value formatting rule using d3 formatting mini-language', 'which is similar to those of Python. See', FORMAT_LINK].join(' ')\n  },\n  valuesuffix: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    description: ['Adds a unit to follow the value in the hover tooltip. Add a space if a separation', 'is necessary from the value.'].join(' ')\n  },\n  arrangement: {\n    valType: 'enumerated',\n    values: ['snap', 'perpendicular', 'freeform', 'fixed'],\n    dflt: 'snap',\n    role: 'style',\n    description: ['If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to', 'preserve space between nodes specified via `nodepad`.', 'If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.', 'If value is `freeform`, the nodes can freely move on the plane.', 'If value is `fixed`, the nodes are stationary.'].join(' ')\n  },\n  textfont: fontAttrs({\n    description: 'Sets the font for node labels'\n  }),\n  node: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the node.'\n    },\n    groups: {\n      valType: 'info_array',\n      impliedEdits: {\n        'x': [],\n        'y': []\n      },\n      dimensions: 2,\n      freeLength: true,\n      dflt: [],\n      items: {\n        valType: 'number',\n        editType: 'calc'\n      },\n      role: 'info',\n      description: ['Groups of nodes.', 'Each group is defined by an array with the indices of the nodes it contains.', 'Multiple groups can be specified.'].join(' ')\n    },\n    x: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized horizontal position of the node.'\n    },\n    y: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized vertical position of the node.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.', 'If `node.color` is omitted, then the default `Plotly` color palette will be cycled through', 'to have a variety of colors. These defaults are not fully opaque, to allow some visibility of', 'what is beneath the node.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `node`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0.5,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `node`.'].join(' ')\n      }\n    },\n    pad: {\n      valType: 'number',\n      arrayOk: false,\n      min: 0,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the padding (in px) between the `nodes`.'\n    },\n    thickness: {\n      valType: 'number',\n      arrayOk: false,\n      min: 1,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the thickness (in px) of the `nodes`.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering nodes.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `sourceLinks` and `targetLinks` are arrays of link objects.',\n      keys: ['value', 'label']\n    }),\n    description: 'The nodes of the Sankey plot.'\n  },\n  link: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the link.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.', 'If `link.color` is omitted, then by default, a translucent grey link will be used.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `link`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `link`.'].join(' ')\n      }\n    },\n    source: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the source node.'\n    },\n    target: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the target node.'\n    },\n    value: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'A numeric value representing the flow volume value.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering links.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `source` and `target` are node objects.',\n      keys: ['value', 'label']\n    }),\n    colorscales: templatedArray('concentrationscales', {\n      editType: 'calc',\n      label: {\n        valType: 'string',\n        role: 'info',\n        editType: 'calc',\n        description: 'The label of the links to color based on their concentration within a flow.',\n        dflt: ''\n      },\n      cmax: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 1,\n        description: ['Sets the upper bound of the color domain.'].join('')\n      },\n      cmin: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 0,\n        description: ['Sets the lower bound of the color domain.'].join('')\n      },\n      colorscale: extendFlat(colorAttributes().colorscale, {\n        dflt: [[0, 'white'], [1, 'black']]\n      })\n    }),\n    description: 'The links of the Sankey plot.',\n    role: 'info'\n  }\n}, 'calc', 'nested');\nattrs.transforms = undefined;","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/* global jQuery:false */\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar Events = {\n  init: function init(plotObj) {\n    /*\n     * If we have already instantiated an emitter for this plot\n     * return early.\n     */\n    if (plotObj._ev instanceof EventEmitter) return plotObj;\n    var ev = new EventEmitter();\n    var internalEv = new EventEmitter();\n    /*\n     * Assign to plot._ev while we still live in a land\n     * where plot is a DOM element with stuff attached to it.\n     * In the future we can make plot the event emitter itself.\n     */\n\n    plotObj._ev = ev;\n    /*\n     * Create a second event handler that will manage events *internally*.\n     * This allows parts of plotly to respond to thing like relayout without\n     * having to use the user-facing event handler. They cannot peacefully\n     * coexist on the same handler because a user invoking\n     * plotObj.removeAllListeners() would detach internal events, breaking\n     * plotly.\n     */\n\n    plotObj._internalEv = internalEv;\n    /*\n     * Assign bound methods from the ev to the plot object. These methods\n     * will reference the 'this' of plot._ev even though they are methods\n     * of plot. This will keep the event machinery away from the plot object\n     * which currently is often a DOM element but presents an API that will\n     * continue to function when plot becomes an emitter. Not all EventEmitter\n     * methods have been bound to `plot` as some do not currently add value to\n     * the Plotly event API.\n     */\n\n    plotObj.on = ev.on.bind(ev);\n    plotObj.once = ev.once.bind(ev);\n    plotObj.removeListener = ev.removeListener.bind(ev);\n    plotObj.removeAllListeners = ev.removeAllListeners.bind(ev);\n    /*\n     * Create functions for managing internal events. These are *only* triggered\n     * by the mirroring of external events via the emit function.\n     */\n\n    plotObj._internalOn = internalEv.on.bind(internalEv);\n    plotObj._internalOnce = internalEv.once.bind(internalEv);\n    plotObj._removeInternalListener = internalEv.removeListener.bind(internalEv);\n    plotObj._removeAllInternalListeners = internalEv.removeAllListeners.bind(internalEv);\n    /*\n     * We must wrap emit to continue to support JQuery events. The idea\n     * is to check to see if the user is using JQuery events, if they are\n     * we emit JQuery events to trigger user handlers as well as the EventEmitter\n     * events.\n     */\n\n    plotObj.emit = function (event, data) {\n      if (typeof jQuery !== 'undefined') {\n        jQuery(plotObj).trigger(event, data);\n      }\n\n      ev.emit(event, data);\n      internalEv.emit(event, data);\n    };\n\n    return plotObj;\n  },\n\n  /*\n   * This function behaves like jQuery's triggerHandler. It calls\n   * all handlers for a particular event and returns the return value\n   * of the LAST handler. This function also triggers jQuery's\n   * triggerHandler for backwards compatibility.\n   */\n  triggerHandler: function triggerHandler(plotObj, event, data) {\n    var jQueryHandlerValue;\n    var nodeEventHandlerValue;\n    /*\n     * If jQuery exists run all its handlers for this event and\n     * collect the return value of the LAST handler function\n     */\n\n    if (typeof jQuery !== 'undefined') {\n      jQueryHandlerValue = jQuery(plotObj).triggerHandler(event, data);\n    }\n    /*\n     * Now run all the node style event handlers\n     */\n\n\n    var ev = plotObj._ev;\n    if (!ev) return jQueryHandlerValue;\n    var handlers = ev._events[event];\n    if (!handlers) return jQueryHandlerValue; // making sure 'this' is the EventEmitter instance\n\n    function apply(handler) {\n      // The 'once' case, we can't just call handler() as we need\n      // the return value here. So,\n      // - remove handler\n      // - call listener and grab return value!\n      // - stash 'fired' key to not call handler twice\n      if (handler.listener) {\n        ev.removeListener(event, handler.listener);\n\n        if (!handler.fired) {\n          handler.fired = true;\n          return handler.listener.apply(ev, [data]);\n        }\n      } else {\n        return handler.apply(ev, [data]);\n      }\n    } // handlers can be function or an array of functions\n\n\n    handlers = Array.isArray(handlers) ? handlers : [handlers];\n    var i;\n\n    for (i = 0; i < handlers.length - 1; i++) {\n      apply(handlers[i]);\n    } // now call the final handler and collect its value\n\n\n    nodeEventHandlerValue = apply(handlers[i]);\n    /*\n     * Return either the jQuery handler value if it exists or the\n     * nodeEventHandler value. jQuery event value supersedes nodejs\n     * events for backwards compatibility reasons.\n     */\n\n    return jQueryHandlerValue !== undefined ? jQueryHandlerValue : nodeEventHandlerValue;\n  },\n  purge: function purge(plotObj) {\n    delete plotObj._ev;\n    delete plotObj.on;\n    delete plotObj.once;\n    delete plotObj.removeListener;\n    delete plotObj.removeAllListeners;\n    delete plotObj.emit;\n    delete plotObj._ev;\n    delete plotObj._internalEv;\n    delete plotObj._internalOn;\n    delete plotObj._internalOnce;\n    delete plotObj._removeInternalListener;\n    delete plotObj._removeAllInternalListeners;\n    return plotObj;\n  }\n};\nmodule.exports = Events;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Events = require('../../lib/events');\n\nvar throttle = require('../../lib/throttle');\n\nvar getGraphDiv = require('../../lib/dom').getGraphDiv;\n\nvar hoverConstants = require('../fx/constants');\n\nvar unhover = module.exports = {};\n\nunhover.wrapped = function (gd, evt, subplot) {\n  gd = getGraphDiv(gd); // Important, clear any queued hovers\n\n  if (gd._fullLayout) {\n    throttle.clear(gd._fullLayout._uid + hoverConstants.HOVERID);\n  }\n\n  unhover.raw(gd, evt, subplot);\n}; // remove hover effects on mouse out, and emit unhover event\n\n\nunhover.raw = function raw(gd, evt) {\n  var fullLayout = gd._fullLayout;\n  var oldhoverdata = gd._hoverdata;\n  if (!evt) evt = {};\n\n  if (evt.target && Events.triggerHandler(gd, 'plotly_beforehover', evt) === false) {\n    return;\n  }\n\n  fullLayout._hoverlayer.selectAll('g').remove();\n\n  fullLayout._hoverlayer.selectAll('line').remove();\n\n  fullLayout._hoverlayer.selectAll('circle').remove();\n\n  gd._hoverdata = undefined;\n\n  if (evt.target && oldhoverdata) {\n    gd.emit('plotly_unhover', {\n      event: evt,\n      points: oldhoverdata\n    });\n  }\n};","require(\"core-js/modules/es6.array.is-array\");\n\nvar rootPosition = {\n  left: 0,\n  top: 0\n};\nmodule.exports = mouseEventOffset;\n\nfunction mouseEventOffset(ev, target, out) {\n  target = target || ev.currentTarget || ev.srcElement;\n\n  if (!Array.isArray(out)) {\n    out = [0, 0];\n  }\n\n  var cx = ev.clientX || 0;\n  var cy = ev.clientY || 0;\n  var rect = getBoundingClientOffset(target);\n  out[0] = cx - rect.left;\n  out[1] = cy - rect.top;\n  return out;\n}\n\nfunction getBoundingClientOffset(element) {\n  if (element === window || element === document || element === document.body) {\n    return rootPosition;\n  } else {\n    return element.getBoundingClientRect();\n  }\n}","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleTickValueDefaults = require('../../plots/cartesian/tick_value_defaults');\n\nvar handleTickMarkDefaults = require('../../plots/cartesian/tick_mark_defaults');\n\nvar handleTickLabelDefaults = require('../../plots/cartesian/tick_label_defaults');\n\nvar attributes = require('./attributes');\n\nmodule.exports = function colorbarDefaults(containerIn, containerOut, layout) {\n  var colorbarOut = Template.newContainer(containerOut, 'colorbar');\n  var colorbarIn = containerIn.colorbar || {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(colorbarIn, colorbarOut, attributes, attr, dflt);\n  }\n\n  var thicknessmode = coerce('thicknessmode');\n  coerce('thickness', thicknessmode === 'fraction' ? 30 / (layout.width - layout.margin.l - layout.margin.r) : 30);\n  var lenmode = coerce('lenmode');\n  coerce('len', lenmode === 'fraction' ? 1 : layout.height - layout.margin.t - layout.margin.b);\n  coerce('x');\n  coerce('xanchor');\n  coerce('xpad');\n  coerce('y');\n  coerce('yanchor');\n  coerce('ypad');\n  Lib.noneOrAll(colorbarIn, colorbarOut, ['x', 'y']);\n  coerce('outlinecolor');\n  coerce('outlinewidth');\n  coerce('bordercolor');\n  coerce('borderwidth');\n  coerce('bgcolor');\n  handleTickValueDefaults(colorbarIn, colorbarOut, coerce, 'linear');\n  var opts = {\n    outerTicks: false,\n    font: layout.font\n  };\n  handleTickLabelDefaults(colorbarIn, colorbarOut, coerce, 'linear', opts);\n  handleTickMarkDefaults(colorbarIn, colorbarOut, coerce, 'linear', opts);\n  coerce('title.text', layout._dfltTitle.colorbar);\n  Lib.coerceFont(coerce, 'title.font', layout.font);\n  coerce('title.side');\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar isPlainObject = require('./is_plain_object.js');\n\nvar isArray = Array.isArray;\n\nfunction primitivesLoopSplice(source, target) {\n  var i, value;\n\n  for (i = 0; i < source.length; i++) {\n    value = source[i];\n\n    if (value !== null && typeof value === 'object') {\n      return false;\n    }\n\n    if (value !== void 0) {\n      target[i] = value;\n    }\n  }\n\n  return true;\n}\n\nexports.extendFlat = function () {\n  return _extend(arguments, false, false, false);\n};\n\nexports.extendDeep = function () {\n  return _extend(arguments, true, false, false);\n};\n\nexports.extendDeepAll = function () {\n  return _extend(arguments, true, true, false);\n};\n\nexports.extendDeepNoArrays = function () {\n  return _extend(arguments, true, false, true);\n};\n/*\n * Inspired by https://github.com/justmoon/node-extend/blob/master/index.js\n * All credit to the jQuery authors for perfecting this amazing utility.\n *\n * API difference with jQuery version:\n * - No optional boolean (true -> deep extend) first argument,\n *   use `extendFlat` for first-level only extend and\n *   use `extendDeep` for a deep extend.\n *\n * Other differences with jQuery version:\n * - Uses a modern (and faster) isPlainObject routine.\n * - Expected to work with object {} and array [] arguments only.\n * - Does not check for circular structure.\n *   FYI: jQuery only does a check across one level.\n *   Warning: this might result in infinite loops.\n *\n */\n\n\nfunction _extend(inputs, isDeep, keepAllKeys, noArrayCopies) {\n  var target = inputs[0];\n  var length = inputs.length;\n  var input, key, src, copy, copyIsArray, clone, allPrimitives; // TODO does this do the right thing for typed arrays?\n\n  if (length === 2 && isArray(target) && isArray(inputs[1]) && target.length === 0) {\n    allPrimitives = primitivesLoopSplice(inputs[1], target);\n\n    if (allPrimitives) {\n      return target;\n    } else {\n      target.splice(0, target.length); // reset target and continue to next block\n    }\n  }\n\n  for (var i = 1; i < length; i++) {\n    input = inputs[i];\n\n    for (key in input) {\n      src = target[key];\n      copy = input[key];\n\n      if (noArrayCopies && isArray(copy)) {\n        // Stop early and just transfer the array if array copies are disallowed:\n        target[key] = copy;\n      } else if (isDeep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n        // recurse if we're merging plain objects or arrays\n        if (copyIsArray) {\n          copyIsArray = false;\n          clone = src && isArray(src) ? src : [];\n        } else {\n          clone = src && isPlainObject(src) ? src : {};\n        } // never move original objects, clone them\n\n\n        target[key] = _extend([clone, copy], isDeep, keepAllKeys, noArrayCopies);\n      } else if (typeof copy !== 'undefined' || keepAllKeys) {\n        // don't bring in undefined values, except for extendDeepAll\n        target[key] = copy;\n      }\n    }\n  }\n\n  return target;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nmodule.exports = {\n  attributes: require('plotly.js/src/traces/sankey/attributes'),\n  supplyDefaults: require('plotly.js/src/traces/sankey/defaults'),\n  calc: require('plotly.js/src/traces/sankey/calc'),\n  plot: require('./plot'),\n\n  moduleType: 'trace',\n  name: 'sankey',\n  basePlotModule: require('./base_plot'),\n  selectPoints: require('plotly.js/src/traces/sankey/select.js'),\n  categories: ['noOpacity'],\n  meta: {\n    description: [\n      'Sankey plots for network flow data analysis.',\n      'The nodes are specified in `nodes` and the links between sources and targets in `links`.',\n      'The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used.'\n    ].join(' ')\n  }\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar constants = require('./constants');\n\nvar fontAttrs = require('../../plots/font_attributes')({\n  editType: 'none',\n  description: 'Sets the default hover label font used by all traces on the graph.'\n});\n\nfontAttrs.family.dflt = constants.HOVERFONT;\nfontAttrs.size.dflt = constants.HOVERFONTSIZE;\nmodule.exports = {\n  clickmode: {\n    valType: 'flaglist',\n    role: 'info',\n    flags: ['event', 'select'],\n    dflt: 'event',\n    editType: 'plot',\n    extras: ['none'],\n    description: ['Determines the mode of single click interactions.', '*event* is the default value and emits the `plotly_click`', 'event. In addition this mode emits the `plotly_selected` event', 'in drag modes *lasso* and *select*, but with no event data attached', '(kept for compatibility reasons).', 'The *select* flag enables selecting single', 'data points via click. This mode also supports persistent selections,', 'meaning that pressing Shift while clicking, adds to / subtracts from an', 'existing selection. *select* with `hovermode`: *x* can be confusing, consider', 'explicitly setting `hovermode`: *closest* when using this feature.', 'Selection events are sent accordingly as long as *event* flag is set as well.', 'When the *event* flag is missing, `plotly_click` and `plotly_selected`', 'events are not fired.'].join(' ')\n  },\n  dragmode: {\n    valType: 'enumerated',\n    role: 'info',\n    values: ['zoom', 'pan', 'select', 'lasso', 'orbit', 'turntable', false],\n    dflt: 'zoom',\n    editType: 'modebar',\n    description: ['Determines the mode of drag interactions.', '*select* and *lasso* apply only to scatter traces with', 'markers or text. *orbit* and *turntable* apply only to', '3D scenes.'].join(' ')\n  },\n  hovermode: {\n    valType: 'enumerated',\n    role: 'info',\n    values: ['x', 'y', 'closest', false],\n    editType: 'modebar',\n    description: ['Determines the mode of hover interactions.', 'If `clickmode` includes the *select* flag,', '`hovermode` defaults to *closest*.', 'If `clickmode` lacks the *select* flag,', 'it defaults to *x* or *y* (depending on the trace\\'s', '`orientation` value) for plots based on', 'cartesian coordinates. For anything else the default', 'value is *closest*.'].join(' ')\n  },\n  hoverdistance: {\n    valType: 'integer',\n    min: -1,\n    dflt: 20,\n    role: 'info',\n    editType: 'none',\n    description: ['Sets the default distance (in pixels) to look for data', 'to add hover labels (-1 means no cutoff, 0 means no looking for data).', 'This is only a real distance for hovering on point-like objects,', 'like scatter points. For area-like objects (bars, scatter fills, etc)', 'hovering is on inside the area and off outside, but these objects', 'will not supersede hover on point-like objects in case of conflict.'].join(' ')\n  },\n  spikedistance: {\n    valType: 'integer',\n    min: -1,\n    dflt: 20,\n    role: 'info',\n    editType: 'none',\n    description: ['Sets the default distance (in pixels) to look for data to draw', 'spikelines to (-1 means no cutoff, 0 means no looking for data).', 'As with hoverdistance, distance does not apply to area-like objects.', 'In addition, some objects can be hovered on but will not generate', 'spikelines, such as scatter fills.'].join(' ')\n  },\n  hoverlabel: {\n    bgcolor: {\n      valType: 'color',\n      role: 'style',\n      editType: 'none',\n      description: ['Sets the background color of all hover labels on graph'].join(' ')\n    },\n    bordercolor: {\n      valType: 'color',\n      role: 'style',\n      editType: 'none',\n      description: ['Sets the border color of all hover labels on graph.'].join(' ')\n    },\n    font: fontAttrs,\n    align: {\n      valType: 'enumerated',\n      values: ['left', 'right', 'auto'],\n      dflt: 'auto',\n      role: 'style',\n      editType: 'none',\n      description: ['Sets the horizontal alignment of the text content within hover label box.', 'Has an effect only if the hover label text spans more two or more lines'].join(' ')\n    },\n    namelength: {\n      valType: 'integer',\n      min: -1,\n      dflt: 15,\n      role: 'style',\n      editType: 'none',\n      description: ['Sets the default length (in number of characters) of the trace name in', 'the hover labels for all traces. -1 shows the whole name', 'regardless of length. 0-3 shows the first 0-3 characters, and', 'an integer >3 will show the whole name if it is less than that', 'many characters, but if it is longer, will truncate to', '`namelength - 3` characters and add an ellipsis.'].join(' ')\n    },\n    editType: 'none'\n  },\n  selectdirection: {\n    valType: 'enumerated',\n    role: 'info',\n    values: ['h', 'v', 'd', 'any'],\n    dflt: 'any',\n    description: ['When \"dragmode\" is set to \"select\", this limits the selection of the drag to', 'horizontal, vertical or diagonal. \"h\" only allows horizontal selection,', '\"v\" only vertical, \"d\" only diagonal and \"any\" sets no limit.'].join(' '),\n    editType: 'none'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar FROM_BL = require('../../constants/alignment').FROM_BL;\n\nmodule.exports = function scaleZoom(ax, factor, centerFraction) {\n  if (centerFraction === undefined) {\n    centerFraction = FROM_BL[ax.constraintoward || 'center'];\n  }\n\n  var rangeLinear = [ax.r2l(ax.range[0]), ax.r2l(ax.range[1])];\n  var center = rangeLinear[0] + (rangeLinear[1] - rangeLinear[0]) * centerFraction;\n  ax.range = ax._input.range = [ax.l2r(center + (rangeLinear[0] - center) * factor), ax.l2r(center + (rangeLinear[1] - center) * factor)];\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar FORMAT_LINK = require('../constants/docs').FORMAT_LINK;\n\nvar DATE_FORMAT_LINK = require('../constants/docs').DATE_FORMAT_LINK;\n\nvar templateFormatStringDescription = ['Variables are inserted using %{variable}, for example \"y: %{y}\".', 'Numbers are formatted using d3-format\\'s syntax %{variable:d3-format}, for example \"Price: %{y:$.2f}\".', FORMAT_LINK, 'for details on the formatting syntax.', 'Dates are formatted using d3-time-format\\'s syntax %{variable|d3-time-format}, for example \"Day: %{2019-01-01|%A}\".', DATE_FORMAT_LINK, 'for details on the date formatting syntax.'].join(' ');\n\nfunction describeVariables(extra) {\n  var descPart = extra.description ? ' ' + extra.description : '';\n  var keys = extra.keys || [];\n\n  if (keys.length > 0) {\n    var quotedKeys = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      quotedKeys[i] = '`' + keys[i] + '`';\n    }\n\n    descPart = descPart + 'Finally, the template string has access to ';\n\n    if (keys.length === 1) {\n      descPart = 'variable ' + quotedKeys[0];\n    } else {\n      descPart = 'variables ' + quotedKeys.slice(0, -1).join(', ') + ' and ' + quotedKeys.slice(-1) + '.';\n    }\n  }\n\n  return descPart;\n}\n\nexports.hovertemplateAttrs = function (opts, extra) {\n  opts = opts || {};\n  extra = extra || {};\n  var descPart = describeVariables(extra);\n  var hovertemplate = {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    editType: opts.editType || 'none',\n    description: ['Template string used for rendering the information that appear on hover box.', 'Note that this will override `hoverinfo`.', templateFormatStringDescription, 'The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plot.ly/javascript/plotlyjs-events/#event-data.', 'Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.', descPart, 'Anything contained in tag `<extra>` is displayed in the secondary box, for example \"<extra>{fullData.name}</extra>\".', 'To hide the secondary box completely, use an empty tag `<extra></extra>`.'].join(' ')\n  };\n\n  if (opts.arrayOk !== false) {\n    hovertemplate.arrayOk = true;\n  }\n\n  return hovertemplate;\n};\n\nexports.texttemplateAttrs = function (opts, extra) {\n  opts = opts || {};\n  extra = extra || {};\n  var descPart = describeVariables(extra);\n  var texttemplate = {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    editType: opts.editType || 'calc',\n    description: ['Template string used for rendering the information text that appear on points.', 'Note that this will override `textinfo`.', templateFormatStringDescription, 'Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.', descPart].join(' ')\n  };\n\n  if (opts.arrayOk !== false) {\n    texttemplate.arrayOk = true;\n  }\n\n  return texttemplate;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nexports.manage = require('./manage');","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/*\n * make a font attribute group\n *\n * @param {object} opts\n *   @param {string}\n *     opts.description: where & how this font is used\n *   @param {optional bool} arrayOk:\n *     should each part (family, size, color) be arrayOk? default false.\n *   @param {string} editType:\n *     the editType for all pieces of this font\n *   @param {optional string} colorEditType:\n *     a separate editType just for color\n *\n * @return {object} attributes object containing {family, size, color} as specified\n */\n\nmodule.exports = function (opts) {\n  var editType = opts.editType;\n  var colorEditType = opts.colorEditType;\n  if (colorEditType === undefined) colorEditType = editType;\n  var attrs = {\n    family: {\n      valType: 'string',\n      role: 'style',\n      noBlank: true,\n      strict: true,\n      editType: editType,\n      description: ['HTML font family - the typeface that will be applied by the web browser.', 'The web browser will only be able to apply a font if it is available on the system', 'which it operates. Provide multiple font families, separated by commas, to indicate', 'the preference in which to apply fonts if they aren\\'t available on the system.', 'The plotly service (at https://plot.ly or on-premise) generates images on a server,', 'where only a select number of', 'fonts are installed and supported.', 'These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,', '*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,', '*PT Sans Narrow*, *Raleway*, *Times New Roman*.'].join(' ')\n    },\n    size: {\n      valType: 'number',\n      role: 'style',\n      min: 1,\n      editType: editType\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      editType: colorEditType\n    },\n    editType: editType,\n    // blank strings so compress_attributes can remove\n    // TODO - that's uber hacky... better solution?\n    description: '' + (opts.description || '') + ''\n  };\n\n  if (opts.arrayOk) {\n    attrs.family.arrayOk = true;\n    attrs.size.arrayOk = true;\n    attrs.color.arrayOk = true;\n  }\n\n  return attrs;\n};","require(\"core-js/modules/es6.array.for-each\");\n\n// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// this is the core work-horse\n//\nvar LinkedList = require('./linked-list');\n\nfunction Intersecter(selfIntersection, eps, buildLog) {\n  // selfIntersection is true/false depending on the phase of the overall algorithm\n  //\n  // segment creation\n  //\n  function segmentNew(start, end) {\n    return {\n      id: buildLog ? buildLog.segmentId() : -1,\n      start: start,\n      end: end,\n      myFill: {\n        above: null,\n        // is there fill above us?\n        below: null // is there fill below us?\n\n      },\n      otherFill: null\n    };\n  }\n\n  function segmentCopy(start, end, seg) {\n    return {\n      id: buildLog ? buildLog.segmentId() : -1,\n      start: start,\n      end: end,\n      myFill: {\n        above: seg.myFill.above,\n        below: seg.myFill.below\n      },\n      otherFill: null\n    };\n  } //\n  // event logic\n  //\n\n\n  var event_root = LinkedList.create();\n\n  function eventCompare(p1_isStart, p1_1, p1_2, p2_isStart, p2_1, p2_2) {\n    // compare the selected points first\n    var comp = eps.pointsCompare(p1_1, p2_1);\n    if (comp !== 0) return comp; // the selected points are the same\n\n    if (eps.pointsSame(p1_2, p2_2)) // if the non-selected points are the same too...\n      return 0; // then the segments are equal\n\n    if (p1_isStart !== p2_isStart) // if one is a start and the other isn't...\n      return p1_isStart ? 1 : -1; // favor the one that isn't the start\n    // otherwise, we'll have to calculate which one is below the other manually\n\n    return eps.pointAboveOrOnLine(p1_2, p2_isStart ? p2_1 : p2_2, // order matters\n    p2_isStart ? p2_2 : p2_1) ? 1 : -1;\n  }\n\n  function eventAdd(ev, other_pt) {\n    event_root.insertBefore(ev, function (here) {\n      // should ev be inserted before here?\n      var comp = eventCompare(ev.isStart, ev.pt, other_pt, here.isStart, here.pt, here.other.pt);\n      return comp < 0;\n    });\n  }\n\n  function eventAddSegmentStart(seg, primary) {\n    var ev_start = LinkedList.node({\n      isStart: true,\n      pt: seg.start,\n      seg: seg,\n      primary: primary,\n      other: null,\n      status: null\n    });\n    eventAdd(ev_start, seg.end);\n    return ev_start;\n  }\n\n  function eventAddSegmentEnd(ev_start, seg, primary) {\n    var ev_end = LinkedList.node({\n      isStart: false,\n      pt: seg.end,\n      seg: seg,\n      primary: primary,\n      other: ev_start,\n      status: null\n    });\n    ev_start.other = ev_end;\n    eventAdd(ev_end, ev_start.pt);\n  }\n\n  function eventAddSegment(seg, primary) {\n    var ev_start = eventAddSegmentStart(seg, primary);\n    eventAddSegmentEnd(ev_start, seg, primary);\n    return ev_start;\n  }\n\n  function eventUpdateEnd(ev, end) {\n    // slides an end backwards\n    //   (start)------------(end)    to:\n    //   (start)---(end)\n    if (buildLog) buildLog.segmentChop(ev.seg, end);\n    ev.other.remove();\n    ev.seg.end = end;\n    ev.other.pt = end;\n    eventAdd(ev.other, ev.pt);\n  }\n\n  function eventDivide(ev, pt) {\n    var ns = segmentCopy(pt, ev.seg.end, ev.seg);\n    eventUpdateEnd(ev, pt);\n    return eventAddSegment(ns, ev.primary);\n  }\n\n  function _calculate(primaryPolyInverted, secondaryPolyInverted) {\n    // if selfIntersection is true then there is no secondary polygon, so that isn't used\n    //\n    // status logic\n    //\n    var status_root = LinkedList.create();\n\n    function statusCompare(ev1, ev2) {\n      var a1 = ev1.seg.start;\n      var a2 = ev1.seg.end;\n      var b1 = ev2.seg.start;\n      var b2 = ev2.seg.end;\n\n      if (eps.pointsCollinear(a1, b1, b2)) {\n        if (eps.pointsCollinear(a2, b1, b2)) return 1; //eventCompare(true, a1, a2, true, b1, b2);\n\n        return eps.pointAboveOrOnLine(a2, b1, b2) ? 1 : -1;\n      }\n\n      return eps.pointAboveOrOnLine(a1, b1, b2) ? 1 : -1;\n    }\n\n    function statusFindSurrounding(ev) {\n      return status_root.findTransition(function (here) {\n        var comp = statusCompare(ev, here.ev);\n        return comp > 0;\n      });\n    }\n\n    function checkIntersection(ev1, ev2) {\n      // returns the segment equal to ev1, or false if nothing equal\n      var seg1 = ev1.seg;\n      var seg2 = ev2.seg;\n      var a1 = seg1.start;\n      var a2 = seg1.end;\n      var b1 = seg2.start;\n      var b2 = seg2.end;\n      if (buildLog) buildLog.checkIntersection(seg1, seg2);\n      var i = eps.linesIntersect(a1, a2, b1, b2);\n\n      if (i === false) {\n        // segments are parallel or coincident\n        // if points aren't collinear, then the segments are parallel, so no intersections\n        if (!eps.pointsCollinear(a1, a2, b1)) return false; // otherwise, segments are on top of each other somehow (aka coincident)\n\n        if (eps.pointsSame(a1, b2) || eps.pointsSame(a2, b1)) return false; // segments touch at endpoints... no intersection\n\n        var a1_equ_b1 = eps.pointsSame(a1, b1);\n        var a2_equ_b2 = eps.pointsSame(a2, b2);\n        if (a1_equ_b1 && a2_equ_b2) return ev2; // segments are exactly equal\n\n        var a1_between = !a1_equ_b1 && eps.pointBetween(a1, b1, b2);\n        var a2_between = !a2_equ_b2 && eps.pointBetween(a2, b1, b2); // handy for debugging:\n        // buildLog.log({\n        //\ta1_equ_b1: a1_equ_b1,\n        //\ta2_equ_b2: a2_equ_b2,\n        //\ta1_between: a1_between,\n        //\ta2_between: a2_between\n        // });\n\n        if (a1_equ_b1) {\n          if (a2_between) {\n            //  (a1)---(a2)\n            //  (b1)----------(b2)\n            eventDivide(ev2, a2);\n          } else {\n            //  (a1)----------(a2)\n            //  (b1)---(b2)\n            eventDivide(ev1, b2);\n          }\n\n          return ev2;\n        } else if (a1_between) {\n          if (!a2_equ_b2) {\n            // make a2 equal to b2\n            if (a2_between) {\n              //         (a1)---(a2)\n              //  (b1)-----------------(b2)\n              eventDivide(ev2, a2);\n            } else {\n              //         (a1)----------(a2)\n              //  (b1)----------(b2)\n              eventDivide(ev1, b2);\n            }\n          } //         (a1)---(a2)\n          //  (b1)----------(b2)\n\n\n          eventDivide(ev2, a1);\n        }\n      } else {\n        // otherwise, lines intersect at i.pt, which may or may not be between the endpoints\n        // is A divided between its endpoints? (exclusive)\n        if (i.alongA === 0) {\n          if (i.alongB === -1) // yes, at exactly b1\n            eventDivide(ev1, b1);else if (i.alongB === 0) // yes, somewhere between B's endpoints\n            eventDivide(ev1, i.pt);else if (i.alongB === 1) // yes, at exactly b2\n            eventDivide(ev1, b2);\n        } // is B divided between its endpoints? (exclusive)\n\n\n        if (i.alongB === 0) {\n          if (i.alongA === -1) // yes, at exactly a1\n            eventDivide(ev2, a1);else if (i.alongA === 0) // yes, somewhere between A's endpoints (exclusive)\n            eventDivide(ev2, i.pt);else if (i.alongA === 1) // yes, at exactly a2\n            eventDivide(ev2, a2);\n        }\n      }\n\n      return false;\n    } //\n    // main event loop\n    //\n\n\n    var segments = [];\n\n    while (!event_root.isEmpty()) {\n      var ev = event_root.getHead();\n      if (buildLog) buildLog.vert(ev.pt[0]);\n\n      if (ev.isStart) {\n        var checkBothIntersections = function checkBothIntersections() {\n          if (above) {\n            var eve = checkIntersection(ev, above);\n            if (eve) return eve;\n          }\n\n          if (below) return checkIntersection(ev, below);\n          return false;\n        };\n\n        if (buildLog) buildLog.segmentNew(ev.seg, ev.primary);\n        var surrounding = statusFindSurrounding(ev);\n        var above = surrounding.before ? surrounding.before.ev : null;\n        var below = surrounding.after ? surrounding.after.ev : null;\n\n        if (buildLog) {\n          buildLog.tempStatus(ev.seg, above ? above.seg : false, below ? below.seg : false);\n        }\n\n        var eve = checkBothIntersections();\n\n        if (eve) {\n          // ev and eve are equal\n          // we'll keep eve and throw away ev\n          // merge ev.seg's fill information into eve.seg\n          if (selfIntersection) {\n            var toggle; // are we a toggling edge?\n\n            if (ev.seg.myFill.below === null) toggle = true;else toggle = ev.seg.myFill.above !== ev.seg.myFill.below; // merge two segments that belong to the same polygon\n            // think of this as sandwiching two segments together, where `eve.seg` is\n            // the bottom -- this will cause the above fill flag to toggle\n\n            if (toggle) eve.seg.myFill.above = !eve.seg.myFill.above;\n          } else {\n            // merge two segments that belong to different polygons\n            // each segment has distinct knowledge, so no special logic is needed\n            // note that this can only happen once per segment in this phase, because we\n            // are guaranteed that all self-intersections are gone\n            eve.seg.otherFill = ev.seg.myFill;\n          }\n\n          if (buildLog) buildLog.segmentUpdate(eve.seg);\n          ev.other.remove();\n          ev.remove();\n        }\n\n        if (event_root.getHead() !== ev) {\n          // something was inserted before us in the event queue, so loop back around and\n          // process it before continuing\n          if (buildLog) buildLog.rewind(ev.seg);\n          continue;\n        } //\n        // calculate fill flags\n        //\n\n\n        if (selfIntersection) {\n          var toggle; // are we a toggling edge?\n\n          if (ev.seg.myFill.below === null) // if we are a new segment...\n            toggle = true; // then we toggle\n          else // we are a segment that has previous knowledge from a division\n            toggle = ev.seg.myFill.above !== ev.seg.myFill.below; // calculate toggle\n          // next, calculate whether we are filled below us\n\n          if (!below) {\n            // if nothing is below us...\n            // we are filled below us if the polygon is inverted\n            ev.seg.myFill.below = primaryPolyInverted;\n          } else {\n            // otherwise, we know the answer -- it's the same if whatever is below\n            // us is filled above it\n            ev.seg.myFill.below = below.seg.myFill.above;\n          } // since now we know if we're filled below us, we can calculate whether\n          // we're filled above us by applying toggle to whatever is below us\n\n\n          if (toggle) ev.seg.myFill.above = !ev.seg.myFill.below;else ev.seg.myFill.above = ev.seg.myFill.below;\n        } else {\n          // now we fill in any missing transition information, since we are all-knowing\n          // at this point\n          if (ev.seg.otherFill === null) {\n            // if we don't have other information, then we need to figure out if we're\n            // inside the other polygon\n            var inside;\n\n            if (!below) {\n              // if nothing is below us, then we're inside if the other polygon is\n              // inverted\n              inside = ev.primary ? secondaryPolyInverted : primaryPolyInverted;\n            } else {\n              // otherwise, something is below us\n              // so copy the below segment's other polygon's above\n              if (ev.primary === below.primary) inside = below.seg.otherFill.above;else inside = below.seg.myFill.above;\n            }\n\n            ev.seg.otherFill = {\n              above: inside,\n              below: inside\n            };\n          }\n        }\n\n        if (buildLog) {\n          buildLog.status(ev.seg, above ? above.seg : false, below ? below.seg : false);\n        } // insert the status and remember it for later removal\n\n\n        ev.other.status = surrounding.insert(LinkedList.node({\n          ev: ev\n        }));\n      } else {\n        var st = ev.status;\n\n        if (st === null) {\n          throw new Error('PolyBool: Zero-length segment detected; your epsilon is ' + 'probably too small or too large');\n        } // removing the status will create two new adjacent edges, so we'll need to check\n        // for those\n\n\n        if (status_root.exists(st.prev) && status_root.exists(st.next)) checkIntersection(st.prev.ev, st.next.ev);\n        if (buildLog) buildLog.statusRemove(st.ev.seg); // remove the status\n\n        st.remove(); // if we've reached this point, we've calculated everything there is to know, so\n        // save the segment for reporting\n\n        if (!ev.primary) {\n          // make sure `seg.myFill` actually points to the primary polygon though\n          var s = ev.seg.myFill;\n          ev.seg.myFill = ev.seg.otherFill;\n          ev.seg.otherFill = s;\n        }\n\n        segments.push(ev.seg);\n      } // remove the event and continue\n\n\n      event_root.getHead().remove();\n    }\n\n    if (buildLog) buildLog.done();\n    return segments;\n  } // return the appropriate API depending on what we're doing\n\n\n  if (!selfIntersection) {\n    // performing combination of polygons, so only deal with already-processed segments\n    return {\n      calculate: function calculate(segments1, inverted1, segments2, inverted2) {\n        // segmentsX come from the self-intersection API, or this API\n        // invertedX is whether we treat that list of segments as an inverted polygon or not\n        // returns segments that can be used for further operations\n        segments1.forEach(function (seg) {\n          eventAddSegment(segmentCopy(seg.start, seg.end, seg), true);\n        });\n        segments2.forEach(function (seg) {\n          eventAddSegment(segmentCopy(seg.start, seg.end, seg), false);\n        });\n        return _calculate(inverted1, inverted2);\n      }\n    };\n  } // otherwise, performing self-intersection, so deal with regions\n\n\n  return {\n    addRegion: function addRegion(region) {\n      // regions are a list of points:\n      //  [ [0, 0], [100, 0], [50, 100] ]\n      // you can add multiple regions before running calculate\n      var pt1;\n      var pt2 = region[region.length - 1];\n\n      for (var i = 0; i < region.length; i++) {\n        pt1 = pt2;\n        pt2 = region[i];\n        var forward = eps.pointsCompare(pt1, pt2);\n        if (forward === 0) // points are equal, so we have a zero-length segment\n          continue; // just skip it\n\n        eventAddSegment(segmentNew(forward < 0 ? pt1 : pt2, forward < 0 ? pt2 : pt1), true);\n      }\n    },\n    calculate: function calculate(inverted) {\n      // is the polygon inverted?\n      // returns segments\n      return _calculate(inverted, false);\n    }\n  };\n}\n\nmodule.exports = Intersecter;","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar d3 = require('d3');\nvar render = require('./render');\nvar Fx = require('plotly.js/src/components/fx');\nvar Color = require('plotly.js/src/components/color');\nvar Lib = require('plotly.js/src/lib');\nvar cn = require('plotly.js/src/traces/sankey/constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) { return d !== ''; }\n\nfunction ownTrace(selection, d) {\n  return selection.filter(function (s) { return s.key === d.traceId; });\n}\n\nfunction makeTranslucent(element, alpha) {\n  d3.select(element)\n    .select('path')\n    .style('fill-opacity', alpha);\n  d3.select(element)\n    .select('rect')\n    .style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n  d3.select(element)\n    .select('text.name')\n    .style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n  return function (l) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction relatedNodes(l) {\n  return function (d) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkNonHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (l) {\n    if (!l.link.concentrationscale) {\n      return 0.4;\n    }\n  });\n\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (l) {\n        if (!l.link.concentrationscale) {\n          return 0.4;\n        }\n      });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeHoveredStyle);\n  }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll(cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeNonHoveredStyle);\n  }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n  var labelOpts = trace.hoverlabel || {};\n  var val = Lib.nestedProperty(labelOpts, attr).get();\n  return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._paper;\n  var size = fullLayout._size;\n\n  // stash initial view\n  for (var i = 0; i < gd._fullData.length; i++) {\n    if (!gd._fullData[i].visible) continue;\n    if (gd._fullData[i].type !== cn.sankey) continue;\n    if (!gd._fullData[i]._viewInitial) {\n      var node = gd._fullData[i].node;\n      gd._fullData[i]._viewInitial = {\n        node: {\n          groups: node.groups.slice(),\n          x: node.x.slice(),\n          y: node.y.slice()\n        }\n      };\n    }\n  }\n\n  var linkSelect = function (element, d) {\n    var evt = d.link;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    Fx.click(gd, { target: true });\n  };\n\n  var linkHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n  };\n\n  var sourceLabel = _(gd, 'source:') + ' ';\n  var targetLabel = _(gd, 'target:') + ' ';\n  var concentrationLabel = _(gd, 'concentration:') + ' ';\n  var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n  var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n  var linkHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.link.trace.link;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n\n    var hoverItems = [];\n\n    function hoverCenterPosition(link) {\n      var hoverCenterX, hoverCenterY;\n      if (link.circular) {\n        hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n        hoverCenterY = link.circularPathData.verticalFullExtent;\n      } else {\n        hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n        hoverCenterY = (link.y0 + link.y1) / 2;\n      }\n      var center = [hoverCenterX, hoverCenterY];\n      if (link.trace.orientation === 'v') center.reverse();\n      center[0] += d.parent.translateX;\n      center[1] += d.parent.translateY;\n      return center;\n    }\n\n    // For each related links, create a hoverItem\n    var anchorIndex = 0;\n    for (var i = 0; i < d.flow.links.length; i++) {\n      var link = d.flow.links[i];\n      if (gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n      if (d.link.pointNumber === link.pointNumber) anchorIndex = i;\n      link.fullData = link.trace;\n      obj = d.link.trace.link;\n      var hoverCenter = hoverCenterPosition(link);\n      var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(link.value) + d.valueSuffix };\n\n      hoverItems.push({\n        x: hoverCenter[0],\n        y: hoverCenter[1],\n        name: hovertemplateLabels.valueLabel,\n        text: [\n          link.label || '',\n          sourceLabel + link.source.label,\n          targetLabel + link.target.label,\n          link.concentrationscale ? concentrationLabel + d3.format('%0.2f')(link.flow.labelConcentration) : ''\n        ].filter(renderableValuePresent).join('<br>'),\n        color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n        borderColor: castHoverOption(obj, 'bordercolor'),\n        fontFamily: castHoverOption(obj, 'font.family'),\n        fontSize: castHoverOption(obj, 'font.size'),\n        fontColor: castHoverOption(obj, 'font.color'),\n        nameLength: castHoverOption(obj, 'namelength'),\n        textAlign: castHoverOption(obj, 'align'),\n        idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n\n        hovertemplate: obj.hovertemplate,\n        hovertemplateLabels: hovertemplateLabels,\n        eventData: [link]\n      });\n    }\n\n    var tooltips = Fx.loneHover(hoverItems, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd,\n      anchorIndex: anchorIndex\n    });\n\n    tooltips.each(function () {\n      var tooltip = this;\n      if (!d.link.concentrationscale) {\n        makeTranslucent(tooltip, 0.65);\n      }\n      makeTextContrasty(tooltip);\n    });\n  };\n\n  var linkUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  var nodeSelect = function (element, d, sankey) {\n    var evt = d.node;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    Fx.click(gd, { target: true });\n  };\n\n  var nodeHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n  };\n\n  var nodeHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n\n    var obj = d.node.trace.node;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n    var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n    var boundingBox = nodeRect.node().getBoundingClientRect();\n    var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n    var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n    var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n\n    var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix };\n    d.node.fullData = d.node.trace;\n\n    var tooltip = Fx.loneHover({\n      x0: hoverCenterX0,\n      x1: hoverCenterX1,\n      y: hoverCenterY,\n      name: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix,\n      text: [\n        d.node.label,\n        incomingLabel + d.node.targetLinks.length,\n        outgoingLabel + d.node.sourceLinks.length\n      ].filter(renderableValuePresent).join('<br>'),\n      color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n      borderColor: castHoverOption(obj, 'bordercolor'),\n      fontFamily: castHoverOption(obj, 'font.family'),\n      fontSize: castHoverOption(obj, 'font.size'),\n      fontColor: castHoverOption(obj, 'font.color'),\n      nameLength: castHoverOption(obj, 'namelength'),\n      textAlign: castHoverOption(obj, 'align'),\n      idealAlign: 'left',\n\n      hovertemplate: obj.hovertemplate,\n      hovertemplateLabels: hovertemplateLabels,\n      eventData: [d.node]\n    }, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd\n    });\n\n    makeTranslucent(tooltip, 0.85);\n    makeTextContrasty(tooltip);\n  };\n\n  var nodeUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  render(\n    gd,\n    svg,\n    calcData,\n    {\n      width: size.w,\n      height: size.h,\n      margin: {\n        t: size.t,\n        r: size.r,\n        b: size.b,\n        l: size.l\n      }\n    },\n    {\n      linkEvents: {\n        hover: linkHover,\n        follow: linkHoverFollow,\n        unhover: linkUnhover,\n        select: linkSelect\n      },\n      nodeEvents: {\n        hover: nodeHover,\n        follow: nodeHoverFollow,\n        unhover: nodeUnhover,\n        select: nodeSelect\n      }\n    }\n  );\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar Lib = require('../../lib');\n\nvar layoutAttributes = require('./layout_attributes');\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut, fullData) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(layoutIn, layoutOut, layoutAttributes, attr, dflt);\n  }\n\n  var clickmode = coerce('clickmode');\n  var dragMode = coerce('dragmode');\n  if (dragMode === 'select') coerce('selectdirection');\n  var hovermodeDflt;\n\n  if (layoutOut._has('cartesian')) {\n    if (clickmode.indexOf('select') > -1) {\n      hovermodeDflt = 'closest';\n    } else {\n      // flag for 'horizontal' plots:\n      // determines the state of the mode bar 'compare' hovermode button\n      layoutOut._isHoriz = isHoriz(fullData, layoutOut);\n      hovermodeDflt = layoutOut._isHoriz ? 'y' : 'x';\n    }\n  } else hovermodeDflt = 'closest';\n\n  var hoverMode = coerce('hovermode', hovermodeDflt);\n\n  if (hoverMode) {\n    coerce('hoverdistance');\n    coerce('spikedistance');\n  } // if only mapbox or geo subplots is present on graph,\n  // reset 'zoom' dragmode to 'pan' until 'zoom' is implemented,\n  // so that the correct modebar button is active\n\n\n  var hasMapbox = layoutOut._has('mapbox');\n\n  var hasGeo = layoutOut._has('geo');\n\n  var len = layoutOut._basePlotModules.length;\n\n  if (layoutOut.dragmode === 'zoom' && ((hasMapbox || hasGeo) && len === 1 || hasMapbox && hasGeo && len === 2)) {\n    layoutOut.dragmode = 'pan';\n  }\n};\n\nfunction isHoriz(fullData, fullLayout) {\n  var stackOpts = fullLayout._scatterStackOpts || {};\n\n  for (var i = 0; i < fullData.length; i++) {\n    var trace = fullData[i];\n    var subplot = trace.xaxis + trace.yaxis;\n    var subplotStackOpts = stackOpts[subplot] || {};\n    var groupOpts = subplotStackOpts[trace.stackgroup] || {};\n\n    if (trace.orientation !== 'h' && groupOpts.orientation !== 'h') {\n      return false;\n    }\n  }\n\n  return true;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nvar d3 = require('d3');\n\nvar Registry = require('../registry');\n\nvar Plots = require('../plots/plots');\n\nvar Lib = require('../lib');\n\nvar clearGlCanvases = require('../lib/clear_gl_canvases');\n\nvar Color = require('../components/color');\n\nvar Drawing = require('../components/drawing');\n\nvar Titles = require('../components/titles');\n\nvar ModeBar = require('../components/modebar');\n\nvar Axes = require('../plots/cartesian/axes');\n\nvar alignmentConstants = require('../constants/alignment');\n\nvar axisConstraints = require('../plots/cartesian/constraints');\n\nvar enforceAxisConstraints = axisConstraints.enforce;\nvar cleanAxisConstraints = axisConstraints.clean;\n\nvar doAutoRange = require('../plots/cartesian/autorange').doAutoRange;\n\nvar SVG_TEXT_ANCHOR_START = 'start';\nvar SVG_TEXT_ANCHOR_MIDDLE = 'middle';\nvar SVG_TEXT_ANCHOR_END = 'end';\n\nexports.layoutStyles = function (gd) {\n  return Lib.syncOrAsync([Plots.doAutoMargin, lsInner], gd);\n};\n\nfunction overlappingDomain(xDomain, yDomain, domains) {\n  for (var i = 0; i < domains.length; i++) {\n    var existingX = domains[i][0];\n    var existingY = domains[i][1];\n\n    if (existingX[0] >= xDomain[1] || existingX[1] <= xDomain[0]) {\n      continue;\n    }\n\n    if (existingY[0] < yDomain[1] && existingY[1] > yDomain[0]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction lsInner(gd) {\n  var fullLayout = gd._fullLayout;\n  var gs = fullLayout._size;\n  var pad = gs.p;\n  var axList = Axes.list(gd, '', true);\n  var i, subplot, plotinfo, ax, xa, ya;\n\n  fullLayout._paperdiv.style({\n    width: gd._context.responsive && fullLayout.autosize && !gd._context._hasZeroWidth && !gd.layout.width ? '100%' : fullLayout.width + 'px',\n    height: gd._context.responsive && fullLayout.autosize && !gd._context._hasZeroHeight && !gd.layout.height ? '100%' : fullLayout.height + 'px'\n  }).selectAll('.main-svg').call(Drawing.setSize, fullLayout.width, fullLayout.height);\n\n  gd._context.setBackground(gd, fullLayout.paper_bgcolor);\n\n  exports.drawMainTitle(gd);\n  ModeBar.manage(gd); // _has('cartesian') means SVG specifically, not GL2D - but GL2D\n  // can still get here because it makes some of the SVG structure\n  // for shared features like selections.\n\n  if (!fullLayout._has('cartesian')) {\n    return Plots.previousPromises(gd);\n  }\n\n  function getLinePosition(ax, counterAx, side) {\n    var lwHalf = ax._lw / 2;\n\n    if (ax._id.charAt(0) === 'x') {\n      if (!counterAx) return gs.t + gs.h * (1 - (ax.position || 0)) + lwHalf % 1;else if (side === 'top') return counterAx._offset - pad - lwHalf;\n      return counterAx._offset + counterAx._length + pad + lwHalf;\n    }\n\n    if (!counterAx) return gs.l + gs.w * (ax.position || 0) + lwHalf % 1;else if (side === 'right') return counterAx._offset + counterAx._length + pad + lwHalf;\n    return counterAx._offset - pad - lwHalf;\n  } // some preparation of axis position info\n\n\n  for (i = 0; i < axList.length; i++) {\n    ax = axList[i];\n    var counterAx = ax._anchorAxis; // clear axis line positions, to be set in the subplot loop below\n\n    ax._linepositions = {}; // stash crispRounded linewidth so we don't need to pass gd all over the place\n\n    ax._lw = Drawing.crispRound(gd, ax.linewidth, 1); // figure out the main axis line and main mirror line position.\n    // it's easier to follow the logic if we handle these separately from\n    // ax._linepositions, which are only used by mirror=allticks\n    // for non-main-subplot ticks, and mirror=all(ticks)? for zero line\n    // hiding logic\n\n    ax._mainLinePosition = getLinePosition(ax, counterAx, ax.side);\n    ax._mainMirrorPosition = ax.mirror && counterAx ? getLinePosition(ax, counterAx, alignmentConstants.OPPOSITE_SIDE[ax.side]) : null;\n  } // figure out which backgrounds we need to draw,\n  // and in which layers to put them\n\n\n  var lowerBackgroundIDs = [];\n  var backgroundIds = [];\n  var lowerDomains = []; // no need to draw background when paper and plot color are the same color,\n  // activate mode just for large splom (which benefit the most from this\n  // optimization), but this could apply to all cartesian subplots.\n\n  var noNeedForBg = Color.opacity(fullLayout.paper_bgcolor) === 1 && Color.opacity(fullLayout.plot_bgcolor) === 1 && fullLayout.paper_bgcolor === fullLayout.plot_bgcolor;\n\n  for (subplot in fullLayout._plots) {\n    plotinfo = fullLayout._plots[subplot];\n\n    if (plotinfo.mainplot) {\n      // mainplot is a reference to the main plot this one is overlaid on\n      // so if it exists, this is an overlaid plot and we don't need to\n      // give it its own background\n      if (plotinfo.bg) {\n        plotinfo.bg.remove();\n      }\n\n      plotinfo.bg = undefined;\n    } else {\n      var xDomain = plotinfo.xaxis.domain;\n      var yDomain = plotinfo.yaxis.domain;\n      var plotgroup = plotinfo.plotgroup;\n\n      if (overlappingDomain(xDomain, yDomain, lowerDomains)) {\n        var pgNode = plotgroup.node();\n        var plotgroupBg = plotinfo.bg = Lib.ensureSingle(plotgroup, 'rect', 'bg');\n        pgNode.insertBefore(plotgroupBg.node(), pgNode.childNodes[0]);\n        backgroundIds.push(subplot);\n      } else {\n        plotgroup.select('rect.bg').remove();\n        lowerDomains.push([xDomain, yDomain]);\n\n        if (!noNeedForBg) {\n          lowerBackgroundIDs.push(subplot);\n          backgroundIds.push(subplot);\n        }\n      }\n    }\n  } // now create all the lower-layer backgrounds at once now that\n  // we have the list of subplots that need them\n\n\n  var lowerBackgrounds = fullLayout._bgLayer.selectAll('.bg').data(lowerBackgroundIDs);\n\n  lowerBackgrounds.enter().append('rect').classed('bg', true);\n  lowerBackgrounds.exit().remove();\n  lowerBackgrounds.each(function (subplot) {\n    fullLayout._plots[subplot].bg = d3.select(this);\n  }); // style all backgrounds\n\n  for (i = 0; i < backgroundIds.length; i++) {\n    plotinfo = fullLayout._plots[backgroundIds[i]];\n    xa = plotinfo.xaxis;\n    ya = plotinfo.yaxis;\n\n    if (plotinfo.bg) {\n      plotinfo.bg.call(Drawing.setRect, xa._offset - pad, ya._offset - pad, xa._length + 2 * pad, ya._length + 2 * pad).call(Color.fill, fullLayout.plot_bgcolor).style('stroke-width', 0);\n    }\n  }\n\n  if (!fullLayout._hasOnlyLargeSploms) {\n    for (subplot in fullLayout._plots) {\n      plotinfo = fullLayout._plots[subplot];\n      xa = plotinfo.xaxis;\n      ya = plotinfo.yaxis; // Clip so that data only shows up on the plot area.\n\n      var clipId = plotinfo.clipId = 'clip' + fullLayout._uid + subplot + 'plot';\n      var plotClip = Lib.ensureSingleById(fullLayout._clips, 'clipPath', clipId, function (s) {\n        s.classed('plotclip', true).append('rect');\n      });\n      plotinfo.clipRect = plotClip.select('rect').attr({\n        width: xa._length,\n        height: ya._length\n      });\n      Drawing.setTranslate(plotinfo.plot, xa._offset, ya._offset);\n      var plotClipId;\n      var layerClipId;\n\n      if (plotinfo._hasClipOnAxisFalse) {\n        plotClipId = null;\n        layerClipId = clipId;\n      } else {\n        plotClipId = clipId;\n        layerClipId = null;\n      }\n\n      Drawing.setClipUrl(plotinfo.plot, plotClipId, gd); // stash layer clipId value (null or same as clipId)\n      // to DRY up Drawing.setClipUrl calls on trace-module and trace layers\n      // downstream\n\n      plotinfo.layerClipId = layerClipId;\n    }\n  }\n\n  var xLinesXLeft, xLinesXRight, xLinesYBottom, xLinesYTop, leftYLineWidth, rightYLineWidth;\n  var yLinesYBottom, yLinesYTop, yLinesXLeft, yLinesXRight, connectYBottom, connectYTop;\n  var extraSubplot;\n\n  function xLinePath(y) {\n    return 'M' + xLinesXLeft + ',' + y + 'H' + xLinesXRight;\n  }\n\n  function xLinePathFree(y) {\n    return 'M' + xa._offset + ',' + y + 'h' + xa._length;\n  }\n\n  function yLinePath(x) {\n    return 'M' + x + ',' + yLinesYTop + 'V' + yLinesYBottom;\n  }\n\n  function yLinePathFree(x) {\n    return 'M' + x + ',' + ya._offset + 'v' + ya._length;\n  }\n\n  function mainPath(ax, pathFn, pathFnFree) {\n    if (!ax.showline || subplot !== ax._mainSubplot) return '';\n    if (!ax._anchorAxis) return pathFnFree(ax._mainLinePosition);\n    var out = pathFn(ax._mainLinePosition);\n    if (ax.mirror) out += pathFn(ax._mainMirrorPosition);\n    return out;\n  }\n\n  for (subplot in fullLayout._plots) {\n    plotinfo = fullLayout._plots[subplot];\n    xa = plotinfo.xaxis;\n    ya = plotinfo.yaxis;\n    /*\n     * x lines get longer where they meet y lines, to make a crisp corner.\n     * The x lines get the padding (margin.pad) plus the y line width to\n     * fill up the corner nicely. Free x lines are excluded - they always\n     * span exactly the data area of the plot\n     *\n     *  | XXXXX\n     *  | XXXXX\n     *  |\n     *  +------\n     *     x1\n     *    -----\n     *     x2\n     */\n\n    var xPath = 'M0,0';\n\n    if (shouldShowLinesOrTicks(xa, subplot)) {\n      leftYLineWidth = findCounterAxisLineWidth(xa, 'left', ya, axList);\n      xLinesXLeft = xa._offset - (leftYLineWidth ? pad + leftYLineWidth : 0);\n      rightYLineWidth = findCounterAxisLineWidth(xa, 'right', ya, axList);\n      xLinesXRight = xa._offset + xa._length + (rightYLineWidth ? pad + rightYLineWidth : 0);\n      xLinesYBottom = getLinePosition(xa, ya, 'bottom');\n      xLinesYTop = getLinePosition(xa, ya, 'top'); // save axis line positions for extra ticks to reference\n      // each subplot that gets ticks from \"allticks\" gets an entry:\n      //    [left or bottom, right or top]\n\n      extraSubplot = !xa._anchorAxis || subplot !== xa._mainSubplot;\n\n      if (extraSubplot && (xa.mirror === 'allticks' || xa.mirror === 'all')) {\n        xa._linepositions[subplot] = [xLinesYBottom, xLinesYTop];\n      }\n\n      xPath = mainPath(xa, xLinePath, xLinePathFree);\n\n      if (extraSubplot && xa.showline && (xa.mirror === 'all' || xa.mirror === 'allticks')) {\n        xPath += xLinePath(xLinesYBottom) + xLinePath(xLinesYTop);\n      }\n\n      plotinfo.xlines.style('stroke-width', xa._lw + 'px').call(Color.stroke, xa.showline ? xa.linecolor : 'rgba(0,0,0,0)');\n    }\n\n    plotinfo.xlines.attr('d', xPath);\n    /*\n     * y lines that meet x axes get longer only by margin.pad, because\n     * the x axes fill in the corner space. Free y axes, like free x axes,\n     * always span exactly the data area of the plot\n     *\n     *   |   | XXXX\n     * y2| y1| XXXX\n     *   |   | XXXX\n     *       |\n     *       +-----\n     */\n\n    var yPath = 'M0,0';\n\n    if (shouldShowLinesOrTicks(ya, subplot)) {\n      connectYBottom = findCounterAxisLineWidth(ya, 'bottom', xa, axList);\n      yLinesYBottom = ya._offset + ya._length + (connectYBottom ? pad : 0);\n      connectYTop = findCounterAxisLineWidth(ya, 'top', xa, axList);\n      yLinesYTop = ya._offset - (connectYTop ? pad : 0);\n      yLinesXLeft = getLinePosition(ya, xa, 'left');\n      yLinesXRight = getLinePosition(ya, xa, 'right');\n      extraSubplot = !ya._anchorAxis || subplot !== ya._mainSubplot;\n\n      if (extraSubplot && (ya.mirror === 'allticks' || ya.mirror === 'all')) {\n        ya._linepositions[subplot] = [yLinesXLeft, yLinesXRight];\n      }\n\n      yPath = mainPath(ya, yLinePath, yLinePathFree);\n\n      if (extraSubplot && ya.showline && (ya.mirror === 'all' || ya.mirror === 'allticks')) {\n        yPath += yLinePath(yLinesXLeft) + yLinePath(yLinesXRight);\n      }\n\n      plotinfo.ylines.style('stroke-width', ya._lw + 'px').call(Color.stroke, ya.showline ? ya.linecolor : 'rgba(0,0,0,0)');\n    }\n\n    plotinfo.ylines.attr('d', yPath);\n  }\n\n  Axes.makeClipPaths(gd);\n  return Plots.previousPromises(gd);\n}\n\nfunction shouldShowLinesOrTicks(ax, subplot) {\n  return (ax.ticks || ax.showline) && (subplot === ax._mainSubplot || ax.mirror === 'all' || ax.mirror === 'allticks');\n}\n/*\n * should we draw a line on counterAx at this side of ax?\n * It's assumed that counterAx is known to overlay the subplot we're working on\n * but it may not be its main axis.\n */\n\n\nfunction shouldShowLineThisSide(ax, side, counterAx) {\n  // does counterAx get a line at all?\n  if (!counterAx.showline || !counterAx._lw) return false; // are we drawing *all* lines for counterAx?\n\n  if (counterAx.mirror === 'all' || counterAx.mirror === 'allticks') return true;\n  var anchorAx = counterAx._anchorAxis; // is this a free axis? free axes can only have a subplot side-line with all(ticks)? mirroring\n\n  if (!anchorAx) return false; // in order to handle cases where the user forgot to anchor this axis correctly\n  // (because its default anchor has the same domain on the relevant end)\n  // check whether the relevant position is the same.\n\n  var sideIndex = alignmentConstants.FROM_BL[side];\n\n  if (counterAx.side === side) {\n    return anchorAx.domain[sideIndex] === ax.domain[sideIndex];\n  }\n\n  return counterAx.mirror && anchorAx.domain[1 - sideIndex] === ax.domain[1 - sideIndex];\n}\n/*\n * Is there another axis intersecting `side` end of `ax`?\n * First look at `counterAx` (the axis for this subplot),\n * then at all other potential counteraxes on or overlaying this subplot.\n * Take the line width from the first one that has a line.\n */\n\n\nfunction findCounterAxisLineWidth(ax, side, counterAx, axList) {\n  if (shouldShowLineThisSide(ax, side, counterAx)) {\n    return counterAx._lw;\n  }\n\n  for (var i = 0; i < axList.length; i++) {\n    var axi = axList[i];\n\n    if (axi._mainAxis === counterAx._mainAxis && shouldShowLineThisSide(ax, side, axi)) {\n      return axi._lw;\n    }\n  }\n\n  return 0;\n}\n\nexports.drawMainTitle = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var textAnchor = getMainTitleTextAnchor(fullLayout);\n  var dy = getMainTitleDy(fullLayout);\n  Titles.draw(gd, 'gtitle', {\n    propContainer: fullLayout,\n    propName: 'title.text',\n    placeholder: fullLayout._dfltTitle.plot,\n    attributes: {\n      x: getMainTitleX(fullLayout, textAnchor),\n      y: getMainTitleY(fullLayout, dy),\n      'text-anchor': textAnchor,\n      dy: dy\n    }\n  });\n};\n\nfunction getMainTitleX(fullLayout, textAnchor) {\n  var title = fullLayout.title;\n  var gs = fullLayout._size;\n  var hPadShift = 0;\n\n  if (textAnchor === SVG_TEXT_ANCHOR_START) {\n    hPadShift = title.pad.l;\n  } else if (textAnchor === SVG_TEXT_ANCHOR_END) {\n    hPadShift = -title.pad.r;\n  }\n\n  switch (title.xref) {\n    case 'paper':\n      return gs.l + gs.w * title.x + hPadShift;\n\n    case 'container':\n    default:\n      return fullLayout.width * title.x + hPadShift;\n  }\n}\n\nfunction getMainTitleY(fullLayout, dy) {\n  var title = fullLayout.title;\n  var gs = fullLayout._size;\n  var vPadShift = 0;\n\n  if (dy === '0em' || !dy) {\n    vPadShift = -title.pad.b;\n  } else if (dy === alignmentConstants.CAP_SHIFT + 'em') {\n    vPadShift = title.pad.t;\n  }\n\n  if (title.y === 'auto') {\n    return gs.t / 2;\n  } else {\n    switch (title.yref) {\n      case 'paper':\n        return gs.t + gs.h - gs.h * title.y + vPadShift;\n\n      case 'container':\n      default:\n        return fullLayout.height - fullLayout.height * title.y + vPadShift;\n    }\n  }\n}\n\nfunction getMainTitleTextAnchor(fullLayout) {\n  var title = fullLayout.title;\n  var textAnchor = SVG_TEXT_ANCHOR_MIDDLE;\n\n  if (Lib.isRightAnchor(title)) {\n    textAnchor = SVG_TEXT_ANCHOR_END;\n  } else if (Lib.isLeftAnchor(title)) {\n    textAnchor = SVG_TEXT_ANCHOR_START;\n  }\n\n  return textAnchor;\n}\n\nfunction getMainTitleDy(fullLayout) {\n  var title = fullLayout.title;\n  var dy = '0em';\n\n  if (Lib.isTopAnchor(title)) {\n    dy = alignmentConstants.CAP_SHIFT + 'em';\n  } else if (Lib.isMiddleAnchor(title)) {\n    dy = alignmentConstants.MID_SHIFT + 'em';\n  }\n\n  return dy;\n}\n\nexports.doTraceStyle = function (gd) {\n  var calcdata = gd.calcdata;\n  var editStyleCalls = [];\n  var i;\n\n  for (i = 0; i < calcdata.length; i++) {\n    var cd = calcdata[i];\n    var cd0 = cd[0] || {};\n    var trace = cd0.trace || {};\n\n    var _module = trace._module || {}; // See if we need to do arraysToCalcdata\n    // call it regardless of what change we made, in case\n    // supplyDefaults brought in an array that was already\n    // in gd.data but not in gd._fullData previously\n\n\n    var arraysToCalcdata = _module.arraysToCalcdata;\n    if (arraysToCalcdata) arraysToCalcdata(cd, trace);\n    var editStyle = _module.editStyle;\n    if (editStyle) editStyleCalls.push({\n      fn: editStyle,\n      cd0: cd0\n    });\n  }\n\n  if (editStyleCalls.length) {\n    for (i = 0; i < editStyleCalls.length; i++) {\n      var edit = editStyleCalls[i];\n      edit.fn(gd, edit.cd0);\n    }\n\n    clearGlCanvases(gd);\n    exports.redrawReglTraces(gd);\n  }\n\n  Plots.style(gd);\n  Registry.getComponentMethod('legend', 'draw')(gd);\n  return Plots.previousPromises(gd);\n};\n\nexports.doColorBars = function (gd) {\n  Registry.getComponentMethod('colorbar', 'draw')(gd);\n  return Plots.previousPromises(gd);\n}; // force plot() to redo the layout and replot with the modified layout\n\n\nexports.layoutReplot = function (gd) {\n  var layout = gd.layout;\n  gd.layout = undefined;\n  return Registry.call('plot', gd, '', layout);\n};\n\nexports.doLegend = function (gd) {\n  Registry.getComponentMethod('legend', 'draw')(gd);\n  return Plots.previousPromises(gd);\n};\n\nexports.doTicksRelayout = function (gd) {\n  Axes.draw(gd, 'redraw');\n\n  if (gd._fullLayout._hasOnlyLargeSploms) {\n    Registry.subplotsRegistry.splom.updateGrid(gd);\n    clearGlCanvases(gd);\n    exports.redrawReglTraces(gd);\n  }\n\n  exports.drawMainTitle(gd);\n  return Plots.previousPromises(gd);\n};\n\nexports.doModeBar = function (gd) {\n  var fullLayout = gd._fullLayout;\n  ModeBar.manage(gd);\n\n  for (var i = 0; i < fullLayout._basePlotModules.length; i++) {\n    var updateFx = fullLayout._basePlotModules[i].updateFx;\n    if (updateFx) updateFx(gd);\n  }\n\n  return Plots.previousPromises(gd);\n};\n\nexports.doCamera = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d;\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    var sceneLayout = fullLayout[sceneIds[i]];\n    var scene = sceneLayout._scene;\n    scene.setViewport(sceneLayout);\n  }\n};\n\nexports.drawData = function (gd) {\n  var fullLayout = gd._fullLayout;\n  clearGlCanvases(gd); // loop over the base plot modules present on graph\n\n  var basePlotModules = fullLayout._basePlotModules;\n\n  for (var i = 0; i < basePlotModules.length; i++) {\n    basePlotModules[i].plot(gd);\n  }\n\n  exports.redrawReglTraces(gd); // styling separate from drawing\n\n  Plots.style(gd); // draw components that can be drawn on axes,\n  // and that do not push the margins\n\n  Registry.getComponentMethod('shapes', 'draw')(gd);\n  Registry.getComponentMethod('annotations', 'draw')(gd);\n  Registry.getComponentMethod('images', 'draw')(gd); // Mark the first render as complete\n\n  fullLayout._replotting = false;\n  return Plots.previousPromises(gd);\n}; // Draw (or redraw) all regl-based traces in one go,\n// useful during drag and selection where buffers of targeted traces are updated,\n// but all traces need to be redrawn following clearGlCanvases.\n//\n// Note that _module.plot for regl trace does NOT draw things\n// on the canvas, they only update the buffers.\n// Drawing is perform here.\n//\n// TODO try adding per-subplot option using gl.SCISSOR_TEST for\n// non-overlaying, disjoint subplots.\n//\n// TODO try to include parcoords in here.\n// https://github.com/plotly/plotly.js/issues/3069\n\n\nexports.redrawReglTraces = function (gd) {\n  var fullLayout = gd._fullLayout;\n\n  if (fullLayout._has('regl')) {\n    var fullData = gd._fullData;\n    var cartesianIds = [];\n    var polarIds = [];\n    var i, sp;\n\n    if (fullLayout._hasOnlyLargeSploms) {\n      fullLayout._splomGrid.draw();\n    } // N.B.\n    // - Loop over fullData (not _splomScenes) to preserve splom trace-to-trace ordering\n    // - Fill list if subplot ids (instead of fullLayout._subplots) to handle cases where all traces\n    //   of a given module are `visible !== true`\n\n\n    for (i = 0; i < fullData.length; i++) {\n      var trace = fullData[i];\n\n      if (trace.visible === true && trace._length !== 0) {\n        if (trace.type === 'splom') {\n          fullLayout._splomScenes[trace.uid].draw();\n        } else if (trace.type === 'scattergl') {\n          Lib.pushUnique(cartesianIds, trace.xaxis + trace.yaxis);\n        } else if (trace.type === 'scatterpolargl') {\n          Lib.pushUnique(polarIds, trace.subplot);\n        }\n      }\n    }\n\n    for (i = 0; i < cartesianIds.length; i++) {\n      sp = fullLayout._plots[cartesianIds[i]];\n      if (sp._scene) sp._scene.draw();\n    }\n\n    for (i = 0; i < polarIds.length; i++) {\n      sp = fullLayout[polarIds[i]]._subplot;\n      if (sp._scene) sp._scene.draw();\n    }\n  }\n};\n\nexports.doAutoRangeAndConstraints = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var axList = Axes.list(gd, '', true);\n  var matchGroups = fullLayout._axisMatchGroups || [];\n  var axLookup = {};\n  var ax;\n  var axRng;\n\n  for (var i = 0; i < axList.length; i++) {\n    ax = axList[i];\n    cleanAxisConstraints(gd, ax);\n    doAutoRange(gd, ax);\n    axLookup[ax._id] = 1;\n  }\n\n  enforceAxisConstraints(gd);\n\n  groupLoop: for (var j = 0; j < matchGroups.length; j++) {\n    var group = matchGroups[j];\n    var rng = null;\n    var id;\n\n    for (id in group) {\n      ax = Axes.getFromId(gd, id); // skip over 'missing' axes which do not pass through doAutoRange\n\n      if (!axLookup[ax._id]) continue; // if one axis has autorange false, we're done\n\n      if (ax.autorange === false) continue groupLoop;\n      axRng = Lib.simpleMap(ax.range, ax.r2l);\n\n      if (rng) {\n        if (rng[0] < rng[1]) {\n          rng[0] = Math.min(rng[0], axRng[0]);\n          rng[1] = Math.max(rng[1], axRng[1]);\n        } else {\n          rng[0] = Math.max(rng[0], axRng[0]);\n          rng[1] = Math.min(rng[1], axRng[1]);\n        }\n      } else {\n        rng = axRng;\n      }\n    }\n\n    for (id in group) {\n      ax = Axes.getFromId(gd, id);\n      ax.range = Lib.simpleMap(rng, ax.l2r);\n      ax._input.range = ax.range.slice();\n      ax.setScale();\n    }\n  }\n}; // An initial paint must be completed before these components can be\n// correctly sized and the whole plot re-margined. fullLayout._replotting must\n// be set to false before these will work properly.\n\n\nexports.finalDraw = function (gd) {\n  // TODO: rangesliders really belong in marginPushers but they need to be\n  // drawn after data - can we at least get the margin pushing part separated\n  // out and done earlier?\n  Registry.getComponentMethod('rangeslider', 'draw')(gd); // TODO: rangeselector only needs to be here (in addition to drawMarginPushers)\n  // because the margins need to be fully determined before we can call\n  // autorange and update axis ranges (which rangeselector needs to know which\n  // button is active). Can we break out its automargin step from its draw step?\n\n  Registry.getComponentMethod('rangeselector', 'draw')(gd);\n};\n\nexports.drawMarginPushers = function (gd) {\n  Registry.getComponentMethod('legend', 'draw')(gd);\n  Registry.getComponentMethod('rangeselector', 'draw')(gd);\n  Registry.getComponentMethod('sliders', 'draw')(gd);\n  Registry.getComponentMethod('updatemenus', 'draw')(gd);\n  Registry.getComponentMethod('colorbar', 'draw')(gd);\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\n/**\n * aggNums() returns the result of an aggregate function applied to an array of\n * values, where non-numerical values have been tossed out.\n *\n * @param {function} f - aggregation function (e.g., Math.min)\n * @param {Number} v - initial value (continuing from previous calls)\n *      if there's no continuing value, use null for selector-type\n *      functions (max,min), or 0 for summations\n * @param {Array} a - array to aggregate (may be nested, we will recurse,\n *                    but all elements must have the same dimension)\n * @param {Number} len - maximum length of a to aggregate\n * @return {Number} - result of f applied to a starting from v\n */\n\n\nexports.aggNums = function (f, v, a, len) {\n  var i, b;\n  if (!len || len > a.length) len = a.length;\n  if (!isNumeric(v)) v = false;\n\n  if (isArrayOrTypedArray(a[0])) {\n    b = new Array(len);\n\n    for (i = 0; i < len; i++) {\n      b[i] = exports.aggNums(f, v, a[i]);\n    }\n\n    a = b;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (!isNumeric(v)) v = a[i];else if (isNumeric(a[i])) v = f(+v, +a[i]);\n  }\n\n  return v;\n};\n/**\n * mean & std dev functions using aggNums, so it handles non-numerics nicely\n * even need to use aggNums instead of .length, to toss out non-numerics\n */\n\n\nexports.len = function (data) {\n  return exports.aggNums(function (a) {\n    return a + 1;\n  }, 0, data);\n};\n\nexports.mean = function (data, len) {\n  if (!len) len = exports.len(data);\n  return exports.aggNums(function (a, b) {\n    return a + b;\n  }, 0, data) / len;\n};\n\nexports.midRange = function (numArr) {\n  if (numArr === undefined || numArr.length === 0) return undefined;\n  return (exports.aggNums(Math.max, null, numArr) + exports.aggNums(Math.min, null, numArr)) / 2;\n};\n\nexports.variance = function (data, len, mean) {\n  if (!len) len = exports.len(data);\n  if (!isNumeric(mean)) mean = exports.mean(data, len);\n  return exports.aggNums(function (a, b) {\n    return a + Math.pow(b - mean, 2);\n  }, 0, data) / len;\n};\n\nexports.stdev = function (data, len, mean) {\n  return Math.sqrt(exports.variance(data, len, mean));\n};\n/**\n * median of a finite set of numbers\n * reference page: https://en.wikipedia.org/wiki/Median#Finite_set_of_numbers\n**/\n\n\nexports.median = function (data) {\n  var b = data.slice().sort();\n  return exports.interp(b, 0.5);\n};\n/**\n * interp() computes a percentile (quantile) for a given distribution.\n * We interpolate the distribution (to compute quantiles, we follow method #10 here:\n * http://www.amstat.org/publications/jse/v14n3/langford.html).\n * Typically the index or rank (n * arr.length) may be non-integer.\n * For reference: ends are clipped to the extreme values in the array;\n * For box plots: index you get is half a point too high (see\n * http://en.wikipedia.org/wiki/Percentile#Nearest_rank) but note that this definition\n * indexes from 1 rather than 0, so we subtract 1/2 (instead of add).\n *\n * @param {Array} arr - This array contains the values that make up the distribution.\n * @param {Number} n - Between 0 and 1, n = p/100 is such that we compute the p^th percentile.\n * For example, the 50th percentile (or median) corresponds to n = 0.5\n * @return {Number} - percentile\n */\n\n\nexports.interp = function (arr, n) {\n  if (!isNumeric(n)) throw 'n should be a finite number';\n  n = n * arr.length - 0.5;\n  if (n < 0) return arr[0];\n  if (n > arr.length - 1) return arr[arr.length - 1];\n  var frac = n % 1;\n  return frac * arr[Math.ceil(n)] + (1 - frac) * arr[Math.floor(n)];\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/**\n * Clear responsive handlers (if any).\n *\n * @param {DOM node or object} gd : graph div object\n */\n\nmodule.exports = function clearResponsive(gd) {\n  if (gd._responsiveChartHandler) {\n    window.removeEventListener('resize', gd._responsiveChartHandler);\n    delete gd._responsiveChartHandler;\n  }\n};","import \"core-js/modules/es6.object.create\";\nexport default function (constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n\n  for (var key in definition) {\n    prototype[key] = definition[key];\n  }\n\n  return prototype;\n}","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport define, { extend } from \"./define.js\";\nexport function Color() {}\nvar _darker = 0.7;\nexport { _darker as darker };\n\nvar _brighter = 1 / _darker;\n\nexport { _brighter as brighter };\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\ndefine(Color, color, {\n  copy: function copy(channels) {\n    return Object.assign(new this.constructor(), this, channels);\n  },\n  displayable: function displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n  : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n  : l === 8 ? new Rgb(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n  : l === 4 ? new Rgb(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n  : null // invalid hex\n  ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n  : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n  : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n  : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n  : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n  : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n  : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n  : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb();\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function rgb() {\n    return this;\n  },\n  displayable: function displayable() {\n    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  hex: rgb_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity;\n  a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl();\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n\n  return new Hsl(h, s, l, o.opacity);\n}\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n  },\n  displayable: function displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  formatHsl: function formatHsl() {\n    var a = this.opacity;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\") + (this.h || 0) + \", \" + (this.s || 0) * 100 + \"%, \" + (this.l || 0) * 100 + \"%\" + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n/* From FvD 13.37, CSS Color Module Level 3 */\n\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n}","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1,\n      t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;\n}\nexport default function (values) {\n  var n = values.length - 1;\n  return function (t) {\n    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","import { basis } from \"./basis.js\";\nexport default function (values) {\n  var n = values.length;\n  return function (t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function (t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function (a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}","import { rgb as colorRgb } from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, { gamma } from \"./color.js\";\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function (t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function (colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i,\n        color;\n\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function (t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);","import \"core-js/modules/es6.typed.data-view\";\nexport default function (a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function (t) {\n    for (i = 0; i < n; ++i) {\n      c[i] = a[i] * (1 - t) + b[i] * t;\n    }\n\n    return c;\n  };\n}\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}","import value from \"./value.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) {\n    x[i] = value(a[i], b[i]);\n  }\n\n  for (; i < nb; ++i) {\n    c[i] = b[i];\n  }\n\n  return function (t) {\n    for (i = 0; i < na; ++i) {\n      c[i] = x[i](t);\n    }\n\n    return c;\n  };\n}","export default function (a, b) {\n  var d = new Date();\n  return a = +a, b = +b, function (t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return a * (1 - t) + b * t;\n  };\n}","import value from \"./value.js\";\nexport default function (a, b) {\n  var i = {},\n      c = {},\n      k;\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function (t) {\n    for (k in i) {\n      c[k] = i[k](t);\n    }\n\n    return c;\n  };\n}","import \"core-js/modules/es6.regexp.constructor\";\nimport number from \"./number.js\";\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function () {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function (t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function (a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0,\n      // scan index for next number in b\n  am,\n      // current match in a\n  bm,\n      // current match in b\n  bs,\n      // string preceding current number in b, if any\n  i = -1,\n      // index in s\n  s = [],\n      // string constants and placeholders\n  q = []; // number interpolators\n  // Coerce inputs to strings.\n\n  a = a + \"\", b = b + \"\"; // Interpolate pairs of numbers in a & b.\n\n  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) {\n      // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    if ((am = am[0]) === (bm = bm[0])) {\n      // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else {\n      // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({\n        i: i,\n        x: number(am, bm)\n      });\n    }\n\n    bi = reB.lastIndex;\n  } // Add remains of b.\n\n\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  } // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n\n\n  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n    for (var i = 0, o; i < b; ++i) {\n      s[(o = q[i]).i] = o.x(t);\n    }\n\n    return s.join(\"\");\n  });\n}","import \"core-js/modules/es6.regexp.split\";\nimport decompose, { identity } from \"./decompose.js\";\nvar cssNode, cssRoot, cssView, svgNode;\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { color } from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport { genericArray } from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  var t = typeof b,\n      c;\n  return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? number : t === \"string\" ? (c = color(b)) ? (b = c, rgb) : string : b instanceof color ? rgb : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : number)(a, b);\n}","export default function (range) {\n  var n = range.length;\n  return function (t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}","import { hue } from \"./color.js\";\nexport default function (a, b) {\n  var i = hue(+a, +b);\n  return function (t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}","var degrees = 180 / Math.PI;\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\nexport default function (a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}","import number from \"../number.js\";\nimport { parseCss, parseSvg } from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360;else if (b - a > 180) a += 360; // shortest path\n\n      q.push({\n        i: s.push(pop(s) + \"rotate(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({\n        i: s.push(pop(s) + \"skewX(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function (a, b) {\n    var s = [],\n        // string constants and placeholders\n    q = []; // number interpolators\n\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n\n    return function (t) {\n      var i = -1,\n          n = q.length,\n          o;\n\n      while (++i < n) {\n        s[(o = q[i]).i] = o.x(t);\n      }\n\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n} // p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\n\n\nexport default function (p0, p1) {\n  var ux0 = p0[0],\n      uy0 = p0[1],\n      w0 = p0[2],\n      ux1 = p1[0],\n      uy1 = p1[1],\n      w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S; // Special case for u0  u1.\n\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n\n    i = function i(t) {\n      return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(rho * t * S)];\n    };\n  } // General case.\n  else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n\n      i = function i(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / cosh(rho * s + r0)];\n      };\n    }\n\n  i.duration = S * 1000;\n  return i;\n}","import { hsl as colorHsl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hsl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\"; // https://observablehq.com/@mbostock/lab-and-rgb\n\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn),\n      x,\n      z;\n  if (r === g && g === b) x = z = y;else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Lab, lab, extend(Color, {\n  brighter: function brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));","import { lab as colorLab } from \"d3-color\";\nimport color from \"./color.js\";\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function (t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}","import { hcl as colorHcl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hcl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb, darker as _darker, brighter as _brighter } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\";\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)),\n      // NaN if l=0 or l=1\n  h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(255 * (l + a * (A * cosh + B * sinh)), 255 * (l + a * (C * cosh + D * sinh)), 255 * (l + a * (E * cosh)), this.opacity);\n  }\n}));","import { cubehelix as colorCubehelix } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function (t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n    return cubehelix;\n  }(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);","export default function piecewise(interpolate, values) {\n  var i = 0,\n      n = values.length - 1,\n      v = values[0],\n      I = new Array(n < 0 ? 0 : n);\n\n  while (i < n) {\n    I[i] = interpolate(v, v = values[++i]);\n  }\n\n  return function (t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}","export default function (interpolator, n) {\n  var samples = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    samples[i] = interpolator(i / (n - 1));\n  }\n\n  return samples;\n}","export { default as interpolate } from \"./value.js\";\nexport { default as interpolateArray } from \"./array.js\";\nexport { default as interpolateBasis } from \"./basis.js\";\nexport { default as interpolateBasisClosed } from \"./basisClosed.js\";\nexport { default as interpolateDate } from \"./date.js\";\nexport { default as interpolateDiscrete } from \"./discrete.js\";\nexport { default as interpolateHue } from \"./hue.js\";\nexport { default as interpolateNumber } from \"./number.js\";\nexport { default as interpolateNumberArray } from \"./numberArray.js\";\nexport { default as interpolateObject } from \"./object.js\";\nexport { default as interpolateRound } from \"./round.js\";\nexport { default as interpolateString } from \"./string.js\";\nexport { interpolateTransformCss, interpolateTransformSvg } from \"./transform/index.js\";\nexport { default as interpolateZoom } from \"./zoom.js\";\nexport { default as interpolateRgb, rgbBasis as interpolateRgbBasis, rgbBasisClosed as interpolateRgbBasisClosed } from \"./rgb.js\";\nexport { default as interpolateHsl, hslLong as interpolateHslLong } from \"./hsl.js\";\nexport { default as interpolateLab } from \"./lab.js\";\nexport { default as interpolateHcl, hclLong as interpolateHclLong } from \"./hcl.js\";\nexport { default as interpolateCubehelix, cubehelixLong as interpolateCubehelixLong } from \"./cubehelix.js\";\nexport { default as piecewise } from \"./piecewise.js\";\nexport { default as quantize } from \"./quantize.js\";","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar hoverLabelAttrs = require('./layout_attributes').hoverlabel;\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nmodule.exports = {\n  hoverlabel: {\n    bgcolor: extendFlat({}, hoverLabelAttrs.bgcolor, {\n      arrayOk: true,\n      description: 'Sets the background color of the hover labels for this trace'\n    }),\n    bordercolor: extendFlat({}, hoverLabelAttrs.bordercolor, {\n      arrayOk: true,\n      description: 'Sets the border color of the hover labels for this trace.'\n    }),\n    font: fontAttrs({\n      arrayOk: true,\n      editType: 'none',\n      description: 'Sets the font used in hover labels.'\n    }),\n    align: extendFlat({}, hoverLabelAttrs.align, {\n      arrayOk: true\n    }),\n    namelength: extendFlat({}, hoverLabelAttrs.namelength, {\n      arrayOk: true\n    }),\n    editType: 'none'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar Registry = require('../registry');\n/**\n * localize: translate a string for the current locale\n *\n * @param {object} gd: the graphDiv for context\n *  gd._context.locale determines the language (& optional region/country)\n *  the dictionary for each locale may either be supplied in\n *  gd._context.locales or globally via Plotly.register\n * @param {string} s: the string to translate\n */\n\n\nmodule.exports = function localize(gd, s) {\n  var locale = gd._context.locale;\n  /*\n   * Priority of lookup:\n   *     contextDicts[locale],\n   *     registeredDicts[locale],\n   *     contextDicts[baseLocale], (if baseLocale is distinct)\n   *     registeredDicts[baseLocale]\n   * Return the first translation we find.\n   * This way if you have a regionalization you are allowed to specify\n   * only what's different from the base locale, everything else will\n   * fall back on the base.\n   */\n\n  for (var i = 0; i < 2; i++) {\n    var locales = gd._context.locales;\n\n    for (var j = 0; j < 2; j++) {\n      var dict = (locales[locale] || {}).dictionary;\n\n      if (dict) {\n        var out = dict[s];\n        if (out) return out;\n      }\n\n      locales = Registry.localeRegistry;\n    }\n\n    var baseLocale = locale.split('-')[0];\n    if (baseLocale === locale) break;\n    locale = baseLocale;\n  }\n\n  return s;\n};","// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = require('./_export');\nvar toISOString = require('./_date-to-iso-string');\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {\n  toISOString: toISOString\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar d3 = require('d3');\n\nvar Lib = require('../../lib');\n\nvar dragElement = require('../dragelement');\n\nvar helpers = require('./helpers');\n\nvar layoutAttributes = require('./layout_attributes');\n\nvar hoverModule = require('./hover');\n\nmodule.exports = {\n  moduleType: 'component',\n  name: 'fx',\n  constants: require('./constants'),\n  schema: {\n    layout: layoutAttributes\n  },\n  attributes: require('./attributes'),\n  layoutAttributes: layoutAttributes,\n  supplyLayoutGlobalDefaults: require('./layout_global_defaults'),\n  supplyDefaults: require('./defaults'),\n  supplyLayoutDefaults: require('./layout_defaults'),\n  calc: require('./calc'),\n  getDistanceFunction: helpers.getDistanceFunction,\n  getClosest: helpers.getClosest,\n  inbox: helpers.inbox,\n  quadrature: helpers.quadrature,\n  appendArrayPointValue: helpers.appendArrayPointValue,\n  castHoverOption: castHoverOption,\n  castHoverinfo: castHoverinfo,\n  hover: hoverModule.hover,\n  unhover: dragElement.unhover,\n  loneHover: hoverModule.loneHover,\n  loneUnhover: loneUnhover,\n  click: require('./click')\n};\n\nfunction loneUnhover(containerOrSelection) {\n  // duck type whether the arg is a d3 selection because ie9 doesn't\n  // handle instanceof like modern browsers do.\n  var selection = Lib.isD3Selection(containerOrSelection) ? containerOrSelection : d3.select(containerOrSelection);\n  selection.selectAll('g.hovertext').remove();\n  selection.selectAll('.spikeline').remove();\n} // helpers for traces that use Fx.loneHover\n\n\nfunction castHoverOption(trace, ptNumber, attr) {\n  return Lib.castOption(trace, ptNumber, 'hoverlabel.' + attr);\n}\n\nfunction castHoverinfo(trace, fullLayout, ptNumber) {\n  function _coerce(val) {\n    return Lib.coerceHoverinfo({\n      hoverinfo: val\n    }, {\n      _module: trace._module\n    }, fullLayout);\n  }\n\n  return Lib.castOption(trace, ptNumber, 'hoverinfo', _coerce);\n}","require(\"core-js/modules/es6.array.for-each\");\n\n// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// converts a list of segments into a list of regions, while also removing unnecessary verticies\n//\nfunction SegmentChainer(segments, eps, buildLog) {\n  var chains = [];\n  var regions = [];\n  segments.forEach(function (seg) {\n    var pt1 = seg.start;\n    var pt2 = seg.end;\n\n    if (eps.pointsSame(pt1, pt2)) {\n      console.warn('PolyBool: Warning: Zero-length segment detected; your epsilon is ' + 'probably too small or too large');\n      return;\n    }\n\n    if (buildLog) buildLog.chainStart(seg); // search for two chains that this segment matches\n\n    var first_match = {\n      index: 0,\n      matches_head: false,\n      matches_pt1: false\n    };\n    var second_match = {\n      index: 0,\n      matches_head: false,\n      matches_pt1: false\n    };\n    var next_match = first_match;\n\n    function setMatch(index, matches_head, matches_pt1) {\n      // return true if we've matched twice\n      next_match.index = index;\n      next_match.matches_head = matches_head;\n      next_match.matches_pt1 = matches_pt1;\n\n      if (next_match === first_match) {\n        next_match = second_match;\n        return false;\n      }\n\n      next_match = null;\n      return true; // we've matched twice, we're done here\n    }\n\n    for (var i = 0; i < chains.length; i++) {\n      var chain = chains[i];\n      var head = chain[0];\n      var head2 = chain[1];\n      var tail = chain[chain.length - 1];\n      var tail2 = chain[chain.length - 2];\n\n      if (eps.pointsSame(head, pt1)) {\n        if (setMatch(i, true, true)) break;\n      } else if (eps.pointsSame(head, pt2)) {\n        if (setMatch(i, true, false)) break;\n      } else if (eps.pointsSame(tail, pt1)) {\n        if (setMatch(i, false, true)) break;\n      } else if (eps.pointsSame(tail, pt2)) {\n        if (setMatch(i, false, false)) break;\n      }\n    }\n\n    if (next_match === first_match) {\n      // we didn't match anything, so create a new chain\n      chains.push([pt1, pt2]);\n      if (buildLog) buildLog.chainNew(pt1, pt2);\n      return;\n    }\n\n    if (next_match === second_match) {\n      // we matched a single chain\n      if (buildLog) buildLog.chainMatch(first_match.index); // add the other point to the apporpriate end, and check to see if we've closed the\n      // chain into a loop\n\n      var index = first_match.index;\n      var pt = first_match.matches_pt1 ? pt2 : pt1; // if we matched pt1, then we add pt2, etc\n\n      var addToHead = first_match.matches_head; // if we matched at head, then add to the head\n\n      var chain = chains[index];\n      var grow = addToHead ? chain[0] : chain[chain.length - 1];\n      var grow2 = addToHead ? chain[1] : chain[chain.length - 2];\n      var oppo = addToHead ? chain[chain.length - 1] : chain[0];\n      var oppo2 = addToHead ? chain[chain.length - 2] : chain[1];\n\n      if (eps.pointsCollinear(grow2, grow, pt)) {\n        // grow isn't needed because it's directly between grow2 and pt:\n        // grow2 ---grow---> pt\n        if (addToHead) {\n          if (buildLog) buildLog.chainRemoveHead(first_match.index, pt);\n          chain.shift();\n        } else {\n          if (buildLog) buildLog.chainRemoveTail(first_match.index, pt);\n          chain.pop();\n        }\n\n        grow = grow2; // old grow is gone... new grow is what grow2 was\n      }\n\n      if (eps.pointsSame(oppo, pt)) {\n        // we're closing the loop, so remove chain from chains\n        chains.splice(index, 1);\n\n        if (eps.pointsCollinear(oppo2, oppo, grow)) {\n          // oppo isn't needed because it's directly between oppo2 and grow:\n          // oppo2 ---oppo--->grow\n          if (addToHead) {\n            if (buildLog) buildLog.chainRemoveTail(first_match.index, grow);\n            chain.pop();\n          } else {\n            if (buildLog) buildLog.chainRemoveHead(first_match.index, grow);\n            chain.shift();\n          }\n        }\n\n        if (buildLog) buildLog.chainClose(first_match.index); // we have a closed chain!\n\n        regions.push(chain);\n        return;\n      } // not closing a loop, so just add it to the apporpriate side\n\n\n      if (addToHead) {\n        if (buildLog) buildLog.chainAddHead(first_match.index, pt);\n        chain.unshift(pt);\n      } else {\n        if (buildLog) buildLog.chainAddTail(first_match.index, pt);\n        chain.push(pt);\n      }\n\n      return;\n    } // otherwise, we matched two chains, so we need to combine those chains together\n\n\n    function reverseChain(index) {\n      if (buildLog) buildLog.chainReverse(index);\n      chains[index].reverse(); // gee, that's easy\n    }\n\n    function appendChain(index1, index2) {\n      // index1 gets index2 appended to it, and index2 is removed\n      var chain1 = chains[index1];\n      var chain2 = chains[index2];\n      var tail = chain1[chain1.length - 1];\n      var tail2 = chain1[chain1.length - 2];\n      var head = chain2[0];\n      var head2 = chain2[1];\n\n      if (eps.pointsCollinear(tail2, tail, head)) {\n        // tail isn't needed because it's directly between tail2 and head\n        // tail2 ---tail---> head\n        if (buildLog) buildLog.chainRemoveTail(index1, tail);\n        chain1.pop();\n        tail = tail2; // old tail is gone... new tail is what tail2 was\n      }\n\n      if (eps.pointsCollinear(tail, head, head2)) {\n        // head isn't needed because it's directly between tail and head2\n        // tail ---head---> head2\n        if (buildLog) buildLog.chainRemoveHead(index2, head);\n        chain2.shift();\n      }\n\n      if (buildLog) buildLog.chainJoin(index1, index2);\n      chains[index1] = chain1.concat(chain2);\n      chains.splice(index2, 1);\n    }\n\n    var F = first_match.index;\n    var S = second_match.index;\n    if (buildLog) buildLog.chainConnect(F, S);\n    var reverseF = chains[F].length < chains[S].length; // reverse the shorter chain, if needed\n\n    if (first_match.matches_head) {\n      if (second_match.matches_head) {\n        if (reverseF) {\n          // <<<< F <<<< --- >>>> S >>>>\n          reverseChain(F); // >>>> F >>>> --- >>>> S >>>>\n\n          appendChain(F, S);\n        } else {\n          // <<<< F <<<< --- >>>> S >>>>\n          reverseChain(S); // <<<< F <<<< --- <<<< S <<<<   logically same as:\n          // >>>> S >>>> --- >>>> F >>>>\n\n          appendChain(S, F);\n        }\n      } else {\n        // <<<< F <<<< --- <<<< S <<<<   logically same as:\n        // >>>> S >>>> --- >>>> F >>>>\n        appendChain(S, F);\n      }\n    } else {\n      if (second_match.matches_head) {\n        // >>>> F >>>> --- >>>> S >>>>\n        appendChain(F, S);\n      } else {\n        if (reverseF) {\n          // >>>> F >>>> --- <<<< S <<<<\n          reverseChain(F); // <<<< F <<<< --- <<<< S <<<<   logically same as:\n          // >>>> S >>>> --- >>>> F >>>>\n\n          appendChain(S, F);\n        } else {\n          // >>>> F >>>> --- <<<< S <<<<\n          reverseChain(S); // >>>> F >>>> --- >>>> S >>>>\n\n          appendChain(F, S);\n        }\n      }\n    }\n  });\n  return regions;\n}\n\nmodule.exports = SegmentChainer;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar Lib = require('../lib');\n\nvar plotAttributes = require('../plots/attributes');\n\nvar TEMPLATEITEMNAME = 'templateitemname';\nvar templateAttrs = {\n  name: {\n    valType: 'string',\n    role: 'style',\n    editType: 'none',\n    description: ['When used in a template, named items are created in the output figure', 'in addition to any items the figure already has in this array.', 'You can modify these items in the output figure by making your own', 'item with `templateitemname` matching this `name`', 'alongside your modifications (including `visible: false` or', '`enabled: false` to hide it).', 'Has no effect outside of a template.'].join(' ')\n  }\n};\ntemplateAttrs[TEMPLATEITEMNAME] = {\n  valType: 'string',\n  role: 'info',\n  editType: 'calc',\n  description: ['Used to refer to a named item in this array in the template. Named', 'items from the template will be created even without a matching item', 'in the input figure, but you can modify one by making an item with', '`templateitemname` matching its `name`, alongside your modifications', '(including `visible: false` or `enabled: false` to hide it).', 'If there is no template or no matching item, this item will be', 'hidden unless you explicitly show it with `visible: true`.'].join(' ')\n};\n/**\n * templatedArray: decorate an attributes object with templating (and array)\n * properties.\n *\n * @param {string} name: the singular form of the array name. Sets\n *     `_isLinkedToArray` to this, so the schema knows to treat this as an array.\n * @param {object} attrs: the item attributes. Since all callers are expected\n *     to be constructing this object on the spot, we mutate it here for\n *     performance, rather than extending a new object with it.\n *\n * @returns {object}: the decorated `attrs` object\n */\n\nexports.templatedArray = function (name, attrs) {\n  attrs._isLinkedToArray = name;\n  attrs.name = templateAttrs.name;\n  attrs[TEMPLATEITEMNAME] = templateAttrs[TEMPLATEITEMNAME];\n  return attrs;\n};\n/**\n * traceTemplater: logic for matching traces to trace templates\n *\n * @param {object} dataTemplate: collection of {traceType: [{template}, ...]}\n *     ie each type the template applies to contains a list of template objects,\n *     to be provided cyclically to data traces of that type.\n *\n * @returns {object}: {newTrace}, a function:\n *     newTrace(traceIn): that takes the input traceIn, coerces its type, then\n *         uses that type to find the next template to apply. returns the output\n *         traceOut with template attached, ready to continue supplyDefaults.\n */\n\n\nexports.traceTemplater = function (dataTemplate) {\n  var traceCounts = {};\n  var traceType, typeTemplates;\n\n  for (traceType in dataTemplate) {\n    typeTemplates = dataTemplate[traceType];\n\n    if (Array.isArray(typeTemplates) && typeTemplates.length) {\n      traceCounts[traceType] = 0;\n    }\n  }\n\n  function newTrace(traceIn) {\n    traceType = Lib.coerce(traceIn, {}, plotAttributes, 'type');\n    var traceOut = {\n      type: traceType,\n      _template: null\n    };\n\n    if (traceType in traceCounts) {\n      typeTemplates = dataTemplate[traceType]; // cycle through traces in the template set for this type\n\n      var typei = traceCounts[traceType] % typeTemplates.length;\n      traceCounts[traceType]++;\n      traceOut._template = typeTemplates[typei];\n    } else {// TODO: anything we should do for types missing from the template?\n      // try to apply some other type? Or just bail as we do here?\n      // Actually I think yes, we should apply other types; would be nice\n      // if all scatter* could inherit from each other, and if histogram\n      // could inherit from bar, etc... but how to specify this? And do we\n      // compose them, or if a type is present require it to be complete?\n      // Actually this could apply to layout too - 3D annotations\n      // inheriting from 2D, axes of different types inheriting from each\n      // other...\n    }\n\n    return traceOut;\n  }\n\n  return {\n    newTrace: newTrace // TODO: function to figure out what's left & what didn't work\n\n  };\n};\n/**\n * newContainer: Create a new sub-container inside `container` and propagate any\n * applicable template to it. If there's no template, still propagates\n * `undefined` so relinkPrivate will not retain an old template!\n *\n * @param {object} container: the outer container, should already have _template\n *     if there *is* a template for this plot\n * @param {string} name: the key of the new container to make\n * @param {string} baseName: if applicable, a base attribute to take the\n *     template from, ie for xaxis3 the base would be xaxis\n *\n * @returns {object}: an object for inclusion _full*, empty except for the\n *     appropriate template piece\n */\n\n\nexports.newContainer = function (container, name, baseName) {\n  var template = container._template;\n  var part = template && (template[name] || baseName && template[baseName]);\n  if (!Lib.isPlainObject(part)) part = null;\n  var out = container[name] = {\n    _template: part\n  };\n  return out;\n};\n/**\n * arrayTemplater: special logic for templating both defaults and specific items\n * in a container array (annotations etc)\n *\n * @param {object} container: the outer container, should already have _template\n *     if there *is* a template for this plot\n * @param {string} name: the name of the array to template (ie 'annotations')\n *     will be used to find default ('annotationdefaults' object) and specific\n *     ('annotations' array) template specs.\n * @param {string} inclusionAttr: the attribute determining this item's\n *     inclusion in the output, usually 'visible' or 'enabled'\n *\n * @returns {object}: {newItem, defaultItems}, both functions:\n *     newItem(itemIn): create an output item, bare except for the correct\n *         template and name(s), as the base for supplyDefaults\n *     defaultItems(): to be called after all newItem calls, return any\n *         specific template items that have not already beeen included,\n *         also as bare output items ready for supplyDefaults.\n */\n\n\nexports.arrayTemplater = function (container, name, inclusionAttr) {\n  var template = container._template;\n  var defaultsTemplate = template && template[arrayDefaultKey(name)];\n  var templateItems = template && template[name];\n\n  if (!Array.isArray(templateItems) || !templateItems.length) {\n    templateItems = [];\n  }\n\n  var usedNames = {};\n\n  function newItem(itemIn) {\n    // include name and templateitemname in the output object for ALL\n    // container array items. Note: you could potentially use different\n    // name and templateitemname, if you're using one template to make\n    // another template. templateitemname would be the name in the original\n    // template, and name is the new \"subclassed\" item name.\n    var out = {\n      name: itemIn.name,\n      _input: itemIn\n    };\n    var templateItemName = out[TEMPLATEITEMNAME] = itemIn[TEMPLATEITEMNAME]; // no itemname: use the default template\n\n    if (!validItemName(templateItemName)) {\n      out._template = defaultsTemplate;\n      return out;\n    } // look for an item matching this itemname\n    // note these do not inherit from the default template, only the item.\n\n\n    for (var i = 0; i < templateItems.length; i++) {\n      var templateItem = templateItems[i];\n\n      if (templateItem.name === templateItemName) {\n        // Note: it's OK to use a template item more than once\n        // but using it at least once will stop it from generating\n        // a default item at the end.\n        usedNames[templateItemName] = 1;\n        out._template = templateItem;\n        return out;\n      }\n    } // Didn't find a matching template item, so since this item is intended\n    // to only be modifications it's most likely broken. Hide it unless\n    // it's explicitly marked visible - in which case it gets NO template,\n    // not even the default.\n\n\n    out[inclusionAttr] = itemIn[inclusionAttr] || false; // special falsy value we can look for in validateTemplate\n\n    out._template = false;\n    return out;\n  }\n\n  function defaultItems() {\n    var out = [];\n\n    for (var i = 0; i < templateItems.length; i++) {\n      var templateItem = templateItems[i];\n      var name = templateItem.name; // only allow named items to be added as defaults,\n      // and only allow each name once\n\n      if (validItemName(name) && !usedNames[name]) {\n        var outi = {\n          _template: templateItem,\n          name: name,\n          _input: {\n            _templateitemname: name\n          }\n        };\n        outi[TEMPLATEITEMNAME] = templateItem[TEMPLATEITEMNAME];\n        out.push(outi);\n        usedNames[name] = 1;\n      }\n    }\n\n    return out;\n  }\n\n  return {\n    newItem: newItem,\n    defaultItems: defaultItems\n  };\n};\n\nfunction validItemName(name) {\n  return name && typeof name === 'string';\n}\n\nfunction arrayDefaultKey(name) {\n  var lastChar = name.length - 1;\n\n  if (name.charAt(lastChar) !== 's') {\n    Lib.warn('bad argument to arrayDefaultKey: ' + name);\n  }\n\n  return name.substr(0, name.length - 1) + 'defaults';\n}\n\nexports.arrayDefaultKey = arrayDefaultKey;\n/**\n * arrayEditor: helper for editing array items that may have come from\n *     template defaults (in which case they will not exist in the input yet)\n *\n * @param {object} parentIn: the input container (eg gd.layout)\n * @param {string} containerStr: the attribute string for the container inside\n *     `parentIn`.\n * @param {object} itemOut: the _full* item (eg gd._fullLayout.annotations[0])\n *     that we'll be editing. Assumed to have been created by `arrayTemplater`.\n *\n * @returns {object}: {modifyBase, modifyItem, getUpdateObj, applyUpdate}, all functions:\n *     modifyBase(attr, value): Add an update that's *not* related to the item.\n *         `attr` is the full attribute string.\n *     modifyItem(attr, value): Add an update to the item. `attr` is just the\n *         portion of the attribute string inside the item.\n *     getUpdateObj(): Get the final constructed update object, to use in\n *         `restyle` or `relayout`. Also resets the update object in case this\n *         update was canceled.\n *     applyUpdate(attr, value): optionally add an update `attr: value`,\n *         then apply it to `parent` which should be the parent of `containerIn`,\n *         ie the object to which `containerStr` is the attribute string.\n */\n\nexports.arrayEditor = function (parentIn, containerStr, itemOut) {\n  var lengthIn = (Lib.nestedProperty(parentIn, containerStr).get() || []).length;\n  var index = itemOut._index; // Check that we are indeed off the end of this container.\n  // Otherwise a devious user could put a key `_templateitemname` in their\n  // own input and break lots of things.\n\n  var templateItemName = index >= lengthIn && (itemOut._input || {})._templateitemname;\n  if (templateItemName) index = lengthIn;\n  var itemStr = containerStr + '[' + index + ']';\n  var update;\n\n  function resetUpdate() {\n    update = {};\n\n    if (templateItemName) {\n      update[itemStr] = {};\n      update[itemStr][TEMPLATEITEMNAME] = templateItemName;\n    }\n  }\n\n  resetUpdate();\n\n  function modifyBase(attr, value) {\n    update[attr] = value;\n  }\n\n  function modifyItem(attr, value) {\n    if (templateItemName) {\n      // we're making a new object: edit that object\n      Lib.nestedProperty(update[itemStr], attr).set(value);\n    } else {\n      // we're editing an existing object: include *just* the edit\n      update[itemStr + '.' + attr] = value;\n    }\n  }\n\n  function getUpdateObj() {\n    var updateOut = update;\n    resetUpdate();\n    return updateOut;\n  }\n\n  function applyUpdate(attr, value) {\n    if (attr) modifyItem(attr, value);\n    var updateToApply = getUpdateObj();\n\n    for (var key in updateToApply) {\n      Lib.nestedProperty(parentIn, key).set(updateToApply[key]);\n    }\n  }\n\n  return {\n    modifyBase: modifyBase,\n    modifyItem: modifyItem,\n    getUpdateObj: getUpdateObj,\n    applyUpdate: applyUpdate\n  };\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fontAttrs = require('./font_attributes');\n\nvar animationAttrs = require('./animation_attributes');\n\nvar colorAttrs = require('../components/color/attributes');\n\nvar padAttrs = require('./pad_attributes');\n\nvar extendFlat = require('../lib/extend').extendFlat;\n\nvar globalFont = fontAttrs({\n  editType: 'calc',\n  description: ['Sets the global font.', 'Note that fonts used in traces and other', 'layout components inherit from the global font.'].join(' ')\n});\nglobalFont.family.dflt = '\"Open Sans\", verdana, arial, sans-serif';\nglobalFont.size.dflt = 12;\nglobalFont.color.dflt = colorAttrs.defaultLine;\nmodule.exports = {\n  font: globalFont,\n  title: {\n    text: {\n      valType: 'string',\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Sets the plot\\'s title.', 'Note that before the existence of `title.text`, the title\\'s', 'contents used to be defined as the `title` attribute itself.', 'This behavior has been deprecated.'].join(' ')\n    },\n    font: fontAttrs({\n      editType: 'layoutstyle',\n      description: ['Sets the title font.', 'Note that the title\\'s font used to be customized', 'by the now deprecated `titlefont` attribute.'].join(' ')\n    }),\n    xref: {\n      valType: 'enumerated',\n      dflt: 'container',\n      values: ['container', 'paper'],\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Sets the container `x` refers to.', '*container* spans the entire `width` of the plot.', '*paper* refers to the width of the plotting area only.'].join(' ')\n    },\n    yref: {\n      valType: 'enumerated',\n      dflt: 'container',\n      values: ['container', 'paper'],\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Sets the container `y` refers to.', '*container* spans the entire `height` of the plot.', '*paper* refers to the height of the plotting area only.'].join(' ')\n    },\n    x: {\n      valType: 'number',\n      min: 0,\n      max: 1,\n      dflt: 0.5,\n      role: 'style',\n      editType: 'layoutstyle',\n      description: ['Sets the x position with respect to `xref` in normalized', 'coordinates from *0* (left) to *1* (right).'].join(' ')\n    },\n    y: {\n      valType: 'number',\n      min: 0,\n      max: 1,\n      dflt: 'auto',\n      role: 'style',\n      editType: 'layoutstyle',\n      description: ['Sets the y position with respect to `yref` in normalized', 'coordinates from *0* (bottom) to *1* (top).', '*auto* places the baseline of the title onto the', 'vertical center of the top margin.'].join(' ')\n    },\n    xanchor: {\n      valType: 'enumerated',\n      dflt: 'auto',\n      values: ['auto', 'left', 'center', 'right'],\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Sets the title\\'s horizontal alignment with respect to its x position.', '*left* means that the title starts at x,', '*right* means that the title ends at x', 'and *center* means that the title\\'s center is at x.', '*auto* divides `xref` by three and calculates the `xanchor`', 'value automatically based on the value of `x`.'].join(' ')\n    },\n    yanchor: {\n      valType: 'enumerated',\n      dflt: 'auto',\n      values: ['auto', 'top', 'middle', 'bottom'],\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Sets the title\\'s vertical alignment with respect to its y position.', '*top* means that the title\\'s cap line is at y,', '*bottom* means that the title\\'s baseline is at y', 'and *middle* means that the title\\'s midline is at y.', '*auto* divides `yref` by three and calculates the `yanchor`', 'value automatically based on the value of `y`.'].join(' ')\n    },\n    pad: extendFlat(padAttrs({\n      editType: 'layoutstyle'\n    }), {\n      description: ['Sets the padding of the title.', 'Each padding value only applies when the corresponding', '`xanchor`/`yanchor` value is set accordingly. E.g. for left', 'padding to take effect, `xanchor` must be set to *left*.', 'The same rule applies if `xanchor`/`yanchor` is determined automatically.', 'Padding is muted if the respective anchor value is *middle*/*center*.'].join(' ')\n    }),\n    editType: 'layoutstyle'\n  },\n  uniformtext: {\n    mode: {\n      valType: 'enumerated',\n      values: [false, 'hide', 'show'],\n      dflt: false,\n      role: 'info',\n      editType: 'plot',\n      description: ['Determines how the font size for various text', 'elements are uniformed between each trace type.', 'If the computed text sizes were smaller than', 'the minimum size defined by `uniformtext.minsize`', 'using *hide* option hides the text; and', 'using *show* option shows the text without further downscaling.', 'Please note that if the size defined by `minsize` is greater than', 'the font size defined by trace, then the `minsize` is used.'].join(' ')\n    },\n    minsize: {\n      valType: 'number',\n      min: 0,\n      dflt: 0,\n      role: 'info',\n      editType: 'plot',\n      description: ['Sets the minimum text size between traces of the same type.'].join(' ')\n    },\n    editType: 'plot'\n  },\n  autosize: {\n    valType: 'boolean',\n    role: 'info',\n    dflt: false,\n    // autosize, width, and height get special editType treatment in _relayout\n    // so we can handle noop resizes more efficiently\n    editType: 'none',\n    description: ['Determines whether or not a layout width or height', 'that has been left undefined by the user', 'is initialized on each relayout.', 'Note that, regardless of this attribute,', 'an undefined layout width or height', 'is always initialized on the first call to plot.'].join(' ')\n  },\n  width: {\n    valType: 'number',\n    role: 'info',\n    min: 10,\n    dflt: 700,\n    editType: 'plot',\n    description: ['Sets the plot\\'s width (in px).'].join(' ')\n  },\n  height: {\n    valType: 'number',\n    role: 'info',\n    min: 10,\n    dflt: 450,\n    editType: 'plot',\n    description: ['Sets the plot\\'s height (in px).'].join(' ')\n  },\n  margin: {\n    l: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 80,\n      editType: 'plot',\n      description: 'Sets the left margin (in px).'\n    },\n    r: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 80,\n      editType: 'plot',\n      description: 'Sets the right margin (in px).'\n    },\n    t: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 100,\n      editType: 'plot',\n      description: 'Sets the top margin (in px).'\n    },\n    b: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 80,\n      editType: 'plot',\n      description: 'Sets the bottom margin (in px).'\n    },\n    pad: {\n      valType: 'number',\n      role: 'info',\n      min: 0,\n      dflt: 0,\n      editType: 'plot',\n      description: ['Sets the amount of padding (in px)', 'between the plotting area and the axis lines'].join(' ')\n    },\n    autoexpand: {\n      valType: 'boolean',\n      role: 'info',\n      dflt: true,\n      editType: 'plot',\n      description: ['Turns on/off margin expansion computations.', 'Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider', 'are allowed to push the margins by defaults.'].join(' ')\n    },\n    editType: 'plot'\n  },\n  paper_bgcolor: {\n    valType: 'color',\n    role: 'style',\n    dflt: colorAttrs.background,\n    editType: 'plot',\n    description: 'Sets the background color of the paper where the graph is drawn.'\n  },\n  plot_bgcolor: {\n    // defined here, but set in cartesian.supplyLayoutDefaults\n    // because it needs to know if there are (2D) axes or not\n    valType: 'color',\n    role: 'style',\n    dflt: colorAttrs.background,\n    editType: 'layoutstyle',\n    description: ['Sets the background color of the plotting area in-between x and y axes.'].join(' ')\n  },\n  separators: {\n    valType: 'string',\n    role: 'style',\n    editType: 'plot',\n    description: ['Sets the decimal and thousand separators.', 'For example, *. * puts a \\'.\\' before decimals and a space', 'between thousands. In English locales, dflt is *.,* but', 'other locales may alter this default.'].join(' ')\n  },\n  hidesources: {\n    valType: 'boolean',\n    role: 'info',\n    dflt: false,\n    editType: 'plot',\n    description: ['Determines whether or not a text link citing the data source is', 'placed at the bottom-right cored of the figure.', 'Has only an effect only on graphs that have been generated via', 'forked graphs from the plotly service (at https://plot.ly or on-premise).'].join(' ')\n  },\n  showlegend: {\n    // handled in legend.supplyLayoutDefaults\n    // but included here because it's not in the legend object\n    valType: 'boolean',\n    role: 'info',\n    editType: 'legend',\n    description: ['Determines whether or not a legend is drawn.', 'Default is `true` if there is a trace to show and any of these:', 'a) Two or more traces would by default be shown in the legend.', 'b) One pie trace is shown in the legend.', 'c) One trace is explicitly given with `showlegend: true`.'].join(' ')\n  },\n  colorway: {\n    valType: 'colorlist',\n    dflt: colorAttrs.defaults,\n    role: 'style',\n    editType: 'calc',\n    description: 'Sets the default trace colors.'\n  },\n  datarevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'calc',\n    description: ['If provided, a changed value tells `Plotly.react` that', 'one or more data arrays has changed. This way you can modify', 'arrays in-place rather than making a complete new copy for an', 'incremental change.', 'If NOT provided, `Plotly.react` assumes that data arrays are', 'being treated as immutable, thus any data array with a', 'different identity from its predecessor contains new data.'].join(' ')\n  },\n  uirevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'none',\n    description: ['Used to allow user interactions with the plot to persist after', '`Plotly.react` calls that are unaware of these interactions.', 'If `uirevision` is omitted, or if it is given and it changed from', 'the previous `Plotly.react` call, the exact new figure is used.', 'If `uirevision` is truthy and did NOT change, any attribute', 'that has been affected by user interactions and did not receive a', 'different value in the new figure will keep the interaction value.', '`layout.uirevision` attribute serves as the default for', '`uirevision` attributes in various sub-containers. For finer', 'control you can set these sub-attributes directly. For example,', 'if your app separately controls the data on the x and y axes you', 'might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.', 'Then if only the y data is changed, you can update', '`yaxis.uirevision=*quantity*` and the y axis range will reset but', 'the x axis range will retain any user-driven zoom.'].join(' ')\n  },\n  editrevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'none',\n    description: ['Controls persistence of user-driven changes in `editable: true`', 'configuration, other than trace names and axis titles.', 'Defaults to `layout.uirevision`.'].join(' ')\n  },\n  selectionrevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'none',\n    description: ['Controls persistence of user-driven changes in selected points', 'from all traces.'].join(' ')\n  },\n  template: {\n    valType: 'any',\n    role: 'info',\n    editType: 'calc',\n    description: ['Default attributes to be applied to the plot. Templates can be', 'created from existing plots using `Plotly.makeTemplate`, or', 'created manually. They should be objects with format:', '`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`', '`layoutTemplate` and `traceTemplate` are objects matching the', 'attribute structure of `layout` and a data trace. ', 'Trace templates are applied cyclically to traces of each type.', 'Container arrays (eg `annotations`) have special handling:', 'An object ending in `defaults` (eg `annotationdefaults`) is applied', 'to each array item. But if an item has a `templateitemname` key', 'we look in the template array for an item with matching `name` and', 'apply that instead. If no matching `name` is found we mark the item', 'invisible. Any named template item not referenced is appended to', 'the end of the array, so you can use this for a watermark annotation', 'or a logo image, for example. To omit one of these items on the plot,', 'make an item with matching `templateitemname` and `visible: false`.'].join(' ')\n  },\n  modebar: {\n    orientation: {\n      valType: 'enumerated',\n      values: ['v', 'h'],\n      dflt: 'h',\n      role: 'info',\n      editType: 'modebar',\n      description: 'Sets the orientation of the modebar.'\n    },\n    bgcolor: {\n      valType: 'color',\n      role: 'style',\n      editType: 'modebar',\n      description: 'Sets the background color of the modebar.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      editType: 'modebar',\n      description: 'Sets the color of the icons in the modebar.'\n    },\n    activecolor: {\n      valType: 'color',\n      role: 'style',\n      editType: 'modebar',\n      description: 'Sets the color of the active or hovered on icons in the modebar.'\n    },\n    uirevision: {\n      valType: 'any',\n      role: 'info',\n      editType: 'none',\n      description: ['Controls persistence of user-driven changes related to the modebar,', 'including `hovermode`, `dragmode`, and `showspikes` at both the', 'root level and inside subplots. Defaults to `layout.uirevision`.'].join(' ')\n    },\n    editType: 'modebar'\n  },\n  meta: {\n    valType: 'any',\n    arrayOk: true,\n    role: 'info',\n    editType: 'plot',\n    description: ['Assigns extra meta information that can be used in various `text` attributes.', 'Attributes such as the graph, axis and colorbar `title.text`, annotation `text`', '`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text', 'all support `meta`. One can access `meta` fields using template strings:', '`%{meta[i]}` where `i` is the index of the `meta`', 'item in question.', '`meta` can also be an object for example `{key: value}` which can be accessed', '%{meta[key]}.'].join(' ')\n  },\n  transition: extendFlat({}, animationAttrs.transition, {\n    description: ['Sets transition options used during Plotly.react updates.'].join(' '),\n    editType: 'none'\n  }),\n  _deprecated: {\n    title: {\n      valType: 'string',\n      role: 'info',\n      editType: 'layoutstyle',\n      description: ['Value of `title` is no longer a simple *string* but a set of sub-attributes.', 'To set the contents of the title, please use `title.text` now.'].join(' ')\n    },\n    titlefont: fontAttrs({\n      editType: 'layoutstyle',\n      description: ['Former `titlefont` is now the sub-attribute `font` of `title`.', 'To customize title font properties, please use `title.font` now.'].join(' ')\n    })\n  }\n};","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// used strictly for logging the processing of the algorithm... only useful if you intend on\n// looking under the covers (for pretty UI's or debugging)\n//\nfunction BuildLog() {\n  var my;\n  var nextSegmentId = 0;\n  var curVert = false;\n\n  function push(type, data) {\n    my.list.push({\n      type: type,\n      data: data ? JSON.parse(JSON.stringify(data)) : void 0\n    });\n    return my;\n  }\n\n  my = {\n    list: [],\n    segmentId: function segmentId() {\n      return nextSegmentId++;\n    },\n    checkIntersection: function checkIntersection(seg1, seg2) {\n      return push('check', {\n        seg1: seg1,\n        seg2: seg2\n      });\n    },\n    segmentChop: function segmentChop(seg, end) {\n      push('div_seg', {\n        seg: seg,\n        pt: end\n      });\n      return push('chop', {\n        seg: seg,\n        pt: end\n      });\n    },\n    statusRemove: function statusRemove(seg) {\n      return push('pop_seg', {\n        seg: seg\n      });\n    },\n    segmentUpdate: function segmentUpdate(seg) {\n      return push('seg_update', {\n        seg: seg\n      });\n    },\n    segmentNew: function segmentNew(seg, primary) {\n      return push('new_seg', {\n        seg: seg,\n        primary: primary\n      });\n    },\n    segmentRemove: function segmentRemove(seg) {\n      return push('rem_seg', {\n        seg: seg\n      });\n    },\n    tempStatus: function tempStatus(seg, above, below) {\n      return push('temp_status', {\n        seg: seg,\n        above: above,\n        below: below\n      });\n    },\n    rewind: function rewind(seg) {\n      return push('rewind', {\n        seg: seg\n      });\n    },\n    status: function status(seg, above, below) {\n      return push('status', {\n        seg: seg,\n        above: above,\n        below: below\n      });\n    },\n    vert: function vert(x) {\n      if (x === curVert) return my;\n      curVert = x;\n      return push('vert', {\n        x: x\n      });\n    },\n    log: function log(data) {\n      if (typeof data !== 'string') data = JSON.stringify(data, false, '  ');\n      return push('log', {\n        txt: data\n      });\n    },\n    reset: function reset() {\n      return push('reset');\n    },\n    selected: function selected(segs) {\n      return push('selected', {\n        segs: segs\n      });\n    },\n    chainStart: function chainStart(seg) {\n      return push('chain_start', {\n        seg: seg\n      });\n    },\n    chainRemoveHead: function chainRemoveHead(index, pt) {\n      return push('chain_rem_head', {\n        index: index,\n        pt: pt\n      });\n    },\n    chainRemoveTail: function chainRemoveTail(index, pt) {\n      return push('chain_rem_tail', {\n        index: index,\n        pt: pt\n      });\n    },\n    chainNew: function chainNew(pt1, pt2) {\n      return push('chain_new', {\n        pt1: pt1,\n        pt2: pt2\n      });\n    },\n    chainMatch: function chainMatch(index) {\n      return push('chain_match', {\n        index: index\n      });\n    },\n    chainClose: function chainClose(index) {\n      return push('chain_close', {\n        index: index\n      });\n    },\n    chainAddHead: function chainAddHead(index, pt) {\n      return push('chain_add_head', {\n        index: index,\n        pt: pt\n      });\n    },\n    chainAddTail: function chainAddTail(index, pt) {\n      return push('chain_add_tail', {\n        index: index,\n        pt: pt\n      });\n    },\n    chainConnect: function chainConnect(index1, index2) {\n      return push('chain_con', {\n        index1: index1,\n        index2: index2\n      });\n    },\n    chainReverse: function chainReverse(index) {\n      return push('chain_rev', {\n        index: index\n      });\n    },\n    chainJoin: function chainJoin(index1, index2) {\n      return push('chain_join', {\n        index1: index1,\n        index2: index2\n      });\n    },\n    done: function done() {\n      return push('done');\n    }\n  };\n  return my;\n}\n\nmodule.exports = BuildLog;","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fxAttrs = require('../components/fx/attributes');\n\nmodule.exports = {\n  type: {\n    valType: 'enumerated',\n    role: 'info',\n    values: [],\n    // listed dynamically\n    dflt: 'scatter',\n    editType: 'calc+clearAxisTypes',\n    _noTemplating: true // we handle this at a higher level\n\n  },\n  visible: {\n    valType: 'enumerated',\n    values: [true, false, 'legendonly'],\n    role: 'info',\n    dflt: true,\n    editType: 'calc',\n    description: ['Determines whether or not this trace is visible.', 'If *legendonly*, the trace is not drawn,', 'but can appear as a legend item', '(provided that the legend itself is visible).'].join(' ')\n  },\n  showlegend: {\n    valType: 'boolean',\n    role: 'info',\n    dflt: true,\n    editType: 'style',\n    description: ['Determines whether or not an item corresponding to this', 'trace is shown in the legend.'].join(' ')\n  },\n  legendgroup: {\n    valType: 'string',\n    role: 'info',\n    dflt: '',\n    editType: 'style',\n    description: ['Sets the legend group for this trace.', 'Traces part of the same legend group hide/show at the same time', 'when toggling legend items.'].join(' ')\n  },\n  opacity: {\n    valType: 'number',\n    role: 'style',\n    min: 0,\n    max: 1,\n    dflt: 1,\n    editType: 'style',\n    description: 'Sets the opacity of the trace.'\n  },\n  name: {\n    valType: 'string',\n    role: 'info',\n    editType: 'style',\n    description: ['Sets the trace name.', 'The trace name appear as the legend item and on hover.'].join(' ')\n  },\n  uid: {\n    valType: 'string',\n    role: 'info',\n    editType: 'plot',\n    anim: true,\n    description: ['Assign an id to this trace,', 'Use this to provide object constancy between traces during animations', 'and transitions.'].join(' ')\n  },\n  ids: {\n    valType: 'data_array',\n    editType: 'calc',\n    anim: true,\n    description: ['Assigns id labels to each datum.', 'These ids for object constancy of data points during animation.', 'Should be an array of strings, not numbers or any other type.'].join(' ')\n  },\n  customdata: {\n    valType: 'data_array',\n    editType: 'calc',\n    description: ['Assigns extra data each datum.', 'This may be useful when listening to hover, click and selection events.', 'Note that, *scatter* traces also appends customdata items in the markers', 'DOM elements'].join(' ')\n  },\n  meta: {\n    valType: 'any',\n    arrayOk: true,\n    role: 'info',\n    editType: 'plot',\n    description: ['Assigns extra meta information associated with this trace', 'that can be used in various text attributes.', 'Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`', '`rangeselector`, `updatemenues` and `sliders` `label` text', 'all support `meta`.', 'To access the trace `meta` values in an attribute in the same trace, simply use', '`%{meta[i]}` where `i` is the index or key of the `meta`', 'item in question.', 'To access trace `meta` in layout attributes, use', '`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`', 'and `n` is the trace index.'].join(' ')\n  },\n  // N.B. these cannot be 'data_array' as they do not have the same length as\n  // other data arrays and arrayOk attributes in general\n  //\n  // Maybe add another valType:\n  // https://github.com/plotly/plotly.js/issues/1894\n  selectedpoints: {\n    valType: 'any',\n    role: 'info',\n    editType: 'calc',\n    description: ['Array containing integer indices of selected points.', 'Has an effect only for traces that support selections.', 'Note that an empty array means an empty selection where the `unselected`', 'are turned on for all points, whereas, any other non-array values means no', 'selection all where the `selected` and `unselected` styles have no effect.'].join(' ')\n  },\n  hoverinfo: {\n    valType: 'flaglist',\n    role: 'info',\n    flags: ['x', 'y', 'z', 'text', 'name'],\n    extras: ['all', 'none', 'skip'],\n    arrayOk: true,\n    dflt: 'all',\n    editType: 'none',\n    description: ['Determines which trace information appear on hover.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n  },\n  hoverlabel: fxAttrs.hoverlabel,\n  stream: {\n    token: {\n      valType: 'string',\n      noBlank: true,\n      strict: true,\n      role: 'info',\n      editType: 'calc',\n      description: ['The stream id number links a data trace on a plot with a stream.', 'See https://plot.ly/settings for more details.'].join(' ')\n    },\n    maxpoints: {\n      valType: 'number',\n      min: 0,\n      max: 10000,\n      dflt: 500,\n      role: 'info',\n      editType: 'calc',\n      description: ['Sets the maximum number of points to keep on the plots from an', 'incoming stream.', 'If `maxpoints` is set to *50*, only the newest 50 points will', 'be displayed on the plot.'].join(' ')\n    },\n    editType: 'calc'\n  },\n  transforms: {\n    _isLinkedToArray: 'transform',\n    editType: 'calc',\n    description: ['An array of operations that manipulate the trace data,', 'for example filtering or sorting the data arrays.'].join(' ')\n  },\n  uirevision: {\n    valType: 'any',\n    role: 'info',\n    editType: 'none',\n    description: ['Controls persistence of some user-driven changes to the trace:', '`constraintrange` in `parcoords` traces, as well as some', '`editable: true` modifications such as `name` and `colorbar.title`.', 'Defaults to `layout.uirevision`.', 'Note that other user-driven trace attribute changes are controlled', 'by `layout` attributes:', '`trace.visible` is controlled by `layout.legend.uirevision`,', '`selectedpoints` is controlled by `layout.selectionrevision`,', 'and `colorbar.(x|y)` (accessible with `config: {editable: true}`)', 'is controlled by `layout.editrevision`.', 'Trace changes are tracked by `uid`, which only falls back on trace', 'index if no `uid` is provided. So if your app can add/remove traces', 'before the end of the `data` array, such that the same trace has a', 'different index, you can still preserve user-driven changes if you', 'give each trace a `uid` that stays with it as it moves.'].join(' ')\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  _isLinkedToArray: 'frames_entry',\n  group: {\n    valType: 'string',\n    role: 'info',\n    description: ['An identifier that specifies the group to which the frame belongs,', 'used by animate to select a subset of frames.'].join(' ')\n  },\n  name: {\n    valType: 'string',\n    role: 'info',\n    description: 'A label by which to identify the frame'\n  },\n  traces: {\n    valType: 'any',\n    role: 'info',\n    description: ['A list of trace indices that identify the respective traces in the', 'data attribute'].join(' ')\n  },\n  baseframe: {\n    valType: 'string',\n    role: 'info',\n    description: ['The name of the frame into which this frame\\'s properties are merged', 'before applying. This is used to unify properties and avoid needing', 'to specify the same values for the same properties in multiple frames.'].join(' ')\n  },\n  data: {\n    valType: 'any',\n    role: 'object',\n    description: ['A list of traces this frame modifies. The format is identical to the', 'normal trace definition.'].join(' ')\n  },\n  layout: {\n    valType: 'any',\n    role: 'object',\n    description: ['Layout properties which this frame modifies. The format is identical', 'to the normal layout definition.'].join(' ')\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nvar axisIds = require('../../plots/cartesian/axis_ids');\n\nvar scatterSubTypes = require('../../traces/scatter/subtypes');\n\nvar Registry = require('../../registry');\n\nvar createModeBar = require('./modebar');\n\nvar modeBarButtons = require('./buttons');\n/**\n * ModeBar wrapper around 'create' and 'update',\n * chooses buttons to pass to ModeBar constructor based on\n * plot type and plot config.\n *\n * @param {object} gd main plot object\n *\n */\n\n\nmodule.exports = function manageModeBar(gd) {\n  var fullLayout = gd._fullLayout;\n  var context = gd._context;\n  var modeBar = fullLayout._modeBar;\n\n  if (!context.displayModeBar && !context.watermark) {\n    if (modeBar) {\n      modeBar.destroy();\n      delete fullLayout._modeBar;\n    }\n\n    return;\n  }\n\n  if (!Array.isArray(context.modeBarButtonsToRemove)) {\n    throw new Error(['*modeBarButtonsToRemove* configuration options', 'must be an array.'].join(' '));\n  }\n\n  if (!Array.isArray(context.modeBarButtonsToAdd)) {\n    throw new Error(['*modeBarButtonsToAdd* configuration options', 'must be an array.'].join(' '));\n  }\n\n  var customButtons = context.modeBarButtons;\n  var buttonGroups;\n\n  if (Array.isArray(customButtons) && customButtons.length) {\n    buttonGroups = fillCustomButton(customButtons);\n  } else if (!context.displayModeBar && context.watermark) {\n    buttonGroups = [];\n  } else {\n    buttonGroups = getButtonGroups(gd);\n  }\n\n  if (modeBar) modeBar.update(gd, buttonGroups);else fullLayout._modeBar = createModeBar(gd, buttonGroups);\n}; // logic behind which buttons are displayed by default\n\n\nfunction getButtonGroups(gd) {\n  var fullLayout = gd._fullLayout;\n  var fullData = gd._fullData;\n  var context = gd._context;\n  var buttonsToRemove = context.modeBarButtonsToRemove;\n  var buttonsToAdd = context.modeBarButtonsToAdd;\n\n  var hasCartesian = fullLayout._has('cartesian');\n\n  var hasGL3D = fullLayout._has('gl3d');\n\n  var hasGeo = fullLayout._has('geo');\n\n  var hasPie = fullLayout._has('pie');\n\n  var hasFunnelarea = fullLayout._has('funnelarea');\n\n  var hasGL2D = fullLayout._has('gl2d');\n\n  var hasTernary = fullLayout._has('ternary');\n\n  var hasMapbox = fullLayout._has('mapbox');\n\n  var hasPolar = fullLayout._has('polar');\n\n  var hasSankey = fullLayout._has('sankey');\n\n  var allAxesFixed = areAllAxesFixed(fullLayout);\n  var groups = [];\n\n  function addGroup(newGroup) {\n    if (!newGroup.length) return;\n    var out = [];\n\n    for (var i = 0; i < newGroup.length; i++) {\n      var button = newGroup[i];\n      if (buttonsToRemove.indexOf(button) !== -1) continue;\n      out.push(modeBarButtons[button]);\n    }\n\n    groups.push(out);\n  } // buttons common to all plot types\n\n\n  var commonGroup = ['toImage'];\n  if (context.showEditInChartStudio) commonGroup.push('editInChartStudio');else if (context.showSendToCloud) commonGroup.push('sendDataToCloud');\n  addGroup(commonGroup);\n  var zoomGroup = [];\n  var hoverGroup = [];\n  var resetGroup = [];\n  var dragModeGroup = [];\n\n  if ((hasCartesian || hasGL2D || hasPie || hasFunnelarea || hasTernary) + hasGeo + hasGL3D + hasMapbox + hasPolar > 1) {\n    // graphs with more than one plot types get 'union buttons'\n    // which reset the view or toggle hover labels across all subplots.\n    hoverGroup = ['toggleHover'];\n    resetGroup = ['resetViews'];\n  } else if (hasGeo) {\n    zoomGroup = ['zoomInGeo', 'zoomOutGeo'];\n    hoverGroup = ['hoverClosestGeo'];\n    resetGroup = ['resetGeo'];\n  } else if (hasGL3D) {\n    hoverGroup = ['hoverClosest3d'];\n    resetGroup = ['resetCameraDefault3d', 'resetCameraLastSave3d'];\n  } else if (hasMapbox) {\n    zoomGroup = ['zoomInMapbox', 'zoomOutMapbox'];\n    hoverGroup = ['toggleHover'];\n    resetGroup = ['resetViewMapbox'];\n  } else if (hasGL2D) {\n    hoverGroup = ['hoverClosestGl2d'];\n  } else if (hasPie) {\n    hoverGroup = ['hoverClosestPie'];\n  } else if (hasSankey) {\n    hoverGroup = ['hoverClosestCartesian', 'hoverCompareCartesian'];\n    resetGroup = ['resetViewSankey'];\n  } else {\n    // hasPolar, hasTernary\n    // always show at least one hover icon.\n    hoverGroup = ['toggleHover'];\n  } // if we have cartesian, allow switching between closest and compare\n  // regardless of what other types are on the plot, since they'll all\n  // just treat any truthy hovermode as 'closest'\n\n\n  if (hasCartesian) {\n    hoverGroup = ['toggleSpikelines', 'hoverClosestCartesian', 'hoverCompareCartesian'];\n  }\n\n  if (hasNoHover(fullData)) {\n    hoverGroup = [];\n  }\n\n  if ((hasCartesian || hasGL2D) && !allAxesFixed) {\n    zoomGroup = ['zoomIn2d', 'zoomOut2d', 'autoScale2d'];\n    if (resetGroup[0] !== 'resetViews') resetGroup = ['resetScale2d'];\n  }\n\n  if (hasGL3D) {\n    dragModeGroup = ['zoom3d', 'pan3d', 'orbitRotation', 'tableRotation'];\n  } else if ((hasCartesian || hasGL2D) && !allAxesFixed || hasTernary) {\n    dragModeGroup = ['zoom2d', 'pan2d'];\n  } else if (hasMapbox || hasGeo) {\n    dragModeGroup = ['pan2d'];\n  } else if (hasPolar) {\n    dragModeGroup = ['zoom2d'];\n  }\n\n  if (isSelectable(fullData)) {\n    dragModeGroup.push('select2d', 'lasso2d');\n  }\n\n  addGroup(dragModeGroup);\n  addGroup(zoomGroup.concat(resetGroup));\n  addGroup(hoverGroup);\n  return appendButtonsToGroups(groups, buttonsToAdd);\n}\n\nfunction areAllAxesFixed(fullLayout) {\n  var axList = axisIds.list({\n    _fullLayout: fullLayout\n  }, null, true);\n\n  for (var i = 0; i < axList.length; i++) {\n    if (!axList[i].fixedrange) {\n      return false;\n    }\n  }\n\n  return true;\n} // look for traces that support selection\n// to be updated as we add more selectPoints handlers\n\n\nfunction isSelectable(fullData) {\n  var selectable = false;\n\n  for (var i = 0; i < fullData.length; i++) {\n    if (selectable) break;\n    var trace = fullData[i];\n    if (!trace._module || !trace._module.selectPoints) continue;\n\n    if (Registry.traceIs(trace, 'scatter-like')) {\n      if (scatterSubTypes.hasMarkers(trace) || scatterSubTypes.hasText(trace)) {\n        selectable = true;\n      }\n    } else if (Registry.traceIs(trace, 'box-violin')) {\n      if (trace.boxpoints === 'all' || trace.points === 'all') {\n        selectable = true;\n      }\n    } else {\n      // assume that in general if the trace module has selectPoints,\n      // then it's selectable. Scatter is an exception to this because it must\n      // have markers or text, not just be a scatter type.\n      selectable = true;\n    }\n  }\n\n  return selectable;\n} // check whether all trace are 'noHover'\n\n\nfunction hasNoHover(fullData) {\n  for (var i = 0; i < fullData.length; i++) {\n    if (!Registry.traceIs(fullData[i], 'noHover')) return false;\n  }\n\n  return true;\n}\n\nfunction appendButtonsToGroups(groups, buttons) {\n  if (buttons.length) {\n    if (Array.isArray(buttons[0])) {\n      for (var i = 0; i < buttons.length; i++) {\n        groups.push(buttons[i]);\n      }\n    } else groups.push(buttons);\n  }\n\n  return groups;\n} // fill in custom buttons referring to default mode bar buttons\n\n\nfunction fillCustomButton(customButtons) {\n  for (var i = 0; i < customButtons.length; i++) {\n    var buttonGroup = customButtons[i];\n\n    for (var j = 0; j < buttonGroup.length; j++) {\n      var button = buttonGroup[j];\n\n      if (typeof button === 'string') {\n        if (modeBarButtons[button] !== undefined) {\n          customButtons[i][j] = modeBarButtons[button];\n        } else {\n          throw new Error(['*modeBarButtons* configuration options', 'invalid button name'].join(' '));\n        }\n      }\n    }\n  }\n\n  return customButtons;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nvar Registry = require('../registry');\n\nvar SUBPLOT_PATTERN = require('./cartesian/constants').SUBPLOT_PATTERN;\n/**\n * Get calcdata trace(s) associated with a given subplot\n *\n * @param {array} calcData: as in gd.calcdata\n * @param {string} type: subplot type\n * @param {string} subplotId: subplot id to look for\n *\n * @return {array} array of calcdata traces\n */\n\n\nexports.getSubplotCalcData = function (calcData, type, subplotId) {\n  var basePlotModule = Registry.subplotsRegistry[type];\n  if (!basePlotModule) return [];\n  var attr = basePlotModule.attr;\n  var subplotCalcData = [];\n\n  for (var i = 0; i < calcData.length; i++) {\n    var calcTrace = calcData[i];\n    var trace = calcTrace[0].trace;\n    if (trace[attr] === subplotId) subplotCalcData.push(calcTrace);\n  }\n\n  return subplotCalcData;\n};\n/**\n * Get calcdata trace(s) that can be plotted with a given module\n * NOTE: this isn't necessarily just exactly matching trace type,\n * if multiple trace types use the same plotting routine, they will be\n * collected here.\n * In order to not plot the same thing multiple times, we return two arrays,\n * the calcdata we *will* plot with this module, and the ones we *won't*\n *\n * @param {array} calcdata: as in gd.calcdata\n * @param {object|string|fn} arg1:\n *  the plotting module, or its name, or its plot method\n *\n * @return {array[array]} [foundCalcdata, remainingCalcdata]\n */\n\n\nexports.getModuleCalcData = function (calcdata, arg1) {\n  var moduleCalcData = [];\n  var remainingCalcData = [];\n  var plotMethod;\n\n  if (typeof arg1 === 'string') {\n    plotMethod = Registry.getModule(arg1).plot;\n  } else if (typeof arg1 === 'function') {\n    plotMethod = arg1;\n  } else {\n    plotMethod = arg1.plot;\n  }\n\n  if (!plotMethod) {\n    return [moduleCalcData, calcdata];\n  }\n\n  for (var i = 0; i < calcdata.length; i++) {\n    var cd = calcdata[i];\n    var trace = cd[0].trace; // N.B.\n    // - 'legendonly' traces do not make it past here\n    // - skip over 'visible' traces that got trimmed completely during calc transforms\n\n    if (trace.visible !== true || trace._length === 0) continue; // group calcdata trace not by 'module' (as the name of this function\n    // would suggest), but by 'module plot method' so that if some traces\n    // share the same module plot method (e.g. bar and histogram), we\n    // only call it one!\n\n    if (trace._module.plot === plotMethod) {\n      moduleCalcData.push(cd);\n    } else {\n      remainingCalcData.push(cd);\n    }\n  }\n\n  return [moduleCalcData, remainingCalcData];\n};\n/**\n * Get the data trace(s) associated with a given subplot.\n *\n * @param {array} data  plotly full data array.\n * @param {string} type subplot type to look for.\n * @param {string} subplotId subplot id to look for.\n *\n * @return {array} list of trace objects.\n *\n */\n\n\nexports.getSubplotData = function getSubplotData(data, type, subplotId) {\n  if (!Registry.subplotsRegistry[type]) return [];\n  var attr = Registry.subplotsRegistry[type].attr;\n  var subplotData = [];\n  var trace, subplotX, subplotY;\n\n  if (type === 'gl2d') {\n    var spmatch = subplotId.match(SUBPLOT_PATTERN);\n    subplotX = 'x' + spmatch[1];\n    subplotY = 'y' + spmatch[2];\n  }\n\n  for (var i = 0; i < data.length; i++) {\n    trace = data[i];\n\n    if (type === 'gl2d' && Registry.traceIs(trace, 'gl2d')) {\n      if (trace[attr[0]] === subplotX && trace[attr[1]] === subplotY) {\n        subplotData.push(trace);\n      }\n    } else {\n      if (trace[attr] === subplotId) subplotData.push(trace);\n    }\n  }\n\n  return subplotData;\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n/* eslint-disable no-console */\n\nvar dfltConfig = require('../plot_api/plot_config').dfltConfig;\n\nvar notifier = require('./notifier');\n\nvar loggers = module.exports = {};\n/**\n * ------------------------------------------\n * debugging tools\n * ------------------------------------------\n */\n\nloggers.log = function () {\n  var i;\n\n  if (dfltConfig.logging > 1) {\n    var messages = ['LOG:'];\n\n    for (i = 0; i < arguments.length; i++) {\n      messages.push(arguments[i]);\n    }\n\n    apply(console.trace || console.log, messages);\n  }\n\n  if (dfltConfig.notifyOnLogging > 1) {\n    var lines = [];\n\n    for (i = 0; i < arguments.length; i++) {\n      lines.push(arguments[i]);\n    }\n\n    notifier(lines.join('<br>'), 'long');\n  }\n};\n\nloggers.warn = function () {\n  var i;\n\n  if (dfltConfig.logging > 0) {\n    var messages = ['WARN:'];\n\n    for (i = 0; i < arguments.length; i++) {\n      messages.push(arguments[i]);\n    }\n\n    apply(console.trace || console.log, messages);\n  }\n\n  if (dfltConfig.notifyOnLogging > 0) {\n    var lines = [];\n\n    for (i = 0; i < arguments.length; i++) {\n      lines.push(arguments[i]);\n    }\n\n    notifier(lines.join('<br>'), 'stick');\n  }\n};\n\nloggers.error = function () {\n  var i;\n\n  if (dfltConfig.logging > 0) {\n    var messages = ['ERROR:'];\n\n    for (i = 0; i < arguments.length; i++) {\n      messages.push(arguments[i]);\n    }\n\n    apply(console.error, messages);\n  }\n\n  if (dfltConfig.notifyOnLogging > 0) {\n    var lines = [];\n\n    for (i = 0; i < arguments.length; i++) {\n      lines.push(arguments[i]);\n    }\n\n    notifier(lines.join('<br>'), 'stick');\n  }\n};\n/*\n * Robust apply, for IE9 where console.log doesn't support\n * apply like other functions do\n */\n\n\nfunction apply(f, args) {\n  if (f && f.apply) {\n    try {\n      // `this` should always be console, since here we're always\n      // applying a method of the console object.\n      f.apply(console, args);\n      return;\n    } catch (e) {\n      /* in case apply failed, fall back on the code below */\n    }\n  } // no apply - just try calling the function on each arg independently\n\n\n  for (var i = 0; i < args.length; i++) {\n    try {\n      f(args[i]);\n    } catch (e) {\n      // still fails - last resort simple console.log\n      console.log(args[i]);\n    }\n  }\n}","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import \"core-js/modules/es6.set\";\nimport _slicedToArray from \"/Users/astefanu/Development/website/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = node.sourceLinks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = node.targetLinks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n      for (var _iterator4 = nodes.entries()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _didIteratorError4 = true;\n      _iteratorError4 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n          _iterator4[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError4) {\n          throw _iteratorError4;\n        }\n      }\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n    var _iteratorNormalCompletion5 = true;\n    var _didIteratorError5 = false;\n    var _iteratorError5 = undefined;\n\n    try {\n      for (var _iterator5 = links.entries()[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _didIteratorError5 = true;\n      _iteratorError5 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n          _iterator5[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError5) {\n          throw _iteratorError5;\n        }\n      }\n    }\n\n    if (linkSort != null) {\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = nodes[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n            _iterator6[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n    var _iteratorNormalCompletion7 = true;\n    var _didIteratorError7 = false;\n    var _iteratorError7 = undefined;\n\n    try {\n      for (var _iterator7 = nodes[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _didIteratorError7 = true;\n      _iteratorError7 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion7 && _iterator7[\"return\"] != null) {\n          _iterator7[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError7) {\n          throw _iteratorError7;\n        }\n      }\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = current[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var node = _step8.value;\n          node.depth = x;\n          var _iteratorNormalCompletion9 = true;\n          var _didIteratorError9 = false;\n          var _iteratorError9 = undefined;\n\n          try {\n            for (var _iterator9 = node.sourceLinks[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _didIteratorError9 = true;\n            _iteratorError9 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion9 && _iterator9[\"return\"] != null) {\n                _iterator9[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError9) {\n                throw _iteratorError9;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8[\"return\"] != null) {\n            _iterator8[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iteratorNormalCompletion10 = true;\n      var _didIteratorError10 = false;\n      var _iteratorError10 = undefined;\n\n      try {\n        for (var _iterator10 = current[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n          var node = _step10.value;\n          node.height = x;\n          var _iteratorNormalCompletion11 = true;\n          var _didIteratorError11 = false;\n          var _iteratorError11 = undefined;\n\n          try {\n            for (var _iterator11 = node.targetLinks[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _didIteratorError11 = true;\n            _iteratorError11 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion11 && _iterator11[\"return\"] != null) {\n                _iterator11[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError11) {\n                throw _iteratorError11;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError10 = true;\n        _iteratorError10 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion10 && _iterator10[\"return\"] != null) {\n            _iterator10[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError10) {\n            throw _iteratorError10;\n          }\n        }\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n    var _iteratorNormalCompletion12 = true;\n    var _didIteratorError12 = false;\n    var _iteratorError12 = undefined;\n\n    try {\n      for (var _iterator12 = nodes[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _didIteratorError12 = true;\n      _iteratorError12 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion12 && _iterator12[\"return\"] != null) {\n          _iterator12[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError12) {\n          throw _iteratorError12;\n        }\n      }\n    }\n\n    if (sort) {\n      var _iteratorNormalCompletion13 = true;\n      var _didIteratorError13 = false;\n      var _iteratorError13 = undefined;\n\n      try {\n        for (var _iterator13 = columns[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _didIteratorError13 = true;\n        _iteratorError13 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion13 && _iterator13[\"return\"] != null) {\n            _iterator13[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError13) {\n            throw _iteratorError13;\n          }\n        }\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n    var _iteratorNormalCompletion14 = true;\n    var _didIteratorError14 = false;\n    var _iteratorError14 = undefined;\n\n    try {\n      for (var _iterator14 = columns[Symbol.iterator](), _step14; !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {\n        var _nodes = _step14.value;\n        var y = y0;\n        var _iteratorNormalCompletion15 = true;\n        var _didIteratorError15 = false;\n        var _iteratorError15 = undefined;\n\n        try {\n          for (var _iterator15 = _nodes[Symbol.iterator](), _step15; !(_iteratorNormalCompletion15 = (_step15 = _iterator15.next()).done); _iteratorNormalCompletion15 = true) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n            var _iteratorNormalCompletion16 = true;\n            var _didIteratorError16 = false;\n            var _iteratorError16 = undefined;\n\n            try {\n              for (var _iterator16 = _node.sourceLinks[Symbol.iterator](), _step16; !(_iteratorNormalCompletion16 = (_step16 = _iterator16.next()).done); _iteratorNormalCompletion16 = true) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _didIteratorError16 = true;\n              _iteratorError16 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion16 && _iterator16[\"return\"] != null) {\n                  _iterator16[\"return\"]();\n                }\n              } finally {\n                if (_didIteratorError16) {\n                  throw _iteratorError16;\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError15 = true;\n          _iteratorError15 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion15 && _iterator15[\"return\"] != null) {\n              _iterator15[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError15) {\n              throw _iteratorError15;\n            }\n          }\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _didIteratorError14 = true;\n      _iteratorError14 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion14 && _iterator14[\"return\"] != null) {\n          _iterator14[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError14) {\n          throw _iteratorError14;\n        }\n      }\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n      var _iteratorNormalCompletion17 = true;\n      var _didIteratorError17 = false;\n      var _iteratorError17 = undefined;\n\n      try {\n        for (var _iterator17 = column[Symbol.iterator](), _step17; !(_iteratorNormalCompletion17 = (_step17 = _iterator17.next()).done); _iteratorNormalCompletion17 = true) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n          var _iteratorNormalCompletion18 = true;\n          var _didIteratorError18 = false;\n          var _iteratorError18 = undefined;\n\n          try {\n            for (var _iterator18 = target.targetLinks[Symbol.iterator](), _step18; !(_iteratorNormalCompletion18 = (_step18 = _iterator18.next()).done); _iteratorNormalCompletion18 = true) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _didIteratorError18 = true;\n            _iteratorError18 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion18 && _iterator18[\"return\"] != null) {\n                _iterator18[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError18) {\n                throw _iteratorError18;\n              }\n            }\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _didIteratorError17 = true;\n        _iteratorError17 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion17 && _iterator17[\"return\"] != null) {\n            _iterator17[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError17) {\n            throw _iteratorError17;\n          }\n        }\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n      var _iteratorNormalCompletion19 = true;\n      var _didIteratorError19 = false;\n      var _iteratorError19 = undefined;\n\n      try {\n        for (var _iterator19 = column[Symbol.iterator](), _step19; !(_iteratorNormalCompletion19 = (_step19 = _iterator19.next()).done); _iteratorNormalCompletion19 = true) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n          var _iteratorNormalCompletion20 = true;\n          var _didIteratorError20 = false;\n          var _iteratorError20 = undefined;\n\n          try {\n            for (var _iterator20 = source.sourceLinks[Symbol.iterator](), _step20; !(_iteratorNormalCompletion20 = (_step20 = _iterator20.next()).done); _iteratorNormalCompletion20 = true) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _didIteratorError20 = true;\n            _iteratorError20 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion20 && _iterator20[\"return\"] != null) {\n                _iterator20[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError20) {\n                throw _iteratorError20;\n              }\n            }\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _didIteratorError19 = true;\n        _iteratorError19 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion19 && _iterator19[\"return\"] != null) {\n            _iterator19[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError19) {\n            throw _iteratorError19;\n          }\n        }\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iteratorNormalCompletion21 = true;\n      var _didIteratorError21 = false;\n      var _iteratorError21 = undefined;\n\n      try {\n        for (var _iterator21 = targetLinks[Symbol.iterator](), _step21; !(_iteratorNormalCompletion21 = (_step21 = _iterator21.next()).done); _iteratorNormalCompletion21 = true) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _didIteratorError21 = true;\n        _iteratorError21 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion21 && _iterator21[\"return\"] != null) {\n            _iterator21[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError21) {\n            throw _iteratorError21;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion22 = true;\n      var _didIteratorError22 = false;\n      var _iteratorError22 = undefined;\n\n      try {\n        for (var _iterator22 = sourceLinks[Symbol.iterator](), _step22; !(_iteratorNormalCompletion22 = (_step22 = _iterator22.next()).done); _iteratorNormalCompletion22 = true) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _didIteratorError22 = true;\n        _iteratorError22 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion22 && _iterator22[\"return\"] != null) {\n            _iterator22[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError22) {\n            throw _iteratorError22;\n          }\n        }\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iteratorNormalCompletion23 = true;\n      var _didIteratorError23 = false;\n      var _iteratorError23 = undefined;\n\n      try {\n        for (var _iterator23 = nodes[Symbol.iterator](), _step23; !(_iteratorNormalCompletion23 = (_step23 = _iterator23.next()).done); _iteratorNormalCompletion23 = true) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _didIteratorError23 = true;\n        _iteratorError23 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion23 && _iterator23[\"return\"] != null) {\n            _iterator23[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError23) {\n            throw _iteratorError23;\n          }\n        }\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n    var _iteratorNormalCompletion24 = true;\n    var _didIteratorError24 = false;\n    var _iteratorError24 = undefined;\n\n    try {\n      for (var _iterator24 = source.sourceLinks[Symbol.iterator](), _step24; !(_iteratorNormalCompletion24 = (_step24 = _iterator24.next()).done); _iteratorNormalCompletion24 = true) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _didIteratorError24 = true;\n      _iteratorError24 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion24 && _iterator24[\"return\"] != null) {\n          _iterator24[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError24) {\n          throw _iteratorError24;\n        }\n      }\n    }\n\n    var _iteratorNormalCompletion25 = true;\n    var _didIteratorError25 = false;\n    var _iteratorError25 = undefined;\n\n    try {\n      for (var _iterator25 = target.targetLinks[Symbol.iterator](), _step25; !(_iteratorNormalCompletion25 = (_step25 = _iterator25.next()).done); _iteratorNormalCompletion25 = true) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _didIteratorError25 = true;\n      _iteratorError25 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion25 && _iterator25[\"return\"] != null) {\n          _iterator25[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError25) {\n          throw _iteratorError25;\n        }\n      }\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n    var _iteratorNormalCompletion26 = true;\n    var _didIteratorError26 = false;\n    var _iteratorError26 = undefined;\n\n    try {\n      for (var _iterator26 = target.targetLinks[Symbol.iterator](), _step26; !(_iteratorNormalCompletion26 = (_step26 = _iterator26.next()).done); _iteratorNormalCompletion26 = true) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _didIteratorError26 = true;\n      _iteratorError26 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion26 && _iterator26[\"return\"] != null) {\n          _iterator26[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError26) {\n          throw _iteratorError26;\n        }\n      }\n    }\n\n    var _iteratorNormalCompletion27 = true;\n    var _didIteratorError27 = false;\n    var _iteratorError27 = undefined;\n\n    try {\n      for (var _iterator27 = source.sourceLinks[Symbol.iterator](), _step27; !(_iteratorNormalCompletion27 = (_step27 = _iterator27.next()).done); _iteratorNormalCompletion27 = true) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _didIteratorError27 = true;\n      _iteratorError27 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion27 && _iterator27[\"return\"] != null) {\n          _iterator27[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError27) {\n          throw _iteratorError27;\n        }\n      }\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}","export { default as sankey } from \"./sankey.js\";\nexport { center as sankeyCenter, left as sankeyLeft, right as sankeyRight, justify as sankeyJustify } from \"./align.js\";\nexport { default as sankeyLinkHorizontal } from \"./sankeyLinkHorizontal.js\";","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // Simple helper functions\n// none of these need any external deps\n\nmodule.exports = function noop() {};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar axesAttrs = require('../../cartesian/layout_attributes');\n\nvar extendFlat = require('../../../lib/extend').extendFlat;\n\nvar overrideAll = require('../../../plot_api/edit_types').overrideAll;\n\nvar deprecationWarning = ['Legacy polar charts are deprecated!', 'Please switch to *polar* subplots.'].join(' ');\nvar domainAttr = extendFlat({}, axesAttrs.domain, {\n  description: ['Polar chart subplots are not supported yet.', 'This key has currently no effect.'].join(' ')\n});\n\nfunction mergeAttrs(axisName, nonCommonAttrs) {\n  var commonAttrs = {\n    showline: {\n      valType: 'boolean',\n      role: 'style',\n      description: [deprecationWarning, 'Determines whether or not the line bounding this', axisName, 'axis', 'will be shown on the figure.'].join(' ')\n    },\n    showticklabels: {\n      valType: 'boolean',\n      role: 'style',\n      description: [deprecationWarning, 'Determines whether or not the', axisName, 'axis ticks', 'will feature tick labels.'].join(' ')\n    },\n    tickorientation: {\n      valType: 'enumerated',\n      values: ['horizontal', 'vertical'],\n      role: 'style',\n      description: [deprecationWarning, 'Sets the orientation (from the paper perspective)', 'of the', axisName, 'axis tick labels.'].join(' ')\n    },\n    ticklen: {\n      valType: 'number',\n      min: 0,\n      role: 'style',\n      description: [deprecationWarning, 'Sets the length of the tick lines on this', axisName, 'axis.'].join(' ')\n    },\n    tickcolor: {\n      valType: 'color',\n      role: 'style',\n      description: [deprecationWarning, 'Sets the color of the tick lines on this', axisName, 'axis.'].join(' ')\n    },\n    ticksuffix: {\n      valType: 'string',\n      role: 'style',\n      description: [deprecationWarning, 'Sets the length of the tick lines on this', axisName, 'axis.'].join(' ')\n    },\n    endpadding: {\n      valType: 'number',\n      role: 'style',\n      description: deprecationWarning\n    },\n    visible: {\n      valType: 'boolean',\n      role: 'info',\n      description: [deprecationWarning, 'Determines whether or not this axis will be visible.'].join(' ')\n    }\n  };\n  return extendFlat({}, nonCommonAttrs, commonAttrs);\n}\n\nmodule.exports = overrideAll({\n  radialaxis: mergeAttrs('radial', {\n    range: {\n      valType: 'info_array',\n      role: 'info',\n      items: [{\n        valType: 'number'\n      }, {\n        valType: 'number'\n      }],\n      description: [deprecationWarning, 'Defines the start and end point of this radial axis.'].join(' ')\n    },\n    domain: domainAttr,\n    orientation: {\n      valType: 'number',\n      role: 'style',\n      description: [deprecationWarning, 'Sets the orientation (an angle with respect to the origin)', 'of the radial axis.'].join(' ')\n    }\n  }),\n  angularaxis: mergeAttrs('angular', {\n    range: {\n      valType: 'info_array',\n      role: 'info',\n      items: [{\n        valType: 'number',\n        dflt: 0\n      }, {\n        valType: 'number',\n        dflt: 360\n      }],\n      description: [deprecationWarning, 'Defines the start and end point of this angular axis.'].join(' ')\n    },\n    domain: domainAttr\n  }),\n  // attributes that appear at layout root\n  layout: {\n    direction: {\n      valType: 'enumerated',\n      values: ['clockwise', 'counterclockwise'],\n      role: 'info',\n      description: [deprecationWarning, 'Sets the direction corresponding to positive angles', 'in legacy polar charts.'].join(' ')\n    },\n    orientation: {\n      valType: 'angle',\n      role: 'info',\n      description: [deprecationWarning, 'Rotates the entire polar by the given angle', 'in legacy polar charts.'].join(' ')\n    }\n  }\n}, 'plot', 'nested');","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nvar dot = require('./matrix').dot;\n\nvar BADNUM = require('../constants/numerical').BADNUM;\n\nvar polygon = module.exports = {};\n/**\n * Turn an array of [x, y] pairs into a polygon object\n * that can test if points are inside it\n *\n * @param ptsIn Array of [x, y] pairs\n *\n * @returns polygon Object {xmin, xmax, ymin, ymax, pts, contains}\n *      (x|y)(min|max) are the bounding rect of the polygon\n *      pts is the original array, with the first pair repeated at the end\n *      contains is a function: (pt, omitFirstEdge)\n *          pt is the [x, y] pair to test\n *          omitFirstEdge truthy means points exactly on the first edge don't\n *              count. This is for use adding one polygon to another so we\n *              don't double-count the edge where they meet.\n *          returns boolean: is pt inside the polygon (including on its edges)\n */\n\npolygon.tester = function tester(ptsIn) {\n  var pts = ptsIn.slice();\n  var xmin = pts[0][0];\n  var xmax = xmin;\n  var ymin = pts[0][1];\n  var ymax = ymin;\n  var i;\n  pts.push(pts[0]);\n\n  for (i = 1; i < pts.length; i++) {\n    xmin = Math.min(xmin, pts[i][0]);\n    xmax = Math.max(xmax, pts[i][0]);\n    ymin = Math.min(ymin, pts[i][1]);\n    ymax = Math.max(ymax, pts[i][1]);\n  } // do we have a rectangle? Handle this here, so we can use the same\n  // tester for the rectangular case without sacrificing speed\n\n\n  var isRect = false;\n  var rectFirstEdgeTest;\n\n  if (pts.length === 5) {\n    if (pts[0][0] === pts[1][0]) {\n      // vert, horz, vert, horz\n      if (pts[2][0] === pts[3][0] && pts[0][1] === pts[3][1] && pts[1][1] === pts[2][1]) {\n        isRect = true;\n\n        rectFirstEdgeTest = function rectFirstEdgeTest(pt) {\n          return pt[0] === pts[0][0];\n        };\n      }\n    } else if (pts[0][1] === pts[1][1]) {\n      // horz, vert, horz, vert\n      if (pts[2][1] === pts[3][1] && pts[0][0] === pts[3][0] && pts[1][0] === pts[2][0]) {\n        isRect = true;\n\n        rectFirstEdgeTest = function rectFirstEdgeTest(pt) {\n          return pt[1] === pts[0][1];\n        };\n      }\n    }\n  }\n\n  function rectContains(pt, omitFirstEdge) {\n    var x = pt[0];\n    var y = pt[1];\n\n    if (x === BADNUM || x < xmin || x > xmax || y === BADNUM || y < ymin || y > ymax) {\n      // pt is outside the bounding box of polygon\n      return false;\n    }\n\n    if (omitFirstEdge && rectFirstEdgeTest(pt)) return false;\n    return true;\n  }\n\n  function contains(pt, omitFirstEdge) {\n    var x = pt[0];\n    var y = pt[1];\n\n    if (x === BADNUM || x < xmin || x > xmax || y === BADNUM || y < ymin || y > ymax) {\n      // pt is outside the bounding box of polygon\n      return false;\n    }\n\n    var imax = pts.length;\n    var x1 = pts[0][0];\n    var y1 = pts[0][1];\n    var crossings = 0;\n    var i;\n    var x0;\n    var y0;\n    var xmini;\n    var ycross;\n\n    for (i = 1; i < imax; i++) {\n      // find all crossings of a vertical line upward from pt with\n      // polygon segments\n      // crossings exactly at xmax don't count, unless the point is\n      // exactly on the segment, then it counts as inside.\n      x0 = x1;\n      y0 = y1;\n      x1 = pts[i][0];\n      y1 = pts[i][1];\n      xmini = Math.min(x0, x1);\n\n      if (x < xmini || x > Math.max(x0, x1) || y > Math.max(y0, y1)) {\n        // outside the bounding box of this segment, it's only a crossing\n        // if it's below the box.\n        continue;\n      } else if (y < Math.min(y0, y1)) {\n        // don't count the left-most point of the segment as a crossing\n        // because we don't want to double-count adjacent crossings\n        // UNLESS the polygon turns past vertical at exactly this x\n        // Note that this is repeated below, but we can't factor it out\n        // because\n        if (x !== xmini) crossings++;\n      } else {\n        // inside the bounding box, check the actual line intercept\n        // vertical segment - we know already that the point is exactly\n        // on the segment, so mark the crossing as exactly at the point.\n        if (x1 === x0) ycross = y; // any other angle\n        else ycross = y0 + (x - x0) * (y1 - y0) / (x1 - x0); // exactly on the edge: counts as inside the polygon, unless it's the\n        // first edge and we're omitting it.\n\n        if (y === ycross) {\n          if (i === 1 && omitFirstEdge) return false;\n          return true;\n        }\n\n        if (y <= ycross && x !== xmini) crossings++;\n      }\n    } // if we've gotten this far, odd crossings means inside, even is outside\n\n\n    return crossings % 2 === 1;\n  } // detect if poly is degenerate\n\n\n  var degenerate = true;\n  var lastPt = pts[0];\n\n  for (i = 1; i < pts.length; i++) {\n    if (lastPt[0] !== pts[i][0] || lastPt[1] !== pts[i][1]) {\n      degenerate = false;\n      break;\n    }\n  }\n\n  return {\n    xmin: xmin,\n    xmax: xmax,\n    ymin: ymin,\n    ymax: ymax,\n    pts: pts,\n    contains: isRect ? rectContains : contains,\n    isRect: isRect,\n    degenerate: degenerate\n  };\n};\n/**\n * Test if a segment of a points array is bent or straight\n *\n * @param pts Array of [x, y] pairs\n * @param start the index of the proposed start of the straight section\n * @param end the index of the proposed end point\n * @param tolerance the max distance off the line connecting start and end\n *      before the line counts as bent\n * @returns boolean: true means this segment is bent, false means straight\n */\n\n\npolygon.isSegmentBent = function isSegmentBent(pts, start, end, tolerance) {\n  var startPt = pts[start];\n  var segment = [pts[end][0] - startPt[0], pts[end][1] - startPt[1]];\n  var segmentSquared = dot(segment, segment);\n  var segmentLen = Math.sqrt(segmentSquared);\n  var unitPerp = [-segment[1] / segmentLen, segment[0] / segmentLen];\n  var i;\n  var part;\n  var partParallel;\n\n  for (i = start + 1; i < end; i++) {\n    part = [pts[i][0] - startPt[0], pts[i][1] - startPt[1]];\n    partParallel = dot(part, segment);\n    if (partParallel < 0 || partParallel > segmentSquared || Math.abs(dot(part, unitPerp)) > tolerance) return true;\n  }\n\n  return false;\n};\n/**\n * Make a filtering polygon, to minimize the number of segments\n *\n * @param pts Array of [x, y] pairs (must start with at least 1 pair)\n * @param tolerance the maximum deviation from straight allowed for\n *      removing points to simplify the polygon\n *\n * @returns Object {addPt, raw, filtered}\n *      addPt is a function(pt: [x, y] pair) to add a raw point and\n *          continue filtering\n *      raw is all the input points\n *      filtered is the resulting filtered Array of [x, y] pairs\n */\n\n\npolygon.filter = function filter(pts, tolerance) {\n  var ptsFiltered = [pts[0]];\n  var doneRawIndex = 0;\n  var doneFilteredIndex = 0;\n\n  function addPt(pt) {\n    pts.push(pt);\n    var prevFilterLen = ptsFiltered.length;\n    var iLast = doneRawIndex;\n    ptsFiltered.splice(doneFilteredIndex + 1);\n\n    for (var i = iLast + 1; i < pts.length; i++) {\n      if (i === pts.length - 1 || polygon.isSegmentBent(pts, iLast, i + 1, tolerance)) {\n        ptsFiltered.push(pts[i]);\n\n        if (ptsFiltered.length < prevFilterLen - 2) {\n          doneRawIndex = i;\n          doneFilteredIndex = ptsFiltered.length - 1;\n        }\n\n        iLast = i;\n      }\n    }\n  }\n\n  if (pts.length > 1) {\n    var lastPt = pts.pop();\n    addPt(lastPt);\n  }\n\n  return {\n    addPt: addPt,\n    raw: pts,\n    filtered: ptsFiltered\n  };\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar d3 = require('d3');\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Registry = require('../registry');\n\nvar PlotSchema = require('../plot_api/plot_schema');\n\nvar Template = require('../plot_api/plot_template');\n\nvar Lib = require('../lib');\n\nvar Color = require('../components/color');\n\nvar BADNUM = require('../constants/numerical').BADNUM;\n\nvar axisIDs = require('./cartesian/axis_ids');\n\nvar animationAttrs = require('./animation_attributes');\n\nvar frameAttrs = require('./frame_attributes');\n\nvar getModuleCalcData = require('../plots/get_data').getModuleCalcData;\n\nvar relinkPrivateKeys = Lib.relinkPrivateKeys;\nvar _ = Lib._;\nvar plots = module.exports = {}; // Expose registry methods on Plots for backward-compatibility\n\nLib.extendFlat(plots, Registry);\nplots.attributes = require('./attributes');\nplots.attributes.type.values = plots.allTypes;\nplots.fontAttrs = require('./font_attributes');\nplots.layoutAttributes = require('./layout_attributes'); // TODO make this a plot attribute?\n\nplots.fontWeight = 'normal';\nvar transformsRegistry = plots.transformsRegistry;\n\nvar commandModule = require('./command');\n\nplots.executeAPICommand = commandModule.executeAPICommand;\nplots.computeAPICommandBindings = commandModule.computeAPICommandBindings;\nplots.manageCommandObserver = commandModule.manageCommandObserver;\nplots.hasSimpleAPICommandBindings = commandModule.hasSimpleAPICommandBindings; // in some cases the browser doesn't seem to know how big\n// the text is at first, so it needs to draw it,\n// then wait a little, then draw it again\n\nplots.redrawText = function (gd) {\n  gd = Lib.getGraphDiv(gd);\n  var fullLayout = gd._fullLayout || {};\n\n  var hasPolar = fullLayout._has && fullLayout._has('polar');\n\n  var hasLegacyPolar = !hasPolar && gd.data && gd.data[0] && gd.data[0].r; // do not work if polar is present\n\n  if (hasLegacyPolar) return;\n  return new Promise(function (resolve) {\n    setTimeout(function () {\n      Registry.getComponentMethod('annotations', 'draw')(gd);\n      Registry.getComponentMethod('legend', 'draw')(gd);\n      Registry.getComponentMethod('colorbar', 'draw')(gd);\n      resolve(plots.previousPromises(gd));\n    }, 300);\n  });\n}; // resize plot about the container size\n\n\nplots.resize = function (gd) {\n  gd = Lib.getGraphDiv(gd);\n  var resolveLastResize;\n  var p = new Promise(function (resolve, reject) {\n    if (!gd || Lib.isHidden(gd)) {\n      reject(new Error('Resize must be passed a displayed plot div element.'));\n    }\n\n    if (gd._redrawTimer) clearTimeout(gd._redrawTimer);\n    if (gd._resolveResize) resolveLastResize = gd._resolveResize;\n    gd._resolveResize = resolve;\n    gd._redrawTimer = setTimeout(function () {\n      // return if there is nothing to resize or is hidden\n      if (!gd.layout || gd.layout.width && gd.layout.height || Lib.isHidden(gd)) {\n        resolve(gd);\n        return;\n      }\n\n      delete gd.layout.width;\n      delete gd.layout.height; // autosizing doesn't count as a change that needs saving\n\n      var oldchanged = gd.changed; // nor should it be included in the undo queue\n\n      gd.autoplay = true;\n      Registry.call('relayout', gd, {\n        autosize: true\n      }).then(function () {\n        gd.changed = oldchanged; // Only resolve if a new call hasn't been made!\n\n        if (gd._resolveResize === resolve) {\n          delete gd._resolveResize;\n          resolve(gd);\n        }\n      });\n    }, 100);\n  });\n  if (resolveLastResize) resolveLastResize(p);\n  return p;\n}; // for use in Lib.syncOrAsync, check if there are any\n// pending promises in this plot and wait for them\n\n\nplots.previousPromises = function (gd) {\n  if ((gd._promises || []).length) {\n    return Promise.all(gd._promises).then(function () {\n      gd._promises = [];\n    });\n  }\n};\n/**\n * Adds the 'Edit chart' link.\n * Note that now Plotly.plot() calls this so it can regenerate whenever it replots\n *\n * Add source links to your graph inside the 'showSources' config argument.\n */\n\n\nplots.addLinks = function (gd) {\n  // Do not do anything if showLink and showSources are not set to true in config\n  if (!gd._context.showLink && !gd._context.showSources) return;\n  var fullLayout = gd._fullLayout;\n  var linkContainer = Lib.ensureSingle(fullLayout._paper, 'text', 'js-plot-link-container', function (s) {\n    s.style({\n      'font-family': '\"Open Sans\", Arial, sans-serif',\n      'font-size': '12px',\n      'fill': Color.defaultLine,\n      'pointer-events': 'all'\n    }).each(function () {\n      var links = d3.select(this);\n      links.append('tspan').classed('js-link-to-tool', true);\n      links.append('tspan').classed('js-link-spacer', true);\n      links.append('tspan').classed('js-sourcelinks', true);\n    });\n  }); // The text node inside svg\n\n  var text = linkContainer.node();\n  var attrs = {\n    y: fullLayout._paper.attr('height') - 9\n  }; // If text's width is bigger than the layout\n  // Check that text is a child node or document.body\n  // because otherwise IE/Edge might throw an exception\n  // when calling getComputedTextLength().\n  // Apparently offsetParent is null for invisibles.\n\n  if (document.body.contains(text) && text.getComputedTextLength() >= fullLayout.width - 20) {\n    // Align the text at the left\n    attrs['text-anchor'] = 'start';\n    attrs.x = 5;\n  } else {\n    // Align the text at the right\n    attrs['text-anchor'] = 'end';\n    attrs.x = fullLayout._paper.attr('width') - 7;\n  }\n\n  linkContainer.attr(attrs);\n  var toolspan = linkContainer.select('.js-link-to-tool');\n  var spacespan = linkContainer.select('.js-link-spacer');\n  var sourcespan = linkContainer.select('.js-sourcelinks');\n  if (gd._context.showSources) gd._context.showSources(gd); // 'view in plotly' link for embedded plots\n\n  if (gd._context.showLink) positionPlayWithData(gd, toolspan); // separator if we have both sources and tool link\n\n  spacespan.text(toolspan.text() && sourcespan.text() ? ' - ' : '');\n}; // note that now this function is only adding the brand in\n// iframes and 3rd-party apps\n\n\nfunction positionPlayWithData(gd, container) {\n  container.text('');\n  var link = container.append('a').attr({\n    'xlink:xlink:href': '#',\n    'class': 'link--impt link--embedview',\n    'font-weight': 'bold'\n  }).text(gd._context.linkText + ' ' + String.fromCharCode(187));\n\n  if (gd._context.sendData) {\n    link.on('click', function () {\n      plots.sendDataToCloud(gd);\n    });\n  } else {\n    var path = window.location.pathname.split('/');\n    var query = window.location.search;\n    link.attr({\n      'xlink:xlink:show': 'new',\n      'xlink:xlink:href': '/' + path[2].split('.')[0] + '/' + path[1] + query\n    });\n  }\n}\n\nplots.sendDataToCloud = function (gd) {\n  gd.emit('plotly_beforeexport');\n  var baseUrl = (window.PLOTLYENV || {}).BASE_URL || gd._context.plotlyServerURL;\n  var hiddenformDiv = d3.select(gd).append('div').attr('id', 'hiddenform').style('display', 'none');\n  var hiddenform = hiddenformDiv.append('form').attr({\n    action: baseUrl + '/external',\n    method: 'post',\n    target: '_blank'\n  });\n  var hiddenformInput = hiddenform.append('input').attr({\n    type: 'text',\n    name: 'data'\n  });\n  hiddenformInput.node().value = plots.graphJson(gd, false, 'keepdata');\n  hiddenform.node().submit();\n  hiddenformDiv.remove();\n  gd.emit('plotly_afterexport');\n  return false;\n};\n\nvar d3FormatKeys = ['days', 'shortDays', 'months', 'shortMonths', 'periods', 'dateTime', 'date', 'time', 'decimal', 'thousands', 'grouping', 'currency'];\nvar extraFormatKeys = ['year', 'month', 'dayMonth', 'dayMonthYear'];\n/*\n * Fill in default values\n * @param {DOM element} gd\n * @param {object} opts\n * @param {boolean} opts.skipUpdateCalc: normally if the existing gd.calcdata looks\n *   compatible with the new gd._fullData we finish by linking the new _fullData traces\n *   to the old gd.calcdata, so it's correctly set if we're not going to recalc. But also,\n *   if there are calcTransforms on the trace, we first remap data arrays from the old full\n *   trace into the new one. Use skipUpdateCalc to defer this (needed by Plotly.react)\n *\n * gd.data, gd.layout:\n *   are precisely what the user specified (except as modified by cleanData/cleanLayout),\n *   these fields shouldn't be modified (except for filling in some auto values)\n *   nor used directly after the supply defaults step.\n *\n * gd._fullData, gd._fullLayout:\n *   are complete descriptions of how to draw the plot,\n *   use these fields in all required computations.\n *\n * gd._fullLayout._modules\n *   is a list of all the trace modules required to draw the plot.\n *\n * gd._fullLayout._visibleModules\n *   subset of _modules, a list of modules corresponding to visible:true traces.\n *\n * gd._fullLayout._basePlotModules\n *   is a list of all the plot modules required to draw the plot.\n *\n * gd._fullLayout._transformModules\n *   is a list of all the transform modules invoked.\n *\n */\n\nplots.supplyDefaults = function (gd, opts) {\n  var skipUpdateCalc = opts && opts.skipUpdateCalc;\n  var oldFullLayout = gd._fullLayout || {};\n\n  if (oldFullLayout._skipDefaults) {\n    delete oldFullLayout._skipDefaults;\n    return;\n  }\n\n  var newFullLayout = gd._fullLayout = {};\n  var newLayout = gd.layout || {};\n  var oldFullData = gd._fullData || [];\n  var newFullData = gd._fullData = [];\n  var newData = gd.data || [];\n  var oldCalcdata = gd.calcdata || [];\n  var context = gd._context || {};\n  var i; // Create all the storage space for frames, but only if doesn't already exist\n\n  if (!gd._transitionData) plots.createTransitionData(gd); // So we only need to do this once (and since we have gd here)\n  // get the translated placeholder titles.\n  // These ones get used as default values so need to be known at supplyDefaults\n  // others keep their blank defaults but render the placeholder as desired later\n  // TODO: make these work the same way, only inserting the placeholder text at draw time?\n  // The challenge is that this has slightly different behavior right now in editable mode:\n  // using the placeholder as default makes this text permanently (but lightly) visible,\n  // but explicit '' for these titles gives you a placeholder that's hidden until you mouse\n  // over it - so you're not distracted by it if you really don't want a title, but if you do\n  // and you're new to plotly you may not be able to find it.\n  // When editable=false the two behave the same, no title is drawn.\n\n  newFullLayout._dfltTitle = {\n    plot: _(gd, 'Click to enter Plot title'),\n    x: _(gd, 'Click to enter X axis title'),\n    y: _(gd, 'Click to enter Y axis title'),\n    colorbar: _(gd, 'Click to enter Colorscale title'),\n    annotation: _(gd, 'new text')\n  };\n  newFullLayout._traceWord = _(gd, 'trace');\n  var formatObj = getFormatObj(gd, d3FormatKeys); // stash the token from context so mapbox subplots can use it as default\n\n  newFullLayout._mapboxAccessToken = context.mapboxAccessToken; // first fill in what we can of layout without looking at data\n  // because fullData needs a few things from layout\n\n  if (oldFullLayout._initialAutoSizeIsDone) {\n    // coerce the updated layout while preserving width and height\n    var oldWidth = oldFullLayout.width;\n    var oldHeight = oldFullLayout.height;\n    plots.supplyLayoutGlobalDefaults(newLayout, newFullLayout, formatObj);\n    if (!newLayout.width) newFullLayout.width = oldWidth;\n    if (!newLayout.height) newFullLayout.height = oldHeight;\n    plots.sanitizeMargins(newFullLayout);\n  } else {\n    // coerce the updated layout and autosize if needed\n    plots.supplyLayoutGlobalDefaults(newLayout, newFullLayout, formatObj);\n    var missingWidthOrHeight = !newLayout.width || !newLayout.height;\n    var autosize = newFullLayout.autosize;\n    var autosizable = context.autosizable;\n    var initialAutoSize = missingWidthOrHeight && (autosize || autosizable);\n    if (initialAutoSize) plots.plotAutoSize(gd, newLayout, newFullLayout);else if (missingWidthOrHeight) plots.sanitizeMargins(newFullLayout); // for backwards-compatibility with Plotly v1.x.x\n\n    if (!autosize && missingWidthOrHeight) {\n      newLayout.width = newFullLayout.width;\n      newLayout.height = newFullLayout.height;\n    }\n  }\n\n  newFullLayout._d3locale = getFormatter(formatObj, newFullLayout.separators);\n  newFullLayout._extraFormat = getFormatObj(gd, extraFormatKeys);\n  newFullLayout._initialAutoSizeIsDone = true; // keep track of how many traces are inputted\n\n  newFullLayout._dataLength = newData.length; // clear the lists of trace and baseplot modules, and subplots\n\n  newFullLayout._modules = [];\n  newFullLayout._visibleModules = [];\n  newFullLayout._basePlotModules = [];\n  var subplots = newFullLayout._subplots = emptySubplotLists(); // initialize axis and subplot hash objects for splom-generated grids\n\n  var splomAxes = newFullLayout._splomAxes = {\n    x: {},\n    y: {}\n  };\n  var splomSubplots = newFullLayout._splomSubplots = {}; // initialize splom grid defaults\n\n  newFullLayout._splomGridDflt = {}; // for stacked area traces to share config across traces\n\n  newFullLayout._scatterStackOpts = {}; // for the first scatter trace on each subplot (so it knows tonext->tozero)\n\n  newFullLayout._firstScatter = {}; // for grouped bar/box/violin trace to share config across traces\n\n  newFullLayout._alignmentOpts = {}; // track color axes referenced in the data\n\n  newFullLayout._colorAxes = {}; // for traces to request a default rangeslider on their x axes\n  // eg set `_requestRangeslider.x2 = true` for xaxis2\n\n  newFullLayout._requestRangeslider = {}; // pull uids from old data to use as new defaults\n\n  newFullLayout._traceUids = getTraceUids(oldFullData, newData); // then do the data\n\n  newFullLayout._globalTransforms = (gd._context || {}).globalTransforms;\n  plots.supplyDataDefaults(newData, newFullData, newLayout, newFullLayout); // redo grid size defaults with info about splom x/y axes,\n  // and fill in generated cartesian axes and subplots\n\n  var splomXa = Object.keys(splomAxes.x);\n  var splomYa = Object.keys(splomAxes.y);\n\n  if (splomXa.length > 1 && splomYa.length > 1) {\n    Registry.getComponentMethod('grid', 'sizeDefaults')(newLayout, newFullLayout);\n\n    for (i = 0; i < splomXa.length; i++) {\n      Lib.pushUnique(subplots.xaxis, splomXa[i]);\n    }\n\n    for (i = 0; i < splomYa.length; i++) {\n      Lib.pushUnique(subplots.yaxis, splomYa[i]);\n    }\n\n    for (var k in splomSubplots) {\n      Lib.pushUnique(subplots.cartesian, k);\n    }\n  } // attach helper method to check whether a plot type is present on graph\n\n\n  newFullLayout._has = plots._hasPlotType.bind(newFullLayout);\n\n  if (oldFullData.length === newFullData.length) {\n    for (i = 0; i < newFullData.length; i++) {\n      relinkPrivateKeys(newFullData[i], oldFullData[i]);\n    }\n  } // finally, fill in the pieces of layout that may need to look at data\n\n\n  plots.supplyLayoutModuleDefaults(newLayout, newFullLayout, newFullData, gd._transitionData); // Special cases that introduce interactions between traces.\n  // This is after relinkPrivateKeys so we can use those in crossTraceDefaults\n  // and after layout module defaults, so we can use eg barmode\n\n  var _modules = newFullLayout._visibleModules;\n  var crossTraceDefaultsFuncs = [];\n\n  for (i = 0; i < _modules.length; i++) {\n    var funci = _modules[i].crossTraceDefaults; // some trace types share crossTraceDefaults (ie histogram2d, histogram2dcontour)\n\n    if (funci) Lib.pushUnique(crossTraceDefaultsFuncs, funci);\n  }\n\n  for (i = 0; i < crossTraceDefaultsFuncs.length; i++) {\n    crossTraceDefaultsFuncs[i](newFullData, newFullLayout);\n  } // turn on flag to optimize large splom-only graphs\n  // mostly by omitting SVG layers during Cartesian.drawFramework\n\n\n  newFullLayout._hasOnlyLargeSploms = newFullLayout._basePlotModules.length === 1 && newFullLayout._basePlotModules[0].name === 'splom' && splomXa.length > 15 && splomYa.length > 15 && newFullLayout.shapes.length === 0 && newFullLayout.images.length === 0; // TODO remove in v2.0.0\n  // add has-plot-type refs to fullLayout for backward compatibility\n\n  newFullLayout._hasCartesian = newFullLayout._has('cartesian');\n  newFullLayout._hasGeo = newFullLayout._has('geo');\n  newFullLayout._hasGL3D = newFullLayout._has('gl3d');\n  newFullLayout._hasGL2D = newFullLayout._has('gl2d');\n  newFullLayout._hasTernary = newFullLayout._has('ternary');\n  newFullLayout._hasPie = newFullLayout._has('pie'); // relink / initialize subplot axis objects\n\n  plots.linkSubplots(newFullData, newFullLayout, oldFullData, oldFullLayout); // clean subplots and other artifacts from previous plot calls\n\n  plots.cleanPlot(newFullData, newFullLayout, oldFullData, oldFullLayout); // clear selection outline until we implement persistent selection,\n  // don't clear them though when drag handlers (e.g. listening to\n  // `plotly_selecting`) update the graph.\n  // we should try to come up with a better solution when implementing\n  // https://github.com/plotly/plotly.js/issues/1851\n\n  if (oldFullLayout._zoomlayer && !gd._dragging) {\n    oldFullLayout._zoomlayer.selectAll('.select-outline').remove();\n  } // fill in meta helpers\n\n\n  fillMetaTextHelpers(newFullData, newFullLayout); // relink functions and _ attributes to promote consistency between plots\n\n  relinkPrivateKeys(newFullLayout, oldFullLayout); // colorscale crossTraceDefaults needs newFullLayout with relinked keys\n\n  Registry.getComponentMethod('colorscale', 'crossTraceDefaults')(newFullData, newFullLayout); // For persisting GUI-driven changes in layout\n  // _preGUI and _tracePreGUI were already copied over in relinkPrivateKeys\n\n  if (!newFullLayout._preGUI) newFullLayout._preGUI = {}; // track trace GUI changes by uid rather than by trace index\n\n  if (!newFullLayout._tracePreGUI) newFullLayout._tracePreGUI = {};\n  var tracePreGUI = newFullLayout._tracePreGUI;\n  var uids = {};\n  var uid;\n\n  for (uid in tracePreGUI) {\n    uids[uid] = 'old';\n  }\n\n  for (i = 0; i < newFullData.length; i++) {\n    uid = newFullData[i]._fullInput.uid;\n    if (!uids[uid]) tracePreGUI[uid] = {};\n    uids[uid] = 'new';\n  }\n\n  for (uid in uids) {\n    if (uids[uid] === 'old') delete tracePreGUI[uid];\n  } // set up containers for margin calculations\n\n\n  initMargins(newFullLayout); // collect and do some initial calculations for rangesliders\n\n  Registry.getComponentMethod('rangeslider', 'makeData')(newFullLayout); // update object references in calcdata\n\n  if (!skipUpdateCalc && oldCalcdata.length === newFullData.length) {\n    plots.supplyDefaultsUpdateCalc(oldCalcdata, newFullData);\n  }\n};\n\nplots.supplyDefaultsUpdateCalc = function (oldCalcdata, newFullData) {\n  for (var i = 0; i < newFullData.length; i++) {\n    var newTrace = newFullData[i];\n    var cd0 = (oldCalcdata[i] || [])[0];\n\n    if (cd0 && cd0.trace) {\n      var oldTrace = cd0.trace;\n\n      if (oldTrace._hasCalcTransform) {\n        var arrayAttrs = oldTrace._arrayAttrs;\n        var j, astr, oldArrayVal;\n\n        for (j = 0; j < arrayAttrs.length; j++) {\n          astr = arrayAttrs[j];\n          oldArrayVal = Lib.nestedProperty(oldTrace, astr).get().slice();\n          Lib.nestedProperty(newTrace, astr).set(oldArrayVal);\n        }\n      }\n\n      cd0.trace = newTrace;\n    }\n  }\n};\n/**\n * Create a list of uid strings satisfying (in this order of importance):\n * 1. all unique, all strings\n * 2. matches input uids if provided\n * 3. matches previous data uids\n */\n\n\nfunction getTraceUids(oldFullData, newData) {\n  var len = newData.length;\n  var oldFullInput = [];\n  var i, prevFullInput;\n\n  for (i = 0; i < oldFullData.length; i++) {\n    var thisFullInput = oldFullData[i]._fullInput;\n    if (thisFullInput !== prevFullInput) oldFullInput.push(thisFullInput);\n    prevFullInput = thisFullInput;\n  }\n\n  var oldLen = oldFullInput.length;\n  var out = new Array(len);\n  var seenUids = {};\n\n  function setUid(uid, i) {\n    out[i] = uid;\n    seenUids[uid] = 1;\n  }\n\n  function tryUid(uid, i) {\n    if (uid && typeof uid === 'string' && !seenUids[uid]) {\n      setUid(uid, i);\n      return true;\n    }\n  }\n\n  for (i = 0; i < len; i++) {\n    var newUid = newData[i].uid;\n    if (typeof newUid === 'number') newUid = String(newUid);\n    if (tryUid(newUid, i)) continue;\n    if (i < oldLen && tryUid(oldFullInput[i].uid, i)) continue;\n    setUid(Lib.randstr(seenUids), i);\n  }\n\n  return out;\n}\n/**\n * Make a container for collecting subplots we need to display.\n *\n * Finds all subplot types we need to enumerate once and caches it,\n * but makes a new output object each time.\n * Single-trace subplots (which have no `id`) such as pie, table, etc\n * do not need to be collected because we just draw all visible traces.\n */\n\n\nfunction emptySubplotLists() {\n  var collectableSubplotTypes = Registry.collectableSubplotTypes;\n  var out = {};\n  var i, j;\n\n  if (!collectableSubplotTypes) {\n    collectableSubplotTypes = [];\n    var subplotsRegistry = Registry.subplotsRegistry;\n\n    for (var subplotType in subplotsRegistry) {\n      var subplotModule = subplotsRegistry[subplotType];\n      var subplotAttr = subplotModule.attr;\n\n      if (subplotAttr) {\n        collectableSubplotTypes.push(subplotType); // special case, currently just for cartesian:\n        // we need to enumerate axes, not just subplots\n\n        if (Array.isArray(subplotAttr)) {\n          for (j = 0; j < subplotAttr.length; j++) {\n            Lib.pushUnique(collectableSubplotTypes, subplotAttr[j]);\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < collectableSubplotTypes.length; i++) {\n    out[collectableSubplotTypes[i]] = [];\n  }\n\n  return out;\n}\n/**\n * getFormatObj: use _context to get the format object from locale.\n * Used to get d3.locale argument object and extraFormat argument object\n *\n * Regarding d3.locale argument :\n * decimal and thousands can be overridden later by layout.separators\n * grouping and currency are not presently used by our automatic number\n * formatting system but can be used by custom formats.\n *\n * @returns {object} d3.locale format object\n */\n\n\nfunction getFormatObj(gd, formatKeys) {\n  var locale = gd._context.locale;\n  if (!locale) locale === 'en-US';\n  var formatDone = false;\n  var formatObj = {};\n\n  function includeFormat(newFormat) {\n    var formatFinished = true;\n\n    for (var i = 0; i < formatKeys.length; i++) {\n      var formatKey = formatKeys[i];\n\n      if (!formatObj[formatKey]) {\n        if (newFormat[formatKey]) {\n          formatObj[formatKey] = newFormat[formatKey];\n        } else formatFinished = false;\n      }\n    }\n\n    if (formatFinished) formatDone = true;\n  } // same as localize, look for format parts in each format spec in the chain\n\n\n  for (var i = 0; i < 2; i++) {\n    var locales = gd._context.locales;\n\n    for (var j = 0; j < 2; j++) {\n      var formatj = (locales[locale] || {}).format;\n\n      if (formatj) {\n        includeFormat(formatj);\n        if (formatDone) break;\n      }\n\n      locales = Registry.localeRegistry;\n    }\n\n    var baseLocale = locale.split('-')[0];\n    if (formatDone || baseLocale === locale) break;\n    locale = baseLocale;\n  } // lastly pick out defaults from english (non-US, as DMY is so much more common)\n\n\n  if (!formatDone) includeFormat(Registry.localeRegistry.en.format);\n  return formatObj;\n}\n/**\n * getFormatter: combine the final separators with the locale formatting object\n * we pulled earlier to generate number and time formatters\n * TODO: remove separators in v2, only use locale, so we don't need this step?\n *\n * @param {object} formatObj: d3.locale format object\n * @param {string} separators: length-2 string to override decimal and thousands\n *   separators in number formatting\n *\n * @returns {object} {numberFormat, timeFormat} d3 formatter factory functions\n *   for numbers and time\n */\n\n\nfunction getFormatter(formatObj, separators) {\n  formatObj.decimal = separators.charAt(0);\n  formatObj.thousands = separators.charAt(1);\n  return d3.locale(formatObj);\n}\n\nfunction fillMetaTextHelpers(newFullData, newFullLayout) {\n  var _meta;\n\n  var meta4data = [];\n\n  if (newFullLayout.meta) {\n    _meta = newFullLayout._meta = {\n      meta: newFullLayout.meta,\n      layout: {\n        meta: newFullLayout.meta\n      }\n    };\n  }\n\n  for (var i = 0; i < newFullData.length; i++) {\n    var trace = newFullData[i];\n\n    if (trace.meta) {\n      meta4data[trace.index] = trace._meta = {\n        meta: trace.meta\n      };\n    } else if (newFullLayout.meta) {\n      trace._meta = {\n        meta: newFullLayout.meta\n      };\n    }\n\n    if (newFullLayout.meta) {\n      trace._meta.layout = {\n        meta: newFullLayout.meta\n      };\n    }\n  }\n\n  if (meta4data.length) {\n    if (!_meta) {\n      _meta = newFullLayout._meta = {};\n    }\n\n    _meta.data = meta4data;\n  }\n} // Create storage for all of the data related to frames and transitions:\n\n\nplots.createTransitionData = function (gd) {\n  // Set up the default keyframe if it doesn't exist:\n  if (!gd._transitionData) {\n    gd._transitionData = {};\n  }\n\n  if (!gd._transitionData._frames) {\n    gd._transitionData._frames = [];\n  }\n\n  if (!gd._transitionData._frameHash) {\n    gd._transitionData._frameHash = {};\n  }\n\n  if (!gd._transitionData._counter) {\n    gd._transitionData._counter = 0;\n  }\n\n  if (!gd._transitionData._interruptCallbacks) {\n    gd._transitionData._interruptCallbacks = [];\n  }\n}; // helper function to be bound to fullLayout to check\n// whether a certain plot type is present on plot\n// or trace has a category\n\n\nplots._hasPlotType = function (category) {\n  var i; // check base plot modules\n\n  var basePlotModules = this._basePlotModules || [];\n\n  for (i = 0; i < basePlotModules.length; i++) {\n    if (basePlotModules[i].name === category) return true;\n  } // check trace modules (including non-visible:true)\n\n\n  var modules = this._modules || [];\n\n  for (i = 0; i < modules.length; i++) {\n    var name = modules[i].name;\n    if (name === category) return true; // N.B. this is modules[i] along with 'categories' as a hash object\n\n    var _module = Registry.modules[name];\n    if (_module && _module.categories[category]) return true;\n  }\n\n  return false;\n};\n\nplots.cleanPlot = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var i, j;\n  var basePlotModules = oldFullLayout._basePlotModules || [];\n\n  for (i = 0; i < basePlotModules.length; i++) {\n    var _module = basePlotModules[i];\n\n    if (_module.clean) {\n      _module.clean(newFullData, newFullLayout, oldFullData, oldFullLayout);\n    }\n  }\n\n  var hadGl = oldFullLayout._has && oldFullLayout._has('gl');\n\n  var hasGl = newFullLayout._has && newFullLayout._has('gl');\n\n  if (hadGl && !hasGl) {\n    if (oldFullLayout._glcontainer !== undefined) {\n      oldFullLayout._glcontainer.selectAll('.gl-canvas').remove();\n\n      oldFullLayout._glcontainer.selectAll('.no-webgl').remove();\n\n      oldFullLayout._glcanvas = null;\n    }\n  }\n\n  var hasInfoLayer = !!oldFullLayout._infolayer;\n\n  oldLoop: for (i = 0; i < oldFullData.length; i++) {\n    var oldTrace = oldFullData[i];\n    var oldUid = oldTrace.uid;\n\n    for (j = 0; j < newFullData.length; j++) {\n      var newTrace = newFullData[j];\n      if (oldUid === newTrace.uid) continue oldLoop;\n    } // clean old colorbars\n\n\n    if (hasInfoLayer) {\n      oldFullLayout._infolayer.select('.cb' + oldUid).remove();\n    }\n  }\n};\n\nplots.linkSubplots = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var i, j;\n  var oldSubplots = oldFullLayout._plots || {};\n  var newSubplots = newFullLayout._plots = {};\n  var newSubplotList = newFullLayout._subplots;\n  var mockGd = {\n    _fullData: newFullData,\n    _fullLayout: newFullLayout\n  };\n  var ids = newSubplotList.cartesian.concat(newSubplotList.gl2d || []);\n\n  for (i = 0; i < ids.length; i++) {\n    var id = ids[i];\n    var oldSubplot = oldSubplots[id];\n    var xaxis = axisIDs.getFromId(mockGd, id, 'x');\n    var yaxis = axisIDs.getFromId(mockGd, id, 'y');\n    var plotinfo; // link or create subplot object\n\n    if (oldSubplot) {\n      plotinfo = newSubplots[id] = oldSubplot;\n    } else {\n      plotinfo = newSubplots[id] = {};\n      plotinfo.id = id;\n    } // add these axis ids to each others' subplot lists\n\n\n    xaxis._counterAxes.push(yaxis._id);\n\n    yaxis._counterAxes.push(xaxis._id);\n\n    xaxis._subplotsWith.push(id);\n\n    yaxis._subplotsWith.push(id); // update x and y axis layout object refs\n\n\n    plotinfo.xaxis = xaxis;\n    plotinfo.yaxis = yaxis; // By default, we clip at the subplot level,\n    // but if one trace on a given subplot has *cliponaxis* set to false,\n    // we need to clip at the trace module layer level;\n    // find this out here, once of for all.\n\n    plotinfo._hasClipOnAxisFalse = false;\n\n    for (j = 0; j < newFullData.length; j++) {\n      var trace = newFullData[j];\n\n      if (trace.xaxis === plotinfo.xaxis._id && trace.yaxis === plotinfo.yaxis._id && trace.cliponaxis === false) {\n        plotinfo._hasClipOnAxisFalse = true;\n        break;\n      }\n    }\n  } // while we're at it, link overlaying axes to their main axes and\n  // anchored axes to the axes they're anchored to\n\n\n  var axList = axisIDs.list(mockGd, null, true);\n  var ax;\n\n  for (i = 0; i < axList.length; i++) {\n    ax = axList[i];\n    var mainAx = null;\n\n    if (ax.overlaying) {\n      mainAx = axisIDs.getFromId(mockGd, ax.overlaying); // you cannot overlay an axis that's already overlaying another\n\n      if (mainAx && mainAx.overlaying) {\n        ax.overlaying = false;\n        mainAx = null;\n      }\n    }\n\n    ax._mainAxis = mainAx || ax;\n    /*\n     * For now force overlays to overlay completely... so they\n     * can drag together correctly and share backgrounds.\n     * Later perhaps we make separate axis domain and\n     * tick/line domain or something, so they can still share\n     * the (possibly larger) dragger and background but don't\n     * have to both be drawn over that whole domain\n     */\n\n    if (mainAx) ax.domain = mainAx.domain.slice();\n    ax._anchorAxis = ax.anchor === 'free' ? null : axisIDs.getFromId(mockGd, ax.anchor);\n  } // finally, we can find the main subplot for each axis\n  // (on which the ticks & labels are drawn)\n\n\n  for (i = 0; i < axList.length; i++) {\n    ax = axList[i];\n\n    ax._counterAxes.sort(axisIDs.idSort);\n\n    ax._subplotsWith.sort(Lib.subplotSort);\n\n    ax._mainSubplot = findMainSubplot(ax, newFullLayout); // find \"full\" domain span of counter axes,\n    // this loop can be costly, so only compute it when required\n\n    if (ax._counterAxes.length && (ax.spikemode && ax.spikemode.indexOf('across') !== -1 || ax.automargin && ax.mirror && ax.anchor !== 'free' || Registry.getComponentMethod('rangeslider', 'isVisible')(ax))) {\n      var min = 1;\n      var max = 0;\n\n      for (j = 0; j < ax._counterAxes.length; j++) {\n        var ax2 = axisIDs.getFromId(mockGd, ax._counterAxes[j]);\n        min = Math.min(min, ax2.domain[0]);\n        max = Math.max(max, ax2.domain[1]);\n      }\n\n      if (min < max) {\n        ax._counterDomainMin = min;\n        ax._counterDomainMax = max;\n      }\n    }\n  }\n};\n\nfunction findMainSubplot(ax, fullLayout) {\n  var mockGd = {\n    _fullLayout: fullLayout\n  };\n  var isX = ax._id.charAt(0) === 'x';\n  var anchorAx = ax._mainAxis._anchorAxis;\n  var mainSubplotID = '';\n  var nextBestMainSubplotID = '';\n  var anchorID = ''; // First try the main ID with the anchor\n\n  if (anchorAx) {\n    anchorID = anchorAx._mainAxis._id;\n    mainSubplotID = isX ? ax._id + anchorID : anchorID + ax._id;\n  } // Then look for a subplot with the counteraxis overlaying the anchor\n  // If that fails just use the first subplot including this axis\n\n\n  if (!mainSubplotID || !fullLayout._plots[mainSubplotID]) {\n    mainSubplotID = '';\n    var counterIDs = ax._counterAxes;\n\n    for (var j = 0; j < counterIDs.length; j++) {\n      var counterPart = counterIDs[j];\n      var id = isX ? ax._id + counterPart : counterPart + ax._id;\n      if (!nextBestMainSubplotID) nextBestMainSubplotID = id;\n      var counterAx = axisIDs.getFromId(mockGd, counterPart);\n\n      if (anchorID && counterAx.overlaying === anchorID) {\n        mainSubplotID = id;\n        break;\n      }\n    }\n  }\n\n  return mainSubplotID || nextBestMainSubplotID;\n} // This function clears any trace attributes with valType: color and\n// no set dflt filed in the plot schema. This is needed because groupby (which\n// is the only transform for which this currently applies) supplies parent\n// trace defaults, then expanded trace defaults. The result is that `null`\n// colors are default-supplied and inherited as a color instead of a null.\n// The result is that expanded trace default colors have no effect, with\n// the final result that groups are indistinguishable. This function clears\n// those colors so that individual groupby groups get unique colors.\n\n\nplots.clearExpandedTraceDefaultColors = function (trace) {\n  var colorAttrs, path, i; // This uses weird closure state in order to satisfy the linter rule\n  // that we can't create functions in a loop.\n\n  function locateColorAttrs(attr, attrName, attrs, level) {\n    path[level] = attrName;\n    path.length = level + 1;\n\n    if (attr.valType === 'color' && attr.dflt === undefined) {\n      colorAttrs.push(path.join('.'));\n    }\n  }\n\n  path = []; // Get the cached colorAttrs:\n\n  colorAttrs = trace._module._colorAttrs; // Or else compute and cache the colorAttrs on the module:\n\n  if (!colorAttrs) {\n    trace._module._colorAttrs = colorAttrs = [];\n    PlotSchema.crawl(trace._module.attributes, locateColorAttrs);\n  }\n\n  for (i = 0; i < colorAttrs.length; i++) {\n    var origprop = Lib.nestedProperty(trace, '_input.' + colorAttrs[i]);\n\n    if (!origprop.get()) {\n      Lib.nestedProperty(trace, colorAttrs[i]).set(null);\n    }\n  }\n};\n\nplots.supplyDataDefaults = function (dataIn, dataOut, layout, fullLayout) {\n  var modules = fullLayout._modules;\n  var visibleModules = fullLayout._visibleModules;\n  var basePlotModules = fullLayout._basePlotModules;\n  var cnt = 0;\n  var colorCnt = 0;\n  var i, fullTrace, trace;\n  fullLayout._transformModules = [];\n\n  function pushModule(fullTrace) {\n    dataOut.push(fullTrace);\n    var _module = fullTrace._module;\n    if (!_module) return;\n    Lib.pushUnique(modules, _module);\n    if (fullTrace.visible === true) Lib.pushUnique(visibleModules, _module);\n    Lib.pushUnique(basePlotModules, fullTrace._module.basePlotModule);\n    cnt++; // TODO: do we really want color not to increment for explicitly invisible traces?\n    // This logic is weird, but matches previous behavior: traces that you explicitly\n    // set to visible:false do not increment the color, but traces WE determine to be\n    // empty or invalid (and thus set to visible:false) DO increment color.\n    // I kind of think we should just let all traces increment color, visible or not.\n    // see mock: axes-autotype-empty vs. a test of restyling visible: false that\n    // I can't find right now...\n\n    if (fullTrace._input.visible !== false) colorCnt++;\n  }\n\n  var carpetIndex = {};\n  var carpetDependents = [];\n  var dataTemplate = (layout.template || {}).data || {};\n  var templater = Template.traceTemplater(dataTemplate);\n\n  for (i = 0; i < dataIn.length; i++) {\n    trace = dataIn[i]; // reuse uid we may have pulled out of oldFullData\n    // Note: templater supplies trace type\n\n    fullTrace = templater.newTrace(trace);\n    fullTrace.uid = fullLayout._traceUids[i];\n    plots.supplyTraceDefaults(trace, fullTrace, colorCnt, fullLayout, i);\n    fullTrace.index = i;\n    fullTrace._input = trace;\n    fullTrace._expandedIndex = cnt;\n\n    if (fullTrace.transforms && fullTrace.transforms.length) {\n      var sdInvisible = trace.visible !== false && fullTrace.visible === false;\n      var expandedTraces = applyTransforms(fullTrace, dataOut, layout, fullLayout);\n\n      for (var j = 0; j < expandedTraces.length; j++) {\n        var expandedTrace = expandedTraces[j]; // No further templating during transforms.\n\n        var fullExpandedTrace = {\n          _template: fullTrace._template,\n          type: fullTrace.type,\n          // set uid using parent uid and expanded index\n          // to promote consistency between update calls\n          uid: fullTrace.uid + j\n        }; // If the first supplyDefaults created `visible: false`,\n        // clear it before running supplyDefaults a second time,\n        // because sometimes there are items we still want to coerce\n        // inside trace modules before determining that the trace is\n        // again `visible: false`, for example partial visibilities\n        // in `splom` traces.\n\n        if (sdInvisible && expandedTrace.visible === false) {\n          delete expandedTrace.visible;\n        }\n\n        plots.supplyTraceDefaults(expandedTrace, fullExpandedTrace, cnt, fullLayout, i); // relink private (i.e. underscore) keys expanded trace to full expanded trace so\n        // that transform supply-default methods can set _ keys for future use.\n\n        relinkPrivateKeys(fullExpandedTrace, expandedTrace); // add info about parent data trace\n\n        fullExpandedTrace.index = i;\n        fullExpandedTrace._input = trace;\n        fullExpandedTrace._fullInput = fullTrace; // add info about the expanded data\n\n        fullExpandedTrace._expandedIndex = cnt;\n        fullExpandedTrace._expandedInput = expandedTrace;\n        pushModule(fullExpandedTrace);\n      }\n    } else {\n      // add identify refs for consistency with transformed traces\n      fullTrace._fullInput = fullTrace;\n      fullTrace._expandedInput = fullTrace;\n      pushModule(fullTrace);\n    }\n\n    if (Registry.traceIs(fullTrace, 'carpetAxis')) {\n      carpetIndex[fullTrace.carpet] = fullTrace;\n    }\n\n    if (Registry.traceIs(fullTrace, 'carpetDependent')) {\n      carpetDependents.push(i);\n    }\n  }\n\n  for (i = 0; i < carpetDependents.length; i++) {\n    fullTrace = dataOut[carpetDependents[i]];\n    if (!fullTrace.visible) continue;\n    var carpetAxis = carpetIndex[fullTrace.carpet];\n    fullTrace._carpet = carpetAxis;\n\n    if (!carpetAxis || !carpetAxis.visible) {\n      fullTrace.visible = false;\n      continue;\n    }\n\n    fullTrace.xaxis = carpetAxis.xaxis;\n    fullTrace.yaxis = carpetAxis.yaxis;\n  }\n};\n\nplots.supplyAnimationDefaults = function (opts) {\n  opts = opts || {};\n  var i;\n  var optsOut = {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(opts || {}, optsOut, animationAttrs, attr, dflt);\n  }\n\n  coerce('mode');\n  coerce('direction');\n  coerce('fromcurrent');\n\n  if (Array.isArray(opts.frame)) {\n    optsOut.frame = [];\n\n    for (i = 0; i < opts.frame.length; i++) {\n      optsOut.frame[i] = plots.supplyAnimationFrameDefaults(opts.frame[i] || {});\n    }\n  } else {\n    optsOut.frame = plots.supplyAnimationFrameDefaults(opts.frame || {});\n  }\n\n  if (Array.isArray(opts.transition)) {\n    optsOut.transition = [];\n\n    for (i = 0; i < opts.transition.length; i++) {\n      optsOut.transition[i] = plots.supplyAnimationTransitionDefaults(opts.transition[i] || {});\n    }\n  } else {\n    optsOut.transition = plots.supplyAnimationTransitionDefaults(opts.transition || {});\n  }\n\n  return optsOut;\n};\n\nplots.supplyAnimationFrameDefaults = function (opts) {\n  var optsOut = {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(opts || {}, optsOut, animationAttrs.frame, attr, dflt);\n  }\n\n  coerce('duration');\n  coerce('redraw');\n  return optsOut;\n};\n\nplots.supplyAnimationTransitionDefaults = function (opts) {\n  var optsOut = {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(opts || {}, optsOut, animationAttrs.transition, attr, dflt);\n  }\n\n  coerce('duration');\n  coerce('easing');\n  return optsOut;\n};\n\nplots.supplyFrameDefaults = function (frameIn) {\n  var frameOut = {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(frameIn, frameOut, frameAttrs, attr, dflt);\n  }\n\n  coerce('group');\n  coerce('name');\n  coerce('traces');\n  coerce('baseframe');\n  coerce('data');\n  coerce('layout');\n  return frameOut;\n};\n\nplots.supplyTraceDefaults = function (traceIn, traceOut, colorIndex, layout, traceInIndex) {\n  var colorway = layout.colorway || Color.defaults;\n  var defaultColor = colorway[colorIndex % colorway.length];\n  var i;\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, plots.attributes, attr, dflt);\n  }\n\n  var visible = coerce('visible');\n  coerce('type');\n  coerce('name', layout._traceWord + ' ' + traceInIndex);\n  coerce('uirevision', layout.uirevision); // we want even invisible traces to make their would-be subplots visible\n  // so coerce the subplot id(s) now no matter what\n\n  var _module = plots.getModule(traceOut);\n\n  traceOut._module = _module;\n\n  if (_module) {\n    var basePlotModule = _module.basePlotModule;\n    var subplotAttr = basePlotModule.attr;\n    var subplotAttrs = basePlotModule.attributes;\n\n    if (subplotAttr && subplotAttrs) {\n      var subplots = layout._subplots;\n      var subplotId = '';\n\n      if (visible || basePlotModule.name !== 'gl2d' // for now just drop empty gl2d subplots\n      // TODO - currently if we draw an empty gl2d subplot, it draws\n      // nothing then gets stuck and you can't get it back without newPlot\n      // sort this out in the regl refactor?\n      ) {\n          if (Array.isArray(subplotAttr)) {\n            for (i = 0; i < subplotAttr.length; i++) {\n              var attri = subplotAttr[i];\n              var vali = Lib.coerce(traceIn, traceOut, subplotAttrs, attri);\n              if (subplots[attri]) Lib.pushUnique(subplots[attri], vali);\n              subplotId += vali;\n            }\n          } else {\n            subplotId = Lib.coerce(traceIn, traceOut, subplotAttrs, subplotAttr);\n          }\n\n          if (subplots[basePlotModule.name]) {\n            Lib.pushUnique(subplots[basePlotModule.name], subplotId);\n          }\n        }\n    }\n  }\n\n  if (visible) {\n    coerce('customdata');\n    coerce('ids');\n    coerce('meta');\n\n    if (Registry.traceIs(traceOut, 'showLegend')) {\n      Lib.coerce(traceIn, traceOut, _module.attributes.showlegend ? _module.attributes : plots.attributes, 'showlegend');\n      coerce('legendgroup');\n      traceOut._dfltShowLegend = true;\n    } else {\n      traceOut._dfltShowLegend = false;\n    }\n\n    if (_module) {\n      _module.supplyDefaults(traceIn, traceOut, defaultColor, layout);\n    }\n\n    if (!Registry.traceIs(traceOut, 'noOpacity')) {\n      coerce('opacity');\n    }\n\n    if (Registry.traceIs(traceOut, 'notLegendIsolatable')) {\n      // This clears out the legendonly state for traces like carpet that\n      // cannot be isolated in the legend\n      traceOut.visible = !!traceOut.visible;\n    }\n\n    if (!Registry.traceIs(traceOut, 'noHover')) {\n      if (!traceOut.hovertemplate) Lib.coerceHoverinfo(traceIn, traceOut, layout); // parcats support hover, but not hoverlabel stylings (yet)\n\n      if (traceOut.type !== 'parcats') {\n        Registry.getComponentMethod('fx', 'supplyDefaults')(traceIn, traceOut, defaultColor, layout);\n      }\n    }\n\n    if (_module && _module.selectPoints) {\n      coerce('selectedpoints');\n    }\n\n    plots.supplyTransformDefaults(traceIn, traceOut, layout);\n  }\n\n  return traceOut;\n};\n/**\n * hasMakesDataTransform: does this trace have a transform that makes its own\n * data, either by grabbing it from somewhere else or by creating it from input\n * parameters? If so, we should still keep going with supplyDefaults\n * even if the trace is invisible, which may just be because it has no data yet.\n */\n\n\nfunction hasMakesDataTransform(trace) {\n  var transforms = trace.transforms;\n\n  if (Array.isArray(transforms) && transforms.length) {\n    for (var i = 0; i < transforms.length; i++) {\n      var ti = transforms[i];\n\n      var _module = ti._module || transformsRegistry[ti.type];\n\n      if (_module && _module.makesData) return true;\n    }\n  }\n\n  return false;\n}\n\nplots.hasMakesDataTransform = hasMakesDataTransform;\n\nplots.supplyTransformDefaults = function (traceIn, traceOut, layout) {\n  // For now we only allow transforms on 1D traces, ie those that specify a _length.\n  // If we were to implement 2D transforms, we'd need to have each transform\n  // describe its own applicability and disable itself when it doesn't apply.\n  // Also allow transforms that make their own data, but not in globalTransforms\n  if (!(traceOut._length || hasMakesDataTransform(traceIn))) return;\n  var globalTransforms = layout._globalTransforms || [];\n  var transformModules = layout._transformModules || [];\n  if (!Array.isArray(traceIn.transforms) && globalTransforms.length === 0) return;\n  var containerIn = traceIn.transforms || [];\n  var transformList = globalTransforms.concat(containerIn);\n  var containerOut = traceOut.transforms = [];\n\n  for (var i = 0; i < transformList.length; i++) {\n    var transformIn = transformList[i];\n    var type = transformIn.type;\n    var _module = transformsRegistry[type];\n    var transformOut;\n    /*\n     * Supply defaults may run twice. First pass runs all supply defaults steps\n     * and adds the _module to any output transforms.\n     * If transforms exist another pass is run so that any generated traces also\n     * go through supply defaults. This has the effect of rerunning\n     * supplyTransformDefaults. If the transform does not have a `transform`\n     * function it could not have generated any new traces and the second stage\n     * is unnecessary. We detect this case with the following variables.\n     */\n\n    var isFirstStage = !(transformIn._module && transformIn._module === _module);\n    var doLaterStages = _module && typeof _module.transform === 'function';\n    if (!_module) Lib.warn('Unrecognized transform type ' + type + '.');\n\n    if (_module && _module.supplyDefaults && (isFirstStage || doLaterStages)) {\n      transformOut = _module.supplyDefaults(transformIn, traceOut, layout, traceIn);\n      transformOut.type = type;\n      transformOut._module = _module;\n      Lib.pushUnique(transformModules, _module);\n    } else {\n      transformOut = Lib.extendFlat({}, transformIn);\n    }\n\n    containerOut.push(transformOut);\n  }\n};\n\nfunction applyTransforms(fullTrace, fullData, layout, fullLayout) {\n  var container = fullTrace.transforms;\n  var dataOut = [fullTrace];\n\n  for (var i = 0; i < container.length; i++) {\n    var transform = container[i];\n    var _module = transformsRegistry[transform.type];\n\n    if (_module && _module.transform) {\n      dataOut = _module.transform(dataOut, {\n        transform: transform,\n        fullTrace: fullTrace,\n        fullData: fullData,\n        layout: layout,\n        fullLayout: fullLayout,\n        transformIndex: i\n      });\n    }\n  }\n\n  return dataOut;\n}\n\nplots.supplyLayoutGlobalDefaults = function (layoutIn, layoutOut, formatObj) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(layoutIn, layoutOut, plots.layoutAttributes, attr, dflt);\n  }\n\n  var template = layoutIn.template;\n\n  if (Lib.isPlainObject(template)) {\n    layoutOut.template = template;\n    layoutOut._template = template.layout;\n    layoutOut._dataTemplate = template.data;\n  }\n\n  var globalFont = Lib.coerceFont(coerce, 'font');\n  coerce('title.text', layoutOut._dfltTitle.plot);\n  Lib.coerceFont(coerce, 'title.font', {\n    family: globalFont.family,\n    size: Math.round(globalFont.size * 1.4),\n    color: globalFont.color\n  });\n  coerce('title.xref');\n  coerce('title.yref');\n  coerce('title.x');\n  coerce('title.y');\n  coerce('title.xanchor');\n  coerce('title.yanchor');\n  coerce('title.pad.t');\n  coerce('title.pad.r');\n  coerce('title.pad.b');\n  coerce('title.pad.l');\n  var uniformtextMode = coerce('uniformtext.mode');\n\n  if (uniformtextMode) {\n    coerce('uniformtext.minsize');\n  } // Make sure that autosize is defaulted to *true*\n  // on layouts with no set width and height for backward compatibly,\n  // in particular https://plot.ly/javascript/responsive-fluid-layout/\n  //\n  // Before https://github.com/plotly/plotly.js/pull/635 ,\n  // layouts with no set width and height were set temporary set to 'initial'\n  // to pass through the autosize routine\n  //\n  // This behavior is subject to change in v2.\n\n\n  coerce('autosize', !(layoutIn.width && layoutIn.height));\n  coerce('width');\n  coerce('height');\n  coerce('margin.l');\n  coerce('margin.r');\n  coerce('margin.t');\n  coerce('margin.b');\n  coerce('margin.pad');\n  coerce('margin.autoexpand');\n  if (layoutIn.width && layoutIn.height) plots.sanitizeMargins(layoutOut);\n  Registry.getComponentMethod('grid', 'sizeDefaults')(layoutIn, layoutOut);\n  coerce('paper_bgcolor');\n  coerce('separators', formatObj.decimal + formatObj.thousands);\n  coerce('hidesources');\n  coerce('colorway');\n  coerce('datarevision');\n  var uirevision = coerce('uirevision');\n  coerce('editrevision', uirevision);\n  coerce('selectionrevision', uirevision);\n  coerce('modebar.orientation');\n  coerce('modebar.bgcolor', Color.addOpacity(layoutOut.paper_bgcolor, 0.5));\n  var modebarDefaultColor = Color.contrast(Color.rgb(layoutOut.modebar.bgcolor));\n  coerce('modebar.color', Color.addOpacity(modebarDefaultColor, 0.3));\n  coerce('modebar.activecolor', Color.addOpacity(modebarDefaultColor, 0.7));\n  coerce('modebar.uirevision', uirevision);\n  coerce('meta'); // do not include defaults in fullLayout when users do not set transition\n\n  if (Lib.isPlainObject(layoutIn.transition)) {\n    coerce('transition.duration');\n    coerce('transition.easing');\n    coerce('transition.ordering');\n  }\n\n  Registry.getComponentMethod('calendars', 'handleDefaults')(layoutIn, layoutOut, 'calendar');\n  Registry.getComponentMethod('fx', 'supplyLayoutGlobalDefaults')(layoutIn, layoutOut, coerce);\n};\n\nplots.plotAutoSize = function plotAutoSize(gd, layout, fullLayout) {\n  var context = gd._context || {};\n  var frameMargins = context.frameMargins;\n  var newWidth;\n  var newHeight;\n  var isPlotDiv = Lib.isPlotDiv(gd);\n  if (isPlotDiv) gd.emit('plotly_autosize'); // embedded in an iframe - just take the full iframe size\n  // if we get to this point, with no aspect ratio restrictions\n\n  if (context.fillFrame) {\n    newWidth = window.innerWidth;\n    newHeight = window.innerHeight; // somehow we get a few extra px height sometimes...\n    // just hide it\n\n    document.body.style.overflow = 'hidden';\n  } else {\n    // plotly.js - let the developers do what they want, either\n    // provide height and width for the container div,\n    // specify size in layout, or take the defaults,\n    // but don't enforce any ratio restrictions\n    var computedStyle = isPlotDiv ? window.getComputedStyle(gd) : {};\n    newWidth = parseFloat(computedStyle.width) || parseFloat(computedStyle.maxWidth) || fullLayout.width;\n    newHeight = parseFloat(computedStyle.height) || parseFloat(computedStyle.maxHeight) || fullLayout.height;\n\n    if (isNumeric(frameMargins) && frameMargins > 0) {\n      var factor = 1 - 2 * frameMargins;\n      newWidth = Math.round(factor * newWidth);\n      newHeight = Math.round(factor * newHeight);\n    }\n  }\n\n  var minWidth = plots.layoutAttributes.width.min;\n  var minHeight = plots.layoutAttributes.height.min;\n  if (newWidth < minWidth) newWidth = minWidth;\n  if (newHeight < minHeight) newHeight = minHeight;\n  var widthHasChanged = !layout.width && Math.abs(fullLayout.width - newWidth) > 1;\n  var heightHasChanged = !layout.height && Math.abs(fullLayout.height - newHeight) > 1;\n\n  if (heightHasChanged || widthHasChanged) {\n    if (widthHasChanged) fullLayout.width = newWidth;\n    if (heightHasChanged) fullLayout.height = newHeight;\n  } // cache initial autosize value, used in relayout when\n  // width or height values are set to null\n\n\n  if (!gd._initialAutoSize) {\n    gd._initialAutoSize = {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  plots.sanitizeMargins(fullLayout);\n};\n\nplots.supplyLayoutModuleDefaults = function (layoutIn, layoutOut, fullData, transitionData) {\n  var componentsRegistry = Registry.componentsRegistry;\n  var basePlotModules = layoutOut._basePlotModules;\n\n  var component, i, _module;\n\n  var Cartesian = Registry.subplotsRegistry.cartesian; // check if any components need to add more base plot modules\n  // that weren't captured by traces\n\n  for (component in componentsRegistry) {\n    _module = componentsRegistry[component];\n\n    if (_module.includeBasePlot) {\n      _module.includeBasePlot(layoutIn, layoutOut);\n    }\n  } // make sure we *at least* have some cartesian axes\n\n\n  if (!basePlotModules.length) {\n    basePlotModules.push(Cartesian);\n  } // ensure all cartesian axes have at least one subplot\n\n\n  if (layoutOut._has('cartesian')) {\n    Registry.getComponentMethod('grid', 'contentDefaults')(layoutIn, layoutOut);\n    Cartesian.finalizeSubplots(layoutIn, layoutOut);\n  } // sort subplot lists\n\n\n  for (var subplotType in layoutOut._subplots) {\n    layoutOut._subplots[subplotType].sort(Lib.subplotSort);\n  } // base plot module layout defaults\n\n\n  for (i = 0; i < basePlotModules.length; i++) {\n    _module = basePlotModules[i]; // e.g. pie does not have a layout-defaults step\n\n    if (_module.supplyLayoutDefaults) {\n      _module.supplyLayoutDefaults(layoutIn, layoutOut, fullData);\n    }\n  } // trace module layout defaults\n  // use _modules rather than _visibleModules so that even\n  // legendonly traces can include settings - eg barmode, which affects\n  // legend.traceorder default value.\n\n\n  var modules = layoutOut._modules;\n\n  for (i = 0; i < modules.length; i++) {\n    _module = modules[i];\n\n    if (_module.supplyLayoutDefaults) {\n      _module.supplyLayoutDefaults(layoutIn, layoutOut, fullData);\n    }\n  } // transform module layout defaults\n\n\n  var transformModules = layoutOut._transformModules;\n\n  for (i = 0; i < transformModules.length; i++) {\n    _module = transformModules[i];\n\n    if (_module.supplyLayoutDefaults) {\n      _module.supplyLayoutDefaults(layoutIn, layoutOut, fullData, transitionData);\n    }\n  }\n\n  for (component in componentsRegistry) {\n    _module = componentsRegistry[component];\n\n    if (_module.supplyLayoutDefaults) {\n      _module.supplyLayoutDefaults(layoutIn, layoutOut, fullData);\n    }\n  }\n}; // Remove all plotly attributes from a div so it can be replotted fresh\n// TODO: these really need to be encapsulated into a much smaller set...\n\n\nplots.purge = function (gd) {\n  // note: we DO NOT remove _context because it doesn't change when we insert\n  // a new plot, and may have been set outside of our scope.\n  var fullLayout = gd._fullLayout || {};\n\n  if (fullLayout._glcontainer !== undefined) {\n    fullLayout._glcontainer.selectAll('.gl-canvas').remove();\n\n    fullLayout._glcontainer.remove();\n\n    fullLayout._glcanvas = null;\n  } // remove modebar\n\n\n  if (fullLayout._modeBar) fullLayout._modeBar.destroy();\n\n  if (gd._transitionData) {\n    // Ensure any dangling callbacks are simply dropped if the plot is purged.\n    // This is more or less only actually important for testing.\n    if (gd._transitionData._interruptCallbacks) {\n      gd._transitionData._interruptCallbacks.length = 0;\n    }\n\n    if (gd._transitionData._animationRaf) {\n      window.cancelAnimationFrame(gd._transitionData._animationRaf);\n    }\n  } // remove any planned throttles\n\n\n  Lib.clearThrottle(); // remove responsive handler\n\n  Lib.clearResponsive(gd); // data and layout\n\n  delete gd.data;\n  delete gd.layout;\n  delete gd._fullData;\n  delete gd._fullLayout;\n  delete gd.calcdata;\n  delete gd.framework;\n  delete gd.empty;\n  delete gd.fid;\n  delete gd.undoqueue; // action queue\n\n  delete gd.undonum;\n  delete gd.autoplay; // are we doing an action that doesn't go in undo queue?\n\n  delete gd.changed; // these get recreated on Plotly.plot anyway, but just to be safe\n  // (and to have a record of them...)\n\n  delete gd._promises;\n  delete gd._redrawTimer;\n  delete gd._hmlumcount;\n  delete gd._hmpixcount;\n  delete gd._transitionData;\n  delete gd._transitioning;\n  delete gd._initialAutoSize;\n  delete gd._transitioningWithDuration; // created during certain events, that *should* clean them up\n  // themselves, but may not if there was an error\n\n  delete gd._dragging;\n  delete gd._dragged;\n  delete gd._dragdata;\n  delete gd._hoverdata;\n  delete gd._snapshotInProgress;\n  delete gd._editing;\n  delete gd._mouseDownTime;\n  delete gd._legendMouseDownTime; // remove all event listeners\n\n  if (gd.removeAllListeners) gd.removeAllListeners();\n};\n\nplots.style = function (gd) {\n  var _modules = gd._fullLayout._visibleModules;\n  var styleModules = [];\n  var i; // some trace modules reuse the same style method,\n  // make sure to not unnecessary call them multiple times.\n\n  for (i = 0; i < _modules.length; i++) {\n    var _module = _modules[i];\n\n    if (_module.style) {\n      Lib.pushUnique(styleModules, _module.style);\n    }\n  }\n\n  for (i = 0; i < styleModules.length; i++) {\n    styleModules[i](gd);\n  }\n};\n\nplots.sanitizeMargins = function (fullLayout) {\n  // polar doesn't do margins...\n  if (!fullLayout || !fullLayout.margin) return;\n  var width = fullLayout.width;\n  var height = fullLayout.height;\n  var margin = fullLayout.margin;\n  var plotWidth = width - (margin.l + margin.r);\n  var plotHeight = height - (margin.t + margin.b);\n  var correction; // if margin.l + margin.r = 0 then plotWidth > 0\n  // as width >= 10 by supplyDefaults\n  // similarly for margin.t + margin.b\n\n  if (plotWidth < 0) {\n    correction = (width - 1) / (margin.l + margin.r);\n    margin.l = Math.floor(correction * margin.l);\n    margin.r = Math.floor(correction * margin.r);\n  }\n\n  if (plotHeight < 0) {\n    correction = (height - 1) / (margin.t + margin.b);\n    margin.t = Math.floor(correction * margin.t);\n    margin.b = Math.floor(correction * margin.b);\n  }\n};\n\nplots.clearAutoMarginIds = function (gd) {\n  gd._fullLayout._pushmarginIds = {};\n};\n\nplots.allowAutoMargin = function (gd, id) {\n  gd._fullLayout._pushmarginIds[id] = 1;\n};\n\nfunction initMargins(fullLayout) {\n  var margin = fullLayout.margin;\n\n  if (!fullLayout._size) {\n    var gs = fullLayout._size = {\n      l: Math.round(margin.l),\n      r: Math.round(margin.r),\n      t: Math.round(margin.t),\n      b: Math.round(margin.b),\n      p: Math.round(margin.pad)\n    };\n    gs.w = Math.round(fullLayout.width) - gs.l - gs.r;\n    gs.h = Math.round(fullLayout.height) - gs.t - gs.b;\n  }\n\n  if (!fullLayout._pushmargin) fullLayout._pushmargin = {};\n  if (!fullLayout._pushmarginIds) fullLayout._pushmarginIds = {};\n}\n/**\n * autoMargin: called by components that may need to expand the margins to\n * be rendered on-plot.\n *\n * @param {DOM element} gd\n * @param {string} id - an identifier unique (within this plot) to this object,\n *     so we can remove a previous margin expansion from the same object.\n * @param {object} o - the margin requirements of this object, or omit to delete\n *     this entry (like if it's hidden). Keys are:\n *     x, y: plot fraction of the anchor point.\n *     xl, xr, yt, yb: if the object has an extent defined in plot fraction,\n *         you can specify both edges as plot fractions in each dimension\n *     l, r, t, b: the pixels to pad past the plot fraction x[l|r] and y[t|b]\n *     pad: extra pixels to add in all directions, default 12 (why?)\n */\n\n\nplots.autoMargin = function (gd, id, o) {\n  var fullLayout = gd._fullLayout;\n  var pushMargin = fullLayout._pushmargin;\n  var pushMarginIds = fullLayout._pushmarginIds;\n\n  if (fullLayout.margin.autoexpand !== false) {\n    if (!o) {\n      delete pushMargin[id];\n      delete pushMarginIds[id];\n    } else {\n      var pad = o.pad;\n\n      if (pad === undefined) {\n        var margin = fullLayout.margin; // if no explicit pad is given, use 12px unless there's a\n        // specified margin that's smaller than that\n\n        pad = Math.min(12, margin.l, margin.r, margin.t, margin.b);\n      } // if the item is too big, just give it enough automargin to\n      // make sure you can still grab it and bring it back\n\n\n      if (o.l + o.r > fullLayout.width * 0.5) {\n        Lib.log('Margin push', id, 'is too big in x, dropping');\n        o.l = o.r = 0;\n      }\n\n      if (o.b + o.t > fullLayout.height * 0.5) {\n        Lib.log('Margin push', id, 'is too big in y, dropping');\n        o.b = o.t = 0;\n      }\n\n      var xl = o.xl !== undefined ? o.xl : o.x;\n      var xr = o.xr !== undefined ? o.xr : o.x;\n      var yt = o.yt !== undefined ? o.yt : o.y;\n      var yb = o.yb !== undefined ? o.yb : o.y;\n      pushMargin[id] = {\n        l: {\n          val: xl,\n          size: o.l + pad\n        },\n        r: {\n          val: xr,\n          size: o.r + pad\n        },\n        b: {\n          val: yb,\n          size: o.b + pad\n        },\n        t: {\n          val: yt,\n          size: o.t + pad\n        }\n      };\n      pushMarginIds[id] = 1;\n    }\n\n    if (!fullLayout._replotting) {\n      return plots.doAutoMargin(gd);\n    }\n  }\n};\n\nplots.doAutoMargin = function (gd) {\n  var fullLayout = gd._fullLayout;\n  if (!fullLayout._size) fullLayout._size = {};\n  initMargins(fullLayout);\n  var gs = fullLayout._size;\n  var margin = fullLayout.margin;\n  var oldMargins = Lib.extendFlat({}, gs); // adjust margins for outside components\n  // fullLayout.margin is the requested margin,\n  // fullLayout._size has margins and plotsize after adjustment\n\n  var ml = margin.l;\n  var mr = margin.r;\n  var mt = margin.t;\n  var mb = margin.b;\n  var width = fullLayout.width;\n  var height = fullLayout.height;\n  var pushMargin = fullLayout._pushmargin;\n  var pushMarginIds = fullLayout._pushmarginIds;\n\n  if (fullLayout.margin.autoexpand !== false) {\n    for (var k in pushMargin) {\n      if (!pushMarginIds[k]) delete pushMargin[k];\n    } // fill in the requested margins\n\n\n    pushMargin.base = {\n      l: {\n        val: 0,\n        size: ml\n      },\n      r: {\n        val: 1,\n        size: mr\n      },\n      t: {\n        val: 1,\n        size: mt\n      },\n      b: {\n        val: 0,\n        size: mb\n      }\n    }; // now cycle through all the combinations of l and r\n    // (and t and b) to find the required margins\n\n    for (var k1 in pushMargin) {\n      var pushleft = pushMargin[k1].l || {};\n      var pushbottom = pushMargin[k1].b || {};\n      var fl = pushleft.val;\n      var pl = pushleft.size;\n      var fb = pushbottom.val;\n      var pb = pushbottom.size;\n\n      for (var k2 in pushMargin) {\n        if (isNumeric(pl) && pushMargin[k2].r) {\n          var fr = pushMargin[k2].r.val;\n          var pr = pushMargin[k2].r.size;\n\n          if (fr > fl) {\n            var newL = (pl * fr + (pr - width) * fl) / (fr - fl);\n            var newR = (pr * (1 - fl) + (pl - width) * (1 - fr)) / (fr - fl);\n\n            if (newL >= 0 && newR >= 0 && width - (newL + newR) > 0 && newL + newR > ml + mr) {\n              ml = newL;\n              mr = newR;\n            }\n          }\n        }\n\n        if (isNumeric(pb) && pushMargin[k2].t) {\n          var ft = pushMargin[k2].t.val;\n          var pt = pushMargin[k2].t.size;\n\n          if (ft > fb) {\n            var newB = (pb * ft + (pt - height) * fb) / (ft - fb);\n            var newT = (pt * (1 - fb) + (pb - height) * (1 - ft)) / (ft - fb);\n\n            if (newB >= 0 && newT >= 0 && height - (newT + newB) > 0 && newB + newT > mb + mt) {\n              mb = newB;\n              mt = newT;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  gs.l = Math.round(ml);\n  gs.r = Math.round(mr);\n  gs.t = Math.round(mt);\n  gs.b = Math.round(mb);\n  gs.p = Math.round(margin.pad);\n  gs.w = Math.round(width) - gs.l - gs.r;\n  gs.h = Math.round(height) - gs.t - gs.b; // if things changed and we're not already redrawing, trigger a redraw\n\n  if (!fullLayout._replotting && plots.didMarginChange(oldMargins, gs)) {\n    if ('_redrawFromAutoMarginCount' in fullLayout) {\n      fullLayout._redrawFromAutoMarginCount++;\n    } else {\n      fullLayout._redrawFromAutoMarginCount = 1;\n    } // Always allow at least one redraw and give each margin-push\n    // call 3 loops to converge. Of course, for most cases this way too many,\n    // but let's keep things on the safe side until we fix our\n    // auto-margin pipeline problems:\n    // https://github.com/plotly/plotly.js/issues/2704\n\n\n    var maxNumberOfRedraws = 3 * (1 + Object.keys(pushMarginIds).length);\n\n    if (fullLayout._redrawFromAutoMarginCount < maxNumberOfRedraws) {\n      return Registry.call('plot', gd);\n    } else {\n      Lib.warn('Too many auto-margin redraws.');\n    }\n  }\n};\n\nvar marginKeys = ['l', 'r', 't', 'b', 'p', 'w', 'h'];\n\nplots.didMarginChange = function (margin0, margin1) {\n  for (var i = 0; i < marginKeys.length; i++) {\n    var k = marginKeys[i];\n    var m0 = margin0[k];\n    var m1 = margin1[k]; // use 1px tolerance in case we old/new differ only\n    // by rounding errors, which can lead to infinite loops\n\n    if (!isNumeric(m0) || Math.abs(m1 - m0) > 1) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * JSONify the graph data and layout\n *\n * This function needs to recurse because some src can be inside\n * sub-objects.\n *\n * It also strips out functions and private (starts with _) elements.\n * Therefore, we can add temporary things to data and layout that don't\n * get saved.\n *\n * @param gd The graphDiv\n * @param {Boolean} dataonly If true, don't return layout.\n * @param {'keepref'|'keepdata'|'keepall'} [mode='keepref'] Filter what's kept\n *      keepref: remove data for which there's a src present\n *          eg if there's xsrc present (and xsrc is well-formed,\n *          ie has : and some chars before it), strip out x\n *      keepdata: remove all src tags, don't remove the data itself\n *      keepall: keep data and src\n * @param {String} output If you specify 'object', the result will not be stringified\n * @param {Boolean} useDefaults If truthy, use _fullLayout and _fullData\n * @returns {Object|String}\n */\n\n\nplots.graphJson = function (gd, dataonly, mode, output, useDefaults) {\n  // if the defaults aren't supplied yet, we need to do that...\n  if (useDefaults && dataonly && !gd._fullData || useDefaults && !dataonly && !gd._fullLayout) {\n    plots.supplyDefaults(gd);\n  }\n\n  var data = useDefaults ? gd._fullData : gd.data;\n  var layout = useDefaults ? gd._fullLayout : gd.layout;\n  var frames = (gd._transitionData || {})._frames;\n\n  function stripObj(d) {\n    if (typeof d === 'function') {\n      return null;\n    }\n\n    if (Lib.isPlainObject(d)) {\n      var o = {};\n      var v, src;\n\n      for (v in d) {\n        // remove private elements and functions\n        // _ is for private, [ is a mistake ie [object Object]\n        if (typeof d[v] === 'function' || ['_', '['].indexOf(v.charAt(0)) !== -1) {\n          continue;\n        } // look for src/data matches and remove the appropriate one\n\n\n        if (mode === 'keepdata') {\n          // keepdata: remove all ...src tags\n          if (v.substr(v.length - 3) === 'src') {\n            continue;\n          }\n        } else if (mode === 'keepstream') {\n          // keep sourced data if it's being streamed.\n          // similar to keepref, but if the 'stream' object exists\n          // in a trace, we will keep the data array.\n          src = d[v + 'src'];\n\n          if (typeof src === 'string' && src.indexOf(':') > 0) {\n            if (!Lib.isPlainObject(d.stream)) {\n              continue;\n            }\n          }\n        } else if (mode !== 'keepall') {\n          // keepref: remove sourced data but only\n          // if the source tag is well-formed\n          src = d[v + 'src'];\n\n          if (typeof src === 'string' && src.indexOf(':') > 0) {\n            continue;\n          }\n        } // OK, we're including this... recurse into it\n\n\n        o[v] = stripObj(d[v]);\n      }\n\n      return o;\n    }\n\n    if (Array.isArray(d)) {\n      return d.map(stripObj);\n    }\n\n    if (Lib.isTypedArray(d)) {\n      return Lib.simpleMap(d, Lib.identity);\n    } // convert native dates to date strings...\n    // mostly for external users exporting to plotly\n\n\n    if (Lib.isJSDate(d)) return Lib.ms2DateTimeLocal(+d);\n    return d;\n  }\n\n  var obj = {\n    data: (data || []).map(function (v) {\n      var d = stripObj(v); // fit has some little arrays in it that don't contain data,\n      // just fit params and meta\n\n      if (dataonly) {\n        delete d.fit;\n      }\n\n      return d;\n    })\n  };\n\n  if (!dataonly) {\n    obj.layout = stripObj(layout);\n  }\n\n  if (gd.framework && gd.framework.isPolar) obj = gd.framework.getConfig();\n  if (frames) obj.frames = stripObj(frames);\n  return output === 'object' ? obj : JSON.stringify(obj);\n};\n/**\n * Modify a keyframe using a list of operations:\n *\n * @param {array of objects} operations\n *      Sequence of operations to be performed on the keyframes\n */\n\n\nplots.modifyFrames = function (gd, operations) {\n  var i, op, frame;\n  var _frames = gd._transitionData._frames;\n  var _frameHash = gd._transitionData._frameHash;\n\n  for (i = 0; i < operations.length; i++) {\n    op = operations[i];\n\n    switch (op.type) {\n      // No reason this couldn't exist, but is currently unused/untested:\n\n      /* case 'rename':\n          frame = _frames[op.index];\n          delete _frameHash[frame.name];\n          _frameHash[op.name] = frame;\n          frame.name = op.name;\n          break;*/\n      case 'replace':\n        frame = op.value;\n        var oldName = (_frames[op.index] || {}).name;\n        var newName = frame.name;\n        _frames[op.index] = _frameHash[newName] = frame;\n\n        if (newName !== oldName) {\n          // If name has changed in addition to replacement, then update\n          // the lookup table:\n          delete _frameHash[oldName];\n          _frameHash[newName] = frame;\n        }\n\n        break;\n\n      case 'insert':\n        frame = op.value;\n        _frameHash[frame.name] = frame;\n\n        _frames.splice(op.index, 0, frame);\n\n        break;\n\n      case 'delete':\n        frame = _frames[op.index];\n        delete _frameHash[frame.name];\n\n        _frames.splice(op.index, 1);\n\n        break;\n    }\n  }\n\n  return Promise.resolve();\n};\n/*\n * Compute a keyframe. Merge a keyframe into its base frame(s) and\n * expand properties.\n *\n * @param {object} frameLookup\n *      An object containing frames keyed by name (i.e. gd._transitionData._frameHash)\n * @param {string} frame\n *      The name of the keyframe to be computed\n *\n * Returns: a new object with the merged content\n */\n\n\nplots.computeFrame = function (gd, frameName) {\n  var frameLookup = gd._transitionData._frameHash;\n  var i, traceIndices, traceIndex, destIndex; // Null or undefined will fail on .toString(). We'll allow numbers since we\n  // make it clear frames must be given string names, but we'll allow numbers\n  // here since they're otherwise fine for looking up frames as long as they're\n  // properly cast to strings. We really just want to ensure here that this\n  // 1) doesn't fail, and\n  // 2) doens't give an incorrect answer (which String(frameName) would)\n\n  if (!frameName) {\n    throw new Error('computeFrame must be given a string frame name');\n  }\n\n  var framePtr = frameLookup[frameName.toString()]; // Return false if the name is invalid:\n\n  if (!framePtr) {\n    return false;\n  }\n\n  var frameStack = [framePtr];\n  var frameNameStack = [framePtr.name]; // Follow frame pointers:\n\n  while (framePtr.baseframe && (framePtr = frameLookup[framePtr.baseframe.toString()])) {\n    // Avoid infinite loops:\n    if (frameNameStack.indexOf(framePtr.name) !== -1) break;\n    frameStack.push(framePtr);\n    frameNameStack.push(framePtr.name);\n  } // A new object for the merged result:\n\n\n  var result = {}; // Merge, starting with the last and ending with the desired frame:\n\n  while (framePtr = frameStack.pop()) {\n    if (framePtr.layout) {\n      result.layout = plots.extendLayout(result.layout, framePtr.layout);\n    }\n\n    if (framePtr.data) {\n      if (!result.data) {\n        result.data = [];\n      }\n\n      traceIndices = framePtr.traces;\n\n      if (!traceIndices) {\n        // If not defined, assume serial order starting at zero\n        traceIndices = [];\n\n        for (i = 0; i < framePtr.data.length; i++) {\n          traceIndices[i] = i;\n        }\n      }\n\n      if (!result.traces) {\n        result.traces = [];\n      }\n\n      for (i = 0; i < framePtr.data.length; i++) {\n        // Loop through this frames data, find out where it should go,\n        // and merge it!\n        traceIndex = traceIndices[i];\n\n        if (traceIndex === undefined || traceIndex === null) {\n          continue;\n        }\n\n        destIndex = result.traces.indexOf(traceIndex);\n\n        if (destIndex === -1) {\n          destIndex = result.data.length;\n          result.traces[destIndex] = traceIndex;\n        }\n\n        result.data[destIndex] = plots.extendTrace(result.data[destIndex], framePtr.data[i]);\n      }\n    }\n  }\n\n  return result;\n};\n/*\n * Recompute the lookup table that maps frame name -> frame object. addFrames/\n * deleteFrames already manages this data one at a time, so the only time this\n * is necessary is if you poke around manually in `gd._transitionData._frames`\n * and create and haven't updated the lookup table.\n */\n\n\nplots.recomputeFrameHash = function (gd) {\n  var hash = gd._transitionData._frameHash = {};\n  var frames = gd._transitionData._frames;\n\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n\n    if (frame && frame.name) {\n      hash[frame.name] = frame;\n    }\n  }\n};\n/**\n * Extend an object, treating container arrays very differently by extracting\n * their contents and merging them separately.\n *\n * This exists so that we can extendDeepNoArrays and avoid stepping into data\n * arrays without knowledge of the plot schema, but so that we may also manually\n * recurse into known container arrays, such as transforms.\n *\n * See extendTrace and extendLayout below for usage.\n */\n\n\nplots.extendObjectWithContainers = function (dest, src, containerPaths) {\n  var containerProp, containerVal, i, j, srcProp, destProp, srcContainer, destContainer;\n  var copy = Lib.extendDeepNoArrays({}, src || {});\n  var expandedObj = Lib.expandObjectPaths(copy);\n  var containerObj = {}; // Step through and extract any container properties. Otherwise extendDeepNoArrays\n  // will clobber any existing properties with an empty array and then supplyDefaults\n  // will reset everything to defaults.\n\n  if (containerPaths && containerPaths.length) {\n    for (i = 0; i < containerPaths.length; i++) {\n      containerProp = Lib.nestedProperty(expandedObj, containerPaths[i]);\n      containerVal = containerProp.get();\n\n      if (containerVal === undefined) {\n        Lib.nestedProperty(containerObj, containerPaths[i]).set(null);\n      } else {\n        containerProp.set(null);\n        Lib.nestedProperty(containerObj, containerPaths[i]).set(containerVal);\n      }\n    }\n  }\n\n  dest = Lib.extendDeepNoArrays(dest || {}, expandedObj);\n\n  if (containerPaths && containerPaths.length) {\n    for (i = 0; i < containerPaths.length; i++) {\n      srcProp = Lib.nestedProperty(containerObj, containerPaths[i]);\n      srcContainer = srcProp.get();\n      if (!srcContainer) continue;\n      destProp = Lib.nestedProperty(dest, containerPaths[i]);\n      destContainer = destProp.get();\n\n      if (!Array.isArray(destContainer)) {\n        destContainer = [];\n        destProp.set(destContainer);\n      }\n\n      for (j = 0; j < srcContainer.length; j++) {\n        var srcObj = srcContainer[j];\n        if (srcObj === null) destContainer[j] = null;else {\n          destContainer[j] = plots.extendObjectWithContainers(destContainer[j], srcObj);\n        }\n      }\n\n      destProp.set(destContainer);\n    }\n  }\n\n  return dest;\n};\n\nplots.dataArrayContainers = ['transforms', 'dimensions'];\nplots.layoutArrayContainers = Registry.layoutArrayContainers;\n/*\n * Extend a trace definition. This method:\n *\n *  1. directly transfers any array references\n *  2. manually recurses into container arrays like transforms\n *\n * The result is the original object reference with the new contents merged in.\n */\n\nplots.extendTrace = function (destTrace, srcTrace) {\n  return plots.extendObjectWithContainers(destTrace, srcTrace, plots.dataArrayContainers);\n};\n/*\n * Extend a layout definition. This method:\n *\n *  1. directly transfers any array references (not critically important for\n *     layout since there aren't really data arrays)\n *  2. manually recurses into container arrays like annotations\n *\n * The result is the original object reference with the new contents merged in.\n */\n\n\nplots.extendLayout = function (destLayout, srcLayout) {\n  return plots.extendObjectWithContainers(destLayout, srcLayout, plots.layoutArrayContainers);\n};\n/**\n * Transition to a set of new data and layout properties from Plotly.animate\n *\n * @param {DOM element} gd\n * @param {Object[]} data\n *      an array of data objects following the normal Plotly data definition format\n * @param {Object} layout\n *      a layout object, following normal Plotly layout format\n * @param {Number[]} traces\n *      indices of the corresponding traces specified in `data`\n * @param {Object} frameOpts\n *      options for the frame (i.e. whether to redraw post-transition)\n * @param {Object} transitionOpts\n *      options for the transition\n */\n\n\nplots.transition = function (gd, data, layout, traces, frameOpts, transitionOpts) {\n  var opts = {\n    redraw: frameOpts.redraw\n  };\n  var transitionedTraces = {};\n  var axEdits = [];\n\n  opts.prepareFn = function () {\n    var dataLength = Array.isArray(data) ? data.length : 0;\n    var traceIndices = traces.slice(0, dataLength);\n\n    for (var i = 0; i < traceIndices.length; i++) {\n      var traceIdx = traceIndices[i];\n      var trace = gd._fullData[traceIdx];\n      var _module = trace._module; // There's nothing to do if this module is not defined:\n\n      if (!_module) continue; // Don't register the trace as transitioned if it doesn't know what to do.\n      // If it *is* registered, it will receive a callback that it's responsible\n      // for calling in order to register the transition as having completed.\n\n      if (_module.animatable) {\n        var n = _module.basePlotModule.name;\n        if (!transitionedTraces[n]) transitionedTraces[n] = [];\n        transitionedTraces[n].push(traceIdx);\n      }\n\n      gd.data[traceIndices[i]] = plots.extendTrace(gd.data[traceIndices[i]], data[i]);\n    } // Follow the same procedure. Clone it so we don't mangle the input, then\n    // expand any object paths so we can merge deep into gd.layout:\n\n\n    var layoutUpdate = Lib.expandObjectPaths(Lib.extendDeepNoArrays({}, layout)); // Before merging though, we need to modify the incoming layout. We only\n    // know how to *transition* layout ranges, so it's imperative that a new\n    // range not be sent to the layout before the transition has started. So\n    // we must remove the things we can transition:\n\n    var axisAttrRe = /^[xy]axis[0-9]*$/;\n\n    for (var attr in layoutUpdate) {\n      if (!axisAttrRe.test(attr)) continue;\n      delete layoutUpdate[attr].range;\n    }\n\n    plots.extendLayout(gd.layout, layoutUpdate); // Supply defaults after applying the incoming properties. Note that any attempt\n    // to simplify this step and reduce the amount of work resulted in the reconstruction\n    // of essentially the whole supplyDefaults step, so that it seems sensible to just use\n    // supplyDefaults even though it's heavier than would otherwise be desired for\n    // transitions:\n    // first delete calcdata so supplyDefaults knows a calc step is coming\n\n    delete gd.calcdata;\n    plots.supplyDefaults(gd);\n    plots.doCalcdata(gd);\n    var newLayout = Lib.expandObjectPaths(layout);\n\n    if (newLayout) {\n      var subplots = gd._fullLayout._plots;\n\n      for (var k in subplots) {\n        var plotinfo = subplots[k];\n        var xa = plotinfo.xaxis;\n        var ya = plotinfo.yaxis;\n        var xr0 = xa.range.slice();\n        var yr0 = ya.range.slice();\n        var xr1 = null;\n        var yr1 = null;\n        var editX = null;\n        var editY = null;\n\n        if (Array.isArray(newLayout[xa._name + '.range'])) {\n          xr1 = newLayout[xa._name + '.range'].slice();\n        } else if (Array.isArray((newLayout[xa._name] || {}).range)) {\n          xr1 = newLayout[xa._name].range.slice();\n        }\n\n        if (Array.isArray(newLayout[ya._name + '.range'])) {\n          yr1 = newLayout[ya._name + '.range'].slice();\n        } else if (Array.isArray((newLayout[ya._name] || {}).range)) {\n          yr1 = newLayout[ya._name].range.slice();\n        }\n\n        if (xr0 && xr1 && (xa.r2l(xr0[0]) !== xa.r2l(xr1[0]) || xa.r2l(xr0[1]) !== xa.r2l(xr1[1]))) {\n          editX = {\n            xr0: xr0,\n            xr1: xr1\n          };\n        }\n\n        if (yr0 && yr1 && (ya.r2l(yr0[0]) !== ya.r2l(yr1[0]) || ya.r2l(yr0[1]) !== ya.r2l(yr1[1]))) {\n          editY = {\n            yr0: yr0,\n            yr1: yr1\n          };\n        }\n\n        if (editX || editY) {\n          axEdits.push(Lib.extendFlat({\n            plotinfo: plotinfo\n          }, editX, editY));\n        }\n      }\n    }\n\n    return Promise.resolve();\n  };\n\n  opts.runFn = function (makeCallback) {\n    var traceTransitionOpts;\n    var basePlotModules = gd._fullLayout._basePlotModules;\n    var hasAxisTransition = axEdits.length;\n    var i;\n\n    if (layout) {\n      for (i = 0; i < basePlotModules.length; i++) {\n        if (basePlotModules[i].transitionAxes) {\n          basePlotModules[i].transitionAxes(gd, axEdits, transitionOpts, makeCallback);\n        }\n      }\n    } // Here handle the exception that we refuse to animate scales and axes at the same\n    // time. In other words, if there's an axis transition, then set the data transition\n    // to instantaneous.\n\n\n    if (hasAxisTransition) {\n      traceTransitionOpts = Lib.extendFlat({}, transitionOpts);\n      traceTransitionOpts.duration = 0; // This means do not transition cartesian traces,\n      // this happens on layout-only (e.g. axis range) animations\n\n      delete transitionedTraces.cartesian;\n    } else {\n      traceTransitionOpts = transitionOpts;\n    } // Note that we pass a callback to *create* the callback that must be invoked on completion.\n    // This is since not all traces know about transitions, so it greatly simplifies matters if\n    // the trace is responsible for creating a callback, if needed, and then executing it when\n    // the time is right.\n\n\n    for (var n in transitionedTraces) {\n      var traceIndices = transitionedTraces[n];\n      var _module = gd._fullData[traceIndices[0]]._module;\n\n      _module.basePlotModule.plot(gd, traceIndices, traceTransitionOpts, makeCallback);\n    }\n  };\n\n  return _transition(gd, transitionOpts, opts);\n};\n/**\n * Transition to a set of new data and layout properties from Plotly.react\n *\n * @param {DOM element} gd\n * @param {object} restyleFlags\n * - anim {'all'|'some'}\n * @param {object} relayoutFlags\n * - anim {'all'|'some'}\n * @param {object} oldFullLayout : old (pre Plotly.react) fullLayout\n */\n\n\nplots.transitionFromReact = function (gd, restyleFlags, relayoutFlags, oldFullLayout) {\n  var fullLayout = gd._fullLayout;\n  var transitionOpts = fullLayout.transition;\n  var opts = {};\n  var axEdits = [];\n\n  opts.prepareFn = function () {\n    var subplots = fullLayout._plots; // no need to redraw at end of transition,\n    // if all changes are animatable\n\n    opts.redraw = false;\n    if (restyleFlags.anim === 'some') opts.redraw = true;\n    if (relayoutFlags.anim === 'some') opts.redraw = true;\n\n    for (var k in subplots) {\n      var plotinfo = subplots[k];\n      var xa = plotinfo.xaxis;\n      var ya = plotinfo.yaxis;\n\n      var xr0 = oldFullLayout[xa._name].range.slice();\n\n      var yr0 = oldFullLayout[ya._name].range.slice();\n\n      var xr1 = xa.range.slice();\n      var yr1 = ya.range.slice();\n      xa.setScale();\n      ya.setScale();\n      var editX = null;\n      var editY = null;\n\n      if (xa.r2l(xr0[0]) !== xa.r2l(xr1[0]) || xa.r2l(xr0[1]) !== xa.r2l(xr1[1])) {\n        editX = {\n          xr0: xr0,\n          xr1: xr1\n        };\n      }\n\n      if (ya.r2l(yr0[0]) !== ya.r2l(yr1[0]) || ya.r2l(yr0[1]) !== ya.r2l(yr1[1])) {\n        editY = {\n          yr0: yr0,\n          yr1: yr1\n        };\n      }\n\n      if (editX || editY) {\n        axEdits.push(Lib.extendFlat({\n          plotinfo: plotinfo\n        }, editX, editY));\n      }\n    }\n\n    return Promise.resolve();\n  };\n\n  opts.runFn = function (makeCallback) {\n    var fullData = gd._fullData;\n    var fullLayout = gd._fullLayout;\n    var basePlotModules = fullLayout._basePlotModules;\n    var axisTransitionOpts;\n    var traceTransitionOpts;\n    var transitionedTraces;\n    var allTraceIndices = [];\n\n    for (var i = 0; i < fullData.length; i++) {\n      allTraceIndices.push(i);\n    }\n\n    function transitionAxes() {\n      for (var j = 0; j < basePlotModules.length; j++) {\n        if (basePlotModules[j].transitionAxes) {\n          basePlotModules[j].transitionAxes(gd, axEdits, axisTransitionOpts, makeCallback);\n        }\n      }\n    }\n\n    function transitionTraces() {\n      for (var j = 0; j < basePlotModules.length; j++) {\n        basePlotModules[j].plot(gd, transitionedTraces, traceTransitionOpts, makeCallback);\n      }\n    }\n\n    if (axEdits.length && restyleFlags.anim) {\n      if (transitionOpts.ordering === 'traces first') {\n        axisTransitionOpts = Lib.extendFlat({}, transitionOpts, {\n          duration: 0\n        });\n        transitionedTraces = allTraceIndices;\n        traceTransitionOpts = transitionOpts;\n        setTimeout(transitionAxes, transitionOpts.duration);\n        transitionTraces();\n      } else {\n        axisTransitionOpts = transitionOpts;\n        transitionedTraces = null;\n        traceTransitionOpts = Lib.extendFlat({}, transitionOpts, {\n          duration: 0\n        });\n        setTimeout(transitionTraces, axisTransitionOpts.duration);\n        transitionAxes();\n      }\n    } else if (axEdits.length) {\n      axisTransitionOpts = transitionOpts;\n      transitionAxes();\n    } else if (restyleFlags.anim) {\n      transitionedTraces = allTraceIndices;\n      traceTransitionOpts = transitionOpts;\n      transitionTraces();\n    }\n  };\n\n  return _transition(gd, transitionOpts, opts);\n};\n/**\n * trace/layout transition wrapper that works\n * for transitions initiated by Plotly.animate and Plotly.react.\n *\n * @param {DOM element} gd\n * @param {object} transitionOpts\n * @param {object} opts\n * - redraw {boolean}\n * - prepareFn {function} *should return a Promise*\n * - runFn {function} ran inside executeTransitions\n */\n\n\nfunction _transition(gd, transitionOpts, opts) {\n  var aborted = false;\n\n  function executeCallbacks(list) {\n    var p = Promise.resolve();\n    if (!list) return p;\n\n    while (list.length) {\n      p = p.then(list.shift());\n    }\n\n    return p;\n  }\n\n  function flushCallbacks(list) {\n    if (!list) return;\n\n    while (list.length) {\n      list.shift();\n    }\n  }\n\n  function executeTransitions() {\n    gd.emit('plotly_transitioning', []);\n    return new Promise(function (resolve) {\n      // This flag is used to disabled things like autorange:\n      gd._transitioning = true; // When instantaneous updates are coming through quickly, it's too much to simply disable\n      // all interaction, so store this flag so we can disambiguate whether mouse interactions\n      // should be fully disabled or not:\n\n      if (transitionOpts.duration > 0) {\n        gd._transitioningWithDuration = true;\n      } // If another transition is triggered, this callback will be executed simply because it's\n      // in the interruptCallbacks queue. If this transition completes, it will instead flush\n      // that queue and forget about this callback.\n\n\n      gd._transitionData._interruptCallbacks.push(function () {\n        aborted = true;\n      });\n\n      if (opts.redraw) {\n        gd._transitionData._interruptCallbacks.push(function () {\n          return Registry.call('redraw', gd);\n        });\n      } // Emit this and make sure it happens last:\n\n\n      gd._transitionData._interruptCallbacks.push(function () {\n        gd.emit('plotly_transitioninterrupted', []);\n      }); // Construct callbacks that are executed on transition end. This ensures the d3 transitions\n      // are *complete* before anything else is done.\n\n\n      var numCallbacks = 0;\n      var numCompleted = 0;\n\n      function makeCallback() {\n        numCallbacks++;\n        return function () {\n          numCompleted++; // When all are complete, perform a redraw:\n\n          if (!aborted && numCompleted === numCallbacks) {\n            completeTransition(resolve);\n          }\n        };\n      }\n\n      opts.runFn(makeCallback); // If nothing else creates a callback, then this will trigger the completion in the next tick:\n\n      setTimeout(makeCallback());\n    });\n  }\n\n  function completeTransition(callback) {\n    // This a simple workaround for tests which purge the graph before animations\n    // have completed. That's not a very common case, so this is the simplest\n    // fix.\n    if (!gd._transitionData) return;\n    flushCallbacks(gd._transitionData._interruptCallbacks);\n    return Promise.resolve().then(function () {\n      if (opts.redraw) {\n        return Registry.call('redraw', gd);\n      }\n    }).then(function () {\n      // Set transitioning false again once the redraw has occurred. This is used, for example,\n      // to prevent the trailing redraw from autoranging:\n      gd._transitioning = false;\n      gd._transitioningWithDuration = false;\n      gd.emit('plotly_transitioned', []);\n    }).then(callback);\n  }\n\n  function interruptPreviousTransitions() {\n    // Fail-safe against purged plot:\n    if (!gd._transitionData) return; // If a transition is interrupted, set this to false. At the moment, the only thing that would\n    // interrupt a transition is another transition, so that it will momentarily be set to true\n    // again, but this determines whether autorange or dragbox work, so it's for the sake of\n    // cleanliness:\n\n    gd._transitioning = false;\n    return executeCallbacks(gd._transitionData._interruptCallbacks);\n  }\n\n  var seq = [plots.previousPromises, interruptPreviousTransitions, opts.prepareFn, plots.rehover, executeTransitions];\n  var transitionStarting = Lib.syncOrAsync(seq, gd);\n\n  if (!transitionStarting || !transitionStarting.then) {\n    transitionStarting = Promise.resolve();\n  }\n\n  return transitionStarting.then(function () {\n    return gd;\n  });\n}\n\nplots.doCalcdata = function (gd, traces) {\n  var axList = axisIDs.list(gd);\n  var fullData = gd._fullData;\n  var fullLayout = gd._fullLayout;\n\n  var trace, _module, i, j; // XXX: Is this correct? Needs a closer look so that *some* traces can be recomputed without\n  // *all* needing doCalcdata:\n\n\n  var calcdata = new Array(fullData.length);\n  var oldCalcdata = (gd.calcdata || []).slice();\n  gd.calcdata = calcdata; // extra helper variables\n  // how many box/violins plots do we have (in case they're grouped)\n\n  fullLayout._numBoxes = 0;\n  fullLayout._numViolins = 0; // initialize violin per-scale-group stats container\n\n  fullLayout._violinScaleGroupStats = {}; // for calculating avg luminosity of heatmaps\n\n  gd._hmpixcount = 0;\n  gd._hmlumcount = 0; // for sharing colors across pies / sunbursts / treemap / funnelarea (and for legend)\n\n  fullLayout._piecolormap = {};\n  fullLayout._sunburstcolormap = {};\n  fullLayout._treemapcolormap = {};\n  fullLayout._funnelareacolormap = {}; // If traces were specified and this trace was not included,\n  // then transfer it over from the old calcdata:\n\n  for (i = 0; i < fullData.length; i++) {\n    if (Array.isArray(traces) && traces.indexOf(i) === -1) {\n      calcdata[i] = oldCalcdata[i];\n      continue;\n    }\n  }\n\n  for (i = 0; i < fullData.length; i++) {\n    trace = fullData[i];\n    trace._arrayAttrs = PlotSchema.findArrayAttributes(trace); // keep track of trace extremes (for autorange) in here\n\n    trace._extremes = {};\n  } // add polar axes to axis list\n\n\n  var polarIds = fullLayout._subplots.polar || [];\n\n  for (i = 0; i < polarIds.length; i++) {\n    axList.push(fullLayout[polarIds[i]].radialaxis, fullLayout[polarIds[i]].angularaxis);\n  } // clear relinked cmin/cmax values in shared axes to start aggregation from scratch\n\n\n  for (var k in fullLayout._colorAxes) {\n    var cOpts = fullLayout[k];\n\n    if (cOpts.cauto !== false) {\n      delete cOpts.cmin;\n      delete cOpts.cmax;\n    }\n  }\n\n  var hasCalcTransform = false;\n\n  function transformCalci(i) {\n    trace = fullData[i];\n    _module = trace._module;\n\n    if (trace.visible === true && trace.transforms) {\n      // we need one round of trace module calc before\n      // the calc transform to 'fill in' the categories list\n      // used for example in the data-to-coordinate method\n      if (_module && _module.calc) {\n        var cdi = _module.calc(gd, trace); // must clear scene 'batches', so that 2nd\n        // _module.calc call starts from scratch\n\n\n        if (cdi[0] && cdi[0].t && cdi[0].t._scene) {\n          delete cdi[0].t._scene.dirty;\n        }\n      }\n\n      for (j = 0; j < trace.transforms.length; j++) {\n        var transform = trace.transforms[j];\n        _module = transformsRegistry[transform.type];\n\n        if (_module && _module.calcTransform) {\n          trace._hasCalcTransform = true;\n          hasCalcTransform = true;\n\n          _module.calcTransform(gd, trace, transform);\n        }\n      }\n    }\n  }\n\n  function calci(i, isContainer) {\n    trace = fullData[i];\n    _module = trace._module;\n    if (!!_module.isContainer !== isContainer) return;\n    var cd = [];\n\n    if (trace.visible === true && trace._length !== 0) {\n      // clear existing ref in case it got relinked\n      delete trace._indexToPoints; // keep ref of index-to-points map object of the *last* enabled transform,\n      // this index-to-points map object is required to determine the calcdata indices\n      // that correspond to input indices (e.g. from 'selectedpoints')\n\n      var transforms = trace.transforms || [];\n\n      for (j = transforms.length - 1; j >= 0; j--) {\n        if (transforms[j].enabled) {\n          trace._indexToPoints = transforms[j]._indexToPoints;\n          break;\n        }\n      }\n\n      if (_module && _module.calc) {\n        cd = _module.calc(gd, trace);\n      }\n    } // Make sure there is a first point.\n    //\n    // This ensures there is a calcdata item for every trace,\n    // even if cartesian logic doesn't handle it (for things like legends).\n\n\n    if (!Array.isArray(cd) || !cd[0]) {\n      cd = [{\n        x: BADNUM,\n        y: BADNUM\n      }];\n    } // add the trace-wide properties to the first point,\n    // per point properties to every point\n    // t is the holder for trace-wide properties\n\n\n    if (!cd[0].t) cd[0].t = {};\n    cd[0].trace = trace;\n    calcdata[i] = cd;\n  }\n\n  setupAxisCategories(axList, fullData, fullLayout); // 'transform' loop - must calc container traces first\n  // so that if their dependent traces can get transform properly\n\n  for (i = 0; i < fullData.length; i++) {\n    calci(i, true);\n  }\n\n  for (i = 0; i < fullData.length; i++) {\n    transformCalci(i);\n  } // clear stuff that should recomputed in 'regular' loop\n\n\n  if (hasCalcTransform) setupAxisCategories(axList, fullData, fullLayout); // 'regular' loop - make sure container traces (eg carpet) calc before\n  // contained traces (eg contourcarpet)\n\n  for (i = 0; i < fullData.length; i++) {\n    calci(i, true);\n  }\n\n  for (i = 0; i < fullData.length; i++) {\n    calci(i, false);\n  }\n\n  doCrossTraceCalc(gd); // Sort axis categories per value if specified\n\n  var sorted = sortAxisCategoriesByValue(axList, gd);\n\n  if (sorted.length) {\n    // how many box/violins plots do we have (in case they're grouped)\n    fullLayout._numBoxes = 0;\n    fullLayout._numViolins = 0; // If a sort operation was performed, run calc() again\n\n    for (i = 0; i < sorted.length; i++) {\n      calci(sorted[i], true);\n    }\n\n    for (i = 0; i < sorted.length; i++) {\n      calci(sorted[i], false);\n    }\n\n    doCrossTraceCalc(gd);\n  }\n\n  Registry.getComponentMethod('fx', 'calc')(gd);\n  Registry.getComponentMethod('errorbars', 'calc')(gd);\n};\n\nvar sortAxisCategoriesByValueRegex = /(total|sum|min|max|mean|median) (ascending|descending)/;\n\nfunction sortAxisCategoriesByValue(axList, gd) {\n  var affectedTraces = [];\n  var i, j, k, l, o;\n\n  function zMapCategory(type, ax, value) {\n    var axLetter = ax._id.charAt(0);\n\n    if (type === 'histogram2dcontour') {\n      var counterAxLetter = ax._counterAxes[0];\n      var counterAx = axisIDs.getFromId(gd, counterAxLetter);\n      var xCategorical = axLetter === 'x' || counterAxLetter === 'x' && counterAx.type === 'category';\n      var yCategorical = axLetter === 'y' || counterAxLetter === 'y' && counterAx.type === 'category';\n      return function (o, l) {\n        if (o === 0 || l === 0) return -1; // Skip first row and column\n\n        if (xCategorical && o === value[l].length - 1) return -1;\n        if (yCategorical && l === value.length - 1) return -1;\n        return (axLetter === 'y' ? l : o) - 1;\n      };\n    } else {\n      return function (o, l) {\n        return axLetter === 'y' ? l : o;\n      };\n    }\n  }\n\n  var aggFn = {\n    'min': function min(values) {\n      return Lib.aggNums(Math.min, null, values);\n    },\n    'max': function max(values) {\n      return Lib.aggNums(Math.max, null, values);\n    },\n    'sum': function sum(values) {\n      return Lib.aggNums(function (a, b) {\n        return a + b;\n      }, null, values);\n    },\n    'total': function total(values) {\n      return Lib.aggNums(function (a, b) {\n        return a + b;\n      }, null, values);\n    },\n    'mean': function mean(values) {\n      return Lib.mean(values);\n    },\n    'median': function median(values) {\n      return Lib.median(values);\n    }\n  };\n\n  for (i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    if (ax.type !== 'category') continue; // Order by value\n\n    var match = ax.categoryorder.match(sortAxisCategoriesByValueRegex);\n\n    if (match) {\n      var aggregator = match[1];\n      var order = match[2]; // Store values associated with each category\n\n      var categoriesValue = [];\n\n      for (j = 0; j < ax._categories.length; j++) {\n        categoriesValue.push([ax._categories[j], []]);\n      } // Collect values across traces\n\n\n      for (j = 0; j < ax._traceIndices.length; j++) {\n        var traceIndex = ax._traceIndices[j];\n        var fullTrace = gd._fullData[traceIndex];\n\n        var axLetter = ax._id.charAt(0); // Skip over invisible traces\n\n\n        if (fullTrace.visible !== true) continue;\n        var type = fullTrace.type;\n\n        if (Registry.traceIs(fullTrace, 'histogram')) {\n          delete fullTrace._xautoBinFinished;\n          delete fullTrace._yautoBinFinished;\n        }\n\n        var cd = gd.calcdata[traceIndex];\n\n        for (k = 0; k < cd.length; k++) {\n          var cdi = cd[k];\n          var cat, catIndex, value;\n\n          if (type === 'splom') {\n            // If `splom`, collect values across dimensions\n            // Find which dimension the current axis is representing\n            var currentDimensionIndex = fullTrace._axesDim[ax._id]; // Apply logic to associated x axis if it's defined\n\n            if (axLetter === 'y') {\n              var associatedXAxisID = fullTrace._diag[currentDimensionIndex][0];\n              if (associatedXAxisID) ax = gd._fullLayout[axisIDs.id2name(associatedXAxisID)];\n            }\n\n            var categories = cdi.trace.dimensions[currentDimensionIndex].values;\n\n            for (l = 0; l < categories.length; l++) {\n              cat = categories[l];\n              catIndex = ax._categoriesMap[cat]; // Collect associated values at index `l` over all other dimensions\n\n              for (o = 0; o < cdi.trace.dimensions.length; o++) {\n                if (o === currentDimensionIndex) continue;\n                var dimension = cdi.trace.dimensions[o];\n                categoriesValue[catIndex][1].push(dimension.values[l]);\n              }\n            }\n          } else if (type === 'scattergl') {\n            // If `scattergl`, collect all values stashed under cdi.t\n            for (l = 0; l < cdi.t.x.length; l++) {\n              if (axLetter === 'x') {\n                cat = cdi.t.x[l];\n                catIndex = cat;\n                value = cdi.t.y[l];\n              }\n\n              if (axLetter === 'y') {\n                cat = cdi.t.y[l];\n                catIndex = cat;\n                value = cdi.t.x[l];\n              }\n\n              categoriesValue[catIndex][1].push(value);\n            } // must clear scene 'batches', so that 2nd\n            // _module.calc call starts from scratch\n\n\n            if (cdi.t && cdi.t._scene) {\n              delete cdi.t._scene.dirty;\n            }\n          } else if (cdi.hasOwnProperty('z')) {\n            // If 2dMap, collect values in `z`\n            value = cdi.z;\n            var mapping = zMapCategory(fullTrace.type, ax, value);\n\n            for (l = 0; l < value.length; l++) {\n              for (o = 0; o < value[l].length; o++) {\n                catIndex = mapping(o, l);\n                if (catIndex + 1) categoriesValue[catIndex][1].push(value[l][o]);\n              }\n            }\n          } else {\n            // For all other 2d cartesian traces\n            if (axLetter === 'x') {\n              cat = cdi.p + 1 ? cdi.p : cdi.x;\n              value = cdi.s || cdi.v || cdi.y;\n            } else if (axLetter === 'y') {\n              cat = cdi.p + 1 ? cdi.p : cdi.y;\n              value = cdi.s || cdi.v || cdi.x;\n            }\n\n            if (!Array.isArray(value)) value = [value];\n\n            for (l = 0; l < value.length; l++) {\n              categoriesValue[cat][1].push(value[l]);\n            }\n          }\n        }\n      }\n\n      ax._categoriesValue = categoriesValue;\n      var categoriesAggregatedValue = [];\n\n      for (j = 0; j < categoriesValue.length; j++) {\n        categoriesAggregatedValue.push([categoriesValue[j][0], aggFn[aggregator](categoriesValue[j][1])]);\n      } // Sort by aggregated value\n\n\n      categoriesAggregatedValue.sort(function (a, b) {\n        return a[1] - b[1];\n      });\n      ax._categoriesAggregatedValue = categoriesAggregatedValue; // Set new category order\n\n      ax._initialCategories = categoriesAggregatedValue.map(function (c) {\n        return c[0];\n      }); // Reverse if descending\n\n      if (order === 'descending') {\n        ax._initialCategories.reverse();\n      } // Sort all matching axes\n\n\n      affectedTraces = affectedTraces.concat(ax.sortByInitialCategories());\n    }\n  }\n\n  return affectedTraces;\n}\n\nfunction setupAxisCategories(axList, fullData, fullLayout) {\n  var axLookup = {};\n  var i, ax, axId;\n\n  for (i = 0; i < axList.length; i++) {\n    ax = axList[i];\n    axId = ax._id;\n    ax.clearCalc();\n\n    if (ax.type === 'multicategory') {\n      ax.setupMultiCategory(fullData);\n    }\n\n    axLookup[ax._id] = 1;\n  } // look into match groups for 'missing' axes\n\n\n  var matchGroups = fullLayout._axisMatchGroups || [];\n\n  for (i = 0; i < matchGroups.length; i++) {\n    for (axId in matchGroups[i]) {\n      if (!axLookup[axId]) {\n        ax = fullLayout[axisIDs.id2name(axId)];\n        ax.clearCalc();\n      }\n    }\n  }\n}\n\nfunction doCrossTraceCalc(gd) {\n  var fullLayout = gd._fullLayout;\n  var modules = fullLayout._visibleModules;\n  var hash = {};\n  var i, j, k; // position and range calculations for traces that\n  // depend on each other ie bars (stacked or grouped)\n  // and boxes (grouped) push each other out of the way\n\n  for (j = 0; j < modules.length; j++) {\n    var _module = modules[j];\n    var fn = _module.crossTraceCalc;\n\n    if (fn) {\n      var spType = _module.basePlotModule.name;\n\n      if (hash[spType]) {\n        Lib.pushUnique(hash[spType], fn);\n      } else {\n        hash[spType] = [fn];\n      }\n    }\n  }\n\n  for (k in hash) {\n    var methods = hash[k];\n    var subplots = fullLayout._subplots[k];\n\n    if (Array.isArray(subplots)) {\n      for (i = 0; i < subplots.length; i++) {\n        var sp = subplots[i];\n        var spInfo = k === 'cartesian' ? fullLayout._plots[sp] : fullLayout[sp];\n\n        for (j = 0; j < methods.length; j++) {\n          methods[j](gd, spInfo, sp);\n        }\n      }\n    } else {\n      for (j = 0; j < methods.length; j++) {\n        methods[j](gd);\n      }\n    }\n  }\n}\n\nplots.rehover = function (gd) {\n  if (gd._fullLayout._rehover) {\n    gd._fullLayout._rehover();\n  }\n};\n\nplots.redrag = function (gd) {\n  if (gd._fullLayout._redrag) {\n    gd._fullLayout._redrag();\n  }\n};\n\nplots.generalUpdatePerTraceModule = function (gd, subplot, subplotCalcData, subplotLayout) {\n  var traceHashOld = subplot.traceHash;\n  var traceHash = {};\n  var i; // build up moduleName -> calcData hash\n\n  for (i = 0; i < subplotCalcData.length; i++) {\n    var calcTraces = subplotCalcData[i];\n    var trace = calcTraces[0].trace; // skip over visible === false traces\n    // as they don't have `_module` ref\n\n    if (trace.visible) {\n      traceHash[trace.type] = traceHash[trace.type] || [];\n      traceHash[trace.type].push(calcTraces);\n    }\n  } // when a trace gets deleted, make sure that its module's\n  // plot method is called so that it is properly\n  // removed from the DOM.\n\n\n  for (var moduleNameOld in traceHashOld) {\n    if (!traceHash[moduleNameOld]) {\n      var fakeCalcTrace = traceHashOld[moduleNameOld][0];\n      var fakeTrace = fakeCalcTrace[0].trace;\n      fakeTrace.visible = false;\n      traceHash[moduleNameOld] = [fakeCalcTrace];\n    }\n  } // call module plot method\n\n\n  for (var moduleName in traceHash) {\n    var moduleCalcData = traceHash[moduleName];\n    var _module = moduleCalcData[0][0].trace._module;\n\n    _module.plot(gd, subplot, Lib.filterVisible(moduleCalcData), subplotLayout);\n  } // update moduleName -> calcData hash\n\n\n  subplot.traceHash = traceHash;\n};\n\nplots.plotBasePlot = function (desiredType, gd, traces, transitionOpts, makeOnCompleteCallback) {\n  var _module = Registry.getModule(desiredType);\n\n  var cdmodule = getModuleCalcData(gd.calcdata, _module)[0];\n\n  _module.plot(gd, cdmodule, transitionOpts, makeOnCompleteCallback);\n};\n\nplots.cleanBasePlot = function (desiredType, newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var had = oldFullLayout._has && oldFullLayout._has(desiredType);\n\n  var has = newFullLayout._has && newFullLayout._has(desiredType);\n\n  if (had && !has) {\n    oldFullLayout['_' + desiredType + 'layer'].selectAll('g.trace').remove();\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar handleHoverLabelDefaults = require('./hoverlabel_defaults');\n\nvar layoutAttributes = require('./layout_attributes');\n\nmodule.exports = function supplyLayoutGlobalDefaults(layoutIn, layoutOut) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(layoutIn, layoutOut, layoutAttributes, attr, dflt);\n  }\n\n  handleHoverLabelDefaults(layoutIn, layoutOut, coerce);\n};","require(\"core-js/modules/es6.array.for-each\");\n\n// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// filter a list of segments based on boolean operations\n//\nfunction select(segments, selection, buildLog) {\n  var result = [];\n  segments.forEach(function (seg) {\n    var index = (seg.myFill.above ? 8 : 0) + (seg.myFill.below ? 4 : 0) + (seg.otherFill && seg.otherFill.above ? 2 : 0) + (seg.otherFill && seg.otherFill.below ? 1 : 0);\n\n    if (selection[index] !== 0) {\n      // copy the segment to the results, while also calculating the fill status\n      result.push({\n        id: buildLog ? buildLog.segmentId() : -1,\n        start: seg.start,\n        end: seg.end,\n        myFill: {\n          above: selection[index] === 1,\n          // 1 if filled above\n          below: selection[index] === 2 // 2 if filled below\n\n        },\n        otherFill: null\n      });\n    }\n  });\n  if (buildLog) buildLog.selected(result);\n  return result;\n}\n\nvar SegmentSelector = {\n  union: function union(segments, buildLog) {\n    // primary | secondary\n    // above1 below1 above2 below2    Keep?               Value\n    //    0      0      0      0   =>   no                  0\n    //    0      0      0      1   =>   yes filled below    2\n    //    0      0      1      0   =>   yes filled above    1\n    //    0      0      1      1   =>   no                  0\n    //    0      1      0      0   =>   yes filled below    2\n    //    0      1      0      1   =>   yes filled below    2\n    //    0      1      1      0   =>   no                  0\n    //    0      1      1      1   =>   no                  0\n    //    1      0      0      0   =>   yes filled above    1\n    //    1      0      0      1   =>   no                  0\n    //    1      0      1      0   =>   yes filled above    1\n    //    1      0      1      1   =>   no                  0\n    //    1      1      0      0   =>   no                  0\n    //    1      1      0      1   =>   no                  0\n    //    1      1      1      0   =>   no                  0\n    //    1      1      1      1   =>   no                  0\n    return select(segments, [0, 2, 1, 0, 2, 2, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0], buildLog);\n  },\n  intersect: function intersect(segments, buildLog) {\n    // primary & secondary\n    // above1 below1 above2 below2    Keep?               Value\n    //    0      0      0      0   =>   no                  0\n    //    0      0      0      1   =>   no                  0\n    //    0      0      1      0   =>   no                  0\n    //    0      0      1      1   =>   no                  0\n    //    0      1      0      0   =>   no                  0\n    //    0      1      0      1   =>   yes filled below    2\n    //    0      1      1      0   =>   no                  0\n    //    0      1      1      1   =>   yes filled below    2\n    //    1      0      0      0   =>   no                  0\n    //    1      0      0      1   =>   no                  0\n    //    1      0      1      0   =>   yes filled above    1\n    //    1      0      1      1   =>   yes filled above    1\n    //    1      1      0      0   =>   no                  0\n    //    1      1      0      1   =>   yes filled below    2\n    //    1      1      1      0   =>   yes filled above    1\n    //    1      1      1      1   =>   no                  0\n    return select(segments, [0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 1, 1, 0, 2, 1, 0], buildLog);\n  },\n  difference: function difference(segments, buildLog) {\n    // primary - secondary\n    // above1 below1 above2 below2    Keep?               Value\n    //    0      0      0      0   =>   no                  0\n    //    0      0      0      1   =>   no                  0\n    //    0      0      1      0   =>   no                  0\n    //    0      0      1      1   =>   no                  0\n    //    0      1      0      0   =>   yes filled below    2\n    //    0      1      0      1   =>   no                  0\n    //    0      1      1      0   =>   yes filled below    2\n    //    0      1      1      1   =>   no                  0\n    //    1      0      0      0   =>   yes filled above    1\n    //    1      0      0      1   =>   yes filled above    1\n    //    1      0      1      0   =>   no                  0\n    //    1      0      1      1   =>   no                  0\n    //    1      1      0      0   =>   no                  0\n    //    1      1      0      1   =>   yes filled above    1\n    //    1      1      1      0   =>   yes filled below    2\n    //    1      1      1      1   =>   no                  0\n    return select(segments, [0, 0, 0, 0, 2, 0, 2, 0, 1, 1, 0, 0, 0, 1, 2, 0], buildLog);\n  },\n  differenceRev: function differenceRev(segments, buildLog) {\n    // secondary - primary\n    // above1 below1 above2 below2    Keep?               Value\n    //    0      0      0      0   =>   no                  0\n    //    0      0      0      1   =>   yes filled below    2\n    //    0      0      1      0   =>   yes filled above    1\n    //    0      0      1      1   =>   no                  0\n    //    0      1      0      0   =>   no                  0\n    //    0      1      0      1   =>   no                  0\n    //    0      1      1      0   =>   yes filled above    1\n    //    0      1      1      1   =>   yes filled above    1\n    //    1      0      0      0   =>   no                  0\n    //    1      0      0      1   =>   yes filled below    2\n    //    1      0      1      0   =>   no                  0\n    //    1      0      1      1   =>   yes filled below    2\n    //    1      1      0      0   =>   no                  0\n    //    1      1      0      1   =>   no                  0\n    //    1      1      1      0   =>   no                  0\n    //    1      1      1      1   =>   no                  0\n    return select(segments, [0, 2, 1, 0, 0, 0, 1, 1, 0, 2, 0, 2, 0, 0, 0, 0], buildLog);\n  },\n  xor: function xor(segments, buildLog) {\n    // primary ^ secondary\n    // above1 below1 above2 below2    Keep?               Value\n    //    0      0      0      0   =>   no                  0\n    //    0      0      0      1   =>   yes filled below    2\n    //    0      0      1      0   =>   yes filled above    1\n    //    0      0      1      1   =>   no                  0\n    //    0      1      0      0   =>   yes filled below    2\n    //    0      1      0      1   =>   no                  0\n    //    0      1      1      0   =>   no                  0\n    //    0      1      1      1   =>   yes filled above    1\n    //    1      0      0      0   =>   yes filled above    1\n    //    1      0      0      1   =>   no                  0\n    //    1      0      1      0   =>   no                  0\n    //    1      0      1      1   =>   yes filled below    2\n    //    1      1      0      0   =>   no                  0\n    //    1      1      0      1   =>   yes filled above    1\n    //    1      1      1      0   =>   yes filled below    2\n    //    1      1      1      1   =>   no                  0\n    return select(segments, [0, 2, 1, 0, 2, 0, 0, 1, 1, 0, 0, 2, 0, 1, 2, 0], buildLog);\n  }\n};\nmodule.exports = SegmentSelector;","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","export default function (x) {\n  return x === null ? NaN : +x;\n}","import \"core-js/modules/es6.array.map\";\nvar array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","export default function (values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}","import number from \"./number\";\nexport default function (values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;else --m;\n    }\n  } else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  } else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}","export { default as bisect, bisectRight, bisectLeft } from \"./bisect\";\nexport { default as ascending } from \"./ascending\";\nexport { default as bisector } from \"./bisector\";\nexport { default as cross } from \"./cross\";\nexport { default as descending } from \"./descending\";\nexport { default as deviation } from \"./deviation\";\nexport { default as extent } from \"./extent\";\nexport { default as histogram } from \"./histogram\";\nexport { default as thresholdFreedmanDiaconis } from \"./threshold/freedmanDiaconis\";\nexport { default as thresholdScott } from \"./threshold/scott\";\nexport { default as thresholdSturges } from \"./threshold/sturges\";\nexport { default as max } from \"./max\";\nexport { default as mean } from \"./mean\";\nexport { default as median } from \"./median\";\nexport { default as merge } from \"./merge\";\nexport { default as min } from \"./min\";\nexport { default as pairs } from \"./pairs\";\nexport { default as permute } from \"./permute\";\nexport { default as quantile } from \"./quantile\";\nexport { default as range } from \"./range\";\nexport { default as scan } from \"./scan\";\nexport { default as shuffle } from \"./shuffle\";\nexport { default as sum } from \"./sum\";\nexport { default as ticks, tickIncrement, tickStep } from \"./ticks\";\nexport { default as transpose } from \"./transpose\";\nexport { default as variance } from \"./variance\";\nexport { default as zip } from \"./zip\";","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","// (c) Copyright 2016, Sean Connelly (@voidqk), http://syntheti.cc\n// MIT License\n// Project Home: https://github.com/voidqk/polybooljs\n//\n// simple linked list implementation that allows you to traverse down nodes and save positions\n//\nvar LinkedList = {\n  create: function create() {\n    var my = {\n      root: {\n        root: true,\n        next: null\n      },\n      exists: function exists(node) {\n        if (node === null || node === my.root) return false;\n        return true;\n      },\n      isEmpty: function isEmpty() {\n        return my.root.next === null;\n      },\n      getHead: function getHead() {\n        return my.root.next;\n      },\n      insertBefore: function insertBefore(node, check) {\n        var last = my.root;\n        var here = my.root.next;\n\n        while (here !== null) {\n          if (check(here)) {\n            node.prev = here.prev;\n            node.next = here;\n            here.prev.next = node;\n            here.prev = node;\n            return;\n          }\n\n          last = here;\n          here = here.next;\n        }\n\n        last.next = node;\n        node.prev = last;\n        node.next = null;\n      },\n      findTransition: function findTransition(check) {\n        var prev = my.root;\n        var here = my.root.next;\n\n        while (here !== null) {\n          if (check(here)) break;\n          prev = here;\n          here = here.next;\n        }\n\n        return {\n          before: prev === my.root ? null : prev,\n          after: here,\n          insert: function insert(node) {\n            node.prev = prev;\n            node.next = here;\n            prev.next = node;\n            if (here !== null) here.prev = node;\n            return node;\n          }\n        };\n      }\n    };\n    return my;\n  },\n  node: function node(data) {\n    data.prev = null;\n    data.next = null;\n\n    data.remove = function () {\n      data.prev.next = data.next;\n      if (data.next) data.next.prev = data.prev;\n      data.prev = null;\n      data.next = null;\n    };\n\n    return data;\n  }\n};\nmodule.exports = LinkedList;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar scales = require('./scales');\n\nvar helpers = require('./helpers');\n\nmodule.exports = {\n  moduleType: 'component',\n  name: 'colorscale',\n  attributes: require('./attributes'),\n  layoutAttributes: require('./layout_attributes'),\n  supplyLayoutDefaults: require('./layout_defaults'),\n  handleDefaults: require('./defaults'),\n  crossTraceDefaults: require('./cross_trace_defaults'),\n  calc: require('./calc'),\n  // ./scales.js is required in lib/coerce.js ;\n  // it needs to be a seperate module to avoid circular a dependency\n  scales: scales.scales,\n  defaultScale: scales.defaultScale,\n  getScale: scales.get,\n  isValidScale: scales.isValid,\n  hasColorscale: helpers.hasColorscale,\n  extractOpts: helpers.extractOpts,\n  extractScale: helpers.extractScale,\n  flipScale: helpers.flipScale,\n  makeColorScaleFunc: helpers.makeColorScaleFunc,\n  makeColorScaleFuncFromTrace: helpers.makeColorScaleFuncFromTrace\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar Lib = require('../../lib'); // look for either subplot or xaxis and yaxis attributes\n// does not handle splom case\n\n\nexports.getSubplot = function getSubplot(trace) {\n  return trace.subplot || trace.xaxis + trace.yaxis || trace.geo;\n}; // is trace in given list of subplots?\n// does handle splom case\n\n\nexports.isTraceInSubplots = function isTraceInSubplots(trace, subplots) {\n  if (trace.type === 'splom') {\n    var xaxes = trace.xaxes || [];\n    var yaxes = trace.yaxes || [];\n\n    for (var i = 0; i < xaxes.length; i++) {\n      for (var j = 0; j < yaxes.length; j++) {\n        if (subplots.indexOf(xaxes[i] + yaxes[j]) !== -1) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  return subplots.indexOf(exports.getSubplot(trace)) !== -1;\n}; // convenience functions for mapping all relevant axes\n\n\nexports.flat = function flat(subplots, v) {\n  var out = new Array(subplots.length);\n\n  for (var i = 0; i < subplots.length; i++) {\n    out[i] = v;\n  }\n\n  return out;\n};\n\nexports.p2c = function p2c(axArray, v) {\n  var out = new Array(axArray.length);\n\n  for (var i = 0; i < axArray.length; i++) {\n    out[i] = axArray[i].p2c(v);\n  }\n\n  return out;\n};\n\nexports.getDistanceFunction = function getDistanceFunction(mode, dx, dy, dxy) {\n  if (mode === 'closest') return dxy || exports.quadrature(dx, dy);\n  return mode === 'x' ? dx : dy;\n};\n\nexports.getClosest = function getClosest(cd, distfn, pointData) {\n  // do we already have a point number? (array mode only)\n  if (pointData.index !== false) {\n    if (pointData.index >= 0 && pointData.index < cd.length) {\n      pointData.distance = 0;\n    } else pointData.index = false;\n  } else {\n    // apply the distance function to each data point\n    // this is the longest loop... if this bogs down, we may need\n    // to create pre-sorted data (by x or y), not sure how to\n    // do this for 'closest'\n    for (var i = 0; i < cd.length; i++) {\n      var newDistance = distfn(cd[i]);\n\n      if (newDistance <= pointData.distance) {\n        pointData.index = i;\n        pointData.distance = newDistance;\n      }\n    }\n  }\n\n  return pointData;\n};\n/*\n * pseudo-distance function for hover effects on areas: inside the region\n * distance is finite (`passVal`), outside it's Infinity.\n *\n * @param {number} v0: signed difference between the current position and the left edge\n * @param {number} v1: signed difference between the current position and the right edge\n * @param {number} passVal: the value to return on success\n */\n\n\nexports.inbox = function inbox(v0, v1, passVal) {\n  return v0 * v1 < 0 || v0 === 0 ? passVal : Infinity;\n};\n\nexports.quadrature = function quadrature(dx, dy) {\n  return function (di) {\n    var x = dx(di);\n    var y = dy(di);\n    return Math.sqrt(x * x + y * y);\n  };\n};\n/** Fill event data point object for hover and selection.\n *  Invokes _module.eventData if present.\n *\n * N.B. note that point 'index' corresponds to input data array index\n *  whereas 'number' is its post-transform version.\n *\n * If the hovered/selected pt corresponds to an multiple input points\n * (e.g. for histogram and transformed traces), 'pointNumbers` and 'pointIndices'\n * are include in the event data.\n *\n * @param {object} pt\n * @param {object} trace\n * @param {object} cd\n * @return {object}\n */\n\n\nexports.makeEventData = function makeEventData(pt, trace, cd) {\n  // hover uses 'index', select uses 'pointNumber'\n  var pointNumber = 'index' in pt ? pt.index : pt.pointNumber;\n  var out = {\n    data: trace._input,\n    fullData: trace,\n    curveNumber: trace.index,\n    pointNumber: pointNumber\n  };\n\n  if (trace._indexToPoints) {\n    var pointIndices = trace._indexToPoints[pointNumber];\n\n    if (pointIndices.length === 1) {\n      out.pointIndex = pointIndices[0];\n    } else {\n      out.pointIndices = pointIndices;\n    }\n  } else {\n    out.pointIndex = pointNumber;\n  }\n\n  if (trace._module.eventData) {\n    out = trace._module.eventData(out, pt, trace, cd, pointNumber);\n  } else {\n    if ('xVal' in pt) out.x = pt.xVal;else if ('x' in pt) out.x = pt.x;\n    if ('yVal' in pt) out.y = pt.yVal;else if ('y' in pt) out.y = pt.y;\n    if (pt.xa) out.xaxis = pt.xa;\n    if (pt.ya) out.yaxis = pt.ya;\n    if (pt.zLabelVal !== undefined) out.z = pt.zLabelVal;\n  }\n\n  exports.appendArrayPointValue(out, trace, pointNumber);\n  return out;\n};\n/** Appends values inside array attributes corresponding to given point number\n *\n * @param {object} pointData : point data object (gets mutated here)\n * @param {object} trace : full trace object\n * @param {number|Array(number)} pointNumber : point number. May be a length-2 array\n *     [row, col] to dig into 2D arrays\n */\n\n\nexports.appendArrayPointValue = function (pointData, trace, pointNumber) {\n  var arrayAttrs = trace._arrayAttrs;\n\n  if (!arrayAttrs) {\n    return;\n  }\n\n  for (var i = 0; i < arrayAttrs.length; i++) {\n    var astr = arrayAttrs[i];\n    var key = getPointKey(astr);\n\n    if (pointData[key] === undefined) {\n      var val = Lib.nestedProperty(trace, astr).get();\n      var pointVal = getPointData(val, pointNumber);\n      if (pointVal !== undefined) pointData[key] = pointVal;\n    }\n  }\n};\n/**\n * Appends values inside array attributes corresponding to given point number array\n * For use when pointData references a plot entity that arose (or potentially arose)\n * from multiple points in the input data\n *\n * @param {object} pointData : point data object (gets mutated here)\n * @param {object} trace : full trace object\n * @param {Array(number)|Array(Array(number))} pointNumbers : Array of point numbers.\n *     Each entry in the array may itself be a length-2 array [row, col] to dig into 2D arrays\n */\n\n\nexports.appendArrayMultiPointValues = function (pointData, trace, pointNumbers) {\n  var arrayAttrs = trace._arrayAttrs;\n\n  if (!arrayAttrs) {\n    return;\n  }\n\n  for (var i = 0; i < arrayAttrs.length; i++) {\n    var astr = arrayAttrs[i];\n    var key = getPointKey(astr);\n\n    if (pointData[key] === undefined) {\n      var val = Lib.nestedProperty(trace, astr).get();\n      var keyVal = new Array(pointNumbers.length);\n\n      for (var j = 0; j < pointNumbers.length; j++) {\n        keyVal[j] = getPointData(val, pointNumbers[j]);\n      }\n\n      pointData[key] = keyVal;\n    }\n  }\n};\n\nvar pointKeyMap = {\n  ids: 'id',\n  locations: 'location',\n  labels: 'label',\n  values: 'value',\n  'marker.colors': 'color',\n  parents: 'parent'\n};\n\nfunction getPointKey(astr) {\n  return pointKeyMap[astr] || astr;\n}\n\nfunction getPointData(val, pointNumber) {\n  if (Array.isArray(pointNumber)) {\n    if (Array.isArray(val) && Array.isArray(val[pointNumber[0]])) {\n      return val[pointNumber[0]][pointNumber[1]];\n    }\n  } else {\n    return val[pointNumber];\n  }\n}","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar handleHoverLabelDefaults = require('./hoverlabel_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var opts = Lib.extendFlat({}, layout.hoverlabel);\n  if (traceOut.hovertemplate) opts.namelength = -1;\n  handleHoverLabelDefaults(traceIn, traceOut, coerce, opts);\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar setCursor = require('./setcursor');\n\nvar STASHATTR = 'data-savedcursor';\nvar NO_CURSOR = '!!';\n/*\n * works with our CSS cursor classes (see css/_cursor.scss)\n * to override a previous cursor set on d3 single-element selections,\n * by moving the name of the original cursor to the data-savedcursor attr.\n * omit cursor to revert to the previously set value.\n */\n\nmodule.exports = function overrideCursor(el3, csr) {\n  var savedCursor = el3.attr(STASHATTR);\n\n  if (csr) {\n    if (!savedCursor) {\n      var classes = (el3.attr('class') || '').split(' ');\n\n      for (var i = 0; i < classes.length; i++) {\n        var cls = classes[i];\n\n        if (cls.indexOf('cursor-') === 0) {\n          el3.attr(STASHATTR, cls.substr(7)).classed(cls, false);\n        }\n      }\n\n      if (!el3.attr(STASHATTR)) {\n        el3.attr(STASHATTR, NO_CURSOR);\n      }\n    }\n\n    setCursor(el3, csr);\n  } else if (savedCursor) {\n    el3.attr(STASHATTR, null);\n    if (savedCursor === NO_CURSOR) setCursor(el3);else setCursor(el3, savedCursor);\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.flags\");\n\nvar Lib = require('../lib');\n\nvar extendFlat = Lib.extendFlat;\nvar isPlainObject = Lib.isPlainObject;\nvar traceOpts = {\n  valType: 'flaglist',\n  extras: ['none'],\n  flags: ['calc', 'clearAxisTypes', 'plot', 'style', 'markerSize', 'colorbars'],\n  description: ['trace attributes should include an `editType` string matching this flaglist.', '*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`', 'to force it to be regenerated', '*clearAxisTypes* resets the types of the axes this trace is on, because new data could', 'cause the automatic axis type detection to change. Log type will not be cleared, as that', 'is never automatically chosen so must have been user-specified.', '*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.', '*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.', '*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`', '*colorbars* only redraws colorbars.'].join(' ')\n};\nvar layoutOpts = {\n  valType: 'flaglist',\n  extras: ['none'],\n  flags: ['calc', 'plot', 'legend', 'ticks', 'axrange', 'layoutstyle', 'modebar', 'camera', 'arraydraw', 'colorbars'],\n  description: ['layout attributes should include an `editType` string matching this flaglist.', '*calc* is the most extensive: a full `Plotly.plot` starting by clearing `gd.calcdata`', 'to force it to be regenerated', '*plot* calls `Plotly.plot` but without first clearing `gd.calcdata`.', '*legend* only redraws the legend.', '*ticks* only redraws axis ticks, labels, and gridlines.', '*axrange* minimal sequence when updating axis ranges.', '*layoutstyle* reapplies global and SVG cartesian axis styles.', '*modebar* just updates the modebar.', '*camera* just updates the camera settings for gl3d scenes.', '*arraydraw* allows component arrays to invoke the redraw routines just for the', 'component(s) that changed.', '*colorbars* only redraws colorbars.'].join(' ')\n}; // flags for inside restyle/relayout include a few extras\n// that shouldn't be used in attributes, to deal with certain\n// combinations and conditionals efficiently\n\nvar traceEditTypeFlags = traceOpts.flags.slice().concat(['fullReplot']);\nvar layoutEditTypeFlags = layoutOpts.flags.slice().concat('layoutReplot');\nmodule.exports = {\n  traces: traceOpts,\n  layout: layoutOpts,\n\n  /*\n   * default (all false) edit flags for restyle (traces)\n   * creates a new object each call, so the caller can mutate freely\n   */\n  traceFlags: function traceFlags() {\n    return falseObj(traceEditTypeFlags);\n  },\n\n  /*\n   * default (all false) edit flags for relayout\n   * creates a new object each call, so the caller can mutate freely\n   */\n  layoutFlags: function layoutFlags() {\n    return falseObj(layoutEditTypeFlags);\n  },\n\n  /*\n   * update `flags` with the `editType` values found in `attr`\n   */\n  update: function update(flags, attr) {\n    var editType = attr.editType;\n\n    if (editType && editType !== 'none') {\n      var editTypeParts = editType.split('+');\n\n      for (var i = 0; i < editTypeParts.length; i++) {\n        flags[editTypeParts[i]] = true;\n      }\n    }\n  },\n  overrideAll: overrideAll\n};\n\nfunction falseObj(keys) {\n  var out = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    out[keys[i]] = false;\n  }\n\n  return out;\n}\n/**\n * For attributes that are largely copied from elsewhere into a plot type that doesn't\n * support partial redraws - overrides the editType field of all attributes in the object\n *\n * @param {object} attrs: the attributes to override. Will not be mutated.\n * @param {string} editTypeOverride: the new editType to use\n * @param {'nested'|'from-root'} overrideContainers:\n *   - 'nested' will override editType for nested containers but not the root.\n *   - 'from-root' will also override editType of the root container.\n *   Containers below the absolute top level (trace or layout root) DO need an\n *   editType even if they are not `valObject`s themselves (eg `scatter.marker`)\n *   to handle the case where you edit the whole container.\n *\n * @return {object} a new attributes object with `editType` modified as directed\n */\n\n\nfunction overrideAll(attrs, editTypeOverride, overrideContainers) {\n  var out = extendFlat({}, attrs);\n\n  for (var key in out) {\n    var attr = out[key];\n\n    if (isPlainObject(attr)) {\n      out[key] = overrideOne(attr, editTypeOverride, overrideContainers, key);\n    }\n  }\n\n  if (overrideContainers === 'from-root') out.editType = editTypeOverride;\n  return out;\n}\n\nfunction overrideOne(attr, editTypeOverride, overrideContainers, key) {\n  if (attr.valType) {\n    var out = extendFlat({}, attr);\n    out.editType = editTypeOverride;\n\n    if (Array.isArray(attr.items)) {\n      out.items = new Array(attr.items.length);\n\n      for (var i = 0; i < attr.items.length; i++) {\n        out.items[i] = overrideOne(attr.items[i], editTypeOverride, 'from-root');\n      }\n    }\n\n    return out;\n  } else {\n    // don't provide an editType for the _deprecated container\n    return overrideAll(attr, editTypeOverride, key.charAt(0) === '_' ? 'nested' : 'from-root');\n  }\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar FP_SAFE = require('../../constants/numerical').FP_SAFE;\n\nvar Registry = require('../../registry');\n\nmodule.exports = {\n  getAutoRange: getAutoRange,\n  makePadFn: makePadFn,\n  doAutoRange: doAutoRange,\n  findExtremes: findExtremes,\n  concatExtremes: concatExtremes\n};\n/**\n * getAutoRange\n *\n * Collects all _extremes values corresponding to a given axis\n * and computes its auto range.\n *\n * Note that getAutoRange uses return values from findExtremes.\n *\n * @param {object} gd:\n *   graph div object with filled-in fullData and fullLayout, in particular\n *   with filled-in '_extremes' containers:\n *   {\n *      val: calcdata value,\n *      pad: extra pixels beyond this value,\n *      extrapad: bool, does this point want 5% extra padding\n *   }\n * @param {object} ax:\n *   full axis object, in particular with filled-in '_traceIndices'\n *   and '_annIndices' / '_shapeIndices' if applicable\n * @return {array}\n *   an array of [min, max]. These are calcdata for log and category axes\n *   and data for linear and date axes.\n *\n * TODO: we want to change log to data as well, but it's hard to do this\n * maintaining backward compatibility. category will always have to use calcdata\n * though, because otherwise values between categories (or outside all categories)\n * would be impossible.\n */\n\nfunction getAutoRange(gd, ax) {\n  var i, j;\n  var newRange = [];\n  var getPad = makePadFn(ax);\n  var extremes = concatExtremes(gd, ax);\n  var minArray = extremes.min;\n  var maxArray = extremes.max;\n\n  if (minArray.length === 0 || maxArray.length === 0) {\n    return Lib.simpleMap(ax.range, ax.r2l);\n  }\n\n  var minmin = minArray[0].val;\n  var maxmax = maxArray[0].val;\n\n  for (i = 1; i < minArray.length; i++) {\n    if (minmin !== maxmax) break;\n    minmin = Math.min(minmin, minArray[i].val);\n  }\n\n  for (i = 1; i < maxArray.length; i++) {\n    if (minmin !== maxmax) break;\n    maxmax = Math.max(maxmax, maxArray[i].val);\n  }\n\n  var axReverse = false;\n\n  if (ax.range) {\n    var rng = Lib.simpleMap(ax.range, ax.r2l);\n    axReverse = rng[1] < rng[0];\n  } // one-time setting to easily reverse the axis\n  // when plotting from code\n\n\n  if (ax.autorange === 'reversed') {\n    axReverse = true;\n    ax.autorange = true;\n  }\n\n  var rangeMode = ax.rangemode;\n  var toZero = rangeMode === 'tozero';\n  var nonNegative = rangeMode === 'nonnegative';\n  var axLen = ax._length; // don't allow padding to reduce the data to < 10% of the length\n\n  var minSpan = axLen / 10;\n  var mbest = 0;\n  var minpt, maxpt, minbest, maxbest, dp, dv;\n\n  for (i = 0; i < minArray.length; i++) {\n    minpt = minArray[i];\n\n    for (j = 0; j < maxArray.length; j++) {\n      maxpt = maxArray[j];\n      dv = maxpt.val - minpt.val;\n\n      if (dv > 0) {\n        dp = axLen - getPad(minpt) - getPad(maxpt);\n\n        if (dp > minSpan) {\n          if (dv / dp > mbest) {\n            minbest = minpt;\n            maxbest = maxpt;\n            mbest = dv / dp;\n          }\n        } else if (dv / axLen > mbest) {\n          // in case of padding longer than the axis\n          // at least include the unpadded data values.\n          minbest = {\n            val: minpt.val,\n            pad: 0\n          };\n          maxbest = {\n            val: maxpt.val,\n            pad: 0\n          };\n          mbest = dv / axLen;\n        }\n      }\n    }\n  }\n\n  function getMaxPad(prev, pt) {\n    return Math.max(prev, getPad(pt));\n  }\n\n  if (minmin === maxmax) {\n    var lower = minmin - 1;\n    var upper = minmin + 1;\n\n    if (toZero) {\n      if (minmin === 0) {\n        // The only value we have on this axis is 0, and we want to\n        // autorange so zero is one end.\n        // In principle this could be [0, 1] or [-1, 0] but usually\n        // 'tozero' pins 0 to the low end, so follow that.\n        newRange = [0, 1];\n      } else {\n        var maxPad = (minmin > 0 ? maxArray : minArray).reduce(getMaxPad, 0); // we're pushing a single value away from the edge due to its\n        // padding, with the other end clamped at zero\n        // 0.5 means don't push it farther than the center.\n\n        var rangeEnd = minmin / (1 - Math.min(0.5, maxPad / axLen));\n        newRange = minmin > 0 ? [0, rangeEnd] : [rangeEnd, 0];\n      }\n    } else if (nonNegative) {\n      newRange = [Math.max(0, lower), Math.max(1, upper)];\n    } else {\n      newRange = [lower, upper];\n    }\n  } else {\n    if (toZero) {\n      if (minbest.val >= 0) {\n        minbest = {\n          val: 0,\n          pad: 0\n        };\n      }\n\n      if (maxbest.val <= 0) {\n        maxbest = {\n          val: 0,\n          pad: 0\n        };\n      }\n    } else if (nonNegative) {\n      if (minbest.val - mbest * getPad(minbest) < 0) {\n        minbest = {\n          val: 0,\n          pad: 0\n        };\n      }\n\n      if (maxbest.val <= 0) {\n        maxbest = {\n          val: 1,\n          pad: 0\n        };\n      }\n    } // in case it changed again...\n\n\n    mbest = (maxbest.val - minbest.val) / (axLen - getPad(minbest) - getPad(maxbest));\n    newRange = [minbest.val - mbest * getPad(minbest), maxbest.val + mbest * getPad(maxbest)];\n  } // maintain reversal\n\n\n  if (axReverse) newRange.reverse();\n  return Lib.simpleMap(newRange, ax.l2r || Number);\n}\n/*\n * calculate the pixel padding for ax._min and ax._max entries with\n * optional extrapad as 5% of the total axis length\n */\n\n\nfunction makePadFn(ax) {\n  // 5% padding for points that specify extrapad: true\n  var extrappad = ax._length / 20; // domain-constrained axes: base extrappad on the unconstrained\n  // domain so it's consistent as the domain changes\n\n  if (ax.constrain === 'domain' && ax._inputDomain) {\n    extrappad *= (ax._inputDomain[1] - ax._inputDomain[0]) / (ax.domain[1] - ax.domain[0]);\n  }\n\n  return function getPad(pt) {\n    return pt.pad + (pt.extrapad ? extrappad : 0);\n  };\n}\n\nfunction concatExtremes(gd, ax) {\n  var axId = ax._id;\n  var fullData = gd._fullData;\n  var fullLayout = gd._fullLayout;\n  var minArray = [];\n  var maxArray = [];\n  var i, j, d;\n\n  function _concat(cont, indices) {\n    for (i = 0; i < indices.length; i++) {\n      var item = cont[indices[i]];\n      var extremes = (item._extremes || {})[axId];\n\n      if (item.visible === true && extremes) {\n        for (j = 0; j < extremes.min.length; j++) {\n          d = extremes.min[j];\n          collapseMinArray(minArray, d.val, d.pad, {\n            extrapad: d.extrapad\n          });\n        }\n\n        for (j = 0; j < extremes.max.length; j++) {\n          d = extremes.max[j];\n          collapseMaxArray(maxArray, d.val, d.pad, {\n            extrapad: d.extrapad\n          });\n        }\n      }\n    }\n  }\n\n  _concat(fullData, ax._traceIndices);\n\n  _concat(fullLayout.annotations || [], ax._annIndices || []);\n\n  _concat(fullLayout.shapes || [], ax._shapeIndices || []);\n\n  return {\n    min: minArray,\n    max: maxArray\n  };\n}\n\nfunction doAutoRange(gd, ax) {\n  ax.setScale();\n\n  if (ax.autorange) {\n    ax.range = getAutoRange(gd, ax);\n    ax._r = ax.range.slice();\n    ax._rl = Lib.simpleMap(ax._r, ax.r2l); // doAutoRange will get called on fullLayout,\n    // but we want to report its results back to layout\n\n    var axIn = ax._input; // before we edit _input, store preGUI values\n\n    var edits = {};\n    edits[ax._attr + '.range'] = ax.range;\n    edits[ax._attr + '.autorange'] = ax.autorange;\n    Registry.call('_storeDirectGUIEdit', gd.layout, gd._fullLayout._preGUI, edits);\n    axIn.range = ax.range.slice();\n    axIn.autorange = ax.autorange;\n  }\n\n  var anchorAx = ax._anchorAxis;\n\n  if (anchorAx && anchorAx.rangeslider) {\n    var axeRangeOpts = anchorAx.rangeslider[ax._name];\n\n    if (axeRangeOpts) {\n      if (axeRangeOpts.rangemode === 'auto') {\n        axeRangeOpts.range = getAutoRange(gd, ax);\n      }\n    }\n\n    anchorAx._input.rangeslider[ax._name] = Lib.extendFlat({}, axeRangeOpts);\n  }\n}\n/**\n * findExtremes\n *\n * Find min/max extremes of an array of coordinates on a given axis.\n *\n * Note that findExtremes is called during `calc`, when we don't yet know the axis\n * length; all the inputs should be based solely on the trace data, nothing\n * about the axis layout.\n *\n * Note that `ppad` and `vpad` as well as their asymmetric variants refer to\n * the before and after padding of the passed `data` array, not to the whole axis.\n *\n * @param {object} ax: full axis object\n *   relies on\n *   - ax.type\n *   - ax._m (just its sign)\n *   - ax.d2l\n * @param {array} data:\n *  array of numbers (i.e. already run though ax.d2c)\n * @param {object} opts:\n *  available keys are:\n *      vpad: (number or number array) pad values (data value +-vpad)\n *      ppad: (number or number array) pad pixels (pixel location +-ppad)\n *      ppadplus, ppadminus, vpadplus, vpadminus:\n *          separate padding for each side, overrides symmetric\n *      padded: (boolean) add 5% padding to both ends\n *          (unless one end is overridden by tozero)\n *      tozero: (boolean) make sure to include zero if axis is linear,\n *          and make it a tight bound if possible\n *      vpadLinearized: (boolean) whether or not vpad (or vpadplus/vpadminus)\n *          is linearized (for log scale axes)\n *\n * @return {object}\n *  - min {array of objects}\n *  - max {array of objects}\n *  each object item has fields:\n *    - val {number}\n *    - pad {number}\n *    - extrappad {number}\n *  - opts {object}: a ref to the passed \"options\" object\n */\n\n\nfunction findExtremes(ax, data, opts) {\n  if (!opts) opts = {};\n  if (!ax._m) ax.setScale();\n  var minArray = [];\n  var maxArray = [];\n  var len = data.length;\n  var extrapad = opts.padded || false;\n  var tozero = opts.tozero && (ax.type === 'linear' || ax.type === '-');\n  var isLog = ax.type === 'log';\n  var hasArrayOption = false;\n  var vpadLinearized = opts.vpadLinearized || false;\n  var i, v, di, dmin, dmax, ppadiplus, ppadiminus, vmin, vmax;\n\n  function makePadAccessor(item) {\n    if (Array.isArray(item)) {\n      hasArrayOption = true;\n      return function (i) {\n        return Math.max(Number(item[i] || 0), 0);\n      };\n    } else {\n      var v = Math.max(Number(item || 0), 0);\n      return function () {\n        return v;\n      };\n    }\n  }\n\n  var ppadplus = makePadAccessor((ax._m > 0 ? opts.ppadplus : opts.ppadminus) || opts.ppad || 0);\n  var ppadminus = makePadAccessor((ax._m > 0 ? opts.ppadminus : opts.ppadplus) || opts.ppad || 0);\n  var vpadplus = makePadAccessor(opts.vpadplus || opts.vpad);\n  var vpadminus = makePadAccessor(opts.vpadminus || opts.vpad);\n\n  if (!hasArrayOption) {\n    // with no arrays other than `data` we don't need to consider\n    // every point, only the extreme data points\n    vmin = Infinity;\n    vmax = -Infinity;\n\n    if (isLog) {\n      for (i = 0; i < len; i++) {\n        v = data[i]; // data is not linearized yet so we still have to filter out negative logs\n\n        if (v < vmin && v > 0) vmin = v;\n        if (v > vmax && v < FP_SAFE) vmax = v;\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        v = data[i];\n        if (v < vmin && v > -FP_SAFE) vmin = v;\n        if (v > vmax && v < FP_SAFE) vmax = v;\n      }\n    }\n\n    data = [vmin, vmax];\n    len = 2;\n  }\n\n  var collapseOpts = {\n    tozero: tozero,\n    extrapad: extrapad\n  };\n\n  function addItem(i) {\n    di = data[i];\n    if (!isNumeric(di)) return;\n    ppadiplus = ppadplus(i);\n    ppadiminus = ppadminus(i);\n\n    if (vpadLinearized) {\n      dmin = ax.c2l(di) - vpadminus(i);\n      dmax = ax.c2l(di) + vpadplus(i);\n    } else {\n      vmin = di - vpadminus(i);\n      vmax = di + vpadplus(i); // special case for log axes: if vpad makes this object span\n      // more than an order of mag, clip it to one order. This is so\n      // we don't have non-positive errors or absurdly large lower\n      // range due to rounding errors\n\n      if (isLog && vmin < vmax / 10) vmin = vmax / 10;\n      dmin = ax.c2l(vmin);\n      dmax = ax.c2l(vmax);\n    }\n\n    if (tozero) {\n      dmin = Math.min(0, dmin);\n      dmax = Math.max(0, dmax);\n    }\n\n    if (goodNumber(dmin)) {\n      collapseMinArray(minArray, dmin, ppadiminus, collapseOpts);\n    }\n\n    if (goodNumber(dmax)) {\n      collapseMaxArray(maxArray, dmax, ppadiplus, collapseOpts);\n    }\n  } // For efficiency covering monotonic or near-monotonic data,\n  // check a few points at both ends first and then sweep\n  // through the middle\n\n\n  var iMax = Math.min(6, len);\n\n  for (i = 0; i < iMax; i++) {\n    addItem(i);\n  }\n\n  for (i = len - 1; i >= iMax; i--) {\n    addItem(i);\n  }\n\n  return {\n    min: minArray,\n    max: maxArray,\n    opts: opts\n  };\n}\n\nfunction collapseMinArray(array, newVal, newPad, opts) {\n  collapseArray(array, newVal, newPad, opts, lessOrEqual);\n}\n\nfunction collapseMaxArray(array, newVal, newPad, opts) {\n  collapseArray(array, newVal, newPad, opts, greaterOrEqual);\n}\n/**\n * collapseArray\n *\n * Takes items from 'array' and compares them to 'newVal', 'newPad'.\n *\n * @param {array} array:\n *  current set of min or max extremes\n * @param {number} newVal:\n *  new value to compare against\n * @param {number} newPad:\n *  pad value associated with 'newVal'\n * @param {object} opts:\n *  - tozero {boolean}\n *  - extrapad {number}\n * @param {function} atLeastAsExtreme:\n *  comparison function, use\n *  - lessOrEqual for min 'array' and\n *  - greaterOrEqual for max 'array'\n *\n * In practice, 'array' is either\n *  - 'extremes[ax._id].min' or\n *  - 'extremes[ax._id].max\n *  found in traces and layout items that affect autorange.\n *\n * Since we don't yet know the relationship between pixels and values\n * (that's what we're trying to figure out!) AND we don't yet know how\n * many pixels `extrapad` represents (it's going to be 5% of the length,\n * but we don't want to have to redo calc just because length changed)\n * two point must satisfy three criteria simultaneously for one to supersede the other:\n *  - at least as extreme a `val`\n *  - at least as big a `pad`\n *  - an unpadded point cannot supersede a padded point, but any other combination can\n *\n * Then:\n * - If the item supersedes the new point, set includeThis false\n * - If the new pt supersedes the item, delete it from 'array'\n */\n\n\nfunction collapseArray(array, newVal, newPad, opts, atLeastAsExtreme) {\n  var tozero = opts.tozero;\n  var extrapad = opts.extrapad;\n  var includeThis = true;\n\n  for (var j = 0; j < array.length && includeThis; j++) {\n    var v = array[j];\n\n    if (atLeastAsExtreme(v.val, newVal) && v.pad >= newPad && (v.extrapad || !extrapad)) {\n      includeThis = false;\n      break;\n    } else if (atLeastAsExtreme(newVal, v.val) && v.pad <= newPad && (extrapad || !v.extrapad)) {\n      array.splice(j, 1);\n      j--;\n    }\n  }\n\n  if (includeThis) {\n    var clipAtZero = tozero && newVal === 0;\n    array.push({\n      val: newVal,\n      pad: clipAtZero ? 0 : newPad,\n      extrapad: clipAtZero ? false : extrapad\n    });\n  }\n} // In order to stop overflow errors, don't consider points\n// too close to the limits of js floating point\n\n\nfunction goodNumber(v) {\n  return isNumeric(v) && Math.abs(v) < FP_SAFE;\n}\n\nfunction lessOrEqual(v0, v1) {\n  return v0 <= v1;\n}\n\nfunction greaterOrEqual(v0, v1) {\n  return v0 >= v1;\n}"],"sourceRoot":""}