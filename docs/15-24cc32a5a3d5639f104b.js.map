{"version":3,"sources":["webpack:///./node_modules/plotly.js/src/traces/sankey/defaults.js","webpack:///./node_modules/plotly.js/src/traces/sankey/constants.js","webpack:///./node_modules/plotly.js/src/lib/gup.js","webpack:///./node_modules/d3-force/src/center.js","webpack:///./node_modules/d3-force/src/constant.js","webpack:///./node_modules/d3-force/src/jiggle.js","webpack:///./node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-force/src/collide.js","webpack:///./node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-quadtree/src/visitAfter.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-force/src/manyBody.js","webpack:///./node_modules/d3-force/src/radial.js","webpack:///./node_modules/d3-force/src/x.js","webpack:///./node_modules/d3-force/src/y.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/d3-shape/src/link/index.js","webpack:///./src/plotly/base_plot.js","webpack:///./node_modules/plotly.js/src/traces/sankey/select.js","webpack:///./node_modules/@plotly/d3-sankey-circular/dist/d3-sankey-circular.es.js","webpack:///./node_modules/strongly-connected-components/scc.js","webpack:///./node_modules/plotly.js/src/traces/sankey/calc.js","webpack:///./src/plotly/render.js","webpack:///./node_modules/d3-collection/src/map.js","webpack:///./node_modules/d3-collection/src/nest.js","webpack:///./node_modules/d3-collection/src/set.js","webpack:///./node_modules/elementary-circuits-directed-graph/johnson.js","webpack:///./node_modules/plotly.js/src/traces/sankey/attributes.js","webpack:///./src/plotly/sankey.js","webpack:///./src/plotly/plot.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-interpolate/src/basis.js","webpack:///./node_modules/d3-interpolate/src/basisClosed.js","webpack:///./node_modules/d3-interpolate/src/constant.js","webpack:///./node_modules/d3-interpolate/src/color.js","webpack:///./node_modules/d3-interpolate/src/rgb.js","webpack:///./node_modules/d3-interpolate/src/numberArray.js","webpack:///./node_modules/d3-interpolate/src/array.js","webpack:///./node_modules/d3-interpolate/src/date.js","webpack:///./node_modules/d3-interpolate/src/number.js","webpack:///./node_modules/d3-interpolate/src/object.js","webpack:///./node_modules/d3-interpolate/src/string.js","webpack:///./node_modules/d3-interpolate/src/transform/parse.js","webpack:///./node_modules/d3-interpolate/src/value.js","webpack:///./node_modules/d3-interpolate/src/discrete.js","webpack:///./node_modules/d3-interpolate/src/hue.js","webpack:///./node_modules/d3-interpolate/src/round.js","webpack:///./node_modules/d3-interpolate/src/transform/decompose.js","webpack:///./node_modules/d3-interpolate/src/transform/index.js","webpack:///./node_modules/d3-interpolate/src/zoom.js","webpack:///./node_modules/d3-interpolate/src/hsl.js","webpack:///./node_modules/d3-color/src/math.js","webpack:///./node_modules/d3-color/src/lab.js","webpack:///./node_modules/d3-interpolate/src/lab.js","webpack:///./node_modules/d3-interpolate/src/hcl.js","webpack:///./node_modules/d3-color/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/piecewise.js","webpack:///./node_modules/d3-interpolate/src/quantize.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/d3-sankey/src/align.js","webpack:///./node_modules/d3-sankey/src/constant.js","webpack:///./node_modules/d3-sankey/src/sankey.js","webpack:///./node_modules/d3-sankey/src/sankeyLinkHorizontal.js","webpack:///./node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-array/src/cross.js","webpack:///./node_modules/d3-array/src/number.js","webpack:///./node_modules/d3-array/src/array.js","webpack:///./node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-array/src/threshold/sturges.js","webpack:///./node_modules/d3-array/src/max.js","webpack:///./node_modules/d3-array/src/mean.js","webpack:///./node_modules/d3-array/src/min.js","webpack:///./node_modules/d3-array/src/sum.js"],"names":["Lib","attributes","Color","tinycolor","handleDomainDefaults","defaults","handleHoverLabelDefaults","Template","handleArrayContainerDefaults","concentrationscalesDefaults","In","Out","coerce","attr","dflt","link","colorscales","module","exports","traceIn","traceOut","defaultColor","layout","hoverlabelDefault","extendDeep","hoverlabel","nodeIn","node","nodeOut","newContainer","coerceNode","hoverinfo","colors","colorway","label","map","d","i","addOpacity","length","defaultNodePalette","linkIn","linkOut","coerceLink","dfltArrangement","defaultLinkColor","paper_bgcolor","getLuminance","repeat","value","name","handleItemDefaults","x","y","coerceFont","extendFlat","font","_length","nodeTextOffsetHorizontal","nodeTextOffsetVertical","nodePadAcross","sankeyIterations","forceIterations","forceTicksPerFrame","duration","ease","cn","sankey","sankeyLinks","sankeyLink","sankeyNodeSet","sankeyNode","nodeRect","nodeCapture","nodeCentered","nodeLabelGuide","nodeLabel","nodeLabelTextPath","identity","wrap","keyFun","key","descend","unwrap","nodes","force","n","sx","sy","initialize","_","arguments","Math","random","tree","isNaN","parent","xm","ym","xp","yp","right","bottom","j","_root","leaf","data","x0","_x0","y0","_y0","x1","_x1","y1","_y1","_x","call","_y","next","Array","this","defaultX","defaultY","quadtree","Quadtree","NaN","addAll","undefined","leaf_copy","copy","treeProto","prototype","vx","vy","child","source","target","pop","push","add","cover","xz","yz","Infinity","floor","z","visit","extent","find","x2","y2","q","x3","y3","quads","radius","dx","dy","d2","sqrt","remove","retainer","previous","removeAll","root","size","callback","visitAfter","radii","strength","iterations","xi","yi","ri","ri2","k","prepare","index","apply","quad","rj","r","l","jiggle","constant","nodeById","nodeId","get","Error","strengths","distances","count","bias","id","min","distance","alpha","links","b","m","initializeStrength","initializeDistance","noop","dispatch","t","test","Dispatch","parseTypenames","typenames","types","trim","split","indexOf","slice","hasOwnProperty","type","c","set","concat","constructor","on","typename","T","that","args","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","time","restart","wake","e","timerFlush","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","initialAngle","PI","simulation","_alpha","_alphaMin","_alphaDecay","pow","_alphaTarget","_velocityDecay","forces","stepper","step","event","tick","_nodes","each","fx","fy","initializeNodes","angle","cos","sin","initializeForce","alphaMin","alphaDecay","alphaTarget","velocityDecay","closest","distanceMin2","distanceMax2","theta2","accumulate","weight","abs","w","distanceMin","distanceMax","theta","radiuses","pi","tau","tauEpsilon","Path","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","tan","acos","t01","t21","arc","a0","a1","ccw","cw","da","rect","h","toString","p","linkSource","linkTarget","curve","context","buffer","argv","s","curveHorizontal","linkHorizontal","overrideAll","require","getModuleCalcData","plot","fxAttrs","setCursor","dragElement","prepSelect","Registry","subplotUpdateFx","gd","trace","_fullData","fullLayout","_fullLayout","dragMode","dragmode","cursor","bgRect","_bgRect","xaxis","_id","c2p","_offset","_sankey","translateX","width","yaxis","translateY","height","dragOptions","element","plotinfo","fillRangeItems","subplot","xaxes","yaxes","doneFnCompleted","selection","newGroups","traceNow","oldGroups","groups","newGroup","findNode","pt","graph","pointNumber","group","childrenNodes","_count","filter","Boolean","startX","startY","init","baseLayoutAttrOverrides","calcData","calcdata","updateFx","clean","newFullData","newFullLayout","oldFullData","oldFullLayout","hadPlot","_has","hasPlot","_paperdiv","selectAll","searchInfo","selectionTester","fullData","cd","partOfGroup","pos","orientation","reverse","contains","targetDepth","depth","left","justify","sourceLinks","center","targetLinks","_typeof","Symbol","iterator","obj","ascendingSourceBreadth","a","ascendingBreadth","ascendingTargetBreadth","partOfCycle","circularLinkType","nodeCenter","linkSourceCenter","linkTargetCenter","defaultId","defaultNodes","defaultLinks","getNodeID","sankeyCircular","py","paddingRatio","align","circularLinkGap","sortNodes","computeNodeLinks","identifyCircles","computeNodeValues","computeNodeDepths","selectCircularLinkTypes","computeNodeBreadths","computeLinkBreadths","linkSortingIterations","iteration","sortSourceLinks","sortTargetLinks","resolveNodeLinkOverlaps","fillHeight","addCircularPathData","forEach","max","circular","column","columns","sortKeys","entries","values","padding","thisPadding","ky","margin","totalTopLinksWidth","totalBottomLinksWidth","totalRightLinksWidth","totalLeftLinksWidth","maxColumn","getCircleMargins","ratio","currentWidth","currentHeight","scaleX","scaleY","top","scaleSankeySize","nodesLength","numberOfNonSelfLinkingCycles","initializeNodeBreadth","resolveCollisions","relaxLeftAndRight","columnsLength","nodeHeight","avgTargetY","avgSourceY","sort","y0cycle","y1cycle","nodeAlign","nodeWidth","nodePadding","nodePaddingRatio","update","circularLinkID","adjList","cycles","circularLinks","last","numberOfTops","numberOfBottoms","selfLinking","linkAngle","adjacent","opposite","atan","sourceCount","targetCount","onlyCircularLink","nodeSourceLinks","nodeTargetLinks","calcVerticalBuffer","sortLinkColumnAscending","link1","link2","circularPathData","verticalBuffer","bufferOverThisLink","minY","arcRadius","leftNodeBuffer","rightNodeBuffer","sourceWidth","sourceX","targetX","sourceY","targetY","leftSmallArcRadius","leftLargeArcRadius","rightSmallArcRadius","rightLargeArcRadius","verticalFullExtent","verticalLeftInnerExtent","verticalRightInnerExtent","thisColumn","thisCircularLinkType","sameColumnLinks","sortLinkSourceYDescending","sortLinkSourceYAscending","radiusOffset","sortLinkTargetYDescending","sortLinkTargetYAscending","leftInnerExtent","rightInnerExtent","leftFullExtent","rightFullExtent","pathString","createCircularPathString","normalPath","linkColumnDistance","linkXLength","linkPerpendicularYToLinkSource","longerLink","shorterLink","heightFromY1ToPependicular","incline","linkPerpendicularYToLinkTarget","columnToTest","maxColumnToTest","numberOfColumnsToTest","B0_t","B1_t","B2_t","B3_t","py_t","linkY0AtColumn","linkY1AtColumn","adjustNodeHeight","otherNode","nodesOverlap","nodeA","nodeB","sankeyY0","sankeyY1","moveNodes","nodesSourceLinks","nodeSourceLinksLength","sameInclines","link2Adj","ySourceOffset","offsetFromBottom","nodesTargetLinks","nodesTargetLinksLength","yTargetOffset","minY0","numVertices","lowValue","active","scc","sccLinks","newE","components","sccAdjList","strongConnect","v","S","u","component","linkCount","allLinks","adjacencyList","tarjan","isArrayOrTypedArray","isIndex","Colorscale","convertToD3Sankey","nodeSpec","linkSpec","hasLinkColorArray","color","hasLinkCustomdataArray","customdata","linkedNodes","componentCount","cscale","specs","extractScale","cLetter","scale","makeColorScaleFunc","maxNodeId","nodeCount","groupLookup","nodeIndex","groupIndex","warn","groupedLinks","val","concentrationscale","totalCount","hasNodeColorArray","hasNodeCustomdataArray","nodeLen","sources","targets","init2dArray","some","circularityPresent","result","_links","_groups","_groupLookup","d3","Drawing","d3Sankey","d3SankeyCircular","d3Force","gup","interpolateNumber","sankeyModel","traceIndex","domain","horizontal","nodePad","pad","nodeThickness","thickness","sankeyLeft","linkSort","nodeSort","nodePointNumber","groupingNode","parseInt","unshift","flowKey","flows","keys","Object","flowLinks","total","totalPerLabel","flow","labelConcentration","concentration","totalOutflow","concentrationOut","totalInflow","concenrationIn","computeLinkConcentrations","arrangement","resolveCollisionsTopToBottom","colX","orderedNodes","colNumber","lastX","snapToColumns","guid","randstr","nodeLineColor","line","nodeLineWidth","linkLineColor","linkLineWidth","valueFormat","valueformat","valueSuffix","valuesuffix","textFont","textfont","dragParallel","dragPerpendicular","forceLayouts","interactionState","dragInProgress","hovered","linkModel","tc","curveNumber","traceId","tinyColorHue","tinyRGB","tinyColorAlpha","getAlpha","linkPath","offset","coords","y0a","y0b","y1a","y1b","nodeModel","zoneThicknessPad","zoneLengthPad","visibleThickness","visibleLength","visibleWidth","ceil","visibleHeight","zoneX","zoneY","zoneWidth","zoneHeight","labelY","originalLayer","sizeAcross","darkBackground","getBrightness","uniqueNodeLabelPathId","join","figure","updateNodePositions","toFixed","updateNodeShapes","updateShapes","sizeNode","salientEnough","sankeyTransform","nodeCentering","textGuidePath","svg","sankeyInverseTransform","textFlip","nodeTextColor","nodeTextOffset","attachPointerEvents","eventSet","hover","follow","unhover","select","attachDragHandler","callbacks","dragBehavior","behavior","drag","origin","ensureSingle","_infolayer","_dragCover","raiseToTop","saveCurrentDragPosition","nodeEvents","forceKey","switchToForceFormat","originalX","forceSimulation","forceCollide","maxVelocity","lastDraggedX","lastDraggedY","snappingForce","attachForce","faster","switchToSankeyFormat","sameLayer","persistFinalNodePositions","startForce","nodeX","nodeY","then","firstRender","dragcover","styledData","visible","exit","enter","append","classed","style","dragboxClassName","uid","_draggers","fill","transition","linkEvents","opacity","_context","staticPlot","distinctLayerPositions","originalY","originalLayerIndex","persistOriginalPlace","text","Map","object","isArray","o","has","property","clear","empty","_sortValues","_rollup","nest","_sortKeys","array","createResult","setResult","keyValue","valuesByKey","createObject","setObject","createMap","setMap","_entries","sortKey","order","sortValues","rollup","Set","proto","edges","cb","circuits","stack","blocked","B","Ak","circuit","found","output","unblock","entry","start","cycle","adjacencyStructureSCC","from","minId","subgraph","leastVertexComponent","ccs","leastVertex","cc","vertexId","fontAttrs","baseAttrs","colorAttrs","domainAttrs","hovertemplateAttrs","colorAttributes","templatedArray","FORMAT_LINK","flags","arrayOk","description","valType","role","impliedEdits","dimensions","freeLength","items","editType","defaultLine","hovertemplate","cmax","cmin","colorscale","transforms","supplyDefaults","calc","moduleType","basePlotModule","selectPoints","categories","meta","render","Fx","renderableValuePresent","ownTrace","makeTranslucent","makeTextContrasty","relatedLinks","relatedNodes","nodeHoveredStyle","linkHoveredStyle","nodeNonHoveredStyle","linkNonHoveredStyle","visitNodes","datum","castHoverOption","labelOpts","nestedProperty","_paper","_size","_viewInitial","sourceLabel","targetLabel","concentrationLabel","incomingLabel","outgoingLabel","hovermode","emit","points","hoverItems","anchorIndex","hoverCenter","hoverCenterPosition","hovertemplateLabels","valueLabel","format","borderColor","fontFamily","fontSize","fontColor","nameLength","textAlign","idealAlign","eventData","loneHover","container","_hoverlayer","outerContainer","hoverCenterX","hoverCenterY","loneUnhover","evt","originalEvent","_hoverdata","click","rootBBox","getBoundingClientRect","boundingBox","hoverCenterX0","hoverCenterX1","tooltip","factory","extend","definition","create","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","toLowerCase","exec","rgbn","Rgb","rgba","hsla","g","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","round","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","basis","v0","v1","v2","v3","t3","define","channels","assign","displayable","formatHsl","brighter","darker","linear","gamma","nogamma","exponential","end","rgbGamma","rgbSpline","spline","rgbBasis","rgbBasisClosed","basisClosed","isNumberArray","ArrayBuffer","isView","DataView","numberArray","genericArray","nb","na","setTime","reA","reB","cssNode","cssRoot","cssView","svgNode","am","bm","bs","bi","lastIndex","number","one","zero","string","date","valueOf","range","degrees","rotate","skewX","atan2","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","document","createElement","documentElement","defaultView","transform","getComputedStyle","appendChild","getPropertyValue","removeChild","decompose","interpolateTransformSvg","createElementNS","setAttribute","baseVal","consolidate","matrix","rho","SQRT2","exp","ux0","p0","uy0","w0","ux1","p1","uy1","w1","log","d1","b0","b1","r0","r1","coshr0","hue","hslLong","deg2rad","rad2deg","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","hcl","hclLong","A","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelixGamma","cubehelix","cosh","sinh","cubehelixLong","piecewise","interpolate","I","samples","interpolator","_arrayLikeToArray","arr","len","arr2","_slicedToArray","_arr","_n","_d","_e","_s","_i","done","err","minLen","_createForOfIteratorHelper","allowArrayLike","it","F","normalCompletion","didErr","_e2","return","_ref","_step","_iterator","_step2","_iterator2","_step3","_iterator3","_link","Sankey","computeNodeHeights","_ref2","_step4","_iterator4","_step4$value","_step5","_iterator5","_step5$value","_step6","_iterator6","_step6$value","_ref3","_step7","_iterator7","fixedValue","_ref4","current","_step8","_iterator8","_step9","_iterator9","_ref5","_step10","_iterator10","_step11","_iterator11","_ref6","_step12","kx","_iterator12","layer","_step13","_iterator13","computeNodeLayers","_step14","_iterator14","_step15","_iterator15","_node","_step16","_iterator16","reorderLinks","initializeNodeBreadths","beta","relaxRightToLeft","relaxLeftToRight","_step17","_iterator17","_step18","_iterator18","_step18$value","targetTop","_dy","reorderNodeLinks","_step19","_iterator19","_step20","_iterator20","_step20$value","sourceTop","_dy2","subject","resolveCollisionsBottomToTop","_dy3","_dy4","_ref7","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step23$value","_step24","_iterator24","_step24$value","_step25","_iterator25","_step25$value","_node2","_width","_step26","_iterator26","_step26$value","_step27","_iterator27","_step27$value","_node3","_width2","horizontalSource","horizontalTarget","ascending","compare","valueof","sum"],"mappings":"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","file":"15-24cc32a5a3d5639f104b.js","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar Color = require('../../components/color');\n\nvar tinycolor = require('tinycolor2');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel); // node attributes\n\n  var nodeIn = traceIn.node;\n  var nodeOut = Template.newContainer(traceOut, 'node');\n\n  function coerceNode(attr, dflt) {\n    return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n  }\n\n  coerceNode('label');\n  coerceNode('groups');\n  coerceNode('x');\n  coerceNode('y');\n  coerceNode('pad');\n  coerceNode('thickness');\n  coerceNode('line.color');\n  coerceNode('line.width');\n  coerceNode('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n  coerceNode('hovertemplate');\n  var colors = layout.colorway;\n\n  var defaultNodePalette = function defaultNodePalette(i) {\n    return colors[i % colors.length];\n  };\n\n  coerceNode('color', nodeOut.label.map(function (d, i) {\n    return Color.addOpacity(defaultNodePalette(i), 0.8);\n  }));\n  coerceNode('customdata'); // link attributes\n\n  var linkIn = traceIn.link || {};\n  var linkOut = Template.newContainer(traceOut, 'link');\n\n  function coerceLink(attr, dflt) {\n    return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n  }\n\n  coerceLink('label');\n  coerceLink('source');\n  coerceLink('target');\n  coerceLink('value');\n  coerceLink('line.color');\n  coerceLink('line.width');\n  coerceLink('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n  coerceLink('hovertemplate');\n  var defaultLinkColor = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333 ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n  coerceLink('color', Lib.repeat(defaultLinkColor, linkOut.value.length));\n  coerceLink('customdata');\n  handleArrayContainerDefaults(linkIn, linkOut, {\n    name: 'colorscales',\n    handleItemDefaults: concentrationscalesDefaults\n  });\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('orientation');\n  coerce('valueformat');\n  coerce('valuesuffix');\n  var dfltArrangement;\n\n  if (nodeOut.x.length && nodeOut.y.length) {\n    dfltArrangement = 'freeform';\n  }\n\n  coerce('arrangement', dfltArrangement);\n  Lib.coerceFont(coerce, 'textfont', Lib.extendFlat({}, layout.font)); // disable 1D transforms - arrays here are 1D but their lengths/meanings\n  // don't match, between nodes and links\n\n  traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n  }\n\n  coerce('label');\n  coerce('cmin');\n  coerce('cmax');\n  coerce('colorscale');\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  nodeTextOffsetHorizontal: 4,\n  nodeTextOffsetVertical: 3,\n  nodePadAcross: 10,\n  sankeyIterations: 50,\n  forceIterations: 5,\n  forceTicksPerFrame: 10,\n  duration: 500,\n  ease: 'linear',\n  cn: {\n    sankey: 'sankey',\n    sankeyLinks: 'sankey-links',\n    sankeyLink: 'sankey-link',\n    sankeyNodeSet: 'sankey-node-set',\n    sankeyNode: 'sankey-node',\n    nodeRect: 'node-rect',\n    nodeCapture: 'node-capture',\n    nodeCentered: 'node-entered',\n    nodeLabelGuide: 'node-label-guide',\n    nodeLabel: 'node-label',\n    nodeLabelTextPath: 'node-label-text-path'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar identity = require('./identity');\n\nfunction wrap(d) {\n  return [d];\n}\n\nmodule.exports = {\n  // The D3 data binding concept and the General Update Pattern promotes the idea of\n  // traversing into the scenegraph by using the `.data(fun, keyFun)` call.\n  // The `fun` is most often a `repeat`, ie. the elements beneath a `<g>` element need\n  // access to the same data, or a `descend`, which fans a scenegraph node into a bunch of\n  // of elements, e.g. points, lines, rows, requiring an array as input.\n  // The role of the `keyFun` is to identify what elements are being entered/exited/updated,\n  // otherwise D3 reverts to using a plain index which would screw up `transition`s.\n  keyFun: function keyFun(d) {\n    return d.key;\n  },\n  repeat: wrap,\n  descend: identity,\n  // Plotly.js uses a convention of storing the actual contents of the `calcData` as the\n  // element zero of a container array. These helpers are just used for clarity as a\n  // newcomer to the codebase may not know what the `[0]` is, and whether there can be further\n  // elements (not atm).\n  wrap: wrap,\n  unwrap: function unwrap(d) {\n    return d[0];\n  }\n};","export default function (x, y) {\n  var nodes;\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = sx / n - x, sy = sy / n - y, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","export default function () {\n  return (Math.random() - 0.5) * 1e-6;\n}","export default function (d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | xp >= xm));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d,\n      i,\n      n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  } // If there were no (valid) points, abort.\n\n\n  if (x0 > x1 || y0 > y1) return this; // Expand the tree to cover the new points.\n\n  this.cover(x0, y0).cover(x1, y1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1; // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else {\n      var z = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n        i = (y < y0) << 1 | x < x0;\n        parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n\n        switch (i) {\n          case 0:\n            x1 = x0 + z, y1 = y0 + z;\n            break;\n\n          case 1:\n            x0 = x1 - z, y1 = y0 + z;\n            break;\n\n          case 2:\n            x1 = x0 + z, y0 = y1 - z;\n            break;\n\n          case 3:\n            x0 = x1 - z, y0 = y1 - z;\n            break;\n        }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}","export default function (node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","export function defaultY(d) {\n  return d[1];\n}\nexport default function (_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}","import tree_add, { addAll as tree_addAll } from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, { defaultX } from \"./x.js\";\nimport tree_y, { defaultY } from \"./y.js\";\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(4)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(4)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function (radius) {\n  var nodes,\n      radii,\n      strength = 1,\n      iterations = 1;\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i,\n        n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data,\n          rj = quad.r,\n          r = ri + rj;\n\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n\n          if (l < r * r) {\n            if (x === 0) x = jiggle(), l += x * x;\n            if (y === 0) y = jiggle(), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n\n        return;\n      }\n\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    radii = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}","import Quad from \"./quad.js\";\nexport default function (x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (y1 = q.y0) > y3 || (x2 = q.x1) < x0 || (y2 = q.y1) < y0) continue; // Bisect the current quadrant.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n      quads.push(new Quad(node[3], xm, ym, x2, y2), new Quad(node[2], x1, ym, xm, y2), new Quad(node[1], xm, y1, x2, ym), new Quad(node[0], x1, y1, xm, ym)); // Visit the closest quadrant first.\n\n      if (i = (y >= ym) << 1 | x >= xm) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n        var dx = x - +this._x.call(null, node.data),\n            dy = y - +this._y.call(null, node.data),\n            d2 = dx * dx + dy * dy;\n\n        if (d2 < radius) {\n          var d = Math.sqrt(radius = d2);\n          x0 = x - d, y0 = y - d;\n          x3 = x + d, y3 = y + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 3] || parent[i + 2 & 3] || parent[i + 3 & 3]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3]) && node === (parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      y0,\n      x1,\n      y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n\n  return this;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      next = [],\n      q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          y0 = q.y0,\n          x1 = q.x1,\n          y1 = q.y1,\n          xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n\n  return this;\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { map } from \"d3-collection\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"missing: \" + nodeId);\n  return node;\n}\n\nexport default function (links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      iterations = 1;\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle();\n        y = target.y + target.vy - source.y - source.vy || jiggle();\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = map(nodes, id),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.links = function (_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function (_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function (_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}","var noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _ || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { dispatch } from \"d3-dispatch\";\nimport { map } from \"d3-collection\";\nimport { timer } from \"d3-timer\";\nexport function x(d) {\n  return d.x;\n}\nexport function y(d) {\n  return d.y;\n}\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\nexport default function (_nodes) {\n  var simulation,\n      _alpha = 1,\n      _alphaMin = 0.001,\n      _alphaDecay = 1 - Math.pow(_alphaMin, 1 / 300),\n      _alphaTarget = 0,\n      _velocityDecay = 0.6,\n      forces = map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (_nodes == null) _nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n\n    if (_alpha < _alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i,\n        n = _nodes.length,\n        node;\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      _alpha += (_alphaTarget - _alpha) * _alphaDecay;\n      forces.each(function (force) {\n        force(_alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        if (node.fx == null) node.x += node.vx *= _velocityDecay;else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= _velocityDecay;else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = _nodes.length, node; i < n; ++i) {\n      node = _nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(i),\n            angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(_nodes);\n    return force;\n  }\n\n  initializeNodes();\n  return simulation = {\n    tick: tick,\n    restart: function restart() {\n      return stepper.restart(step), simulation;\n    },\n    stop: function stop() {\n      return stepper.stop(), simulation;\n    },\n    nodes: function nodes(_) {\n      return arguments.length ? (_nodes = _, initializeNodes(), forces.each(initializeForce), simulation) : _nodes;\n    },\n    alpha: function alpha(_) {\n      return arguments.length ? (_alpha = +_, simulation) : _alpha;\n    },\n    alphaMin: function alphaMin(_) {\n      return arguments.length ? (_alphaMin = +_, simulation) : _alphaMin;\n    },\n    alphaDecay: function alphaDecay(_) {\n      return arguments.length ? (_alphaDecay = +_, simulation) : +_alphaDecay;\n    },\n    alphaTarget: function alphaTarget(_) {\n      return arguments.length ? (_alphaTarget = +_, simulation) : _alphaTarget;\n    },\n    velocityDecay: function velocityDecay(_) {\n      return arguments.length ? (_velocityDecay = 1 - _, simulation) : 1 - _velocityDecay;\n    },\n    force: function force(name, _) {\n      return arguments.length > 1 ? (_ == null ? forces.remove(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);\n    },\n    find: function find(x, y, radius) {\n      var i = 0,\n          n = _nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n      if (radius == null) radius = Infinity;else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n    on: function on(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\nimport { x, y } from \"./simulation\";\nexport default function () {\n  var nodes,\n      node,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree = quadtree(nodes, x, y).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) {\n      node = nodes[i], tree.visit(apply);\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    strengths = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n    }\n  }\n\n  function accumulate(quad) {\n    var strength = 0,\n        q,\n        c,\n        weight = 0,\n        x,\n        y,\n        i; // For internal nodes, accumulate forces from child quadrants.\n\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n\n      quad.x = x / weight;\n      quad.y = y / weight;\n    } // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n        q = quad;\n        q.x = q.data.x;\n        q.y = q.data.y;\n\n        do {\n          strength += strengths[q.data.index];\n        } while (q = q.next);\n      }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y; // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(), l += x * x;\n        if (y === 0) y = jiggle(), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n\n      return true;\n    } // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return; // Limit forces for very close nodes; randomize direction if coincident.\n\n\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(), l += x * x;\n      if (y === 0) y = jiggle(), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do {\n      if (quad.data !== node) {\n        w = strengths[quad.data.index] * alpha / l;\n        node.vx += x * w;\n        node.vy += y * w;\n      }\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function (_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function (_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function (_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (radius, x, y) {\n  var nodes,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = node.y - y || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      node.vy += dy * k;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _, initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? Were done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar overrideAll = require('plotly.js/src/plot_api/edit_types').overrideAll;\nvar getModuleCalcData = require('plotly.js/src/plots/get_data').getModuleCalcData;\nvar plot = require('./plot');\nvar fxAttrs = require('plotly.js/src/components/fx/layout_attributes');\n\nvar setCursor = require('plotly.js/src/lib/setcursor');\nvar dragElement = require('plotly.js/src/components/dragelement');\nvar prepSelect = require('plotly.js/src/plots/cartesian/select').prepSelect;\nvar Lib = require('plotly.js/src/lib');\nvar Registry = require('plotly.js/src/registry');\n\nvar SANKEY = 'sankey';\n\nexports.name = SANKEY;\n\nexports.baseLayoutAttrOverrides = overrideAll({\n  hoverlabel: fxAttrs.hoverlabel\n}, 'plot', 'nested');\n\nexports.plot = function (gd) {\n  var calcData = getModuleCalcData(gd.calcdata, SANKEY)[0];\n  plot(gd, calcData);\n  exports.updateFx(gd);\n};\n\nexports.clean = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var hadPlot = (oldFullLayout._has && oldFullLayout._has(SANKEY));\n  var hasPlot = (newFullLayout._has && newFullLayout._has(SANKEY));\n\n  if (hadPlot && !hasPlot) {\n    oldFullLayout._paperdiv.selectAll('.sankey').remove();\n    oldFullLayout._paperdiv.selectAll('.bgsankey').remove();\n  }\n};\n\nexports.updateFx = function (gd) {\n  for (var i = 0; i < gd._fullData.length; i++) {\n    subplotUpdateFx(gd, i);\n  }\n};\n\nfunction subplotUpdateFx(gd, index) {\n  var trace = gd._fullData[index];\n  var fullLayout = gd._fullLayout;\n\n  var dragMode = fullLayout.dragmode;\n  var cursor = fullLayout.dragmode === 'pan' ? 'move' : 'crosshair';\n  var bgRect = trace._bgRect;\n\n  if (dragMode === 'pan' || dragMode === 'zoom') return;\n\n  setCursor(bgRect, cursor);\n\n  var xaxis = {\n    _id: 'x',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateX,\n    _length: trace._sankey.width\n  };\n  var yaxis = {\n    _id: 'y',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateY,\n    _length: trace._sankey.height\n  };\n\n  // Note: dragOptions is needed to be declared for all dragmodes because\n  // it's the object that holds persistent selection state.\n  var dragOptions = {\n    gd: gd,\n    element: bgRect.node(),\n    plotinfo: {\n      id: index,\n      xaxis: xaxis,\n      yaxis: yaxis,\n      fillRangeItems: Lib.noop\n    },\n    subplot: index,\n    // create mock x/y axes for hover routine\n    xaxes: [xaxis],\n    yaxes: [yaxis],\n    doneFnCompleted: function (selection) {\n      var traceNow = gd._fullData[index];\n      var newGroups;\n      var oldGroups = traceNow.node.groups.slice();\n      var newGroup = [];\n\n      function findNode(pt) {\n        var nodes = traceNow._sankey.graph.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n          if (nodes[i].pointNumber === pt) return nodes[i];\n        }\n      }\n\n      for (var j = 0; j < selection.length; j++) {\n        var node = findNode(selection[j].pointNumber);\n        if (!node) continue;\n\n        // If the node represents a group\n        if (node.group) {\n          // Add all its children to the current selection\n          for (var k = 0; k < node.childrenNodes.length; k++) {\n            newGroup.push(node.childrenNodes[k].pointNumber);\n          }\n          // Flag group for removal from existing list of groups\n          oldGroups[node.pointNumber - traceNow.node._count] = false;\n        } else {\n          newGroup.push(node.pointNumber);\n        }\n      }\n\n      newGroups = oldGroups\n        .filter(Boolean)\n        .concat([newGroup]);\n\n      Registry.call('_guiRestyle', gd, {\n        'node.groups': [newGroups]\n      }, index);\n    }\n  };\n\n  dragOptions.prepFn = function (e, startX, startY) {\n    prepSelect(e, startX, startY, dragOptions, dragMode);\n  };\n\n  dragElement.init(dragOptions);\n}\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = function selectPoints(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var selection = [];\n  var fullData = cd[0].trace;\n  var nodes = fullData._sankey.graph.nodes;\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.partOfGroup) continue; // Those are invisible\n    // Position of node's centroid\n\n    var pos = [(node.x0 + node.x1) / 2, (node.y0 + node.y1) / 2]; // Swap x and y if trace is vertical\n\n    if (fullData.orientation === 'v') pos.reverse();\n\n    if (selectionTester && selectionTester.contains(pos, false, i, searchInfo)) {\n      selection.push({\n        pointNumber: node.pointNumber // TODO: add eventData\n\n      });\n    }\n  }\n\n  return selection;\n};","import { min, ascending, max, mean, sum } from 'd3-array';\nimport { map, nest } from 'd3-collection';\nimport { linkHorizontal } from 'd3-shape';\nimport findCircuits from 'elementary-circuits-directed-graph'; // For a given link, return the target node's depth\n\nfunction targetDepth(d) {\n  return d.target.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'left'\n\n\nfunction left(node) {\n  return node.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'right'\n\n\nfunction right(node, n) {\n  return n - 1 - node.height;\n} // The depth of a node when the nodeAlign (align) is set to 'justify'\n\n\nfunction justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n} // The depth of a node when the nodeAlign (align) is set to 'center'\n\n\nfunction center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n} // returns a function, using the parameter given to the sankey setting\n\n\nfunction constant(x) {\n  return function () {\n    return x;\n  };\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; /// https://github.com/tomshanley/d3-sankeyCircular-circular\n// sort links' breadth (ie top to bottom in a column), based on their source nodes' breadths\n\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n} // sort links' breadth (ie top to bottom in a column), based on their target nodes' breadths\n\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n} // sort nodes' breadth (ie top to bottom in a column)\n// if both nodes have circular links, or both don't have circular links, then sort by the top (y0) of the node\n// else push nodes that have top circular links to the top, and nodes that have bottom circular links to the bottom\n\n\nfunction ascendingBreadth(a, b) {\n  if (a.partOfCycle === b.partOfCycle) {\n    return a.y0 - b.y0;\n  } else {\n    if (a.circularLinkType === 'top' || b.circularLinkType === 'bottom') {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n} // return the value of a node or link\n\n\nfunction value(d) {\n  return d.value;\n} // return the vertical center of a node\n\n\nfunction nodeCenter(node) {\n  return (node.y0 + node.y1) / 2;\n} // return the vertical center of a link's source node\n\n\nfunction linkSourceCenter(link) {\n  return nodeCenter(link.source);\n} // return the vertical center of a link's target node\n\n\nfunction linkTargetCenter(link) {\n  return nodeCenter(link.target);\n} // Return the default value for ID for node, d.index\n\n\nfunction defaultId(d) {\n  return d.index;\n} // Return the default object the graph's nodes, graph.nodes\n\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n} // Return the default object the graph's nodes, graph.links\n\n\nfunction defaultLinks(graph) {\n  return graph.links;\n} // Return the node from the collection that matches the provided ID, or throw an error if no match\n\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error('missing: ' + id);\n  return node;\n}\n\nfunction getNodeID(node, id) {\n  return id(node);\n} // The main sankeyCircular functions\n// Some constants for circular link calculations\n\n\nvar verticalMargin = 25;\nvar baseRadius = 10;\nvar scale = 0.3; //Possibly let user control this, although anything over 0.5 starts to get too cramped\n\nfunction sankeyCircular() {\n  // Set the default values\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      // extent\n  dx = 24,\n      // nodeWidth\n  py,\n      // nodePadding, for vertical postioning\n  id = defaultId,\n      align = justify,\n      nodes = defaultNodes,\n      links = defaultLinks,\n      iterations = 32,\n      circularLinkGap = 2,\n      paddingRatio,\n      sortNodes = null;\n\n  function sankeyCircular() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments) // Process the graph's nodes and links, setting their positions\n      // 1.  Associate the nodes with their respective links, and vice versa\n\n    };\n    computeNodeLinks(graph); // 2.  Determine which links result in a circular path in the graph\n\n    identifyCircles(graph, id, sortNodes); // 4. Calculate the nodes' values, based on the values of the incoming and outgoing links\n\n    computeNodeValues(graph); // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n\n    computeNodeDepths(graph); // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n\n    computeNodeBreadths(graph, iterations, id);\n    computeLinkBreadths(graph); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n\n    var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n\n    for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n      resolveNodeLinkOverlaps(graph, y0, y1, id);\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n    } // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n\n\n    fillHeight(graph, y0, y1); // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  } // end of sankeyCircular function\n  // Set the sankeyCircular parameters\n  // nodeID, nodeAlign, nodeWidth, nodePadding, nodes, links, size, extent, iterations, nodePaddingRatio, circularLinkGap\n\n\n  sankeyCircular.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : id;\n  };\n\n  sankeyCircular.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : align;\n  };\n\n  sankeyCircular.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankeyCircular) : dx;\n  };\n\n  sankeyCircular.nodePadding = function (_) {\n    return arguments.length ? (py = +_, sankeyCircular) : py;\n  };\n\n  sankeyCircular.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : nodes;\n  };\n\n  sankeyCircular.links = function (_) {\n    return arguments.length ? (links = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : links;\n  };\n\n  sankeyCircular.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankeyCircular) : [x1 - x0, y1 - y0];\n  };\n\n  sankeyCircular.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankeyCircular) : [[x0, y0], [x1, y1]];\n  };\n\n  sankeyCircular.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankeyCircular) : iterations;\n  };\n\n  sankeyCircular.circularLinkGap = function (_) {\n    return arguments.length ? (circularLinkGap = +_, sankeyCircular) : circularLinkGap;\n  };\n\n  sankeyCircular.nodePaddingRatio = function (_) {\n    return arguments.length ? (paddingRatio = +_, sankeyCircular) : paddingRatio;\n  };\n\n  sankeyCircular.sortNodes = function (_) {\n    return arguments.length ? (sortNodes = _, sankeyCircular) : sortNodes;\n  };\n\n  sankeyCircular.update = function (graph) {\n    // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n    // computeNodeDepths(graph)\n    // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n    // computeNodeBreadths(graph, iterations, id)\n\n    computeLinkBreadths(graph); // Force position of circular link type based on position\n\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        link.circularLinkType = link.y0 + link.y1 < y1 ? 'top' : 'bottom';\n        link.source.circularLinkType = link.circularLinkType;\n        link.target.circularLinkType = link.circularLinkType;\n      }\n    });\n    sortSourceLinks(graph, y1, id, false); // Sort links but do not move nodes\n\n    sortTargetLinks(graph, y1, id); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n    // var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n    // for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n    //\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //   resolveNodeLinkOverlaps(graph, y0, y1, id)\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //\n    // }\n    // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n    // fillHeight(graph, y0, y1)\n    // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  }; // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n\n\n  function computeNodeLinks(graph) {\n    graph.nodes.forEach(function (node, i) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    var nodeById = map(graph.nodes, id);\n    graph.links.forEach(function (link, i) {\n      link.index = i;\n      var source = link.source;\n      var target = link.target;\n\n      if ((typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) !== 'object') {\n        source = link.source = find(nodeById, source);\n      }\n\n      if ((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) !== 'object') {\n        target = link.target = find(nodeById, target);\n      }\n\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n    return graph;\n  } // Compute the value (size) and cycleness of each node by summing the associated links.\n\n\n  function computeNodeValues(graph) {\n    graph.nodes.forEach(function (node) {\n      node.partOfCycle = false;\n      node.value = Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value));\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    });\n  }\n\n  function getCircleMargins(graph) {\n    var totalTopLinksWidth = 0,\n        totalBottomLinksWidth = 0,\n        totalRightLinksWidth = 0,\n        totalLeftLinksWidth = 0;\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        if (link.circularLinkType == 'top') {\n          totalTopLinksWidth = totalTopLinksWidth + link.width;\n        } else {\n          totalBottomLinksWidth = totalBottomLinksWidth + link.width;\n        }\n\n        if (link.target.column == 0) {\n          totalLeftLinksWidth = totalLeftLinksWidth + link.width;\n        }\n\n        if (link.source.column == maxColumn) {\n          totalRightLinksWidth = totalRightLinksWidth + link.width;\n        }\n      }\n    }); //account for radius of curves and padding between links\n\n    totalTopLinksWidth = totalTopLinksWidth > 0 ? totalTopLinksWidth + verticalMargin + baseRadius : totalTopLinksWidth;\n    totalBottomLinksWidth = totalBottomLinksWidth > 0 ? totalBottomLinksWidth + verticalMargin + baseRadius : totalBottomLinksWidth;\n    totalRightLinksWidth = totalRightLinksWidth > 0 ? totalRightLinksWidth + verticalMargin + baseRadius : totalRightLinksWidth;\n    totalLeftLinksWidth = totalLeftLinksWidth > 0 ? totalLeftLinksWidth + verticalMargin + baseRadius : totalLeftLinksWidth;\n    return {\n      \"top\": totalTopLinksWidth,\n      \"bottom\": totalBottomLinksWidth,\n      \"left\": totalLeftLinksWidth,\n      \"right\": totalRightLinksWidth\n    };\n  } // Update the x0, y0, x1 and y1 for the sankeyCircular, to allow space for any circular links\n\n\n  function scaleSankeySize(graph, margin) {\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    var currentWidth = x1 - x0;\n    var currentHeight = y1 - y0;\n    var newWidth = currentWidth + margin.right + margin.left;\n    var newHeight = currentHeight + margin.top + margin.bottom;\n    var scaleX = currentWidth / newWidth;\n    var scaleY = currentHeight / newHeight;\n    x0 = x0 * scaleX + margin.left;\n    x1 = margin.right == 0 ? x1 : x1 * scaleX;\n    y0 = y0 * scaleY + margin.top;\n    y1 = y1 * scaleY;\n    graph.nodes.forEach(function (node) {\n      node.x0 = x0 + node.column * ((x1 - x0 - dx) / maxColumn);\n      node.x1 = node.x0 + dx;\n    });\n    return scaleY;\n  } // Iteratively assign the depth for each node.\n  // Nodes are assigned the maximum depth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned depth zero, while\n  // nodes with no outgoing links are assigned the maximum depth.\n\n\n  function computeNodeDepths(graph) {\n    var nodes, next, x;\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.depth = x;\n        node.sourceLinks.forEach(function (link) {\n          if (next.indexOf(link.target) < 0 && !link.circular) {\n            next.push(link.target);\n          }\n        });\n      });\n    }\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.height = x;\n        node.targetLinks.forEach(function (link) {\n          if (next.indexOf(link.source) < 0 && !link.circular) {\n            next.push(link.source);\n          }\n        });\n      });\n    } // assign column numbers, and get max value\n\n\n    graph.nodes.forEach(function (node) {\n      node.column = Math.floor(align.call(null, node, x));\n    });\n  } // Assign nodes' breadths, and then shift nodes that overlap (resolveCollisions)\n\n\n  function computeNodeBreadths(graph, iterations, id) {\n    var columns = nest().key(function (d) {\n      return d.column;\n    }).sortKeys(ascending).entries(graph.nodes).map(function (d) {\n      return d.values;\n    });\n    initializeNodeBreadth(id);\n    resolveCollisions();\n\n    for (var alpha = 1, n = iterations; n > 0; --n) {\n      relaxLeftAndRight(alpha *= 0.99, id);\n      resolveCollisions();\n    }\n\n    function initializeNodeBreadth(id) {\n      //override py if nodePadding has been set\n      if (paddingRatio) {\n        var padding = Infinity;\n        columns.forEach(function (nodes) {\n          var thisPadding = y1 * paddingRatio / (nodes.length + 1);\n          padding = thisPadding < padding ? thisPadding : padding;\n        });\n        py = padding;\n      }\n\n      var ky = min(columns, function (nodes) {\n        return (y1 - y0 - (nodes.length - 1) * py) / sum(nodes, value);\n      }); //calculate the widths of the links\n\n      ky = ky * scale;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      }); //determine how much to scale down the chart, based on circular links\n\n      var margin = getCircleMargins(graph);\n      var ratio = scaleSankeySize(graph, margin); //re-calculate widths\n\n      ky = ky * ratio;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      });\n      columns.forEach(function (nodes) {\n        var nodesLength = nodes.length;\n        nodes.forEach(function (node, i) {\n          if (node.depth == columns.length - 1 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.depth == 0 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.partOfCycle) {\n            if (numberOfNonSelfLinkingCycles(node, id) == 0) {\n              node.y0 = y1 / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else if (node.circularLinkType == 'top') {\n              node.y0 = y0 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = y1 - node.value * ky - i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          } else {\n            if (margin.top == 0 || margin.bottom == 0) {\n              node.y0 = (y1 - y0) / nodesLength * i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = (y1 - y0) / 2 - nodesLength / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          }\n        });\n      });\n    } // For each node in each column, check the node's vertical position in relation to its targets and sources vertical position\n    // and shift up/down to be closer to the vertical middle of those targets and sources\n\n\n    function relaxLeftAndRight(alpha, id) {\n      var columnsLength = columns.length;\n      columns.forEach(function (nodes) {\n        var n = nodes.length;\n        var depth = nodes[0].depth;\n        nodes.forEach(function (node) {\n          // check the node is not an orphan\n          var nodeHeight;\n\n          if (node.sourceLinks.length || node.targetLinks.length) {\n            if (node.partOfCycle && numberOfNonSelfLinkingCycles(node, id) > 0) ;else if (depth == 0 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else if (depth == columnsLength - 1 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else {\n              var avg = 0;\n              var avgTargetY = mean(node.sourceLinks, linkTargetCenter);\n              var avgSourceY = mean(node.targetLinks, linkSourceCenter);\n\n              if (avgTargetY && avgSourceY) {\n                avg = (avgTargetY + avgSourceY) / 2;\n              } else {\n                avg = avgTargetY || avgSourceY;\n              }\n\n              var dy = (avg - nodeCenter(node)) * alpha; // positive if it node needs to move down\n\n              node.y0 += dy;\n              node.y1 += dy;\n            }\n          }\n        });\n      });\n    } // For each column, check if nodes are overlapping, and if so, shift up/down\n\n\n    function resolveCollisions() {\n      columns.forEach(function (nodes) {\n        var node,\n            dy,\n            y = y0,\n            n = nodes.length,\n            i; // Push any overlapping nodes down.\n\n        nodes.sort(ascendingBreadth);\n\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y - node.y0;\n\n          if (dy > 0) {\n            node.y0 += dy;\n            node.y1 += dy;\n          }\n\n          y = node.y1 + py;\n        } // If the bottommost node goes outside the bounds, push it back up.\n\n\n        dy = y - py - y1;\n\n        if (dy > 0) {\n          y = node.y0 -= dy, node.y1 -= dy; // Push any overlapping nodes back up.\n\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y1 + py - y;\n            if (dy > 0) node.y0 -= dy, node.y1 -= dy;\n            y = node.y0;\n          }\n        }\n      });\n    }\n  } // Assign the links y0 and y1 based on source/target nodes position,\n  // plus the link's relative position to other links to the same node\n\n\n  function computeLinkBreadths(graph) {\n    graph.nodes.forEach(function (node) {\n      node.sourceLinks.sort(ascendingTargetBreadth);\n      node.targetLinks.sort(ascendingSourceBreadth);\n    });\n    graph.nodes.forEach(function (node) {\n      var y0 = node.y0;\n      var y1 = y0; // start from the bottom of the node for cycle links\n\n      var y0cycle = node.y1;\n      var y1cycle = y0cycle;\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y0 = y0cycle - link.width / 2;\n          y0cycle = y0cycle - link.width;\n        } else {\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y1 = y1cycle - link.width / 2;\n          y1cycle = y1cycle - link.width;\n        } else {\n          link.y1 = y1 + link.width / 2;\n          y1 += link.width;\n        }\n      });\n    });\n  }\n\n  return sankeyCircular;\n} /// /////////////////////////////////////////////////////////////////////////////////\n// Cycle functions\n// portion of code to detect circular links based on Colin Fergus' bl.ock https://gist.github.com/cfergus/3956043\n// Identify circles in the link objects\n\n\nfunction identifyCircles(graph, id, sortNodes) {\n  var circularLinkID = 0;\n\n  if (sortNodes === null) {\n    // Building adjacency graph\n    var adjList = [];\n\n    for (var i = 0; i < graph.links.length; i++) {\n      var link = graph.links[i];\n      var source = link.source.index;\n      var target = link.target.index;\n      if (!adjList[source]) adjList[source] = [];\n      if (!adjList[target]) adjList[target] = []; // Add links if not already in set\n\n      if (adjList[source].indexOf(target) === -1) adjList[source].push(target);\n    } // Find all elementary circuits\n\n\n    var cycles = findCircuits(adjList); // Sort by circuits length\n\n    cycles.sort(function (a, b) {\n      return a.length - b.length;\n    });\n    var circularLinks = {};\n\n    for (i = 0; i < cycles.length; i++) {\n      var cycle = cycles[i];\n      var last = cycle.slice(-2);\n      if (!circularLinks[last[0]]) circularLinks[last[0]] = {};\n      circularLinks[last[0]][last[1]] = true;\n    }\n\n    graph.links.forEach(function (link) {\n      var target = link.target.index;\n      var source = link.source.index; // If self-linking or a back-edge\n\n      if (target === source || circularLinks[source] && circularLinks[source][target]) {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      } else {\n        link.circular = false;\n      }\n    });\n  } else {\n    graph.links.forEach(function (link) {\n      if (link.source[sortNodes] < link.target[sortNodes]) {\n        link.circular = false;\n      } else {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      }\n    });\n  }\n} // Assign a circular link type (top or bottom), based on:\n// - if the source/target node already has circular links, then use the same type\n// - if not, choose the type with fewer links\n\n\nfunction selectCircularLinkTypes(graph, id) {\n  var numberOfTops = 0;\n  var numberOfBottoms = 0;\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      // if either souce or target has type already use that\n      if (link.source.circularLinkType || link.target.circularLinkType) {\n        // default to source type if available\n        link.circularLinkType = link.source.circularLinkType ? link.source.circularLinkType : link.target.circularLinkType;\n      } else {\n        link.circularLinkType = numberOfTops < numberOfBottoms ? 'top' : 'bottom';\n      }\n\n      if (link.circularLinkType == 'top') {\n        numberOfTops = numberOfTops + 1;\n      } else {\n        numberOfBottoms = numberOfBottoms + 1;\n      }\n\n      graph.nodes.forEach(function (node) {\n        if (getNodeID(node, id) == getNodeID(link.source, id) || getNodeID(node, id) == getNodeID(link.target, id)) {\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    }\n  }); //correct self-linking links to be same direction as node\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      //if both source and target node are same type, then link should have same type\n      if (link.source.circularLinkType == link.target.circularLinkType) {\n        link.circularLinkType = link.source.circularLinkType;\n      } //if link is selflinking, then link should have same type as node\n\n\n      if (selfLinking(link, id)) {\n        link.circularLinkType = link.source.circularLinkType;\n      }\n    }\n  });\n} // Return the angle between a straight line between the source and target of the link, and the vertical plane of the node\n\n\nfunction linkAngle(link) {\n  var adjacent = Math.abs(link.y1 - link.y0);\n  var opposite = Math.abs(link.target.x0 - link.source.x1);\n  return Math.atan(opposite / adjacent);\n} // Check if two circular links potentially overlap\n\n\nfunction circularLinksCross(link1, link2) {\n  if (link1.source.column < link2.target.column) {\n    return false;\n  } else if (link1.target.column > link2.source.column) {\n    return false;\n  } else {\n    return true;\n  }\n} // Return the number of circular links for node, not including self linking links\n\n\nfunction numberOfNonSelfLinkingCycles(node, id) {\n  var sourceCount = 0;\n  node.sourceLinks.forEach(function (l) {\n    sourceCount = l.circular && !selfLinking(l, id) ? sourceCount + 1 : sourceCount;\n  });\n  var targetCount = 0;\n  node.targetLinks.forEach(function (l) {\n    targetCount = l.circular && !selfLinking(l, id) ? targetCount + 1 : targetCount;\n  });\n  return sourceCount + targetCount;\n} // Check if a circular link is the only circular link for both its source and target node\n\n\nfunction onlyCircularLink(link) {\n  var nodeSourceLinks = link.source.sourceLinks;\n  var sourceCount = 0;\n  nodeSourceLinks.forEach(function (l) {\n    sourceCount = l.circular ? sourceCount + 1 : sourceCount;\n  });\n  var nodeTargetLinks = link.target.targetLinks;\n  var targetCount = 0;\n  nodeTargetLinks.forEach(function (l) {\n    targetCount = l.circular ? targetCount + 1 : targetCount;\n  });\n\n  if (sourceCount > 1 || targetCount > 1) {\n    return false;\n  } else {\n    return true;\n  }\n} // creates vertical buffer values per set of top/bottom links\n\n\nfunction calcVerticalBuffer(links, circularLinkGap, id) {\n  links.sort(sortLinkColumnAscending);\n  links.forEach(function (link, i) {\n    var buffer = 0;\n\n    if (selfLinking(link, id) && onlyCircularLink(link)) {\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    } else {\n      var j = 0;\n\n      for (j; j < i; j++) {\n        if (circularLinksCross(links[i], links[j])) {\n          var bufferOverThisLink = links[j].circularPathData.verticalBuffer + links[j].width / 2 + circularLinkGap;\n          buffer = bufferOverThisLink > buffer ? bufferOverThisLink : buffer;\n        }\n      }\n\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    }\n  });\n  return links;\n} // calculate the optimum path for a link to reduce overlaps\n\n\nfunction addCircularPathData(graph, circularLinkGap, y1, id) {\n  //var baseRadius = 10\n  var buffer = 5; //var verticalMargin = 25\n\n  var minY = min(graph.links, function (link) {\n    return link.source.y0;\n  }); // create object for circular Path Data\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData = {};\n    }\n  }); // calc vertical offsets per top/bottom links\n\n  var topLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'top';\n  });\n  /* topLinks = */\n\n  calcVerticalBuffer(topLinks, circularLinkGap, id);\n  var bottomLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'bottom';\n  });\n  /* bottomLinks = */\n\n  calcVerticalBuffer(bottomLinks, circularLinkGap, id); // add the base data for each link\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData.arcRadius = link.width + baseRadius;\n      link.circularPathData.leftNodeBuffer = buffer;\n      link.circularPathData.rightNodeBuffer = buffer;\n      link.circularPathData.sourceWidth = link.source.x1 - link.source.x0;\n      link.circularPathData.sourceX = link.source.x0 + link.circularPathData.sourceWidth;\n      link.circularPathData.targetX = link.target.x0;\n      link.circularPathData.sourceY = link.y0;\n      link.circularPathData.targetY = link.y1; // for self linking paths, and that the only circular link in/out of that node\n\n      if (selfLinking(link, id) && onlyCircularLink(link)) {\n        link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2;\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = link.source.y1 + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = link.source.y0 - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } else {\n        // else calculate normally\n        // add left extent coordinates, based on links with same source column and circularLink type\n        var thisColumn = link.source.column;\n        var thisCircularLinkType = link.circularLinkType;\n        var sameColumnLinks = graph.links.filter(function (l) {\n          return l.source.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkSourceYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkSourceYAscending);\n        }\n\n        var radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // add right extent coordinates, based on links with same target column and circularLink type\n\n        thisColumn = link.target.column;\n        sameColumnLinks = graph.links.filter(function (l) {\n          return l.target.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkTargetYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkTargetYAscending);\n        }\n\n        radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // bottom links\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = Math.max(y1, link.source.y1, link.target.y1) + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = minY - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } // all links\n\n\n      link.circularPathData.leftInnerExtent = link.circularPathData.sourceX + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightInnerExtent = link.circularPathData.targetX - link.circularPathData.rightNodeBuffer;\n      link.circularPathData.leftFullExtent = link.circularPathData.sourceX + link.circularPathData.leftLargeArcRadius + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightFullExtent = link.circularPathData.targetX - link.circularPathData.rightLargeArcRadius - link.circularPathData.rightNodeBuffer;\n    }\n\n    if (link.circular) {\n      link.path = createCircularPathString(link);\n    } else {\n      var normalPath = linkHorizontal().source(function (d) {\n        var x = d.source.x0 + (d.source.x1 - d.source.x0);\n        var y = d.y0;\n        return [x, y];\n      }).target(function (d) {\n        var x = d.target.x0;\n        var y = d.y1;\n        return [x, y];\n      });\n      link.path = normalPath(link);\n    }\n  });\n} // create a d path using the addCircularPathData\n\n\nfunction createCircularPathString(link) {\n  var pathString = ''; // 'pathData' is assigned a value but never used\n  // var pathData = {}\n\n  if (link.circularLinkType == 'top') {\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY - link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line up to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line down\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY - link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  } else {\n    // bottom path\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY + link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line down to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line up\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY + link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  }\n\n  return pathString;\n} // sort links based on the distance between the source and tartget node columns\n// if the same, then use Y position of the source node\n\n\nfunction sortLinkColumnAscending(link1, link2) {\n  if (linkColumnDistance(link1) == linkColumnDistance(link2)) {\n    return link1.circularLinkType == 'bottom' ? sortLinkSourceYDescending(link1, link2) : sortLinkSourceYAscending(link1, link2);\n  } else {\n    return linkColumnDistance(link2) - linkColumnDistance(link1);\n  }\n} // sort ascending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYAscending(link1, link2) {\n  return link1.y0 - link2.y0;\n} // sort descending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYDescending(link1, link2) {\n  return link2.y0 - link1.y0;\n} // sort ascending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYAscending(link1, link2) {\n  return link1.y1 - link2.y1;\n} // sort descending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYDescending(link1, link2) {\n  return link2.y1 - link1.y1;\n} // return the distance between the link's target and source node, in terms of the nodes' column\n\n\nfunction linkColumnDistance(link) {\n  return link.target.column - link.source.column;\n} // return the distance between the link's target and source node, in terms of the nodes' X coordinate\n\n\nfunction linkXLength(link) {\n  return link.target.x0 - link.source.x1;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkSource(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link1's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 + heightFromY1ToPependicular : longerLink.y1 - heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkTarget(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 - heightFromY1ToPependicular : longerLink.y1 + heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Move any nodes that overlap links which span 2+ columns\n\n\nfunction resolveNodeLinkOverlaps(graph, y0, y1, id) {\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      return;\n    }\n\n    if (link.target.column - link.source.column > 1) {\n      var columnToTest = link.source.column + 1;\n      var maxColumnToTest = link.target.column - 1;\n      var i = 1;\n      var numberOfColumnsToTest = maxColumnToTest - columnToTest + 1;\n\n      for (i = 1; columnToTest <= maxColumnToTest; columnToTest++, i++) {\n        graph.nodes.forEach(function (node) {\n          if (node.column == columnToTest) {\n            var t = i / (numberOfColumnsToTest + 1); // Find all the points of a cubic bezier curve in javascript\n            // https://stackoverflow.com/questions/15397596/find-all-the-points-of-a-cubic-bezier-curve-in-javascript\n\n            var B0_t = Math.pow(1 - t, 3);\n            var B1_t = 3 * t * Math.pow(1 - t, 2);\n            var B2_t = 3 * Math.pow(t, 2) * (1 - t);\n            var B3_t = Math.pow(t, 3);\n            var py_t = B0_t * link.y0 + B1_t * link.y0 + B2_t * link.y1 + B3_t * link.y1;\n            var linkY0AtColumn = py_t - link.width / 2;\n            var linkY1AtColumn = py_t + link.width / 2;\n            var dy; // If top of link overlaps node, push node up\n\n            if (linkY0AtColumn > node.y0 && linkY0AtColumn < node.y1) {\n              dy = node.y1 - linkY0AtColumn + 10;\n              dy = node.circularLinkType == 'bottom' ? dy : -dy;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move up too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (nodesOverlap(node, otherNode)) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY1AtColumn > node.y0 && linkY1AtColumn < node.y1) {\n              // If bottom of link overlaps node, push node down\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move down too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY0AtColumn < node.y0 && linkY1AtColumn > node.y1) {\n              // if link completely overlaps node\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1);\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            }\n          }\n        });\n      }\n    }\n  });\n} // check if two nodes overlap\n\n\nfunction nodesOverlap(nodeA, nodeB) {\n  // test if nodeA top partially overlaps nodeB\n  if (nodeA.y0 > nodeB.y0 && nodeA.y0 < nodeB.y1) {\n    return true;\n  } else if (nodeA.y1 > nodeB.y0 && nodeA.y1 < nodeB.y1) {\n    // test if nodeA bottom partially overlaps nodeB\n    return true;\n  } else if (nodeA.y0 < nodeB.y0 && nodeA.y1 > nodeB.y1) {\n    // test if nodeA covers nodeB\n    return true;\n  } else {\n    return false;\n  }\n} // update a node, and its associated links, vertical positions (y0, y1)\n\n\nfunction adjustNodeHeight(node, dy, sankeyY0, sankeyY1) {\n  if (node.y0 + dy >= sankeyY0 && node.y1 + dy <= sankeyY1) {\n    node.y0 = node.y0 + dy;\n    node.y1 = node.y1 + dy;\n    node.targetLinks.forEach(function (l) {\n      l.y1 = l.y1 + dy;\n    });\n    node.sourceLinks.forEach(function (l) {\n      l.y0 = l.y0 + dy;\n    });\n  }\n\n  return node;\n} // sort and set the links' y0 for each node\n\n\nfunction sortSourceLinks(graph, y1, id, moveNodes) {\n  graph.nodes.forEach(function (node) {\n    // move any nodes up which are off the bottom\n    if (moveNodes && node.y + (node.y1 - node.y0) > y1) {\n      node.y = node.y - (node.y + (node.y1 - node.y0) - y1);\n    }\n\n    var nodesSourceLinks = graph.links.filter(function (l) {\n      return getNodeID(l.source, id) == getNodeID(node, id);\n    });\n    var nodeSourceLinksLength = nodesSourceLinks.length; // if more than 1 link then sort\n\n    if (nodeSourceLinksLength > 1) {\n      nodesSourceLinks.sort(function (link1, link2) {\n        // if both are not circular...\n        if (!link1.circular && !link2.circular) {\n          // if the target nodes are the same column, then sort by the link's target y\n          if (link1.target.column == link2.target.column) {\n            return link1.y1 - link2.y1;\n          } else if (!sameInclines(link1, link2)) {\n            // if the links slope in different directions, then sort by the link's target y\n            return link1.y1 - link2.y1; // if the links slope in same directions, then sort by any overlap\n          } else {\n            if (link1.target.column > link2.target.column) {\n              var link2Adj = linkPerpendicularYToLinkTarget(link2, link1);\n              return link1.y1 - link2Adj;\n            }\n\n            if (link2.target.column > link1.target.column) {\n              var link1Adj = linkPerpendicularYToLinkTarget(link1, link2);\n              return link1Adj - link2.y1;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link1.target.y1 - link2.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.target.column - link1.target.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link2.target.y1 - link1.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.target.column - link2.target.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y0 for links\n\n\n    var ySourceOffset = node.y0;\n    nodesSourceLinks.forEach(function (link) {\n      link.y0 = ySourceOffset + link.width / 2;\n      ySourceOffset = ySourceOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesSourceLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodeSourceLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesSourceLinks[j].width;\n        }\n\n        link.y0 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // sort and set the links' y1 for each node\n\n\nfunction sortTargetLinks(graph, y1, id) {\n  graph.nodes.forEach(function (node) {\n    var nodesTargetLinks = graph.links.filter(function (l) {\n      return getNodeID(l.target, id) == getNodeID(node, id);\n    });\n    var nodesTargetLinksLength = nodesTargetLinks.length;\n\n    if (nodesTargetLinksLength > 1) {\n      nodesTargetLinks.sort(function (link1, link2) {\n        // if both are not circular, the base on the source y position\n        if (!link1.circular && !link2.circular) {\n          if (link1.source.column == link2.source.column) {\n            return link1.y0 - link2.y0;\n          } else if (!sameInclines(link1, link2)) {\n            return link1.y0 - link2.y0;\n          } else {\n            // get the angle of the link to the further source node (ie the smaller column)\n            if (link2.source.column < link1.source.column) {\n              var link2Adj = linkPerpendicularYToLinkSource(link2, link1);\n              return link1.y0 - link2Adj;\n            }\n\n            if (link1.source.column < link2.source.column) {\n              var link1Adj = linkPerpendicularYToLinkSource(link1, link2);\n              return link1Adj - link2.y0;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.source.column - link2.source.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.source.column - link1.source.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y1 for links\n\n\n    var yTargetOffset = node.y0;\n    nodesTargetLinks.forEach(function (link) {\n      link.y1 = yTargetOffset + link.width / 2;\n      yTargetOffset = yTargetOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesTargetLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodesTargetLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesTargetLinks[j].width;\n        }\n\n        link.y1 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // test if links both slope up, or both slope down\n\n\nfunction sameInclines(link1, link2) {\n  return incline(link1) == incline(link2);\n} // returns the slope of a link, from source to target\n// up => slopes up from source to target\n// down => slopes down from source to target\n\n\nfunction incline(link) {\n  return link.y0 - link.y1 > 0 ? 'up' : 'down';\n} // check if link is self linking, ie links a node to the same node\n\n\nfunction selfLinking(link, id) {\n  return getNodeID(link.source, id) == getNodeID(link.target, id);\n}\n\nfunction fillHeight(graph, y0, y1) {\n  var nodes = graph.nodes;\n  var links = graph.links;\n  var top = false;\n  var bottom = false;\n  links.forEach(function (link) {\n    if (link.circularLinkType == \"top\") {\n      top = true;\n    } else if (link.circularLinkType == \"bottom\") {\n      bottom = true;\n    }\n  });\n\n  if (top == false || bottom == false) {\n    var minY0 = min(nodes, function (node) {\n      return node.y0;\n    });\n    var maxY1 = max(nodes, function (node) {\n      return node.y1;\n    });\n    var currentHeight = maxY1 - minY0;\n    var chartHeight = y1 - y0;\n    var ratio = chartHeight / currentHeight;\n    nodes.forEach(function (node) {\n      var nodeHeight = (node.y1 - node.y0) * ratio;\n      node.y0 = (node.y0 - minY0) * ratio;\n      node.y1 = node.y0 + nodeHeight;\n    });\n    links.forEach(function (link) {\n      link.y0 = (link.y0 - minY0) * ratio;\n      link.y1 = (link.y1 - minY0) * ratio;\n      link.width = link.width * ratio;\n    });\n  }\n}\n\nexport { sankeyCircular, center as sankeyCenter, left as sankeyLeft, right as sankeyRight, justify as sankeyJustify };","\"use strict\";\n\nmodule.exports = stronglyConnectedComponents;\n\nfunction stronglyConnectedComponents(adjList) {\n  var numVertices = adjList.length;\n  var index = new Array(numVertices);\n  var lowValue = new Array(numVertices);\n  var active = new Array(numVertices);\n  var child = new Array(numVertices);\n  var scc = new Array(numVertices);\n  var sccLinks = new Array(numVertices); //Initialize tables\n\n  for (var i = 0; i < numVertices; ++i) {\n    index[i] = -1;\n    lowValue[i] = 0;\n    active[i] = false;\n    child[i] = 0;\n    scc[i] = -1;\n    sccLinks[i] = [];\n  } // The strongConnect function\n\n\n  var count = 0;\n  var components = [];\n  var sccAdjList = [];\n\n  function strongConnect(v) {\n    // To avoid running out of stack space, this emulates the recursive behaviour of the normal algorithm, effectively using T as the call stack.\n    var S = [v],\n        T = [v];\n    index[v] = lowValue[v] = count;\n    active[v] = true;\n    count += 1;\n\n    while (T.length > 0) {\n      v = T[T.length - 1];\n      var e = adjList[v];\n\n      if (child[v] < e.length) {\n        // If we're not done iterating over the children, first try finishing that.\n        for (var i = child[v]; i < e.length; ++i) {\n          // Start where we left off.\n          var u = e[i];\n\n          if (index[u] < 0) {\n            index[u] = lowValue[u] = count;\n            active[u] = true;\n            count += 1;\n            S.push(u);\n            T.push(u);\n            break; // First recurse, then continue here (with the same child!).\n            // There is a slight change to Tarjan's algorithm here.\n            // Normally, after having recursed, we set lowValue like we do for an active child (although some variants of the algorithm do it slightly differently).\n            // Here, we only do so if the child we recursed on is still active.\n            // The reasoning is that if it is no longer active, it must have had a lowValue equal to its own index, which means that it is necessarily higher than our lowValue.\n          } else if (active[u]) {\n            lowValue[v] = Math.min(lowValue[v], lowValue[u]) | 0;\n          }\n\n          if (scc[u] >= 0) {\n            // Node v is not yet assigned an scc, but once it is that scc can apparently reach scc[u].\n            sccLinks[v].push(scc[u]);\n          }\n        }\n\n        child[v] = i; // Remember where we left off.\n      } else {\n        // If we're done iterating over the children, check whether we have an scc.\n        if (lowValue[v] === index[v]) {\n          // TODO: It /might/ be true that T is always a prefix of S (at this point!!!), and if so, this could be used here.\n          var component = [];\n          var links = [],\n              linkCount = 0;\n\n          for (var i = S.length - 1; i >= 0; --i) {\n            var w = S[i];\n            active[w] = false;\n            component.push(w);\n            links.push(sccLinks[w]);\n            linkCount += sccLinks[w].length;\n            scc[w] = components.length;\n\n            if (w === v) {\n              S.length = i;\n              break;\n            }\n          }\n\n          components.push(component);\n          var allLinks = new Array(linkCount);\n\n          for (var i = 0; i < links.length; i++) {\n            for (var j = 0; j < links[i].length; j++) {\n              allLinks[--linkCount] = links[i][j];\n            }\n          }\n\n          sccAdjList.push(allLinks);\n        }\n\n        T.pop(); // Now we're finished exploring this particular node (normally corresponds to the return statement)\n      }\n    }\n  } //Run strong connect starting from each vertex\n\n\n  for (var i = 0; i < numVertices; ++i) {\n    if (index[i] < 0) {\n      strongConnect(i);\n    }\n  } // Compact sccAdjList\n\n\n  var newE;\n\n  for (var i = 0; i < sccAdjList.length; i++) {\n    var e = sccAdjList[i];\n    if (e.length === 0) continue;\n    e.sort(function (a, b) {\n      return a - b;\n    });\n    newE = [e[0]];\n\n    for (var j = 1; j < e.length; j++) {\n      if (e[j] !== e[j - 1]) {\n        newE.push(e[j]);\n      }\n    }\n\n    sccAdjList[i] = newE;\n  }\n\n  return {\n    components: components,\n    adjacencyList: sccAdjList\n  };\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar tarjan = require('strongly-connected-components');\n\nvar Lib = require('../../lib');\n\nvar wrap = require('../../lib/gup').wrap;\n\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar isIndex = Lib.isIndex;\n\nvar Colorscale = require('../../components/colorscale');\n\nfunction convertToD3Sankey(trace) {\n  var nodeSpec = trace.node;\n  var linkSpec = trace.link;\n  var links = [];\n  var hasLinkColorArray = isArrayOrTypedArray(linkSpec.color);\n  var hasLinkCustomdataArray = isArrayOrTypedArray(linkSpec.customdata);\n  var linkedNodes = {};\n  var components = {};\n  var componentCount = linkSpec.colorscales.length;\n  var i;\n\n  for (i = 0; i < componentCount; i++) {\n    var cscale = linkSpec.colorscales[i];\n    var specs = Colorscale.extractScale(cscale, {\n      cLetter: 'c'\n    });\n    var scale = Colorscale.makeColorScaleFunc(specs);\n    components[cscale.label] = scale;\n  }\n\n  var maxNodeId = 0;\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    if (linkSpec.source[i] > maxNodeId) maxNodeId = linkSpec.source[i];\n    if (linkSpec.target[i] > maxNodeId) maxNodeId = linkSpec.target[i];\n  }\n\n  var nodeCount = maxNodeId + 1;\n  trace.node._count = nodeCount; // Group nodes\n\n  var j;\n  var groups = trace.node.groups;\n  var groupLookup = {};\n\n  for (i = 0; i < groups.length; i++) {\n    var group = groups[i]; // Build a lookup table to quickly find in which group a node is\n\n    for (j = 0; j < group.length; j++) {\n      var nodeIndex = group[j];\n      var groupIndex = nodeCount + i;\n\n      if (groupLookup.hasOwnProperty(nodeIndex)) {\n        Lib.warn('Node ' + nodeIndex + ' is already part of a group.');\n      } else {\n        groupLookup[nodeIndex] = groupIndex;\n      }\n    }\n  } // Process links\n\n\n  var groupedLinks = {\n    source: [],\n    target: []\n  };\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    var val = linkSpec.value[i]; // remove negative values, but keep zeros with special treatment\n\n    var source = linkSpec.source[i];\n    var target = linkSpec.target[i];\n\n    if (!(val > 0 && isIndex(source, nodeCount) && isIndex(target, nodeCount))) {\n      continue;\n    } // Remove links that are within the same group\n\n\n    if (groupLookup.hasOwnProperty(source) && groupLookup.hasOwnProperty(target) && groupLookup[source] === groupLookup[target]) {\n      continue;\n    } // if link targets a node in the group, relink target to that group\n\n\n    if (groupLookup.hasOwnProperty(target)) {\n      target = groupLookup[target];\n    } // if link originates from a node in a group, relink source to that group\n\n\n    if (groupLookup.hasOwnProperty(source)) {\n      source = groupLookup[source];\n    }\n\n    source = +source;\n    target = +target;\n    linkedNodes[source] = linkedNodes[target] = true;\n    var label = '';\n    if (linkSpec.label && linkSpec.label[i]) label = linkSpec.label[i];\n    var concentrationscale = null;\n    if (label && components.hasOwnProperty(label)) concentrationscale = components[label];\n    links.push({\n      pointNumber: i,\n      label: label,\n      color: hasLinkColorArray ? linkSpec.color[i] : linkSpec.color,\n      customdata: hasLinkCustomdataArray ? linkSpec.customdata[i] : linkSpec.customdata,\n      concentrationscale: concentrationscale,\n      source: source,\n      target: target,\n      value: +val\n    });\n    groupedLinks.source.push(source);\n    groupedLinks.target.push(target);\n  } // Process nodes\n\n\n  var totalCount = nodeCount + groups.length;\n  var hasNodeColorArray = isArrayOrTypedArray(nodeSpec.color);\n  var hasNodeCustomdataArray = isArrayOrTypedArray(nodeSpec.customdata);\n  var nodes = [];\n\n  for (i = 0; i < totalCount; i++) {\n    if (!linkedNodes[i]) continue;\n    var l = nodeSpec.label[i];\n    nodes.push({\n      group: i > nodeCount - 1,\n      childrenNodes: [],\n      pointNumber: i,\n      label: l,\n      color: hasNodeColorArray ? nodeSpec.color[i] : nodeSpec.color,\n      customdata: hasNodeCustomdataArray ? nodeSpec.customdata[i] : nodeSpec.customdata\n    });\n  } // Check if we have circularity on the resulting graph\n\n\n  var circular = false;\n\n  if (circularityPresent(totalCount, groupedLinks.source, groupedLinks.target)) {\n    circular = true;\n  }\n\n  return {\n    circular: circular,\n    links: links,\n    nodes: nodes,\n    // Data structure for groups\n    groups: groups,\n    groupLookup: groupLookup\n  };\n}\n\nfunction circularityPresent(nodeLen, sources, targets) {\n  var nodes = Lib.init2dArray(nodeLen, 0);\n\n  for (var i = 0; i < Math.min(sources.length, targets.length); i++) {\n    if (Lib.isIndex(sources[i], nodeLen) && Lib.isIndex(targets[i], nodeLen)) {\n      if (sources[i] === targets[i]) {\n        return true; // self-link which is also a scc of one\n      }\n\n      nodes[sources[i]].push(targets[i]);\n    }\n  }\n\n  var scc = tarjan(nodes); // Tarjn's strongly connected components algorithm coded by Mikola Lysenko\n  // returns at least one non-singular component if there's circularity in the graph\n\n  return scc.components.some(function (c) {\n    return c.length > 1;\n  });\n}\n\nmodule.exports = function calc(gd, trace) {\n  var result = convertToD3Sankey(trace);\n  return wrap({\n    circular: result.circular,\n    _nodes: result.nodes,\n    _links: result.links,\n    // Data structure for grouping\n    _groups: result.groups,\n    _groupLookup: result.groupLookup\n  });\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar c = require('plotly.js/src/traces/sankey/constants');\nvar d3 = require('d3');\nvar tinycolor = require('tinycolor2');\nvar Color = require('plotly.js/src/components/color');\nvar Drawing = require('plotly.js/src/components/drawing');\n// BEGIN PATCH\nvar d3Sankey = require('d3-sankey');\n// END PATCH\nvar d3SankeyCircular = require('@plotly/d3-sankey-circular');\nvar d3Force = require('d3-force');\nvar Lib = require('plotly.js/src/lib');\nvar gup = require('plotly.js/src/lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\nvar interpolateNumber = require('d3-interpolate').interpolateNumber;\n\nvar Registry = require('plotly.js/src/registry');\n\n// view models\n\nfunction sankeyModel(layout, d, traceIndex) {\n  var calcData = unwrap(d);\n  var trace = calcData.trace;\n  var domain = trace.domain;\n  var horizontal = trace.orientation === 'h';\n  var nodePad = trace.node.pad;\n  var nodeThickness = trace.node.thickness;\n\n  var width = layout.width * (domain.x[1] - domain.x[0]);\n  var height = layout.height * (domain.y[1] - domain.y[0]);\n\n  var nodes = calcData._nodes;\n  var links = calcData._links;\n  var circular = calcData.circular;\n\n  // Select Sankey generator\n  var sankey;\n  if (circular) {\n    sankey = d3SankeyCircular\n      .sankeyCircular()\n      .circularLinkGap(0);\n  } else {\n    sankey = d3Sankey.sankey();\n  }\n\n  sankey\n    .iterations(c.sankeyIterations)\n    .size(horizontal ? [width, height] : [height, width])\n    .nodeWidth(nodeThickness)\n    .nodePadding(nodePad)\n    // BEGIN PATCH\n    .nodeAlign(d3Sankey.sankeyLeft)\n    .linkSort(null)\n    .nodeSort(null)\n    // END PATCH\n    .nodeId(function (d) {\n      return d.pointNumber;\n    })\n    .nodes(nodes)\n    .links(links);\n\n  var graph = sankey();\n\n  if (sankey.nodePadding() < nodePad) {\n    Lib.warn('node.pad was reduced to ', sankey.nodePadding(), ' to fit within the figure.');\n  }\n\n  // Counters for nested loops\n  var i, j, k;\n\n  // Create transient nodes for animations\n  for (var nodePointNumber in calcData._groupLookup) {\n    var groupIndex = parseInt(calcData._groupLookup[nodePointNumber]);\n\n    // Find node representing groupIndex\n    var groupingNode;\n\n    for (i = 0; i < graph.nodes.length; i++) {\n      if (graph.nodes[i].pointNumber === groupIndex) {\n        groupingNode = graph.nodes[i];\n        break;\n      }\n    }\n    // If groupinNode is undefined, no links are targeting this group\n    if (!groupingNode) continue;\n\n    var child = {\n      pointNumber: parseInt(nodePointNumber),\n      x0: groupingNode.x0,\n      x1: groupingNode.x1,\n      y0: groupingNode.y0,\n      y1: groupingNode.y1,\n      partOfGroup: true,\n      sourceLinks: [],\n      targetLinks: []\n    };\n\n    graph.nodes.unshift(child);\n    groupingNode.childrenNodes.unshift(child);\n  }\n\n  function computeLinkConcentrations() {\n    for (i = 0; i < graph.nodes.length; i++) {\n      var node = graph.nodes[i];\n      // Links connecting the same two nodes are part of a flow\n      var flows = {};\n      var flowKey;\n      var link;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        flowKey = link.source.pointNumber + ':' + link.target.pointNumber;\n        if (!flows.hasOwnProperty(flowKey)) flows[flowKey] = [];\n        flows[flowKey].push(link);\n      }\n\n      // Compute statistics for each flow\n      var keys = Object.keys(flows);\n      for (j = 0; j < keys.length; j++) {\n        flowKey = keys[j];\n        var flowLinks = flows[flowKey];\n\n        // Find the total size of the flow and total size per label\n        var total = 0;\n        var totalPerLabel = {};\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          if (!totalPerLabel[link.label]) totalPerLabel[link.label] = 0;\n          totalPerLabel[link.label] += link.value;\n          total += link.value;\n        }\n\n        // Find the ratio of the link's value and the size of the flow\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          link.flow = {\n            value: total,\n            labelConcentration: totalPerLabel[link.label] / total,\n            concentration: link.value / total,\n            links: flowLinks\n          };\n          if (link.concentrationscale) {\n            link.color = tinycolor(link.concentrationscale(link.flow.labelConcentration));\n          }\n        }\n      }\n\n      // Gather statistics of all links at current node\n      var totalOutflow = 0;\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        totalOutflow += node.sourceLinks[j].value;\n      }\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        link = node.sourceLinks[j];\n        link.concentrationOut = link.value / totalOutflow;\n      }\n\n      var totalInflow = 0;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        totalInflow += node.targetLinks[j].value;\n      }\n\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        link.concenrationIn = link.value / totalInflow;\n      }\n    }\n  }\n  computeLinkConcentrations();\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(columns) {\n    columns.forEach(function (nodes) {\n      var node;\n      var dy;\n      var y = 0;\n      var n = nodes.length;\n      var i;\n      nodes.sort(function (a, b) {\n        return a.y0 - b.y0;\n      });\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.y0 >= y) {\n          // No overlap\n        } else {\n          dy = (y - node.y0);\n          if (dy > 1e-6) {\n            node.y0 += dy\n            node.y1 += dy;\n          }\n        }\n        y = node.y1 + nodePad;\n      }\n    });\n  }\n\n  // Group nodes into columns based on their x position\n  function snapToColumns(nodes) {\n    // Sort nodes by x position\n    var orderedNodes = nodes.map(function (n, i) {\n      return {\n        x0: n.x0,\n        index: i\n      };\n    })\n      .sort(function (a, b) {\n        return a.x0 - b.x0;\n      });\n\n    var columns = [];\n    var colNumber = -1;\n    var colX; // Position of column\n    var lastX = -Infinity; // Position of last node\n    var dx;\n    for (i = 0; i < orderedNodes.length; i++) {\n      var node = nodes[orderedNodes[i].index];\n      // If the node does not overlap with the last one\n      if (node.x0 > lastX + nodeThickness) {\n        // Start a new column\n        colNumber += 1;\n        colX = node.x0;\n      }\n      lastX = node.x0;\n\n      // Add node to its associated column\n      if (!columns[colNumber]) columns[colNumber] = [];\n      columns[colNumber].push(node);\n\n      // Change node's x position to align it with its column\n      dx = colX - node.x0;\n      node.x0 += dx;\n      node.x1 += dx;\n    }\n    return columns;\n  }\n\n  // Force node position\n  if (trace.node.x.length && trace.node.y.length) {\n    for (i = 0; i < Math.min(trace.node.x.length, trace.node.y.length, graph.nodes.length); i++) {\n      if (trace.node.x[i] && trace.node.y[i]) {\n        var pos = [trace.node.x[i] * width, trace.node.y[i] * height];\n        graph.nodes[i].x0 = pos[0] - nodeThickness / 2;\n        graph.nodes[i].x1 = pos[0] + nodeThickness / 2;\n\n        var nodeHeight = graph.nodes[i].y1 - graph.nodes[i].y0;\n        graph.nodes[i].y0 = pos[1] - nodeHeight / 2;\n        graph.nodes[i].y1 = pos[1] + nodeHeight / 2;\n      }\n    }\n    if (trace.arrangement === 'snap') {\n      nodes = graph.nodes;\n      var columns = snapToColumns(nodes);\n      resolveCollisionsTopToBottom(columns);\n    }\n    // Update links\n    sankey.update(graph);\n  }\n\n\n  return {\n    circular: circular,\n    key: traceIndex,\n    trace: trace,\n    guid: Lib.randstr(),\n    horizontal: horizontal,\n    width: width,\n    height: height,\n    nodePad: trace.node.pad,\n    nodeLineColor: trace.node.line.color,\n    nodeLineWidth: trace.node.line.width,\n    linkLineColor: trace.link.line.color,\n    linkLineWidth: trace.link.line.width,\n    valueFormat: trace.valueformat,\n    valueSuffix: trace.valuesuffix,\n    textFont: trace.textfont,\n    translateX: domain.x[0] * layout.width + layout.margin.l,\n    translateY: layout.height - domain.y[1] * layout.height + layout.margin.t,\n    dragParallel: horizontal ? height : width,\n    dragPerpendicular: horizontal ? width : height,\n    arrangement: trace.arrangement,\n    sankey: sankey,\n    graph: graph,\n    forceLayouts: {},\n    interactionState: {\n      dragInProgress: false,\n      hovered: false\n    }\n  };\n}\n\nfunction linkModel(d, l, i) {\n  var tc = tinycolor(l.color);\n  var basicKey = l.source.label + '|' + l.target.label;\n  var key = basicKey + '__' + i;\n\n  // for event data\n  l.trace = d.trace;\n  l.curveNumber = d.trace.index;\n\n  return {\n    circular: d.circular,\n    key: key,\n    traceId: d.key,\n    pointNumber: l.pointNumber,\n    link: l,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    linkPath: linkPath,\n    linkLineColor: d.linkLineColor,\n    linkLineWidth: d.linkLineWidth,\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    parent: d,\n    interactionState: d.interactionState,\n    flow: l.flow\n  };\n}\n\nfunction createCircularClosedPathString(link) {\n  // Using coordinates computed by d3-sankey-circular\n  var pathString = '';\n  var offset = link.width / 2;\n  var coords = link.circularPathData;\n  if (link.circularLinkType === 'top') {\n    // Top path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY + offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY - offset) +\n      'Z';\n  } else {\n    // Bottom path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY - offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY + offset) +\n      'Z';\n  }\n  return pathString;\n}\n\nfunction linkPath() {\n  var curvature = 0.5;\n  function path(d) {\n    if (d.link.circular) {\n      return createCircularClosedPathString(d.link);\n    } else {\n      var x0 = d.link.source.x1;\n      var x1 = d.link.target.x0;\n      var xi = interpolateNumber(x0, x1);\n      var x2 = xi(curvature);\n      var x3 = xi(1 - curvature);\n      var y0a = d.link.y0 - d.link.width / 2;\n      var y0b = d.link.y0 + d.link.width / 2;\n      var y1a = d.link.y1 - d.link.width / 2;\n      var y1b = d.link.y1 + d.link.width / 2;\n      return 'M' + x0 + ',' + y0a +\n        'C' + x2 + ',' + y0a +\n        ' ' + x3 + ',' + y1a +\n        ' ' + x1 + ',' + y1a +\n        'L' + x1 + ',' + y1b +\n        'C' + x3 + ',' + y1b +\n        ' ' + x2 + ',' + y0b +\n        ' ' + x0 + ',' + y0b +\n        'Z';\n    }\n  }\n  return path;\n}\n\nfunction nodeModel(d, n) {\n  var tc = tinycolor(n.color);\n  var zoneThicknessPad = c.nodePadAcross;\n  var zoneLengthPad = d.nodePad / 2;\n  n.dx = n.x1 - n.x0;\n  n.dy = n.y1 - n.y0;\n  var visibleThickness = n.dx;\n  var visibleLength = Math.max(0.5, n.dy);\n\n  var key = 'node_' + n.pointNumber;\n  // If it's a group, it's mutable and should be unique\n  if (n.group) {\n    key = Lib.randstr();\n  }\n\n  // for event data\n  n.trace = d.trace;\n  n.curveNumber = d.trace.index;\n\n  return {\n    index: n.pointNumber,\n    key: key,\n    partOfGroup: n.partOfGroup || false,\n    group: n.group,\n    traceId: d.key,\n    trace: d.trace,\n    node: n,\n    nodePad: d.nodePad,\n    nodeLineColor: d.nodeLineColor,\n    nodeLineWidth: d.nodeLineWidth,\n    textFont: d.textFont,\n    size: d.horizontal ? d.height : d.width,\n    visibleWidth: Math.ceil(visibleThickness),\n    visibleHeight: visibleLength,\n    zoneX: -zoneThicknessPad,\n    zoneY: -zoneLengthPad,\n    zoneWidth: visibleThickness + 2 * zoneThicknessPad,\n    zoneHeight: visibleLength + 2 * zoneLengthPad,\n    labelY: d.horizontal ? n.dy / 2 + 1 : n.dx / 2 + 1,\n    left: n.originalLayer === 1,\n    sizeAcross: d.width,\n    forceLayouts: d.forceLayouts,\n    horizontal: d.horizontal,\n    darkBackground: tc.getBrightness() <= 128,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    graph: d.graph,\n    arrangement: d.arrangement,\n    uniqueNodeLabelPathId: [d.guid, d.key, key].join('_'),\n    interactionState: d.interactionState,\n    figure: d\n  };\n}\n\n// rendering snippets\n\nfunction updateNodePositions(sankeyNode) {\n  sankeyNode\n    .attr('transform', function (d) {\n      return 'translate(' + d.node.x0.toFixed(3) + ', ' + (d.node.y0).toFixed(3) + ')';\n    });\n}\n\nfunction updateNodeShapes(sankeyNode) {\n  sankeyNode.call(updateNodePositions);\n}\n\nfunction updateShapes(sankeyNode, sankeyLink) {\n  sankeyNode.call(updateNodeShapes);\n  sankeyLink.attr('d', linkPath());\n}\n\nfunction sizeNode(rect) {\n  rect\n    .attr('width', function (d) { return d.node.x1 - d.node.x0; })\n    .attr('height', function (d) { return d.visibleHeight; });\n}\n\nfunction salientEnough(d) { return (d.link.width > 1 || d.linkLineWidth > 0); }\n\nfunction sankeyTransform(d) {\n  var offset = 'translate(' + d.translateX + ',' + d.translateY + ')';\n  return offset + (d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)');\n}\n\nfunction nodeCentering(d) {\n  return 'translate(' + (d.horizontal ? 0 : d.labelY) + ' ' + (d.horizontal ? d.labelY : 0) + ')';\n}\n\nfunction textGuidePath(d) {\n  return d3.svg.line()([\n    [d.horizontal ? (d.left ? -d.sizeAcross : d.visibleWidth + c.nodeTextOffsetHorizontal) : c.nodeTextOffsetHorizontal, 0],\n    [d.horizontal ? (d.left ? - c.nodeTextOffsetHorizontal : d.sizeAcross) : d.visibleHeight - c.nodeTextOffsetHorizontal, 0]\n  ]);\n}\n\nfunction sankeyInverseTransform(d) { return d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)'; }\nfunction textFlip(d) { return d.horizontal ? 'scale(1 1)' : 'scale(-1 1)'; }\nfunction nodeTextColor(d) { return d.darkBackground && !d.horizontal ? 'rgb(255,255,255)' : 'rgb(0,0,0)'; }\nfunction nodeTextOffset(d) { return d.horizontal && d.left ? '100%' : '0%'; }\n\n// event handling\n\nfunction attachPointerEvents(selection, sankey, eventSet) {\n  selection\n    .on('.basic', null) // remove any preexisting handlers\n    .on('mouseover.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.hover(this, d, sankey);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mousemove.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.follow(this, d);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mouseout.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n    })\n    .on('click.basic', function (d) {\n      if (d.interactionState.hovered) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.select(this, d, sankey);\n      }\n    });\n}\n\nfunction attachDragHandler(sankeyNode, sankeyLink, callbacks, gd) {\n  var dragBehavior = d3.behavior.drag()\n    .origin(function (d) {\n      return {\n        x: d.node.x0 + d.visibleWidth / 2,\n        y: d.node.y0 + d.visibleHeight / 2\n      };\n    })\n\n    .on('dragstart', function (d) {\n      if (d.arrangement === 'fixed') return;\n      Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'dragcover', function (s) {\n        gd._fullLayout._dragCover = s;\n      });\n      Lib.raiseToTop(this);\n      d.interactionState.dragInProgress = d.node;\n\n      saveCurrentDragPosition(d.node);\n      if (d.interactionState.hovered) {\n        callbacks.nodeEvents.unhover.apply(0, d.interactionState.hovered);\n        d.interactionState.hovered = false;\n      }\n      if (d.arrangement === 'snap') {\n        var forceKey = d.traceId + '|' + d.key;\n        if (d.forceLayouts[forceKey]) {\n          d.forceLayouts[forceKey].alpha(1);\n        } else { // make a forceLayout if needed\n          attachForce(sankeyNode, forceKey, d, gd);\n        }\n        startForce(sankeyNode, sankeyLink, d, forceKey, gd);\n      }\n    })\n\n    .on('drag', function (d) {\n      if (d.arrangement === 'fixed') return;\n      var x = d3.event.x;\n      var y = d3.event.y;\n      if (d.arrangement === 'snap') {\n        d.node.x0 = x - d.visibleWidth / 2;\n        d.node.x1 = x + d.visibleWidth / 2;\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      } else {\n        if (d.arrangement === 'freeform') {\n          d.node.x0 = x - d.visibleWidth / 2;\n          d.node.x1 = x + d.visibleWidth / 2;\n        }\n        y = Math.max(0, Math.min(d.size - d.visibleHeight / 2, y));\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      }\n\n      saveCurrentDragPosition(d.node);\n      if (d.arrangement !== 'snap') {\n        d.sankey.update(d.graph);\n        updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n      }\n    })\n\n    .on('dragend', function (d) {\n      if (d.arrangement === 'fixed') return;\n      d.interactionState.dragInProgress = false;\n      for (var i = 0; i < d.node.childrenNodes.length; i++) {\n        d.node.childrenNodes[i].x = d.node.x;\n        d.node.childrenNodes[i].y = d.node.y;\n      }\n      if (d.arrangement !== 'snap') persistFinalNodePositions(d, gd);\n    });\n\n  sankeyNode\n    .on('.drag', null) // remove possible previous handlers\n    .call(dragBehavior);\n}\n\nfunction attachForce(sankeyNode, forceKey, d, gd) {\n  // Attach force to nodes in the same column (same x coordinate)\n  switchToForceFormat(d.graph.nodes);\n  var nodes = d.graph.nodes\n    .filter(function (n) { return n.originalX === d.node.originalX; })\n    // Filter out children\n    .filter(function (n) { return !n.partOfGroup; });\n  d.forceLayouts[forceKey] = d3Force.forceSimulation(nodes)\n    .alphaDecay(0)\n    .force('collide', d3Force.forceCollide()\n      .radius(function (n) { return n.dy / 2 + d.nodePad / 2; })\n      .strength(1)\n      .iterations(c.forceIterations))\n    .force('constrain', snappingForce(sankeyNode, forceKey, nodes, d, gd))\n    .stop();\n}\n\nfunction startForce(sankeyNode, sankeyLink, d, forceKey, gd) {\n  window.requestAnimationFrame(function faster() {\n    var i;\n    for (i = 0; i < c.forceTicksPerFrame; i++) {\n      d.forceLayouts[forceKey].tick();\n    }\n\n    var nodes = d.graph.nodes;\n    switchToSankeyFormat(nodes);\n\n    d.sankey.update(d.graph);\n    updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n\n    if (d.forceLayouts[forceKey].alpha() > 0) {\n      window.requestAnimationFrame(faster);\n    } else {\n      // Make sure the final x position is equal to its original value\n      // because the force simulation will have numerical error\n      var x = d.node.originalX;\n      d.node.x0 = x - d.visibleWidth / 2;\n      d.node.x1 = x + d.visibleWidth / 2;\n\n      persistFinalNodePositions(d, gd);\n    }\n  });\n}\n\nfunction snappingForce(sankeyNode, forceKey, nodes, d) {\n  return function _snappingForce() {\n    var maxVelocity = 0;\n    for (var i = 0; i < nodes.length; i++) {\n      var n = nodes[i];\n      if (n === d.interactionState.dragInProgress) { // constrain node position to the dragging pointer\n        n.x = n.lastDraggedX;\n        n.y = n.lastDraggedY;\n      } else {\n        n.vx = (n.originalX - n.x) / c.forceTicksPerFrame; // snap to layer\n        n.y = Math.min(d.size - n.dy / 2, Math.max(n.dy / 2, n.y)); // constrain to extent\n      }\n      maxVelocity = Math.max(maxVelocity, Math.abs(n.vx), Math.abs(n.vy));\n    }\n    if (!d.interactionState.dragInProgress && maxVelocity < 0.1 && d.forceLayouts[forceKey].alpha() > 0) {\n      d.forceLayouts[forceKey].alpha(0); // This will stop the animation loop\n    }\n  };\n}\n\n// basic data utilities\n\nfunction persistFinalNodePositions(d, gd) {\n  var x = [];\n  var y = [];\n  for (var i = 0; i < d.graph.nodes.length; i++) {\n    var nodeX = (d.graph.nodes[i].x0 + d.graph.nodes[i].x1) / 2;\n    var nodeY = (d.graph.nodes[i].y0 + d.graph.nodes[i].y1) / 2;\n    x.push(nodeX / d.figure.width);\n    y.push(nodeY / d.figure.height);\n  }\n  Registry.call('_guiRestyle', gd, {\n    'node.x': [x],\n    'node.y': [y]\n  }, d.trace.index)\n    .then(function () {\n      if (gd._fullLayout._dragCover) gd._fullLayout._dragCover.remove();\n    });\n}\n\nfunction persistOriginalPlace(nodes) {\n  var distinctLayerPositions = [];\n  var i;\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalX = (nodes[i].x0 + nodes[i].x1) / 2;\n    nodes[i].originalY = (nodes[i].y0 + nodes[i].y1) / 2;\n    if (distinctLayerPositions.indexOf(nodes[i].originalX) === -1) {\n      distinctLayerPositions.push(nodes[i].originalX);\n    }\n  }\n  distinctLayerPositions.sort(function (a, b) { return a - b; });\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalLayerIndex = distinctLayerPositions.indexOf(nodes[i].originalX);\n    nodes[i].originalLayer = nodes[i].originalLayerIndex / (distinctLayerPositions.length - 1);\n  }\n}\n\nfunction saveCurrentDragPosition(d) {\n  d.lastDraggedX = d.x0 + d.dx / 2;\n  d.lastDraggedY = d.y0 + d.dy / 2;\n}\n\nfunction sameLayer(d) {\n  return function (n) { return n.node.originalX === d.node.originalX; };\n}\n\nfunction switchToForceFormat(nodes) {\n  // force uses x, y as centers\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y = (nodes[i].y0 + nodes[i].y1) / 2;\n    nodes[i].x = (nodes[i].x0 + nodes[i].x1) / 2;\n  }\n}\n\nfunction switchToSankeyFormat(nodes) {\n  // sankey uses x0, x1, y0, y1\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y0 = nodes[i].y - nodes[i].dy / 2;\n    nodes[i].y1 = nodes[i].y0 + nodes[i].dy;\n\n    nodes[i].x0 = nodes[i].x - nodes[i].dx / 2;\n    nodes[i].x1 = nodes[i].x0 + nodes[i].dx;\n  }\n}\n\n// scene graph\nmodule.exports = function (gd, svg, calcData, layout, callbacks) {\n  // To prevent animation on first render\n  var firstRender = false;\n  Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'first-render', function () {\n    firstRender = true;\n  });\n\n  // To prevent animation on dragging\n  var dragcover = gd._fullLayout._dragCover;\n\n  var styledData = calcData\n    .filter(function (d) { return unwrap(d).trace.visible; })\n    .map(sankeyModel.bind(null, layout));\n\n  var sankey = svg.selectAll('.' + c.cn.sankey)\n    .data(styledData, keyFun);\n\n  sankey.exit()\n    .remove();\n\n  sankey.enter()\n    .append('g')\n    .classed(c.cn.sankey, true)\n    .style('box-sizing', 'content-box')\n    .style('position', 'absolute')\n    .style('left', 0)\n    .style('shape-rendering', 'geometricPrecision')\n    .style('pointer-events', 'auto')\n    .attr('transform', sankeyTransform);\n\n  sankey.each(function (d, i) {\n    gd._fullData[i]._sankey = d;\n    // Create dragbox if missing\n    var dragboxClassName = 'bgsankey-' + d.trace.uid + '-' + i;\n    Lib.ensureSingle(gd._fullLayout._draggers, 'rect', dragboxClassName);\n\n    gd._fullData[i]._bgRect = d3.select('.' + dragboxClassName);\n\n    // Style dragbox\n    gd._fullData[i]._bgRect\n      .style('pointer-events', 'all')\n      .attr('width', d.width)\n      .attr('height', d.height)\n      .attr('x', d.translateX)\n      .attr('y', d.translateY)\n      .classed('bgsankey', true)\n      .style({ fill: 'transparent', 'stroke-width': 0 });\n  });\n\n  sankey.transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', sankeyTransform);\n\n  var sankeyLinks = sankey.selectAll('.' + c.cn.sankeyLinks)\n    .data(repeat, keyFun);\n\n  sankeyLinks.enter()\n    .append('g')\n    .classed(c.cn.sankeyLinks, true)\n    .style('fill', 'none');\n\n  var sankeyLink = sankeyLinks.selectAll('.' + c.cn.sankeyLink)\n    .data(function (d) {\n      var links = d.graph.links;\n      return links\n        .filter(function (l) { return l.value; })\n        .map(linkModel.bind(null, d));\n    }, keyFun);\n\n  sankeyLink\n    .enter().append('path')\n    .classed(c.cn.sankeyLink, true)\n    .call(attachPointerEvents, sankey, callbacks.linkEvents);\n\n  sankeyLink\n    .style('stroke', function (d) {\n      return salientEnough(d) ? Color.tinyRGB(tinycolor(d.linkLineColor)) : d.tinyColorHue;\n    })\n    .style('stroke-opacity', function (d) {\n      return salientEnough(d) ? Color.opacity(d.linkLineColor) : d.tinyColorAlpha;\n    })\n    .style('fill', function (d) {\n      return d.tinyColorHue;\n    })\n    .style('fill-opacity', function (d) {\n      return d.tinyColorAlpha;\n    })\n    .style('stroke-width', function (d) {\n      return salientEnough(d) ? d.linkLineWidth : 1;\n    })\n    .attr('d', linkPath());\n\n  sankeyLink\n    .style('opacity', function () { return (gd._context.staticPlot || firstRender || dragcover) ? 1 : 0; })\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 1);\n\n  sankeyLink.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var sankeyNodeSet = sankey.selectAll('.' + c.cn.sankeyNodeSet)\n    .data(repeat, keyFun);\n\n  sankeyNodeSet.enter()\n    .append('g')\n    .classed(c.cn.sankeyNodeSet, true);\n\n  sankeyNodeSet\n    .style('cursor', function (d) {\n      switch (d.arrangement) {\n        case 'fixed': return 'default';\n        case 'perpendicular': return 'ns-resize';\n        default: return 'move';\n      }\n    });\n\n  var sankeyNode = sankeyNodeSet.selectAll('.' + c.cn.sankeyNode)\n    .data(function (d) {\n      var nodes = d.graph.nodes;\n      persistOriginalPlace(nodes);\n      return nodes\n        .map(nodeModel.bind(null, d));\n    }, keyFun);\n\n  sankeyNode.enter()\n    .append('g')\n    .classed(c.cn.sankeyNode, true)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return ((gd._context.staticPlot || firstRender) && !n.partOfGroup) ? 1 : 0; });\n\n  sankeyNode\n    .call(attachPointerEvents, sankey, callbacks.nodeEvents)\n    .call(attachDragHandler, sankeyLink, callbacks, gd); // has to be here as it binds sankeyLink\n\n  sankeyNode\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return n.partOfGroup ? 0 : 1; });\n\n  sankeyNode.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var nodeRect = sankeyNode.selectAll('.' + c.cn.nodeRect)\n    .data(repeat);\n\n  nodeRect.enter()\n    .append('rect')\n    .classed(c.cn.nodeRect, true)\n    .call(sizeNode);\n\n  nodeRect\n    .style('stroke-width', function (d) { return d.nodeLineWidth; })\n    .style('stroke', function (d) { return Color.tinyRGB(tinycolor(d.nodeLineColor)); })\n    .style('stroke-opacity', function (d) { return Color.opacity(d.nodeLineColor); })\n    .style('fill', function (d) { return d.tinyColorHue; })\n    .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n\n  nodeRect.transition()\n    .ease(c.ease).duration(c.duration)\n    .call(sizeNode);\n\n  var nodeCapture = sankeyNode.selectAll('.' + c.cn.nodeCapture)\n    .data(repeat);\n\n  nodeCapture.enter()\n    .append('rect')\n    .classed(c.cn.nodeCapture, true)\n    .style('fill-opacity', 0);\n\n  nodeCapture\n    .attr('x', function (d) { return d.zoneX; })\n    .attr('y', function (d) { return d.zoneY; })\n    .attr('width', function (d) { return d.zoneWidth; })\n    .attr('height', function (d) { return d.zoneHeight; });\n\n  var nodeCentered = sankeyNode.selectAll('.' + c.cn.nodeCentered)\n    .data(repeat);\n\n  nodeCentered.enter()\n    .append('g')\n    .classed(c.cn.nodeCentered, true)\n    .attr('transform', nodeCentering);\n\n  nodeCentered\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', nodeCentering);\n\n  var nodeLabelGuide = nodeCentered.selectAll('.' + c.cn.nodeLabelGuide)\n    .data(repeat);\n\n  nodeLabelGuide.enter()\n    .append('path')\n    .classed(c.cn.nodeLabelGuide, true)\n    .attr('id', function (d) { return d.uniqueNodeLabelPathId; })\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  nodeLabelGuide\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  var nodeLabel = nodeCentered.selectAll('.' + c.cn.nodeLabel)\n    .data(repeat);\n\n  nodeLabel.enter()\n    .append('text')\n    .classed(c.cn.nodeLabel, true)\n    .attr('transform', textFlip)\n    .style('user-select', 'none')\n    .style('cursor', 'default')\n    .style('fill', 'black');\n\n  nodeLabel\n    .style('text-shadow', function (d) {\n      return d.horizontal ? '-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff' : 'none';\n    })\n    .each(function (d) { Drawing.font(nodeLabel, d.textFont); });\n\n  nodeLabel\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', textFlip);\n\n  var nodeLabelTextPath = nodeLabel.selectAll('.' + c.cn.nodeLabelTextPath)\n    .data(repeat);\n\n  nodeLabelTextPath.enter()\n    .append('textPath')\n    .classed(c.cn.nodeLabelTextPath, true)\n    .attr('alignment-baseline', 'middle')\n    .attr('xlink:href', function (d) { return '#' + d.uniqueNodeLabelPathId; })\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n\n  nodeLabelTextPath\n    .text(function (d) { return d.horizontal || d.node.dy > 5 ? d.node.label : ''; })\n    .attr('text-anchor', function (d) { return d.horizontal && d.left ? 'end' : 'start'; });\n\n  nodeLabelTextPath\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n};\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function has(key) {\n    return prefix + key in this;\n  },\n  get: function get(key) {\n    return this[prefix + key];\n  },\n  set: function set(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function remove(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function clear() {\n    for (var property in this) {\n      if (property[0] === prefix) delete this[property];\n    }\n  },\n  keys: function keys() {\n    var keys = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) keys.push(property.slice(1));\n    }\n\n    return keys;\n  },\n  values: function values() {\n    var values = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) values.push(this[property]);\n    }\n\n    return values;\n  },\n  entries: function entries() {\n    var entries = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) entries.push({\n        key: property.slice(1),\n        value: this[property]\n      });\n    }\n\n    return entries;\n  },\n  size: function size() {\n    var size = 0;\n\n    for (var property in this) {\n      if (property[0] === prefix) ++size;\n    }\n\n    return size;\n  },\n  empty: function empty() {\n    for (var property in this) {\n      if (property[0] === prefix) return false;\n    }\n\n    return true;\n  },\n  each: function each(f) {\n    for (var property in this) {\n      if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map(); // Copy constructor.\n\n  if (object instanceof Map) object.each(function (value, key) {\n    map.set(key, value);\n  }); // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f(o = object[i], i, object), o);\n      }\n    } // Convert object to map.\n    else if (object) for (var key in object) {\n        map.set(key, object[key]);\n      }\n  return map;\n}\n\nexport default map;","import map from \"./map\";\nexport default function () {\n  var keys = [],\n      _sortKeys = [],\n      _sortValues,\n      _rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (_sortValues != null) array.sort(_sortValues);\n      return _rollup != null ? _rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function (values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n    return result;\n  }\n\n  function _entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array,\n        sortKey = _sortKeys[depth - 1];\n    if (_rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {\n      array.push({\n        key: k,\n        values: _entries(v, depth)\n      });\n    });\n    return sortKey != null ? array.sort(function (a, b) {\n      return sortKey(a.key, b.key);\n    }) : array;\n  }\n\n  return nest = {\n    object: function object(array) {\n      return apply(array, 0, createObject, setObject);\n    },\n    map: function map(array) {\n      return apply(array, 0, createMap, setMap);\n    },\n    entries: function entries(array) {\n      return _entries(apply(array, 0, createMap, setMap), 0);\n    },\n    key: function key(d) {\n      keys.push(d);\n      return nest;\n    },\n    sortKeys: function sortKeys(order) {\n      _sortKeys[keys.length - 1] = order;\n      return nest;\n    },\n    sortValues: function sortValues(order) {\n      _sortValues = order;\n      return nest;\n    },\n    rollup: function rollup(f) {\n      _rollup = f;\n      return nest;\n    }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}","import { default as map, prefix } from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function add(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set(); // Copy constructor.\n\n  if (object instanceof Set) object.each(function (value) {\n    set.add(value);\n  }); // Otherwise, assume its an array.\n  else if (object) {\n      var i = -1,\n          n = object.length;\n      if (f == null) while (++i < n) {\n        set.add(object[i]);\n      } else while (++i < n) {\n        set.add(f(object[i], i, object));\n      }\n    }\n  return set;\n}\n\nexport default set;","var tarjan = require('strongly-connected-components');\n\nmodule.exports = function findCircuits(edges, cb) {\n  var circuits = []; // Output\n\n  var stack = [];\n  var blocked = [];\n  var B = {};\n  var Ak = [];\n  var s;\n\n  function unblock(u) {\n    blocked[u] = false;\n\n    if (B.hasOwnProperty(u)) {\n      Object.keys(B[u]).forEach(function (w) {\n        delete B[u][w];\n\n        if (blocked[w]) {\n          unblock(w);\n        }\n      });\n    }\n  }\n\n  function circuit(v) {\n    var found = false;\n    stack.push(v);\n    blocked[v] = true; // L1\n\n    var i;\n    var w;\n\n    for (i = 0; i < Ak[v].length; i++) {\n      w = Ak[v][i];\n\n      if (w === s) {\n        output(s, stack);\n        found = true;\n      } else if (!blocked[w]) {\n        found = circuit(w);\n      }\n    } // L2\n\n\n    if (found) {\n      unblock(v);\n    } else {\n      for (i = 0; i < Ak[v].length; i++) {\n        w = Ak[v][i];\n        var entry = B[w];\n\n        if (!entry) {\n          entry = {};\n          B[w] = entry;\n        }\n\n        entry[w] = true;\n      }\n    }\n\n    stack.pop();\n    return found;\n  }\n\n  function output(start, stack) {\n    var cycle = [].concat(stack).concat(start);\n\n    if (cb) {\n      cb(circuit);\n    } else {\n      circuits.push(cycle);\n    }\n  }\n\n  function subgraph(minId) {\n    // Remove edges with indice smaller than minId\n    for (var i = 0; i < edges.length; i++) {\n      if (i < minId) edges[i] = [];\n      edges[i] = edges[i].filter(function (i) {\n        return i >= minId;\n      });\n    }\n  }\n\n  function adjacencyStructureSCC(from) {\n    // Make subgraph starting from vertex minId\n    subgraph(from);\n    var g = edges; // Find strongly connected components using Tarjan algorithm\n\n    var sccs = tarjan(g); // Filter out trivial connected components (ie. made of one node)\n\n    var ccs = sccs.components.filter(function (scc) {\n      return scc.length > 1;\n    }); // Find least vertex\n\n    var leastVertex = Infinity;\n    var leastVertexComponent;\n\n    for (var i = 0; i < ccs.length; i++) {\n      for (var j = 0; j < ccs[i].length; j++) {\n        if (ccs[i][j] < leastVertex) {\n          leastVertex = ccs[i][j];\n          leastVertexComponent = i;\n        }\n      }\n    }\n\n    var cc = ccs[leastVertexComponent];\n    if (!cc) return false; // Return the adjacency list of first component\n\n    var adjList = edges.map(function (l, index) {\n      if (cc.indexOf(index) === -1) return [];\n      return l.filter(function (i) {\n        return cc.indexOf(i) !== -1;\n      });\n    });\n    return {\n      leastVertex: leastVertex,\n      adjList: adjList\n    };\n  }\n\n  s = 0;\n  var n = edges.length;\n\n  while (s < n) {\n    // find strong component with least vertex in\n    // subgraph starting from vertex `s`\n    var p = adjacencyStructureSCC(s); // Its least vertex\n\n    s = p.leastVertex; // Its adjacency list\n\n    Ak = p.adjList;\n\n    if (Ak) {\n      for (var i = 0; i < Ak.length; i++) {\n        for (var j = 0; j < Ak[i].length; j++) {\n          var vertexId = Ak[i][j];\n          blocked[+vertexId] = false;\n          B[vertexId] = {};\n        }\n      }\n\n      circuit(s);\n      s = s + 1;\n    } else {\n      s = n;\n    }\n  }\n\n  if (cb) {\n    return;\n  } else {\n    return circuits;\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar baseAttrs = require('../../plots/attributes');\n\nvar colorAttrs = require('../../components/color/attributes');\n\nvar fxAttrs = require('../../components/fx/attributes');\n\nvar domainAttrs = require('../../plots/domain').attributes;\n\nvar hovertemplateAttrs = require('../../plots/template_attributes').hovertemplateAttrs;\n\nvar colorAttributes = require('../../components/colorscale/attributes');\n\nvar templatedArray = require('../../plot_api/plot_template').templatedArray;\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar overrideAll = require('../../plot_api/edit_types').overrideAll;\n\nvar FORMAT_LINK = require('../../constants/docs').FORMAT_LINK;\n\nvar attrs = module.exports = overrideAll({\n  hoverinfo: extendFlat({}, baseAttrs.hoverinfo, {\n    flags: [],\n    arrayOk: false,\n    description: ['Determines which trace information appear on hover.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.', 'Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`', 'for nodes and links respectively.'].join(' ')\n  }),\n  hoverlabel: fxAttrs.hoverlabel,\n  domain: domainAttrs({\n    name: 'sankey',\n    trace: true\n  }),\n  orientation: {\n    valType: 'enumerated',\n    values: ['v', 'h'],\n    dflt: 'h',\n    role: 'style',\n    description: 'Sets the orientation of the Sankey diagram.'\n  },\n  valueformat: {\n    valType: 'string',\n    dflt: '.3s',\n    role: 'style',\n    description: ['Sets the value formatting rule using d3 formatting mini-language', 'which is similar to those of Python. See', FORMAT_LINK].join(' ')\n  },\n  valuesuffix: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    description: ['Adds a unit to follow the value in the hover tooltip. Add a space if a separation', 'is necessary from the value.'].join(' ')\n  },\n  arrangement: {\n    valType: 'enumerated',\n    values: ['snap', 'perpendicular', 'freeform', 'fixed'],\n    dflt: 'snap',\n    role: 'style',\n    description: ['If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to', 'preserve space between nodes specified via `nodepad`.', 'If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.', 'If value is `freeform`, the nodes can freely move on the plane.', 'If value is `fixed`, the nodes are stationary.'].join(' ')\n  },\n  textfont: fontAttrs({\n    description: 'Sets the font for node labels'\n  }),\n  // Remove top-level customdata\n  customdata: undefined,\n  node: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the node.'\n    },\n    groups: {\n      valType: 'info_array',\n      impliedEdits: {\n        'x': [],\n        'y': []\n      },\n      dimensions: 2,\n      freeLength: true,\n      dflt: [],\n      items: {\n        valType: 'number',\n        editType: 'calc'\n      },\n      role: 'info',\n      description: ['Groups of nodes.', 'Each group is defined by an array with the indices of the nodes it contains.', 'Multiple groups can be specified.'].join(' ')\n    },\n    x: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized horizontal position of the node.'\n    },\n    y: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized vertical position of the node.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.', 'If `node.color` is omitted, then the default `Plotly` color palette will be cycled through', 'to have a variety of colors. These defaults are not fully opaque, to allow some visibility of', 'what is beneath the node.'].join(' ')\n    },\n    customdata: {\n      valType: 'data_array',\n      editType: 'calc',\n      description: ['Assigns extra data to each node.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `node`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0.5,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `node`.'].join(' ')\n      }\n    },\n    pad: {\n      valType: 'number',\n      arrayOk: false,\n      min: 0,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the padding (in px) between the `nodes`.'\n    },\n    thickness: {\n      valType: 'number',\n      arrayOk: false,\n      min: 1,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the thickness (in px) of the `nodes`.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering nodes.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `sourceLinks` and `targetLinks` are arrays of link objects.',\n      keys: ['value', 'label']\n    }),\n    description: 'The nodes of the Sankey plot.'\n  },\n  link: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the link.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.', 'If `link.color` is omitted, then by default, a translucent grey link will be used.'].join(' ')\n    },\n    customdata: {\n      valType: 'data_array',\n      editType: 'calc',\n      description: ['Assigns extra data to each link.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `link`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `link`.'].join(' ')\n      }\n    },\n    source: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the source node.'\n    },\n    target: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the target node.'\n    },\n    value: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'A numeric value representing the flow volume value.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering links.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `source` and `target` are node objects.',\n      keys: ['value', 'label']\n    }),\n    colorscales: templatedArray('concentrationscales', {\n      editType: 'calc',\n      label: {\n        valType: 'string',\n        role: 'info',\n        editType: 'calc',\n        description: 'The label of the links to color based on their concentration within a flow.',\n        dflt: ''\n      },\n      cmax: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 1,\n        description: ['Sets the upper bound of the color domain.'].join('')\n      },\n      cmin: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 0,\n        description: ['Sets the lower bound of the color domain.'].join('')\n      },\n      colorscale: extendFlat(colorAttributes().colorscale, {\n        dflt: [[0, 'white'], [1, 'black']]\n      })\n    }),\n    description: 'The links of the Sankey plot.',\n    role: 'info'\n  }\n}, 'calc', 'nested');\nattrs.transforms = undefined;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nmodule.exports = {\n  attributes: require('plotly.js/src/traces/sankey/attributes'),\n  supplyDefaults: require('plotly.js/src/traces/sankey/defaults'),\n  calc: require('plotly.js/src/traces/sankey/calc'),\n  plot: require('./plot'),\n\n  moduleType: 'trace',\n  name: 'sankey',\n  basePlotModule: require('./base_plot'),\n  selectPoints: require('plotly.js/src/traces/sankey/select.js'),\n  categories: ['noOpacity'],\n  meta: {\n    description: [\n      'Sankey plots for network flow data analysis.',\n      'The nodes are specified in `nodes` and the links between sources and targets in `links`.',\n      'The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used.'\n    ].join(' ')\n  }\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar d3 = require('d3');\nvar render = require('./render');\nvar Fx = require('plotly.js/src/components/fx');\nvar Color = require('plotly.js/src/components/color');\nvar Lib = require('plotly.js/src/lib');\nvar cn = require('plotly.js/src/traces/sankey/constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) { return d !== ''; }\n\nfunction ownTrace(selection, d) {\n  return selection.filter(function (s) { return s.key === d.traceId; });\n}\n\nfunction makeTranslucent(element, alpha) {\n  d3.select(element)\n    .select('path')\n    .style('fill-opacity', alpha);\n  d3.select(element)\n    .select('rect')\n    .style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n  d3.select(element)\n    .select('text.name')\n    .style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n  return function (l) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction relatedNodes(l) {\n  return function (d) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkNonHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (l) {\n    if (!l.link.concentrationscale) {\n      return 0.4;\n    }\n  });\n\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (l) {\n        if (!l.link.concentrationscale) {\n          return 0.4;\n        }\n      });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeHoveredStyle);\n  }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll(cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeNonHoveredStyle);\n  }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n  var labelOpts = trace.hoverlabel || {};\n  var val = Lib.nestedProperty(labelOpts, attr).get();\n  return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._paper;\n  var size = fullLayout._size;\n\n  // stash initial view\n  for (var i = 0; i < gd._fullData.length; i++) {\n    if (!gd._fullData[i].visible) continue;\n    if (gd._fullData[i].type !== cn.sankey) continue;\n    if (!gd._fullData[i]._viewInitial) {\n      var node = gd._fullData[i].node;\n      gd._fullData[i]._viewInitial = {\n        node: {\n          groups: node.groups.slice(),\n          x: node.x.slice(),\n          y: node.y.slice()\n        }\n      };\n    }\n  }\n\n  var linkSelect = function (element, d) {\n    var evt = d.link;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    Fx.click(gd, { target: true });\n  };\n\n  var linkHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n  };\n\n  var sourceLabel = _(gd, 'source:') + ' ';\n  var targetLabel = _(gd, 'target:') + ' ';\n  var concentrationLabel = _(gd, 'concentration:') + ' ';\n  var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n  var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n  var linkHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.link.trace.link;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n\n    var hoverItems = [];\n\n    function hoverCenterPosition(link) {\n      var hoverCenterX, hoverCenterY;\n      if (link.circular) {\n        hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n        hoverCenterY = link.circularPathData.verticalFullExtent;\n      } else {\n        hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n        hoverCenterY = (link.y0 + link.y1) / 2;\n      }\n      var center = [hoverCenterX, hoverCenterY];\n      if (link.trace.orientation === 'v') center.reverse();\n      center[0] += d.parent.translateX;\n      center[1] += d.parent.translateY;\n      return center;\n    }\n\n    // For each related links, create a hoverItem\n    var anchorIndex = 0;\n    for (var i = 0; i < d.flow.links.length; i++) {\n      var link = d.flow.links[i];\n      if (gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n      if (d.link.pointNumber === link.pointNumber) anchorIndex = i;\n      link.fullData = link.trace;\n      obj = d.link.trace.link;\n      var hoverCenter = hoverCenterPosition(link);\n      var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(link.value) + d.valueSuffix };\n\n      hoverItems.push({\n        x: hoverCenter[0],\n        y: hoverCenter[1],\n        name: hovertemplateLabels.valueLabel,\n        text: [\n          link.label || '',\n          sourceLabel + link.source.label,\n          targetLabel + link.target.label,\n          link.concentrationscale ? concentrationLabel + d3.format('%0.2f')(link.flow.labelConcentration) : ''\n        ].filter(renderableValuePresent).join('<br>'),\n        color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n        borderColor: castHoverOption(obj, 'bordercolor'),\n        fontFamily: castHoverOption(obj, 'font.family'),\n        fontSize: castHoverOption(obj, 'font.size'),\n        fontColor: castHoverOption(obj, 'font.color'),\n        nameLength: castHoverOption(obj, 'namelength'),\n        textAlign: castHoverOption(obj, 'align'),\n        idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n\n        hovertemplate: obj.hovertemplate,\n        hovertemplateLabels: hovertemplateLabels,\n        eventData: [link]\n      });\n    }\n\n    var tooltips = Fx.loneHover(hoverItems, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd,\n      anchorIndex: anchorIndex\n    });\n\n    tooltips.each(function () {\n      var tooltip = this;\n      if (!d.link.concentrationscale) {\n        makeTranslucent(tooltip, 0.65);\n      }\n      makeTextContrasty(tooltip);\n    });\n  };\n\n  var linkUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  var nodeSelect = function (element, d, sankey) {\n    var evt = d.node;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    Fx.click(gd, { target: true });\n  };\n\n  var nodeHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n  };\n\n  var nodeHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n\n    var obj = d.node.trace.node;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n    var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n    var boundingBox = nodeRect.node().getBoundingClientRect();\n    var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n    var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n    var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n\n    var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix };\n    d.node.fullData = d.node.trace;\n\n    var tooltip = Fx.loneHover({\n      x0: hoverCenterX0,\n      x1: hoverCenterX1,\n      y: hoverCenterY,\n      name: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix,\n      text: [\n        d.node.label,\n        incomingLabel + d.node.targetLinks.length,\n        outgoingLabel + d.node.sourceLinks.length\n      ].filter(renderableValuePresent).join('<br>'),\n      color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n      borderColor: castHoverOption(obj, 'bordercolor'),\n      fontFamily: castHoverOption(obj, 'font.family'),\n      fontSize: castHoverOption(obj, 'font.size'),\n      fontColor: castHoverOption(obj, 'font.color'),\n      nameLength: castHoverOption(obj, 'namelength'),\n      textAlign: castHoverOption(obj, 'align'),\n      idealAlign: 'left',\n\n      hovertemplate: obj.hovertemplate,\n      hovertemplateLabels: hovertemplateLabels,\n      eventData: [d.node]\n    }, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd\n    });\n\n    makeTranslucent(tooltip, 0.85);\n    makeTextContrasty(tooltip);\n  };\n\n  var nodeUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  render(\n    gd,\n    svg,\n    calcData,\n    {\n      width: size.w,\n      height: size.h,\n      margin: {\n        t: size.t,\n        r: size.r,\n        b: size.b,\n        l: size.l\n      }\n    },\n    {\n      linkEvents: {\n        hover: linkHover,\n        follow: linkHoverFollow,\n        unhover: linkUnhover,\n        select: linkSelect\n      },\n      nodeEvents: {\n        hover: nodeHover,\n        follow: nodeHoverFollow,\n        unhover: nodeUnhover,\n        select: nodeSelect\n      }\n    }\n  );\n};\n","export default function (constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n\n  for (var key in definition) {\n    prototype[key] = definition[key];\n  }\n\n  return prototype;\n}","import define, { extend } from \"./define.js\";\nexport function Color() {}\nvar _darker = 0.7;\nexport { _darker as darker };\n\nvar _brighter = 1 / _darker;\n\nexport { _brighter as brighter };\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\ndefine(Color, color, {\n  copy: function copy(channels) {\n    return Object.assign(new this.constructor(), this, channels);\n  },\n  displayable: function displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n  : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n  : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n  : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n  : null // invalid hex\n  ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n  : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n  : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n  : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n  : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n  : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n  : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n  : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb();\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function rgb() {\n    return this;\n  },\n  displayable: function displayable() {\n    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  hex: rgb_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity;\n  a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl();\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n\n  return new Hsl(h, s, l, o.opacity);\n}\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n  },\n  displayable: function displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  formatHsl: function formatHsl() {\n    var a = this.opacity;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\") + (this.h || 0) + \", \" + (this.s || 0) * 100 + \"%, \" + (this.l || 0) * 100 + \"%\" + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n/* From FvD 13.37, CSS Color Module Level 3 */\n\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n}","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1,\n      t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;\n}\nexport default function (values) {\n  var n = values.length - 1;\n  return function (t) {\n    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","import { basis } from \"./basis.js\";\nexport default function (values) {\n  var n = values.length;\n  return function (t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function (t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function (a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}","import { rgb as colorRgb } from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, { gamma } from \"./color.js\";\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function (t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function (colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i,\n        color;\n\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function (t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);","export default function (a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function (t) {\n    for (i = 0; i < n; ++i) {\n      c[i] = a[i] * (1 - t) + b[i] * t;\n    }\n\n    return c;\n  };\n}\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}","import value from \"./value.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) {\n    x[i] = value(a[i], b[i]);\n  }\n\n  for (; i < nb; ++i) {\n    c[i] = b[i];\n  }\n\n  return function (t) {\n    for (i = 0; i < na; ++i) {\n      c[i] = x[i](t);\n    }\n\n    return c;\n  };\n}","export default function (a, b) {\n  var d = new Date();\n  return a = +a, b = +b, function (t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return a * (1 - t) + b * t;\n  };\n}","import value from \"./value.js\";\nexport default function (a, b) {\n  var i = {},\n      c = {},\n      k;\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function (t) {\n    for (k in i) {\n      c[k] = i[k](t);\n    }\n\n    return c;\n  };\n}","import number from \"./number.js\";\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function () {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function (t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function (a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0,\n      // scan index for next number in b\n  am,\n      // current match in a\n  bm,\n      // current match in b\n  bs,\n      // string preceding current number in b, if any\n  i = -1,\n      // index in s\n  s = [],\n      // string constants and placeholders\n  q = []; // number interpolators\n  // Coerce inputs to strings.\n\n  a = a + \"\", b = b + \"\"; // Interpolate pairs of numbers in a & b.\n\n  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) {\n      // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    if ((am = am[0]) === (bm = bm[0])) {\n      // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else {\n      // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({\n        i: i,\n        x: number(am, bm)\n      });\n    }\n\n    bi = reB.lastIndex;\n  } // Add remains of b.\n\n\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  } // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n\n\n  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n    for (var i = 0, o; i < b; ++i) {\n      s[(o = q[i]).i] = o.x(t);\n    }\n\n    return s.join(\"\");\n  });\n}","import decompose, { identity } from \"./decompose.js\";\nvar cssNode, cssRoot, cssView, svgNode;\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}","import { color } from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport { genericArray } from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  var t = typeof b,\n      c;\n  return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? number : t === \"string\" ? (c = color(b)) ? (b = c, rgb) : string : b instanceof color ? rgb : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : number)(a, b);\n}","export default function (range) {\n  var n = range.length;\n  return function (t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}","import { hue } from \"./color.js\";\nexport default function (a, b) {\n  var i = hue(+a, +b);\n  return function (t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}","var degrees = 180 / Math.PI;\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\nexport default function (a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}","import number from \"../number.js\";\nimport { parseCss, parseSvg } from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360;else if (b - a > 180) a += 360; // shortest path\n\n      q.push({\n        i: s.push(pop(s) + \"rotate(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({\n        i: s.push(pop(s) + \"skewX(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function (a, b) {\n    var s = [],\n        // string constants and placeholders\n    q = []; // number interpolators\n\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n\n    return function (t) {\n      var i = -1,\n          n = q.length,\n          o;\n\n      while (++i < n) {\n        s[(o = q[i]).i] = o.x(t);\n      }\n\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n} // p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\n\n\nexport default function (p0, p1) {\n  var ux0 = p0[0],\n      uy0 = p0[1],\n      w0 = p0[2],\n      ux1 = p1[0],\n      uy1 = p1[1],\n      w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S; // Special case for u0  u1.\n\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n\n    i = function i(t) {\n      return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(rho * t * S)];\n    };\n  } // General case.\n  else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n\n      i = function i(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / cosh(rho * s + r0)];\n      };\n    }\n\n  i.duration = S * 1000;\n  return i;\n}","import { hsl as colorHsl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hsl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\"; // https://observablehq.com/@mbostock/lab-and-rgb\n\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn),\n      x,\n      z;\n  if (r === g && g === b) x = z = y;else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Lab, lab, extend(Color, {\n  brighter: function brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));","import { lab as colorLab } from \"d3-color\";\nimport color from \"./color.js\";\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function (t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}","import { hcl as colorHcl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hcl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb, darker as _darker, brighter as _brighter } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\";\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)),\n      // NaN if l=0 or l=1\n  h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(255 * (l + a * (A * cosh + B * sinh)), 255 * (l + a * (C * cosh + D * sinh)), 255 * (l + a * (E * cosh)), this.opacity);\n  }\n}));","import { cubehelix as colorCubehelix } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function (t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n    return cubehelix;\n  }(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);","export default function piecewise(interpolate, values) {\n  var i = 0,\n      n = values.length - 1,\n      v = values[0],\n      I = new Array(n < 0 ? 0 : n);\n\n  while (i < n) {\n    I[i] = interpolate(v, v = values[++i]);\n  }\n\n  return function (t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}","export default function (interpolator, n) {\n  var samples = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    samples[i] = interpolator(i / (n - 1));\n  }\n\n  return samples;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import _slicedToArray from \"/Users/astefanu/Development/website/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n\n  var _iterator = _createForOfIteratorHelper(nodes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n\n      var _iterator2 = _createForOfIteratorHelper(node.sourceLinks),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(node.targetLinks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n\n    var _iterator4 = _createForOfIteratorHelper(nodes.entries()),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n\n    var _iterator5 = _createForOfIteratorHelper(links.entries()),\n        _step5;\n\n    try {\n      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _iterator5.e(err);\n    } finally {\n      _iterator5.f();\n    }\n\n    if (linkSort != null) {\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n\n    var _iterator7 = _createForOfIteratorHelper(nodes),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator8 = _createForOfIteratorHelper(current),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.depth = x;\n\n          var _iterator9 = _createForOfIteratorHelper(node.sourceLinks),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator10 = _createForOfIteratorHelper(current),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var node = _step10.value;\n          node.height = x;\n\n          var _iterator11 = _createForOfIteratorHelper(node.targetLinks),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n\n    var _iterator12 = _createForOfIteratorHelper(nodes),\n        _step12;\n\n    try {\n      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _iterator12.e(err);\n    } finally {\n      _iterator12.f();\n    }\n\n    if (sort) {\n      var _iterator13 = _createForOfIteratorHelper(columns),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n\n    var _iterator14 = _createForOfIteratorHelper(columns),\n        _step14;\n\n    try {\n      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n        var _nodes = _step14.value;\n        var y = y0;\n\n        var _iterator15 = _createForOfIteratorHelper(_nodes),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n\n            var _iterator16 = _createForOfIteratorHelper(_node.sourceLinks),\n                _step16;\n\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _iterator14.e(err);\n    } finally {\n      _iterator14.f();\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n\n      var _iterator17 = _createForOfIteratorHelper(column),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator18 = _createForOfIteratorHelper(target.targetLinks),\n              _step18;\n\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n\n      var _iterator19 = _createForOfIteratorHelper(column),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator20 = _createForOfIteratorHelper(source.sourceLinks),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iterator21 = _createForOfIteratorHelper(targetLinks),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      var _iterator22 = _createForOfIteratorHelper(sourceLinks),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iterator23 = _createForOfIteratorHelper(nodes),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n\n    var _iterator24 = _createForOfIteratorHelper(source.sourceLinks),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n\n    var _iterator25 = _createForOfIteratorHelper(target.targetLinks),\n        _step25;\n\n    try {\n      for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _iterator25.e(err);\n    } finally {\n      _iterator25.f();\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n\n    var _iterator26 = _createForOfIteratorHelper(target.targetLinks),\n        _step26;\n\n    try {\n      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator26.e(err);\n    } finally {\n      _iterator26.f();\n    }\n\n    var _iterator27 = _createForOfIteratorHelper(source.sourceLinks),\n        _step27;\n\n    try {\n      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _iterator27.e(err);\n    } finally {\n      _iterator27.f();\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","export default function (x) {\n  return x === null ? NaN : +x;\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","export default function (values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}","import number from \"./number\";\nexport default function (values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;else --m;\n    }\n  } else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  } else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}"],"sourceRoot":""}