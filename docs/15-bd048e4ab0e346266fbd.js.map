{"version":3,"sources":["webpack:///./node_modules/plotly.js/src/traces/sankey/defaults.js","webpack:///./node_modules/plotly.js/src/traces/sankey/constants.js","webpack:///./node_modules/plotly.js/src/lib/gup.js","webpack:///./node_modules/d3-force/src/center.js","webpack:///./node_modules/d3-force/src/constant.js","webpack:///./node_modules/d3-force/src/jiggle.js","webpack:///./node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-force/src/collide.js","webpack:///./node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-quadtree/src/visitAfter.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-force/src/manyBody.js","webpack:///./node_modules/d3-force/src/radial.js","webpack:///./node_modules/d3-force/src/x.js","webpack:///./node_modules/d3-force/src/y.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/d3-shape/src/link/index.js","webpack:///./src/plotly/base_plot.js","webpack:///./node_modules/plotly.js/src/traces/sankey/select.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/ascending.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/bisect.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/bisector.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/cross.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/number.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/array.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/ticks.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/threshold/sturges.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/max.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/mean.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/min.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/sum.js","webpack:///./node_modules/@plotly/d3-sankey-circular/node_modules/d3-array/src/zip.js","webpack:///./node_modules/@plotly/d3-sankey-circular/dist/d3-sankey-circular.es.js","webpack:///./node_modules/strongly-connected-components/scc.js","webpack:///./node_modules/plotly.js/src/traces/sankey/calc.js","webpack:///./src/plotly/render.js","webpack:///./node_modules/d3-collection/src/map.js","webpack:///./node_modules/d3-collection/src/nest.js","webpack:///./node_modules/d3-collection/src/set.js","webpack:///./node_modules/elementary-circuits-directed-graph/johnson.js","webpack:///./node_modules/plotly.js/src/traces/sankey/attributes.js","webpack:///./src/plotly/sankey.js","webpack:///./src/plotly/plot.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-interpolate/src/basis.js","webpack:///./node_modules/d3-interpolate/src/basisClosed.js","webpack:///./node_modules/d3-interpolate/src/constant.js","webpack:///./node_modules/d3-interpolate/src/color.js","webpack:///./node_modules/d3-interpolate/src/rgb.js","webpack:///./node_modules/d3-interpolate/src/numberArray.js","webpack:///./node_modules/d3-interpolate/src/array.js","webpack:///./node_modules/d3-interpolate/src/date.js","webpack:///./node_modules/d3-interpolate/src/number.js","webpack:///./node_modules/d3-interpolate/src/object.js","webpack:///./node_modules/d3-interpolate/src/string.js","webpack:///./node_modules/d3-interpolate/src/transform/parse.js","webpack:///./node_modules/d3-interpolate/src/value.js","webpack:///./node_modules/d3-interpolate/src/discrete.js","webpack:///./node_modules/d3-interpolate/src/hue.js","webpack:///./node_modules/d3-interpolate/src/round.js","webpack:///./node_modules/d3-interpolate/src/transform/decompose.js","webpack:///./node_modules/d3-interpolate/src/transform/index.js","webpack:///./node_modules/d3-interpolate/src/zoom.js","webpack:///./node_modules/d3-interpolate/src/hsl.js","webpack:///./node_modules/d3-color/src/math.js","webpack:///./node_modules/d3-color/src/lab.js","webpack:///./node_modules/d3-interpolate/src/lab.js","webpack:///./node_modules/d3-interpolate/src/hcl.js","webpack:///./node_modules/d3-color/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/cubehelix.js","webpack:///./node_modules/d3-interpolate/src/piecewise.js","webpack:///./node_modules/d3-interpolate/src/quantize.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/d3-array/src/sum.js","webpack:///./node_modules/d3-array/src/max.js","webpack:///./node_modules/d3-array/src/min.js","webpack:///./node_modules/d3-sankey/src/align.js","webpack:///./node_modules/d3-sankey/src/constant.js","webpack:///./node_modules/d3-sankey/src/sankey.js","webpack:///./node_modules/d3-sankey/src/sankeyLinkHorizontal.js"],"names":["Lib","attributes","Color","tinycolor","handleDomainDefaults","defaults","handleHoverLabelDefaults","Template","handleArrayContainerDefaults","concentrationscalesDefaults","In","Out","coerce","attr","dflt","link","colorscales","module","exports","traceIn","traceOut","defaultColor","layout","hoverlabelDefault","extendDeep","hoverlabel","nodeIn","node","nodeOut","newContainer","coerceNode","hoverinfo","colors","colorway","label","map","d","i","addOpacity","length","defaultNodePalette","linkIn","linkOut","coerceLink","dfltArrangement","defaultLinkColor","paper_bgcolor","getLuminance","repeat","value","name","handleItemDefaults","x","y","coerceFont","extendFlat","font","_length","nodeTextOffsetHorizontal","nodeTextOffsetVertical","nodePadAcross","sankeyIterations","forceIterations","forceTicksPerFrame","duration","ease","cn","sankey","sankeyLinks","sankeyLink","sankeyNodeSet","sankeyNode","nodeRect","nodeCapture","nodeCentered","nodeLabelGuide","nodeLabel","nodeLabelTextPath","identity","wrap","keyFun","key","descend","unwrap","nodes","force","n","sx","sy","initialize","_","arguments","Math","random","tree","isNaN","parent","xm","ym","xp","yp","right","bottom","j","_root","leaf","data","x0","_x0","y0","_y0","x1","_x1","y1","_y1","_x","call","_y","next","Array","this","defaultX","defaultY","quadtree","Quadtree","NaN","addAll","undefined","leaf_copy","copy","treeProto","prototype","vx","vy","child","source","target","pop","push","add","cover","xz","yz","Infinity","floor","z","visit","extent","find","x2","y2","q","x3","y3","quads","radius","dx","dy","d2","sqrt","remove","retainer","previous","removeAll","root","size","callback","visitAfter","radii","strength","iterations","xi","yi","ri","ri2","k","prepare","index","apply","quad","rj","r","l","jiggle","constant","nodeById","nodeId","get","Error","strengths","distances","count","bias","id","min","distance","alpha","links","b","m","initializeStrength","initializeDistance","noop","dispatch","t","test","Dispatch","parseTypenames","typenames","types","trim","split","indexOf","slice","hasOwnProperty","type","c","set","concat","constructor","on","typename","T","that","args","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","time","restart","wake","e","timerFlush","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","initialAngle","PI","simulation","_alpha","_alphaMin","_alphaDecay","pow","_alphaTarget","_velocityDecay","forces","stepper","step","event","tick","_nodes","each","fx","fy","initializeNodes","angle","cos","sin","initializeForce","alphaMin","alphaDecay","alphaTarget","velocityDecay","closest","distanceMin2","distanceMax2","theta2","accumulate","weight","abs","w","distanceMin","distanceMax","theta","radiuses","pi","tau","tauEpsilon","Path","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","tan","acos","t01","t21","arc","a0","a1","ccw","cw","da","rect","h","toString","p","linkSource","linkTarget","curve","context","buffer","argv","s","curveHorizontal","linkHorizontal","overrideAll","require","getModuleCalcData","plot","fxAttrs","setCursor","dragElement","prepSelect","Registry","subplotUpdateFx","gd","trace","_fullData","fullLayout","_fullLayout","dragMode","dragmode","cursor","bgRect","_bgRect","xaxis","_id","c2p","_offset","_sankey","translateX","width","yaxis","translateY","height","dragOptions","element","plotinfo","fillRangeItems","subplot","xaxes","yaxes","doneFnCompleted","selection","newGroups","traceNow","oldGroups","groups","newGroup","findNode","pt","graph","pointNumber","group","childrenNodes","_count","filter","Boolean","startX","startY","init","baseLayoutAttrOverrides","calcData","calcdata","updateFx","clean","newFullData","newFullLayout","oldFullData","oldFullLayout","hadPlot","_has","hasPlot","_paperdiv","selectAll","searchInfo","selectionTester","fullData","cd","partOfGroup","pos","orientation","reverse","contains","a","ascending","compare","max","values","valueof","sum","number","targetDepth","depth","left","justify","sourceLinks","center","targetLinks","_typeof","Symbol","iterator","obj","ascendingSourceBreadth","ascendingBreadth","ascendingTargetBreadth","partOfCycle","circularLinkType","nodeCenter","linkSourceCenter","linkTargetCenter","defaultId","defaultNodes","defaultLinks","getNodeID","py","paddingRatio","align","circularLinkGap","sortNodes","sankeyCircular","computeNodeLinks","identifyCircles","computeNodeValues","computeNodeDepths","selectCircularLinkTypes","computeNodeBreadths","computeLinkBreadths","linkSortingIterations","iteration","sortSourceLinks","sortTargetLinks","resolveNodeLinkOverlaps","fillHeight","addCircularPathData","forEach","circular","column","columns","sortKeys","entries","padding","thisPadding","ky","margin","totalTopLinksWidth","totalBottomLinksWidth","totalRightLinksWidth","totalLeftLinksWidth","maxColumn","getCircleMargins","ratio","currentWidth","currentHeight","scaleX","scaleY","top","scaleSankeySize","nodesLength","numberOfNonSelfLinkingCycles","initializeNodeBreadth","resolveCollisions","relaxLeftAndRight","columnsLength","nodeHeight","avgTargetY","avgSourceY","sort","y0cycle","y1cycle","nodeAlign","nodeWidth","nodePadding","nodePaddingRatio","update","circularLinkID","adjList","cycles","circularLinks","last","numberOfTops","numberOfBottoms","selfLinking","linkAngle","adjacent","opposite","atan","sourceCount","targetCount","onlyCircularLink","nodeSourceLinks","nodeTargetLinks","calcVerticalBuffer","sortLinkColumnAscending","link1","link2","circularPathData","verticalBuffer","bufferOverThisLink","minY","arcRadius","leftNodeBuffer","rightNodeBuffer","sourceWidth","sourceX","targetX","sourceY","targetY","leftSmallArcRadius","leftLargeArcRadius","rightSmallArcRadius","rightLargeArcRadius","verticalFullExtent","verticalLeftInnerExtent","verticalRightInnerExtent","thisColumn","thisCircularLinkType","sameColumnLinks","sortLinkSourceYDescending","sortLinkSourceYAscending","radiusOffset","sortLinkTargetYDescending","sortLinkTargetYAscending","leftInnerExtent","rightInnerExtent","leftFullExtent","rightFullExtent","pathString","createCircularPathString","normalPath","linkColumnDistance","linkXLength","linkPerpendicularYToLinkSource","longerLink","shorterLink","heightFromY1ToPependicular","incline","linkPerpendicularYToLinkTarget","columnToTest","maxColumnToTest","numberOfColumnsToTest","B0_t","B1_t","B2_t","B3_t","py_t","linkY0AtColumn","linkY1AtColumn","adjustNodeHeight","otherNode","nodesOverlap","nodeA","nodeB","sankeyY0","sankeyY1","moveNodes","nodesSourceLinks","nodeSourceLinksLength","sameInclines","link2Adj","ySourceOffset","offsetFromBottom","nodesTargetLinks","nodesTargetLinksLength","yTargetOffset","minY0","numVertices","lowValue","active","scc","sccLinks","newE","components","sccAdjList","strongConnect","v","S","u","component","linkCount","allLinks","adjacencyList","tarjan","isArrayOrTypedArray","isIndex","Colorscale","convertToD3Sankey","nodeSpec","linkSpec","hasLinkColorArray","color","hasLinkCustomdataArray","customdata","linkedNodes","componentCount","cscale","specs","extractScale","cLetter","scale","makeColorScaleFunc","maxNodeId","nodeCount","groupLookup","nodeIndex","groupIndex","warn","groupedLinks","val","concentrationscale","totalCount","hasNodeColorArray","hasNodeCustomdataArray","nodeLen","sources","targets","init2dArray","some","circularityPresent","result","_links","_groups","_groupLookup","d3","Drawing","d3Sankey","d3SankeyCircular","d3Force","gup","interpolateNumber","sankeyModel","traceIndex","domain","horizontal","nodePad","pad","nodeThickness","thickness","sankeyLeft","linkSort","nodeSort","nodePointNumber","groupingNode","parseInt","unshift","flowKey","flows","keys","Object","flowLinks","total","totalPerLabel","flow","labelConcentration","concentration","totalOutflow","concentrationOut","totalInflow","concenrationIn","computeLinkConcentrations","arrangement","resolveCollisionsTopToBottom","colX","orderedNodes","colNumber","lastX","snapToColumns","guid","randstr","nodeLineColor","line","nodeLineWidth","linkLineColor","linkLineWidth","valueFormat","valueformat","valueSuffix","valuesuffix","textFont","textfont","dragParallel","dragPerpendicular","forceLayouts","interactionState","dragInProgress","hovered","linkModel","tc","curveNumber","traceId","tinyColorHue","tinyRGB","tinyColorAlpha","getAlpha","linkPath","offset","coords","y0a","y0b","y1a","y1b","nodeModel","zoneThicknessPad","zoneLengthPad","visibleThickness","visibleLength","visibleWidth","ceil","visibleHeight","zoneX","zoneY","zoneWidth","zoneHeight","labelY","originalLayer","sizeAcross","darkBackground","getBrightness","uniqueNodeLabelPathId","join","figure","updateNodePositions","toFixed","updateNodeShapes","updateShapes","sizeNode","salientEnough","sankeyTransform","nodeCentering","textGuidePath","svg","sankeyInverseTransform","textFlip","nodeTextColor","nodeTextOffset","attachPointerEvents","eventSet","hover","follow","unhover","select","attachDragHandler","callbacks","dragBehavior","behavior","drag","origin","ensureSingle","_infolayer","_dragCover","raiseToTop","saveCurrentDragPosition","nodeEvents","forceKey","switchToForceFormat","originalX","forceSimulation","forceCollide","maxVelocity","lastDraggedX","lastDraggedY","snappingForce","attachForce","faster","switchToSankeyFormat","sameLayer","persistFinalNodePositions","startForce","nodeX","nodeY","then","firstRender","dragcover","styledData","visible","exit","enter","append","classed","style","dragboxClassName","uid","_draggers","fill","transition","linkEvents","opacity","_context","staticPlot","distinctLayerPositions","originalY","originalLayerIndex","persistOriginalPlace","text","Map","object","isArray","o","has","property","clear","empty","_sortValues","_rollup","nest","_sortKeys","array","createResult","setResult","keyValue","valuesByKey","createObject","setObject","createMap","setMap","_entries","sortKey","order","sortValues","rollup","Set","proto","edges","cb","circuits","stack","blocked","B","Ak","circuit","found","output","unblock","entry","start","cycle","adjacencyStructureSCC","from","minId","subgraph","leastVertexComponent","ccs","leastVertex","cc","vertexId","fontAttrs","baseAttrs","colorAttrs","domainAttrs","hovertemplateAttrs","colorAttributes","templatedArray","FORMAT_LINK","flags","arrayOk","description","valType","role","impliedEdits","dimensions","freeLength","items","editType","defaultLine","hovertemplate","cmax","cmin","colorscale","transforms","supplyDefaults","calc","moduleType","basePlotModule","selectPoints","categories","meta","render","Fx","renderableValuePresent","ownTrace","makeTranslucent","makeTextContrasty","relatedLinks","relatedNodes","nodeHoveredStyle","linkHoveredStyle","nodeNonHoveredStyle","linkNonHoveredStyle","visitNodes","datum","castHoverOption","labelOpts","nestedProperty","_paper","_size","_viewInitial","sourceLabel","targetLabel","concentrationLabel","incomingLabel","outgoingLabel","hovermode","emit","points","hoverItems","anchorIndex","hoverCenter","hoverCenterPosition","hovertemplateLabels","valueLabel","format","borderColor","fontFamily","fontSize","fontColor","nameLength","textAlign","idealAlign","eventData","loneHover","container","_hoverlayer","outerContainer","hoverCenterX","hoverCenterY","loneUnhover","evt","originalEvent","_hoverdata","click","rootBBox","getBoundingClientRect","boundingBox","hoverCenterX0","hoverCenterX1","tooltip","factory","extend","definition","create","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","toLowerCase","exec","rgbn","Rgb","rgba","hsla","g","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","round","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","basis","v0","v1","v2","v3","t3","define","channels","assign","displayable","formatHsl","brighter","darker","linear","gamma","nogamma","exponential","end","rgbGamma","rgbSpline","spline","rgbBasis","rgbBasisClosed","basisClosed","isNumberArray","ArrayBuffer","isView","DataView","numberArray","genericArray","nb","na","setTime","reA","reB","cssNode","cssRoot","cssView","svgNode","am","bm","bs","bi","lastIndex","one","zero","string","date","valueOf","range","degrees","rotate","skewX","atan2","interpolateTransform","parse","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","interpolateTransformCss","document","createElement","documentElement","defaultView","transform","getComputedStyle","appendChild","getPropertyValue","removeChild","decompose","interpolateTransformSvg","createElementNS","setAttribute","baseVal","consolidate","matrix","rho","SQRT2","exp","ux0","p0","uy0","w0","ux1","p1","uy1","w1","log","d1","b0","b1","r0","r1","coshr0","hue","hslLong","deg2rad","rad2deg","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","hcl","hclLong","A","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelixGamma","cubehelix","cosh","sinh","cubehelixLong","piecewise","interpolate","I","samples","interpolator","_slicedToArray","arr","_arr","_n","_d","_e","_s","_i","done","err","unsupportedIterableToArray","_createForOfIteratorHelper","allowArrayLike","it","minLen","_arrayLikeToArray","_unsupportedIterableToArray","F","normalCompletion","didErr","_e2","return","len","arr2","_step","_iterator","_step2","_iterator2","_value","_ref","_step3","_iterator3","_link","Sankey","computeNodeHeights","_ref2","_step4","_iterator4","_step4$value","_step5","_iterator5","_step5$value","_step6","_iterator6","_step6$value","_ref3","_step7","_iterator7","fixedValue","_ref4","current","_step8","_iterator8","_step9","_iterator9","_ref5","_step10","_iterator10","_step11","_iterator11","_ref6","_step12","kx","_iterator12","layer","_step13","_iterator13","computeNodeLayers","_step14","_iterator14","_step15","_iterator15","_node","_step16","_iterator16","reorderLinks","initializeNodeBreadths","beta","relaxRightToLeft","relaxLeftToRight","_step17","_iterator17","_step18","_iterator18","_step18$value","targetTop","_dy","reorderNodeLinks","_step19","_iterator19","_step20","_iterator20","_step20$value","sourceTop","_dy2","subject","resolveCollisionsBottomToTop","_dy3","_dy4","_ref7","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step23$value","_step24","_iterator24","_step24$value","_step25","_iterator25","_step25$value","_node2","_width","_step26","_iterator26","_step26$value","_step27","_iterator27","_step27$value","_node3","_width2","horizontalSource","horizontalTarget"],"mappings":"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","file":"15-bd048e4ab0e346266fbd.js","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar Color = require('../../components/color');\n\nvar tinycolor = require('tinycolor2');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel); // node attributes\n\n  var nodeIn = traceIn.node;\n  var nodeOut = Template.newContainer(traceOut, 'node');\n\n  function coerceNode(attr, dflt) {\n    return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n  }\n\n  coerceNode('label');\n  coerceNode('groups');\n  coerceNode('x');\n  coerceNode('y');\n  coerceNode('pad');\n  coerceNode('thickness');\n  coerceNode('line.color');\n  coerceNode('line.width');\n  coerceNode('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n  coerceNode('hovertemplate');\n  var colors = layout.colorway;\n\n  var defaultNodePalette = function defaultNodePalette(i) {\n    return colors[i % colors.length];\n  };\n\n  coerceNode('color', nodeOut.label.map(function (d, i) {\n    return Color.addOpacity(defaultNodePalette(i), 0.8);\n  }));\n  coerceNode('customdata'); // link attributes\n\n  var linkIn = traceIn.link || {};\n  var linkOut = Template.newContainer(traceOut, 'link');\n\n  function coerceLink(attr, dflt) {\n    return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n  }\n\n  coerceLink('label');\n  coerceLink('source');\n  coerceLink('target');\n  coerceLink('value');\n  coerceLink('line.color');\n  coerceLink('line.width');\n  coerceLink('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n  coerceLink('hovertemplate');\n  var defaultLinkColor = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333 ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n  coerceLink('color', Lib.repeat(defaultLinkColor, linkOut.value.length));\n  coerceLink('customdata');\n  handleArrayContainerDefaults(linkIn, linkOut, {\n    name: 'colorscales',\n    handleItemDefaults: concentrationscalesDefaults\n  });\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('orientation');\n  coerce('valueformat');\n  coerce('valuesuffix');\n  var dfltArrangement;\n\n  if (nodeOut.x.length && nodeOut.y.length) {\n    dfltArrangement = 'freeform';\n  }\n\n  coerce('arrangement', dfltArrangement);\n  Lib.coerceFont(coerce, 'textfont', Lib.extendFlat({}, layout.font)); // disable 1D transforms - arrays here are 1D but their lengths/meanings\n  // don't match, between nodes and links\n\n  traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n  }\n\n  coerce('label');\n  coerce('cmin');\n  coerce('cmax');\n  coerce('colorscale');\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = {\n  nodeTextOffsetHorizontal: 4,\n  nodeTextOffsetVertical: 3,\n  nodePadAcross: 10,\n  sankeyIterations: 50,\n  forceIterations: 5,\n  forceTicksPerFrame: 10,\n  duration: 500,\n  ease: 'linear',\n  cn: {\n    sankey: 'sankey',\n    sankeyLinks: 'sankey-links',\n    sankeyLink: 'sankey-link',\n    sankeyNodeSet: 'sankey-node-set',\n    sankeyNode: 'sankey-node',\n    nodeRect: 'node-rect',\n    nodeCapture: 'node-capture',\n    nodeCentered: 'node-entered',\n    nodeLabelGuide: 'node-label-guide',\n    nodeLabel: 'node-label',\n    nodeLabelTextPath: 'node-label-text-path'\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar identity = require('./identity');\n\nfunction wrap(d) {\n  return [d];\n}\n\nmodule.exports = {\n  // The D3 data binding concept and the General Update Pattern promotes the idea of\n  // traversing into the scenegraph by using the `.data(fun, keyFun)` call.\n  // The `fun` is most often a `repeat`, ie. the elements beneath a `<g>` element need\n  // access to the same data, or a `descend`, which fans a scenegraph node into a bunch of\n  // of elements, e.g. points, lines, rows, requiring an array as input.\n  // The role of the `keyFun` is to identify what elements are being entered/exited/updated,\n  // otherwise D3 reverts to using a plain index which would screw up `transition`s.\n  keyFun: function keyFun(d) {\n    return d.key;\n  },\n  repeat: wrap,\n  descend: identity,\n  // Plotly.js uses a convention of storing the actual contents of the `calcData` as the\n  // element zero of a container array. These helpers are just used for clarity as a\n  // newcomer to the codebase may not know what the `[0]` is, and whether there can be further\n  // elements (not atm).\n  wrap: wrap,\n  unwrap: function unwrap(d) {\n    return d[0];\n  }\n};","export default function (x, y) {\n  var nodes;\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = sx / n - x, sy = sy / n - y, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","export default function () {\n  return (Math.random() - 0.5) * 1e-6;\n}","export default function (d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | xp >= xm));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d,\n      i,\n      n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  } // If there were no (valid) points, abort.\n\n\n  if (x0 > x1 || y0 > y1) return this; // Expand the tree to cover the new points.\n\n  this.cover(x0, y0).cover(x1, y1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1; // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries don’t change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else {\n      var z = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n        i = (y < y0) << 1 | x < x0;\n        parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n\n        switch (i) {\n          case 0:\n            x1 = x0 + z, y1 = y0 + z;\n            break;\n\n          case 1:\n            x0 = x1 - z, y1 = y0 + z;\n            break;\n\n          case 2:\n            x1 = x0 + z, y0 = y1 - z;\n            break;\n\n          case 3:\n            x0 = x1 - z, y0 = y1 - z;\n            break;\n        }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}","export default function (node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","export function defaultY(d) {\n  return d[1];\n}\nexport default function (_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}","import tree_add, { addAll as tree_addAll } from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, { defaultX } from \"./x.js\";\nimport tree_y, { defaultY } from \"./y.js\";\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(4)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(4)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function (radius) {\n  var nodes,\n      radii,\n      strength = 1,\n      iterations = 1;\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i,\n        n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data,\n          rj = quad.r,\n          r = ri + rj;\n\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n\n          if (l < r * r) {\n            if (x === 0) x = jiggle(), l += x * x;\n            if (y === 0) y = jiggle(), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n\n        return;\n      }\n\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    radii = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}","import Quad from \"./quad.js\";\nexport default function (x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n    // Stop searching if this quadrant can’t contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (y1 = q.y0) > y3 || (x2 = q.x1) < x0 || (y2 = q.y1) < y0) continue; // Bisect the current quadrant.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n      quads.push(new Quad(node[3], xm, ym, x2, y2), new Quad(node[2], x1, ym, xm, y2), new Quad(node[1], xm, y1, x2, ym), new Quad(node[0], x1, y1, xm, ym)); // Visit the closest quadrant first.\n\n      if (i = (y >= ym) << 1 | x >= xm) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n        var dx = x - +this._x.call(null, node.data),\n            dy = y - +this._y.call(null, node.data),\n            d2 = dx * dx + dy * dy;\n\n        if (d2 < radius) {\n          var d = Math.sqrt(radius = d2);\n          x0 = x - d, y0 = y - d;\n          x3 = x + d, y3 = y + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 3] || parent[i + 2 & 3] || parent[i + 3 & 3]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3]) && node === (parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      y0,\n      x1,\n      y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n\n  return this;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      next = [],\n      q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          y0 = q.y0,\n          x1 = q.x1,\n          y1 = q.y1,\n          xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n\n  return this;\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { map } from \"d3-collection\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"missing: \" + nodeId);\n  return node;\n}\n\nexport default function (links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      iterations = 1;\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle();\n        y = target.y + target.vy - source.y - source.vy || jiggle();\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = map(nodes, id),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.links = function (_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function (_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function (_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}","var noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _ || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { dispatch } from \"d3-dispatch\";\nimport { map } from \"d3-collection\";\nimport { timer } from \"d3-timer\";\nexport function x(d) {\n  return d.x;\n}\nexport function y(d) {\n  return d.y;\n}\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\nexport default function (_nodes) {\n  var simulation,\n      _alpha = 1,\n      _alphaMin = 0.001,\n      _alphaDecay = 1 - Math.pow(_alphaMin, 1 / 300),\n      _alphaTarget = 0,\n      _velocityDecay = 0.6,\n      forces = map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (_nodes == null) _nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n\n    if (_alpha < _alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i,\n        n = _nodes.length,\n        node;\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      _alpha += (_alphaTarget - _alpha) * _alphaDecay;\n      forces.each(function (force) {\n        force(_alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        if (node.fx == null) node.x += node.vx *= _velocityDecay;else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= _velocityDecay;else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = _nodes.length, node; i < n; ++i) {\n      node = _nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(i),\n            angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(_nodes);\n    return force;\n  }\n\n  initializeNodes();\n  return simulation = {\n    tick: tick,\n    restart: function restart() {\n      return stepper.restart(step), simulation;\n    },\n    stop: function stop() {\n      return stepper.stop(), simulation;\n    },\n    nodes: function nodes(_) {\n      return arguments.length ? (_nodes = _, initializeNodes(), forces.each(initializeForce), simulation) : _nodes;\n    },\n    alpha: function alpha(_) {\n      return arguments.length ? (_alpha = +_, simulation) : _alpha;\n    },\n    alphaMin: function alphaMin(_) {\n      return arguments.length ? (_alphaMin = +_, simulation) : _alphaMin;\n    },\n    alphaDecay: function alphaDecay(_) {\n      return arguments.length ? (_alphaDecay = +_, simulation) : +_alphaDecay;\n    },\n    alphaTarget: function alphaTarget(_) {\n      return arguments.length ? (_alphaTarget = +_, simulation) : _alphaTarget;\n    },\n    velocityDecay: function velocityDecay(_) {\n      return arguments.length ? (_velocityDecay = 1 - _, simulation) : 1 - _velocityDecay;\n    },\n    force: function force(name, _) {\n      return arguments.length > 1 ? (_ == null ? forces.remove(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);\n    },\n    find: function find(x, y, radius) {\n      var i = 0,\n          n = _nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n      if (radius == null) radius = Infinity;else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n    on: function on(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}","import constant from \"./constant\";\nimport jiggle from \"./jiggle\";\nimport { quadtree } from \"d3-quadtree\";\nimport { x, y } from \"./simulation\";\nexport default function () {\n  var nodes,\n      node,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree = quadtree(nodes, x, y).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) {\n      node = nodes[i], tree.visit(apply);\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        node;\n    strengths = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n    }\n  }\n\n  function accumulate(quad) {\n    var strength = 0,\n        q,\n        c,\n        weight = 0,\n        x,\n        y,\n        i; // For internal nodes, accumulate forces from child quadrants.\n\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n\n      quad.x = x / weight;\n      quad.y = y / weight;\n    } // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n        q = quad;\n        q.x = q.data.x;\n        q.y = q.data.y;\n\n        do {\n          strength += strengths[q.data.index];\n        } while (q = q.next);\n      }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y; // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(), l += x * x;\n        if (y === 0) y = jiggle(), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n\n      return true;\n    } // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return; // Limit forces for very close nodes; randomize direction if coincident.\n\n\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(), l += x * x;\n      if (y === 0) y = jiggle(), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do {\n      if (quad.data !== node) {\n        w = strengths[quad.data.index] * alpha / l;\n        node.vx += x * w;\n        node.vy += y * w;\n      }\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function (_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function (_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function (_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (radius, x, y) {\n  var nodes,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = node.y - y || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      node.vy += dy * k;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _, initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}","import constant from \"./constant\";\nexport default function (y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? We’re done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","export var slice = Array.prototype.slice;","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import { path } from \"d3-path\";\nimport { slice } from \"../array.js\";\nimport constant from \"../constant.js\";\nimport { x as pointX, y as pointY } from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer,\n        argv = slice.call(arguments),\n        s = source.apply(this, argv),\n        t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function (_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function (_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\nexport function linkVertical() {\n  return link(curveVertical);\n}\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar overrideAll = require('plotly.js/src/plot_api/edit_types').overrideAll;\nvar getModuleCalcData = require('plotly.js/src/plots/get_data').getModuleCalcData;\nvar plot = require('./plot');\nvar fxAttrs = require('plotly.js/src/components/fx/layout_attributes');\n\nvar setCursor = require('plotly.js/src/lib/setcursor');\nvar dragElement = require('plotly.js/src/components/dragelement');\nvar prepSelect = require('plotly.js/src/plots/cartesian/select').prepSelect;\nvar Lib = require('plotly.js/src/lib');\nvar Registry = require('plotly.js/src/registry');\n\nvar SANKEY = 'sankey';\n\nexports.name = SANKEY;\n\nexports.baseLayoutAttrOverrides = overrideAll({\n  hoverlabel: fxAttrs.hoverlabel\n}, 'plot', 'nested');\n\nexports.plot = function (gd) {\n  var calcData = getModuleCalcData(gd.calcdata, SANKEY)[0];\n  plot(gd, calcData);\n  exports.updateFx(gd);\n};\n\nexports.clean = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var hadPlot = (oldFullLayout._has && oldFullLayout._has(SANKEY));\n  var hasPlot = (newFullLayout._has && newFullLayout._has(SANKEY));\n\n  if (hadPlot && !hasPlot) {\n    oldFullLayout._paperdiv.selectAll('.sankey').remove();\n    oldFullLayout._paperdiv.selectAll('.bgsankey').remove();\n  }\n};\n\nexports.updateFx = function (gd) {\n  for (var i = 0; i < gd._fullData.length; i++) {\n    subplotUpdateFx(gd, i);\n  }\n};\n\nfunction subplotUpdateFx(gd, index) {\n  var trace = gd._fullData[index];\n  var fullLayout = gd._fullLayout;\n\n  var dragMode = fullLayout.dragmode;\n  var cursor = fullLayout.dragmode === 'pan' ? 'move' : 'crosshair';\n  var bgRect = trace._bgRect;\n\n  if (dragMode === 'pan' || dragMode === 'zoom') return;\n\n  setCursor(bgRect, cursor);\n\n  var xaxis = {\n    _id: 'x',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateX,\n    _length: trace._sankey.width\n  };\n  var yaxis = {\n    _id: 'y',\n    c2p: Lib.identity,\n    _offset: trace._sankey.translateY,\n    _length: trace._sankey.height\n  };\n\n  // Note: dragOptions is needed to be declared for all dragmodes because\n  // it's the object that holds persistent selection state.\n  var dragOptions = {\n    gd: gd,\n    element: bgRect.node(),\n    plotinfo: {\n      id: index,\n      xaxis: xaxis,\n      yaxis: yaxis,\n      fillRangeItems: Lib.noop\n    },\n    subplot: index,\n    // create mock x/y axes for hover routine\n    xaxes: [xaxis],\n    yaxes: [yaxis],\n    doneFnCompleted: function (selection) {\n      var traceNow = gd._fullData[index];\n      var newGroups;\n      var oldGroups = traceNow.node.groups.slice();\n      var newGroup = [];\n\n      function findNode(pt) {\n        var nodes = traceNow._sankey.graph.nodes;\n        for (var i = 0; i < nodes.length; i++) {\n          if (nodes[i].pointNumber === pt) return nodes[i];\n        }\n      }\n\n      for (var j = 0; j < selection.length; j++) {\n        var node = findNode(selection[j].pointNumber);\n        if (!node) continue;\n\n        // If the node represents a group\n        if (node.group) {\n          // Add all its children to the current selection\n          for (var k = 0; k < node.childrenNodes.length; k++) {\n            newGroup.push(node.childrenNodes[k].pointNumber);\n          }\n          // Flag group for removal from existing list of groups\n          oldGroups[node.pointNumber - traceNow.node._count] = false;\n        } else {\n          newGroup.push(node.pointNumber);\n        }\n      }\n\n      newGroups = oldGroups\n        .filter(Boolean)\n        .concat([newGroup]);\n\n      Registry.call('_guiRestyle', gd, {\n        'node.groups': [newGroups]\n      }, index);\n    }\n  };\n\n  dragOptions.prepFn = function (e, startX, startY) {\n    prepSelect(e, startX, startY, dragOptions, dragMode);\n  };\n\n  dragElement.init(dragOptions);\n}\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = function selectPoints(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var selection = [];\n  var fullData = cd[0].trace;\n  var nodes = fullData._sankey.graph.nodes;\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.partOfGroup) continue; // Those are invisible\n    // Position of node's centroid\n\n    var pos = [(node.x0 + node.x1) / 2, (node.y0 + node.y1) / 2]; // Swap x and y if trace is vertical\n\n    if (fullData.orientation === 'v') pos.reverse();\n\n    if (selectionTester && selectionTester.contains(pos, false, i, searchInfo)) {\n      selection.push({\n        pointNumber: node.pointNumber // TODO: add eventData\n\n      });\n    }\n  }\n\n  return selection;\n};","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","export default function (x) {\n  return x === null ? NaN : +x;\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","export default function (values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}","import number from \"./number\";\nexport default function (values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;else --m;\n    }\n  } else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  } else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}","import transpose from \"./transpose\";\nexport default function () {\n  return transpose(arguments);\n}","import { min, ascending, max, mean, sum } from 'd3-array';\nimport { map, nest } from 'd3-collection';\nimport { linkHorizontal } from 'd3-shape';\nimport findCircuits from 'elementary-circuits-directed-graph'; // For a given link, return the target node's depth\n\nfunction targetDepth(d) {\n  return d.target.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'left'\n\n\nfunction left(node) {\n  return node.depth;\n} // The depth of a node when the nodeAlign (align) is set to 'right'\n\n\nfunction right(node, n) {\n  return n - 1 - node.height;\n} // The depth of a node when the nodeAlign (align) is set to 'justify'\n\n\nfunction justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n} // The depth of a node when the nodeAlign (align) is set to 'center'\n\n\nfunction center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n} // returns a function, using the parameter given to the sankey setting\n\n\nfunction constant(x) {\n  return function () {\n    return x;\n  };\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; /// https://github.com/tomshanley/d3-sankeyCircular-circular\n// sort links' breadth (ie top to bottom in a column), based on their source nodes' breadths\n\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n} // sort links' breadth (ie top to bottom in a column), based on their target nodes' breadths\n\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n} // sort nodes' breadth (ie top to bottom in a column)\n// if both nodes have circular links, or both don't have circular links, then sort by the top (y0) of the node\n// else push nodes that have top circular links to the top, and nodes that have bottom circular links to the bottom\n\n\nfunction ascendingBreadth(a, b) {\n  if (a.partOfCycle === b.partOfCycle) {\n    return a.y0 - b.y0;\n  } else {\n    if (a.circularLinkType === 'top' || b.circularLinkType === 'bottom') {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n} // return the value of a node or link\n\n\nfunction value(d) {\n  return d.value;\n} // return the vertical center of a node\n\n\nfunction nodeCenter(node) {\n  return (node.y0 + node.y1) / 2;\n} // return the vertical center of a link's source node\n\n\nfunction linkSourceCenter(link) {\n  return nodeCenter(link.source);\n} // return the vertical center of a link's target node\n\n\nfunction linkTargetCenter(link) {\n  return nodeCenter(link.target);\n} // Return the default value for ID for node, d.index\n\n\nfunction defaultId(d) {\n  return d.index;\n} // Return the default object the graph's nodes, graph.nodes\n\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n} // Return the default object the graph's nodes, graph.links\n\n\nfunction defaultLinks(graph) {\n  return graph.links;\n} // Return the node from the collection that matches the provided ID, or throw an error if no match\n\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error('missing: ' + id);\n  return node;\n}\n\nfunction getNodeID(node, id) {\n  return id(node);\n} // The main sankeyCircular functions\n// Some constants for circular link calculations\n\n\nvar verticalMargin = 25;\nvar baseRadius = 10;\nvar scale = 0.3; //Possibly let user control this, although anything over 0.5 starts to get too cramped\n\nfunction sankeyCircular() {\n  // Set the default values\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      // extent\n  dx = 24,\n      // nodeWidth\n  py,\n      // nodePadding, for vertical postioning\n  id = defaultId,\n      align = justify,\n      nodes = defaultNodes,\n      links = defaultLinks,\n      iterations = 32,\n      circularLinkGap = 2,\n      paddingRatio,\n      sortNodes = null;\n\n  function sankeyCircular() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments) // Process the graph's nodes and links, setting their positions\n      // 1.  Associate the nodes with their respective links, and vice versa\n\n    };\n    computeNodeLinks(graph); // 2.  Determine which links result in a circular path in the graph\n\n    identifyCircles(graph, id, sortNodes); // 4. Calculate the nodes' values, based on the values of the incoming and outgoing links\n\n    computeNodeValues(graph); // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n\n    computeNodeDepths(graph); // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n\n    computeNodeBreadths(graph, iterations, id);\n    computeLinkBreadths(graph); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n\n    var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n\n    for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n      resolveNodeLinkOverlaps(graph, y0, y1, id);\n      sortSourceLinks(graph, y1, id);\n      sortTargetLinks(graph, y1, id);\n    } // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n\n\n    fillHeight(graph, y0, y1); // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  } // end of sankeyCircular function\n  // Set the sankeyCircular parameters\n  // nodeID, nodeAlign, nodeWidth, nodePadding, nodes, links, size, extent, iterations, nodePaddingRatio, circularLinkGap\n\n\n  sankeyCircular.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : id;\n  };\n\n  sankeyCircular.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : align;\n  };\n\n  sankeyCircular.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankeyCircular) : dx;\n  };\n\n  sankeyCircular.nodePadding = function (_) {\n    return arguments.length ? (py = +_, sankeyCircular) : py;\n  };\n\n  sankeyCircular.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : nodes;\n  };\n\n  sankeyCircular.links = function (_) {\n    return arguments.length ? (links = typeof _ === 'function' ? _ : constant(_), sankeyCircular) : links;\n  };\n\n  sankeyCircular.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankeyCircular) : [x1 - x0, y1 - y0];\n  };\n\n  sankeyCircular.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankeyCircular) : [[x0, y0], [x1, y1]];\n  };\n\n  sankeyCircular.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankeyCircular) : iterations;\n  };\n\n  sankeyCircular.circularLinkGap = function (_) {\n    return arguments.length ? (circularLinkGap = +_, sankeyCircular) : circularLinkGap;\n  };\n\n  sankeyCircular.nodePaddingRatio = function (_) {\n    return arguments.length ? (paddingRatio = +_, sankeyCircular) : paddingRatio;\n  };\n\n  sankeyCircular.sortNodes = function (_) {\n    return arguments.length ? (sortNodes = _, sankeyCircular) : sortNodes;\n  };\n\n  sankeyCircular.update = function (graph) {\n    // 5.  Calculate the nodes' depth based on the incoming and outgoing links\n    //     Sets the nodes':\n    //     - depth:  the depth in the graph\n    //     - column: the depth (0, 1, 2, etc), as is relates to visual position from left to right\n    //     - x0, x1: the x coordinates, as is relates to visual position from left to right\n    // computeNodeDepths(graph)\n    // 3.  Determine how the circular links will be drawn,\n    //     either travelling back above the main chart (\"top\")\n    //     or below the main chart (\"bottom\")\n    selectCircularLinkTypes(graph, id); // 6.  Calculate the nodes' and links' vertical position within their respective column\n    //     Also readjusts sankeyCircular size if circular links are needed, and node x's\n    // computeNodeBreadths(graph, iterations, id)\n\n    computeLinkBreadths(graph); // Force position of circular link type based on position\n\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        link.circularLinkType = link.y0 + link.y1 < y1 ? 'top' : 'bottom';\n        link.source.circularLinkType = link.circularLinkType;\n        link.target.circularLinkType = link.circularLinkType;\n      }\n    });\n    sortSourceLinks(graph, y1, id, false); // Sort links but do not move nodes\n\n    sortTargetLinks(graph, y1, id); // 7.  Sort links per node, based on the links' source/target nodes' breadths\n    // 8.  Adjust nodes that overlap links that span 2+ columns\n    // var linkSortingIterations = 4; //Possibly let user control this number, like the iterations over node placement\n    // for (var iteration = 0; iteration < linkSortingIterations; iteration++) {\n    //\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //   resolveNodeLinkOverlaps(graph, y0, y1, id)\n    //   sortSourceLinks(graph, y1, id)\n    //   sortTargetLinks(graph, y1, id)\n    //\n    // }\n    // 8.1  Adjust node and link positions back to fill height of chart area if compressed\n    // fillHeight(graph, y0, y1)\n    // 9. Calculate visually appealling path for the circular paths, and create the \"d\" string\n\n    addCircularPathData(graph, circularLinkGap, y1, id);\n    return graph;\n  }; // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n\n\n  function computeNodeLinks(graph) {\n    graph.nodes.forEach(function (node, i) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    var nodeById = map(graph.nodes, id);\n    graph.links.forEach(function (link, i) {\n      link.index = i;\n      var source = link.source;\n      var target = link.target;\n\n      if ((typeof source === \"undefined\" ? \"undefined\" : _typeof(source)) !== 'object') {\n        source = link.source = find(nodeById, source);\n      }\n\n      if ((typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) !== 'object') {\n        target = link.target = find(nodeById, target);\n      }\n\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n    return graph;\n  } // Compute the value (size) and cycleness of each node by summing the associated links.\n\n\n  function computeNodeValues(graph) {\n    graph.nodes.forEach(function (node) {\n      node.partOfCycle = false;\n      node.value = Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value));\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          node.partOfCycle = true;\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    });\n  }\n\n  function getCircleMargins(graph) {\n    var totalTopLinksWidth = 0,\n        totalBottomLinksWidth = 0,\n        totalRightLinksWidth = 0,\n        totalLeftLinksWidth = 0;\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    graph.links.forEach(function (link) {\n      if (link.circular) {\n        if (link.circularLinkType == 'top') {\n          totalTopLinksWidth = totalTopLinksWidth + link.width;\n        } else {\n          totalBottomLinksWidth = totalBottomLinksWidth + link.width;\n        }\n\n        if (link.target.column == 0) {\n          totalLeftLinksWidth = totalLeftLinksWidth + link.width;\n        }\n\n        if (link.source.column == maxColumn) {\n          totalRightLinksWidth = totalRightLinksWidth + link.width;\n        }\n      }\n    }); //account for radius of curves and padding between links\n\n    totalTopLinksWidth = totalTopLinksWidth > 0 ? totalTopLinksWidth + verticalMargin + baseRadius : totalTopLinksWidth;\n    totalBottomLinksWidth = totalBottomLinksWidth > 0 ? totalBottomLinksWidth + verticalMargin + baseRadius : totalBottomLinksWidth;\n    totalRightLinksWidth = totalRightLinksWidth > 0 ? totalRightLinksWidth + verticalMargin + baseRadius : totalRightLinksWidth;\n    totalLeftLinksWidth = totalLeftLinksWidth > 0 ? totalLeftLinksWidth + verticalMargin + baseRadius : totalLeftLinksWidth;\n    return {\n      \"top\": totalTopLinksWidth,\n      \"bottom\": totalBottomLinksWidth,\n      \"left\": totalLeftLinksWidth,\n      \"right\": totalRightLinksWidth\n    };\n  } // Update the x0, y0, x1 and y1 for the sankeyCircular, to allow space for any circular links\n\n\n  function scaleSankeySize(graph, margin) {\n    var maxColumn = max(graph.nodes, function (node) {\n      return node.column;\n    });\n    var currentWidth = x1 - x0;\n    var currentHeight = y1 - y0;\n    var newWidth = currentWidth + margin.right + margin.left;\n    var newHeight = currentHeight + margin.top + margin.bottom;\n    var scaleX = currentWidth / newWidth;\n    var scaleY = currentHeight / newHeight;\n    x0 = x0 * scaleX + margin.left;\n    x1 = margin.right == 0 ? x1 : x1 * scaleX;\n    y0 = y0 * scaleY + margin.top;\n    y1 = y1 * scaleY;\n    graph.nodes.forEach(function (node) {\n      node.x0 = x0 + node.column * ((x1 - x0 - dx) / maxColumn);\n      node.x1 = node.x0 + dx;\n    });\n    return scaleY;\n  } // Iteratively assign the depth for each node.\n  // Nodes are assigned the maximum depth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned depth zero, while\n  // nodes with no outgoing links are assigned the maximum depth.\n\n\n  function computeNodeDepths(graph) {\n    var nodes, next, x;\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.depth = x;\n        node.sourceLinks.forEach(function (link) {\n          if (next.indexOf(link.target) < 0 && !link.circular) {\n            next.push(link.target);\n          }\n        });\n      });\n    }\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function (node) {\n        node.height = x;\n        node.targetLinks.forEach(function (link) {\n          if (next.indexOf(link.source) < 0 && !link.circular) {\n            next.push(link.source);\n          }\n        });\n      });\n    } // assign column numbers, and get max value\n\n\n    graph.nodes.forEach(function (node) {\n      node.column = Math.floor(align.call(null, node, x));\n    });\n  } // Assign nodes' breadths, and then shift nodes that overlap (resolveCollisions)\n\n\n  function computeNodeBreadths(graph, iterations, id) {\n    var columns = nest().key(function (d) {\n      return d.column;\n    }).sortKeys(ascending).entries(graph.nodes).map(function (d) {\n      return d.values;\n    });\n    initializeNodeBreadth(id);\n    resolveCollisions();\n\n    for (var alpha = 1, n = iterations; n > 0; --n) {\n      relaxLeftAndRight(alpha *= 0.99, id);\n      resolveCollisions();\n    }\n\n    function initializeNodeBreadth(id) {\n      //override py if nodePadding has been set\n      if (paddingRatio) {\n        var padding = Infinity;\n        columns.forEach(function (nodes) {\n          var thisPadding = y1 * paddingRatio / (nodes.length + 1);\n          padding = thisPadding < padding ? thisPadding : padding;\n        });\n        py = padding;\n      }\n\n      var ky = min(columns, function (nodes) {\n        return (y1 - y0 - (nodes.length - 1) * py) / sum(nodes, value);\n      }); //calculate the widths of the links\n\n      ky = ky * scale;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      }); //determine how much to scale down the chart, based on circular links\n\n      var margin = getCircleMargins(graph);\n      var ratio = scaleSankeySize(graph, margin); //re-calculate widths\n\n      ky = ky * ratio;\n      graph.links.forEach(function (link) {\n        link.width = link.value * ky;\n      });\n      columns.forEach(function (nodes) {\n        var nodesLength = nodes.length;\n        nodes.forEach(function (node, i) {\n          if (node.depth == columns.length - 1 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.depth == 0 && nodesLength == 1) {\n            node.y0 = y1 / 2 - node.value * ky;\n            node.y1 = node.y0 + node.value * ky;\n          } else if (node.partOfCycle) {\n            if (numberOfNonSelfLinkingCycles(node, id) == 0) {\n              node.y0 = y1 / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else if (node.circularLinkType == 'top') {\n              node.y0 = y0 + i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = y1 - node.value * ky - i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          } else {\n            if (margin.top == 0 || margin.bottom == 0) {\n              node.y0 = (y1 - y0) / nodesLength * i;\n              node.y1 = node.y0 + node.value * ky;\n            } else {\n              node.y0 = (y1 - y0) / 2 - nodesLength / 2 + i;\n              node.y1 = node.y0 + node.value * ky;\n            }\n          }\n        });\n      });\n    } // For each node in each column, check the node's vertical position in relation to its targets and sources vertical position\n    // and shift up/down to be closer to the vertical middle of those targets and sources\n\n\n    function relaxLeftAndRight(alpha, id) {\n      var columnsLength = columns.length;\n      columns.forEach(function (nodes) {\n        var n = nodes.length;\n        var depth = nodes[0].depth;\n        nodes.forEach(function (node) {\n          // check the node is not an orphan\n          var nodeHeight;\n\n          if (node.sourceLinks.length || node.targetLinks.length) {\n            if (node.partOfCycle && numberOfNonSelfLinkingCycles(node, id) > 0) ;else if (depth == 0 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else if (depth == columnsLength - 1 && n == 1) {\n              nodeHeight = node.y1 - node.y0;\n              node.y0 = y1 / 2 - nodeHeight / 2;\n              node.y1 = y1 / 2 + nodeHeight / 2;\n            } else {\n              var avg = 0;\n              var avgTargetY = mean(node.sourceLinks, linkTargetCenter);\n              var avgSourceY = mean(node.targetLinks, linkSourceCenter);\n\n              if (avgTargetY && avgSourceY) {\n                avg = (avgTargetY + avgSourceY) / 2;\n              } else {\n                avg = avgTargetY || avgSourceY;\n              }\n\n              var dy = (avg - nodeCenter(node)) * alpha; // positive if it node needs to move down\n\n              node.y0 += dy;\n              node.y1 += dy;\n            }\n          }\n        });\n      });\n    } // For each column, check if nodes are overlapping, and if so, shift up/down\n\n\n    function resolveCollisions() {\n      columns.forEach(function (nodes) {\n        var node,\n            dy,\n            y = y0,\n            n = nodes.length,\n            i; // Push any overlapping nodes down.\n\n        nodes.sort(ascendingBreadth);\n\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y - node.y0;\n\n          if (dy > 0) {\n            node.y0 += dy;\n            node.y1 += dy;\n          }\n\n          y = node.y1 + py;\n        } // If the bottommost node goes outside the bounds, push it back up.\n\n\n        dy = y - py - y1;\n\n        if (dy > 0) {\n          y = node.y0 -= dy, node.y1 -= dy; // Push any overlapping nodes back up.\n\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y1 + py - y;\n            if (dy > 0) node.y0 -= dy, node.y1 -= dy;\n            y = node.y0;\n          }\n        }\n      });\n    }\n  } // Assign the links y0 and y1 based on source/target nodes position,\n  // plus the link's relative position to other links to the same node\n\n\n  function computeLinkBreadths(graph) {\n    graph.nodes.forEach(function (node) {\n      node.sourceLinks.sort(ascendingTargetBreadth);\n      node.targetLinks.sort(ascendingSourceBreadth);\n    });\n    graph.nodes.forEach(function (node) {\n      var y0 = node.y0;\n      var y1 = y0; // start from the bottom of the node for cycle links\n\n      var y0cycle = node.y1;\n      var y1cycle = y0cycle;\n      node.sourceLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y0 = y0cycle - link.width / 2;\n          y0cycle = y0cycle - link.width;\n        } else {\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      });\n      node.targetLinks.forEach(function (link) {\n        if (link.circular) {\n          link.y1 = y1cycle - link.width / 2;\n          y1cycle = y1cycle - link.width;\n        } else {\n          link.y1 = y1 + link.width / 2;\n          y1 += link.width;\n        }\n      });\n    });\n  }\n\n  return sankeyCircular;\n} /// /////////////////////////////////////////////////////////////////////////////////\n// Cycle functions\n// portion of code to detect circular links based on Colin Fergus' bl.ock https://gist.github.com/cfergus/3956043\n// Identify circles in the link objects\n\n\nfunction identifyCircles(graph, id, sortNodes) {\n  var circularLinkID = 0;\n\n  if (sortNodes === null) {\n    // Building adjacency graph\n    var adjList = [];\n\n    for (var i = 0; i < graph.links.length; i++) {\n      var link = graph.links[i];\n      var source = link.source.index;\n      var target = link.target.index;\n      if (!adjList[source]) adjList[source] = [];\n      if (!adjList[target]) adjList[target] = []; // Add links if not already in set\n\n      if (adjList[source].indexOf(target) === -1) adjList[source].push(target);\n    } // Find all elementary circuits\n\n\n    var cycles = findCircuits(adjList); // Sort by circuits length\n\n    cycles.sort(function (a, b) {\n      return a.length - b.length;\n    });\n    var circularLinks = {};\n\n    for (i = 0; i < cycles.length; i++) {\n      var cycle = cycles[i];\n      var last = cycle.slice(-2);\n      if (!circularLinks[last[0]]) circularLinks[last[0]] = {};\n      circularLinks[last[0]][last[1]] = true;\n    }\n\n    graph.links.forEach(function (link) {\n      var target = link.target.index;\n      var source = link.source.index; // If self-linking or a back-edge\n\n      if (target === source || circularLinks[source] && circularLinks[source][target]) {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      } else {\n        link.circular = false;\n      }\n    });\n  } else {\n    graph.links.forEach(function (link) {\n      if (link.source[sortNodes] < link.target[sortNodes]) {\n        link.circular = false;\n      } else {\n        link.circular = true;\n        link.circularLinkID = circularLinkID;\n        circularLinkID = circularLinkID + 1;\n      }\n    });\n  }\n} // Assign a circular link type (top or bottom), based on:\n// - if the source/target node already has circular links, then use the same type\n// - if not, choose the type with fewer links\n\n\nfunction selectCircularLinkTypes(graph, id) {\n  var numberOfTops = 0;\n  var numberOfBottoms = 0;\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      // if either souce or target has type already use that\n      if (link.source.circularLinkType || link.target.circularLinkType) {\n        // default to source type if available\n        link.circularLinkType = link.source.circularLinkType ? link.source.circularLinkType : link.target.circularLinkType;\n      } else {\n        link.circularLinkType = numberOfTops < numberOfBottoms ? 'top' : 'bottom';\n      }\n\n      if (link.circularLinkType == 'top') {\n        numberOfTops = numberOfTops + 1;\n      } else {\n        numberOfBottoms = numberOfBottoms + 1;\n      }\n\n      graph.nodes.forEach(function (node) {\n        if (getNodeID(node, id) == getNodeID(link.source, id) || getNodeID(node, id) == getNodeID(link.target, id)) {\n          node.circularLinkType = link.circularLinkType;\n        }\n      });\n    }\n  }); //correct self-linking links to be same direction as node\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      //if both source and target node are same type, then link should have same type\n      if (link.source.circularLinkType == link.target.circularLinkType) {\n        link.circularLinkType = link.source.circularLinkType;\n      } //if link is selflinking, then link should have same type as node\n\n\n      if (selfLinking(link, id)) {\n        link.circularLinkType = link.source.circularLinkType;\n      }\n    }\n  });\n} // Return the angle between a straight line between the source and target of the link, and the vertical plane of the node\n\n\nfunction linkAngle(link) {\n  var adjacent = Math.abs(link.y1 - link.y0);\n  var opposite = Math.abs(link.target.x0 - link.source.x1);\n  return Math.atan(opposite / adjacent);\n} // Check if two circular links potentially overlap\n\n\nfunction circularLinksCross(link1, link2) {\n  if (link1.source.column < link2.target.column) {\n    return false;\n  } else if (link1.target.column > link2.source.column) {\n    return false;\n  } else {\n    return true;\n  }\n} // Return the number of circular links for node, not including self linking links\n\n\nfunction numberOfNonSelfLinkingCycles(node, id) {\n  var sourceCount = 0;\n  node.sourceLinks.forEach(function (l) {\n    sourceCount = l.circular && !selfLinking(l, id) ? sourceCount + 1 : sourceCount;\n  });\n  var targetCount = 0;\n  node.targetLinks.forEach(function (l) {\n    targetCount = l.circular && !selfLinking(l, id) ? targetCount + 1 : targetCount;\n  });\n  return sourceCount + targetCount;\n} // Check if a circular link is the only circular link for both its source and target node\n\n\nfunction onlyCircularLink(link) {\n  var nodeSourceLinks = link.source.sourceLinks;\n  var sourceCount = 0;\n  nodeSourceLinks.forEach(function (l) {\n    sourceCount = l.circular ? sourceCount + 1 : sourceCount;\n  });\n  var nodeTargetLinks = link.target.targetLinks;\n  var targetCount = 0;\n  nodeTargetLinks.forEach(function (l) {\n    targetCount = l.circular ? targetCount + 1 : targetCount;\n  });\n\n  if (sourceCount > 1 || targetCount > 1) {\n    return false;\n  } else {\n    return true;\n  }\n} // creates vertical buffer values per set of top/bottom links\n\n\nfunction calcVerticalBuffer(links, circularLinkGap, id) {\n  links.sort(sortLinkColumnAscending);\n  links.forEach(function (link, i) {\n    var buffer = 0;\n\n    if (selfLinking(link, id) && onlyCircularLink(link)) {\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    } else {\n      var j = 0;\n\n      for (j; j < i; j++) {\n        if (circularLinksCross(links[i], links[j])) {\n          var bufferOverThisLink = links[j].circularPathData.verticalBuffer + links[j].width / 2 + circularLinkGap;\n          buffer = bufferOverThisLink > buffer ? bufferOverThisLink : buffer;\n        }\n      }\n\n      link.circularPathData.verticalBuffer = buffer + link.width / 2;\n    }\n  });\n  return links;\n} // calculate the optimum path for a link to reduce overlaps\n\n\nfunction addCircularPathData(graph, circularLinkGap, y1, id) {\n  //var baseRadius = 10\n  var buffer = 5; //var verticalMargin = 25\n\n  var minY = min(graph.links, function (link) {\n    return link.source.y0;\n  }); // create object for circular Path Data\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData = {};\n    }\n  }); // calc vertical offsets per top/bottom links\n\n  var topLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'top';\n  });\n  /* topLinks = */\n\n  calcVerticalBuffer(topLinks, circularLinkGap, id);\n  var bottomLinks = graph.links.filter(function (l) {\n    return l.circularLinkType == 'bottom';\n  });\n  /* bottomLinks = */\n\n  calcVerticalBuffer(bottomLinks, circularLinkGap, id); // add the base data for each link\n\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      link.circularPathData.arcRadius = link.width + baseRadius;\n      link.circularPathData.leftNodeBuffer = buffer;\n      link.circularPathData.rightNodeBuffer = buffer;\n      link.circularPathData.sourceWidth = link.source.x1 - link.source.x0;\n      link.circularPathData.sourceX = link.source.x0 + link.circularPathData.sourceWidth;\n      link.circularPathData.targetX = link.target.x0;\n      link.circularPathData.sourceY = link.y0;\n      link.circularPathData.targetY = link.y1; // for self linking paths, and that the only circular link in/out of that node\n\n      if (selfLinking(link, id) && onlyCircularLink(link)) {\n        link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2;\n        link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2;\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = link.source.y1 + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = link.source.y0 - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } else {\n        // else calculate normally\n        // add left extent coordinates, based on links with same source column and circularLink type\n        var thisColumn = link.source.column;\n        var thisCircularLinkType = link.circularLinkType;\n        var sameColumnLinks = graph.links.filter(function (l) {\n          return l.source.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkSourceYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkSourceYAscending);\n        }\n\n        var radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.leftSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.leftLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // add right extent coordinates, based on links with same target column and circularLink type\n\n        thisColumn = link.target.column;\n        sameColumnLinks = graph.links.filter(function (l) {\n          return l.target.column == thisColumn && l.circularLinkType == thisCircularLinkType;\n        });\n\n        if (link.circularLinkType == 'bottom') {\n          sameColumnLinks.sort(sortLinkTargetYDescending);\n        } else {\n          sameColumnLinks.sort(sortLinkTargetYAscending);\n        }\n\n        radiusOffset = 0;\n        sameColumnLinks.forEach(function (l, i) {\n          if (l.circularLinkID == link.circularLinkID) {\n            link.circularPathData.rightSmallArcRadius = baseRadius + link.width / 2 + radiusOffset;\n            link.circularPathData.rightLargeArcRadius = baseRadius + link.width / 2 + i * circularLinkGap + radiusOffset;\n          }\n\n          radiusOffset = radiusOffset + l.width;\n        }); // bottom links\n\n        if (link.circularLinkType == 'bottom') {\n          link.circularPathData.verticalFullExtent = Math.max(y1, link.source.y1, link.target.y1) + verticalMargin + link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent - link.circularPathData.rightLargeArcRadius;\n        } else {\n          // top links\n          link.circularPathData.verticalFullExtent = minY - verticalMargin - link.circularPathData.verticalBuffer;\n          link.circularPathData.verticalLeftInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.leftLargeArcRadius;\n          link.circularPathData.verticalRightInnerExtent = link.circularPathData.verticalFullExtent + link.circularPathData.rightLargeArcRadius;\n        }\n      } // all links\n\n\n      link.circularPathData.leftInnerExtent = link.circularPathData.sourceX + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightInnerExtent = link.circularPathData.targetX - link.circularPathData.rightNodeBuffer;\n      link.circularPathData.leftFullExtent = link.circularPathData.sourceX + link.circularPathData.leftLargeArcRadius + link.circularPathData.leftNodeBuffer;\n      link.circularPathData.rightFullExtent = link.circularPathData.targetX - link.circularPathData.rightLargeArcRadius - link.circularPathData.rightNodeBuffer;\n    }\n\n    if (link.circular) {\n      link.path = createCircularPathString(link);\n    } else {\n      var normalPath = linkHorizontal().source(function (d) {\n        var x = d.source.x0 + (d.source.x1 - d.source.x0);\n        var y = d.y0;\n        return [x, y];\n      }).target(function (d) {\n        var x = d.target.x0;\n        var y = d.y1;\n        return [x, y];\n      });\n      link.path = normalPath(link);\n    }\n  });\n} // create a d path using the addCircularPathData\n\n\nfunction createCircularPathString(link) {\n  var pathString = ''; // 'pathData' is assigned a value but never used\n  // var pathData = {}\n\n  if (link.circularLinkType == 'top') {\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY - link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line up to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line down\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY - link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 0 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  } else {\n    // bottom path\n    pathString = // start at the right of the source node\n    'M' + link.circularPathData.sourceX + ' ' + link.circularPathData.sourceY + ' ' + // line right to buffer point\n    'L' + link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.sourceY + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftFullExtent + ' ' + (link.circularPathData.sourceY + link.circularPathData.leftSmallArcRadius) + ' ' + // End of arc X\n    // line down to buffer point\n    'L' + link.circularPathData.leftFullExtent + ' ' + link.circularPathData.verticalLeftInnerExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.leftLargeArcRadius + ' ' + link.circularPathData.leftLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.leftInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // End of arc X\n    // line left to buffer point\n    'L' + link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.verticalFullExtent + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightLargeArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightFullExtent + ' ' + link.circularPathData.verticalRightInnerExtent + ' ' + // End of arc X\n    // line up\n    'L' + link.circularPathData.rightFullExtent + ' ' + (link.circularPathData.targetY + link.circularPathData.rightSmallArcRadius) + ' ' + // Arc around: Centre of arc X and  //Centre of arc Y\n    'A' + link.circularPathData.rightLargeArcRadius + ' ' + link.circularPathData.rightSmallArcRadius + ' 0 0 1 ' + // End of arc X //End of arc Y\n    link.circularPathData.rightInnerExtent + ' ' + link.circularPathData.targetY + ' ' + // End of arc X\n    // line to end\n    'L' + link.circularPathData.targetX + ' ' + link.circularPathData.targetY;\n  }\n\n  return pathString;\n} // sort links based on the distance between the source and tartget node columns\n// if the same, then use Y position of the source node\n\n\nfunction sortLinkColumnAscending(link1, link2) {\n  if (linkColumnDistance(link1) == linkColumnDistance(link2)) {\n    return link1.circularLinkType == 'bottom' ? sortLinkSourceYDescending(link1, link2) : sortLinkSourceYAscending(link1, link2);\n  } else {\n    return linkColumnDistance(link2) - linkColumnDistance(link1);\n  }\n} // sort ascending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYAscending(link1, link2) {\n  return link1.y0 - link2.y0;\n} // sort descending links by their source vertical position, y0\n\n\nfunction sortLinkSourceYDescending(link1, link2) {\n  return link2.y0 - link1.y0;\n} // sort ascending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYAscending(link1, link2) {\n  return link1.y1 - link2.y1;\n} // sort descending links by their target vertical position, y1\n\n\nfunction sortLinkTargetYDescending(link1, link2) {\n  return link2.y1 - link1.y1;\n} // return the distance between the link's target and source node, in terms of the nodes' column\n\n\nfunction linkColumnDistance(link) {\n  return link.target.column - link.source.column;\n} // return the distance between the link's target and source node, in terms of the nodes' X coordinate\n\n\nfunction linkXLength(link) {\n  return link.target.x0 - link.source.x1;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkSource(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link1's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 + heightFromY1ToPependicular : longerLink.y1 - heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Return the Y coordinate on the longerLink path * which is perpendicular shorterLink's source.\n// * approx, based on a straight line from target to source, when in fact the path is a bezier\n\n\nfunction linkPerpendicularYToLinkTarget(longerLink, shorterLink) {\n  // get the angle for the longer link\n  var angle = linkAngle(longerLink); // get the adjacent length to the other link's x position\n\n  var heightFromY1ToPependicular = linkXLength(shorterLink) / Math.tan(angle); // add or subtract from longer link's original y1, depending on the slope\n\n  var yPerpendicular = incline(longerLink) == 'up' ? longerLink.y1 - heightFromY1ToPependicular : longerLink.y1 + heightFromY1ToPependicular;\n  return yPerpendicular;\n} // Move any nodes that overlap links which span 2+ columns\n\n\nfunction resolveNodeLinkOverlaps(graph, y0, y1, id) {\n  graph.links.forEach(function (link) {\n    if (link.circular) {\n      return;\n    }\n\n    if (link.target.column - link.source.column > 1) {\n      var columnToTest = link.source.column + 1;\n      var maxColumnToTest = link.target.column - 1;\n      var i = 1;\n      var numberOfColumnsToTest = maxColumnToTest - columnToTest + 1;\n\n      for (i = 1; columnToTest <= maxColumnToTest; columnToTest++, i++) {\n        graph.nodes.forEach(function (node) {\n          if (node.column == columnToTest) {\n            var t = i / (numberOfColumnsToTest + 1); // Find all the points of a cubic bezier curve in javascript\n            // https://stackoverflow.com/questions/15397596/find-all-the-points-of-a-cubic-bezier-curve-in-javascript\n\n            var B0_t = Math.pow(1 - t, 3);\n            var B1_t = 3 * t * Math.pow(1 - t, 2);\n            var B2_t = 3 * Math.pow(t, 2) * (1 - t);\n            var B3_t = Math.pow(t, 3);\n            var py_t = B0_t * link.y0 + B1_t * link.y0 + B2_t * link.y1 + B3_t * link.y1;\n            var linkY0AtColumn = py_t - link.width / 2;\n            var linkY1AtColumn = py_t + link.width / 2;\n            var dy; // If top of link overlaps node, push node up\n\n            if (linkY0AtColumn > node.y0 && linkY0AtColumn < node.y1) {\n              dy = node.y1 - linkY0AtColumn + 10;\n              dy = node.circularLinkType == 'bottom' ? dy : -dy;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move up too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (nodesOverlap(node, otherNode)) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY1AtColumn > node.y0 && linkY1AtColumn < node.y1) {\n              // If bottom of link overlaps node, push node down\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1); // check if other nodes need to move down too\n\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            } else if (linkY0AtColumn < node.y0 && linkY1AtColumn > node.y1) {\n              // if link completely overlaps node\n              dy = linkY1AtColumn - node.y0 + 10;\n              node = adjustNodeHeight(node, dy, y0, y1);\n              graph.nodes.forEach(function (otherNode) {\n                // don't need to check itself or nodes at different columns\n                if (getNodeID(otherNode, id) == getNodeID(node, id) || otherNode.column != node.column) {\n                  return;\n                }\n\n                if (otherNode.y0 < node.y1 && otherNode.y1 > node.y1) {\n                  adjustNodeHeight(otherNode, dy, y0, y1);\n                }\n              });\n            }\n          }\n        });\n      }\n    }\n  });\n} // check if two nodes overlap\n\n\nfunction nodesOverlap(nodeA, nodeB) {\n  // test if nodeA top partially overlaps nodeB\n  if (nodeA.y0 > nodeB.y0 && nodeA.y0 < nodeB.y1) {\n    return true;\n  } else if (nodeA.y1 > nodeB.y0 && nodeA.y1 < nodeB.y1) {\n    // test if nodeA bottom partially overlaps nodeB\n    return true;\n  } else if (nodeA.y0 < nodeB.y0 && nodeA.y1 > nodeB.y1) {\n    // test if nodeA covers nodeB\n    return true;\n  } else {\n    return false;\n  }\n} // update a node, and its associated links, vertical positions (y0, y1)\n\n\nfunction adjustNodeHeight(node, dy, sankeyY0, sankeyY1) {\n  if (node.y0 + dy >= sankeyY0 && node.y1 + dy <= sankeyY1) {\n    node.y0 = node.y0 + dy;\n    node.y1 = node.y1 + dy;\n    node.targetLinks.forEach(function (l) {\n      l.y1 = l.y1 + dy;\n    });\n    node.sourceLinks.forEach(function (l) {\n      l.y0 = l.y0 + dy;\n    });\n  }\n\n  return node;\n} // sort and set the links' y0 for each node\n\n\nfunction sortSourceLinks(graph, y1, id, moveNodes) {\n  graph.nodes.forEach(function (node) {\n    // move any nodes up which are off the bottom\n    if (moveNodes && node.y + (node.y1 - node.y0) > y1) {\n      node.y = node.y - (node.y + (node.y1 - node.y0) - y1);\n    }\n\n    var nodesSourceLinks = graph.links.filter(function (l) {\n      return getNodeID(l.source, id) == getNodeID(node, id);\n    });\n    var nodeSourceLinksLength = nodesSourceLinks.length; // if more than 1 link then sort\n\n    if (nodeSourceLinksLength > 1) {\n      nodesSourceLinks.sort(function (link1, link2) {\n        // if both are not circular...\n        if (!link1.circular && !link2.circular) {\n          // if the target nodes are the same column, then sort by the link's target y\n          if (link1.target.column == link2.target.column) {\n            return link1.y1 - link2.y1;\n          } else if (!sameInclines(link1, link2)) {\n            // if the links slope in different directions, then sort by the link's target y\n            return link1.y1 - link2.y1; // if the links slope in same directions, then sort by any overlap\n          } else {\n            if (link1.target.column > link2.target.column) {\n              var link2Adj = linkPerpendicularYToLinkTarget(link2, link1);\n              return link1.y1 - link2Adj;\n            }\n\n            if (link2.target.column > link1.target.column) {\n              var link1Adj = linkPerpendicularYToLinkTarget(link1, link2);\n              return link1Adj - link2.y1;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link1.target.y1 - link2.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.target.column - link1.target.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.target.column === link2.target.column) {\n              return link2.target.y1 - link1.target.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.target.column - link2.target.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y0 for links\n\n\n    var ySourceOffset = node.y0;\n    nodesSourceLinks.forEach(function (link) {\n      link.y0 = ySourceOffset + link.width / 2;\n      ySourceOffset = ySourceOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesSourceLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodeSourceLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesSourceLinks[j].width;\n        }\n\n        link.y0 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // sort and set the links' y1 for each node\n\n\nfunction sortTargetLinks(graph, y1, id) {\n  graph.nodes.forEach(function (node) {\n    var nodesTargetLinks = graph.links.filter(function (l) {\n      return getNodeID(l.target, id) == getNodeID(node, id);\n    });\n    var nodesTargetLinksLength = nodesTargetLinks.length;\n\n    if (nodesTargetLinksLength > 1) {\n      nodesTargetLinks.sort(function (link1, link2) {\n        // if both are not circular, the base on the source y position\n        if (!link1.circular && !link2.circular) {\n          if (link1.source.column == link2.source.column) {\n            return link1.y0 - link2.y0;\n          } else if (!sameInclines(link1, link2)) {\n            return link1.y0 - link2.y0;\n          } else {\n            // get the angle of the link to the further source node (ie the smaller column)\n            if (link2.source.column < link1.source.column) {\n              var link2Adj = linkPerpendicularYToLinkSource(link2, link1);\n              return link1.y0 - link2Adj;\n            }\n\n            if (link1.source.column < link2.source.column) {\n              var link1Adj = linkPerpendicularYToLinkSource(link1, link2);\n              return link1Adj - link2.y0;\n            }\n          }\n        } // if only one is circular, the move top links up, or bottom links down\n\n\n        if (link1.circular && !link2.circular) {\n          return link1.circularLinkType == 'top' ? -1 : 1;\n        } else if (link2.circular && !link1.circular) {\n          return link2.circularLinkType == 'top' ? 1 : -1;\n        } // if both links are circular...\n\n\n        if (link1.circular && link2.circular) {\n          // ...and they both loop the same way (both top)\n          if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'top') {\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link1.source.column - link2.source.column;\n            }\n          } else if (link1.circularLinkType === link2.circularLinkType && link1.circularLinkType == 'bottom') {\n            // ...and they both loop the same way (both bottom)\n            // ...and they both connect to a target with same column, then sort by the target's y\n            if (link1.source.column === link2.source.column) {\n              return link1.source.y1 - link2.source.y1;\n            } else {\n              // ...and they connect to different column targets, then sort by how far back they\n              return link2.source.column - link1.source.column;\n            }\n          } else {\n            // ...and they loop around different ways, the move top up and bottom down\n            return link1.circularLinkType == 'top' ? -1 : 1;\n          }\n        }\n      });\n    } // update y1 for links\n\n\n    var yTargetOffset = node.y0;\n    nodesTargetLinks.forEach(function (link) {\n      link.y1 = yTargetOffset + link.width / 2;\n      yTargetOffset = yTargetOffset + link.width;\n    }); // correct any circular bottom links so they are at the bottom of the node\n\n    nodesTargetLinks.forEach(function (link, i) {\n      if (link.circularLinkType == 'bottom') {\n        var j = i + 1;\n        var offsetFromBottom = 0; // sum the widths of any links that are below this link\n\n        for (j; j < nodesTargetLinksLength; j++) {\n          offsetFromBottom = offsetFromBottom + nodesTargetLinks[j].width;\n        }\n\n        link.y1 = node.y1 - offsetFromBottom - link.width / 2;\n      }\n    });\n  });\n} // test if links both slope up, or both slope down\n\n\nfunction sameInclines(link1, link2) {\n  return incline(link1) == incline(link2);\n} // returns the slope of a link, from source to target\n// up => slopes up from source to target\n// down => slopes down from source to target\n\n\nfunction incline(link) {\n  return link.y0 - link.y1 > 0 ? 'up' : 'down';\n} // check if link is self linking, ie links a node to the same node\n\n\nfunction selfLinking(link, id) {\n  return getNodeID(link.source, id) == getNodeID(link.target, id);\n}\n\nfunction fillHeight(graph, y0, y1) {\n  var nodes = graph.nodes;\n  var links = graph.links;\n  var top = false;\n  var bottom = false;\n  links.forEach(function (link) {\n    if (link.circularLinkType == \"top\") {\n      top = true;\n    } else if (link.circularLinkType == \"bottom\") {\n      bottom = true;\n    }\n  });\n\n  if (top == false || bottom == false) {\n    var minY0 = min(nodes, function (node) {\n      return node.y0;\n    });\n    var maxY1 = max(nodes, function (node) {\n      return node.y1;\n    });\n    var currentHeight = maxY1 - minY0;\n    var chartHeight = y1 - y0;\n    var ratio = chartHeight / currentHeight;\n    nodes.forEach(function (node) {\n      var nodeHeight = (node.y1 - node.y0) * ratio;\n      node.y0 = (node.y0 - minY0) * ratio;\n      node.y1 = node.y0 + nodeHeight;\n    });\n    links.forEach(function (link) {\n      link.y0 = (link.y0 - minY0) * ratio;\n      link.y1 = (link.y1 - minY0) * ratio;\n      link.width = link.width * ratio;\n    });\n  }\n}\n\nexport { sankeyCircular, center as sankeyCenter, left as sankeyLeft, right as sankeyRight, justify as sankeyJustify };","\"use strict\";\n\nmodule.exports = stronglyConnectedComponents;\n\nfunction stronglyConnectedComponents(adjList) {\n  var numVertices = adjList.length;\n  var index = new Array(numVertices);\n  var lowValue = new Array(numVertices);\n  var active = new Array(numVertices);\n  var child = new Array(numVertices);\n  var scc = new Array(numVertices);\n  var sccLinks = new Array(numVertices); //Initialize tables\n\n  for (var i = 0; i < numVertices; ++i) {\n    index[i] = -1;\n    lowValue[i] = 0;\n    active[i] = false;\n    child[i] = 0;\n    scc[i] = -1;\n    sccLinks[i] = [];\n  } // The strongConnect function\n\n\n  var count = 0;\n  var components = [];\n  var sccAdjList = [];\n\n  function strongConnect(v) {\n    // To avoid running out of stack space, this emulates the recursive behaviour of the normal algorithm, effectively using T as the call stack.\n    var S = [v],\n        T = [v];\n    index[v] = lowValue[v] = count;\n    active[v] = true;\n    count += 1;\n\n    while (T.length > 0) {\n      v = T[T.length - 1];\n      var e = adjList[v];\n\n      if (child[v] < e.length) {\n        // If we're not done iterating over the children, first try finishing that.\n        for (var i = child[v]; i < e.length; ++i) {\n          // Start where we left off.\n          var u = e[i];\n\n          if (index[u] < 0) {\n            index[u] = lowValue[u] = count;\n            active[u] = true;\n            count += 1;\n            S.push(u);\n            T.push(u);\n            break; // First recurse, then continue here (with the same child!).\n            // There is a slight change to Tarjan's algorithm here.\n            // Normally, after having recursed, we set lowValue like we do for an active child (although some variants of the algorithm do it slightly differently).\n            // Here, we only do so if the child we recursed on is still active.\n            // The reasoning is that if it is no longer active, it must have had a lowValue equal to its own index, which means that it is necessarily higher than our lowValue.\n          } else if (active[u]) {\n            lowValue[v] = Math.min(lowValue[v], lowValue[u]) | 0;\n          }\n\n          if (scc[u] >= 0) {\n            // Node v is not yet assigned an scc, but once it is that scc can apparently reach scc[u].\n            sccLinks[v].push(scc[u]);\n          }\n        }\n\n        child[v] = i; // Remember where we left off.\n      } else {\n        // If we're done iterating over the children, check whether we have an scc.\n        if (lowValue[v] === index[v]) {\n          // TODO: It /might/ be true that T is always a prefix of S (at this point!!!), and if so, this could be used here.\n          var component = [];\n          var links = [],\n              linkCount = 0;\n\n          for (var i = S.length - 1; i >= 0; --i) {\n            var w = S[i];\n            active[w] = false;\n            component.push(w);\n            links.push(sccLinks[w]);\n            linkCount += sccLinks[w].length;\n            scc[w] = components.length;\n\n            if (w === v) {\n              S.length = i;\n              break;\n            }\n          }\n\n          components.push(component);\n          var allLinks = new Array(linkCount);\n\n          for (var i = 0; i < links.length; i++) {\n            for (var j = 0; j < links[i].length; j++) {\n              allLinks[--linkCount] = links[i][j];\n            }\n          }\n\n          sccAdjList.push(allLinks);\n        }\n\n        T.pop(); // Now we're finished exploring this particular node (normally corresponds to the return statement)\n      }\n    }\n  } //Run strong connect starting from each vertex\n\n\n  for (var i = 0; i < numVertices; ++i) {\n    if (index[i] < 0) {\n      strongConnect(i);\n    }\n  } // Compact sccAdjList\n\n\n  var newE;\n\n  for (var i = 0; i < sccAdjList.length; i++) {\n    var e = sccAdjList[i];\n    if (e.length === 0) continue;\n    e.sort(function (a, b) {\n      return a - b;\n    });\n    newE = [e[0]];\n\n    for (var j = 1; j < e.length; j++) {\n      if (e[j] !== e[j - 1]) {\n        newE.push(e[j]);\n      }\n    }\n\n    sccAdjList[i] = newE;\n  }\n\n  return {\n    components: components,\n    adjacencyList: sccAdjList\n  };\n}","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar tarjan = require('strongly-connected-components');\n\nvar Lib = require('../../lib');\n\nvar wrap = require('../../lib/gup').wrap;\n\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar isIndex = Lib.isIndex;\n\nvar Colorscale = require('../../components/colorscale');\n\nfunction convertToD3Sankey(trace) {\n  var nodeSpec = trace.node;\n  var linkSpec = trace.link;\n  var links = [];\n  var hasLinkColorArray = isArrayOrTypedArray(linkSpec.color);\n  var hasLinkCustomdataArray = isArrayOrTypedArray(linkSpec.customdata);\n  var linkedNodes = {};\n  var components = {};\n  var componentCount = linkSpec.colorscales.length;\n  var i;\n\n  for (i = 0; i < componentCount; i++) {\n    var cscale = linkSpec.colorscales[i];\n    var specs = Colorscale.extractScale(cscale, {\n      cLetter: 'c'\n    });\n    var scale = Colorscale.makeColorScaleFunc(specs);\n    components[cscale.label] = scale;\n  }\n\n  var maxNodeId = 0;\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    if (linkSpec.source[i] > maxNodeId) maxNodeId = linkSpec.source[i];\n    if (linkSpec.target[i] > maxNodeId) maxNodeId = linkSpec.target[i];\n  }\n\n  var nodeCount = maxNodeId + 1;\n  trace.node._count = nodeCount; // Group nodes\n\n  var j;\n  var groups = trace.node.groups;\n  var groupLookup = {};\n\n  for (i = 0; i < groups.length; i++) {\n    var group = groups[i]; // Build a lookup table to quickly find in which group a node is\n\n    for (j = 0; j < group.length; j++) {\n      var nodeIndex = group[j];\n      var groupIndex = nodeCount + i;\n\n      if (groupLookup.hasOwnProperty(nodeIndex)) {\n        Lib.warn('Node ' + nodeIndex + ' is already part of a group.');\n      } else {\n        groupLookup[nodeIndex] = groupIndex;\n      }\n    }\n  } // Process links\n\n\n  var groupedLinks = {\n    source: [],\n    target: []\n  };\n\n  for (i = 0; i < linkSpec.value.length; i++) {\n    var val = linkSpec.value[i]; // remove negative values, but keep zeros with special treatment\n\n    var source = linkSpec.source[i];\n    var target = linkSpec.target[i];\n\n    if (!(val > 0 && isIndex(source, nodeCount) && isIndex(target, nodeCount))) {\n      continue;\n    } // Remove links that are within the same group\n\n\n    if (groupLookup.hasOwnProperty(source) && groupLookup.hasOwnProperty(target) && groupLookup[source] === groupLookup[target]) {\n      continue;\n    } // if link targets a node in the group, relink target to that group\n\n\n    if (groupLookup.hasOwnProperty(target)) {\n      target = groupLookup[target];\n    } // if link originates from a node in a group, relink source to that group\n\n\n    if (groupLookup.hasOwnProperty(source)) {\n      source = groupLookup[source];\n    }\n\n    source = +source;\n    target = +target;\n    linkedNodes[source] = linkedNodes[target] = true;\n    var label = '';\n    if (linkSpec.label && linkSpec.label[i]) label = linkSpec.label[i];\n    var concentrationscale = null;\n    if (label && components.hasOwnProperty(label)) concentrationscale = components[label];\n    links.push({\n      pointNumber: i,\n      label: label,\n      color: hasLinkColorArray ? linkSpec.color[i] : linkSpec.color,\n      customdata: hasLinkCustomdataArray ? linkSpec.customdata[i] : linkSpec.customdata,\n      concentrationscale: concentrationscale,\n      source: source,\n      target: target,\n      value: +val\n    });\n    groupedLinks.source.push(source);\n    groupedLinks.target.push(target);\n  } // Process nodes\n\n\n  var totalCount = nodeCount + groups.length;\n  var hasNodeColorArray = isArrayOrTypedArray(nodeSpec.color);\n  var hasNodeCustomdataArray = isArrayOrTypedArray(nodeSpec.customdata);\n  var nodes = [];\n\n  for (i = 0; i < totalCount; i++) {\n    if (!linkedNodes[i]) continue;\n    var l = nodeSpec.label[i];\n    nodes.push({\n      group: i > nodeCount - 1,\n      childrenNodes: [],\n      pointNumber: i,\n      label: l,\n      color: hasNodeColorArray ? nodeSpec.color[i] : nodeSpec.color,\n      customdata: hasNodeCustomdataArray ? nodeSpec.customdata[i] : nodeSpec.customdata\n    });\n  } // Check if we have circularity on the resulting graph\n\n\n  var circular = false;\n\n  if (circularityPresent(totalCount, groupedLinks.source, groupedLinks.target)) {\n    circular = true;\n  }\n\n  return {\n    circular: circular,\n    links: links,\n    nodes: nodes,\n    // Data structure for groups\n    groups: groups,\n    groupLookup: groupLookup\n  };\n}\n\nfunction circularityPresent(nodeLen, sources, targets) {\n  var nodes = Lib.init2dArray(nodeLen, 0);\n\n  for (var i = 0; i < Math.min(sources.length, targets.length); i++) {\n    if (Lib.isIndex(sources[i], nodeLen) && Lib.isIndex(targets[i], nodeLen)) {\n      if (sources[i] === targets[i]) {\n        return true; // self-link which is also a scc of one\n      }\n\n      nodes[sources[i]].push(targets[i]);\n    }\n  }\n\n  var scc = tarjan(nodes); // Tarján's strongly connected components algorithm coded by Mikola Lysenko\n  // returns at least one non-singular component if there's circularity in the graph\n\n  return scc.components.some(function (c) {\n    return c.length > 1;\n  });\n}\n\nmodule.exports = function calc(gd, trace) {\n  var result = convertToD3Sankey(trace);\n  return wrap({\n    circular: result.circular,\n    _nodes: result.nodes,\n    _links: result.links,\n    // Data structure for grouping\n    _groups: result.groups,\n    _groupLookup: result.groupLookup\n  });\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar c = require('plotly.js/src/traces/sankey/constants');\nvar d3 = require('d3');\nvar tinycolor = require('tinycolor2');\nvar Color = require('plotly.js/src/components/color');\nvar Drawing = require('plotly.js/src/components/drawing');\n// BEGIN PATCH\nvar d3Sankey = require('d3-sankey');\n// END PATCH\nvar d3SankeyCircular = require('@plotly/d3-sankey-circular');\nvar d3Force = require('d3-force');\nvar Lib = require('plotly.js/src/lib');\nvar gup = require('plotly.js/src/lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\nvar interpolateNumber = require('d3-interpolate').interpolateNumber;\n\nvar Registry = require('plotly.js/src/registry');\n\n// view models\n\nfunction sankeyModel(layout, d, traceIndex) {\n  var calcData = unwrap(d);\n  var trace = calcData.trace;\n  var domain = trace.domain;\n  var horizontal = trace.orientation === 'h';\n  var nodePad = trace.node.pad;\n  var nodeThickness = trace.node.thickness;\n\n  var width = layout.width * (domain.x[1] - domain.x[0]);\n  var height = layout.height * (domain.y[1] - domain.y[0]);\n\n  var nodes = calcData._nodes;\n  var links = calcData._links;\n  var circular = calcData.circular;\n\n  // Select Sankey generator\n  var sankey;\n  if (circular) {\n    sankey = d3SankeyCircular\n      .sankeyCircular()\n      .circularLinkGap(0);\n  } else {\n    sankey = d3Sankey.sankey();\n  }\n\n  sankey\n    .iterations(c.sankeyIterations)\n    .size(horizontal ? [width, height] : [height, width])\n    .nodeWidth(nodeThickness)\n    .nodePadding(nodePad)\n    // BEGIN PATCH\n    .nodeAlign(d3Sankey.sankeyLeft)\n    .linkSort(null)\n    .nodeSort(null)\n    // END PATCH\n    .nodeId(function (d) {\n      return d.pointNumber;\n    })\n    .nodes(nodes)\n    .links(links);\n\n  var graph = sankey();\n\n  if (sankey.nodePadding() < nodePad) {\n    Lib.warn('node.pad was reduced to ', sankey.nodePadding(), ' to fit within the figure.');\n  }\n\n  // Counters for nested loops\n  var i, j, k;\n\n  // Create transient nodes for animations\n  for (var nodePointNumber in calcData._groupLookup) {\n    var groupIndex = parseInt(calcData._groupLookup[nodePointNumber]);\n\n    // Find node representing groupIndex\n    var groupingNode;\n\n    for (i = 0; i < graph.nodes.length; i++) {\n      if (graph.nodes[i].pointNumber === groupIndex) {\n        groupingNode = graph.nodes[i];\n        break;\n      }\n    }\n    // If groupinNode is undefined, no links are targeting this group\n    if (!groupingNode) continue;\n\n    var child = {\n      pointNumber: parseInt(nodePointNumber),\n      x0: groupingNode.x0,\n      x1: groupingNode.x1,\n      y0: groupingNode.y0,\n      y1: groupingNode.y1,\n      partOfGroup: true,\n      sourceLinks: [],\n      targetLinks: []\n    };\n\n    graph.nodes.unshift(child);\n    groupingNode.childrenNodes.unshift(child);\n  }\n\n  function computeLinkConcentrations() {\n    for (i = 0; i < graph.nodes.length; i++) {\n      var node = graph.nodes[i];\n      // Links connecting the same two nodes are part of a flow\n      var flows = {};\n      var flowKey;\n      var link;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        flowKey = link.source.pointNumber + ':' + link.target.pointNumber;\n        if (!flows.hasOwnProperty(flowKey)) flows[flowKey] = [];\n        flows[flowKey].push(link);\n      }\n\n      // Compute statistics for each flow\n      var keys = Object.keys(flows);\n      for (j = 0; j < keys.length; j++) {\n        flowKey = keys[j];\n        var flowLinks = flows[flowKey];\n\n        // Find the total size of the flow and total size per label\n        var total = 0;\n        var totalPerLabel = {};\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          if (!totalPerLabel[link.label]) totalPerLabel[link.label] = 0;\n          totalPerLabel[link.label] += link.value;\n          total += link.value;\n        }\n\n        // Find the ratio of the link's value and the size of the flow\n        for (k = 0; k < flowLinks.length; k++) {\n          link = flowLinks[k];\n          link.flow = {\n            value: total,\n            labelConcentration: totalPerLabel[link.label] / total,\n            concentration: link.value / total,\n            links: flowLinks\n          };\n          if (link.concentrationscale) {\n            link.color = tinycolor(link.concentrationscale(link.flow.labelConcentration));\n          }\n        }\n      }\n\n      // Gather statistics of all links at current node\n      var totalOutflow = 0;\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        totalOutflow += node.sourceLinks[j].value;\n      }\n      for (j = 0; j < node.sourceLinks.length; j++) {\n        link = node.sourceLinks[j];\n        link.concentrationOut = link.value / totalOutflow;\n      }\n\n      var totalInflow = 0;\n      for (j = 0; j < node.targetLinks.length; j++) {\n        totalInflow += node.targetLinks[j].value;\n      }\n\n      for (j = 0; j < node.targetLinks.length; j++) {\n        link = node.targetLinks[j];\n        link.concenrationIn = link.value / totalInflow;\n      }\n    }\n  }\n  computeLinkConcentrations();\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(columns) {\n    columns.forEach(function (nodes) {\n      var node;\n      var dy;\n      var y = 0;\n      var n = nodes.length;\n      var i;\n      nodes.sort(function (a, b) {\n        return a.y0 - b.y0;\n      });\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.y0 >= y) {\n          // No overlap\n        } else {\n          dy = (y - node.y0);\n          if (dy > 1e-6) {\n            node.y0 += dy\n            node.y1 += dy;\n          }\n        }\n        y = node.y1 + nodePad;\n      }\n    });\n  }\n\n  // Group nodes into columns based on their x position\n  function snapToColumns(nodes) {\n    // Sort nodes by x position\n    var orderedNodes = nodes.map(function (n, i) {\n      return {\n        x0: n.x0,\n        index: i\n      };\n    })\n      .sort(function (a, b) {\n        return a.x0 - b.x0;\n      });\n\n    var columns = [];\n    var colNumber = -1;\n    var colX; // Position of column\n    var lastX = -Infinity; // Position of last node\n    var dx;\n    for (i = 0; i < orderedNodes.length; i++) {\n      var node = nodes[orderedNodes[i].index];\n      // If the node does not overlap with the last one\n      if (node.x0 > lastX + nodeThickness) {\n        // Start a new column\n        colNumber += 1;\n        colX = node.x0;\n      }\n      lastX = node.x0;\n\n      // Add node to its associated column\n      if (!columns[colNumber]) columns[colNumber] = [];\n      columns[colNumber].push(node);\n\n      // Change node's x position to align it with its column\n      dx = colX - node.x0;\n      node.x0 += dx;\n      node.x1 += dx;\n    }\n    return columns;\n  }\n\n  // Force node position\n  if (trace.node.x.length && trace.node.y.length) {\n    for (i = 0; i < Math.min(trace.node.x.length, trace.node.y.length, graph.nodes.length); i++) {\n      if (trace.node.x[i] && trace.node.y[i]) {\n        var pos = [trace.node.x[i] * width, trace.node.y[i] * height];\n        graph.nodes[i].x0 = pos[0] - nodeThickness / 2;\n        graph.nodes[i].x1 = pos[0] + nodeThickness / 2;\n\n        var nodeHeight = graph.nodes[i].y1 - graph.nodes[i].y0;\n        graph.nodes[i].y0 = pos[1] - nodeHeight / 2;\n        graph.nodes[i].y1 = pos[1] + nodeHeight / 2;\n      }\n    }\n    if (trace.arrangement === 'snap') {\n      nodes = graph.nodes;\n      var columns = snapToColumns(nodes);\n      resolveCollisionsTopToBottom(columns);\n    }\n    // Update links\n    sankey.update(graph);\n  }\n\n\n  return {\n    circular: circular,\n    key: traceIndex,\n    trace: trace,\n    guid: Lib.randstr(),\n    horizontal: horizontal,\n    width: width,\n    height: height,\n    nodePad: trace.node.pad,\n    nodeLineColor: trace.node.line.color,\n    nodeLineWidth: trace.node.line.width,\n    linkLineColor: trace.link.line.color,\n    linkLineWidth: trace.link.line.width,\n    valueFormat: trace.valueformat,\n    valueSuffix: trace.valuesuffix,\n    textFont: trace.textfont,\n    translateX: domain.x[0] * layout.width + layout.margin.l,\n    translateY: layout.height - domain.y[1] * layout.height + layout.margin.t,\n    dragParallel: horizontal ? height : width,\n    dragPerpendicular: horizontal ? width : height,\n    arrangement: trace.arrangement,\n    sankey: sankey,\n    graph: graph,\n    forceLayouts: {},\n    interactionState: {\n      dragInProgress: false,\n      hovered: false\n    }\n  };\n}\n\nfunction linkModel(d, l, i) {\n  var tc = tinycolor(l.color);\n  var basicKey = l.source.label + '|' + l.target.label;\n  var key = basicKey + '__' + i;\n\n  // for event data\n  l.trace = d.trace;\n  l.curveNumber = d.trace.index;\n\n  return {\n    circular: d.circular,\n    key: key,\n    traceId: d.key,\n    pointNumber: l.pointNumber,\n    link: l,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    linkPath: linkPath,\n    linkLineColor: d.linkLineColor,\n    linkLineWidth: d.linkLineWidth,\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    parent: d,\n    interactionState: d.interactionState,\n    flow: l.flow\n  };\n}\n\nfunction createCircularClosedPathString(link) {\n  // Using coordinates computed by d3-sankey-circular\n  var pathString = '';\n  var offset = link.width / 2;\n  var coords = link.circularPathData;\n  if (link.circularLinkType === 'top') {\n    // Top path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY + offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY - coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY - coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY - offset) +\n      'Z';\n  } else {\n    // Bottom path\n    pathString =\n      // start at the left of the target node\n      'M ' +\n      coords.targetX + ' ' + (coords.targetY - offset) + ' ' +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.targetY - offset) +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightSmallArcRadius + offset) + ' 0 0 0 ' +\n      (coords.rightFullExtent - offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'L' +\n      (coords.rightFullExtent - offset) + ' ' + coords.verticalRightInnerExtent +\n      'A' +\n      (coords.rightLargeArcRadius + offset) + ' ' + (coords.rightLargeArcRadius + offset) + ' 0 0 0 ' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent + offset) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftLargeArcRadius + offset) + ' 0 0 0 ' +\n      (coords.leftFullExtent + offset) + ' ' + coords.verticalLeftInnerExtent +\n      'L' +\n      (coords.leftFullExtent + offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'A' +\n      (coords.leftLargeArcRadius + offset) + ' ' + (coords.leftSmallArcRadius + offset) + ' 0 0 0 ' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY - offset) +\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY - offset) +\n\n      // Walking back\n      'L' +\n      coords.sourceX + ' ' + (coords.sourceY + offset) +\n      'L' +\n      coords.leftInnerExtent + ' ' + (coords.sourceY + offset) +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftSmallArcRadius - offset) + ' 0 0 1 ' +\n      (coords.leftFullExtent - offset) + ' ' + (coords.sourceY + coords.leftSmallArcRadius) +\n      'L' +\n      (coords.leftFullExtent - offset) + ' ' + coords.verticalLeftInnerExtent +\n      'A' +\n      (coords.leftLargeArcRadius - offset) + ' ' + (coords.leftLargeArcRadius - offset) + ' 0 0 1 ' +\n      coords.leftInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'L' +\n      coords.rightInnerExtent + ' ' + (coords.verticalFullExtent - offset) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightLargeArcRadius - offset) + ' 0 0 1 ' +\n      (coords.rightFullExtent + offset) + ' ' + coords.verticalRightInnerExtent +\n      'L' +\n      (coords.rightFullExtent + offset) + ' ' + (coords.targetY + coords.rightSmallArcRadius) +\n      'A' +\n      (coords.rightLargeArcRadius - offset) + ' ' + (coords.rightSmallArcRadius - offset) + ' 0 0 1 ' +\n      coords.rightInnerExtent + ' ' + (coords.targetY + offset) +\n      'L' +\n      coords.targetX + ' ' + (coords.targetY + offset) +\n      'Z';\n  }\n  return pathString;\n}\n\nfunction linkPath() {\n  var curvature = 0.5;\n  function path(d) {\n    if (d.link.circular) {\n      return createCircularClosedPathString(d.link);\n    } else {\n      var x0 = d.link.source.x1;\n      var x1 = d.link.target.x0;\n      var xi = interpolateNumber(x0, x1);\n      var x2 = xi(curvature);\n      var x3 = xi(1 - curvature);\n      var y0a = d.link.y0 - d.link.width / 2;\n      var y0b = d.link.y0 + d.link.width / 2;\n      var y1a = d.link.y1 - d.link.width / 2;\n      var y1b = d.link.y1 + d.link.width / 2;\n      return 'M' + x0 + ',' + y0a +\n        'C' + x2 + ',' + y0a +\n        ' ' + x3 + ',' + y1a +\n        ' ' + x1 + ',' + y1a +\n        'L' + x1 + ',' + y1b +\n        'C' + x3 + ',' + y1b +\n        ' ' + x2 + ',' + y0b +\n        ' ' + x0 + ',' + y0b +\n        'Z';\n    }\n  }\n  return path;\n}\n\nfunction nodeModel(d, n) {\n  var tc = tinycolor(n.color);\n  var zoneThicknessPad = c.nodePadAcross;\n  var zoneLengthPad = d.nodePad / 2;\n  n.dx = n.x1 - n.x0;\n  n.dy = n.y1 - n.y0;\n  var visibleThickness = n.dx;\n  var visibleLength = Math.max(0.5, n.dy);\n\n  var key = 'node_' + n.pointNumber;\n  // If it's a group, it's mutable and should be unique\n  if (n.group) {\n    key = Lib.randstr();\n  }\n\n  // for event data\n  n.trace = d.trace;\n  n.curveNumber = d.trace.index;\n\n  return {\n    index: n.pointNumber,\n    key: key,\n    partOfGroup: n.partOfGroup || false,\n    group: n.group,\n    traceId: d.key,\n    trace: d.trace,\n    node: n,\n    nodePad: d.nodePad,\n    nodeLineColor: d.nodeLineColor,\n    nodeLineWidth: d.nodeLineWidth,\n    textFont: d.textFont,\n    size: d.horizontal ? d.height : d.width,\n    visibleWidth: Math.ceil(visibleThickness),\n    visibleHeight: visibleLength,\n    zoneX: -zoneThicknessPad,\n    zoneY: -zoneLengthPad,\n    zoneWidth: visibleThickness + 2 * zoneThicknessPad,\n    zoneHeight: visibleLength + 2 * zoneLengthPad,\n    labelY: d.horizontal ? n.dy / 2 + 1 : n.dx / 2 + 1,\n    left: n.originalLayer === 1,\n    sizeAcross: d.width,\n    forceLayouts: d.forceLayouts,\n    horizontal: d.horizontal,\n    darkBackground: tc.getBrightness() <= 128,\n    tinyColorHue: Color.tinyRGB(tc),\n    tinyColorAlpha: tc.getAlpha(),\n    valueFormat: d.valueFormat,\n    valueSuffix: d.valueSuffix,\n    sankey: d.sankey,\n    graph: d.graph,\n    arrangement: d.arrangement,\n    uniqueNodeLabelPathId: [d.guid, d.key, key].join('_'),\n    interactionState: d.interactionState,\n    figure: d\n  };\n}\n\n// rendering snippets\n\nfunction updateNodePositions(sankeyNode) {\n  sankeyNode\n    .attr('transform', function (d) {\n      return 'translate(' + d.node.x0.toFixed(3) + ', ' + (d.node.y0).toFixed(3) + ')';\n    });\n}\n\nfunction updateNodeShapes(sankeyNode) {\n  sankeyNode.call(updateNodePositions);\n}\n\nfunction updateShapes(sankeyNode, sankeyLink) {\n  sankeyNode.call(updateNodeShapes);\n  sankeyLink.attr('d', linkPath());\n}\n\nfunction sizeNode(rect) {\n  rect\n    .attr('width', function (d) { return d.node.x1 - d.node.x0; })\n    .attr('height', function (d) { return d.visibleHeight; });\n}\n\nfunction salientEnough(d) { return (d.link.width > 1 || d.linkLineWidth > 0); }\n\nfunction sankeyTransform(d) {\n  var offset = 'translate(' + d.translateX + ',' + d.translateY + ')';\n  return offset + (d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)');\n}\n\nfunction nodeCentering(d) {\n  return 'translate(' + (d.horizontal ? 0 : d.labelY) + ' ' + (d.horizontal ? d.labelY : 0) + ')';\n}\n\nfunction textGuidePath(d) {\n  return d3.svg.line()([\n    [d.horizontal ? (d.left ? -d.sizeAcross : d.visibleWidth + c.nodeTextOffsetHorizontal) : c.nodeTextOffsetHorizontal, 0],\n    [d.horizontal ? (d.left ? - c.nodeTextOffsetHorizontal : d.sizeAcross) : d.visibleHeight - c.nodeTextOffsetHorizontal, 0]\n  ]);\n}\n\nfunction sankeyInverseTransform(d) { return d.horizontal ? 'matrix(1 0 0 1 0 0)' : 'matrix(0 1 1 0 0 0)'; }\nfunction textFlip(d) { return d.horizontal ? 'scale(1 1)' : 'scale(-1 1)'; }\nfunction nodeTextColor(d) { return d.darkBackground && !d.horizontal ? 'rgb(255,255,255)' : 'rgb(0,0,0)'; }\nfunction nodeTextOffset(d) { return d.horizontal && d.left ? '100%' : '0%'; }\n\n// event handling\n\nfunction attachPointerEvents(selection, sankey, eventSet) {\n  selection\n    .on('.basic', null) // remove any preexisting handlers\n    .on('mouseover.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.hover(this, d, sankey);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mousemove.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.follow(this, d);\n        d.interactionState.hovered = [this, d];\n      }\n    })\n    .on('mouseout.basic', function (d) {\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n    })\n    .on('click.basic', function (d) {\n      if (d.interactionState.hovered) {\n        eventSet.unhover(this, d, sankey);\n        d.interactionState.hovered = false;\n      }\n      if (!d.interactionState.dragInProgress && !d.partOfGroup) {\n        eventSet.select(this, d, sankey);\n      }\n    });\n}\n\nfunction attachDragHandler(sankeyNode, sankeyLink, callbacks, gd) {\n  var dragBehavior = d3.behavior.drag()\n    .origin(function (d) {\n      return {\n        x: d.node.x0 + d.visibleWidth / 2,\n        y: d.node.y0 + d.visibleHeight / 2\n      };\n    })\n\n    .on('dragstart', function (d) {\n      if (d.arrangement === 'fixed') return;\n      Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'dragcover', function (s) {\n        gd._fullLayout._dragCover = s;\n      });\n      Lib.raiseToTop(this);\n      d.interactionState.dragInProgress = d.node;\n\n      saveCurrentDragPosition(d.node);\n      if (d.interactionState.hovered) {\n        callbacks.nodeEvents.unhover.apply(0, d.interactionState.hovered);\n        d.interactionState.hovered = false;\n      }\n      if (d.arrangement === 'snap') {\n        var forceKey = d.traceId + '|' + d.key;\n        if (d.forceLayouts[forceKey]) {\n          d.forceLayouts[forceKey].alpha(1);\n        } else { // make a forceLayout if needed\n          attachForce(sankeyNode, forceKey, d, gd);\n        }\n        startForce(sankeyNode, sankeyLink, d, forceKey, gd);\n      }\n    })\n\n    .on('drag', function (d) {\n      if (d.arrangement === 'fixed') return;\n      var x = d3.event.x;\n      var y = d3.event.y;\n      if (d.arrangement === 'snap') {\n        d.node.x0 = x - d.visibleWidth / 2;\n        d.node.x1 = x + d.visibleWidth / 2;\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      } else {\n        if (d.arrangement === 'freeform') {\n          d.node.x0 = x - d.visibleWidth / 2;\n          d.node.x1 = x + d.visibleWidth / 2;\n        }\n        y = Math.max(0, Math.min(d.size - d.visibleHeight / 2, y));\n        d.node.y0 = y - d.visibleHeight / 2;\n        d.node.y1 = y + d.visibleHeight / 2;\n      }\n\n      saveCurrentDragPosition(d.node);\n      if (d.arrangement !== 'snap') {\n        d.sankey.update(d.graph);\n        updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n      }\n    })\n\n    .on('dragend', function (d) {\n      if (d.arrangement === 'fixed') return;\n      d.interactionState.dragInProgress = false;\n      for (var i = 0; i < d.node.childrenNodes.length; i++) {\n        d.node.childrenNodes[i].x = d.node.x;\n        d.node.childrenNodes[i].y = d.node.y;\n      }\n      if (d.arrangement !== 'snap') persistFinalNodePositions(d, gd);\n    });\n\n  sankeyNode\n    .on('.drag', null) // remove possible previous handlers\n    .call(dragBehavior);\n}\n\nfunction attachForce(sankeyNode, forceKey, d, gd) {\n  // Attach force to nodes in the same column (same x coordinate)\n  switchToForceFormat(d.graph.nodes);\n  var nodes = d.graph.nodes\n    .filter(function (n) { return n.originalX === d.node.originalX; })\n    // Filter out children\n    .filter(function (n) { return !n.partOfGroup; });\n  d.forceLayouts[forceKey] = d3Force.forceSimulation(nodes)\n    .alphaDecay(0)\n    .force('collide', d3Force.forceCollide()\n      .radius(function (n) { return n.dy / 2 + d.nodePad / 2; })\n      .strength(1)\n      .iterations(c.forceIterations))\n    .force('constrain', snappingForce(sankeyNode, forceKey, nodes, d, gd))\n    .stop();\n}\n\nfunction startForce(sankeyNode, sankeyLink, d, forceKey, gd) {\n  window.requestAnimationFrame(function faster() {\n    var i;\n    for (i = 0; i < c.forceTicksPerFrame; i++) {\n      d.forceLayouts[forceKey].tick();\n    }\n\n    var nodes = d.graph.nodes;\n    switchToSankeyFormat(nodes);\n\n    d.sankey.update(d.graph);\n    updateShapes(sankeyNode.filter(sameLayer(d)), sankeyLink);\n\n    if (d.forceLayouts[forceKey].alpha() > 0) {\n      window.requestAnimationFrame(faster);\n    } else {\n      // Make sure the final x position is equal to its original value\n      // because the force simulation will have numerical error\n      var x = d.node.originalX;\n      d.node.x0 = x - d.visibleWidth / 2;\n      d.node.x1 = x + d.visibleWidth / 2;\n\n      persistFinalNodePositions(d, gd);\n    }\n  });\n}\n\nfunction snappingForce(sankeyNode, forceKey, nodes, d) {\n  return function _snappingForce() {\n    var maxVelocity = 0;\n    for (var i = 0; i < nodes.length; i++) {\n      var n = nodes[i];\n      if (n === d.interactionState.dragInProgress) { // constrain node position to the dragging pointer\n        n.x = n.lastDraggedX;\n        n.y = n.lastDraggedY;\n      } else {\n        n.vx = (n.originalX - n.x) / c.forceTicksPerFrame; // snap to layer\n        n.y = Math.min(d.size - n.dy / 2, Math.max(n.dy / 2, n.y)); // constrain to extent\n      }\n      maxVelocity = Math.max(maxVelocity, Math.abs(n.vx), Math.abs(n.vy));\n    }\n    if (!d.interactionState.dragInProgress && maxVelocity < 0.1 && d.forceLayouts[forceKey].alpha() > 0) {\n      d.forceLayouts[forceKey].alpha(0); // This will stop the animation loop\n    }\n  };\n}\n\n// basic data utilities\n\nfunction persistFinalNodePositions(d, gd) {\n  var x = [];\n  var y = [];\n  for (var i = 0; i < d.graph.nodes.length; i++) {\n    var nodeX = (d.graph.nodes[i].x0 + d.graph.nodes[i].x1) / 2;\n    var nodeY = (d.graph.nodes[i].y0 + d.graph.nodes[i].y1) / 2;\n    x.push(nodeX / d.figure.width);\n    y.push(nodeY / d.figure.height);\n  }\n  Registry.call('_guiRestyle', gd, {\n    'node.x': [x],\n    'node.y': [y]\n  }, d.trace.index)\n    .then(function () {\n      if (gd._fullLayout._dragCover) gd._fullLayout._dragCover.remove();\n    });\n}\n\nfunction persistOriginalPlace(nodes) {\n  var distinctLayerPositions = [];\n  var i;\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalX = (nodes[i].x0 + nodes[i].x1) / 2;\n    nodes[i].originalY = (nodes[i].y0 + nodes[i].y1) / 2;\n    if (distinctLayerPositions.indexOf(nodes[i].originalX) === -1) {\n      distinctLayerPositions.push(nodes[i].originalX);\n    }\n  }\n  distinctLayerPositions.sort(function (a, b) { return a - b; });\n  for (i = 0; i < nodes.length; i++) {\n    nodes[i].originalLayerIndex = distinctLayerPositions.indexOf(nodes[i].originalX);\n    nodes[i].originalLayer = nodes[i].originalLayerIndex / (distinctLayerPositions.length - 1);\n  }\n}\n\nfunction saveCurrentDragPosition(d) {\n  d.lastDraggedX = d.x0 + d.dx / 2;\n  d.lastDraggedY = d.y0 + d.dy / 2;\n}\n\nfunction sameLayer(d) {\n  return function (n) { return n.node.originalX === d.node.originalX; };\n}\n\nfunction switchToForceFormat(nodes) {\n  // force uses x, y as centers\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y = (nodes[i].y0 + nodes[i].y1) / 2;\n    nodes[i].x = (nodes[i].x0 + nodes[i].x1) / 2;\n  }\n}\n\nfunction switchToSankeyFormat(nodes) {\n  // sankey uses x0, x1, y0, y1\n  for (var i = 0; i < nodes.length; i++) {\n    nodes[i].y0 = nodes[i].y - nodes[i].dy / 2;\n    nodes[i].y1 = nodes[i].y0 + nodes[i].dy;\n\n    nodes[i].x0 = nodes[i].x - nodes[i].dx / 2;\n    nodes[i].x1 = nodes[i].x0 + nodes[i].dx;\n  }\n}\n\n// scene graph\nmodule.exports = function (gd, svg, calcData, layout, callbacks) {\n  // To prevent animation on first render\n  var firstRender = false;\n  Lib.ensureSingle(gd._fullLayout._infolayer, 'g', 'first-render', function () {\n    firstRender = true;\n  });\n\n  // To prevent animation on dragging\n  var dragcover = gd._fullLayout._dragCover;\n\n  var styledData = calcData\n    .filter(function (d) { return unwrap(d).trace.visible; })\n    .map(sankeyModel.bind(null, layout));\n\n  var sankey = svg.selectAll('.' + c.cn.sankey)\n    .data(styledData, keyFun);\n\n  sankey.exit()\n    .remove();\n\n  sankey.enter()\n    .append('g')\n    .classed(c.cn.sankey, true)\n    .style('box-sizing', 'content-box')\n    .style('position', 'absolute')\n    .style('left', 0)\n    .style('shape-rendering', 'geometricPrecision')\n    .style('pointer-events', 'auto')\n    .attr('transform', sankeyTransform);\n\n  sankey.each(function (d, i) {\n    gd._fullData[i]._sankey = d;\n    // Create dragbox if missing\n    var dragboxClassName = 'bgsankey-' + d.trace.uid + '-' + i;\n    Lib.ensureSingle(gd._fullLayout._draggers, 'rect', dragboxClassName);\n\n    gd._fullData[i]._bgRect = d3.select('.' + dragboxClassName);\n\n    // Style dragbox\n    gd._fullData[i]._bgRect\n      .style('pointer-events', 'all')\n      .attr('width', d.width)\n      .attr('height', d.height)\n      .attr('x', d.translateX)\n      .attr('y', d.translateY)\n      .classed('bgsankey', true)\n      .style({ fill: 'transparent', 'stroke-width': 0 });\n  });\n\n  sankey.transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', sankeyTransform);\n\n  var sankeyLinks = sankey.selectAll('.' + c.cn.sankeyLinks)\n    .data(repeat, keyFun);\n\n  sankeyLinks.enter()\n    .append('g')\n    .classed(c.cn.sankeyLinks, true)\n    .style('fill', 'none');\n\n  var sankeyLink = sankeyLinks.selectAll('.' + c.cn.sankeyLink)\n    .data(function (d) {\n      var links = d.graph.links;\n      return links\n        .filter(function (l) { return l.value; })\n        .map(linkModel.bind(null, d));\n    }, keyFun);\n\n  sankeyLink\n    .enter().append('path')\n    .classed(c.cn.sankeyLink, true)\n    .call(attachPointerEvents, sankey, callbacks.linkEvents);\n\n  sankeyLink\n    .style('stroke', function (d) {\n      return salientEnough(d) ? Color.tinyRGB(tinycolor(d.linkLineColor)) : d.tinyColorHue;\n    })\n    .style('stroke-opacity', function (d) {\n      return salientEnough(d) ? Color.opacity(d.linkLineColor) : d.tinyColorAlpha;\n    })\n    .style('fill', function (d) {\n      return d.tinyColorHue;\n    })\n    .style('fill-opacity', function (d) {\n      return d.tinyColorAlpha;\n    })\n    .style('stroke-width', function (d) {\n      return salientEnough(d) ? d.linkLineWidth : 1;\n    })\n    .attr('d', linkPath());\n\n  sankeyLink\n    .style('opacity', function () { return (gd._context.staticPlot || firstRender || dragcover) ? 1 : 0; })\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 1);\n\n  sankeyLink.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var sankeyNodeSet = sankey.selectAll('.' + c.cn.sankeyNodeSet)\n    .data(repeat, keyFun);\n\n  sankeyNodeSet.enter()\n    .append('g')\n    .classed(c.cn.sankeyNodeSet, true);\n\n  sankeyNodeSet\n    .style('cursor', function (d) {\n      switch (d.arrangement) {\n        case 'fixed': return 'default';\n        case 'perpendicular': return 'ns-resize';\n        default: return 'move';\n      }\n    });\n\n  var sankeyNode = sankeyNodeSet.selectAll('.' + c.cn.sankeyNode)\n    .data(function (d) {\n      var nodes = d.graph.nodes;\n      persistOriginalPlace(nodes);\n      return nodes\n        .map(nodeModel.bind(null, d));\n    }, keyFun);\n\n  sankeyNode.enter()\n    .append('g')\n    .classed(c.cn.sankeyNode, true)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return ((gd._context.staticPlot || firstRender) && !n.partOfGroup) ? 1 : 0; });\n\n  sankeyNode\n    .call(attachPointerEvents, sankey, callbacks.nodeEvents)\n    .call(attachDragHandler, sankeyLink, callbacks, gd); // has to be here as it binds sankeyLink\n\n  sankeyNode\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .call(updateNodePositions)\n    .style('opacity', function (n) { return n.partOfGroup ? 0 : 1; });\n\n  sankeyNode.exit()\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .style('opacity', 0)\n    .remove();\n\n  var nodeRect = sankeyNode.selectAll('.' + c.cn.nodeRect)\n    .data(repeat);\n\n  nodeRect.enter()\n    .append('rect')\n    .classed(c.cn.nodeRect, true)\n    .call(sizeNode);\n\n  nodeRect\n    .style('stroke-width', function (d) { return d.nodeLineWidth; })\n    .style('stroke', function (d) { return Color.tinyRGB(tinycolor(d.nodeLineColor)); })\n    .style('stroke-opacity', function (d) { return Color.opacity(d.nodeLineColor); })\n    .style('fill', function (d) { return d.tinyColorHue; })\n    .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n\n  nodeRect.transition()\n    .ease(c.ease).duration(c.duration)\n    .call(sizeNode);\n\n  var nodeCapture = sankeyNode.selectAll('.' + c.cn.nodeCapture)\n    .data(repeat);\n\n  nodeCapture.enter()\n    .append('rect')\n    .classed(c.cn.nodeCapture, true)\n    .style('fill-opacity', 0);\n\n  nodeCapture\n    .attr('x', function (d) { return d.zoneX; })\n    .attr('y', function (d) { return d.zoneY; })\n    .attr('width', function (d) { return d.zoneWidth; })\n    .attr('height', function (d) { return d.zoneHeight; });\n\n  var nodeCentered = sankeyNode.selectAll('.' + c.cn.nodeCentered)\n    .data(repeat);\n\n  nodeCentered.enter()\n    .append('g')\n    .classed(c.cn.nodeCentered, true)\n    .attr('transform', nodeCentering);\n\n  nodeCentered\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', nodeCentering);\n\n  var nodeLabelGuide = nodeCentered.selectAll('.' + c.cn.nodeLabelGuide)\n    .data(repeat);\n\n  nodeLabelGuide.enter()\n    .append('path')\n    .classed(c.cn.nodeLabelGuide, true)\n    .attr('id', function (d) { return d.uniqueNodeLabelPathId; })\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  nodeLabelGuide\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('d', textGuidePath)\n    .attr('transform', sankeyInverseTransform);\n\n  var nodeLabel = nodeCentered.selectAll('.' + c.cn.nodeLabel)\n    .data(repeat);\n\n  nodeLabel.enter()\n    .append('text')\n    .classed(c.cn.nodeLabel, true)\n    .attr('transform', textFlip)\n    .style('user-select', 'none')\n    .style('cursor', 'default')\n    .style('fill', 'black');\n\n  nodeLabel\n    .style('text-shadow', function (d) {\n      return d.horizontal ? '-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff' : 'none';\n    })\n    .each(function (d) { Drawing.font(nodeLabel, d.textFont); });\n\n  nodeLabel\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('transform', textFlip);\n\n  var nodeLabelTextPath = nodeLabel.selectAll('.' + c.cn.nodeLabelTextPath)\n    .data(repeat);\n\n  nodeLabelTextPath.enter()\n    .append('textPath')\n    .classed(c.cn.nodeLabelTextPath, true)\n    .attr('alignment-baseline', 'middle')\n    .attr('xlink:href', function (d) { return '#' + d.uniqueNodeLabelPathId; })\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n\n  nodeLabelTextPath\n    .text(function (d) { return d.horizontal || d.node.dy > 5 ? d.node.label : ''; })\n    .attr('text-anchor', function (d) { return d.horizontal && d.left ? 'end' : 'start'; });\n\n  nodeLabelTextPath\n    .transition()\n    .ease(c.ease).duration(c.duration)\n    .attr('startOffset', nodeTextOffset)\n    .style('fill', nodeTextColor);\n};\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function has(key) {\n    return prefix + key in this;\n  },\n  get: function get(key) {\n    return this[prefix + key];\n  },\n  set: function set(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function remove(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function clear() {\n    for (var property in this) {\n      if (property[0] === prefix) delete this[property];\n    }\n  },\n  keys: function keys() {\n    var keys = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) keys.push(property.slice(1));\n    }\n\n    return keys;\n  },\n  values: function values() {\n    var values = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) values.push(this[property]);\n    }\n\n    return values;\n  },\n  entries: function entries() {\n    var entries = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) entries.push({\n        key: property.slice(1),\n        value: this[property]\n      });\n    }\n\n    return entries;\n  },\n  size: function size() {\n    var size = 0;\n\n    for (var property in this) {\n      if (property[0] === prefix) ++size;\n    }\n\n    return size;\n  },\n  empty: function empty() {\n    for (var property in this) {\n      if (property[0] === prefix) return false;\n    }\n\n    return true;\n  },\n  each: function each(f) {\n    for (var property in this) {\n      if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map(); // Copy constructor.\n\n  if (object instanceof Map) object.each(function (value, key) {\n    map.set(key, value);\n  }); // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f(o = object[i], i, object), o);\n      }\n    } // Convert object to map.\n    else if (object) for (var key in object) {\n        map.set(key, object[key]);\n      }\n  return map;\n}\n\nexport default map;","import map from \"./map\";\nexport default function () {\n  var keys = [],\n      _sortKeys = [],\n      _sortValues,\n      _rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (_sortValues != null) array.sort(_sortValues);\n      return _rollup != null ? _rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function (values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n    return result;\n  }\n\n  function _entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array,\n        sortKey = _sortKeys[depth - 1];\n    if (_rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {\n      array.push({\n        key: k,\n        values: _entries(v, depth)\n      });\n    });\n    return sortKey != null ? array.sort(function (a, b) {\n      return sortKey(a.key, b.key);\n    }) : array;\n  }\n\n  return nest = {\n    object: function object(array) {\n      return apply(array, 0, createObject, setObject);\n    },\n    map: function map(array) {\n      return apply(array, 0, createMap, setMap);\n    },\n    entries: function entries(array) {\n      return _entries(apply(array, 0, createMap, setMap), 0);\n    },\n    key: function key(d) {\n      keys.push(d);\n      return nest;\n    },\n    sortKeys: function sortKeys(order) {\n      _sortKeys[keys.length - 1] = order;\n      return nest;\n    },\n    sortValues: function sortValues(order) {\n      _sortValues = order;\n      return nest;\n    },\n    rollup: function rollup(f) {\n      _rollup = f;\n      return nest;\n    }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}","import { default as map, prefix } from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function add(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set(); // Copy constructor.\n\n  if (object instanceof Set) object.each(function (value) {\n    set.add(value);\n  }); // Otherwise, assume it’s an array.\n  else if (object) {\n      var i = -1,\n          n = object.length;\n      if (f == null) while (++i < n) {\n        set.add(object[i]);\n      } else while (++i < n) {\n        set.add(f(object[i], i, object));\n      }\n    }\n  return set;\n}\n\nexport default set;","var tarjan = require('strongly-connected-components');\n\nmodule.exports = function findCircuits(edges, cb) {\n  var circuits = []; // Output\n\n  var stack = [];\n  var blocked = [];\n  var B = {};\n  var Ak = [];\n  var s;\n\n  function unblock(u) {\n    blocked[u] = false;\n\n    if (B.hasOwnProperty(u)) {\n      Object.keys(B[u]).forEach(function (w) {\n        delete B[u][w];\n\n        if (blocked[w]) {\n          unblock(w);\n        }\n      });\n    }\n  }\n\n  function circuit(v) {\n    var found = false;\n    stack.push(v);\n    blocked[v] = true; // L1\n\n    var i;\n    var w;\n\n    for (i = 0; i < Ak[v].length; i++) {\n      w = Ak[v][i];\n\n      if (w === s) {\n        output(s, stack);\n        found = true;\n      } else if (!blocked[w]) {\n        found = circuit(w);\n      }\n    } // L2\n\n\n    if (found) {\n      unblock(v);\n    } else {\n      for (i = 0; i < Ak[v].length; i++) {\n        w = Ak[v][i];\n        var entry = B[w];\n\n        if (!entry) {\n          entry = {};\n          B[w] = entry;\n        }\n\n        entry[w] = true;\n      }\n    }\n\n    stack.pop();\n    return found;\n  }\n\n  function output(start, stack) {\n    var cycle = [].concat(stack).concat(start);\n\n    if (cb) {\n      cb(circuit);\n    } else {\n      circuits.push(cycle);\n    }\n  }\n\n  function subgraph(minId) {\n    // Remove edges with indice smaller than minId\n    for (var i = 0; i < edges.length; i++) {\n      if (i < minId) edges[i] = [];\n      edges[i] = edges[i].filter(function (i) {\n        return i >= minId;\n      });\n    }\n  }\n\n  function adjacencyStructureSCC(from) {\n    // Make subgraph starting from vertex minId\n    subgraph(from);\n    var g = edges; // Find strongly connected components using Tarjan algorithm\n\n    var sccs = tarjan(g); // Filter out trivial connected components (ie. made of one node)\n\n    var ccs = sccs.components.filter(function (scc) {\n      return scc.length > 1;\n    }); // Find least vertex\n\n    var leastVertex = Infinity;\n    var leastVertexComponent;\n\n    for (var i = 0; i < ccs.length; i++) {\n      for (var j = 0; j < ccs[i].length; j++) {\n        if (ccs[i][j] < leastVertex) {\n          leastVertex = ccs[i][j];\n          leastVertexComponent = i;\n        }\n      }\n    }\n\n    var cc = ccs[leastVertexComponent];\n    if (!cc) return false; // Return the adjacency list of first component\n\n    var adjList = edges.map(function (l, index) {\n      if (cc.indexOf(index) === -1) return [];\n      return l.filter(function (i) {\n        return cc.indexOf(i) !== -1;\n      });\n    });\n    return {\n      leastVertex: leastVertex,\n      adjList: adjList\n    };\n  }\n\n  s = 0;\n  var n = edges.length;\n\n  while (s < n) {\n    // find strong component with least vertex in\n    // subgraph starting from vertex `s`\n    var p = adjacencyStructureSCC(s); // Its least vertex\n\n    s = p.leastVertex; // Its adjacency list\n\n    Ak = p.adjList;\n\n    if (Ak) {\n      for (var i = 0; i < Ak.length; i++) {\n        for (var j = 0; j < Ak[i].length; j++) {\n          var vertexId = Ak[i][j];\n          blocked[+vertexId] = false;\n          B[vertexId] = {};\n        }\n      }\n\n      circuit(s);\n      s = s + 1;\n    } else {\n      s = n;\n    }\n  }\n\n  if (cb) {\n    return;\n  } else {\n    return circuits;\n  }\n};","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar fontAttrs = require('../../plots/font_attributes');\n\nvar baseAttrs = require('../../plots/attributes');\n\nvar colorAttrs = require('../../components/color/attributes');\n\nvar fxAttrs = require('../../components/fx/attributes');\n\nvar domainAttrs = require('../../plots/domain').attributes;\n\nvar hovertemplateAttrs = require('../../plots/template_attributes').hovertemplateAttrs;\n\nvar colorAttributes = require('../../components/colorscale/attributes');\n\nvar templatedArray = require('../../plot_api/plot_template').templatedArray;\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nvar overrideAll = require('../../plot_api/edit_types').overrideAll;\n\nvar FORMAT_LINK = require('../../constants/docs').FORMAT_LINK;\n\nvar attrs = module.exports = overrideAll({\n  hoverinfo: extendFlat({}, baseAttrs.hoverinfo, {\n    flags: [],\n    arrayOk: false,\n    description: ['Determines which trace information appear on hover.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.', 'Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`', 'for nodes and links respectively.'].join(' ')\n  }),\n  hoverlabel: fxAttrs.hoverlabel,\n  domain: domainAttrs({\n    name: 'sankey',\n    trace: true\n  }),\n  orientation: {\n    valType: 'enumerated',\n    values: ['v', 'h'],\n    dflt: 'h',\n    role: 'style',\n    description: 'Sets the orientation of the Sankey diagram.'\n  },\n  valueformat: {\n    valType: 'string',\n    dflt: '.3s',\n    role: 'style',\n    description: ['Sets the value formatting rule using d3 formatting mini-language', 'which is similar to those of Python. See', FORMAT_LINK].join(' ')\n  },\n  valuesuffix: {\n    valType: 'string',\n    dflt: '',\n    role: 'style',\n    description: ['Adds a unit to follow the value in the hover tooltip. Add a space if a separation', 'is necessary from the value.'].join(' ')\n  },\n  arrangement: {\n    valType: 'enumerated',\n    values: ['snap', 'perpendicular', 'freeform', 'fixed'],\n    dflt: 'snap',\n    role: 'style',\n    description: ['If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to', 'preserve space between nodes specified via `nodepad`.', 'If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.', 'If value is `freeform`, the nodes can freely move on the plane.', 'If value is `fixed`, the nodes are stationary.'].join(' ')\n  },\n  textfont: fontAttrs({\n    description: 'Sets the font for node labels'\n  }),\n  // Remove top-level customdata\n  customdata: undefined,\n  node: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the node.'\n    },\n    groups: {\n      valType: 'info_array',\n      impliedEdits: {\n        'x': [],\n        'y': []\n      },\n      dimensions: 2,\n      freeLength: true,\n      dflt: [],\n      items: {\n        valType: 'number',\n        editType: 'calc'\n      },\n      role: 'info',\n      description: ['Groups of nodes.', 'Each group is defined by an array with the indices of the nodes it contains.', 'Multiple groups can be specified.'].join(' ')\n    },\n    x: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized horizontal position of the node.'\n    },\n    y: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The normalized vertical position of the node.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.', 'If `node.color` is omitted, then the default `Plotly` color palette will be cycled through', 'to have a variety of colors. These defaults are not fully opaque, to allow some visibility of', 'what is beneath the node.'].join(' ')\n    },\n    customdata: {\n      valType: 'data_array',\n      editType: 'calc',\n      description: ['Assigns extra data to each node.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `node`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0.5,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `node`.'].join(' ')\n      }\n    },\n    pad: {\n      valType: 'number',\n      arrayOk: false,\n      min: 0,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the padding (in px) between the `nodes`.'\n    },\n    thickness: {\n      valType: 'number',\n      arrayOk: false,\n      min: 1,\n      dflt: 20,\n      role: 'style',\n      description: 'Sets the thickness (in px) of the `nodes`.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering nodes.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `sourceLinks` and `targetLinks` are arrays of link objects.',\n      keys: ['value', 'label']\n    }),\n    description: 'The nodes of the Sankey plot.'\n  },\n  link: {\n    label: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'The shown name of the link.'\n    },\n    color: {\n      valType: 'color',\n      role: 'style',\n      arrayOk: true,\n      description: ['Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.', 'If `link.color` is omitted, then by default, a translucent grey link will be used.'].join(' ')\n    },\n    customdata: {\n      valType: 'data_array',\n      editType: 'calc',\n      description: ['Assigns extra data to each link.'].join(' ')\n    },\n    line: {\n      color: {\n        valType: 'color',\n        role: 'style',\n        dflt: colorAttrs.defaultLine,\n        arrayOk: true,\n        description: ['Sets the color of the `line` around each `link`.'].join(' ')\n      },\n      width: {\n        valType: 'number',\n        role: 'style',\n        min: 0,\n        dflt: 0,\n        arrayOk: true,\n        description: ['Sets the width (in px) of the `line` around each `link`.'].join(' ')\n      }\n    },\n    source: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the source node.'\n    },\n    target: {\n      valType: 'data_array',\n      role: 'info',\n      dflt: [],\n      description: 'An integer number `[0..nodes.length - 1]` that represents the target node.'\n    },\n    value: {\n      valType: 'data_array',\n      dflt: [],\n      role: 'info',\n      description: 'A numeric value representing the flow volume value.'\n    },\n    hoverinfo: {\n      valType: 'enumerated',\n      values: ['all', 'none', 'skip'],\n      dflt: 'all',\n      role: 'info',\n      description: ['Determines which trace information appear when hovering links.', 'If `none` or `skip` are set, no information is displayed upon hovering.', 'But, if `none` is set, click and hover events are still fired.'].join(' ')\n    },\n    hoverlabel: fxAttrs.hoverlabel,\n    // needs editType override,\n    hovertemplate: hovertemplateAttrs({}, {\n      description: 'Variables `source` and `target` are node objects.',\n      keys: ['value', 'label']\n    }),\n    colorscales: templatedArray('concentrationscales', {\n      editType: 'calc',\n      label: {\n        valType: 'string',\n        role: 'info',\n        editType: 'calc',\n        description: 'The label of the links to color based on their concentration within a flow.',\n        dflt: ''\n      },\n      cmax: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 1,\n        description: ['Sets the upper bound of the color domain.'].join('')\n      },\n      cmin: {\n        valType: 'number',\n        role: 'info',\n        editType: 'calc',\n        dflt: 0,\n        description: ['Sets the lower bound of the color domain.'].join('')\n      },\n      colorscale: extendFlat(colorAttributes().colorscale, {\n        dflt: [[0, 'white'], [1, 'black']]\n      })\n    }),\n    description: 'The links of the Sankey plot.',\n    role: 'info'\n  }\n}, 'calc', 'nested');\nattrs.transforms = undefined;","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nmodule.exports = {\n  attributes: require('plotly.js/src/traces/sankey/attributes'),\n  supplyDefaults: require('plotly.js/src/traces/sankey/defaults'),\n  calc: require('plotly.js/src/traces/sankey/calc'),\n  plot: require('./plot'),\n\n  moduleType: 'trace',\n  name: 'sankey',\n  basePlotModule: require('./base_plot'),\n  selectPoints: require('plotly.js/src/traces/sankey/select.js'),\n  categories: ['noOpacity'],\n  meta: {\n    description: [\n      'Sankey plots for network flow data analysis.',\n      'The nodes are specified in `nodes` and the links between sources and targets in `links`.',\n      'The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used.'\n    ].join(' ')\n  }\n};\n","/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\nvar d3 = require('d3');\nvar render = require('./render');\nvar Fx = require('plotly.js/src/components/fx');\nvar Color = require('plotly.js/src/components/color');\nvar Lib = require('plotly.js/src/lib');\nvar cn = require('plotly.js/src/traces/sankey/constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) { return d !== ''; }\n\nfunction ownTrace(selection, d) {\n  return selection.filter(function (s) { return s.key === d.traceId; });\n}\n\nfunction makeTranslucent(element, alpha) {\n  d3.select(element)\n    .select('path')\n    .style('fill-opacity', alpha);\n  d3.select(element)\n    .select('rect')\n    .style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n  d3.select(element)\n    .select('text.name')\n    .style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n  return function (l) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction relatedNodes(l) {\n  return function (d) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(relatedLinks(d))\n      .call(linkNonHoveredStyle.bind(0, d, sankey, false));\n  }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (l) {\n    if (!l.link.concentrationscale) {\n      return 0.4;\n    }\n  });\n\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (l) {\n        if (!l.link.concentrationscale) {\n          return 0.4;\n        }\n      });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeHoveredStyle);\n  }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  var label = sankeyLink.datum().link.label;\n\n  sankeyLink.style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  if (label) {\n    ownTrace(sankey, d)\n      .selectAll('.' + cn.sankeyLink)\n      .filter(function (l) { return l.link.label === label; })\n      .style('fill-opacity', function (d) { return d.tinyColorAlpha; });\n  }\n\n  if (visitNodes) {\n    ownTrace(sankey, d)\n      .selectAll(cn.sankeyNode)\n      .filter(relatedNodes(d))\n      .call(nodeNonHoveredStyle);\n  }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n  var labelOpts = trace.hoverlabel || {};\n  var val = Lib.nestedProperty(labelOpts, attr).get();\n  return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._paper;\n  var size = fullLayout._size;\n\n  // stash initial view\n  for (var i = 0; i < gd._fullData.length; i++) {\n    if (!gd._fullData[i].visible) continue;\n    if (gd._fullData[i].type !== cn.sankey) continue;\n    if (!gd._fullData[i]._viewInitial) {\n      var node = gd._fullData[i].node;\n      gd._fullData[i]._viewInitial = {\n        node: {\n          groups: node.groups.slice(),\n          x: node.x.slice(),\n          y: node.y.slice()\n        }\n      };\n    }\n  }\n\n  var linkSelect = function (element, d) {\n    var evt = d.link;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    Fx.click(gd, { target: true });\n  };\n\n  var linkHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n  };\n\n  var sourceLabel = _(gd, 'source:') + ' ';\n  var targetLabel = _(gd, 'target:') + ' ';\n  var concentrationLabel = _(gd, 'concentration:') + ' ';\n  var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n  var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n  var linkHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.link.trace.link;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n\n    var hoverItems = [];\n\n    function hoverCenterPosition(link) {\n      var hoverCenterX, hoverCenterY;\n      if (link.circular) {\n        hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n        hoverCenterY = link.circularPathData.verticalFullExtent;\n      } else {\n        hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n        hoverCenterY = (link.y0 + link.y1) / 2;\n      }\n      var center = [hoverCenterX, hoverCenterY];\n      if (link.trace.orientation === 'v') center.reverse();\n      center[0] += d.parent.translateX;\n      center[1] += d.parent.translateY;\n      return center;\n    }\n\n    // For each related links, create a hoverItem\n    var anchorIndex = 0;\n    for (var i = 0; i < d.flow.links.length; i++) {\n      var link = d.flow.links[i];\n      if (gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n      if (d.link.pointNumber === link.pointNumber) anchorIndex = i;\n      link.fullData = link.trace;\n      obj = d.link.trace.link;\n      var hoverCenter = hoverCenterPosition(link);\n      var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(link.value) + d.valueSuffix };\n\n      hoverItems.push({\n        x: hoverCenter[0],\n        y: hoverCenter[1],\n        name: hovertemplateLabels.valueLabel,\n        text: [\n          link.label || '',\n          sourceLabel + link.source.label,\n          targetLabel + link.target.label,\n          link.concentrationscale ? concentrationLabel + d3.format('%0.2f')(link.flow.labelConcentration) : ''\n        ].filter(renderableValuePresent).join('<br>'),\n        color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n        borderColor: castHoverOption(obj, 'bordercolor'),\n        fontFamily: castHoverOption(obj, 'font.family'),\n        fontSize: castHoverOption(obj, 'font.size'),\n        fontColor: castHoverOption(obj, 'font.color'),\n        nameLength: castHoverOption(obj, 'namelength'),\n        textAlign: castHoverOption(obj, 'align'),\n        idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n\n        hovertemplate: obj.hovertemplate,\n        hovertemplateLabels: hovertemplateLabels,\n        eventData: [link]\n      });\n    }\n\n    var tooltips = Fx.loneHover(hoverItems, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd,\n      anchorIndex: anchorIndex\n    });\n\n    tooltips.each(function () {\n      var tooltip = this;\n      if (!d.link.concentrationscale) {\n        makeTranslucent(tooltip, 0.65);\n      }\n      makeTextContrasty(tooltip);\n    });\n  };\n\n  var linkUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  var nodeSelect = function (element, d, sankey) {\n    var evt = d.node;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    Fx.click(gd, { target: true });\n  };\n\n  var nodeHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n  };\n\n  var nodeHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n\n    var obj = d.node.trace.node;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n    var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n    var boundingBox = nodeRect.node().getBoundingClientRect();\n    var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n    var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n    var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n\n    var hovertemplateLabels = { valueLabel: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix };\n    d.node.fullData = d.node.trace;\n\n    var tooltip = Fx.loneHover({\n      x0: hoverCenterX0,\n      x1: hoverCenterX1,\n      y: hoverCenterY,\n      name: d3.format(d.valueFormat)(d.node.value) + d.valueSuffix,\n      text: [\n        d.node.label,\n        incomingLabel + d.node.targetLinks.length,\n        outgoingLabel + d.node.sourceLinks.length\n      ].filter(renderableValuePresent).join('<br>'),\n      color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n      borderColor: castHoverOption(obj, 'bordercolor'),\n      fontFamily: castHoverOption(obj, 'font.family'),\n      fontSize: castHoverOption(obj, 'font.size'),\n      fontColor: castHoverOption(obj, 'font.color'),\n      nameLength: castHoverOption(obj, 'namelength'),\n      textAlign: castHoverOption(obj, 'align'),\n      idealAlign: 'left',\n\n      hovertemplate: obj.hovertemplate,\n      hovertemplateLabels: hovertemplateLabels,\n      eventData: [d.node]\n    }, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd\n    });\n\n    makeTranslucent(tooltip, 0.85);\n    makeTextContrasty(tooltip);\n  };\n\n  var nodeUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n\n  render(\n    gd,\n    svg,\n    calcData,\n    {\n      width: size.w,\n      height: size.h,\n      margin: {\n        t: size.t,\n        r: size.r,\n        b: size.b,\n        l: size.l\n      }\n    },\n    {\n      linkEvents: {\n        hover: linkHover,\n        follow: linkHoverFollow,\n        unhover: linkUnhover,\n        select: linkSelect\n      },\n      nodeEvents: {\n        hover: nodeHover,\n        follow: nodeHoverFollow,\n        unhover: nodeUnhover,\n        select: nodeSelect\n      }\n    }\n  );\n};\n","export default function (constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n\n  for (var key in definition) {\n    prototype[key] = definition[key];\n  }\n\n  return prototype;\n}","import define, { extend } from \"./define.js\";\nexport function Color() {}\nvar _darker = 0.7;\nexport { _darker as darker };\n\nvar _brighter = 1 / _darker;\n\nexport { _brighter as brighter };\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\ndefine(Color, color, {\n  copy: function copy(channels) {\n    return Object.assign(new this.constructor(), this, channels);\n  },\n  displayable: function displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n  : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n  : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n  : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n  : null // invalid hex\n  ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n  : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n  : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n  : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n  : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n  : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n  : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n  : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb();\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function rgb() {\n    return this;\n  },\n  displayable: function displayable() {\n    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  hex: rgb_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity;\n  a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl();\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n\n  return new Hsl(h, s, l, o.opacity);\n}\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n  },\n  displayable: function displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n  },\n  formatHsl: function formatHsl() {\n    var a = this.opacity;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\") + (this.h || 0) + \", \" + (this.s || 0) * 100 + \"%, \" + (this.l || 0) * 100 + \"%\" + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n/* From FvD 13.37, CSS Color Module Level 3 */\n\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n}","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1,\n      t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;\n}\nexport default function (values) {\n  var n = values.length - 1;\n  return function (t) {\n    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","import { basis } from \"./basis.js\";\nexport default function (values) {\n  var n = values.length;\n  return function (t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function (t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function (a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}","import { rgb as colorRgb } from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, { gamma } from \"./color.js\";\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function (t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function (colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i,\n        color;\n\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function (t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);","export default function (a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function (t) {\n    for (i = 0; i < n; ++i) {\n      c[i] = a[i] * (1 - t) + b[i] * t;\n    }\n\n    return c;\n  };\n}\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}","import value from \"./value.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) {\n    x[i] = value(a[i], b[i]);\n  }\n\n  for (; i < nb; ++i) {\n    c[i] = b[i];\n  }\n\n  return function (t) {\n    for (i = 0; i < na; ++i) {\n      c[i] = x[i](t);\n    }\n\n    return c;\n  };\n}","export default function (a, b) {\n  var d = new Date();\n  return a = +a, b = +b, function (t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return a * (1 - t) + b * t;\n  };\n}","import value from \"./value.js\";\nexport default function (a, b) {\n  var i = {},\n      c = {},\n      k;\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function (t) {\n    for (k in i) {\n      c[k] = i[k](t);\n    }\n\n    return c;\n  };\n}","import number from \"./number.js\";\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function () {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function (t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function (a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0,\n      // scan index for next number in b\n  am,\n      // current match in a\n  bm,\n      // current match in b\n  bs,\n      // string preceding current number in b, if any\n  i = -1,\n      // index in s\n  s = [],\n      // string constants and placeholders\n  q = []; // number interpolators\n  // Coerce inputs to strings.\n\n  a = a + \"\", b = b + \"\"; // Interpolate pairs of numbers in a & b.\n\n  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) {\n      // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    if ((am = am[0]) === (bm = bm[0])) {\n      // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else {\n      // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({\n        i: i,\n        x: number(am, bm)\n      });\n    }\n\n    bi = reB.lastIndex;\n  } // Add remains of b.\n\n\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  } // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n\n\n  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n    for (var i = 0, o; i < b; ++i) {\n      s[(o = q[i]).i] = o.x(t);\n    }\n\n    return s.join(\"\");\n  });\n}","import decompose, { identity } from \"./decompose.js\";\nvar cssNode, cssRoot, cssView, svgNode;\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}","import { color } from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport { genericArray } from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, { isNumberArray } from \"./numberArray.js\";\nexport default function (a, b) {\n  var t = typeof b,\n      c;\n  return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? number : t === \"string\" ? (c = color(b)) ? (b = c, rgb) : string : b instanceof color ? rgb : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : number)(a, b);\n}","export default function (range) {\n  var n = range.length;\n  return function (t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}","import { hue } from \"./color.js\";\nexport default function (a, b) {\n  var i = hue(+a, +b);\n  return function (t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n}","export default function (a, b) {\n  return a = +a, b = +b, function (t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}","var degrees = 180 / Math.PI;\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\nexport default function (a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}","import number from \"../number.js\";\nimport { parseCss, parseSvg } from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360;else if (b - a > 180) a += 360; // shortest path\n\n      q.push({\n        i: s.push(pop(s) + \"rotate(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({\n        i: s.push(pop(s) + \"skewX(\", null, degParen) - 2,\n        x: number(a, b)\n      });\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: number(xa, xb)\n      }, {\n        i: i - 2,\n        x: number(ya, yb)\n      });\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function (a, b) {\n    var s = [],\n        // string constants and placeholders\n    q = []; // number interpolators\n\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n\n    return function (t) {\n      var i = -1,\n          n = q.length,\n          o;\n\n      while (++i < n) {\n        s[(o = q[i]).i] = o.x(t);\n      }\n\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n} // p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\n\n\nexport default function (p0, p1) {\n  var ux0 = p0[0],\n      uy0 = p0[1],\n      w0 = p0[2],\n      ux1 = p1[0],\n      uy1 = p1[1],\n      w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S; // Special case for u0 ≅ u1.\n\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n\n    i = function i(t) {\n      return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(rho * t * S)];\n    };\n  } // General case.\n  else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n\n      i = function i(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / cosh(rho * s + r0)];\n      };\n    }\n\n  i.duration = S * 1000;\n  return i;\n}","import { hsl as colorHsl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hsl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\"; // https://observablehq.com/@mbostock/lab-and-rgb\n\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn),\n      x,\n      z;\n  if (r === g && g === b) x = z = y;else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Lab, lab, extend(Color, {\n  brighter: function brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));","import { lab as colorLab } from \"d3-color\";\nimport color from \"./color.js\";\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function (t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}","import { hcl as colorHcl } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction hcl(hue) {\n  return function (start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function (t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  };\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);","import define, { extend } from \"./define.js\";\nimport { Color, rgbConvert, Rgb, darker as _darker, brighter as _brighter } from \"./color.js\";\nimport { deg2rad, rad2deg } from \"./math.js\";\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)),\n      // NaN if l=0 or l=1\n  h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function brighter(k) {\n    k = k == null ? _brighter : Math.pow(_brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function darker(k) {\n    k = k == null ? _darker : Math.pow(_darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(255 * (l + a * (A * cosh + B * sinh)), 255 * (l + a * (C * cosh + D * sinh)), 255 * (l + a * (E * cosh)), this.opacity);\n  }\n}));","import { cubehelix as colorCubehelix } from \"d3-color\";\nimport color, { hue } from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function (t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n    return cubehelix;\n  }(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);","export default function piecewise(interpolate, values) {\n  var i = 0,\n      n = values.length - 1,\n      v = values[0],\n      I = new Array(n < 0 ? 0 : n);\n\n  while (i < n) {\n    I[i] = interpolate(v, v = values[++i]);\n  }\n\n  return function (t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}","export default function (interpolator, n) {\n  var samples = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    samples[i] = interpolator(i / (n - 1));\n  }\n\n  return samples;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function sum(values, valueof) {\n  var sum = 0;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if (_value = +valueof(_value, ++index, values)) {\n          sum += _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return sum;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function max(values, valueof) {\n  var max;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (max < _value || max === undefined && _value >= _value)) {\n          max = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return max;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function min(values, valueof) {\n  var min;\n\n  if (valueof === undefined) {\n    var _iterator = _createForOfIteratorHelper(values),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var value = _step.value;\n\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    var index = -1;\n\n    var _iterator2 = _createForOfIteratorHelper(values),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _value = _step2.value;\n\n        if ((_value = valueof(_value, ++index, values)) != null && (min > _value || min === undefined && _value >= _value)) {\n          min = _value;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return min;\n}","import { min } from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\nexport function center(node) {\n  return node.targetLinks.length ? node.depth : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1 : 0;\n}","export default function constant(x) {\n  return function () {\n    return x;\n  };\n}","import _slicedToArray from \"/Users/astefanu/Development/website/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { max, min, sum } from \"d3-array\";\nimport { justify } from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths(_ref) {\n  var nodes = _ref.nodes;\n\n  var _iterator = _createForOfIteratorHelper(nodes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var y0 = node.y0;\n      var y1 = y0;\n\n      var _iterator2 = _createForOfIteratorHelper(node.sourceLinks),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var link = _step2.value;\n          link.y0 = y0 + link.width / 2;\n          y0 += link.width;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(node.targetLinks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _link = _step3.value;\n          _link.y1 = y1 + _link.width / 2;\n          y1 += _link.width;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nexport default function Sankey() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1; // extent\n\n  var dx = 24; // nodeWidth\n\n  var dy = 8,\n      py; // nodePadding\n\n  var id = defaultId;\n  var align = justify;\n  var sort;\n  var linkSort;\n  var nodes = defaultNodes;\n  var links = defaultLinks;\n  var iterations = 6;\n\n  function sankey() {\n    var graph = {\n      nodes: nodes.apply(null, arguments),\n      links: links.apply(null, arguments)\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks(_ref2) {\n    var nodes = _ref2.nodes,\n        links = _ref2.links;\n\n    var _iterator4 = _createForOfIteratorHelper(nodes.entries()),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var _step4$value = _slicedToArray(_step4.value, 2),\n            i = _step4$value[0],\n            node = _step4$value[1];\n\n        node.index = i;\n        node.sourceLinks = [];\n        node.targetLinks = [];\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    }));\n\n    var _iterator5 = _createForOfIteratorHelper(links.entries()),\n        _step5;\n\n    try {\n      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n        var _step5$value = _slicedToArray(_step5.value, 2),\n            _i = _step5$value[0],\n            link = _step5$value[1];\n\n        link.index = _i;\n        var source = link.source,\n            target = link.target;\n        if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n        if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n        source.sourceLinks.push(link);\n        target.targetLinks.push(link);\n      }\n    } catch (err) {\n      _iterator5.e(err);\n    } finally {\n      _iterator5.f();\n    }\n\n    if (linkSort != null) {\n      var _iterator6 = _createForOfIteratorHelper(nodes),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _step6$value = _step6.value,\n              sourceLinks = _step6$value.sourceLinks,\n              targetLinks = _step6$value.targetLinks;\n          sourceLinks.sort(linkSort);\n          targetLinks.sort(linkSort);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }\n\n  function computeNodeValues(_ref3) {\n    var nodes = _ref3.nodes;\n\n    var _iterator7 = _createForOfIteratorHelper(nodes),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var node = _step7.value;\n        node.value = node.fixedValue === undefined ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value)) : node.fixedValue;\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n  }\n\n  function computeNodeDepths(_ref4) {\n    var nodes = _ref4.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator8 = _createForOfIteratorHelper(current),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var node = _step8.value;\n          node.depth = x;\n\n          var _iterator9 = _createForOfIteratorHelper(node.sourceLinks),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var target = _step9.value.target;\n              next.add(target);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeHeights(_ref5) {\n    var nodes = _ref5.nodes;\n    var n = nodes.length;\n    var current = new Set(nodes);\n    var next = new Set();\n    var x = 0;\n\n    while (current.size) {\n      var _iterator10 = _createForOfIteratorHelper(current),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var node = _step10.value;\n          node.height = x;\n\n          var _iterator11 = _createForOfIteratorHelper(node.targetLinks),\n              _step11;\n\n          try {\n            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n              var source = _step11.value.source;\n              next.add(source);\n            }\n          } catch (err) {\n            _iterator11.e(err);\n          } finally {\n            _iterator11.f();\n          }\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers(_ref6) {\n    var nodes = _ref6.nodes;\n    var x = max(nodes, function (d) {\n      return d.depth;\n    }) + 1;\n    var kx = (x1 - x0 - dx) / (x - 1);\n    var columns = new Array(x);\n\n    var _iterator12 = _createForOfIteratorHelper(nodes),\n        _step12;\n\n    try {\n      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n        var node = _step12.value;\n        var i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n        node.layer = i;\n        node.x0 = x0 + i * kx;\n        node.x1 = node.x0 + dx;\n        if (columns[i]) columns[i].push(node);else columns[i] = [node];\n      }\n    } catch (err) {\n      _iterator12.e(err);\n    } finally {\n      _iterator12.f();\n    }\n\n    if (sort) {\n      var _iterator13 = _createForOfIteratorHelper(columns),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var column = _step13.value;\n          column.sort(sort);\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n    }\n\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    var ky = min(columns, function (c) {\n      return (y1 - y0 - (c.length - 1) * py) / sum(c, value);\n    });\n\n    var _iterator14 = _createForOfIteratorHelper(columns),\n        _step14;\n\n    try {\n      for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n        var _nodes = _step14.value;\n        var y = y0;\n\n        var _iterator15 = _createForOfIteratorHelper(_nodes),\n            _step15;\n\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _node = _step15.value;\n            _node.y0 = y;\n            _node.y1 = y + _node.value * ky;\n            y = _node.y1 + py;\n\n            var _iterator16 = _createForOfIteratorHelper(_node.sourceLinks),\n                _step16;\n\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var link = _step16.value;\n                link.width = link.value * ky;\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n\n        y = (y1 - y + py) / (_nodes.length + 1);\n\n        for (var i = 0; i < _nodes.length; ++i) {\n          var node = _nodes[i];\n          node.y0 += y * (i + 1);\n          node.y1 += y * (i + 1);\n        }\n\n        reorderLinks(_nodes);\n      }\n    } catch (err) {\n      _iterator14.e(err);\n    } finally {\n      _iterator14.f();\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, function (c) {\n      return c.length;\n    }) - 1));\n    initializeNodeBreadths(columns);\n\n    for (var i = 0; i < iterations; ++i) {\n      var alpha = Math.pow(0.99, i);\n      var beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  } // Reposition each node based on its incoming (target) links.\n\n\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (var i = 1, n = columns.length; i < n; ++i) {\n      var column = columns[i];\n\n      var _iterator17 = _createForOfIteratorHelper(column),\n          _step17;\n\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var target = _step17.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator18 = _createForOfIteratorHelper(target.targetLinks),\n              _step18;\n\n          try {\n            for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n              var _step18$value = _step18.value,\n                  source = _step18$value.source,\n                  _value = _step18$value.value;\n              var v = _value * (target.layer - source.layer);\n              y += targetTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator18.e(err);\n          } finally {\n            _iterator18.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy = (y / w - target.y0) * alpha;\n\n          target.y0 += _dy;\n          target.y1 += _dy;\n          reorderNodeLinks(target);\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  } // Reposition each node based on its outgoing (source) links.\n\n\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (var n = columns.length, i = n - 2; i >= 0; --i) {\n      var column = columns[i];\n\n      var _iterator19 = _createForOfIteratorHelper(column),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var source = _step19.value;\n          var y = 0;\n          var w = 0;\n\n          var _iterator20 = _createForOfIteratorHelper(source.sourceLinks),\n              _step20;\n\n          try {\n            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n              var _step20$value = _step20.value,\n                  target = _step20$value.target,\n                  _value2 = _step20$value.value;\n              var v = _value2 * (target.layer - source.layer);\n              y += sourceTop(source, target) * v;\n              w += v;\n            }\n          } catch (err) {\n            _iterator20.e(err);\n          } finally {\n            _iterator20.f();\n          }\n\n          if (!(w > 0)) continue;\n\n          var _dy2 = (y / w - source.y0) * alpha;\n\n          source.y0 += _dy2;\n          source.y1 += _dy2;\n          reorderNodeLinks(source);\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    var i = nodes.length >> 1;\n    var subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  } // Push any overlapping nodes down.\n\n\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      var node = nodes[i];\n\n      var _dy3 = (y - node.y0) * alpha;\n\n      if (_dy3 > 1e-6) node.y0 += _dy3, node.y1 += _dy3;\n      y = node.y1 + py;\n    }\n  } // Push any overlapping nodes up.\n\n\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      var node = nodes[i];\n\n      var _dy4 = (node.y1 - y) * alpha;\n\n      if (_dy4 > 1e-6) node.y0 -= _dy4, node.y1 -= _dy4;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks(_ref7) {\n    var sourceLinks = _ref7.sourceLinks,\n        targetLinks = _ref7.targetLinks;\n\n    if (linkSort === undefined) {\n      var _iterator21 = _createForOfIteratorHelper(targetLinks),\n          _step21;\n\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var _sourceLinks = _step21.value.source.sourceLinks;\n\n          _sourceLinks.sort(ascendingTargetBreadth);\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n\n      var _iterator22 = _createForOfIteratorHelper(sourceLinks),\n          _step22;\n\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _targetLinks = _step22.value.target.targetLinks;\n\n          _targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      var _iterator23 = _createForOfIteratorHelper(nodes),\n          _step23;\n\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var _step23$value = _step23.value,\n              sourceLinks = _step23$value.sourceLinks,\n              targetLinks = _step23$value.targetLinks;\n          sourceLinks.sort(ascendingTargetBreadth);\n          targetLinks.sort(ascendingSourceBreadth);\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n    }\n  } // Returns the target.y0 that would produce an ideal link from source to target.\n\n\n  function targetTop(source, target) {\n    var y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n\n    var _iterator24 = _createForOfIteratorHelper(source.sourceLinks),\n        _step24;\n\n    try {\n      for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n        var _step24$value = _step24.value,\n            node = _step24$value.target,\n            width = _step24$value.width;\n        if (node === target) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator24.e(err);\n    } finally {\n      _iterator24.f();\n    }\n\n    var _iterator25 = _createForOfIteratorHelper(target.targetLinks),\n        _step25;\n\n    try {\n      for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n        var _step25$value = _step25.value,\n            _node2 = _step25$value.source,\n            _width = _step25$value.width;\n        if (_node2 === source) break;\n        y -= _width;\n      }\n    } catch (err) {\n      _iterator25.e(err);\n    } finally {\n      _iterator25.f();\n    }\n\n    return y;\n  } // Returns the source.y0 that would produce an ideal link from source to target.\n\n\n  function sourceTop(source, target) {\n    var y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n\n    var _iterator26 = _createForOfIteratorHelper(target.targetLinks),\n        _step26;\n\n    try {\n      for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n        var _step26$value = _step26.value,\n            node = _step26$value.source,\n            width = _step26$value.width;\n        if (node === source) break;\n        y += width + py;\n      }\n    } catch (err) {\n      _iterator26.e(err);\n    } finally {\n      _iterator26.f();\n    }\n\n    var _iterator27 = _createForOfIteratorHelper(source.sourceLinks),\n        _step27;\n\n    try {\n      for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n        var _step27$value = _step27.value,\n            _node3 = _step27$value.target,\n            _width2 = _step27$value.width;\n        if (_node3 === target) break;\n        y -= _width2;\n      }\n    } catch (err) {\n      _iterator27.e(err);\n    } finally {\n      _iterator27.f();\n    }\n\n    return y;\n  }\n\n  return sankey;\n}","import { linkHorizontal } from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function () {\n  return linkHorizontal().source(horizontalSource).target(horizontalTarget);\n}"],"sourceRoot":""}